"use strict";(self.webpackChunkasi_somos_asi_bailamos=self.webpackChunkasi_somos_asi_bailamos||[]).push([[179],{2011:(wt,Oe,V)=>{V.d(Oe,{Dh:()=>ve,GT:()=>ye,cc:()=>ke,hO:()=>$e,on:()=>q,pX:()=>le,xv:()=>we});var l=V(4650),j=V(9260),O=V(4976);wt=V.hmd(wt);const re=["ngOnDestroy"],le=(_e,_t,pt,Se={})=>new Proxy(_e,{get:(Ie,xe)=>pt.runOutsideAngular(()=>{var Ge;if(_e[xe])return!(null===(Ge=Se?.spy)||void 0===Ge)&&Ge.get&&Se.spy.get(xe,_e[xe]),_e[xe];if(re.indexOf(xe)>-1)return()=>{};const ze=_t.toPromise().then(ue=>{const Ke=ue&&ue[xe];return"function"==typeof Ke?Ke.bind(ue):Ke&&Ke.then?Ke.then(At=>pt.run(()=>At)):pt.run(()=>Ke)});return new Proxy(()=>{},{get:(ue,Ke)=>ze[Ke],apply:(ue,Ke,At)=>ze.then(gt=>{var Gt;const ct=gt&&gt(...At);return!(null===(Gt=Se?.spy)||void 0===Gt)&&Gt.apply&&Se.spy.apply(xe,At,ct),ct})})})}),ye=(_e,_t)=>{_t.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(Se=>{Object.defineProperty(_e.prototype,Se,Object.getOwnPropertyDescriptor(pt.prototype||pt,Se))})})};class pe{constructor(_t){return _t}}const ve=new l.OlP("angularfire2.app.options"),we=new l.OlP("angularfire2.app.name");function q(_e,_t,pt){const Ie="object"==typeof pt&&pt||{};Ie.name=Ie.name||"string"==typeof pt&&pt||"[DEFAULT]";const Ge=j.Z.apps.filter(ze=>ze&&ze.name===Ie.name)[0]||_t.runOutsideAngular(()=>j.Z.initializeApp(_e,Ie));try{JSON.stringify(_e)!==JSON.stringify(Ge.options)&&z("error",`${Ge.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ge)}const z=(_e,..._t)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](..._t)},J={provide:pe,useFactory:q,deps:[ve,l.R0b,[new l.FiY,we]]};let $e=(()=>{class _e{constructor(pt){j.Z.registerVersion("angularfire",O.q4.full,"core"),j.Z.registerVersion("angularfire",O.q4.full,"app-compat"),j.Z.registerVersion("angular",l.q4F.full,pt.toString())}static initializeApp(pt,Se){return{ngModule:_e,providers:[{provide:ve,useValue:pt},{provide:we,useValue:Se}]}}}return _e.\u0275fac=function(pt){return new(pt||_e)(l.LFG(l.Lbi))},_e.\u0275mod=l.oAB({type:_e}),_e.\u0275inj=l.cJS({providers:[J]}),_e})();function ke(_e,_t,pt,Se,Ie){const[,xe,Ge]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===_e)||[];if(xe)return function De(_e,_t){try{return _e.toString()===_t.toString()}catch{return _e===_t}}(Ie,Ge)||(Ee("error",`${_t} was already initialized on the ${pt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Ie,was:Ge})),xe;{const ze=Se();return globalThis.\u0275AngularfireInstanceCache.push([_e,ze,Ie]),ze}}const it=!!wt.hot,Ee=(_e,..._t)=>{(0,l.X6Q)()&&typeof console<"u"&&console[_e](..._t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(wt,Oe,V)=>{V.d(Oe,{q4:()=>eu,iC:()=>bs,HU:()=>el,vb:()=>Hd,JM:()=>ta,u3:()=>na});var l=V(4650),j=V(259),O=V(5861),re=V(6881),le=V(2090),ye=V(4859),pe=V(1877);let we,q;const $e=new WeakMap,ke=new WeakMap,De=new WeakMap,it=new WeakMap,Ee=new WeakMap;let pt={get(E,T,x){if(E instanceof IDBTransaction){if("done"===T)return ke.get(E);if("objectStoreNames"===T)return E.objectStoreNames||De.get(E);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ge(E[T])},set:(E,T,x)=>(E[T]=x,!0),has:(E,T)=>E instanceof IDBTransaction&&("done"===T||"store"===T)||T in E};function xe(E){return"function"==typeof E?function Ie(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return q||(q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...T){return E.apply(ze(this),T),Ge($e.get(this))}:function(...T){return Ge(E.apply(ze(this),T))}:function(T,...x){const L=E.call(ze(this),T,...x);return De.set(L,T.sort?T.sort():[T]),Ge(L)}}(E):(E instanceof IDBTransaction&&function _t(E){if(ke.has(E))return;const T=new Promise((x,L)=>{const W=()=>{E.removeEventListener("complete",X),E.removeEventListener("error",me),E.removeEventListener("abort",me)},X=()=>{x(),W()},me=()=>{L(E.error||new DOMException("AbortError","AbortError")),W()};E.addEventListener("complete",X),E.addEventListener("error",me),E.addEventListener("abort",me)});ke.set(E,T)}(E),((E,T)=>T.some(x=>E instanceof x))(E,function z(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,pt):E)}function Ge(E){if(E instanceof IDBRequest)return function _e(E){const T=new Promise((x,L)=>{const W=()=>{E.removeEventListener("success",X),E.removeEventListener("error",me)},X=()=>{x(Ge(E.result)),W()},me=()=>{L(E.error),W()};E.addEventListener("success",X),E.addEventListener("error",me)});return T.then(x=>{x instanceof IDBCursor&&$e.set(x,E)}).catch(()=>{}),Ee.set(T,E),T}(E);if(it.has(E))return it.get(E);const T=xe(E);return T!==E&&(it.set(E,T),Ee.set(T,E)),T}const ze=E=>Ee.get(E),At=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],Gt=new Map;function ct(E,T){if(!(E instanceof IDBDatabase)||T in E||"string"!=typeof T)return;if(Gt.get(T))return Gt.get(T);const x=T.replace(/FromIndex$/,""),L=T!==x,W=gt.includes(x);if(!(x in(L?IDBIndex:IDBObjectStore).prototype)||!W&&!At.includes(x))return;const X=function(){var me=(0,O.Z)(function*(Ye,...qe){const et=this.transaction(Ye,W?"readwrite":"readonly");let Ft=et.store;return L&&(Ft=Ft.index(qe.shift())),(yield Promise.all([Ft[x](...qe),W&&et.done]))[0]});return function(qe){return me.apply(this,arguments)}}();return Gt.set(T,X),X}!function Se(E){pt=E(pt)}(E=>({...E,get:(T,x,L)=>ct(T,x)||E.get(T,x,L),has:(T,x)=>!!ct(T,x)||E.has(T,x)}));const Qi="@firebase/installations",Ji="w:0.6.4",ie="FIS_v2",ut=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Tt(E){return E instanceof le.ZR&&E.code.includes("request-failed")}function en({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function Mt(E){return{token:E.token,requestStatus:2,expiresIn:gr(E.expiresIn),creationTime:Date.now()}}function rn(E,T){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(E,T){const L=(yield T.json()).error;return ut.create("request-failed",{requestName:E,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function hn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Qn(E,{refreshToken:T}){const x=hn(E);return x.append("Authorization",function wi(E){return`${ie} ${E}`}(T)),x}function Sn(E){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(E){const T=yield E();return T.status>=500&&T.status<600?E():T})).apply(this,arguments)}function gr(E){return Number(E.replace("s","000"))}function lt(E,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},{fid:x}){const L=en(E),W=hn(E),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Ye={method:"POST",headers:W,body:JSON.stringify({fid:x,authVersion:ie,appId:E.appId,sdkVersion:Ji})},qe=yield Sn(()=>fetch(L,Ye));if(qe.ok){const et=yield qe.json();return{fid:et.fid||x,registrationStatus:2,refreshToken:et.refreshToken,authToken:Mt(et.authToken)}}throw yield rn("Create Installation",qe)})).apply(this,arguments)}function Jn(E){return new Promise(T=>{setTimeout(T,E)})}const Fi=/^[cdef][\w-]{21}$/;function Nn(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const x=function xn(E){return function Gn(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Fi.test(x)?x:""}catch{return""}}function zt(E){return`${E.appName}!${E.appId}`}const dt=new Map;function bt(E,T){const x=zt(E);yr(x,T),function nr(E,T){const x=function zn(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=E=>{yr(E.data.key,E.data.fid)}),St}();x&&x.postMessage({key:E,fid:T}),function qt(){0===dt.size&&St&&(St.close(),St=null)}()}(x,T)}function yr(E,T){const x=dt.get(E);if(x)for(const L of x)L(T)}let St=null;const jn="firebase-installations-store";let vn=null;function Xn(){return vn||(vn=function ue(E,T,{blocked:x,upgrade:L,blocking:W,terminated:X}={}){const me=indexedDB.open(E,T),Ye=Ge(me);return L&&me.addEventListener("upgradeneeded",qe=>{L(Ge(me.result),qe.oldVersion,qe.newVersion,Ge(me.transaction))}),x&&me.addEventListener("blocked",()=>x()),Ye.then(qe=>{X&&qe.addEventListener("close",()=>X()),W&&qe.addEventListener("versionchange",()=>W())}).catch(()=>{}),Ye}("firebase-installations-database",1,{upgrade:(E,T)=>{0===T&&E.createObjectStore(jn)}})),vn}function Pn(E,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*(E,T){const x=zt(E),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(x);return yield X.put(T,x),yield W.done,(!me||me.fid!==T.fid)&&bt(E,T.fid),T})).apply(this,arguments)}function er(E){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(E){const T=zt(E),L=(yield Xn()).transaction(jn,"readwrite");yield L.objectStore(jn).delete(T),yield L.done})).apply(this,arguments)}function _r(E,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(E,T){const x=zt(E),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(x),Ye=T(me);return void 0===Ye?yield X.delete(x):yield X.put(Ye,x),yield W.done,Ye&&(!me||me.fid!==Ye.fid)&&bt(E,Ye.fid),Ye})).apply(this,arguments)}function G(E){return $.apply(this,arguments)}function $(){return($=(0,O.Z)(function*(E){let T;const x=yield _r(E.appConfig,L=>{const W=F(L),X=k(E,W);return T=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function F(E){return Ce(E||{fid:Nn(),registrationStatus:0})}function k(E,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ut.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},L=function R(E,T){return Y.apply(this,arguments)}(E,x);return{installationEntry:x,registrationPromise:L}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:be(E)}:{installationEntry:T}}function Y(){return(Y=(0,O.Z)(function*(E,T){try{const x=yield lt(E,T);return Pn(E.appConfig,x)}catch(x){throw Tt(x)&&409===x.customData.serverCode?yield er(E.appConfig):yield Pn(E.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function be(E){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(E){let T=yield mt(E.appConfig);for(;1===T.registrationStatus;)yield Jn(100),T=yield mt(E.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:L}=yield G(E);return L||x}return T})).apply(this,arguments)}function mt(E){return _r(E,T=>{if(!T)throw ut.create("installation-not-found");return Ce(T)})}function Ce(E){return function tt(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function at(E,T){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},x){const L=Ot(E,x),W=Qn(E,x),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Ye={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Ji,appId:E.appId}})},qe=yield Sn(()=>fetch(L,Ye));if(qe.ok)return Mt(yield qe.json());throw yield rn("Generate Auth Token",qe)})).apply(this,arguments)}function Ot(E,{fid:T}){return`${en(E)}/${T}/authTokens:generate`}function on(E){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(E,T=!1){let x;const L=yield _r(E.appConfig,X=>{if(!$t(X))throw ut.create("not-registered");const me=X.authToken;if(!T&&fn(me))return X;if(1===me.requestStatus)return x=oe(E,T),X;{if(!navigator.onLine)throw ut.create("app-offline");const Ye=Qt(X);return x=Ve(E,Ye),Ye}});return x?yield x:L.authToken})).apply(this,arguments)}function oe(E,T){return ne.apply(this,arguments)}function ne(){return(ne=(0,O.Z)(function*(E,T){let x=yield Le(E.appConfig);for(;1===x.authToken.requestStatus;)yield Jn(100),x=yield Le(E.appConfig);const L=x.authToken;return 0===L.requestStatus?on(E,T):L})).apply(this,arguments)}function Le(E){return _r(E,T=>{if(!$t(T))throw ut.create("not-registered");return function Hr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ve(E,T){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(E,T){try{const x=yield at(E,T),L=Object.assign(Object.assign({},T),{authToken:x});return yield Pn(E.appConfig,L),x}catch(x){if(!Tt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const L=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Pn(E.appConfig,L)}else yield er(E.appConfig);throw x}})).apply(this,arguments)}function $t(E){return void 0!==E&&2===E.registrationStatus}function fn(E){return 2===E.requestStatus&&!function $n(E){const T=Date.now();return T<E.creationTime||E.creationTime+E.expiresIn<T+36e5}(E)}function Qt(E){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:T})}function ii(){return(ii=(0,O.Z)(function*(E){const T=E,{installationEntry:x,registrationPromise:L}=yield G(T);return L?L.catch(console.error):on(T).catch(console.error),x.fid})).apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(E,T=!1){const x=E;return yield ln(x),(yield on(x,T)).token})).apply(this,arguments)}function ln(E){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(E){const{registrationPromise:T}=yield G(E);T&&(yield T)})).apply(this,arguments)}function Cr(E){return ut.create("missing-app-config-values",{valueName:E})}const Gr="installations",ps=E=>{const T=E.getProvider("app").getImmediate(),x=function dd(E){if(!E||!E.options)throw Cr("App Configuration");if(!E.name)throw Cr("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!E.options[x])throw Cr(x);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,re._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ta=E=>{const T=E.getProvider("app").getImmediate(),x=(0,re._getProvider)(T,Gr).getImmediate();return{getId:()=>function Li(E){return ii.apply(this,arguments)}(x),getToken:W=>function Ea(E){return ba.apply(this,arguments)}(x,W)}};(function bi(){(0,re._registerComponent)(new ye.wA(Gr,ps,"PUBLIC")),(0,re._registerComponent)(new ye.wA("installations-internal",Ta,"PRIVATE"))})(),(0,re.registerVersion)(Qi,"0.6.4"),(0,re.registerVersion)(Qi,"0.6.4","esm2017");const Da="@firebase/remote-config",Mn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vl{constructor(T,x,L,W){this.client=T,this.storage=x,this.storageCache=L,this.logger=W}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-x,W=L<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var x=this;return(0,O.Z)(function*(){const[L,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(T.cacheMaxAgeMillis,L))return W;T.eTag=W&&W.eTag;const X=yield x.client.fetch(T),me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&me.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(me),X})()}}function Cu(E=navigator){return E.languages&&E.languages[0]||E.language}class Ul{constructor(T,x,L,W,X,me){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=L,this.projectId=W,this.apiKey=X,this.appId=me}fetch(T){var x=this;return(0,O.Z)(function*(){const[L,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},qe={sdk_version:x.sdkVersion,app_instance_id:L,app_instance_id_token:W,app_id:x.appId,language_code:Cu()},et={method:"POST",headers:Ye,body:JSON.stringify(qe)},Ft=fetch(me,et),Nt=new Promise((ei,kr)=>{T.signal.addEventListener(()=>{const ia=new Error("The operation was aborted.");ia.name="AbortError",kr(ia)})});let Nr;try{yield Promise.race([Ft,Nt]),Nr=yield Ft}catch(ei){let kr="fetch-client-network";throw"AbortError"===ei?.name&&(kr="fetch-timeout"),Mn.create(kr,{originalErrorMessage:ei?.message})}let dn=Nr.status;const is=Nr.headers.get("ETag")||void 0;let ra,ss;if(200===Nr.status){let ei;try{ei=yield Nr.json()}catch(kr){throw Mn.create("fetch-client-parse",{originalErrorMessage:kr?.message})}ra=ei.entries,ss=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===ss?dn=500:"NO_CHANGE"===ss?dn=304:("NO_TEMPLATE"===ss||"EMPTY_CONFIG"===ss)&&(ra={}),304!==dn&&200!==dn)throw Mn.create("fetch-status",{httpStatus:dn});return{status:dn,eTag:is,config:ra}})()}}class Bl{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const L=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,L)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:L}){var W=this;return(0,O.Z)(function*(){yield function Sa(E,T){return new Promise((x,L)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(x,W);E.addEventListener(()=>{clearTimeout(X),L(Mn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const X=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function _d(E){if(!(E instanceof le.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const me={throttleEndTimeMillis:Date.now()+(0,le.$s)(L),backoffCount:L+1};return yield W.storage.setThrottleMetadata(me),W.attemptFetch(T,me)}})()}}class jl{constructor(T,x,L,W,X){this.app=T,this._client=x,this._storageCache=L,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qn(E,T){const x=E.target.error||void 0;return Mn.create(T,{originalErrorMessage:x&&x?.message})}const gs="app_namespace_store";class Jh{constructor(T,x,L,W=function Ay(){return new Promise((E,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=L=>{T(qn(L,"storage-open"))},x.onsuccess=L=>{E(L.target.result)},x.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(gs,{keyPath:"compositeKey"})}}catch(x){T(Mn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=L,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const L=yield x.openDbPromise;return new Promise((W,X)=>{const Ye=L.transaction([gs],"readonly").objectStore(gs),qe=x.createCompositeKey(T);try{const et=Ye.get(qe);et.onerror=Ft=>{X(qn(Ft,"storage-get"))},et.onsuccess=Ft=>{const Nt=Ft.target.result;W(Nt?Nt.value:void 0)}}catch(et){X(Mn.create("storage-get",{originalErrorMessage:et?.message}))}})})()}set(T,x){var L=this;return(0,O.Z)(function*(){const W=yield L.openDbPromise;return new Promise((X,me)=>{const qe=W.transaction([gs],"readwrite").objectStore(gs),et=L.createCompositeKey(T);try{const Ft=qe.put({compositeKey:et,value:x});Ft.onerror=Nt=>{me(qn(Nt,"storage-set"))},Ft.onsuccess=()=>{X()}}catch(Ft){me(Mn.create("storage-set",{originalErrorMessage:Ft?.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const L=yield x.openDbPromise;return new Promise((W,X)=>{const Ye=L.transaction([gs],"readwrite").objectStore(gs),qe=x.createCompositeKey(T);try{const et=Ye.delete(qe);et.onerror=Ft=>{X(qn(Ft,"storage-delete"))},et.onsuccess=()=>{W()}}catch(et){X(Mn.create("storage-delete",{originalErrorMessage:et?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Cn{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),L=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),X=yield x;X&&(T.lastFetchStatus=X);const me=yield L;me&&(T.lastSuccessfulFetchTimestampMillis=me);const Ye=yield W;Ye&&(T.activeConfig=Ye)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function si(){return wd.apply(this,arguments)}function wd(){return(wd=(0,O.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}let Vi,Sr;!function Lo(){(0,re._registerComponent)(new ye.wA("remote-config",function E(T,{instanceIdentifier:x}){const L=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Mn.create("registration-window");if(!(0,le.hl)())throw Mn.create("indexed-db-unavailable");const{projectId:X,apiKey:me,appId:Ye}=L.options;if(!X)throw Mn.create("registration-project-id");if(!me)throw Mn.create("registration-api-key");if(!Ye)throw Mn.create("registration-app-id");const qe=new Jh(Ye,L.name,x=x||"firebase"),et=new Cn(qe),Ft=new pe.Yd(Da);Ft.logLevel=pe.in.ERROR;const Nt=new Ul(W,re.SDK_VERSION,x,X,me,Ye),Nr=new Bl(Nt,qe),dn=new Vl(Nr,qe,et,Ft),is=new jl(L,dn,et,qe,Ft);return function yd(E){const T=(0,le.m9)(E);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(is),is},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Da,"0.4.4"),(0,re.registerVersion)(Da,"0.4.4","esm2017")}();const xa=new WeakMap,Ci=new WeakMap,Ir=new WeakMap,Vo=new WeakMap,Rt=new WeakMap;let ql={get(E,T,x){if(E instanceof IDBTransaction){if("done"===T)return Ci.get(E);if("objectStoreNames"===T)return E.objectStoreNames||Ir.get(E);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ui(E[T])},set:(E,T,x)=>(E[T]=x,!0),has:(E,T)=>E instanceof IDBTransaction&&("done"===T||"store"===T)||T in E};function Au(E){return"function"==typeof E?function Xh(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Tu(){return Sr||(Sr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...T){return E.apply(Su(this),T),Ui(xa.get(this))}:function(...T){return Ui(E.apply(Su(this),T))}:function(T,...x){const L=E.call(Su(this),T,...x);return Ir.set(L,T.sort?T.sort():[T]),Ui(L)}}(E):(E instanceof IDBTransaction&&function zl(E){if(Ci.has(E))return;const T=new Promise((x,L)=>{const W=()=>{E.removeEventListener("complete",X),E.removeEventListener("error",me),E.removeEventListener("abort",me)},X=()=>{x(),W()},me=()=>{L(E.error||new DOMException("AbortError","AbortError")),W()};E.addEventListener("complete",X),E.addEventListener("error",me),E.addEventListener("abort",me)});Ci.set(E,T)}(E),((E,T)=>T.some(x=>E instanceof x))(E,function Gl(){return Vi||(Vi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ql):E)}function Ui(E){if(E instanceof IDBRequest)return function Du(E){const T=new Promise((x,L)=>{const W=()=>{E.removeEventListener("success",X),E.removeEventListener("error",me)},X=()=>{x(Ui(E.result)),W()},me=()=>{L(E.error),W()};E.addEventListener("success",X),E.addEventListener("error",me)});return T.then(x=>{x instanceof IDBCursor&&xa.set(x,E)}).catch(()=>{}),Rt.set(T,E),T}(E);if(Vo.has(E))return Vo.get(E);const T=Au(E);return T!==E&&(Vo.set(E,T),Rt.set(T,E)),T}const Su=E=>Rt.get(E);function Pe(E,T,{blocked:x,upgrade:L,blocking:W,terminated:X}={}){const me=indexedDB.open(E,T),Ye=Ui(me);return L&&me.addEventListener("upgradeneeded",qe=>{L(Ui(me.result),qe.oldVersion,qe.newVersion,Ui(me.transaction))}),x&&me.addEventListener("blocked",()=>x()),Ye.then(qe=>{X&&qe.addEventListener("close",()=>X()),W&&qe.addEventListener("versionchange",()=>W())}).catch(()=>{}),Ye}function Jt(E,{blocked:T}={}){const x=indexedDB.deleteDatabase(E);return T&&x.addEventListener("blocked",()=>T()),Ui(x).then(()=>{})}const Wl=["get","getKey","getAll","getAllKeys","count"],xu=["put","add","delete","clear"],Wn=new Map;function Ma(E,T){if(!(E instanceof IDBDatabase)||T in E||"string"!=typeof T)return;if(Wn.get(T))return Wn.get(T);const x=T.replace(/FromIndex$/,""),L=T!==x,W=xu.includes(x);if(!(x in(L?IDBIndex:IDBObjectStore).prototype)||!W&&!Wl.includes(x))return;const X=function(){var me=(0,O.Z)(function*(Ye,...qe){const et=this.transaction(Ye,W?"readwrite":"readonly");let Ft=et.store;return L&&(Ft=Ft.index(qe.shift())),(yield Promise.all([Ft[x](...qe),W&&et.done]))[0]});return function(qe){return me.apply(this,arguments)}}();return Wn.set(T,X),X}!function Ed(E){ql=E(ql)}(E=>({...E,get:(T,x,L)=>Ma(T,x)||E.get(T,x,L),has:(T,x)=>!!Ma(T,x)||E.has(T,x)}));const Fs="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",Ra="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bd="google.c.a.c_id",On="google.c.a.c_l",Sy="google.c.a.ts",Zl="google.c.a.e";var zr=(()=>{return(E=zr||(zr={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",zr;var E})();function ai(E){const T=new Uint8Array(E);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uo(E){const x=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(x),W=new Uint8Array(L.length);for(let X=0;X<L.length;++X)W[X]=L.charCodeAt(X);return W}const ui="fcm_token_details_db",Cd="fcm_token_object_Store";function Id(E){return Ru.apply(this,arguments)}function Ru(){return Ru=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(ui))return null;let T=null;return(yield Pe(ui,5,{upgrade:(L=(0,O.Z)(function*(W,X,me,Ye){var qe;if(X<2||!W.objectStoreNames.contains(Cd))return;const et=Ye.objectStore(Cd),Ft=yield et.index("fcmSenderId").get(E);if(yield et.clear(),Ft)if(2===X){const Nt=Ft;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;T={token:Nt.fcmToken,createTime:null!==(qe=Nt.createTime)&&void 0!==qe?qe:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:ai(Nt.vapidKey)}}}else if(3===X){const Nt=Ft;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ai(Nt.auth),p256dh:ai(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ai(Nt.vapidKey)}}}else if(4===X){const Nt=Ft;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ai(Nt.auth),p256dh:ai(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ai(Nt.vapidKey)}}}}),function(X,me,Ye,qe){return L.apply(this,arguments)})})).close(),yield Jt(ui),yield Jt("fcm_vapid_details_db"),yield Jt("undefined"),Na(T)?T:null;var L}),Ru.apply(this,arguments)}function Na(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:T}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Xr="firebase-messaging-store";let Pu=null;function Yl(){return Pu||(Pu=Pe("firebase-messaging-database",1,{upgrade:(E,T)=>{0===T&&E.createObjectStore(Xr)}})),Pu}function lo(E){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(E){const T=Dd(E),L=yield(yield Yl()).transaction(Xr).objectStore(Xr).get(T);if(L)return L;{const W=yield Id(E.appConfig.senderId);if(W)return yield Oa(E,W),W}})).apply(this,arguments)}function Oa(E,T){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,O.Z)(function*(E,T){const x=Dd(E),W=(yield Yl()).transaction(Xr,"readwrite");return yield W.objectStore(Xr).put(T,x),yield W.done,T})).apply(this,arguments)}function Td(E){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,O.Z)(function*(E){const T=Dd(E),L=(yield Yl()).transaction(Xr,"readwrite");yield L.objectStore(Xr).delete(T),yield L.done})).apply(this,arguments)}function Dd({appConfig:E}){return E.appId}const cn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function co(E,T){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(E,T){const x=yield Fa(E),L=ho(T),W={method:"POST",headers:x,body:JSON.stringify(L)};let X;try{X=yield(yield fetch(Ad(E.appConfig),W)).json()}catch(me){throw cn.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(X.error)throw cn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw cn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function Xp(E,T){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(E,T){const x=yield Fa(E),L=ho(T.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(L)};let X;try{X=yield(yield fetch(`${Ad(E.appConfig)}/${T.token}`,W)).json()}catch(me){throw cn.create("token-update-failed",{errorInfo:me?.toString()})}if(X.error)throw cn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw cn.create("token-update-no-token");return X.token})).apply(this,arguments)}function ef(E,T){return ku.apply(this,arguments)}function ku(){return(ku=(0,O.Z)(function*(E,T){const L={method:"DELETE",headers:yield Fa(E)};try{const X=yield(yield fetch(`${Ad(E.appConfig)}/${T}`,L)).json();if(X.error)throw cn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw cn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Ad({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Fa(E){return La.apply(this,arguments)}function La(){return(La=(0,O.Z)(function*({appConfig:E,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ho({p256dh:E,auth:T,endpoint:x,vapidKey:L}){const W={web:{endpoint:x,auth:T,p256dh:E}};return L!==Ra&&(W.web.applicationPubKey=L),W}const Ou=6048e5;function Fu(E){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,O.Z)(function*(E){const T=yield xd(E.swRegistration,E.vapidKey),x={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:T.endpoint,auth:ai(T.getKey("auth")),p256dh:ai(T.getKey("p256dh"))},L=yield lo(E.firebaseDependencies);if(L){if(nf(L.subscriptionOptions,x))return Date.now()>=L.createTime+Ou?Bo(E,{token:L.token,createTime:Date.now(),subscriptionOptions:x}):L.token;try{yield ef(E.firebaseDependencies,L.token)}catch(W){console.warn(W)}return jo(E.firebaseDependencies,x)}return jo(E.firebaseDependencies,x)})).apply(this,arguments)}function tf(E){return ts.apply(this,arguments)}function ts(){return(ts=(0,O.Z)(function*(E){const T=yield lo(E.firebaseDependencies);T&&(yield ef(E.firebaseDependencies,T.token),yield Td(E.firebaseDependencies));const x=yield E.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Bo(E,T){return Sd.apply(this,arguments)}function Sd(){return(Sd=(0,O.Z)(function*(E,T){try{const x=yield Xp(E.firebaseDependencies,T),L=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield Oa(E.firebaseDependencies,L),x}catch(x){throw yield tf(E),x}})).apply(this,arguments)}function jo(E,T){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(E,T){const L={token:yield co(E,T),createTime:Date.now(),subscriptionOptions:T};return yield Oa(E,L),L.token})).apply(this,arguments)}function xd(E,T){return Md.apply(this,arguments)}function Md(){return(Md=(0,O.Z)(function*(E,T){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:uo(T)})})).apply(this,arguments)}function nf(E,T){return T.vapidKey===E.vapidKey&&T.endpoint===E.endpoint&&T.auth===E.auth&&T.p256dh===E.p256dh}function Xl(E){const T={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Lu(E,T){if(!T.notification)return;E.notification={};const x=T.notification.title;x&&(E.notification.title=x);const L=T.notification.body;L&&(E.notification.body=L);const W=T.notification.image;W&&(E.notification.image=W);const X=T.notification.icon;X&&(E.notification.icon=X)}(T,E),function ec(E,T){!T.data||(E.data=T.data)}(T,E),function Vu(E,T){var x,L,W,X,me;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;E.fcmOptions={};const Ye=null!==(W=null===(L=T.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==W?W:null===(X=T.notification)||void 0===X?void 0:X.click_action;Ye&&(E.fcmOptions.link=Ye);const qe=null===(me=T.fcmOptions)||void 0===me?void 0:me.analytics_label;qe&&(E.fcmOptions.analyticsLabel=qe)}(T,E),T}function Rd(E){return"object"==typeof E&&!!E&&bd in E}function $o(E,T){const x=[];for(let L=0;L<E.length;L++)x.push(E.charAt(L)),L<T.length&&x.push(T.charAt(L));return x.join("")}function tc(E){return cn.create("missing-app-config-values",{valueName:E})}$o("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),$o("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Va{constructor(T,x,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function rf(E){if(!E||!E.options)throw tc("App Configuration Object");if(!E.name)throw tc("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=E;for(const L of T)if(!x[L])throw tc(L);return{appName:E.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:x,analyticsProvider:L}}_delete(){return Promise.resolve()}}function sf(E){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Fs,{scope:Ii}),E.swRegistration.update().catch(()=>{})}catch(T){throw cn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Vs(E,T){return li.apply(this,arguments)}function li(){return(li=(0,O.Z)(function*(E,T){if(!T&&!E.swRegistration&&(yield sf(E)),T||!E.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw cn.create("invalid-sw-registration");E.swRegistration=T}})).apply(this,arguments)}function nc(E,T){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(E,T){T?E.vapidKey=T:E.vapidKey||(E.vapidKey=Ra)})).apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*(E,T){if(!navigator)throw cn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw cn.create("permission-blocked");return yield nc(E,T?.vapidKey),yield Vs(E,T?.serviceWorkerRegistration),Fu(E)})).apply(this,arguments)}function Bi(E,T,x){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,O.Z)(function*(E,T,x){const L=Ho(T);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:x[bd],message_name:x[On],message_time:x[Sy],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ho(E){switch(E){case zr.NOTIFICATION_CLICKED:return"notification_open";case zr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function po(){return(po=(0,O.Z)(function*(E,T){const x=T.data;if(!x.isFirebaseMessaging)return;E.onMessageHandler&&x.messageType===zr.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Xl(x)):E.onMessageHandler.next(Xl(x)));const L=x.data;Rd(L)&&"1"===L[Zl]&&(yield Bi(E,x.messageType,L))})).apply(this,arguments)}const ja="@firebase/messaging",$a=E=>{const T=new Va(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Ba(E,T){return po.apply(this,arguments)}(T,x)),T},rc=E=>{const T=E.getProvider("messaging").getImmediate();return{getToken:L=>function Uu(E,T){return Ua.apply(this,arguments)}(T,L)}};function Go(){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,O.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function af(){(0,re._registerComponent)(new ye.wA("messaging",$a,"PUBLIC")),(0,re._registerComponent)(new ye.wA("messaging-internal",rc,"PRIVATE")),(0,re.registerVersion)(ja,"0.12.4"),(0,re.registerVersion)(ja,"0.12.4","esm2017")}();const Ga="analytics",za="firebase_id",Nd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ms="https://www.googletagmanager.com/gtag/js",Fn=new pe.Yd("@firebase/analytics"),ir=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ju(E){if(!E.startsWith(ms)){const T=ir.create("invalid-gtag-resource",{gtagURL:E});return Fn.warn(T.message),""}return E}function Ti(E){return Promise.all(E.map(T=>T.catch(x=>x)))}function kd(E,T){const x=function oc(E,T){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(E,T)),x}("firebase-js-sdk-policy",{createScriptURL:ju}),L=document.createElement("script"),W=`${ms}?l=${E}&id=${T}`;L.src=x?x?.createScriptURL(W):W,L.async=!0,document.head.appendChild(L)}function Od(E,T,x,L,W,X){return qa.apply(this,arguments)}function qa(){return(qa=(0,O.Z)(function*(E,T,x,L,W,X){const me=L[W];try{if(me)yield T[me];else{const qe=(yield Ti(x)).find(et=>et.measurementId===W);qe&&(yield T[qe.appId])}}catch(Ye){Fn.error(Ye)}E("config",W,X)})).apply(this,arguments)}function xy(E,T,x,L,W){return $u.apply(this,arguments)}function $u(){return($u=(0,O.Z)(function*(E,T,x,L,W){try{let X=[];if(W&&W.send_to){let me=W.send_to;Array.isArray(me)||(me=[me]);const Ye=yield Ti(x);for(const qe of me){const et=Ye.find(Nt=>Nt.measurementId===qe),Ft=et&&T[et.appId];if(!Ft){X=[];break}X.push(Ft)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),E("event",L,W||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function lf(E){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(ms)&&x.src.includes(E))return x;return null}const sr=new class My{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Gu(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Di(E){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,O.Z)(function*(E){var T;const{appId:x,apiKey:L}=E,W={method:"GET",headers:Gu(L)},X=Nd.replace("{app-id}",x),me=yield fetch(X,W);if(200!==me.status&&304!==me.status){let Ye="";try{const qe=yield me.json();null!==(T=qe.error)&&void 0!==T&&T.message&&(Ye=qe.error.message)}catch{}throw ir.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Ye})}return me.json()})).apply(this,arguments)}function zu(E){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,O.Z)(function*(E,T=sr,x){const{appId:L,apiKey:W,measurementId:X}=E.options;if(!L)throw ir.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:L};throw ir.create("no-api-key")}const me=T.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Ld;return setTimeout((0,O.Z)(function*(){Ye.abort()}),void 0!==x?x:6e4),ji({appId:L,apiKey:W,measurementId:X},me,Ye,T)})).apply(this,arguments)}function ji(E,T,x){return ac.apply(this,arguments)}function ac(){return(ac=(0,O.Z)(function*(E,{throttleEndTimeMillis:T,backoffCount:x},L,W=sr){var X;const{appId:me,measurementId:Ye}=E;try{yield Wa(L,T)}catch(qe){if(Ye)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${qe?.message}]`),{appId:me,measurementId:Ye};throw qe}try{const qe=yield Di(E);return W.deleteThrottleMetadata(me),qe}catch(qe){const et=qe;if(!qu(et)){if(W.deleteThrottleMetadata(me),Ye)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${et?.message}]`),{appId:me,measurementId:Ye};throw qe}const Ft=503===Number(null===(X=et?.customData)||void 0===X?void 0:X.httpStatus)?(0,le.$s)(x,W.intervalMillis,30):(0,le.$s)(x,W.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Ft,backoffCount:x+1};return W.setThrottleMetadata(me,Nt),Fn.debug(`Calling attemptFetch again in ${Ft} millis`),ji(E,Nt,L,W)}})).apply(this,arguments)}function Wa(E,T){return new Promise((x,L)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(x,W);E.addEventListener(()=>{clearTimeout(X),L(ir.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function qu(E){if(!(E instanceof le.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Ld{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Vd,Za;function df(){return(df=(0,O.Z)(function*(E,T,x,L,W){if(W&&W.global)E("event",x,L);else{const X=yield T;E("event",x,Object.assign(Object.assign({},L),{send_to:X}))}})).apply(this,arguments)}function Zo(E){Za=E}function cc(E){Vd=E}function In(){return xr.apply(this,arguments)}function xr(){return(xr=(0,O.Z)(function*(){if(!(0,le.hl)())return Fn.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(E){return Fn.warn(ir.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function di(){return(di=(0,O.Z)(function*(E,T,x,L,W,X,me){var Ye;const qe=zu(E);qe.then(dn=>{x[dn.measurementId]=dn.appId,E.options.measurementId&&dn.measurementId!==E.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${dn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dn=>Fn.error(dn)),T.push(qe);const et=In().then(dn=>{if(dn)return L.getId()}),[Ft,Nt]=yield Promise.all([qe,et]);lf(X)||kd(X,Ft.measurementId),Za&&(W("consent","default",Za),Zo(void 0)),W("js",new Date);const Nr=null!==(Ye=me?.config)&&void 0!==Ye?Ye:{};return Nr.origin="firebase",Nr.update=!0,null!=Nt&&(Nr[za]=Nt),W("config",Ft.measurementId,Nr),Vd&&(W("set",Vd),cc(void 0)),Ft.measurementId})).apply(this,arguments)}class Ka{constructor(T){this.app=T}_delete(){return delete hi[this.app.options.appId],Promise.resolve()}}let hi={},dc=[];const jd={};let Zn,ft,ys="dataLayer",Ya=!1;function hc(E,T,x){!function Qa(){const E=[];if((0,le.ru)()&&E.push("This is a browser extension environment."),(0,le.zI)()||E.push("Cookies are not available."),E.length>0){const T=E.map((L,W)=>`(${W+1}) ${L}`).join(" "),x=ir.create("invalid-analytics-context",{errorInfo:T});Fn.warn(x.message)}}();const L=E.options.appId;if(!L)throw ir.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw ir.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=hi[L])throw ir.create("already-exists",{id:L});if(!Ya){!function pn(E){let T=[];Array.isArray(window[E])?T=window[E]:window[E]=T}(ys);const{wrappedGtag:X,gtagCore:me}=function ng(E,T,x,L,W){let X=function(...me){window[L].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function tg(E,T,x,L){function X(){return(X=(0,O.Z)(function*(me,...Ye){try{if("event"===me){const[qe,et]=Ye;yield xy(E,T,x,qe,et)}else if("config"===me){const[qe,et]=Ye;yield Od(E,T,x,L,qe,et)}else if("consent"===me){const[qe]=Ye;E("consent","update",qe)}else if("get"===me){const[qe,et,Ft]=Ye;E("get",qe,et,Ft)}else if("set"===me){const[qe]=Ye;E("set",qe)}else E(me,...Ye)}catch(qe){Fn.error(qe)}})).apply(this,arguments)}return function W(me){return X.apply(this,arguments)}}(X,E,T,x),{gtagCore:X,wrappedGtag:window[W]}}(hi,dc,jd,ys,"gtag");ft=X,Zn=me,Ya=!0}return hi[L]=function sg(E,T,x,L,W,X,me){return di.apply(this,arguments)}(E,dc,jd,T,Zn,ys,x),new Ka(E)}function mo(){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,O.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const vr="@firebase/analytics";!function gc(){(0,re._registerComponent)(new ye.wA(Ga,(T,{options:x})=>hc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,re._registerComponent)(new ye.wA("analytics-internal",function E(T){try{const x=T.getProvider(Ga).getImmediate();return{logEvent:(L,W,X)=>function fi(E,T,x,L){E=(0,le.m9)(E),function rg(E,T,x,L,W){return df.apply(this,arguments)}(ft,hi[E.app.options.appId],T,x,L).catch(W=>Fn.error(W))}(x,L,W,X)}}catch(x){throw ir.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,re.registerVersion)(vr,"0.10.0"),(0,re.registerVersion)(vr,"0.10.0","esm2017")}();var Rr=V(4408),Yu=V(7565);const mc=new class ff extends Yu.v{}(class Yo extends Rr.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(T,x,L):(T.flush(this),0)}});var pf=V(4986),Xa=V(9751),Qu=V(8505),yo=V(9468),_o=V(5363);const eu=new l.GfV("7.6.1"),Ju="__angularfire_symbol__analyticsIsSupportedValue",Qo="__angularfire_symbol__analyticsIsSupported",_c="__angularfire_symbol__remoteConfigIsSupportedValue",Jo="__angularfire_symbol__remoteConfigIsSupported",vc="__angularfire_symbol__messagingIsSupportedValue",Xo="__angularfire_symbol__messagingIsSupported";function ta(E,T,x){if(T){if(1===T.length)return T[0];const X=T.filter(me=>me.app===x);if(1===X.length)return X[0]}return x.container.getProvider(E).getImmediate({optional:!0})}globalThis[Qo]||(globalThis[Qo]=mo().then(E=>globalThis[Ju]=E).catch(()=>globalThis[Ju]=!1)),globalThis[Xo]||(globalThis[Xo]=Go().then(E=>globalThis[vc]=E).catch(()=>globalThis[vc]=!1)),globalThis[Jo]||(globalThis[Jo]=si().then(E=>globalThis[_c]=E).catch(()=>globalThis[_c]=!1));const Hd=(E,T)=>{const x=T?[T]:(0,j.C6)(),L=[];return x.forEach(W=>{W.container.getProvider(E).instances.forEach(me=>{L.includes(me)||L.push(me)})}),L};function zs(){}class wc{constructor(T,x=mc){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,L){const W=this.zone;return this.delegate.schedule(function(me){W.runGuarded(()=>{T.apply(this,[me])})},x,L)}}class gf{constructor(T){this.zone=T,this.task=null}call(T,x){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs)),x.pipe((0,Qu.b)({next:L,complete:L,error:L})).subscribe(T).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let el=(()=>{class E{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new wc(Zone.current)),this.insideAngular=x.run(()=>new wc(Zone.current,pf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(x){return new(x||E)(l.LFG(l.R0b))},E.\u0275prov=l.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Kn(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Es(E){return Kn().ngZone.runOutsideAngular(()=>E())}function rs(E){return Kn().ngZone.run(()=>E())}function bs(E){return Kn(),function Pr(E){return function(x){return(x=x.lift(new gf(E.ngZone))).pipe((0,yo.R)(E.outsideAngular),(0,_o.Q)(E.insideAngular))}}(Kn())(E)}const Ec=(E,T)=>function(){const L=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),rs(()=>E.apply(void 0,L))},na=(E,T)=>function(){let x;const L=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof L[X]&&(T&&(x||(x=rs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",zs,{},zs,zs)))),L[X]=Ec(L[X],x));const W=Es(()=>E.apply(this,L));if(!T){if(W instanceof Xa.y){const X=Kn();return W.pipe((0,yo.R)(X.outsideAngular),(0,_o.Q)(X.insideAngular))}return rs(()=>W)}return W instanceof Xa.y?W.pipe(bs):W instanceof Promise?rs(()=>new Promise((X,me)=>W.then(Ye=>rs(()=>X(Ye)),Ye=>rs(()=>me(Ye))))):"function"==typeof W&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),W.apply(this,arguments)}:rs(()=>W)}},1389:(wt,Oe,V)=>{V.d(Oe,{$:()=>Fs,A:()=>z,D:()=>ke,I:()=>kn,J:()=>ps,L:()=>es,N:()=>_r,P:()=>sg,Q:()=>Jh,R:()=>ci,U:()=>ao,V:()=>si,W:()=>wd,X:()=>$l,Y:()=>Gl,Z:()=>Tu,_:()=>Rt,a:()=>js,a0:()=>Ra,a1:()=>bd,a2:()=>oi,a3:()=>Cd,a4:()=>Ru,a5:()=>Kl,a6:()=>Xr,a7:()=>Yl,a8:()=>ka,a9:()=>Ql,aA:()=>ue,aB:()=>Qo,aC:()=>er,aD:()=>jr,aE:()=>Qu,aF:()=>$d,aG:()=>Gs,aH:()=>Hn,aL:()=>$s,aO:()=>Vi,aa:()=>Td,ab:()=>Dd,ac:()=>Jp,ad:()=>Xp,ae:()=>ef,af:()=>Ad,ai:()=>Ou,aj:()=>Jl,ak:()=>tf,an:()=>Xh,ao:()=>Lu,aq:()=>Us,ar:()=>ja,as:()=>At,at:()=>Ce,au:()=>be,av:()=>Se,aw:()=>Nt,ax:()=>Xo,ay:()=>tt,az:()=>Ie,b:()=>Pd,c:()=>ft,d:()=>hc,e:()=>or,f:()=>vr,g:()=>ff,h:()=>Rr,i:()=>cf,j:()=>pf,k:()=>ss,l:()=>Ud,m:()=>ia,p:()=>ve,r:()=>Zu,s:()=>hf,u:()=>In});var l=V(5861),j=V(2090),O=V(6881),re=V(7582),le=V(1877),ye=V(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},De=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new le.Yd("@firebase/auth");function pt(v,...p){_e.logLevel<=le.in.ERROR&&_e.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Se(v,...p){throw ze(v,...p)}function Ie(v,...p){return ze(v,...p)}function xe(v,p,m){const b=Object.assign(Object.assign({},De()),{[p]:m});return new j.LL("auth","Firebase",b).create(p,{appName:v.name})}function Ge(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Se(v,"argument-error"),xe(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...p){if("string"!=typeof v){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(m,...b)}return it.create(v,...p)}function ue(v,p,...m){if(!v)throw ze(p,...m)}function Ke(v){const p="INTERNAL ASSERTION FAILED: "+v;throw pt(p),new Error(p)}function At(v,p){v||Ke(p)}function gt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function Gt(){return"http:"===ct()||"https:"===ct()}function ct(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ri{constructor(p,m){this.shortDelay=p,this.longDelay=m,At(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Qi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ji(v,p){At(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class ie{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Ke("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Ke("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Ke("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ee={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ae=new ri(3e4,6e4);function he(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Ne(v,p,m,b){return Re.apply(this,arguments)}function Re(){return(Re=(0,l.Z)(function*(v,p,m,b,M={}){return ut(v,M,(0,l.Z)(function*(){let N={},Q={};b&&("GET"===p?Q=b:N={body:JSON.stringify(b)});const de=(0,j.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),He=yield v._getAdditionalHeaders();return He["Content-Type"]="application/json",v.languageCode&&(He["X-Firebase-Locale"]=v.languageCode),ie.fetch()(rn(v,v.config.apiHost,m,de),Object.assign({method:p,headers:He,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ut(v,p,m){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,l.Z)(function*(v,p,m){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},ee),p);try{const M=new Rn(v),N=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Q=yield N.json();if("needConfirmation"in Q)throw hn(v,"account-exists-with-different-credential",Q);if(N.ok&&!("errorMessage"in Q))return Q;{const de=N.ok?Q.errorMessage:Q.error.message,[He,nt]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw hn(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===He)throw hn(v,"email-already-in-use",Q);if("USER_DISABLED"===He)throw hn(v,"user-disabled",Q);const vt=b[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw xe(v,vt,nt);Se(v,vt)}}catch(M){if(M instanceof j.ZR)throw M;Se(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function en(v,p,m,b){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,l.Z)(function*(v,p,m,b,M={}){const N=yield Ne(v,p,m,b,M);return"mfaPendingCredential"in N&&Se(v,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function rn(v,p,m,b){const M=`${p}${m}?${b}`;return v.config.emulator?Ji(v.config,M):`${v.config.apiScheme}://${M}`}class Rn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Ie(this.auth,"network-request-failed")),Ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hn(v,p,m){const b={appName:v.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const M=Ie(v,p,b);return M.customData._tokenResponse=m,M}function Sn(){return(Sn=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Bn(v,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wi(v,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function mr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Fi(){return(Fi=(0,l.Z)(function*(v,p=!1){const m=(0,j.m9)(v),b=yield m.getIdToken(p),M=Nn(b);ue(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const N="object"==typeof M.firebase?M.firebase:void 0,Q=N?.sign_in_provider;return{claims:M,token:b,authTime:mr(Yr(M.auth_time)),issuedAtTime:mr(Yr(M.iat)),expirationTime:mr(Yr(M.exp)),signInProvider:Q||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function Yr(v){return 1e3*Number(v)}function Nn(v){const[p,m,b]=v.split(".");if(void 0===p||void 0===m||void 0===b)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,j.tV)(m);return M?JSON.parse(M):(pt("Failed to decode base64 JWT payload"),null)}catch(M){return pt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function zt(v,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,l.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof j.ZR&&bt(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function bt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class tn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,l.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,l.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Qr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(v){return nr.apply(this,arguments)}function nr(){return(nr=(0,l.Z)(function*(v){var p;const m=v.auth,b=yield v.getIdToken(),M=yield zt(v,wi(m,{idToken:b}));ue(M?.users.length,m,"internal-error");const N=M.users[0];v._notifyReloadListener(N);const Q=null!==(p=N.providerUserInfo)&&void 0!==p&&p.length?Xi(N.providerUserInfo):[],de=qt(v.providerData,Q),vt=!!v.isAnonymous&&!(v.email&&N.passwordHash||de?.length),an={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:de,metadata:new Qr(N.createdAt,N.lastLoginAt),isAnonymous:vt};Object.assign(v,an)})).apply(this,arguments)}function zn(){return(zn=(0,l.Z)(function*(v){const p=(0,j.m9)(v);yield yr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function qt(v,p){return[...v.filter(b=>!p.some(M=>M.providerId===b.providerId)),...p]}function Xi(v){return v.map(p=>{var{providerId:m}=p,b=(0,re._T)(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function jn(){return(jn=(0,l.Z)(function*(v,p){const m=yield ut(v,{},(0,l.Z)(function*(){const b=(0,j.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:N}=v.config,Q=rn(v,M,"/v1/token",`key=${N}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",ie.fetch()(Q,{method:"POST",headers:de,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class vn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ue(p.idToken,"internal-error"),ue(typeof p.idToken<"u","internal-error"),ue(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function xn(v){const p=Nn(v);return ue(p,"internal-error"),ue(typeof p.exp<"u","internal-error"),ue(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,l.Z)(function*(){return ue(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:Q}=yield function sn(v,p){return jn.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(M,N,Number(Q))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:M,expirationTime:N}=m,Q=new vn;return b&&(ue("string"==typeof b,"internal-error",{appName:p}),Q.refreshToken=b),M&&(ue("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),N&&(ue("number"==typeof N,"internal-error",{appName:p}),Q.expirationTime=N),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new vn,this.toJSON())}_performRefresh(){return Ke("not implemented")}}function Xn(v,p){ue("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class Pn{constructor(p){var{uid:m,auth:b,stsTokenManager:M}=p,N=(0,re._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Qr(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,l.Z)(function*(){const b=yield zt(m,m.stsTokenManager.getToken(m.auth,p));return ue(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function Gn(v){return Fi.apply(this,arguments)}(this,p)}reload(){return function St(v){return zn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ue(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new Pn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,l.Z)(function*(){let M=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield yr(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,l.Z)(function*(){const m=yield p.getIdToken();return yield zt(p,function Qn(v,p){return Sn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,M,N,Q,de,He,nt,vt;const an=null!==(b=m.displayName)&&void 0!==b?b:void 0,$i=null!==(M=m.email)&&void 0!==M?M:void 0,sa=null!==(N=m.phoneNumber)&&void 0!==N?N:void 0,nl=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,_f=null!==(de=m.tenantId)&&void 0!==de?de:void 0,rl=null!==(He=m._redirectEventId)&&void 0!==He?He:void 0,Zd=null!==(nt=m.createdAt)&&void 0!==nt?nt:void 0,vf=null!==(vt=m.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Ac,emailVerified:wf,isAnonymous:dg,providerData:vo,stsTokenManager:tu}=m;ue(Ac&&tu,p,"internal-error");const nu=vn.fromJSON(this.name,tu);ue("string"==typeof Ac,p,"internal-error"),Xn(an,p.name),Xn($i,p.name),ue("boolean"==typeof wf,p,"internal-error"),ue("boolean"==typeof dg,p,"internal-error"),Xn(sa,p.name),Xn(nl,p.name),Xn(_f,p.name),Xn(rl,p.name),Xn(Zd,p.name),Xn(vf,p.name);const Kd=new Pn({uid:Ac,auth:p,email:$i,emailVerified:wf,displayName:an,isAnonymous:dg,photoURL:nl,phoneNumber:sa,tenantId:_f,stsTokenManager:nu,createdAt:Zd,lastLoginAt:vf});return vo&&Array.isArray(vo)&&(Kd.providerData=vo.map(Ry=>Object.assign({},Ry))),rl&&(Kd._redirectEventId=rl),Kd}static _fromIdTokenResponse(p,m,b=!1){return(0,l.Z)(function*(){const M=new vn;M.updateFromServerResponse(m);const N=new Pn({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:b});return yield yr(N),N})()}}const Jr=new Map;function er(v){At(v instanceof Function,"Expected a class definition");let p=Jr.get(v);return p?(At(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Jr.set(v,p),p)}const _r=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(m,b){var M=this;return(0,l.Z)(function*(){M.storage[m]=b})()}_get(m){var b=this;return(0,l.Z)(function*(){const M=b.storage[m];return void 0===M?null:M})()}_remove(m){var b=this;return(0,l.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return v.type="NONE",v})();function jr(v,p,m){return`firebase:${v}:${p}:${m}`}class G{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:M,name:N}=this.auth;this.fullUserKey=jr(this.userKey,M.apiKey,N),this.fullPersistenceKey=jr("persistence",M.apiKey,N),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,l.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Pn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,l.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,l.Z)(function*(){if(!m.length)return new G(er(_r),p,b);const M=(yield Promise.all(m.map(function(){var nt=(0,l.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let N=M[0]||er(_r);const Q=jr(b,p.config.apiKey,p.name);let de=null;for(const nt of m)try{const vt=yield nt._get(Q);if(vt){const an=Pn._fromJSON(p,vt);nt!==N&&(de=an),N=nt;break}}catch{}const He=M.filter(nt=>nt._shouldAllowMigration);return N._shouldAllowMigration&&He.length?(N=He[0],de&&(yield N._set(Q,de.toJSON())),yield Promise.all(m.map(function(){var nt=(0,l.Z)(function*(vt){if(vt!==N)try{yield vt._remove(Q)}catch{}});return function(vt){return nt.apply(this,arguments)}}())),new G(N,p,b)):new G(N,p,b)})()}}function $(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Y(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(F(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ze(p))return"Blackberry";if(mt(p))return"Webos";if(k(p))return"Safari";if((p.includes("chrome/")||R(p))&&!p.includes("edge/"))return"Chrome";if(be(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function F(v=(0,j.z$)()){return/firefox\//i.test(v)}function k(v=(0,j.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function R(v=(0,j.z$)()){return/crios\//i.test(v)}function Y(v=(0,j.z$)()){return/iemobile/i.test(v)}function be(v=(0,j.z$)()){return/android/i.test(v)}function Ze(v=(0,j.z$)()){return/blackberry/i.test(v)}function mt(v=(0,j.z$)()){return/webos/i.test(v)}function Ce(v=(0,j.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function tt(v=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Ot(v=(0,j.z$)()){return Ce(v)||be(v)||mt(v)||Ze(v)||/windows phone/i.test(v)||Y(v)}function $r(v,p=[]){let m;switch(v){case"Browser":m=$((0,j.z$)());break;case"Worker":m=`${$((0,j.z$)())}-${v}`;break;default:m=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${b}`}function ne(){return(ne=(0,l.Z)(function*(v){return(yield Ne(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(v,p){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,l.Z)(function*(v,p){return Ne(v,"GET","/v2/recaptchaConfig",he(v,p))})).apply(this,arguments)}function xt(v){return void 0!==v&&void 0!==v.getResponse}function $t(v){return void 0!==v&&void 0!==v.enterprise}class fn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Qt(v){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=M=>{const N=Ie("internal-error");N.customData=M,m(N)},b.type="text/javascript",b.charset="UTF-8",function $n(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function Hr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class ba{constructor(p){this.type="recaptcha-enterprise",this.auth=Hn(p)}verify(p="verify",m=!1){var b=this;return(0,l.Z)(function*(){function N(){return N=(0,l.Z)(function*(de){if(!m){if(null==de.tenantId&&null!=de._agentRecaptchaConfig)return de._agentRecaptchaConfig.siteKey;if(null!=de.tenantId&&void 0!==de._tenantRecaptchaConfigs[de.tenantId])return de._tenantRecaptchaConfigs[de.tenantId].siteKey}return new Promise(function(){var He=(0,l.Z)(function*(nt,vt){Le(de,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(an=>{if(void 0!==an.recaptchaKey){const $i=new fn(an);return null==de.tenantId?de._agentRecaptchaConfig=$i:de._tenantRecaptchaConfigs[de.tenantId]=$i,nt($i.siteKey)}vt(new Error("recaptcha Enterprise site key undefined"))}).catch(an=>{vt(an)})});return function(nt,vt){return He.apply(this,arguments)}}())}),N.apply(this,arguments)}function Q(de,He,nt){const vt=window.grecaptcha;$t(vt)?vt.enterprise.ready(()=>{vt.enterprise.execute(de,{action:p}).then(an=>{He(an)}).catch(()=>{He("NO_RECAPTCHA")})}):nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((de,He)=>{(function M(de){return N.apply(this,arguments)})(b.auth).then(nt=>{if(!m&&$t(window.grecaptcha))Q(nt,de,He);else{if(typeof window>"u")return void He(new Error("RecaptchaVerifier is only supported in browser"));Qt("https://www.google.com/recaptcha/enterprise.js?render="+nt).then(()=>{Q(nt,de,He)}).catch(vt=>{He(vt)})}}).catch(nt=>{He(nt)})})})()}}function ln(v,p,m){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,l.Z)(function*(v,p,m,b=!1){const M=new ba(v);let N;try{N=yield M.verify(m)}catch{N=yield M.verify(m,!0)}const Q=Object.assign({},p);return Object.assign(Q,b?{captchaResp:N}:{captchaResponse:N}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class cd{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const b=N=>new Promise((Q,de)=>{try{Q(p(N))}catch(He){de(He)}});b.onAbort=m,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,l.Z)(function*(){if(m.auth.currentUser===p)return;const b=[];try{for(const M of m.queue)yield M(p),M.onAbort&&b.push(M.onAbort)}catch(M){b.reverse();for(const N of b)try{N()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class ro{constructor(p,m,b,M){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ks(this),this.idTokenSubscription=new ks(this),this.beforeStateQueue=new cd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=er(m)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,N;if(!b._deleted&&(b.persistenceManager=yield G.create(b,p),!b._deleted)){if(null!==(M=b._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(N=b.currentUser)||void 0===N?void 0:N.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,l.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,l.Z)(function*(){var b;const M=yield m.assertedPersistence.getCurrentUser();let N=M,Q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const de=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,He=N?._redirectEventId,nt=yield m.tryRedirectSignIn(p);(!de||de===He)&&nt?.user&&(N=nt.user,Q=!0)}if(!N)return m.directlySetCurrentUser(null);if(!N._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(N)}catch(de){N=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(de))}return N?m.reloadAndSetCurrentUserOrClear(N):m.directlySetCurrentUser(null)}return ue(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===N._redirectEventId?m.directlySetCurrentUser(N):m.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(p){var m=this;return(0,l.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,l.Z)(function*(){try{yield yr(p)}catch(b){if("auth/network-request-failed"!==b?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pr(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,l.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,l.Z)(function*(){const b=p?(0,j.m9)(p):null;return b&&ue(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p,m=!1){var b=this;return(0,l.Z)(function*(){if(!b._deleted)return p&&ue(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,l.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,l.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,l.Z)(function*(){yield m.assertedPersistence.setPersistence(er(p))}))}initializeRecaptchaConfig(){var p=this;return(0,l.Z)(function*(){const m=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new fn(m);null==p.tenantId?p._agentRecaptchaConfig=b:p._tenantRecaptchaConfigs[p.tenantId]=b,b.emailPasswordEnabled&&new ba(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new j.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,l.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,l.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&er(p)||m._popupRedirectResolver;ue(b,m,"argument-error"),m.redirectPersistenceManager=yield G.create(m,[er(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,l.Z)(function*(){var b,M;return m._isInitialized&&(yield m.queue((0,l.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,l.Z)(function*(){if(p===m.currentUser)return m.queue((0,l.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,M){if(this._deleted)return()=>{};const N="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Q,this,"internal-error"),Q.then(()=>N(this.currentUser)),"function"==typeof m?p.addObserver(m,b,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,l.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,l.Z)(function*(){var m;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(b["X-Firebase-Client"]=M);const N=yield p._getAppCheckToken();return N&&(b["X-Firebase-AppCheck"]=N),b})()}_getAppCheckToken(){var p=this;return(0,l.Z)(function*(){var m;const b=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return b?.error&&function _t(v,...p){_e.logLevel<=le.in.WARN&&_e.warn(`Auth (${O.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function Hn(v){return(0,j.m9)(v)}class ks{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,j.ne)(m=>this.observer=m)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function kn(v,p,m){const b=Hn(v);ue(b._canInitEmulator,b,"emulator-config-failed"),ue(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const M=!!m?.disableWarnings,N=dd(p),{host:Q,port:de}=function Cr(v){const p=dd(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const N=M[1];return{host:N,port:Gr(b.substr(N.length+1))}}{const[N,Q]=b.split(":");return{host:N,port:Gr(Q)}}}(p);b.config.emulator={url:`${N}//${Q}${null===de?"":`:${de}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:de,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Ia(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function dd(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Gr(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class ps{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ke("not implemented")}_getIdTokenResponse(p){return Ke("not implemented")}_linkToIdToken(p,m){return Ke("not implemented")}_getReauthenticationResolver(p){return Ke("not implemented")}}function Ta(v,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:resetPassword",he(v,p))})).apply(this,arguments)}function Da(v,p){return kl.apply(this,arguments)}function kl(){return(kl=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function hd(v,p){return vu.apply(this,arguments)}function vu(){return(vu=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:update",he(v,p))})).apply(this,arguments)}function Kh(v,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPassword",he(v,p))})).apply(this,arguments)}function Ol(v,p){return fd.apply(this,arguments)}function fd(){return(fd=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:sendOobCode",he(v,p))})).apply(this,arguments)}function Kp(v,p){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,l.Z)(function*(v,p){return Ol(v,p)})).apply(this,arguments)}function pd(v,p){return wu.apply(this,arguments)}function wu(){return(wu=(0,l.Z)(function*(v,p){return Ol(v,p)})).apply(this,arguments)}function Yh(v,p){return gd.apply(this,arguments)}function gd(){return(gd=(0,l.Z)(function*(v,p){return Ol(v,p)})).apply(this,arguments)}function md(v,p){return yd.apply(this,arguments)}function yd(){return(yd=(0,l.Z)(function*(v,p){return Ol(v,p)})).apply(this,arguments)}function Eu(){return(Eu=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",he(v,p))})).apply(this,arguments)}function bu(){return(bu=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",he(v,p))})).apply(this,arguments)}class Ll extends ps{constructor(p,m,b,M=null){super("password",b),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new Ll(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new Ll(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,l.Z)(function*(){var b;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const N=yield ln(p,M,"signInWithPassword");return Kh(p,N)}return Kh(p,M).catch(function(){var N=(0,l.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const de=yield ln(p,M,"signInWithPassword");return Kh(p,de)}return Promise.reject(Q)});return function(Q){return N.apply(this,arguments)}}());case"emailLink":return function Yp(v,p){return Eu.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,l.Z)(function*(){switch(b.signInMethod){case"password":return Da(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Qh(v,p){return bu.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function so(v,p){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithIdp",he(v,p))})).apply(this,arguments)}class es extends ps{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new es(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M}=m,N=(0,re._T)(m,["providerId","signInMethod"]);if(!b||!M)return null;const Q=new es(b,M);return Q.idToken=N.idToken||void 0,Q.accessToken=N.accessToken||void 0,Q.secret=N.secret,Q.nonce=N.nonce,Q.pendingToken=N.pendingToken||null,Q}_getIdTokenResponse(p){return so(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,so(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,so(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,j.xO)(m)}return p}}function Vl(v,p){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:sendVerificationCode",he(v,p))})).apply(this,arguments)}function Sa(){return(Sa=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",he(v,p))})).apply(this,arguments)}function Bl(){return(Bl=(0,l.Z)(function*(v,p){const m=yield en(v,"POST","/v1/accounts:signInWithPhoneNumber",he(v,p));if(m.temporaryProof)throw hn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const vd={USER_NOT_FOUND:"user-not-found"};function jl(){return(jl=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",he(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),vd)})).apply(this,arguments)}class qn extends ps{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qn({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qn({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Ul(v,p){return Sa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function _d(v,p){return Bl.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Iu(v,p){return jl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:M,temporaryProof:N}=p;return b||m||M||N?new qn({verificationId:m,verificationCode:b,phoneNumber:M,temporaryProof:N}):null}}class Os{constructor(p){var m,b,M,N,Q,de;const He=(0,j.zd)((0,j.pd)(p)),nt=null!==(m=He.apiKey)&&void 0!==m?m:null,vt=null!==(b=He.oobCode)&&void 0!==b?b:null,an=function gs(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=He.mode)&&void 0!==M?M:null);ue(nt&&vt&&an,"argument-error"),this.apiKey=nt,this.operation=an,this.code=vt,this.continueUrl=null!==(N=He.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(Q=He.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(de=He.tenantId)&&void 0!==de?de:null}static parseLink(p){const m=function Qp(v){const p=(0,j.zd)((0,j.pd)(v)).link,m=p?(0,j.zd)((0,j.pd)(p)).deep_link_id:null,b=(0,j.zd)((0,j.pd)(v)).deep_link_id;return(b?(0,j.zd)((0,j.pd)(b)).link:null)||b||m||p||v}(p);try{return new Os(m)}catch{return null}}}let Jh=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,b){return Ll._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const M=Os.parseLink(b);return ue(M,"argument-error"),Ll._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Cn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Lo extends Cn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class $l extends Lo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return ue("providerId"in m&&"signInMethod"in m,"argument-error"),es._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ue(p.idToken||p.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return $l.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return $l.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:N,nonce:Q,providerId:de}=p;if(!b&&!M&&!m&&!N||!de)return null;try{return new $l(de)._credential({idToken:m,accessToken:b,nonce:Q,pendingToken:N})}catch{return null}}}let ao=(()=>{class v extends Lo{constructor(){super("facebook.com")}static credential(m){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),si=(()=>{class v extends Lo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:M}=m;if(!b&&!M)return null;try{return v.credential(b,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),wd=(()=>{class v extends Lo{constructor(){super("github.com")}static credential(m){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Vi extends ps{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return so(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,so(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,so(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M,pendingToken:N}=m;return b&&M&&N&&b===M?new Vi(b,N):null}static _create(p,m){return new Vi(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Gl extends Cn{constructor(p){ue(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Gl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Gl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Vi.fromJSON(p);return ue(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:b}=p;if(!m||!b)return null;try{return Vi._create(b,m)}catch{return null}}}let Tu=(()=>{class v extends Lo{constructor(){super("twitter.com")}static credential(m,b){return es._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=m;if(!b||!M)return null;try{return v.credential(b,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function xa(v,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signUp",he(v,p))})).apply(this,arguments)}class Ir{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,M=!1){return(0,l.Z)(function*(){const N=yield Pn._fromIdTokenResponse(p,b,M),Q=Vo(b);return new Ir({user:N,providerId:Q,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,l.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const M=Vo(b);return new Ir({user:p,providerId:M,_tokenResponse:b,operationType:m})})()}}function Vo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Rt(v){return Du.apply(this,arguments)}function Du(){return(Du=(0,l.Z)(function*(v){var p;const m=Hn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Ir({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield xa(m,{returnSecureToken:!0}),M=yield Ir._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class zl extends j.ZR{constructor(p,m,b,M){var N;super(m.code,m.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,zl.prototype),this.customData={appName:p.name,tenantId:null!==(N=p.tenantId)&&void 0!==N?N:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,m,b,M){return new zl(p,m,b,M)}}function ql(v,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?zl._fromErrorAndOperation(v,N,p,b):N})}function Ed(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function Xh(v,p){return Au.apply(this,arguments)}function Au(){return(Au=(0,l.Z)(function*(v,p){const m=(0,j.m9)(v);yield Pe(!0,m,p);const{providerUserInfo:b}=yield Bn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=Ed(b||[]);return m.providerData=m.providerData.filter(N=>M.has(N.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ui(v,p){return Su.apply(this,arguments)}function Su(){return(Su=(0,l.Z)(function*(v,p,m=!1){const b=yield zt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Ir._forOperation(v,"link",b)})).apply(this,arguments)}function Pe(v,p,m){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,l.Z)(function*(v,p,m){yield yr(p);const M=!1===v?"provider-already-linked":"no-such-provider";ue(Ed(p.providerData).has(m)===v,p.auth,M)})).apply(this,arguments)}function Wl(v,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,l.Z)(function*(v,p,m=!1){const{auth:b}=v,M="reauthenticate";try{const N=yield zt(v,ql(b,M,p,v),m);ue(N.idToken,b,"internal-error");const Q=Nn(N.idToken);ue(Q,b,"internal-error");const{sub:de}=Q;return ue(v.uid===de,b,"user-mismatch"),Ir._forOperation(v,M,N)}catch(N){throw"auth/user-not-found"===N?.code&&Se(b,"user-mismatch"),N}})).apply(this,arguments)}function Wn(v,p){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,l.Z)(function*(v,p,m=!1){const b="signIn",M=yield ql(v,b,p),N=yield Ir._fromIdTokenResponse(v,b,M);return m||(yield v._updateCurrentUser(N.user)),N})).apply(this,arguments)}function Fs(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,l.Z)(function*(v,p){return Wn(Hn(v),p)})).apply(this,arguments)}function Ra(v,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,l.Z)(function*(v,p){const m=(0,j.m9)(v);return yield Pe(!1,m,p.providerId),Ui(m,p)})).apply(this,arguments)}function bd(v,p){return On.apply(this,arguments)}function On(){return(On=(0,l.Z)(function*(v,p){return Wl((0,j.m9)(v),p)})).apply(this,arguments)}function Sy(v,p){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,l.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithCustomToken",he(v,p))})).apply(this,arguments)}function oi(v,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,l.Z)(function*(v,p){const m=Hn(v),b=yield Sy(m,{token:p,returnSecureToken:!0}),M=yield Ir._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class ai{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?uo._fromServerResponse(p,m):"totpInfo"in m?ui._fromServerResponse(p,m):Se(p,"internal-error")}}class uo extends ai{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new uo(m)}}class ui extends ai{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new ui(m)}}function Pa(v,p,m){var b;ue((null===(b=m.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),ue(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ue(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(ue(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Cd(v,p,m){return Id.apply(this,arguments)}function Id(){return Id=(0,l.Z)(function*(v,p,m){var b;const M=Hn(v),N={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Q=yield ln(M,N,"getOobCode",!0);m&&Pa(M,Q,m),yield pd(M,Q)}else m&&Pa(M,N,m),yield pd(M,N).catch(function(){var Q=(0,l.Z)(function*(de){if("auth/missing-recaptcha-token"!==de.code)return Promise.reject(de);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const He=yield ln(M,N,"getOobCode",!0);m&&Pa(M,He,m),yield pd(M,He)}});return function(de){return Q.apply(this,arguments)}}())}),Id.apply(this,arguments)}function Ru(v,p,m){return Na.apply(this,arguments)}function Na(){return(Na=(0,l.Z)(function*(v,p,m){yield Ta((0,j.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Kl(v,p){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,l.Z)(function*(v,p){yield hd((0,j.m9)(v),{oobCode:p})})).apply(this,arguments)}function Xr(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,l.Z)(function*(v,p){const m=(0,j.m9)(v),b=yield Ta(m,{oobCode:p}),M=b.requestType;switch(ue(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(b.mfaInfo,m,"internal-error");default:ue(b.email,m,"internal-error")}let N=null;return b.mfaInfo&&(N=ai._fromServerResponse(Hn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:N},operation:M}})).apply(this,arguments)}function Yl(v,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,l.Z)(function*(v,p){const{data:m}=yield Xr((0,j.m9)(v),p);return m.email})).apply(this,arguments)}function ka(v,p,m){return Oa.apply(this,arguments)}function Oa(){return Oa=(0,l.Z)(function*(v,p,m){var b;const M=Hn(v),N={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const nt=yield ln(M,N,"signUpPassword");Q=xa(M,nt)}else Q=xa(M,N).catch(function(){var nt=(0,l.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const an=yield ln(M,N,"signUpPassword");return xa(M,an)}return Promise.reject(vt)});return function(vt){return nt.apply(this,arguments)}}());const de=yield Q.catch(nt=>Promise.reject(nt)),He=yield Ir._fromIdTokenResponse(M,"signIn",de);return yield M._updateCurrentUser(He.user),He}),Oa.apply(this,arguments)}function Ql(v,p,m){return Fs((0,j.m9)(v),Jh.credential(p,m))}function Td(v,p,m){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,l.Z)(function*(v,p,m){var b;const M=Hn(v),N={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(de,He){ue(He.handleCodeInApp,M,"argument-error"),He&&Pa(M,de,He)}if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const de=yield ln(M,N,"getOobCode",!0);Q(de,m),yield Yh(M,de)}else Q(N,m),yield Yh(M,N).catch(function(){var de=(0,l.Z)(function*(He){if("auth/missing-recaptcha-token"!==He.code)return Promise.reject(He);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const nt=yield ln(M,N,"getOobCode",!0);Q(nt,m),yield Yh(M,nt)}});return function(He){return de.apply(this,arguments)}}())}),Ls.apply(this,arguments)}function Dd(v,p){return"EMAIL_SIGNIN"===Os.parseLink(p)?.operation}function Jp(v,p,m){return cn.apply(this,arguments)}function cn(){return(cn=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v),M=Jh.credentialWithLink(p,m||gt());return ue(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Fs(b,M)})).apply(this,arguments)}function co(v,p){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:createAuthUri",he(v,p))})).apply(this,arguments)}function Xp(v,p){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,l.Z)(function*(v,p){const b={identifier:p,continueUri:Gt()?gt():"http://localhost"},{signinMethods:M}=yield co((0,j.m9)(v),b);return M||[]})).apply(this,arguments)}function ef(v,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,l.Z)(function*(v,p){const m=(0,j.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Pa(m.auth,M,p);const{email:N}=yield Kp(m.auth,M);N!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ad(v,p,m){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Pa(b.auth,N,m);const{email:Q}=yield md(b.auth,N);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function La(v,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,l.Z)(function*(v,p){return Ne(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ou(v,p){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,l.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,j.m9)(v),N={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Q=yield zt(b,La(b.auth,N));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const de=b.providerData.find(({providerId:He})=>"password"===He);de&&(de.displayName=b.displayName,de.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Jl(v,p){return ts((0,j.m9)(v),p,null)}function tf(v,p){return ts((0,j.m9)(v),null,p)}function ts(v,p,m){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,l.Z)(function*(v,p,m){const{auth:b}=v,N={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(N.email=p),m&&(N.password=m);const Q=yield zt(v,Da(b,N));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class jo{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class fo extends jo{constructor(p,m,b,M){super(p,m,b),this.username=M}}class xd extends jo{constructor(p,m){super(p,"facebook.com",m)}}class Md extends fo{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class nf extends jo{constructor(p,m){super(p,"google.com",m)}}class Xl extends fo{constructor(p,m,b){super(p,"twitter.com",m,b)}}function Lu(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Sd(v){var p,m;if(!v)return null;const{providerId:b}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},N=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&v?.idToken){const Q=null===(m=null===(p=Nn(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new jo(N,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new xd(N,M);case"github.com":return new Md(N,M);case"google.com":return new nf(N,M);case"twitter.com":return new Xl(N,M,v.screenName||null);case"custom":case"anonymous":return new jo(N,null);default:return new jo(N,b,M)}}(m)}class li{constructor(p,m,b){this.type=p,this.credential=m,this.auth=b}static _fromIdtoken(p,m){return new li("enroll",p,m)}static _fromMfaPendingCredential(p){return new li("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return li._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return li._fromIdtoken(p.multiFactorSession.idToken)}return null}}class nc{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=Hn(p),M=m.customData._serverResponse,N=(M.mfaInfo||[]).map(de=>ai._fromServerResponse(b,de));ue(M.mfaPendingCredential,b,"internal-error");const Q=li._fromMfaPendingCredential(M.mfaPendingCredential);return new nc(Q,N,function(){var de=(0,l.Z)(function*(He){const nt=yield He._process(b,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const vt=Object.assign(Object.assign({},M),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(m.operationType){case"signIn":const an=yield Ir._fromIdTokenResponse(b,m.operationType,vt);return yield b._updateCurrentUser(an.user),an;case"reauthenticate":return ue(m.user,b,"internal-error"),Ir._forOperation(m.user,m.operationType,vt);default:Se(b,"internal-error")}});return function(He){return de.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,l.Z)(function*(){return m.signInResolver(p)})()}}function Us(v,p){var m;const b=(0,j.m9)(v),M=p;return ue(p.customData.operationType,b,"argument-error"),ue(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),nc._fromError(b,M)}function Uu(v,p){return Ne(v,"POST","/v2/accounts/mfaEnrollment:start",he(v,p))}class Ba{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>ai._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Ba(p)}getSession(){var p=this;return(0,l.Z)(function*(){return li._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var b=this;return(0,l.Z)(function*(){const M=p,N=yield b.getSession(),Q=yield zt(b.user,M._process(b.user.auth,N,m));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(p){var m=this;return(0,l.Z)(function*(){const b="string"==typeof p?p:p.uid,M=yield m.user.getIdToken();try{const N=yield zt(m.user,function Ho(v,p){return Ne(v,"POST","/v2/accounts/mfaEnrollment:withdraw",he(v,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Q})=>Q!==b),yield m.user._updateTokensIfNecessary(N),yield m.user.reload()}catch(N){throw N}})()}}const po=new WeakMap;function ja(v){const p=(0,j.m9)(v);return po.has(p)||po.set(p,Ba._fromUser(p)),po.get(p)}const Bs="__sak";class $a{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Bs,"1"),this.storage.removeItem(Bs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Pd=(()=>{class v extends $a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rc(){const v=(0,j.z$)();return k(v)||Ce(v)}()&&function on(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ot(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),N=this.localCache[b];M!==N&&m(b,N,M)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((de,He,nt)=>{this.notifyListeners(de,nt)});const M=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(m.newValue!==de)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!b)return}const N=()=>{const de=this.storage.getItem(M);!b&&this.localCache[M]===de||this.notifyListeners(M,de)},Q=this.storage.getItem(M);!function Yt(){return(0,j.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?N():setTimeout(N,10)}notifyListeners(m,b){this.localCache[m]=b;const M=this.listeners[m];if(M)for(const N of Array.from(M))N(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var M=()=>super._set,N=this;return(0,l.Z)(function*(){yield M().call(N,m,b),N.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,M=this;return(0,l.Z)(function*(){const N=yield b().call(M,m);return M.localCache[m]=JSON.stringify(N),N})()}_remove(m){var b=()=>super._remove,M=this;return(0,l.Z)(function*(){yield b().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),js=(()=>{class v extends $a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return v.type="SESSION",v})();let uf=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(N=>N.isListeningto(m));if(b)return b;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,l.Z)(function*(){const M=m,{eventId:N,eventType:Q,data:de}=M.data,He=b.handlersMap[Q];if(!He?.size)return;M.ports[0].postMessage({status:"ack",eventId:N,eventType:Q});const nt=Array.from(He).map(function(){var an=(0,l.Z)(function*($i){return $i(M.origin,de)});return function($i){return an.apply(this,arguments)}}()),vt=yield function eg(v){return Promise.all(v.map(function(){var p=(0,l.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}(nt);M.ports[0].postMessage({status:"done",eventId:N,eventType:Q,response:vt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function $s(v="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return v+m}class qo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var M=this;return(0,l.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let Q,de;return new Promise((He,nt)=>{const vt=$s("",20);N.port1.start();const an=setTimeout(()=>{nt(new Error("unsupported_event"))},b);de={messageChannel:N,onMessage($i){const sa=$i;if(sa.data.eventId===vt)switch(sa.data.status){case"ack":clearTimeout(an),Q=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),He(sa.data.response);break;default:clearTimeout(an),clearTimeout(Q),nt(new Error("invalid_response"))}}},M.handlers.add(de),N.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:p,eventId:vt,data:m},[N.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function rr(){return window}function za(){return typeof rr().WorkerGlobalScope<"u"&&"function"==typeof rr().importScripts}function sc(){return(sc=(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fn="firebaseLocalStorageDb",ir="firebaseLocalStorage",ju="fbase_key";class Ti{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function oc(v,p){return v.transaction([ir],p?"readwrite":"readonly").objectStore(ir)}function pn(){const v=indexedDB.open(Fn,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(ir,{keyPath:ju})}catch(M){m(M)}}),v.addEventListener("success",(0,l.Z)(function*(){const b=v.result;b.objectStoreNames.contains(ir)?p(b):(b.close(),yield function kd(){const v=indexedDB.deleteDatabase(Fn);return new Ti(v).toPromise()}(),p(yield pn()))}))})}function Od(v,p,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,l.Z)(function*(v,p,m){const b=oc(v,!0).put({[ju]:p,value:m});return new Ti(b).toPromise()})).apply(this,arguments)}function $u(){return($u=(0,l.Z)(function*(v,p){const m=oc(v,!1).get(p),b=yield new Ti(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function tg(v,p){const m=oc(v,!0).delete(p);return new Ti(m).toPromise()}const cf=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,l.Z)(function*(){return m.db||(m.db=yield pn()),m.db})()}_withRetries(m){var b=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const N=yield b._openDb();return yield m(N)}catch(N){if(M++>3)throw N;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,l.Z)(function*(){return za()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,l.Z)(function*(){m.receiver=uf._getInstance(function ms(){return za()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,l.Z)(function*(M,N){return{keyProcessed:(yield m._poll()).includes(N.key)}});return function(M,N){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,l.Z)(function*(M,N){return["keyChanged"]});return function(M,N){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,l.Z)(function*(){var b,M;if(m.activeServiceWorker=yield function ic(){return sc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new qo(m.activeServiceWorker);const N=yield m.sender._send("ping",{},800);!N||(null===(b=N[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=N[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,l.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Nd(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const m=yield pn();return yield Od(m,Bs,"1"),yield tg(m,Bs),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,l.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(N=>Od(N,m,b)),M.localCache[m]=b,M.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,l.Z)(function*(){const M=yield b._withRetries(N=>function xy(v,p){return $u.apply(this,arguments)}(N,m));return b.localCache[m]=M,M})()}_remove(m){var b=this;return(0,l.Z)(function*(){return b._withPendingWrite((0,l.Z)(function*(){return yield b._withRetries(M=>tg(M,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,l.Z)(function*(){const b=yield m._withRetries(Q=>{const de=oc(Q,!1).getAll();return new Ti(de).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:Q,value:de}of b)N.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(de)&&(m.notifyListeners(Q,de),M.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!N.has(Q)&&(m.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(m,b){this.localCache[m]=b;const M=this.listeners[m];if(M)for(const N of Array.from(M))N(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function My(v,p){return Ne(v,"POST","/v2/accounts/mfaSignIn:start",he(v,p))}const zu=1e12;class Tr{constructor(p){this.auth=p,this.counter=zu,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new ji(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||zu;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||zu))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,l.Z)(function*(){var b;return null===(b=m._widgets.get(p||zu))||void 0===b||b.execute(),""})()}}class ji{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;ue(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ac(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wa=Hr("rcb"),qu=new ri(3e4,6e4);class Vd{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=rr().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return ue(function rg(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&xt(rr().grecaptcha)?Promise.resolve(rr().grecaptcha):new Promise((b,M)=>{const N=rr().setTimeout(()=>{M(Ie(p,"network-request-failed"))},qu.get());rr()[Wa]=()=>{rr().clearTimeout(N),delete rr()[Wa];const de=rr().grecaptcha;if(!de||!xt(de))return void M(Ie(p,"internal-error"));const He=de.render;de.render=(nt,vt)=>{const an=He(nt,vt);return this.counter++,an},this.hostLanguage=m,b(de)},Qt(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Wa,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(N),M(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=rr().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class df{load(p){return(0,l.Z)(function*(){return new Tr(p)})()}clearedOneInstance(){}}const ig="recaptcha",uc={theme:"light",type:"image"};class ci{constructor(p,m=Object.assign({},uc),b){this.parameters=m,this.type=ig,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hn(b),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;ue(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new df:new Vd,this.validateStartingState()}verify(){var p=this;return(0,l.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(N=>{const Q=de=>{!de||(p.tokenChangeListeners.delete(Q),N(de))};p.tokenChangeListeners.add(Q),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=rr()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,l.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,l.Z)(function*(){ue(Gt()&&!za(),p.auth,"internal-error"),yield function Wu(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function oe(v){return ne.apply(this,arguments)}(p.auth);ue(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class go{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qn._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function hf(v,p,m){return lc.apply(this,arguments)}function lc(){return(lc=(0,l.Z)(function*(v,p,m){const b=Hn(v),M=yield Zo(b,p,(0,j.m9)(m));return new go(M,N=>Fs(b,N))})).apply(this,arguments)}function Ud(v,p,m){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v);yield Pe(!1,b,"phone");const M=yield Zo(b.auth,p,(0,j.m9)(m));return new go(M,N=>Ra(b,N))})).apply(this,arguments)}function Zu(v,p,m){return Za.apply(this,arguments)}function Za(){return(Za=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v),M=yield Zo(b.auth,p,(0,j.m9)(m));return new go(M,N=>bd(b,N))})).apply(this,arguments)}function Zo(v,p,m){return cc.apply(this,arguments)}function cc(){return(cc=(0,l.Z)(function*(v,p,m){var b;const M=yield m.verify();try{let N;if(ue("string"==typeof M,v,"argument-error"),ue(m.type===ig,v,"argument-error"),N="string"==typeof p?{phoneNumber:p}:p,"session"in N){const Q=N.session;if("phoneNumber"in N)return ue("enroll"===Q.type,v,"internal-error"),(yield Uu(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ue("signin"===Q.type,v,"internal-error");const de=(null===(b=N.multiFactorHint)||void 0===b?void 0:b.uid)||N.multiFactorUid;return ue(de,v,"missing-multi-factor-info"),(yield My(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Vl(v,{phoneNumber:N.phoneNumber,recaptchaToken:M});return Q}}finally{m._reset()}})).apply(this,arguments)}function In(v,p){return xr.apply(this,arguments)}function xr(){return(xr=(0,l.Z)(function*(v,p){yield Ui((0,j.m9)(v),p)})).apply(this,arguments)}let sg=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Hn(m)}verifyPhoneNumber(m,b){return Zo(this.auth,m,(0,j.m9)(b))}static credential(m,b){return qn._fromVerification(m,b)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:M}=m;return b&&M?qn._fromTokenResponse(b,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function di(v,p){return p?er(p):(ue(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Ka extends ps{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return so(p,this._buildIdpRequest())}_linkToIdToken(p,m){return so(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return so(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function hi(v){return Wn(v.auth,new Ka(v),v.bypassAuthState)}function dc(v){const{auth:p,user:m}=v;return ue(m,p,"internal-error"),Wl(m,new Ka(v),v.bypassAuthState)}function jd(v){return ys.apply(this,arguments)}function ys(){return(ys=(0,l.Z)(function*(v){const{auth:p,user:m}=v;return ue(m,p,"internal-error"),Ui(m,new Ka(v),v.bypassAuthState)})).apply(this,arguments)}class _s{constructor(p,m,b,M,N=!1){this.auth=p,this.resolver=b,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,l.Z)(function*(b,M){p.pendingPromise={resolve:b,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(N){p.reject(N)}});return function(b,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,l.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:N,tenantId:Q,error:de,type:He}=p;if(de)return void m.reject(de);const nt={auth:m.auth,requestUri:b,sessionId:M,tenantId:Q||void 0,postBody:N||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(He)(nt))}catch(vt){m.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return hi;case"linkViaPopup":case"linkViaRedirect":return jd;case"reauthViaPopup":case"reauthViaRedirect":return dc;default:Se(this.auth,"internal-error")}}resolve(p){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zn=new ri(2e3,1e4);function ft(v,p,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,l.Z)(function*(v,p,m){const b=Hn(v);Ge(v,p,Cn);const M=di(b,m);return new Hs(b,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function or(v,p,m){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v);Ge(b.auth,p,Cn);const M=di(b.auth,m);return new Hs(b.auth,"reauthViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}function hc(v,p,m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v);Ge(b.auth,p,Cn);const M=di(b.auth,m);return new Hs(b.auth,"linkViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}let Hs=(()=>{class v extends _s{constructor(m,b,M,N,Q){super(m,b,N,Q),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,l.Z)(function*(){const b=yield m.execute();return ue(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,l.Z)(function*(){At(1===m.filter.length,"Popup operations only handle one event");const b=$s();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,M;this.pollId=null!==(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Zn.get())};m()}}return v.currentPopupAction=null,v})();const Mr=new Map;class og extends _s{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,l.Z)(function*(){let b=Mr.get(m.auth._key());if(!b){try{const N=(yield function fc(v,p){return vs.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(N)}catch(M){b=()=>Promise.reject(M)}Mr.set(m.auth._key(),b)}return m.bypassAuthState||Mr.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,l.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const M=yield b.auth._redirectUserForId(p.eventId);if(M)return b.user=M,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function vs(){return(vs=(0,l.Z)(function*(v,p){const m=Ja(p),b=fi(v);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(m));return yield b._remove(m),M})).apply(this,arguments)}function pc(v,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,l.Z)(function*(v,p){return fi(v)._set(Ja(p),"true")})).apply(this,arguments)}function Gs(){Mr.clear()}function $d(v,p){Mr.set(v._key(),p)}function fi(v){return er(v._redirectPersistence)}function Ja(v){return jr("pendingRedirect",v.config.apiKey,v.name)}function vr(v,p,m){return function ws(v,p,m){return gc.apply(this,arguments)}(v,p,m)}function gc(){return(gc=(0,l.Z)(function*(v,p,m){const b=Hn(v);Ge(v,p,Cn),yield b._initializationPromise;const M=di(b,m);return yield pc(M,b),M._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Rr(v,p,m){return function Yo(v,p,m){return Yu.apply(this,arguments)}(v,p,m)}function Yu(){return(Yu=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v);Ge(b.auth,p,Cn),yield b.auth._initializationPromise;const M=di(b.auth,m);yield pc(M,b.auth);const N=yield _o(b);return M._openRedirect(b.auth,p,"reauthViaRedirect",N)})).apply(this,arguments)}function ff(v,p,m){return function mc(v,p,m){return yc.apply(this,arguments)}(v,p,m)}function yc(){return(yc=(0,l.Z)(function*(v,p,m){const b=(0,j.m9)(v);Ge(b.auth,p,Cn),yield b.auth._initializationPromise;const M=di(b.auth,m);yield Pe(!1,b,p.providerId),yield pc(M,b.auth);const N=yield _o(b);return M._openRedirect(b.auth,p,"linkViaRedirect",N)})).apply(this,arguments)}function pf(v,p){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,l.Z)(function*(v,p){return yield Hn(v)._initializationPromise,Qu(v,p,!1)})).apply(this,arguments)}function Qu(v,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,l.Z)(function*(v,p,m=!1){const b=Hn(v),M=di(b,p),Q=yield new og(b,M,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,p)),Q})).apply(this,arguments)}function _o(v){return eu.apply(this,arguments)}function eu(){return(eu=(0,l.Z)(function*(v){const p=$s(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Qo{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function vc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jo(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!Jo(p)){const M=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_c(p))}saveEventToCache(p){this.cachedEventUids.add(_c(p)),this.lastProcessedEventTime=Date.now()}}function _c(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Jo({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function Xo(v){return ea.apply(this,arguments)}function ea(){return(ea=(0,l.Z)(function*(v,p={}){return Ne(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Xu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ag=/^https?/;function ta(){return(ta=(0,l.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield Xo(v);for(const m of p)try{if(Hd(m))return}catch{}Se(v,"unauthorized-domain")})).apply(this,arguments)}function Hd(v){const p=gt(),{protocol:m,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===b?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===b}if(!ag.test(m))return!1;if(Xu.test(v))return b===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const zs=new ri(3e4,6e4);function wc(){const v=rr().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let el=null;function Kn(v){return el=el||function gf(v){return new Promise((p,m)=>{var b,M,N;function Q(){wc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{wc(),m(Ie(v,"network-request-failed"))},timeout:zs.get()})}if(null!==(M=null===(b=rr().gapi)||void 0===b?void 0:b.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(N=rr().gapi)||void 0===N||!N.load){const de=Hr("iframefcb");return rr()[de]=()=>{gapi.load?Q():m(Ie(v,"network-request-failed"))},Qt(`https://apis.google.com/js/api.js?onload=${de}`).catch(He=>m(He))}Q()}}).catch(p=>{throw el=null,p})}(v),el}const Es=new ri(5e3,15e3),cg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Pr(v){const p=v.config;ue(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?Ji(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},M=bs.get(v.config.apiHost);M&&(b.eid=M);const N=v._getFrameworks();return N.length&&(b.fw=N.join(",")),`${m}?${(0,j.xO)(b).slice(1)}`}function na(){return na=(0,l.Z)(function*(v){const p=yield Kn(v),m=rr().gapi;return ue(m,v,"internal-error"),p.open({where:document.body,url:Pr(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cg,dontclear:!0},b=>new Promise(function(){var M=(0,l.Z)(function*(N,Q){yield b.restyle({setHideOnLeave:!1});const de=Ie(v,"network-request-failed"),He=rr().setTimeout(()=>{Q(de)},Es.get());function nt(){rr().clearTimeout(He),N(b)}b.ping(nt).then(nt,()=>{Q(de)})});return function(N,Q){return M.apply(this,arguments)}}()))}),na.apply(this,arguments)}const E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class X{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ft=encodeURIComponent("fac");function Nt(v,p,m,b,M,N){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,l.Z)(function*(v,p,m,b,M,N){ue(v.config.authDomain,v,"auth-domain-config-required"),ue(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:b,v:O.SDK_VERSION,eventId:M};if(p instanceof Cn){p.setDefaultLanguage(v.languageCode),Q.providerId=p.providerId||"",(0,j.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[vt,an]of Object.entries(N||{}))Q[vt]=an}if(p instanceof Lo){const vt=p.getScopes().filter(an=>""!==an);vt.length>0&&(Q.scopes=vt.join(","))}v.tenantId&&(Q.tid=v.tenantId);const de=Q;for(const vt of Object.keys(de))void 0===de[vt]&&delete de[vt];const He=yield v._getAppCheckToken(),nt=He?`#${Ft}=${encodeURIComponent(He)}`:"";return`${dn(v)}?${(0,j.xO)(de).slice(1)}${nt}`})).apply(this,arguments)}function dn({config:v}){return v.emulator?Ji(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}const is="webStorageSupport",ss=class ra{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=Qu,this._overrideRedirectResult=$d}_openPopup(p,m,b,M){var N=this;return(0,l.Z)(function*(){var Q;At(null===(Q=N.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const de=yield Nt(p,m,b,gt(),M);return function me(v,p,m,b=500,M=600){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let de="";const He=Object.assign(Object.assign({},E),{width:b.toString(),height:M.toString(),top:N,left:Q}),nt=(0,j.z$)().toLowerCase();m&&(de=R(nt)?"_blank":m),F(nt)&&(p=p||"http://localhost",He.scrollbars="yes");const vt=Object.entries(He).reduce(($i,[sa,nl])=>`${$i}${sa}=${nl},`,"");if(function at(v=(0,j.z$)()){var p;return Ce(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(nt)&&"_self"!==de)return function Ye(v,p){const m=document.createElement("a");m.href=v,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",de),new X(null);const an=window.open(p||"",de,vt);ue(an,v,"popup-blocked");try{an.focus()}catch{}return new X(an)}(p,de,$s())})()}_openRedirect(p,m,b,M){var N=this;return(0,l.Z)(function*(){return yield N._originValidation(p),function Ga(v){rr().location.href=v}(yield Nt(p,m,b,gt(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:N}=this.eventManagers[m];return M?Promise.resolve(M):(At(N,"If manager is not set, promise should be"),N)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(p){var m=this;return(0,l.Z)(function*(){const b=yield function Ec(v){return na.apply(this,arguments)}(p),M=new Qo(p);return b.register("authEvent",N=>(ue(N?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=b,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(is,{type:is},M=>{var N;const Q=null===(N=M?.[0])||void 0===N?void 0:N[is];void 0!==Q&&m(!!Q),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ug(v){return ta.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Ot()||k()||Ce()}};class kr extends class ei{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ke("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new kr(p)}_finalizeEnroll(p,m,b){return function Ua(v,p){return Ne(v,"POST","/v2/accounts/mfaEnrollment:finalize",he(v,p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function sr(v,p){return Ne(v,"POST","/v2/accounts/mfaSignIn:finalize",he(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ia=(()=>{class v{constructor(){}static assertion(m){return kr._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Ic="@firebase/auth";class zd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,l.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{p(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function tl(v){(0,O._registerComponent)(new ye.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),N=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:de}=b.options;ue(Q&&!Q.includes(":"),"invalid-api-key",{appName:b.name});const He={apiKey:Q,authDomain:de,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$r(v)},nt=new ro(b,M,N,He);return function Fo(v,p){const m=p?.persistence||[],b=(Array.isArray(m)?m:[m]).map(er);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,p?.popupRedirectResolver)}(nt,m),nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ye.wA("auth-internal",p=>{const m=Hn(p.getProvider("auth").getImmediate());return new zd(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Ic,"0.23.2",function qd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(Ic,"0.23.2","esm2017")}("Browser")},2090:(wt,Oe,V)=>{V.d(Oe,{$s:()=>er,BH:()=>xe,G6:()=>Ji,L:()=>we,LL:()=>Re,P0:()=>pt,Pz:()=>Ie,Sg:()=>Ge,UG:()=>Ke,US:()=>ye,ZB:()=>J,ZR:()=>Ne,aH:()=>Se,b$:()=>Gt,eu:()=>ee,hl:()=>ie,jU:()=>At,m9:()=>jr,ne:()=>zt,pd:()=>Nn,r3:()=>Bn,ru:()=>gt,tV:()=>q,uI:()=>ue,vZ:()=>mr,w1:()=>Qi,xO:()=>Fi,xb:()=>wi,z$:()=>ze,zI:()=>Ae,zd:()=>Yr});const re=function(G){const $=[];let F=0;for(let k=0;k<G.length;k++){let R=G.charCodeAt(k);R<128?$[F++]=R:R<2048?($[F++]=R>>6|192,$[F++]=63&R|128):55296==(64512&R)&&k+1<G.length&&56320==(64512&G.charCodeAt(k+1))?(R=65536+((1023&R)<<10)+(1023&G.charCodeAt(++k)),$[F++]=R>>18|240,$[F++]=R>>12&63|128,$[F++]=R>>6&63|128,$[F++]=63&R|128):($[F++]=R>>12|224,$[F++]=R>>6&63|128,$[F++]=63&R|128)}return $},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,$){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let R=0;R<G.length;R+=3){const Y=G[R],be=R+1<G.length,Ze=be?G[R+1]:0,mt=R+2<G.length,Ce=mt?G[R+2]:0;let Yt=(15&Ze)<<2|Ce>>6,Ot=63&Ce;mt||(Ot=64,be||(Yt=64)),k.push(F[Y>>2],F[(3&Y)<<4|Ze>>4],F[Yt],F[Ot])}return k.join("")},encodeString(G,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(G):this.encodeByteArray(re(G),$)},decodeString(G,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(G):function(G){const $=[];let F=0,k=0;for(;F<G.length;){const R=G[F++];if(R<128)$[k++]=String.fromCharCode(R);else if(R>191&&R<224){const Y=G[F++];$[k++]=String.fromCharCode((31&R)<<6|63&Y)}else if(R>239&&R<365){const mt=((7&R)<<18|(63&G[F++])<<12|(63&G[F++])<<6|63&G[F++])-65536;$[k++]=String.fromCharCode(55296+(mt>>10)),$[k++]=String.fromCharCode(56320+(1023&mt))}else{const Y=G[F++],be=G[F++];$[k++]=String.fromCharCode((15&R)<<12|(63&Y)<<6|63&be)}}return $.join("")}(this.decodeStringToByteArray(G,$))},decodeStringToByteArray(G,$){this.init_();const F=$?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let R=0;R<G.length;){const Y=F[G.charAt(R++)],Ze=R<G.length?F[G.charAt(R)]:0;++R;const Ce=R<G.length?F[G.charAt(R)]:64;++R;const at=R<G.length?F[G.charAt(R)]:64;if(++R,null==Y||null==Ze||null==Ce||null==at)throw new pe;k.push(Y<<2|Ze>>4),64!==Ce&&(k.push(Ze<<4&240|Ce>>2),64!==at&&k.push(Ce<<6&192|at))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(G){return function(G){const $=re(G);return ye.encodeByteArray($,!0)}(G).replace(/\./g,"")},q=function(G){try{return ye.decodeString(G,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function J(G,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return $}for(const F in $)!$.hasOwnProperty(F)||!$e(F)||(G[F]=J(G[F],$[F]));return G}function $e(G){return"__proto__"!==G}const _e=()=>{try{return function ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=G&&q(G[1]);return $&&JSON.parse($)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},pt=G=>{const $=(G=>{var $,F;return null===(F=null===($=_e())||void 0===$?void 0:$.emulatorHosts)||void 0===F?void 0:F[G]})(G);if(!$)return;const F=$.lastIndexOf(":");if(F<=0||F+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const k=parseInt($.substring(F+1),10);return"["===$[0]?[$.substring(1,F-1),k]:[$.substring(0,F),k]},Se=()=>{var G;return null===(G=_e())||void 0===G?void 0:G.config},Ie=G=>{var $;return null===($=_e())||void 0===$?void 0:$[`_${G}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,F)=>{this.resolve=$,this.reject=F})}wrapCallback($){return(F,k)=>{F?this.reject(F):this.resolve(k),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(F):$(F,k))}}}function Ge(G,$){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=$||"demo-project",R=G.iat||0,Y=G.sub||G.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:R,exp:R+3600,auth_time:R,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},G);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(be)),""].join(".")}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ke(){var G;const $=null===(G=_e())||void 0===G?void 0:G.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function gt(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qi(){const G=ze();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Ji(){return!Ke()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function ee(){return new Promise((G,$)=>{try{let F=!0;const k="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(k);R.onsuccess=()=>{R.result.close(),F||self.indexedDB.deleteDatabase(k),G(!0)},R.onupgradeneeded=()=>{F=!1},R.onerror=()=>{var Y;$((null===(Y=R.error)||void 0===Y?void 0:Y.message)||"")}}catch(F){$(F)}})}function Ae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ne extends Error{constructor($,F,k){super(F),this.code=$,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Re.prototype.create)}}class Re{constructor($,F,k){this.service=$,this.serviceName=F,this.errors=k}create($,...F){const k=F[0]||{},R=`${this.service}/${$}`,Y=this.errors[$],be=Y?function ut(G,$){return G.replace(Tt,(F,k)=>{const R=$[k];return null!=R?String(R):`<${k}?>`})}(Y,k):"Error";return new Ne(R,`${this.serviceName}: ${be} (${R}).`,k)}}const Tt=/\{\$([^}]+)}/g;function Bn(G,$){return Object.prototype.hasOwnProperty.call(G,$)}function wi(G){for(const $ in G)if(Object.prototype.hasOwnProperty.call(G,$))return!1;return!0}function mr(G,$){if(G===$)return!0;const F=Object.keys(G),k=Object.keys($);for(const R of F){if(!k.includes(R))return!1;const Y=G[R],be=$[R];if(Jn(Y)&&Jn(be)){if(!mr(Y,be))return!1}else if(Y!==be)return!1}for(const R of k)if(!F.includes(R))return!1;return!0}function Jn(G){return null!==G&&"object"==typeof G}function Fi(G){const $=[];for(const[F,k]of Object.entries(G))Array.isArray(k)?k.forEach(R=>{$.push(encodeURIComponent(F)+"="+encodeURIComponent(R))}):$.push(encodeURIComponent(F)+"="+encodeURIComponent(k));return $.length?"&"+$.join("&"):""}function Yr(G){const $={};return G.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[R,Y]=k.split("=");$[decodeURIComponent(R)]=decodeURIComponent(Y)}}),$}function Nn(G){const $=G.indexOf("?");if(!$)return"";const F=G.indexOf("#",$);return G.substring($,F>0?F:void 0)}function zt(G,$){const F=new dt(G,$);return F.subscribe.bind(F)}class dt{constructor($,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{$(this)}).catch(k=>{this.error(k)})}next($){this.forEachObserver(F=>{F.next($)})}error($){this.forEachObserver(F=>{F.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,F,k){let R;if(void 0===$&&void 0===F&&void 0===k)throw new Error("Missing Observer.");R=function tn(G,$){if("object"!=typeof G||null===G)return!1;for(const F of $)if(F in G&&"function"==typeof G[F])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:F,complete:k},void 0===R.next&&(R.next=Qr),void 0===R.error&&(R.error=Qr),void 0===R.complete&&(R.complete=Qr);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),Y}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,$)}sendOne($,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{F(this.observers[$])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function er(G,$=1e3,F=2){const k=$*Math.pow(F,G),R=Math.round(.5*k*(Math.random()-.5)*2);return Math.min(144e5,k+R)}function jr(G){return G&&G._delegate?G._delegate:G}},1694:(wt,Oe,V)=>{var l=V(4650);let j=null;function O(){return j}const pe=new l.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function we(){return(0,l.LFG)(z)}()},providedIn:"platform"}),n})();const q=new l.OlP("Location Initialized");let z=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function $e(){return new z((0,l.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(_t)},providedIn:"root"}),n})();const _e=new l.OlP("appBaseHref");let _t=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+it(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+it(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ve),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+it(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+it(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ve),l.LFG(_e,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(Ge(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function xe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ge(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=ke,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(l.LFG(Ee))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Ie(){return new Se((0,l.LFG)(Ee))}()},providedIn:"root"}),n})();function Ge(n){return n.replace(/\/index.html$/,"")}let ln=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,l.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,l.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.ZZ4),l.Y36(l.aQg),l.Y36(l.SBq),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Hn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ks=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),io(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{io(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function io(n,e){n.context.$implicit=e.item}let kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new dd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Cr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Cr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class dd{constructor(){this.$implicit=null,this.ngIf=null}}function Cr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let hd=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),c=-1===i.indexOf("-")?void 0:l.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Qsj))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),vd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Os(n){return"server"===n}let Lo=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new $l((0,l.LFG)(pe),window)}),n})();class $l{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function si(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ao(this.window.history)||ao(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ao(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Xl extends class nf extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){j||(j=n)}(new Xl)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ec(){return Lu=Lu||document.querySelector("base"),Lu?Lu.getAttribute("href"):null}();return null==t?null:function Rd(n){Vu=Vu||document.createElement("a"),Vu.setAttribute("href",n);const e=Vu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ba(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Vu,Lu=null;const $o=new l.OlP("TRANSITION_ID"),tc=[{provide:l.ip1,useFactory:function rf(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[$o,pe,l.zs3],multi:!0}];let sf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ns=new l.OlP("EventManagerPlugins");let Vs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ns),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class li{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let nc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Us=(()=>{class n extends nc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Uu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Uu))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Uu(n){O().remove(n)}const Ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bi=/%COMP%/g;function $a(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?$a(n,i,t):(i=i.replace(Bi,n),t.push(i))}return t}function rc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Go=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ha(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case l.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new eg(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case l.ifc.ShadowDom:return new uf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=$a(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Vs),l.LFG(Us),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ha{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ua[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(js(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(js(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Ua[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ua[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,r,i&l.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,rc(r)):this.eventManager.addEventListener(e,t,rc(r))}}function js(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class eg extends Ha{constructor(e,t,r,i){super(e),this.component=r;const a=$a(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ja(n){return"_ngcontent-%COMP%".replace(Bi,n)}(i+"-"+r.id),this.hostAttr=function Bs(n){return"_nghost-%COMP%".replace(Bi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class uf extends Ha{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=$a(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let $s=(()=>{class n extends li{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const qo=["alt","control","meta","shift"],rr={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ga={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let za=(()=>{class n extends li{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),qo.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const y={};return y.domEventName=i,y.fullKey=c,y}static matchEventFullKeyCode(t,r){let i=rr[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),qo.forEach(c=>{c!==i&&(0,Ga[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const oc=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:"browser"},{provide:l.g9A,useValue:function Wo(){Xl.makeCurrent()},multi:!0},{provide:pe,useFactory:function ju(){return(0,l.RDi)(document),document},deps:[]}]),kd=new l.OlP(""),pn=[{provide:l.rWj,useClass:class Va{addToWindow(e){l.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(r=>{const i=l.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(y){c=c||y,a--,0==a&&r(c)};i.forEach(function(y){y.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Od=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function ir(){return new l.qLn},deps:[]},{provide:ns,useClass:$s,multi:!0,deps:[pe,l.R0b,l.Lbi]},{provide:ns,useClass:za,multi:!0,deps:[pe]},{provide:Go,useClass:Go,deps:[Vs,Us,l.AFp]},{provide:l.FYo,useExisting:Go},{provide:nc,useExisting:Us},{provide:Us,useClass:Us,deps:[pe]},{provide:Vs,useClass:Vs,deps:[ns,l.R0b]},{provide:class Hl{},useClass:sf,deps:[]},[]];let qa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:$o,useExisting:l.AFp},tc]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(kd,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[...Od,...pn],imports:[vd,l.hGG]}),n})(),lf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ng(){return new lf((0,l.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):l.LFG(Zo),r},providedIn:"root"}),n})(),Zo=(()=>{class n extends Zu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case l.q3G.NONE:return r;case l.q3G.HTML:return(0,l.qzn)(r,"HTML")?(0,l.z3N)(r):(0,l.EiD)(this._doc,String(r)).toString();case l.q3G.STYLE:return(0,l.qzn)(r,"Style")?(0,l.z3N)(r):r;case l.q3G.SCRIPT:if((0,l.qzn)(r,"Script"))return(0,l.z3N)(r);throw new Error("unsafe value used in a script context");case l.q3G.URL:return(0,l.qzn)(r,"URL")?(0,l.z3N)(r):(0,l.mCW)(String(r));case l.q3G.RESOURCE_URL:if((0,l.qzn)(r,"ResourceURL"))return(0,l.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Za(n){return new Zo(n.get(pe))}(l.LFG(l.zs3)),r},providedIn:"root"}),n})();var In=V(8996),xr=V(9751);const{isArray:sg}=Array,{getPrototypeOf:di,prototype:Ka,keys:hi}=Object;function dc(n){if(1===n.length){const e=n[0];if(sg(e))return{args:e,keys:null};if(function jd(n){return n&&"object"==typeof n&&di(n)===Ka}(e)){const t=hi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ys=V(8421),_s=V(7669),Zn=V(5403),ft=V(4004);const{isArray:Ya}=Array;function Qa(n){return(0,ft.U)(e=>function or(n,e){return Ya(e)?n(...e):n(e)}(n,e))}function hc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Hs=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),mo=(()=>{class n extends Hs{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Mr=new l.OlP("NgValueAccessor"),vs={provide:Mr,useExisting:(0,l.Gpc)(()=>Gs),multi:!0},Ko=new l.OlP("CompositionEventMode");let Gs=(()=>{class n extends Hs{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function pc(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Ko,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[l._Bn([vs]),l.qOj]}),n})();function fi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Ja(n){return null!=n&&"number"==typeof n.length}const vr=new l.OlP("NgValidators"),ws=new l.OlP("NgAsyncValidators"),gc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rr{static min(e){return function Yo(n){return e=>{if(fi(e.value)||fi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Yu(n){return e=>{if(fi(e.value)||fi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return ff(e)}static requiredTrue(e){return function mc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function yc(n){return fi(n.value)||gc.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function pf(n){return e=>fi(e.value)||!Ja(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Xa(n){return e=>Ja(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Qu(n){if(!n)return yo;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(fi(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return vc(e)}static composeAsync(e){return ea(e)}}function ff(n){return fi(n.value)?{required:!0}:null}function yo(n){return null}function _o(n){return null!=n}function eu(n){return(0,l.QGY)(n)?(0,In.D)(n):n}function Ju(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Qo(n,e){return e.map(t=>t(n))}function Jo(n){return n.map(e=>function _c(n){return!n.validate}(e)?e:t=>e.validate(t))}function vc(n){if(!n)return null;const e=n.filter(_o);return 0==e.length?null:function(t){return Ju(Qo(t,e))}}function Xo(n){return null!=n?vc(Jo(n)):null}function ea(n){if(!n)return null;const e=n.filter(_o);return 0==e.length?null:function(t){return function Ku(...n){const e=(0,_s.jO)(n),{args:t,keys:r}=dc(n),i=new xr.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let y=c,w=c;for(let D=0;D<c;D++){let S=!1;(0,ys.Xf)(t[D]).subscribe((0,Zn.x)(a,B=>{S||(S=!0,w--),f[D]=B},()=>y--,void 0,()=>{(!y||!S)&&(w||a.next(r?hc(r,f):f),a.complete())}))}});return e?i.pipe(Qa(e)):i}(Qo(t,e).map(eu)).pipe((0,ft.U)(Ju))}}function Xu(n){return null!=n?ea(Jo(n)):null}function ag(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ug(n){return n._rawValidators}function ta(n){return n._rawAsyncValidators}function Hd(n){return n?Array.isArray(n)?n:[n]:[]}function zs(n,e){return Array.isArray(n)?n.includes(e):n===e}function wc(n,e){const t=Hd(e);return Hd(n).forEach(i=>{zs(t,i)||t.push(i)}),t}function gf(n,e){return Hd(e).filter(t=>!zs(n,t))}class el{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Xo(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Xu(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Kn extends el{get formDirective(){return null}get path(){return null}}class Es extends el{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rs{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let bs=(()=>{class n extends rs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Es,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),n})(),Pr=(()=>{class n extends rs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kn,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]}),n})();const ss="VALID",ei="INVALID",kr="PENDING",ia="DISABLED";function mf(n){return(Ic(n)?n.validators:n)||null}function Gd(n){return Array.isArray(n)?Xo(n):n||null}function bc(n,e){return(Ic(e)?e.asyncValidators:n)||null}function Cc(n){return Array.isArray(n)?Xu(n):n||null}function Ic(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Tc(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new l.vHH(1e3,"");if(!r[t])throw new l.vHH(1001,"")}function zd(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new l.vHH(1002,"")})}class qd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Gd(this._rawValidators),this._composedAsyncValidatorFn=Cc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ss}get invalid(){return this.status===ei}get pending(){return this.status==kr}get disabled(){return this.status===ia}get enabled(){return this.status!==ia}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Gd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Cc(e)}addValidators(e){this.setValidators(wc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(gf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(gf(e,this._rawAsyncValidators))}hasValidator(e){return zs(this._rawValidators,e)}hasAsyncValidator(e){return zs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=kr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ia,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ss,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ss||this.status===kr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ia:ss}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=kr,this._hasOwnPendingAsyncValidator=!0;const t=eu(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?ia:this.errors?ei:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kr)?kr:this._anyControlsHaveStatus(ei)?ei:ss}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ic(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class tl extends qd{constructor(e,t,r){super(mf(t),bc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zd(this,0,e),Object.keys(e).forEach(r=>{Tc(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class yf extends tl{}function Dc(n,e){return[...e.path,n]}function v(n,e){M(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Q(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&He(n,e)})}(n,e),function nt(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function de(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&He(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function b(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function p(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),N(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function m(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function M(n,e){const t=ug(n);null!==e.validator?n.setValidators(ag(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ta(n);null!==e.asyncValidator?n.setAsyncValidators(ag(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();m(e._rawValidators,i),m(e._rawAsyncValidators,i)}function N(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=ug(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=ta(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return m(e._rawValidators,r),m(e._rawAsyncValidators,r),t}function He(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vt(n,e){M(n,e)}function rl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function vf(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ac(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Gs?t=a:function Zd(n){return Object.getPrototypeOf(n.constructor)===mo}(a)?r=a:i=a}),i||r||t||null}const vo={provide:Kn,useExisting:(0,l.Gpc)(()=>nu)},tu=(()=>Promise.resolve())();let nu=(()=>{class n extends Kn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new tl({},Xo(t),Xu(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){tu.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),v(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){tu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){tu.then(()=>{const r=this._findContainer(t.path),i=new tl({});vt(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){tu.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){tu.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,vf(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vr,10),l.Y36(ws,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([vo]),l.qOj]}),n})();function Kd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ry(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const il=class extends qd{constructor(e=null,t,r){super(mf(t),bc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ic(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Ry(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Kd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Kd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Ry(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Oy={provide:Es,useExisting:(0,l.Gpc)(()=>Sc)},fg=(()=>Promise.resolve())();let Sc=(()=>{class n extends Es{constructor(t,r,i,a,c){super(),this._changeDetectorRef=c,this.control=new il,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ac(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),rl(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){v(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){fg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,l.D6c)(r);fg.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Dc(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Kn,9),l.Y36(vr,10),l.Y36(ws,10),l.Y36(Mr,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([Oy]),l.qOj,l.TTD]}),n})(),wo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ly=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const By=new l.OlP("NgModelWithFormControlWarning"),WT={provide:Kn,useExisting:(0,l.Gpc)(()=>ol)};let ol=(()=>{class n extends Kn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(N(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return v(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){p(t.control||null,t,!1),function wf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,vf(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(p(r||null,t),(n=>n instanceof il)(i)&&(v(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);vt(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function an(n,e){return N(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){M(this.form,this),this._oldForm&&N(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(vr,10),l.Y36(ws,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([WT]),l.qOj,l.TTD]}),n})();const kw={provide:Es,useExisting:(0,l.Gpc)(()=>Yd)};let Yd=(()=>{class n extends Es{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ac(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),rl(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Dc(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(l.Y36(Kn,13),l.Y36(vr,10),l.Y36(ws,10),l.Y36(Mr,10),l.Y36(By,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([kw]),l.qOj,l.TTD]}),n})(),Mc=(()=>{class n{constructor(){this._validator=yo}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):yo,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const eD={provide:vr,useExisting:(0,l.Gpc)(()=>Cs),multi:!0};let Cs=(()=>{class n extends Mc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=l.D6c,this.createValidator=t=>ff}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=l.n5z(n)))(r||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&l.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([eD]),l.qOj]}),n})(),Hw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Ly]}),n})(),iD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Hw]}),n})(),Gw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:By,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[Hw]}),n})();class zw extends qd{constructor(e,t,r){super(mf(t),bc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zd(this,0,e),e.forEach((r,i)=>{Tc(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Wy(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Cf=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return Wy(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new tl(i,a)}record(t,r=null){const i=this._reduceControls(t);return new yf(i,r)}control(t,r,i){let a={};return this.useNonNullable?(Wy(r)?a=r:(a.validators=r,a.asyncValidators=i),new il(t,{...a,nonNullable:!0})):new il(t,r,i)}array(t,r,i){const a=t.map(c=>this._createControl(c));return new zw(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof il||t instanceof qd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:Gw}),n})();class qw{}const aa="*";function aD(n,e){return{type:7,name:n,definitions:e,options:{}}}function Ww(n,e=null){return{type:4,styles:e,timings:n}}function Zw(n,e=null){return{type:2,steps:n,options:e}}function If(n){return{type:6,styles:n,offset:null}}function Kw(n,e,t){return{type:0,name:n,styles:e,options:t}}function Xd(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Ky(n){Promise.resolve().then(n)}class eh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ky(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class _g{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?Ky(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++r==a&&this._onDestroy()}),c.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function vg(n){return new l.vHH(3e3,!1)}function SD(){return typeof window<"u"&&typeof window.document<"u"}function bg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ru(n){switch(n.length){case 0:return new eh;case 1:return n[0];default:return new _g(n)}}function Cg(n,e,t,r,i=new Map,a=new Map){const c=[],f=[];let y=-1,w=null;if(r.forEach(D=>{const S=D.get("offset"),B=S==y,H=B&&w||new Map;D.forEach((K,se)=>{let ce=se,Be=K;if("offset"!==se)switch(ce=e.normalizePropertyName(ce,c),Be){case"!":Be=i.get(se);break;case aa:Be=a.get(se);break;default:Be=e.normalizeStyleValue(se,ce,Be,c)}H.set(ce,Be)}),B||f.push(H),w=H,y=S}),c.length)throw function ED(n){return new l.vHH(3502,!1)}();return f}function Af(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&e_(t,"start",n)));break;case"done":n.onDone(()=>r(t&&e_(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&e_(t,"destroy",n)))}}function e_(n,e,t){const a=Sf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function Sf(n,e,t,r,i="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!c}}function pi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function rE(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let t_=(n,e)=>!1,iE=(n,e,t)=>[],sE=null;function n_(n){const e=n.parentNode||n.host;return e===sE?null:e}(bg()||typeof Element<"u")&&(SD()?(sE=(()=>document.documentElement)(),t_=(n,e)=>{for(;e;){if(e===n)return!0;e=n_(e)}return!1}):t_=(n,e)=>n.contains(e),iE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let qs=null,ua=!1;const RD=t_,r_=iE;let i_=(()=>{class n{validateStyleProperty(t){return function MD(n){qs||(qs=function cP(){return typeof document<"u"?document.body:null}()||{},ua=!!qs.style&&"WebkitAppearance"in qs.style);let e=!0;return qs.style&&!function xD(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in qs.style,!e&&ua&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in qs.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return RD(t,r)}getParentElement(t){return n_(t)}query(t,r,i){return r_(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,c,f=[],y){return new eh(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),oE=(()=>{class n{}return n.NOOP=new i_,n})();const s_="ng-enter",Ig="ng-leave",os="ng-trigger",Tg=".ng-trigger",o_="ng-animating",a_=".ng-animating";function iu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:u_(parseFloat(e[1]),e[2])}function u_(n,e){return"s"===e?1e3*n:n}function Dg(n,e,t){return n.hasOwnProperty("duration")?n:function cE(n,e,t){let i,a=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(vg()),{duration:0,delay:0,easing:""};i=u_(parseFloat(f[1]),f[2]);const y=f[3];null!=y&&(a=u_(parseFloat(y),f[4]));const w=f[5];w&&(c=w)}else i=n;if(!t){let f=!1,y=e.length;i<0&&(e.push(function Jw(){return new l.vHH(3100,!1)}()),f=!0),a<0&&(e.push(function Xw(){return new l.vHH(3101,!1)}()),f=!0),f&&e.splice(y,0,vg())}return{duration:i,delay:a,easing:c}}(n,e,t)}function xf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function dE(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function su(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function l_(n,e,t){return t?e+":"+t+";":""}function c_(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=l_(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=l_(0,kc(t),n.style[t]));n.setAttribute("style",e)}function la(n,e,t){n.style&&(e.forEach((r,i)=>{const a=Sg(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),bg()&&c_(n))}function Nc(n,e){n.style&&(e.forEach((t,r)=>{const i=Sg(r);n.style[i]=""}),bg()&&c_(n))}function rh(n){return Array.isArray(n)?1==n.length?n[0]:Zw(n):n}const Ag=new RegExp("{{\\s*(.+?)\\s*}}","g");function hE(n){let e=[];if("string"==typeof n){let t;for(;t=Ag.exec(n);)e.push(t[1]);Ag.lastIndex=0}return e}function Mf(n,e,t){const r=n.toString(),i=r.replace(Ag,(a,c)=>{let f=e[c];return null==f&&(t.push(function dD(n){return new l.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function d_(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const fE=/-+([a-z0-9])/g;function Sg(n){return n.replace(fE,(...e)=>e[1].toUpperCase())}function kc(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Hi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Yy(n){return new l.vHH(3004,!1)}()}}function pE(n,e){return window.getComputedStyle(n)[e]}function FD(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function mE(n,e,t){if(":"==n[0]){const y=function xg(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function vD(n){return new l.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof y)return void e.push(y);n=y}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function _D(n){return new l.vHH(3015,!1)}()),e;const i=r[1],a=r[2],c=r[3];e.push(yE(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(yE(c,i))}(r,t,e)):t.push(n),t}const Mg=new Set(["true","1"]),Rf=new Set(["false","0"]);function yE(n,e){const t=Mg.has(n)||Rf.has(n),r=Mg.has(e)||Rf.has(e);return(i,a)=>{let c="*"==n||n==i,f="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?Mg.has(n):Rf.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?Mg.has(e):Rf.has(e)),c&&f}}const LD=new RegExp("s*:selfs*,?","g");function g_(n,e,t,r){return new wE(n).build(e,t,r)}class wE{constructor(e){this._driver=e}build(e,t,r){const i=new bE(t);return this._resetContextStyleTimingState(i),Hi(this,rh(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function hD(){return new l.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const y=f,w=y.name;w.toString().split(/\s*,\s*/).forEach(D=>{y.name=D,a.push(this.visitState(y,t))}),y.name=w}else if(1==f.type){const y=this.visitTransition(f,t);r+=y.queryCount,i+=y.depCount,c.push(y)}else t.errors.push(function Qy(){return new l.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(y=>{hE(y).forEach(w=>{c.hasOwnProperty(w)||a.add(w)})})}),a.size&&(d_(a.values()),t.errors.push(function Eg(n,e){return new l.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Hi(this,rh(e.animation),t);return{type:1,matchers:FD(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:au(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Hi(this,r,t)),options:au(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=r;const f=Hi(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:au(e.options)}}visitAnimate(e,t){const r=function fP(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return y_(Dg(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=y_(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=Dg(t,e);return y_(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:If({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,f=!1;if(!c){f=!0;const w={};r.easing&&(w.easing=r.easing),c=If(w)}t.currentTime+=r.duration+r.delay;const y=this.visitStyle(c,t);y.isEmptyStep=f,i=y}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===aa?r.push(f):t.errors.push(new l.vHH(3002,!1)):r.push(dE(f));let a=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!a))for(let y of f.values())if(y.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,y)=>{const w=t.collectedStyles.get(t.currentQuerySelector),D=w.get(y);let S=!0;D&&(a!=i&&a>=D.startTime&&i<=D.endTime&&(t.errors.push(function Jy(n,e,t,r,i){return new l.vHH(3010,!1)}()),S=!1),a=D.startTime),S&&w.set(y,{startTime:a,endTime:i}),t.options&&function ND(n,e,t){const r=e.params||{},i=hE(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function Rc(n){return new l.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function pD(){return new l.vHH(3011,!1)}()),r;let a=0;const c=[];let f=!1,y=!1,w=0;const D=e.steps.map(Be=>{const Qe=this._makeStyleAst(Be,t);let We=null!=Qe.offset?Qe.offset:function m_(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Qe.styles),Xe=0;return null!=We&&(a++,Xe=Qe.offset=We),y=y||Xe<0||Xe>1,f=f||Xe<w,w=Xe,c.push(Xe),Qe});y&&t.errors.push(function gD(){return new l.vHH(3012,!1)}()),f&&t.errors.push(function eE(){return new l.vHH(3200,!1)}());const S=e.steps.length;let B=0;a>0&&a<S?t.errors.push(function th(){return new l.vHH(3202,!1)}()):0==a&&(B=1/(S-1));const H=S-1,K=t.currentTime,se=t.currentAnimateTimings,ce=se.duration;return D.forEach((Be,Qe)=>{const We=B>0?Qe==H?1:B*Qe:c[Qe],Xe=We*ce;t.currentTime=K+se.delay+Xe,se.duration=Xe,this._validateStyleAst(Be,t),Be.offset=We,r.styles.push(Be)}),r}visitReference(e,t){return{type:8,animation:Hi(this,rh(e.animation),t),options:au(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:au(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:au(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function VD(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(LD,"")),n=n.replace(/@\*/g,Tg).replace(/@\w+/g,t=>Tg+"-"+t.slice(1)).replace(/:animating/g,a_),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,pi(t.collectedStyles,t.currentQuerySelector,new Map);const f=Hi(this,rh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:au(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function mD(){return new l.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Dg(e.timings,t.errors,!0);return{type:12,animation:Hi(this,rh(e.animation),t),timings:r,options:null}}}class bE{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function au(n){return n?(n=xf(n)).params&&(n.params=function EE(n){return n?xf(n):null}(n.params)):n={},n}function y_(n,e,t){return{duration:n,delay:e,easing:t}}function CE(n,e,t,r,i,a,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:f}}class uu{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Rg=new RegExp(":enter","g"),DE=new RegExp(":leave","g");function __(n,e,t,r,i,a=new Map,c=new Map,f,y,w=[]){return(new v_).buildKeyframes(n,e,t,r,i,a,c,f,y,w)}class v_{buildKeyframes(e,t,r,i,a,c,f,y,w,D=[]){w=w||new uu;const S=new Pf(e,t,w,i,a,D,[]);S.options=y;const B=y.delay?iu(y.delay):0;S.currentTimeline.delayNextStep(B),S.currentTimeline.setStyles([c],null,S.errors,y),Hi(this,r,S);const H=S.timelines.filter(K=>K.containsAnimation());if(H.length&&f.size){let K;for(let se=H.length-1;se>=0;se--){const ce=H[se];if(ce.element===t){K=ce;break}}K&&!K.allowOnlyTimelineStyles()&&K.setStyles([f],null,S.errors,y)}return H.length?H.map(K=>K.buildKeyframes()):[CE(t,[],[],[],0,B,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const c="number"==typeof a?a:iu(Mf(a,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const c=null!=r.duration?iu(r.duration):null,f=null!=r.delay?iu(r.delay):null;return 0!==c&&e.forEach(y=>{const w=t.appendInstructionToTimeline(y,c,f);a=Math.max(a,w.duration+w.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Hi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ws);const c=iu(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Hi(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?iu(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),Hi(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Dg(t.params?Mf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(y=>{f.forwardTime((y.offset||0)*a),f.setStyles(y.styles,y.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?iu(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ws);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let y=null;f.forEach((w,D)=>{t.currentQueryIndex=D;const S=t.createSubContext(e.options,w);a&&S.delayNextStep(a),w===t.element&&(y=S.currentTimeline),Hi(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),y&&(t.currentTimeline.mergeTimelineCollectedStyles(y),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),f=c*(t.currentQueryTotal-1);let y=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":y=f-y;break;case"full":y=r.currentStaggerTime}const D=t.currentTimeline;y&&D.delayNextStep(y);const S=D.currentTime;Hi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const Ws={};class Pf{constructor(e,t,r,i,a,c,f,y){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ws,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=y||new Nf(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=iu(r.duration)),null!=r.delay&&(i.delay=iu(r.delay));const a=r.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=Mf(a[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new Pf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Ws,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new w_(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(Rg,"."+this._enterClassName)).replace(DE,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),f.push(...w)}return!a&&0==f.length&&c.push(function yD(n){return new l.vHH(3014,!1)}()),f}}class Nf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Nf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||aa),this._currentKeyframe.set(t,aa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},c=function AE(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,aa)}else su(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,y]of c){const w=Mf(y,a,r);this._pendingStyles.set(f,w),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??aa),this._updateStyle(f,w)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,y)=>{const w=su(f,new Map,this._backFill);w.forEach((D,S)=>{"!"===D?e.add(S):D===aa&&t.add(S)}),r||w.set("offset",y/this.duration),i.push(w)});const a=e.size?d_(e.values()):[],c=t.size?d_(t.values()):[];if(r){const f=i[0],y=new Map(f);f.set("offset",0),y.set("offset",1),i=[f,y]}return CE(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class w_ extends Nf{constructor(e,t,r,i,a,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=r+t,f=t/c,y=su(e[0]);y.set("offset",0),a.push(y);const w=su(e[0]);w.set("offset",UD(f)),a.push(w);const D=e.length-1;for(let S=1;S<=D;S++){let B=su(e[S]);const H=B.get("offset");B.set("offset",UD((t+H*r)/c)),a.push(B)}r=c,t=0,i="",e=a}return CE(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function UD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ih{}const b_=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class C_ extends ih{normalizePropertyName(e,t){return Sg(e)}normalizeStyleValue(e,t,r,i){let a="";const c=r.toString().trim();if(b_.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function wg(n,e){return new l.vHH(3005,!1)}())}return c+a}}function Pg(n,e,t,r,i,a,c,f,y,w,D,S,B){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:c,timelines:f,queriedElements:y,preStyleProps:w,postStyleProps:D,totalTime:S,errors:B}}const SE={};class xE{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function BD(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,c,f,y,w,D){const S=[],B=this.ast.options&&this.ast.options.params||SE,K=this.buildStyles(r,f&&f.params||SE,S),se=y&&y.params||SE,ce=this.buildStyles(i,se,S),Be=new Set,Qe=new Map,We=new Map,Xe="void"===i,Ut={params:jD(se,B),delay:this.ast.options?.delay},Bt=D?[]:__(e,t,this.ast.animation,a,c,K,ce,Ut,w,S);let _n=0;if(Bt.forEach(hs=>{_n=Math.max(hs.duration+hs.delay,_n)}),S.length)return Pg(t,this._triggerName,r,i,Xe,K,ce,[],[],Qe,We,_n,S);Bt.forEach(hs=>{const ld=hs.element,Q2=pi(Qe,ld,new Set);hs.preStyleProps.forEach(Wp=>Q2.add(Wp));const xw=pi(We,ld,new Set);hs.postStyleProps.forEach(Wp=>xw.add(Wp)),ld!==t&&Be.add(ld)});const Dr=d_(Be.values());return Pg(t,this._triggerName,r,i,Xe,K,ce,Bt,Dr,Qe,We,_n)}}function jD(n,e){const t=xf(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class ME{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=xf(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!==c&&(i[a]=c)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,f)=>{c&&(c=Mf(c,i,t));const y=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,y,c,t),r.set(y,c)})}),r}}class $D{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new ME(i.style,i.options&&i.options.params||{},r))}),I_(this.states,"true","1"),I_(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new xE(e,i,this.states))}),this.fallbackTransition=function mP(n,e,t){return new xE(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function I_(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const RE=new uu;class HD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=g_(this._driver,t,r,[]);if(r.length)throw function nE(n){return new l.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=Cg(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let c;const f=new Map;if(a?(c=__(this._driver,t,a,s_,Ig,new Map,new Map,r,RE,i),c.forEach(D=>{const S=pi(f,D.element,new Map);D.postStyleProps.forEach(B=>S.set(B,null))})):(i.push(function oP(){return new l.vHH(3300,!1)}()),c=[]),i.length)throw function bD(n){return new l.vHH(3504,!1)}();f.forEach((D,S)=>{D.forEach((B,H)=>{D.set(H,this._driver.computeStyle(S,H,aa))})});const w=ru(c.map(D=>{const S=f.get(D.element);return this._buildPlayer(D,new Map,S)}));return this._playersById.set(e,w),w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Tf(n){return new l.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=Sf(t,"","","");return Af(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Ng="ng-animate-queued",PE="ng-animate-disabled",EP=[],GD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},bP={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},bo="__ng_removed";class NE{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function T_(n){return n??null}(r?e.value:e),r){const a=xf(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Zs="void",kf=new NE(Zs);class zD{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Is(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function CD(n,e){return new l.vHH(3302,!1)}();if(null==r||0==r.length)throw function nh(n){return new l.vHH(3303,!1)}();if(!function al(n){return"start"==n||"done"==n}(r))throw function Df(n,e){return new l.vHH(3400,!1)}();const a=pi(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};a.push(c);const f=pi(this._engine.statesByElement,e,new Map);return f.has(t)||(Is(e,os),Is(e,os+"-"+t),f.set(t,kf)),()=>{this._engine.afterFlush(()=>{const y=a.indexOf(c);y>=0&&a.splice(y,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ID(n){return new l.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),c=new Of(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Is(e,os),Is(e,os+"-"+t),this._engine.statesByElement.set(e,f=new Map));let y=f.get(t);const w=new NE(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&y&&w.absorbOptions(y.options),f.set(t,w),y||(y=kf),w.value!==Zs&&y.value===w.value){if(!function A_(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(y.params,w.params)){const se=[],ce=a.matchStyles(y.value,y.params,se),Be=a.matchStyles(w.value,w.params,se);se.length?this._engine.reportError(se):this._engine.afterFlush(()=>{Nc(e,ce),la(e,Be)})}return}const B=pi(this._engine.playersByElement,e,[]);B.forEach(se=>{se.namespaceId==this.id&&se.triggerName==t&&se.queued&&se.destroy()});let H=a.matchTransition(y.value,w.value,e,w.params),K=!1;if(!H){if(!i)return;H=a.fallbackTransition,K=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:H,fromState:y,toState:w,player:c,isFallbackTransition:K}),K||(Is(e,Ng),c.onStart(()=>{sh(e,Ng)})),c.onDone(()=>{let se=this.players.indexOf(c);se>=0&&this.players.splice(se,1);const ce=this._engine.playersByElement.get(e);if(ce){let Be=ce.indexOf(c);Be>=0&&ce.splice(Be,1)}}),this.players.push(c),B.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Tg,!0);r.forEach(i=>{if(i[bo])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const f=[];if(a.forEach((y,w)=>{if(c.set(w,y.value),this._triggers.has(w)){const D=this.trigger(e,w,Zs,i);D&&f.push(D)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&ru(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const y=this._triggers.get(c).fallbackTransition,w=r.get(c)||kf,D=new NE(Zs),S=new Of(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:y,fromState:w,toState:D,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[bo];(!a||a===GD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Is(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,c=this._elementListeners.get(a);c&&c.forEach(f=>{if(f.name==r.triggerName){const y=Sf(a,r.triggerName,r.fromState.value,r.toState.value);y._data=e,Af(r.player,f.phase,y,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kE{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new zD(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const y=i.get(f);if(y){const w=r.indexOf(y);r.splice(w+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(kg(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!kg(t))return;const a=t[bo];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Is(e,PE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),sh(e,PE))}removeNode(e,t,r,i){if(kg(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[bo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return kg(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,Tg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,a_,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ru(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[bo];if(t&&t.setForRemoval){if(e[bo]=GD,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(PE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Is(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ru(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function aP(n){return new l.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new uu,i=[],a=new Map,c=[],f=new Map,y=new Map,w=new Map,D=new Set;this.disabledNodes.forEach(Et=>{D.add(Et);const jt=this.driver.query(Et,".ng-animate-queued",!0);for(let Ht=0;Ht<jt.length;Ht++)D.add(jt[Ht])});const S=this.bodyNode,B=Array.from(this.statesByElement.keys()),H=LE(B,this.collectedEnterElements),K=new Map;let se=0;H.forEach((Et,jt)=>{const Ht=s_+se++;K.set(jt,Ht),Et.forEach(Tn=>Is(Tn,Ht))});const ce=[],Be=new Set,Qe=new Set;for(let Et=0;Et<this.collectedLeaveElements.length;Et++){const jt=this.collectedLeaveElements[Et],Ht=jt[bo];Ht&&Ht.setForRemoval&&(ce.push(jt),Be.add(jt),Ht.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(Tn=>Be.add(Tn)):Qe.add(jt))}const We=new Map,Xe=LE(B,Array.from(Be));Xe.forEach((Et,jt)=>{const Ht=Ig+se++;We.set(jt,Ht),Et.forEach(Tn=>Is(Tn,Ht))}),e.push(()=>{H.forEach((Et,jt)=>{const Ht=K.get(jt);Et.forEach(Tn=>sh(Tn,Ht))}),Xe.forEach((Et,jt)=>{const Ht=We.get(jt);Et.forEach(Tn=>sh(Tn,Ht))}),ce.forEach(Et=>{this.processLeaveNode(Et)})});const Ut=[],Bt=[];for(let Et=this._namespaceList.length-1;Et>=0;Et--)this._namespaceList[Et].drainQueuedTransitions(t).forEach(Ht=>{const Tn=Ht.player,Oi=Ht.element;if(Ut.push(Tn),this.collectedEnterElements.length){const fs=Oi[bo];if(fs&&fs.setForMove){if(fs.previousTriggersValues&&fs.previousTriggersValues.has(Ht.triggerName)){const Zp=fs.previousTriggersValues.get(Ht.triggerName),wa=this.statesByElement.get(Ht.element);if(wa&&wa.has(Ht.triggerName)){const BT=wa.get(Ht.triggerName);BT.value=Zp,wa.set(Ht.triggerName,BT)}}return void Tn.destroy()}}const Nl=!S||!this.driver.containsElement(S,Oi),Oo=We.get(Oi),Zh=K.get(Oi),Ar=this._buildInstruction(Ht,r,Zh,Oo,Nl);if(Ar.errors&&Ar.errors.length)return void Bt.push(Ar);if(Nl)return Tn.onStart(()=>Nc(Oi,Ar.fromStyles)),Tn.onDestroy(()=>la(Oi,Ar.toStyles)),void i.push(Tn);if(Ht.isFallbackTransition)return Tn.onStart(()=>Nc(Oi,Ar.fromStyles)),Tn.onDestroy(()=>la(Oi,Ar.toStyles)),void i.push(Tn);const eV=[];Ar.timelines.forEach(fs=>{fs.stretchStartingKeyframe=!0,this.disabledNodes.has(fs.element)||eV.push(fs)}),Ar.timelines=eV,r.append(Oi,Ar.timelines),c.push({instruction:Ar,player:Tn,element:Oi}),Ar.queriedElements.forEach(fs=>pi(f,fs,[]).push(Tn)),Ar.preStyleProps.forEach((fs,Zp)=>{if(fs.size){let wa=y.get(Zp);wa||y.set(Zp,wa=new Set),fs.forEach((BT,QR)=>wa.add(QR))}}),Ar.postStyleProps.forEach((fs,Zp)=>{let wa=w.get(Zp);wa||w.set(Zp,wa=new Set),fs.forEach((BT,QR)=>wa.add(QR))})});if(Bt.length){const Et=[];Bt.forEach(jt=>{Et.push(function DD(n,e){return new l.vHH(3505,!1)}())}),Ut.forEach(jt=>jt.destroy()),this.reportError(Et)}const _n=new Map,Dr=new Map;c.forEach(Et=>{const jt=Et.element;r.has(jt)&&(Dr.set(jt,jt),this._beforeAnimationBuild(Et.player.namespaceId,Et.instruction,_n))}),i.forEach(Et=>{const jt=Et.element;this._getPreviousPlayers(jt,!1,Et.namespaceId,Et.triggerName,null).forEach(Tn=>{pi(_n,jt,[]).push(Tn),Tn.destroy()})});const hs=ce.filter(Et=>Fc(Et,y,w)),ld=new Map;FE(ld,this.driver,Qe,w,aa).forEach(Et=>{Fc(Et,y,w)&&hs.push(Et)});const xw=new Map;H.forEach((Et,jt)=>{FE(xw,this.driver,new Set(Et),y,"!")}),hs.forEach(Et=>{const jt=ld.get(Et),Ht=xw.get(Et);ld.set(Et,new Map([...Array.from(jt?.entries()??[]),...Array.from(Ht?.entries()??[])]))});const Wp=[],J2=[],X2={};c.forEach(Et=>{const{element:jt,player:Ht,instruction:Tn}=Et;if(r.has(jt)){if(D.has(jt))return Ht.onDestroy(()=>la(jt,Tn.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(Tn.totalTime),void i.push(Ht);let Oi=X2;if(Dr.size>1){let Oo=jt;const Zh=[];for(;Oo=Oo.parentNode;){const Ar=Dr.get(Oo);if(Ar){Oi=Ar;break}Zh.push(Oo)}Zh.forEach(Ar=>Dr.set(Ar,Oi))}const Nl=this._buildAnimation(Ht.namespaceId,Tn,_n,a,xw,ld);if(Ht.setRealPlayer(Nl),Oi===X2)Wp.push(Ht);else{const Oo=this.playersByElement.get(Oi);Oo&&Oo.length&&(Ht.parentPlayer=ru(Oo)),i.push(Ht)}}else Nc(jt,Tn.fromStyles),Ht.onDestroy(()=>la(jt,Tn.toStyles)),J2.push(Ht),D.has(jt)&&i.push(Ht)}),J2.forEach(Et=>{const jt=a.get(Et.element);if(jt&&jt.length){const Ht=ru(jt);Et.setRealPlayer(Ht)}}),i.forEach(Et=>{Et.parentPlayer?Et.syncPlayerEvents(Et.parentPlayer):Et.destroy()});for(let Et=0;Et<ce.length;Et++){const jt=ce[Et],Ht=jt[bo];if(sh(jt,Ig),Ht&&Ht.hasAnimation)continue;let Tn=[];if(f.size){let Nl=f.get(jt);Nl&&Nl.length&&Tn.push(...Nl);let Oo=this.driver.query(jt,a_,!0);for(let Zh=0;Zh<Oo.length;Zh++){let Ar=f.get(Oo[Zh]);Ar&&Ar.length&&Tn.push(...Ar)}}const Oi=Tn.filter(Nl=>!Nl.destroyed);Oi.length?qD(this,jt,Oi):this.processLeaveNode(jt)}return ce.length=0,Wp.forEach(Et=>{this.players.push(Et),Et.onDone(()=>{Et.destroy();const jt=this.players.indexOf(Et);this.players.splice(jt,1)}),Et.play()}),Wp}elementContainsData(e,t){let r=!1;const i=t[bo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const y=!a||a==Zs;f.forEach(w=>{w.queued||!y&&w.triggerName!=i||c.push(w)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const a=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const y of t.timelines){const w=y.element,D=w!==a,S=pi(r,w,[]);this._getPreviousPlayers(w,D,c,f,t.toState).forEach(H=>{const K=H.getRealPlayer();K.beforeDestroy&&K.beforeDestroy(),H.destroy(),S.push(H)})}Nc(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,c){const f=t.triggerName,y=t.element,w=[],D=new Set,S=new Set,B=t.timelines.map(K=>{const se=K.element;D.add(se);const ce=se[bo];if(ce&&ce.removedBeforeQueried)return new eh(K.duration,K.delay);const Be=se!==y,Qe=function Og(n){const e=[];return Oc(n,e),e}((r.get(se)||EP).map(_n=>_n.getRealPlayer())).filter(_n=>!!_n.element&&_n.element===se),We=a.get(se),Xe=c.get(se),Ut=Cg(0,this._normalizer,0,K.keyframes,We,Xe),Bt=this._buildPlayer(K,Ut,Qe);if(K.subTimeline&&i&&S.add(se),Be){const _n=new Of(e,f,se);_n.setRealPlayer(Bt),w.push(_n)}return Bt});w.forEach(K=>{pi(this.playersByQueriedElement,K.element,[]).push(K),K.onDone(()=>function OE(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,K.element,K))}),D.forEach(K=>Is(K,o_));const H=ru(B);return H.onDestroy(()=>{D.forEach(K=>sh(K,o_)),la(y,t.toStyles)}),S.forEach(K=>{pi(i,K,[]).push(H)}),H}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new eh(e.duration,e.delay)}}class Of{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new eh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Af(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){pi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function kg(n){return n&&1===n.nodeType}function D_(n,e){const t=n.style.display;return n.style.display=e??"none",t}function FE(n,e,t,r,i){const a=[];t.forEach(y=>a.push(D_(y)));const c=[];r.forEach((y,w)=>{const D=new Map;y.forEach(S=>{const B=e.computeStyle(w,S,i);D.set(S,B),(!B||0==B.length)&&(w[bo]=bP,c.push(w))}),n.set(w,D)});let f=0;return t.forEach(y=>D_(y,a[f++])),c}function LE(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(f){if(!f)return 1;let y=a.get(f);if(y)return y;const w=f.parentNode;return y=t.has(w)?w:i.has(w)?1:c(w),a.set(f,y),y}return e.forEach(f=>{const y=c(f);1!==y&&t.get(y).push(f)}),t}function Is(n,e){n.classList?.add(e)}function sh(n,e){n.classList?.remove(e)}function qD(n,e,t){ru(t).onDone(()=>n.processLeaveNode(e))}function Oc(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof _g?Oc(r.players,e):e.push(r)}}function Fc(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class oh{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new kE(e,t,r),this._timelineEngine=new HD(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const y=[],D=g_(this._driver,a,y,[]);if(y.length)throw function tE(n,e){return new l.vHH(3404,!1)}();f=function gP(n,e,t){return new $D(n,e,t)}(i,D,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,c]=rE(r);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[c,f]=rE(r);return this._timelineEngine.listen(c,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let VE=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&la(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(la(this._element,this._initialStyles),this._endStyles&&(la(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Nc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Nc(this._element,this._endStyles),this._endStyles=null),la(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Lg(n){let e=null;return n.forEach((t,r)=>{(function S_(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Vg{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:pE(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class UE{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return RD(e,t)}getParentElement(e){return n_(e)}query(e,t,r){return r_(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,c=[]){const y={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(y.easing=a);const w=new Map,D=c.filter(H=>H instanceof Vg);(function kD(n,e){return 0===n||0===e})(r,i)&&D.forEach(H=>{H.currentSnapshot.forEach((K,se)=>w.set(se,K))});let S=function PD(n){return n.length?n[0]instanceof Map?n:n.map(e=>dE(e)):[]}(t).map(H=>su(H));S=function h_(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,c)=>{r.has(c)||i.push(c),r.set(c,a)}),i.length)for(let a=1;a<e.length;a++){let c=e[a];i.forEach(f=>c.set(f,pE(n,f)))}}return e}(e,S,w);const B=function Fg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Lg(e[0]),e.length>1&&(r=Lg(e[e.length-1]))):e instanceof Map&&(t=Lg(e)),t||r?new VE(n,t,r):null}(e,S);return new Vg(e,S,y,B)}}let x_=(()=>{class n extends qw{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?Zw(t):t;return BE(this._renderer,null,r,"register",[i]),new WD(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class WD extends class Zy{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new CP(this._id,e,t||{},this._renderer)}}class CP{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return BE(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function BE(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const jE="@.disabled";let $E=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,c)=>{const f=c?.parentNode(a);f&&c.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let D=this._rendererCache.get(a);return D||(D=new M_("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,D)),D}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const y=D=>{Array.isArray(D)?D.forEach(y):this.engine.registerTrigger(c,f,t,D.name,D)};return r.data.animation.forEach(y),new ZD(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,f]=a;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(oh),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class M_{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==jE?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class ZD extends M_{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==jE?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Ts(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),c="";return"@"!=a.charAt(0)&&([a,c]=function HE(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let KD=(()=>{class n extends oh{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe),l.LFG(oE),l.LFG(ih),l.LFG(l.z2F))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ug=[{provide:qw,useClass:x_},{provide:ih,useFactory:function IP(){return new C_}},{provide:oh,useClass:KD},{provide:l.FYo,useFactory:function YD(n,e,t){return new $E(n,e,t)},deps:[Go,oh,l.R0b]}],Bg=[{provide:oE,useFactory:()=>new UE},{provide:l.QbO,useValue:"BrowserAnimations"},...Ug],GE=[{provide:oE,useClass:i_},{provide:l.QbO,useValue:"NoopAnimations"},...Ug];let QD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?GE:Bg}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Bg,imports:[qa]}),n})();function Ct(...n){const e=(0,_s.yG)(n);return(0,In.D)(n,e)}var Ai=V(7579);class Co extends Ai.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Lf=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Vf=V(4671),ca=V(9672);function jg(...n){const e=(0,_s.yG)(n),t=(0,_s.jO)(n),{args:r,keys:i}=dc(n);if(0===r.length)return(0,In.D)([],e);const a=new xr.y(function XD(n,e,t=Vf.y){return r=>{qE(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let y=0;y<i;y++)qE(e,()=>{const w=(0,In.D)(n[y],e);let D=!1;w.subscribe((0,Zn.x)(r,S=>{a[y]=S,D||(D=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>hc(i,c):Vf.y));return t?a.pipe(Qa(t)):a}function qE(n,e,t){n?(0,ca.f)(t,n,e):e()}var $g=V(8189);function R_(...n){return function WE(){return(0,$g.J)(1)}()((0,In.D)(n,(0,_s.yG)(n)))}function ZE(n){return new xr.y(e=>{(0,ys.Xf)(n()).subscribe(e)})}var eA=V(9635),Uf=V(576);function Bf(n,e){const t=(0,Uf.m)(n)?n:()=>n,r=i=>i.error(t());return new xr.y(e?i=>e.schedule(r,0,i):r)}var Lc=V(515),jf=V(727),gi=V(4482);function ah(){return(0,gi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tA extends xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,gi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jf.w0.EMPTY)}return e}refCount(){return ah()(this)}}function Fr(n,e){return(0,gi.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Zn.x)(r,y=>{i?.unsubscribe();let w=0;const D=a++;(0,ys.Xf)(n(y,D)).subscribe(i=(0,Zn.x)(r,S=>r.next(e?e(y,S,D,w++):S),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function Hg(n){return n<=0?()=>Lc.E:(0,gi.e)((e,t)=>{let r=0;e.subscribe((0,Zn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function $f(...n){const e=(0,_s.yG)(n);return(0,gi.e)((t,r)=>{(e?R_(n,t,e):R_(n,t)).subscribe(r)})}function Ks(n,e){return(0,gi.e)((t,r)=>{let i=0;t.subscribe((0,Zn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Si=V(5577);function Hf(n){return(0,gi.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gg(n=lu){return(0,gi.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lu(){return new Lf}function Ys(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ks((i,a)=>n(i,a,r)):Vf.y,Hg(1),t?Hf(e):Gg(()=>new Lf))}function da(n,e){return(0,Uf.m)(e)?(0,Si.z)(n,e,1):(0,Si.z)(n,1)}var Lr=V(8505);function ul(n){return(0,gi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Zn.x)(t,void 0,void 0,c=>{a=(0,ys.Xf)(n(c,ul(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function P_(n,e,t,r,i){return(a,c)=>{let f=t,y=e,w=0;a.subscribe((0,Zn.x)(c,D=>{const S=w++;y=f?n(y,D,S):(f=!0,D),r&&c.next(y)},i&&(()=>{f&&c.next(y),c.complete()})))}}function uh(n,e){return(0,gi.e)(P_(n,e,arguments.length>=2,!0))}function N_(n){return n<=0?()=>Lc.E:(0,gi.e)((e,t)=>{let r=[];e.subscribe((0,Zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function KE(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ks((i,a)=>n(i,a,r)):Vf.y,N_(1),t?Hf(e):Gg(()=>new Lf))}function YE(n){return(0,gi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const un="primary",zg=Symbol("RouteTitle");class rA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function lh(n){return new rA(n)}function iA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!JE(n[i],e[i]))return!1;return!0}function JE(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function qg(n){return Array.prototype.concat.apply([],n)}function XE(n){return n.length>0?n[n.length-1]:null}function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ll(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,In.D)(Promise.resolve(n)):Ct(n)}const Wg={exact:function eb(n,e,t){if(!ti(n.segments,e.segments)||!Ds(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!eb(n.children[r],e.children[r],t))return!1;return!0},subset:Zg},cl={exact:function zf(n,e){return Qs(n,e)},subset:function aA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JE(n[t],e[t]))},ignored:()=>!0};function oA(n,e,t){return Wg[t.paths](n.root,e.root,t.matrixParams)&&cl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Zg(n,e,t){return tb(n,e,e.segments,t)}function tb(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ti(i,t)||e.hasChildren()||!Ds(i,t,r))}if(n.segments.length===t.length){if(!ti(n.segments,t)||!Ds(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Zg(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ti(n.segments,i)&&Ds(n.segments,i,r)&&n.children[un])&&tb(n.children[un],e,a,r)}}function Ds(n,e,t){return e.every((r,i)=>cl[t](n[i].parameters,r.parameters))}class Io{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lh(this.queryParams)),this._queryParamMap}toString(){return ch.serialize(this)}}class kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cu(this)}}class To{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=lh(this.parameters)),this._parameterMap}toString(){return L_(this)}}function ti(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Vc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return new dl},providedIn:"root"}),n})();class dl{parse(e){const t=new ab(e);return new Io(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ha(e.root,!0)}`,r=function rb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${du(t)}=${du(i)}`).join("&"):`${du(t)}=${du(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function dh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ch=new dl;function cu(n){return n.segments.map(e=>L_(e)).join("/")}function ha(n,e){if(!n.hasChildren())return cu(n);if(e){const t=n.children[un]?ha(n.children[un],!1):"",r=[];return mi(n.children,(i,a)=>{a!==un&&r.push(`${a}:${ha(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function O_(n,e){let t=[];return mi(n.children,(r,i)=>{i===un&&(t=t.concat(e(r,i)))}),mi(n.children,(r,i)=>{i!==un&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===un?[ha(n.children[un],!1)]:[`${i}:${ha(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[un]?`${cu(n)}/${t[0]}`:`${cu(n)}/(${t.join("//")})`}}function Uc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function du(n){return Uc(n).replace(/%3B/gi,";")}function hl(n){return Uc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qf(n){return decodeURIComponent(n)}function F_(n){return qf(n.replace(/\+/g,"%20"))}function L_(n){return`${hl(n.path)}${function nb(n){return Object.keys(n).map(e=>`;${hl(e)}=${hl(n[e])}`).join("")}(n.parameters)}`}const ib=/^[^\/()?;=#]+/;function Wf(n){const e=n.match(ib);return e?e[0]:""}const sb=/^[^=?&#]+/,uA=/^[^&#]+/;class ab{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[un]=new kt(e,t)),r}parseSegment(){const e=Wf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new To(qf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Wf(this.remaining);i&&(r=i,this.capture(r))}e[qf(t)]=qf(r)}parseQueryParam(e){const t=function ob(n){const e=n.match(sb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function lA(n){const e=n.match(uA);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=F_(t),a=F_(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Wf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new l.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=un);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[un]:new kt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function V_(n){return n.segments.length>0?new kt([],{[un]:n}):n}function Zf(n){const e={};for(const r of Object.keys(n.children)){const a=Zf(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function U_(n){if(1===n.numberOfChildren&&n.children[un]){const e=n.children[un];return new kt(n.segments.concat(e.segments),e.children)}return n}(new kt(n.segments,e))}function hu(n){return n instanceof Io}function cA(n,e,t,r,i){if(0===t.length)return Bc(e.root,e.root,e.root,r,i);const a=function G_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Qg(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return mi(a.outlets,(y,w)=>{f[w]="string"==typeof y?y.split("/"):y}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,y)=>{0==y&&"."===f||(0==y&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new Qg(t,e,r)}(t);return a.toRoot()?Bc(e.root,e.root,new kt([],{}),r,i):function c(y){const w=function ub(n,e,t,r){if(n.isAbsolute)return new jc(e.root,!0,0);if(-1===r)return new jc(t,t===e.root,0);return function lb(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new l.vHH(4005,!1);i=r.segments.length}return new jc(r,!1,i-a)}(t,r+(fl(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,y),D=w.processChildren?hh(w.segmentGroup,w.index,a.commands):Jg(w.segmentGroup,w.index,a.commands);return Bc(e.root,w.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function fl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function pl(n){return"object"==typeof n&&null!=n&&n.outlets}function Bc(n,e,t,r,i){let c,a={};r&&mi(r,(y,w)=>{a[w]=Array.isArray(y)?y.map(D=>`${D}`):`${y}`}),c=n===e?t:H_(n,e,t);const f=V_(Zf(c));return new Io(f,a,i)}function H_(n,e,t){const r={};return mi(n.children,(i,a)=>{r[a]=i===e?t:H_(i,e,t)}),new kt(n.segments,r)}class Qg{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fl(r[0]))throw new l.vHH(4003,!1);const i=r.find(pl);if(i&&i!==XE(r))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Jg(n,e,t){if(n||(n=new kt([],{})),0===n.segments.length&&n.hasChildren())return hh(n,e,t);const r=function db(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(pl(f))break;const y=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===y)break;if(y&&w&&"object"==typeof w&&void 0===w.outlets){if(!W_(y,w,c))return a;r+=2}else{if(!W_(y,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new kt(n.segments.slice(0,r.pathIndex),{});return a.children[un]=new kt(n.segments.slice(r.pathIndex),n.children),hh(a,0,i)}return r.match&&0===i.length?new kt(n.segments,{}):r.match&&!n.hasChildren()?q_(n,e,t):r.match?hh(n,0,i):q_(n,e,t)}function hh(n,e,t){if(0===t.length)return new kt(n.segments,{});{const r=function cb(n){return pl(n[0])?n[0].outlets:{[un]:n}}(t),i={};return mi(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=Jg(n.children[c],e,a))}),mi(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new kt(n.segments,i)}}function q_(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(pl(a)){const y=dA(a.outlets);return new kt(r,y)}if(0===i&&fl(t[0])){r.push(new To(n.segments[e].path,hb(t[0]))),i++;continue}const c=pl(a)?a.outlets[un]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&fl(f)?(r.push(new To(c,hb(f))),i+=2):(r.push(new To(c,{})),i++)}return new kt(r,{})}function dA(n){const e={};return mi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=q_(new kt([],{}),0,t))}),e}function hb(n){const e={};return mi(n,(t,r)=>e[r]=`${t}`),e}function W_(n,e,t){return n==t.path&&Qs(e,t.parameters)}class Do{constructor(e,t){this.id=e,this.url=t}}class Xg extends Do{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gl extends Do{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kf extends Do{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Z_ extends Do{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class fb extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pb extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gb extends Do{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mb extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SP extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hA{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class fA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class yb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _b{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vb{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class K_{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Y_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Y_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=em(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return em(e,this._root).map(t=>t.value)}}function Y_(n,e){if(n===e.value)return e;for(const t of e.children){const r=Y_(n,t);if(r)return r}return null}function em(n,e){if(n===e.value)return[e];for(const t of e.children){const r=em(n,t);if(r.length)return r.unshift(e),r}return[]}class fa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ao(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class wb extends K_{constructor(e,t){super(e),this.snapshot=t,Js(this,e)}toString(){return this.snapshot.toString()}}function Eb(n,e){const t=function bb(n,e){const c=new fh([],{},{},"",{},un,e,null,n.root,-1,{});return new tm("",new fa(c,[]))}(n,e),r=new Co([new To("",{})]),i=new Co({}),a=new Co({}),c=new Co({}),f=new Co(""),y=new $c(r,i,c,f,a,un,e,t.root);return y.snapshot=t.root,new wb(new fa(y,[]),t)}class $c{constructor(e,t,r,i,a,c,f,y){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,ft.U)(w=>w[zg]))??Ct(void 0),this._futureSnapshot=y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>lh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>lh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Q_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function xP(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fh{constructor(e,t,r,i,a,c,f,y,w,D,S,B){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.title=this.data?.[zg],this.routeConfig=y,this._urlSegment=w,this._lastPathIndex=D,this._correctedLastPathIndex=B??D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=lh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=lh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class tm extends K_{constructor(e,t){super(t),this.url=e,Js(this,t)}toString(){return Cb(this._root)}}function Js(n,e){e.value._routerState=n,e.children.forEach(t=>Js(n,t))}function Cb(n){const e=n.children.length>0?` { ${n.children.map(Cb).join(", ")} } `:"";return`${n.value}${e}`}function nm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Qs(e.params,t.params)||n.params.next(t.params),function QE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Xs(n,e){const t=Qs(n.params,e.params)&&function Kg(n,e){return ti(n,e)&&n.every((t,r)=>Qs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Xs(n.parent,e.parent))}function Gi(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ib(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gi(n,r,i);return Gi(n,r)})}(n,e,t);return new fa(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Gi(n,f)),c}}const r=function Tb(n){return new $c(new Co(n.url),new Co(n.params),new Co(n.queryParams),new Co(n.fragment),new Co(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Gi(n,a));return new fa(r,i)}}const J_="ngNavigationCancelingError";function Db(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=hu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Ab(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Ab(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[J_]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Sb(n){return rm(n)&&hu(n.url)}function rm(n){return n&&n[J_]}class Yf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qf,this.attachRef=null}}let Qf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Yf,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jf=!1;let X_=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=i||un,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,Jf);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,Jf);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,Jf);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,Jf);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,y=new xb(t,f,i.injector);if(r&&function Mb(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,y)}else this.activated=i.createComponent(c,{index:i.length,injector:y,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Qf),l.Y36(l.s_b),l.$8M("name"),l.Y36(l.sBO),l.Y36(l.lqb))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class xb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$c?this.route:e===Qf?this.childContexts:this.parent.get(e,t)}}let ph=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[X_],encapsulation:2}),n})();function Rb(n,e){return n.providers&&!n._injector&&(n._injector=(0,l.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function im(n){const e=n.children&&n.children.map(im),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==un&&(t.component=ph),t}function As(n){return n.outlet||un}function tv(n,e){const t=n.filter(r=>As(r)===e);return t.push(...n.filter(r=>As(r)!==e)),t}function gh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vA{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),nm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ao(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),mi(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ao(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ao(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ao(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new _b(a.value.snapshot))}),e.children.length&&this.forwardEvent(new pA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(nm(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),nm(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=gh(i.snapshot),y=f?.get(l._Vd)??null;c.attachRef=null,c.route=i,c.resolver=y,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Fb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sm{constructor(e,t){this.component=e,this.route=t}}function wA(n,e,t){const r=n._root;return ep(r,e?e._root:null,t,[r.value])}function mh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,l.Z0I)(n)?e.get(n):n:r}function ep(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ao(e);return n.children.forEach(c=>{(function bA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const y=function CA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ti(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ti(n.url,e.url)||!Qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xs(n,e)||!Qs(n.queryParams,e.queryParams);default:return!Xs(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);y?i.canActivateChecks.push(new Fb(r)):(a.data=c.data,a._resolvedData=c._resolvedData),ep(n,e,a.component?f?f.children:null:t,r,i),y&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new sm(f.outlet.component,c))}else c&&tp(e,f,i),i.canActivateChecks.push(new Fb(r)),ep(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),mi(a,(c,f)=>tp(c,t.getContext(f),i)),i}function tp(n,e,t){const r=Ao(n),i=n.value;mi(r,(a,c)=>{tp(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new sm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function np(n){return"function"==typeof n}function om(n){return n instanceof Lf||"EmptyError"===n?.name}const rp=Symbol("INITIAL_VALUE");function Hc(){return Fr(n=>jg(n.map(e=>e.pipe(Hg(1),$f(rp)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===rp)return rp;if(!1===t||t instanceof Io)return t}return!0}),Ks(e=>e!==rp),Hg(1)))}function zc(n){return(0,eA.z)((0,Lr.b)(e=>{if(hu(e))throw Db(0,e)}),(0,ft.U)(e=>!0===e))}const ip={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NA(n,e,t,r,i){const a=am(n,e,t);return a.matched?function MP(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ct(i.map(c=>{const f=mh(c,n);return ll(function xA(n){return n&&np(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Hc(),zc()):Ct(!0)}(r=Rb(e,r),e,t).pipe((0,ft.U)(c=>!0===c?a:{...ip})):Ct(a)}function am(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...ip}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||iA)(t,n,e);if(!i)return{...ip};const a={};mi(i.posParams,(f,y)=>{a[y]=f.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function sp(n,e,t,r,i="corrected"){if(t.length>0&&function kA(n,e,t){return t.some(r=>um(n,e,r)&&As(r)!==un)}(n,t,r)){const c=new kt(e,function Lt(n,e,t,r){const i={};i[un]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&As(a)!==un){const c=new kt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[As(a)]=c}return i}(n,e,r,new kt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function OA(n,e,t){return t.some(r=>um(n,e,r))}(n,t,r)){const c=new kt(n.segments,function RP(n,e,t,r,i,a){const c={};for(const f of r)if(um(n,t,f)&&!i[As(f)]){const y=new kt([],{});y._sourceSegment=n,y._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[As(f)]=y}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new kt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function um(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qc(n,e,t,r){return!!(As(n)===r||r!==un&&um(e,t,n))&&("**"===n.path||am(e,n,t).matched)}function Hb(n,e,t){return 0===e.length&&!n.children[t]}const Wc=!1;class Zc{constructor(e){this.segmentGroup=e||null}}class ar{constructor(e){this.urlTree=e}}function lm(n){return Bf(new Zc(n))}function rv(n){return Bf(new ar(n))}class qb{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=sp(this.urlTree.root,[],[],this.config).segmentGroup,t=new kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,un).pipe((0,ft.U)(a=>this.createUrlTree(Zf(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ul(a=>{if(a instanceof ar)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Zc?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,un).pipe((0,ft.U)(i=>this.createUrlTree(Zf(i),e.queryParams,e.fragment))).pipe(ul(i=>{throw i instanceof Zc?this.noMatchError(i):i}))}noMatchError(e){return new l.vHH(4002,Wc)}createUrlTree(e,t,r){const i=V_(e);return new Io(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(a=>new kt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,In.D)(i).pipe(da(a=>{const c=r.children[a],f=tv(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,ft.U)(y=>({segment:y,outlet:a})))}),uh((a,c)=>(a[c.outlet]=c.segment,a),{}),KE())}expandSegment(e,t,r,i,a,c){return(0,In.D)(r).pipe(da(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(ul(w=>{if(w instanceof Zc)return Ct(null);throw w}))),Ys(f=>!!f),ul((f,y)=>{if(om(f))return Hb(t,i,a)?Ct(new kt([],{})):lm(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return qc(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):lm(t):lm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?rv(a):this.lineralizeSegments(r,a).pipe((0,Si.z)(c=>{const f=new kt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:y,remainingSegments:w,positionalParamSegments:D}=am(t,i,a);if(!f)return lm(t);const S=this.applyRedirectCommands(y,i.redirectTo,D);return i.redirectTo.startsWith("/")?rv(S):this.lineralizeSegments(i,S).pipe((0,Si.z)(B=>this.expandSegment(e,t,r,B.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Rb(r,e),r.loadChildren?(r._loadedRoutes?Ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new kt(i,{})))):Ct(new kt(i,{}))):NA(t,r,i,e).pipe(Fr(({matched:c,consumedSegments:f,remainingSegments:y})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Si.z)(D=>{const S=D.injector??e,B=D.routes,{segmentGroup:H,slicedSegments:K}=sp(t,f,y,B),se=new kt(H.segments,H.children);if(0===K.length&&se.hasChildren())return this.expandChildren(S,B,se).pipe((0,ft.U)(We=>new kt(f,We)));if(0===B.length&&0===K.length)return Ct(new kt(f,{}));const ce=As(r)===a;return this.expandSegment(S,se,B,K,ce?un:a,!0).pipe((0,ft.U)(Qe=>new kt(f.concat(Qe.segments),Qe.children)))})):lm(t)))}getChildConfig(e,t,r){return t.children?Ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function PA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ct(!0):Ct(i.map(c=>{const f=mh(c,n);return ll(function TA(n){return n&&np(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Hc(),zc())}(e,t,r).pipe((0,Si.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Lr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function FA(n){return Bf(Ab(Wc,3))}())):Ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ct(r);if(i.numberOfChildren>1||!i.children[un])return Bf(new l.vHH(4e3,Wc));i=i.children[un]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Io(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return mi(t.children,(f,y)=>{c[y]=this.createSegmentGroup(e,f,r,i)}),new kt(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new l.vHH(4001,Wc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class LA{}class ap{constructor(e,t,r,i,a,c,f,y){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=y}recognize(){const e=sp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,un).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new fh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},un,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fa(r,t),a=new tm(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Q_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,In.D)(Object.keys(r.children)).pipe(da(i=>{const a=r.children[i],c=tv(t,i);return this.processSegmentGroup(e,c,a,i)}),uh((i,a)=>i&&a?(i.push(...a),i):null),function Gf(n,e=!1){return(0,gi.e)((t,r)=>{let i=0;t.subscribe((0,Zn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),Hf(null),KE(),(0,ft.U)(i=>{if(null===i)return null;const a=up(i);return function BA(n){n.sort((e,t)=>e.value.outlet===un?-1:t.value.outlet===un?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,In.D)(t).pipe(da(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),Ys(c=>!!c),ul(c=>{if(om(c))return Hb(r,i,a)?Ct([]):Ct(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!qc(t,r,i,a))return Ct(null);let c;if("**"===t.path){const f=i.length>0?XE(i).parameters:{},y=sv(r)+i.length;c=Ct({snapshot:new fh(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yh(t),As(t),t.component??t._loadedComponent??null,t,iv(r),y,_h(t),y),consumedSegments:[],remainingSegments:[]})}else c=NA(r,t,i,e).pipe((0,ft.U)(({matched:f,consumedSegments:y,remainingSegments:w,parameters:D})=>{if(!f)return null;const S=sv(r)+y.length;return{snapshot:new fh(y,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,yh(t),As(t),t.component??t._loadedComponent??null,t,iv(r),S,_h(t),S),consumedSegments:y,remainingSegments:w}}));return c.pipe(Fr(f=>{if(null===f)return Ct(null);const{snapshot:y,consumedSegments:w,remainingSegments:D}=f;e=t._injector??e;const S=t._loadedInjector??e,B=function jA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:H,slicedSegments:K}=sp(r,w,D,B.filter(ce=>void 0===ce.redirectTo),this.relativeLinkResolution);if(0===K.length&&H.hasChildren())return this.processChildren(S,B,H).pipe((0,ft.U)(ce=>null===ce?null:[new fa(y,ce)]));if(0===B.length&&0===K.length)return Ct([new fa(y,[])]);const se=As(t)===a;return this.processSegment(S,B,H,K,se?un:a).pipe((0,ft.U)(ce=>null===ce?null:[new fa(y,ce)]))}))}}function $A(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function up(n){const e=[],t=new Set;for(const r of n){if(!$A(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=up(r.children);e.push(new fa(r.value,i))}return e.filter(r=>!t.has(r))}function iv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function sv(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function yh(n){return n.data||{}}function _h(n){return n.resolve||{}}function Xb(n){return"string"==typeof n.title||null===n.title}function cm(n){return Fr(e=>{const t=n(e);return t?(0,In.D)(t).pipe((0,ft.U)(()=>e)):Ct(e)})}let eC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===un);return r}getResolvedTitleForRoute(t){return t.data[zg]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return(0,l.f3M)(tC)},providedIn:"root"}),n})(),tC=(()=>{class n extends eC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lf))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class PP{}class kP extends class NP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Kc=new l.OlP("",{providedIn:"root",factory:()=>({})}),ov=new l.OlP("ROUTES");let dm=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ll(t.loadComponent()).pipe((0,Lr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),YE(()=>{this.componentLoaders.delete(t)})),i=new tA(r,()=>new Ai.x).pipe(ah());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let y,w,D=!1;Array.isArray(f)?w=f:(y=f.create(t).injector,w=qg(y.get(ov,[],l.XFs.Self|l.XFs.Optional)));return{routes:w.map(im),injector:y}}),YE(()=>{this.childrenLoaders.delete(r)})),c=new tA(a,()=>new Ai.x).pipe(ah());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return ll(t()).pipe((0,Si.z)(r=>r instanceof l.YKP||Array.isArray(r)?Ct(r):(0,In.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3),l.LFG(l.Sil))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lp{}class qA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function WA(n){throw n}function ZA(n,e,t){return e.parse("/")}const KA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},iC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function sC(){const n=(0,l.f3M)(Vc),e=(0,l.f3M)(Qf),t=(0,l.f3M)(Se),r=(0,l.f3M)(l.zs3),i=(0,l.f3M)(l.Sil),a=(0,l.f3M)(ov,{optional:!0})??[],c=(0,l.f3M)(Kc,{optional:!0})??{},f=(0,l.f3M)(tC),y=(0,l.f3M)(eC,{optional:!0}),w=(0,l.f3M)(lp,{optional:!0}),D=(0,l.f3M)(PP,{optional:!0}),S=new An(null,n,e,t,r,i,qg(a));return w&&(S.urlHandlingStrategy=w),D&&(S.routeReuseStrategy=D),S.titleStrategy=y??f,function YA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,S),S}let An=(()=>{class n{constructor(t,r,i,a,c,f,y){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=y,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ai.x,this.errorHandler=WA,this.malformedUriErrorHandler=ZA,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ct(void 0),this.urlHandlingStrategy=new qA,this.routeReuseStrategy=new kP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(dm),this.configLoader.onLoadEndListener=B=>this.triggerEvent(new fA(B)),this.configLoader.onLoadStartListener=B=>this.triggerEvent(new hA(B)),this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const S=c.get(l.R0b);this.isNgZoneEnabled=S instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(y),this.currentUrlTree=function sA(){return new Io(new kt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Eb(this.currentUrlTree,this.rootComponentType),this.transitions=new Co({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ks(i=>0!==i.id),(0,ft.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Fr(i=>{let a=!1,c=!1;return Ct(i).pipe((0,Lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fr(f=>{const y=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==y||y!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return av(f.source)&&(this.browserUrlTree=f.extractedUrl),Ct(f).pipe(Fr(S=>{const B=this.transitions.getValue();return r.next(new Xg(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),B!==this.transitions.getValue()?Lc.E:Promise.resolve(S)}),function Wb(n,e,t,r){return Fr(i=>function zb(n,e,t,r,i){return new qb(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ft.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Lr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function HA(n,e,t,r,i,a){return(0,Si.z)(c=>function UA(n,e,t,r,i,a,c="emptyOnly",f="legacy"){return new ap(n,e,t,r,i,c,f,a).recognize().pipe(Fr(y=>null===y?function VA(n){return new xr.y(e=>e.error(n))}(new LA):Ct(y)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,a).pipe((0,ft.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Lr.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const H=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(H,S)}this.browserUrlTree=S.urlAfterRedirects}const B=new fb(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(B)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:B,extractedUrl:H,source:K,restoredState:se,extras:ce}=f,Be=new Xg(B,this.serializeUrl(H),K,se);r.next(Be);const Qe=Eb(H,this.rootComponentType).snapshot;return Ct(i={...f,targetSnapshot:Qe,urlAfterRedirects:H,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),Lc.E}),(0,Lr.b)(f=>{const y=new pb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),(0,ft.U)(f=>i={...f,guards:wA(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function Vb(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?Ct({...t,guardsResult:!0}):function Ub(n,e,t,r){return(0,In.D)(n).pipe((0,Si.z)(i=>function RA(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Ct(a.map(f=>{const y=gh(e)??i,w=mh(f,y);return ll(function SA(n){return n&&np(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):y.runInContext(()=>w(n,e,t,r))).pipe(Ys())})).pipe(Hc()):Ct(!0)}(i.component,i.route,t,e,r)),Ys(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Si.z)(f=>f&&function IA(n){return"boolean"==typeof n}(f)?function Bb(n,e,t,r){return(0,In.D)(e).pipe(da(i=>R_(function $b(n,e){return null!==n&&e&&e(new yb(n)),Ct(!0)}(i.route.parent,r),function jb(n,e){return null!==n&&e&&e(new qr(n)),Ct(!0)}(i.route,r),function Gc(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function EA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ZE(()=>Ct(c.guards.map(y=>{const w=gh(c.node)??t,D=mh(y,w);return ll(function AA(n){return n&&np(n.canActivateChild)}(D)?D.canActivateChild(r,n):w.runInContext(()=>D(r,n))).pipe(Ys())})).pipe(Hc())));return Ct(a).pipe(Hc())}(n,i.path,t),function nv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ct(!0);const i=r.map(a=>ZE(()=>{const c=gh(e)??t,f=mh(a,c);return ll(function DA(n){return n&&np(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(Ys())}));return Ct(i).pipe(Hc())}(n,i.route,t))),Ys(i=>!0!==i,!0))}(r,a,n,e):Ct(f)),(0,ft.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Lr.b)(f=>{if(i.guardsResult=f.guardsResult,hu(f.guardsResult))throw Db(0,f.guardsResult);const y=new gb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(y)}),Ks(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),cm(f=>{if(f.guards.canActivateChecks.length)return Ct(f).pipe((0,Lr.b)(y=>{const w=new mb(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}),Fr(y=>{let w=!1;return Ct(y).pipe(function GA(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ct(t);let a=0;return(0,In.D)(i).pipe(da(c=>function zA(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Xb(i)&&(a[zg]=i.title),function Yb(n,e,t,r){const i=function Qb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ct({});const a={};return(0,In.D)(i).pipe((0,Si.z)(c=>function Jb(n,e,t,r){const i=gh(e)??r,a=mh(n,i);return ll(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(Ys(),(0,Lr.b)(f=>{a[c]=f}))),N_(1),function nA(n){return(0,ft.U)(()=>n)}(a),ul(c=>om(c)?Lc.E:Bf(c)))}(a,n,e,r).pipe((0,ft.U)(c=>(n._resolvedData=c,n.data=Q_(n,t).resolve,i&&Xb(i)&&(n.data[zg]=i.title),null)))}(c.route,r,n,e)),(0,Lr.b)(()=>a++),N_(1),(0,Si.z)(c=>a===i.length?Ct(t):Lc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Lr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(y),this.cancelNavigationTransition(y,"",2))}}))}),(0,Lr.b)(y=>{const w=new SP(y.id,this.serializeUrl(y.extractedUrl),this.serializeUrl(y.urlAfterRedirects),y.targetSnapshot);this.triggerEvent(w)}))}),cm(f=>{const y=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Lr.b)(S=>{w.component=S}),(0,ft.U)(()=>{})));for(const S of w.children)D.push(...y(S));return D};return jg(y(f.targetSnapshot.root)).pipe(Hf(),Hg(1))}),cm(()=>this.afterPreactivation()),(0,ft.U)(f=>{const y=function So(n,e,t){const r=Gi(n,e._root,t?t._root:void 0);return new wb(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:y}}),(0,Lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new vA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Lr.b)({next(){a=!0},complete(){a=!0}}),YE(()=>{a||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ul(f=>{if(c=!0,rm(f)){Sb(f)||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Kf(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(y),Sb(f)){const w=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||av(i.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const y=new Z_(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(y);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return Lc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(im),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:y}=r,w=i||this.routerState.root,D=y?this.currentUrlTree.fragment:c;let S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),cA(w,this.currentUrlTree,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=hu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function QA(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new l.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...KA}:!1===r?{...iC}:r,hu(t))return oA(this.currentUrlTree,t,i);const a=this.parseUrl(t);return oA(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new gl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,y,w;c?(f=c.resolve,y=c.reject,w=c.promise):w=new Promise((B,H)=>{f=B,y=H});const D=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:D,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:y,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(B=>Promise.reject(B))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Kf(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:function(){return sC()},providedIn:"root"}),n})();function av(n){return"imperative"!==n}let vh=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ai.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(An),l.Y36($c),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})(),ml=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ai.x,this.subscription=t.events.subscribe(a=>{a instanceof gl&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,l.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,l.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,l.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){return!!(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(An),l.Y36($c),l.Y36(Ee))},n.\u0275dir=l.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&l.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&l.uIk("target",r.target)("href",r.href,l.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[l.TTD]}),n})();class aC{}let lC=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Ks(t=>t instanceof gl),da(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,l.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,In.D)(i).pipe((0,$g.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ct(null);const a=i.pipe((0,Si.z)(c=>null===c?Ct(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,In.D)([a,c]).pipe((0,$g.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(An),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(aC),l.LFG(dm))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fm=new l.OlP("");let cC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new vb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function wh(n,e){return{\u0275kind:n,\u0275providers:e}}function mm(n){return[{provide:ov,multi:!0,useValue:n}]}function dC(){const n=(0,l.f3M)(l.zs3);return e=>{const t=n.get(l.z2F);if(e!==t.components[0])return;const r=n.get(An),i=n.get(hC);1===n.get(uv)&&r.initialNavigation(),n.get(fC,null,l.XFs.Optional)?.setUpPreloading(),n.get(fm,null,l.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const hC=new l.OlP("",{factory:()=>new Ai.x}),uv=new l.OlP("",{providedIn:"root",factory:()=>1});const fC=new l.OlP("");function pC(n){return wh(0,[{provide:fC,useExisting:lC},{provide:aC,useExisting:n}])}const lv=new l.OlP("ROUTER_FORROOT_GUARD"),rS=[Se,{provide:Vc,useClass:dl},{provide:An,useFactory:sC},Qf,{provide:$c,useFactory:function gm(n){return n.routerState.root},deps:[An]},dm];function iS(){return new l.PXZ("Router",An)}let gC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[rS,[],mm(t),{provide:lv,useFactory:hv,deps:[[An,new l.FiY,new l.tp0]]},{provide:Kc,useValue:r||{}},r?.useHash?{provide:Ee,useClass:pt}:{provide:Ee,useClass:_t},{provide:fm,useFactory:()=>{const n=(0,l.f3M)(An),e=(0,l.f3M)(Lo),t=(0,l.f3M)(Kc);return t.scrollOffset&&e.setOffset(t.scrollOffset),new cC(n,e,t)}},r?.preloadingStrategy?pC(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:iS},r?.initialNavigation?sS(r):[],[{provide:yC,useFactory:dC},{provide:l.tb,multi:!0,useExisting:yC}]]}}static forChild(t){return{ngModule:n,providers:[mm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(lv,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[ph]}),n})();function hv(n){return"guarded"}function sS(n){return["disabled"===n.initialNavigation?wh(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(An);return()=>{e.setUpLocationChangeListener()}}},{provide:uv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?wh(2,[{provide:uv,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const t=e.get(q,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const c=e.get(An),f=e.get(hC);(function i(a){e.get(An).events.pipe(Ks(f=>f instanceof gl||f instanceof Kf||f instanceof Z_),(0,ft.U)(f=>f instanceof gl||f instanceof Kf&&(0===f.code||1===f.code)&&null),Ks(f=>null!==f),Hg(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),c.afterPreactivation=()=>(a(!0),r||f.closed?Ct(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const yC=new l.OlP("");var _C=V(6451),fu=V(5363),vC=V(6063);class oS extends Ai.x{constructor(e=1/0,t=1/0,r=vC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let y=1;y<r.length&&r[y]<=c;y+=2)f=y;f&&r.splice(0,f+1)}}}var BP=V(3099);function pv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,BP.B)({connector:()=>new oS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _m(n,e){return(0,Uf.m)(e)?Fr(()=>n,e):Fr(()=>n)}var gv=V(9468),gn=V(4976),xo=V(2011),yl=V(259);class _l{constructor(e){return e}}class mv{constructor(){return(0,yl.C6)()}}const vm=new l.OlP("angularfire2._apps"),uS={provide:_l,useFactory:function wC(n){return n&&1===n.length?n[0]:new _l((0,yl.Mq)())},deps:[[new l.FiY,vm]]},lS={provide:mv,deps:[[new l.FiY,vm]]};function cS(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new _l(r)}}let dS=(()=>{class n{constructor(t){(0,yl.KN)("angularfire",gn.q4.full,"core"),(0,yl.KN)("angularfire",gn.q4.full,"app"),(0,yl.KN)("angular",l.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[uS,lS]}),n})();function EC(n,...e){return{ngModule:dS,providers:[{provide:vm,useFactory:cS(n),multi:!0,deps:[l.R0b,l.zs3,gn.HU,...e]}]}}const fS=(0,gn.u3)(yl.ZF,!0);var fe=V(5861),Ss=V(6881),Eh=V(4859),Xt=V(2090),vl=V(1877);const yv=new Map,bC={activated:!1,tokenObservers:[]},pS={initialized:!1,enabled:!1};function wr(n){return yv.get(n)||Object.assign({},bC)}function wm(){return pS}class mS{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Xt.BH,yield function yS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Xt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const yi=new Xt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vv(n){if(!wr(n).activated)throw yi.create("use-before-activation",{appName:n.name})}function wl(n,e){return Ev.apply(this,arguments)}function Ev(){return(Ev=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(S){throw yi.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==c.status)throw yi.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(S){throw yi.create("fetch-parse-error",{originalErrorMessage:S?.message})}const y=f.ttl.match(/^([\d.]+)(s)$/);if(!y||!y[2]||isNaN(Number(y[1])))throw yi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(y[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function AC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const dp="firebase-app-check-store";let Cm=null;function hp(){return Cm||(Cm=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(yi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(dp,{keyPath:"compositeKey"})}}catch(t){e(yi.create("storage-open",{originalErrorMessage:t?.message}))}}),Cm)}function fp(){return(fp=(0,fe.Z)(function*(n,e){const r=(yield hp()).transaction(dp,"readwrite"),a=r.objectStore(dp).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=y=>{c()},r.onerror=y=>{var w;f(yi.create("storage-set",{originalErrorMessage:null===(w=y.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Tm=new vl.Yd("@firebase/app-check");function Dm(n,e){return(0,Xt.hl)()?function _S(n,e){return function Iv(n,e){return fp.apply(this,arguments)}(function MC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Tm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function xv(){return wm().enabled}function Mv(){return Rv.apply(this,arguments)}function Rv(){return(Rv=(0,fe.Z)(function*(){const n=wm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const RC={error:"UNKNOWN_ERROR"};function Pv(n){return Xt.US.encodeString(JSON.stringify(n),!1)}function mp(n){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,fe.Z)(function*(n,e=!1){const t=n.app;vv(t);const r=wr(t);let a,i=r.token;if(i&&!bh(i)&&(r.token=void 0,i=void 0),!i){const y=yield r.cachedTokenPromise;y&&(bh(y)?i=y:yield Dm(t,void 0))}if(!e&&i&&bh(i))return{token:i.token};let f,c=!1;if(xv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wl(AC(t,yield Mv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const y=yield r.exchangeTokenPromise;return yield Dm(t,y),r.token=y,{token:y.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield wr(t).exchangeTokenPromise}catch(y){"appCheck/throttled"===y.code?Tm.warn(y.message):Tm.error(y),a=y}return i?a?f=bh(i)?{token:i.token,internalError:a}:xi(a):(f={token:i.token},r.token=i,yield Dm(t,i)):f=xi(a),c&&Lv(t,f),f})).apply(this,arguments)}function Am(){return(Am=(0,fe.Z)(function*(n){const e=n.app;vv(e);const{provider:t}=wr(e);if(xv()){const r=yield Mv(),{token:i}=yield wl(AC(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Sm(n,e){const t=wr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Fv(n){const{app:e}=n,t=wr(e);let r=t.tokenRefresher;r||(r=function ES(n){const{app:e}=n;return new mS((0,fe.Z)(function*(){let r;if(r=wr(e).token?yield mp(n,!0):yield mp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Lv(n,e){const t=wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function bh(n){return n.expireTimeMillis-Date.now()>0}function xi(n){return{token:Pv(RC),error:n}}class Ch{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=wr(this.app);for(const t of e)Sm(this.app,t.next);return Promise.resolve()}}const FC="app-check-internal";!function WP(){(0,Ss._registerComponent)(new Eh.wA("app-check",n=>function bS(n,e){return new Ch(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(FC).initialize()})),(0,Ss._registerComponent)(new Eh.wA(FC,n=>function CS(n){return{getToken:e=>mp(n,e),getLimitedUseToken:()=>function kv(n){return Am.apply(this,arguments)}(n),addTokenListener:e=>function Ov(n,e,t,r){const{app:i}=n,a=wr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&bh(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),Fv(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Fv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Sm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ss.registerVersion)("@firebase/app-check","0.8.0")}();class Mm{constructor(){return(0,gn.vb)("app-check")}}typeof window<"u"&&window;var JP=V(9260);const BS=new l.OlP("angularfire2.auth.use-emulator"),jS=new l.OlP("angularfire2.auth.settings"),$S=new l.OlP("angularfire2.auth.tenant-id"),HS=new l.OlP("angularfire2.auth.langugage-code"),GS=new l.OlP("angularfire2.auth.use-device-language"),zS=new l.OlP("angularfire.auth.persistence"),qS=(n,e,t,r,i,a,c,f)=>(0,xo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const y=e.runOutsideAngular(()=>n.auth());if(t&&y.useEmulator(...t),r&&(y.tenantId=r),y.languageCode=i,a&&y.useDeviceLanguage(),c)for(const[w,D]of Object.entries(c))y.settings[w]=D;return f&&y.setPersistence(f),y},[t,r,i,a,c,f]);let ga=(()=>{class n{constructor(t,r,i,a,c,f,y,w,D,S,B,H){const K=new Ai.x,se=Ct(void 0).pipe((0,fu.Q)(c.outsideAngular),Fr(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9568)))),(0,ft.U)(()=>(0,xo.on)(t,a,r)),(0,ft.U)(ce=>qS(ce,a,f,w,D,S,y,B)),pv({bufferSize:1,refCount:!1}));if(Os(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ct(null);else{se.pipe(Ys()).subscribe();const Be=se.pipe(Fr(Xe=>Xe.getRedirectResult().then(Ut=>Ut,()=>null)),gn.iC,pv({bufferSize:1,refCount:!1})),Qe=se.pipe(Fr(Xe=>new xr.y(Ut=>({unsubscribe:a.runOutsideAngular(()=>Xe.onAuthStateChanged(Bt=>Ut.next(Bt),Bt=>Ut.error(Bt),()=>Ut.complete()))})))),We=se.pipe(Fr(Xe=>new xr.y(Ut=>({unsubscribe:a.runOutsideAngular(()=>Xe.onIdTokenChanged(Bt=>Ut.next(Bt),Bt=>Ut.error(Bt),()=>Ut.complete()))}))));this.authState=Be.pipe(_m(Qe),(0,gv.R)(c.outsideAngular),(0,fu.Q)(c.insideAngular)),this.user=Be.pipe(_m(We),(0,gv.R)(c.outsideAngular),(0,fu.Q)(c.insideAngular)),this.idToken=this.user.pipe(Fr(Xe=>Xe?(0,In.D)(Xe.getIdToken()):Ct(null))),this.idTokenResult=this.user.pipe(Fr(Xe=>Xe?(0,In.D)(Xe.getIdTokenResult()):Ct(null))),this.credential=(0,_C.T)(Be,K,this.authState.pipe(Ks(Xe=>!Xe))).pipe((0,ft.U)(Xe=>Xe?.user?Xe:null),(0,gv.R)(c.outsideAngular),(0,fu.Q)(c.insideAngular))}return(0,xo.pX)(this,se,a,{spy:{apply:(ce,Be,Qe)=>{(ce.startsWith("signIn")||ce.startsWith("createUser"))&&Qe.then(We=>K.next(We))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xo.Dh),l.LFG(xo.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(gn.HU),l.LFG(BS,8),l.LFG(jS,8),l.LFG($S,8),l.LFG(HS,8),l.LFG(GS,8),l.LFG(zS,8),l.LFG(Mm,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Pm=(()=>{class n{constructor(){JP.Z.registerVersion("angularfire",gn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ga]}),n})();const WS=["toast-component",""];function jC(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",5),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.remove())}),l.TgZ(1,"span",6),l._uU(2,"\xd7"),l.qZA()()}}function Nm(n,e){if(1&n&&(l.ynx(0),l._uU(1),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.hij("[",t.duplicatesCount+1,"]")}}function $C(n,e){if(1&n&&(l.TgZ(0,"div"),l._uU(1),l.YNc(2,Nm,2,1,"ng-container",4),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.titleClass),l.uIk("aria-label",t.title),l.xp6(1),l.hij(" ",t.title," "),l.xp6(1),l.Q6J("ngIf",t.duplicatesCount)}}function HC(n,e){if(1&n&&l._UZ(0,"div",7),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.Q6J("innerHTML",t.message,l.oJD)}}function XP(n,e){if(1&n&&(l.TgZ(0,"div",8),l._uU(1),l.qZA()),2&n){const t=l.oxw();l.Tol(t.options.messageClass),l.uIk("aria-label",t.message),l.xp6(1),l.hij(" ",t.message," ")}}function zv(n,e){if(1&n&&(l.TgZ(0,"div"),l._UZ(1,"div",9),l.qZA()),2&n){const t=l.oxw();l.xp6(1),l.Udp("width",t.width+"%")}}class QS{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Wv{constructor(e,t,r,i,a,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=a,this.toastRef=c,this._onTap=new Ai.x,this._onAction=new Ai.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const qC=new l.OlP("ToastConfig");class XS{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Ai.x,this._activate=new Ai.x,this._manualClose=new Ai.x,this._resetTimeout=new Ai.x,this._countDuplicate=new Ai.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ex{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===Wv?this._toastPackage:this._parentInjector.get(e,t,r)}}class rN extends class nN{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class tx{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let WC=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZC=(()=>{class n{constructor(t,r,i,a){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=a,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new rN(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new tx(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(WC),l.LFG(l._Vd),l.LFG(l.z2F),l.LFG(pe))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pu=(()=>{class n{constructor(t,r,i,a,c){this.overlay=r,this._injector=i,this.sanitizer=a,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},a=""){return this._preBuildNotification(a,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,a){const{includeTitleDuplicates:c}=this.toastrConfig;for(const f of this.toasts){const y=c&&f.title===t;if((!c||y)&&f.message===r)return f.toastRef.onDuplicate(i,a),f}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,a){return a.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,a)):this._buildNotification(t,r,i,a)}_buildNotification(t,r,i,a){if(!a.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&a.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const y=this.overlay.create(a.positionClass,this.overlayContainer);this.index=this.index+1;let w=r;r&&a.enableHtml&&(w=this.sanitizer.sanitize(l.q3G.HTML,r));const D=new XS(y),S=new Wv(this.index,a,w,i,t,D),B=new ex(S,this._injector),H=new QS(a.toastComponent,B),K=y.attach(H,this.toastrConfig.newestOnTop);D.componentInstance=K.instance;const se={toastId:this.index,title:i||"",message:r||"",toastRef:D,onShown:D.afterActivate(),onHidden:D.afterClosed(),onTap:S.onTap(),onAction:S.onAction(),portal:K};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{se.toastRef.activate()})),this.toasts.push(se),se}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(qC),l.LFG(ZC),l.LFG(l.zs3),l.LFG(Zu),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nx={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(pu),l.Y36(Wv),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&l.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(l.d8E("@flyInOut",r.state),l.Tol(r.toastClasses),l.Udp("display",r.displayStyle))},attrs:WS,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(l.YNc(0,jC,3,0,"button",0),l.YNc(1,$C,3,5,"div",1),l.YNc(2,HC,1,3,"div",2),l.YNc(3,XP,2,4,"div",3),l.YNc(4,zv,2,2,"div",4)),2&t&&(l.Q6J("ngIf",r.options.closeButton),l.xp6(1),l.Q6J("ngIf",r.title),l.xp6(1),l.Q6J("ngIf",r.message&&r.options.enableHtml),l.xp6(1),l.Q6J("ngIf",r.message&&!r.options.enableHtml),l.xp6(1),l.Q6J("ngIf",r.options.progressBar))},dependencies:[kn],encapsulation:2,data:{animation:[aD("flyInOut",[Kw("inactive",If({opacity:0})),Kw("active",If({opacity:1})),Kw("removed",If({opacity:0})),Xd("inactive => active",Ww("{{ easeTime }}ms {{ easing }}")),Xd("active => removed",Ww("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let Zv=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:qC,useValue:{default:nx,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[vd]]}),n})(),km=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t?.displayName})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ga),l.Y36(An),l.Y36(pu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-navbar"]],decls:16,vars:1,consts:[[1,"log"],[2,"cursor","pointer",3,"click"],[1,"caja"],["routerLink","/main",1,"nav-link"],["routerLink","/galeria",1,"nav-link"],["routerLink","/videos",1,"nav-link"],["routerLink","/musica",1,"nav-link"]],template:function(t,r){1&t&&(l.TgZ(0,"div")(1,"div")(2,"div",0)(3,"span"),l._uU(4),l.qZA(),l.TgZ(5,"span",1),l.NdJ("click",function(){return r.logout()}),l._uU(6,"Salir"),l.qZA()()(),l.TgZ(7,"div",2)(8,"a",3),l._uU(9,"INICIO"),l.qZA(),l.TgZ(10,"a",4),l._uU(11,"IMAGENES"),l.qZA(),l.TgZ(12,"a",5),l._uU(13,"VIDEOS"),l.qZA(),l.TgZ(14,"a",6),l._uU(15,"MUSICA"),l.qZA()()()),2&t&&(l.xp6(4),l.hij(" Hola ",r.usuarioActual,""))},dependencies:[ml],styles:[".log[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.caja[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center;margin-top:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 900px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})();const rx=function(n){return{"background-image":n,"background-blend-mode":"soft-light","background-size":"cover"}};let Kv=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.imagenesFondo=["https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto1.jpg?alt=media&token=144909e5-fa88-4785-a196-a9e829d644ee","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp30.jpg?alt=media&token=8835ef58-75a7-46ed-8d66-182c8b12a5b9","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp37.jpg?alt=media&token=1b507c45-18ad-44ab-9080-fcb944188969","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp45.jpg?alt=media&token=805448f0-c5f8-4c9d-b163-7de9487ea921","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp46.jpg?alt=media&token=52922013-1f5c-413d-8008-5bb74a93bad0","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp62.jpg?alt=media&token=96809e52-9a26-42fb-a0d1-608b0ec80cc4","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10500411_10201454213716073_6332111602942763551_n_10201454213716073.jpg?alt=media&token=6e7caa54-9319-4551-83bf-53cb96bbf047","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10580144_10201454209915978_1885626682807728120_n_10201454209915978.jpg?alt=media&token=eb7ef51f-afe5-490a-b17d-864642c1136a","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F164789_1372685215984_2451351_n_1372685215984.jpg?alt=media&token=46c640a2-1a32-458f-ab07-a6dbb2370cc4"],this.indiceImagen=0}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t&&t.displayName?t.displayName:"Invitad@"}),this.cambiarImagenFondo(),setInterval(()=>this.cambiarImagenFondo(),15e3)}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}cambiarImagenFondo(){const t=Math.floor(Math.random()*this.imagenesFondo.length);this.backgroundImage=this.imagenesFondo[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ga),l.Y36(An),l.Y36(pu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-main"]],decls:15,vars:3,consts:[[1,"contenedor"],[1,"box",3,"ngStyle"],[1,"titulo"],[1,"align"],[1,"msj"],[1,"pie"],["href","https://www.facebook.com/profile.php?id=100013672369598",1,"foo"],[1,"fab","fa-facebook-square"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-navbar"),l.TgZ(3,"h1",2),l._uU(4,"Asi somos asi Bailamos Corinto"),l.qZA(),l.TgZ(5,"div")(6,"p",3),l._uU(7," Sum\xe9rgete en el coraz\xf3n de Corinto, Cauca, a trav\xe9s de esta conmovedora recopilaci\xf3n de ensayos, presentaciones, eventos, im\xe1genes y m\xfasica, protagonizados por nuestros queridos j\xf3venes. Cada momento capturado refleja la dedicaci\xf3n, el talento y la pasi\xf3n de nuestros muchachos, quienes con su esfuerzo y creatividad han dejado una huella imborrable en nuestra comunidad. "),l.qZA()(),l.TgZ(8,"div",4),l._uU(9,"Gracias a todos espero lo disfruten tanto como yo!!."),l.qZA(),l.TgZ(10,"aside")(11,"footer",5)(12,"a",6),l._UZ(13,"i",7),l._uU(14," by Edwin 2022"),l.qZA()()()()()),2&t&&(l.xp6(1),l.Q6J("ngStyle",l.VKq(1,rx,"url("+r.backgroundImage+")")))},dependencies:[hd,km],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000549;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;padding:0;overflow:hidden}.log[_ngcontent-%COMP%]{display:flex;justify-content:space-between;animation:moveText .8s ease-in;white-space:nowrap;overflow:hidden}.logout[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.box[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;height:80%;width:83%;color:#fff;font-size:20px;padding:20px;border:1px solid white;border-radius:15px;outline:solid #ffffff;background-color:#000983;background-repeat:no-repeat;background-position:right;background-size:contain;animation:apearText 2s linear}.titulo[_ngcontent-%COMP%]{padding:10px;font-size:30px;text-align:center;background-color:#09ffb340;border-radius:8px;animation:moveText .5s linear}.align[_ngcontent-%COMP%]{padding:12px;text-align:center;border-radius:12px;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid white;color:#fff;margin-bottom:15px;font-size:17px;animation:moveText 1s linear;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:3px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0ff}.msj[_ngcontent-%COMP%]{color:#fff;margin-bottom:9px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{animation:apearText 2.3s linear;position:relative}.foo[_ngcontent-%COMP%]{color:#fff;text-decoration:none}@media (max-width: 767px){.titulo[_ngcontent-%COMP%]{font-size:22px}.welcome[_ngcontent-%COMP%]{font-size:20px;padding:0;margin:0}.t1[_ngcontent-%COMP%]{animation:moveText 1.2s linear;white-space:nowrap;overflow:hidden}.t2[_ngcontent-%COMP%]{animation:moveText 1.4s linear;white-space:nowrap;overflow:hidden}.t3[_ngcontent-%COMP%]{animation:moveText 1.6s linear;white-space:nowrap;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:7px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}.msj[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2.3s linear}}@media (max-width: 433px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}.msj[_ngcontent-%COMP%]{font-size:13px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:16px;animation:apearText 2.3s linear}}@media (max-width: 348px){.titulo[_ngcontent-%COMP%]{font-size:16px}.align[_ngcontent-%COMP%]{padding:4px}}@keyframes moveText{0%{opacity:0;transform:translate(100%)}50%{opacity:.5}to{opacity:1;transform:translate(0)}}@keyframes apearText{0%{opacity:0}50%{opacity:.5}to{opacity:1}}"]}),n})();V(1389);class Jv{constructor(){return(0,gn.vb)("auth")}}const Ex="firebasestorage.googleapis.com",s0="storageBucket";class ur extends Xt.ZR{constructor(e,t,r=0){super(Om(e),`Firebase Storage: ${t} (${Om(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ur.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Om(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ln=(()=>{return(n=Ln||(Ln={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ln;var n})();function Om(n){return"storage/"+n}function Fm(){return new ur(Ln.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function oI(n){return new ur(Ln.INVALID_ARGUMENT,n)}function Nx(){return new ur(Ln.APP_DELETED,"The Firebase app was deleted.")}function Vm(n,e){return new ur(Ln.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Um(n){throw new ur(Ln.INTERNAL_ERROR,"Internal error: "+n)}class zi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=zi.makeFromUrl(e,t)}catch{return new zi(e,"")}if(""===r.path)return r;throw function Sx(n){return new ur(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Xe){Xe.path_=decodeURIComponent(Xe.path)}const S=t.replace(/[.]/g,"\\."),We=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Xe){"/"===Xe.path.charAt(Xe.path.length-1)&&(Xe.path_=Xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===Ex?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Xe=0;Xe<We.length;Xe++){const Ut=We[Xe],Bt=Ut.regex.exec(e);if(Bt){let Dr=Bt[Ut.indices.path];Dr||(Dr=""),r=new zi(Bt[Ut.indices.bucket],Dr),Ut.postModify(r);break}}if(null==r)throw function Ax(n){return new ur(Ln.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class TN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function s(n){return"string"==typeof n||n instanceof String}function o(n){return u()&&n instanceof Blob}function u(){return typeof Blob<"u"&&!(0,Xt.UG)()}function d(n,e,t,r){if(r<e)throw oI(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw oI(`Invalid value for '${n}'. Expected ${t} or less.`)}function h(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function g(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var _=(()=>{return(n=_||(_={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",_;var n})();class I{constructor(e,t,r,i,a,c,f,y,w,D,S,B=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=y,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.retry=B,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((H,K)=>{this.resolve_=H,this.reject_=K,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const y=this.callback_(f,f.getResponse());!function SN(n){return void 0!==n}(y)?a():a(y)}catch(y){c(y)}else if(null!==f){const y=Fm();y.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,y):y)}else c(i.canceled?this.appDelete_?Nx():function Lm(){return new ur(Ln.CANCELED,"User canceled the upload/download.")}():function a0(){return new ur(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new A(!1,null,!0)):this.backoffId_=function DN(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function y(){return 2===f}let w=!1;function D(...ce){w||(w=!0,e.apply(null,ce))}function S(ce){i=setTimeout(()=>{i=null,n(H,y())},ce)}function B(){a&&clearTimeout(a)}function H(ce,...Be){if(w)return void B();if(ce)return B(),void D.call(null,ce,...Be);if(y()||c)return B(),void D.call(null,ce,...Be);let We;r<64&&(r*=2),1===f?(f=2,We=0):We=1e3*(r+Math.random()),S(We)}let K=!1;function se(ce){K||(K=!0,B(),!w&&(null!==i?(ce||(f=2),clearTimeout(i),S(0)):ce||(f=1)))}return S(0),a=setTimeout(()=>{c=!0,se(!0)},t),se}((r,i)=>{if(i)return void r(!1,new A(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===_.NO_ERROR,y=a.getStatus();if(!f||function C(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}(y,this.additionalRetryCodes_)&&this.retry){const D=a.getErrorCode()===_.ABORT;return void r(!1,new A(!1,null,D))}const w=-1!==this.successCodes_.indexOf(y);r(!0,new A(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function AN(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class A{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Je(...n){const e=function je(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(u())return new Blob(n);throw new ur(Ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}class Vt{constructor(e,t){this.data=e,this.contentType=t||null}}function Yn(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Bm(n,e){switch(n){case"base64":{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Vm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case"base64url":{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Vm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Pt(n){if(typeof atob>"u")throw function Px(n){return new ur(Ln.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Vm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class jm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Vm("data_url","Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function c0(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ro{constructor(e,t){let r=0,i="";o(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(o(this.data_)){const i=function yt(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ro(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ro(r,!0)}}static getBlob(...e){if(u()){const t=e.map(r=>r instanceof Ro?r.data_:r);return new Ro(Je.apply(null,t))}{const t=e.map(c=>s(c)?function wn(n,e){switch(n){case"raw":return new Vt(Yn(e));case"base64":case"base64url":return new Vt(Bm(n,e));case"data_url":return new Vt(function u0(n){const e=new jm(n);return e.base64?Bm("base64",e.rest):function Jc(n){let e;try{e=decodeURIComponent(n)}catch{throw Vm("data_url","Malformed data URL.")}return Yn(e)}(e.rest)}(e),function l0(n){return new jm(n).contentType}(e))}throw Fm()}("raw",c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[a++]=c[f]}),new Ro(i,!0)}}uploadData(){return this.data_}}function wp(n){let e;try{e=JSON.parse(n)}catch{return null}return function MN(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function RN(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function IV(n,e){return e}class xs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||IV}}let aI=null;function f0(){if(aI)return aI;const n=[];n.push(new xs("bucket")),n.push(new xs("generation")),n.push(new xs("metageneration")),n.push(new xs("name","fullPath",!0));const t=new xs("name");t.xform=function e(a,c){return function TV(n){return!s(n)||n.length<2?n:RN(n)}(c)},n.push(t);const i=new xs("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new xs("timeCreated")),n.push(new xs("updated")),n.push(new xs("md5Hash",null,!0)),n.push(new xs("cacheControl",null,!0)),n.push(new xs("contentDisposition",null,!0)),n.push(new xs("contentEncoding",null,!0)),n.push(new xs("contentLanguage",null,!0)),n.push(new xs("contentType",null,!0)),n.push(new xs("metadata","customMetadata",!0)),aI=n,aI}function PN(n,e,t){const r=wp(e);return null===r?null:function AV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function DV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new zi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}const NN="prefixes";class bl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cl(n){if(!n)throw Fm()}function uI(n,e){return function t(r,i){const a=PN(n,i,e);return Cl(null!==a),a}}function $m(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function o0(){return new ur(Ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function sI(){return new ur(Ln.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Dx(n){return new ur(Ln.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function bN(n){return new ur(Ln.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function p0(n){const e=$m(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function Tx(n){return new ur(Ln.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function NV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=h(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new bl(f,"GET",function RV(n,e){return function t(r,i){const a=function MV(n,e,t){const r=wp(t);return null===r?null:function xV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[NN])for(const i of t[NN]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new zi(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new zi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Cl(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=$m(e),D}function VN(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},y=function f(){let We="";for(let Xe=0;Xe<2;Xe++)We+=Math.random().toString().slice(2);return We}();c["Content-Type"]="multipart/related; boundary="+y;const w=function LN(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function LV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}(e,r,i),D=function kx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}(w,t),H=Ro.getBlob("--"+y+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+y+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+y+"--");if(null===H)throw function xx(){return new ur(Ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}();const K={name:w.fullPath},se=h(a,n.host,n._protocol),Be=n.maxUploadRetryTime,Qe=new bl(se,"POST",uI(n,t),Be);return Qe.urlParams=K,Qe.headers=c,Qe.body=H.uploadData(),Qe.errorHandler=$m(e),Qe}class HV extends class $V{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Um("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Um("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Um("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Um("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Um("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function gu(){return new HV}class Ep{constructor(e,t){this._service=e,this._location=t instanceof zi?t:zi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ep(e,t)}get root(){const e=new zi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RN(this._location.path)}get storage(){return this._service}get parent(){const e=function d0(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new zi(this._location.bucket,e);return new Ep(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function IN(n){return new ur(Ln.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function $N(n,e,t){return Lx.apply(this,arguments)}function Lx(){return(Lx=(0,fe.Z)(function*(n,e,t){const i=yield HN(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield $N(n,e,i.nextPageToken))})).apply(this,arguments)}function HN(n,e){null!=e&&"number"==typeof e.maxResults&&d("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=NV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,gu)}function nU(n){n._throwIfRoot("getDownloadURL");const e=function kV(n,e,t){const i=h(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new bl(i,"GET",function PV(n,e){return function t(r,i){const a=PN(n,i,e);return Cl(null!==a),function SV(n,e,t,r){const i=wp(e);if(null===i||!s(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return h("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+g({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=p0(e),f}(n.storage,n._location,f0());return n.storage.makeRequestWithTokens(e,gu).then(t=>{if(null===t)throw function Rx(){return new ur(Ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function zN(n,e){if(n instanceof Vx){const t=n;if(null==t._bucket)throw function CN(){return new ur(Ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+s0+"' property when initializing the app?")}();const r=new Ep(t,t._bucket);return null!=e?zN(r,e):r}return void 0!==e?function GN(n,e){const t=function h0(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new zi(n._location.bucket,t);return new Ep(n.storage,r)}(n,e):n}function qN(n,e){const t=e?.[s0];return null==t?null:zi.makeFromBucketSpec(t,n)}class Vx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Ex,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?zi.makeFromBucketSpec(i,this._host):qN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?zi.makeFromBucketSpec(this._url,e):qN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ep(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new TN(Nx());{const c=function Te(n,e,t,r,i,a,c=!0){const f=g(n.urlParams),y=n.url+f,w=Object.assign({},n.headers);return function Z(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function P(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function U(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function te(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new I(y,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const WN="@firebase/storage",KN="storage";function uU(n,e,t){return function jN(n,e,t){n._throwIfRoot("uploadBytes");const r=VN(n.storage,n._location,f0(),new Ro(e,!0),t);return n.storage.makeRequestWithTokens(r,gu).then(i=>({metadata:i,ref:n}))}(n=(0,Xt.m9)(n),e,t)}function lU(n){return function eU(n){n._throwIfRoot("getMetadata");const e=function ON(n,e,t){const i=h(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new bl(i,"GET",uI(n,t),c);return f.errorHandler=p0(e),f}(n.storage,n._location,f0());return n.storage.makeRequestWithTokens(e,gu)}(n=(0,Xt.m9)(n))}function cU(n){return function XV(n){const e={prefixes:[],items:[]};return $N(n,e).then(()=>e)}(n=(0,Xt.m9)(n))}function dU(n){return nU(n=(0,Xt.m9)(n))}function hU(n,e){return function oU(n,e){if(e&&function iU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof Vx)return function sU(n,e){return new Ep(n,e)}(n,e);throw oI("To use ref(service, url), the first argument must be a Storage instance.")}return zN(n,e)}(n=(0,Xt.m9)(n),e)}function fU(n=(0,Ss.getApp)(),e){n=(0,Xt.m9)(n);const r=(0,Ss._getProvider)(n,KN).getImmediate({identifier:e}),i=(0,Xt.P0)("storage");return i&&function pU(n,e,t,r={}){!function aU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Xt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(r,...i),r}function gU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Vx(t,r,i,e,Ss.SDK_VERSION)}!function mU(){(0,Ss._registerComponent)(new Eh.wA(KN,gU,"PUBLIC").setMultipleInstances(!0)),(0,Ss.registerVersion)(WN,"0.11.2",""),(0,Ss.registerVersion)(WN,"0.11.2","esm2017")}();class Gm{constructor(e){return e}}const YN="storage",Ux=new l.OlP("angularfire2.storage-instances");function vU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Gm(r)}}const wU={provide:class yU{constructor(){return(0,gn.vb)(YN)}},deps:[[new l.FiY,Ux]]},EU={provide:Gm,useFactory:function _U(n,e){const t=(0,gn.JM)(YN,n,e);return t&&new Gm(t)},deps:[[new l.FiY,Ux],_l]};let bU=(()=>{class n{constructor(){(0,yl.KN)("angularfire",gn.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[EU,wU]}),n})();function CU(n,...e){return{ngModule:bU,providers:[{provide:Ux,useFactory:vU(n),multi:!0,deps:[l.R0b,l.zs3,gn.HU,mv,[new l.FiY,Jv],[new l.FiY,Mm],...e]}]}}const QN=(0,gn.u3)(dU,!0),IU=(0,gn.u3)(fU,!0),JN=(0,gn.u3)(cU,!0),cI=(0,gn.u3)(hU,!0),XN=(0,gn.u3)(uU,!0);var TU=V(4986);function Bx(){return(0,gi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function AU(n,e){return n===e}V(9568);var ot,SU=V(3942),xU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mu={},jx=jx||{},Kt=xU||self;function dI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function g0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var $x="closure_uid_"+(1e9*Math.random()>>>0),RU=0;function PU(n,e,t){return n.call.apply(n.bind,arguments)}function NU(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function as(n,e,t){return(as=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?PU:NU).apply(null,arguments)}function hI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Dh(){this.s=this.s,this.o=this.o}Dh.prototype.s=!1,Dh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function MU(n){Object.prototype.hasOwnProperty.call(n,$x)&&n[$x]||(n[$x]=++RU)}(this)},Dh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ek=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Hx(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function tk(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dI(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function us(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}us.prototype.h=function(){this.defaultPrevented=!0};var OU=function(){if(!Kt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Kt.addEventListener("test",()=>{},e),Kt.removeEventListener("test",()=>{},e)}catch{}return n}();function m0(n){return/^[\s\xa0]*$/.test(n)}function fI(){var n=Kt.navigator;return n&&(n=n.userAgent)?n:""}function Il(n){return-1!=fI().indexOf(n)}function Gx(n){return Gx[" "](n),n}Gx[" "]=function(){};var qx,n,LU=Il("Opera"),zm=Il("Trident")||Il("MSIE"),nk=Il("Edge"),zx=nk||zm,rk=Il("Gecko")&&!(-1!=fI().toLowerCase().indexOf("webkit")&&!Il("Edge"))&&!(Il("Trident")||Il("MSIE"))&&!Il("Edge"),VU=-1!=fI().toLowerCase().indexOf("webkit")&&!Il("Edge");function ik(){var n=Kt.document;return n?n.documentMode:void 0}e:{var Wx="",Zx=(n=fI(),rk?/rv:([^\);]+)(\)|;)/.exec(n):nk?/Edge\/([\d\.]+)/.exec(n):zm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VU?/WebKit\/(\S+)/.exec(n):LU?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Zx&&(Wx=Zx?Zx[1]:""),zm){var Kx=ik();if(null!=Kx&&Kx>parseFloat(Wx)){qx=String(Kx);break e}}qx=Wx}var UU=Kt.document&&zm&&(ik()||parseInt(qx,10))||void 0;function y0(n,e){if(us.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rk){e:{try{Gx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:BU[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&y0.$.h.call(this)}}Mi(y0,us);var BU={2:"touch",3:"pen",4:"mouse"};y0.prototype.h=function(){y0.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var _0="closure_listenable_"+(1e6*Math.random()|0),jU=0;function $U(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++jU,this.fa=this.ia=!1}function pI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Qx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function ok(n){const e={};for(const t in n)e[t]=n[t];return e}const ak="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<ak.length;a++)t=ak[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function gI(n){this.src=n,this.g={},this.h=0}function Jx(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=ek(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(pI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xx(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}gI.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=Xx(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new $U(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var eM="closure_lm_"+(1e6*Math.random()|0),tM={};function lk(n,e,t,r,i){if(r&&r.once)return dk(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)lk(n,e[a],t,r,i);return null}return t=sM(t),n&&n[_0]?n.O(e,t,g0(r)?!!r.capture:!!r,i):ck(n,e,t,!1,r,i)}function ck(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=g0(i)?!!i.capture:!!i,f=rM(n);if(f||(n[eM]=f=new gI(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function GU(){const e=zU;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)OU||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(fk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function dk(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)dk(n,e[a],t,r,i);return null}return t=sM(t),n&&n[_0]?n.P(e,t,g0(r)?!!r.capture:!!r,i):ck(n,e,t,!0,r,i)}function hk(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)hk(n,e[a],t,r,i);else r=g0(r)?!!r.capture:!!r,t=sM(t),n&&n[_0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xx(a=n.g[e],t,r,i))&&(pI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=rM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xx(e,t,r,i)),(t=-1<n?e[n]:null)&&nM(t))}function nM(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[_0])Jx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(fk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=rM(e))?(Jx(t,n),0==t.h&&(t.src=null,e[eM]=null)):pI(n)}}}function fk(n){return n in tM?tM[n]:tM[n]="on"+n}function zU(n,e){if(n.fa)n=!0;else{e=new y0(e,this);var t=n.listener,r=n.la||n.src;n.ia&&nM(n),n=t.call(r,e)}return n}function rM(n){return(n=n[eM])instanceof gI?n:null}var iM="__closure_events_fn_"+(1e9*Math.random()>>>0);function sM(n){return"function"==typeof n?n:(n[iM]||(n[iM]=function(e){return n.handleEvent(e)}),n[iM])}function Ri(){Dh.call(this),this.i=new gI(this),this.S=this,this.J=null}function qi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new us(e,n);else if(e instanceof us)e.target=e.target||n;else{var i=e;uk(e=new us(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=mI(c,r,!0,e)&&i}if(i=mI(c=e.g=n,r,!0,e)&&i,i=mI(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=mI(c=e.g=t[a],r,!1,e)&&i}function mI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,y=c.la||c.src;c.ia&&Jx(n.i,c),i=!1!==f.call(y,r)&&i}}return i&&!r.defaultPrevented}Mi(Ri,Dh),Ri.prototype[_0]=!0,Ri.prototype.removeEventListener=function(n,e,t,r){hk(this,n,e,t,r)},Ri.prototype.N=function(){if(Ri.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)pI(t[r]);delete n.g[e],n.h--}}this.J=null},Ri.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ri.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var oM=Kt.JSON.stringify;function WU(){var n=aM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var pk=new class qU{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new KU,n=>n.reset());class KU{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function YU(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function QU(n){Kt.setTimeout(()=>{throw n},0)}let v0,w0=!1,aM=new class ZU{constructor(){this.h=this.g=null}add(e,t){const r=pk.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},gk=()=>{const n=Kt.Promise.resolve(void 0);v0=()=>{n.then(JU)}};var JU=()=>{for(var n;n=WU();){try{n.h.call(n.g)}catch(t){QU(t)}var e=pk;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}w0=!1};function yI(n,e){Ri.call(this),this.h=n||1,this.g=e||Kt,this.j=as(this.qb,this),this.l=Date.now()}function uM(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function lM(n,e,t){if("function"==typeof n)t&&(n=as(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=as(n.handleEvent,n)}return 2147483647<Number(e)?-1:Kt.setTimeout(n,e||0)}function mk(n){n.g=lM(()=>{n.g=null,n.i&&(n.i=!1,mk(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mi(yI,Ri),(ot=yI.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),qi(this,"tick"),this.ga&&(uM(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){yI.$.N.call(this),uM(this),delete this.g};class XU extends Dh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:mk(this)}N(){super.N(),this.g&&(Kt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function E0(n){Dh.call(this),this.h=n,this.g={}}Mi(E0,Dh);var yk=[];function _k(n,e,t,r){Array.isArray(t)||(t&&(yk[0]=t.toString()),t=yk);for(var i=0;i<t.length;i++){var a=lk(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function vk(n){Qx(n.g,function(e,t){this.g.hasOwnProperty(t)&&nM(e)},n),n.g={}}function _I(){this.g=!0}function qm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function rB(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return oM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}E0.prototype.N=function(){E0.$.N.call(this),vk(this)},E0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_I.prototype.Ea=function(){this.g=!1},_I.prototype.info=function(){};var bp={},wk=null;function vI(){return wk=wk||new Ri}function Ek(n){us.call(this,bp.Ta,n)}function b0(n){const e=vI();qi(e,new Ek(e))}function bk(n,e){us.call(this,bp.STAT_EVENT,n),this.stat=e}function Ms(n){const e=vI();qi(e,new bk(e,n))}function Ck(n,e){us.call(this,bp.Ua,n),this.size=e}function C0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Kt.setTimeout(function(){n()},e)}bp.Ta="serverreachability",Mi(Ek,us),bp.STAT_EVENT="statevent",Mi(bk,us),bp.Ua="timingevent",Mi(Ck,us);var wI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ik={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function cM(){}function Dk(){}cM.prototype.h=null;var fM,I0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function dM(){us.call(this,"d")}function hM(){us.call(this,"c")}function EI(){}function T0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new E0(this),this.P=iB,this.V=new yI(n=zx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Ak}function Ak(){this.i=null,this.g="",this.h=!1}Mi(dM,us),Mi(hM,us),Mi(EI,cM),EI.prototype.g=function(){return new XMLHttpRequest},EI.prototype.i=function(){return{}},fM=new EI;var iB=45e3,pM={},bI={};function gM(n,e,t){n.L=1,n.v=DI(Xc(e)),n.s=t,n.S=!0,Sk(n,null)}function Sk(n,e){n.G=Date.now(),D0(n),n.A=Xc(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),Vk(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Ak,n.g=uO(n.l,t?e:null,!n.s),0<n.O&&(n.M=new XU(as(n.Pa,n,n.g),n.O)),_k(n.U,n.g,"readystatechange",n.nb),e=n.I?ok(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),b0(),function eB(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),y=0;y<f.length;y++){var w=f[y].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");c=2<=S.length&&"type"==S[1]?c+(D+"=")+w+"&":c+(D+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function xk(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Mk(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=sB(n,t),i==bI){4==e&&(n.o=4,Ms(14),r=!1),qm(n.j,n.m,null,"[Incomplete Response]");break}if(i==pM){n.o=4,Ms(15),qm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}qm(n.j,n.m,i,null),mM(n,i)}xk(n)&&i!=bI&&i!=pM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ms(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),CM(e),e.M=!0,Ms(11))):(qm(n.j,n.m,t,"[Invalid Chunked Response]"),Cp(n),A0(n))}function sB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bI:(t=Number(e.substring(t,r)),isNaN(t)?pM:(r+=1)+t>e.length?bI:(e=e.slice(r,r+t),n.C=r+t,e))}function D0(n){n.Y=Date.now()+n.P,Rk(n,n.P)}function Rk(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=C0(as(n.lb,n),e)}function CI(n){n.B&&(Kt.clearTimeout(n.B),n.B=null)}function A0(n){0==n.l.H||n.J||iO(n.l,n)}function Cp(n){CI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,uM(n.V),vk(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function mM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||yM(t.i,n)))if(!n.K&&yM(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;PI(t),MI(t)}bM(t),Ms(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=C0(as(t.ib,t),6e3));if(1>=jk(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Tp(t,11)}else if((n.K||t.g==n)&&PI(t),!m0(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const D=w[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=w[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const B=w[5];null!=B&&"number"==typeof B&&0<B&&(t.L=r=1.5*B,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const H=n.g;if(H){const K=H.g?H.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var a=r.i;a.g||-1==K.indexOf("spdy")&&-1==K.indexOf("quic")&&-1==K.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(_M(a,a.h),a.h=null))}if(r.F){const se=H.g?H.g.getResponseHeader("X-HTTP-Session-Id"):null;se&&(r.Da=se,lr(r.I,r.F,se))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=aO(r,r.J?r.pa:null,r.Y),c.K){$k(r.i,c);var f=c,y=r.L;y&&f.setTimeout(y),f.B&&(CI(f),D0(f)),r.g=c}else nO(r);0<t.j.length&&RI(t)}else"stop"!=w[0]&&"close"!=w[0]||Tp(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Tp(t,7):EM(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}b0()}catch{}}function Pk(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function aB(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function oB(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ot=T0.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const e=this.M;e&&3==Tl(n)?e.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const D=Tl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||zx||this.g&&(this.h.h||this.g.ja()||Yk(this.g)))){this.J||4!=D||7==e||b0(),CI(this);var t=this.g.da();this.ca=t;t:if(xk(this)){var r=Yk(this.g);n="";var i=r.length,a=4==Tl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Cp(this),A0(this);var c="";break t}this.h.i=new Kt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function tB(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,y=this.g;if((f=y.g?y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m0(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Ms(12),Cp(this),A0(this);break e}qm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mM(this,t)}this.S?(Mk(this,D,c),zx&&this.i&&3==D&&(_k(this.U,this.V,"tick",this.mb),this.V.start())):(qm(this.j,this.m,c,null),mM(this,c)),4==D&&Cp(this),this.i&&!this.J&&(4==D?iO(this.l,this):(this.i=!1,D0(this)))}else(function TB(n){const e={};n=(n.g&&2<=Tl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(m0(n[r]))continue;var t=YU(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function HU(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ms(12)):(this.o=0,Ms(13)),Cp(this),A0(this)}}}catch{}},ot.mb=function(){if(this.g){var n=Tl(this.g),e=this.g.ja();this.C<e.length&&(CI(this),Mk(this,n,e),this.i&&4!=n&&D0(this))}},ot.cancel=function(){this.J=!0,Cp(this)},ot.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function nB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(b0(),Ms(17)),Cp(this),this.o=2,A0(this)):Rk(this,this.Y-n)};var Nk=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ip(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ip){this.h=n.h,II(this,n.j),this.s=n.s,this.g=n.g,TI(this,n.m),this.l=n.l;var e=n.i,t=new M0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),kk(this,t),this.o=n.o}else n&&(e=String(n).match(Nk))?(this.h=!1,II(this,e[1]||"",!0),this.s=S0(e[2]||""),this.g=S0(e[3]||"",!0),TI(this,e[4]),this.l=S0(e[5]||"",!0),kk(this,e[6]||"",!0),this.o=S0(e[7]||"")):(this.h=!1,this.i=new M0(null,this.h))}function Xc(n){return new Ip(n)}function II(n,e,t){n.j=t?S0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function TI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kk(n,e,t){e instanceof M0?(n.i=e,function pB(n,e){e&&!n.j&&(Ah(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Fk(this,r),Vk(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=x0(e,hB)),n.i=new M0(e,n.h))}function lr(n,e,t){n.i.set(e,t)}function DI(n){return lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function S0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function x0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,lB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Ip.prototype.toString=function(){var n=[],e=this.j;e&&n.push(x0(e,Ok,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(x0(e,Ok,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(x0(t,"/"==t.charAt(0)?dB:cB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",x0(t,fB)),n.join("")};var Ok=/[#\/\?@]/g,cB=/[#\?:]/g,dB=/[#\?]/g,hB=/[#\?@]/g,fB=/#/g;function M0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ah(n){n.g||(n.g=new Map,n.h=0,n.i&&function uB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Fk(n,e){Ah(n),e=Wm(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Lk(n,e){return Ah(n),e=Wm(n,e),n.g.has(e)}function Vk(n,e,t){Fk(n,e),0<t.length&&(n.i=null,n.g.set(Wm(n,e),Hx(t)),n.h+=t.length)}function Wm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Uk(n){this.l=n||mB,n=Kt.PerformanceNavigationTiming?0<(n=Kt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Kt.g&&Kt.g.Ka&&Kt.g.Ka()&&Kt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=M0.prototype).add=function(n,e){Ah(this),this.i=null,n=Wm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Ah(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.ta=function(){Ah(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ot.Z=function(n){Ah(this);let e=[];if("string"==typeof n)Lk(this,n)&&(e=e.concat(this.g.get(Wm(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Ah(this),this.i=null,Lk(this,n=Wm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var mB=10;function Bk(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jk(n){return n.h?1:n.g?n.g.size:0}function yM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function _M(n,e){n.g?n.g.add(e):n.h=e}function $k(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Hk(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Hx(n.i)}function _B(){this.g=new class{stringify(n){return Kt.JSON.stringify(n,void 0)}parse(n){return Kt.JSON.parse(n,void 0)}}}function vB(n,e,t){const r=t||"";try{Pk(n,function(i,a){let c=i;g0(i)&&(c=oM(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function AI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function R0(n){this.l=n.fc||null,this.j=n.ob||!1}function SI(n,e){Ri.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=vM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Uk.prototype.cancel=function(){if(this.i=Hk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mi(R0,cM),R0.prototype.g=function(){return new SI(this.l,this.j)},R0.prototype.i=function(n){return function(){return n}}({}),Mi(SI,Ri);var vM=0;function Gk(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function P0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,N0(n)}function N0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=SI.prototype).open=function(n,e){if(this.readyState!=vM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,N0(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Kt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,P0(this)),this.readyState=vM},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,N0(this)),this.g&&(this.readyState=3,N0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Kt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gk(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?P0(this):N0(this),3==this.readyState&&Gk(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,P0(this))},ot.Ya=function(n){this.g&&(this.response=n,P0(this))},ot.ka=function(){this.g&&P0(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(SI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var EB=Kt.JSON.parse;function Vr(n){Ri.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=zk,this.L=this.M=!1}Mi(Vr,Ri);var zk="",bB=/^https?$/i,CB=["POST","PUT"];function qk(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Wk(n),xI(n)}function Wk(n){n.F||(n.F=!0,qi(n,"complete"),qi(n,"error"))}function Zk(n){if(n.h&&typeof jx<"u"&&(!n.C[1]||4!=Tl(n)||2!=n.da()))if(n.v&&4==Tl(n))lM(n.La,0,n);else if(qi(n,"readystatechange"),4==Tl(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(Nk)[1]||null;!i&&Kt.self&&Kt.self.location&&(i=Kt.self.location.protocol.slice(0,-1)),r=!bB.test(i?i.toLowerCase():"")}t=r}if(t)qi(n,"complete"),qi(n,"success");else{n.m=6;try{var a=2<Tl(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",Wk(n)}}finally{xI(n)}}}function xI(n,e){if(n.g){Kk(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||qi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Kk(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Kt.clearTimeout(n.A),n.A=null)}function Tl(n){return n.g?n.g.readyState:0}function Yk(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case zk:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Qk(n){let e="";return Qx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function wM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Qk(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):lr(n,e,t))}function k0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Jk(n){this.Ga=0,this.j=[],this.l=new _I,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=k0("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=k0("baseRetryDelayMs",5e3,n),this.hb=k0("retryDelaySeedMs",1e4,n),this.eb=k0("forwardChannelMaxRetries",2,n),this.xa=k0("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new Uk(n&&n.concurrentRequestLimit),this.Ja=new _B,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function EM(n){if(Xk(n),3==n.H){var e=n.W++,t=Xc(n.I);if(lr(t,"SID",n.K),lr(t,"RID",e),lr(t,"TYPE","terminate"),O0(n,t),(e=new T0(n,n.l,e)).L=2,e.v=DI(Xc(t)),t=!1,Kt.navigator&&Kt.navigator.sendBeacon)try{t=Kt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Kt.Image&&((new Image).src=e.v,t=!0),t||(e.g=uO(e.l,null),e.g.ha(e.v)),e.G=Date.now(),D0(e)}oO(n)}function MI(n){n.g&&(CM(n),n.g.cancel(),n.g=null)}function Xk(n){MI(n),n.u&&(Kt.clearTimeout(n.u),n.u=null),PI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Kt.clearTimeout(n.m),n.m=null)}function RI(n){if(!Bk(n.i)&&!n.m){n.m=!0;var e=n.Na;v0||gk(),w0||(v0(),w0=!0),aM.add(e,n),n.C=0}}function eO(n,e){var t;t=e?e.m:n.W++;const r=Xc(n.I);lr(r,"SID",n.K),lr(r,"RID",t),lr(r,"AID",n.V),O0(n,r),n.o&&n.s&&wM(r,n.o,n.s),t=new T0(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=tO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),_M(n.i,t),gM(t,r,e)}function O0(n,e){n.na&&Qx(n.na,function(t,r){lr(e,r,t)}),n.h&&Pk({},function(t,r){lr(e,r,t)})}function tO(n,e,t){t=Math.min(n.j.length,t);var r=n.h?as(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let y=0;y<t;y++){let w=i[y].g;const D=i[y].map;if(w-=a,0>w)a=Math.max(0,i[y].g-100),f=!1;else try{vB(D,c,"req"+w+"_")}catch{r&&r(D)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function nO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;v0||gk(),w0||(v0(),w0=!0),aM.add(e,n),n.A=0}}function bM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=C0(as(n.Ma,n),sO(n,n.A)),n.A++,0))}function CM(n){null!=n.B&&(Kt.clearTimeout(n.B),n.B=null)}function rO(n){n.g=new T0(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Xc(n.wa);lr(e,"RID","rpc"),lr(e,"SID",n.K),lr(e,"AID",n.V),lr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&lr(e,"TO",n.qa),lr(e,"TYPE","xmlhttp"),O0(n,e),n.o&&n.s&&wM(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=DI(Xc(e)),t.s=null,t.S=!0,Sk(t,n)}function PI(n){null!=n.v&&(Kt.clearTimeout(n.v),n.v=null)}function iO(n,e){var t=null;if(n.g==e){PI(n),CM(n),n.g=null;var r=2}else{if(!yM(n.i,e))return;t=e.F,$k(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;qi(r=vI(),new Ck(r,t)),RI(n)}else nO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function DB(n,e){return!(jk(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=C0(as(n.Na,n,e),sO(n,n.C)),n.C++,0)))}(n,e)||2==r&&bM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Tp(n,5);break;case 4:Tp(n,10);break;case 3:Tp(n,6);break;default:Tp(n,2)}}function sO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Tp(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=as(n.pb,n);t||(t=new Ip("//www.google.com/images/cleardot.gif"),Kt.location&&"http"==Kt.location.protocol||II(t,"https"),DI(t)),function wB(n,e){const t=new _I;if(Kt.Image){const r=new Image;r.onload=hI(AI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hI(AI,t,r,"TestLoadImage: error",!1,e),r.onabort=hI(AI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hI(AI,t,r,"TestLoadImage: timeout",!1,e),Kt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ms(2);n.H=0,n.h&&n.h.za(e),oO(n),Xk(n)}function oO(n){if(n.H=0,n.ma=[],n.h){const e=Hk(n.i);(0!=e.length||0!=n.j.length)&&(tk(n.ma,e),tk(n.ma,n.j),n.i.i.length=0,Hx(n.j),n.j.length=0),n.h.ya()}}function aO(n,e,t){var r=t instanceof Ip?Xc(t):new Ip(t);if(""!=r.g)e&&(r.g=e+"."+r.g),TI(r,r.m);else{var i=Kt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Ip(null);r&&II(a,r),e&&(a.g=e),i&&TI(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&lr(r,t,e),lr(r,"VER",n.ra),O0(n,r),r}function uO(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t&&n.Ha&&!n.va?new R0({ob:!0}):n.va)).Oa(n.J),e}function lO(){}function NI(){if(zm&&!(10<=Number(UU)))throw Error("Environmental error: no available transport.")}function Po(n,e){Ri.call(this),this.g=new Jk(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!m0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!m0(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Zm(this)}function cO(n){dM.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function dO(){hM.call(this),this.status=1}function Zm(n){this.g=n}function yu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function IM(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(ot=Vr.prototype).Oa=function(n){this.M=n},ot.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():fM.g(),this.C=function Tk(n){return n.h||(n.h=n.i())}(this.u?this.u:fM),this.g.onreadystatechange=as(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void qk(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Kt.FormData&&n instanceof Kt.FormData,!(0<=ek(CB,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Kk(this),0<this.B&&((this.L=function IB(n){return zm&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=as(this.ua,this)):this.A=lM(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){qk(this,a)}},ot.ua=function(){typeof jx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qi(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,qi(this,"complete"),qi(this,"abort"),xI(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xI(this,!0)),Vr.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?Zk(this):this.kb())},ot.kb=function(){Zk(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<Tl(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),EB(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=Jk.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new T0(this,this.l,n);let a=this.s;if(this.U&&(a?(a=ok(a),uk(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tO(this,i,e),lr(t=Xc(this.I),"RID",n),lr(t,"CVER",22),this.F&&lr(t,"X-HTTP-Session-Id",this.F),O0(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(Qk(a)))+"&"+e:this.o&&wM(t,this.o,a)),_M(this.i,i),this.bb&&lr(t,"TYPE","init"),this.P?(lr(t,"$req",e),lr(t,"SID","null"),i.aa=!0,gM(i,t,null)):gM(i,t,e),this.H=2}}else 3==this.H&&(n?eO(this,n):0==this.j.length||Bk(this.i)||eO(this))},ot.Ma=function(){if(this.u=null,rO(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=C0(as(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ms(10),MI(this),rO(this))},ot.ib=function(){null!=this.v&&(this.v=null,MI(this),bM(this),Ms(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ms(2)):(this.l.info("Failed to ping google.com"),Ms(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=lO.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},NI.prototype.g=function(n,e){return new Po(n,e)},Mi(Po,Ri),Po.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ms(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=aO(n,null,n.Y),RI(n)},Po.prototype.close=function(){EM(this.g)},Po.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=oM(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&RI(e)},Po.prototype.N=function(){this.g.h=null,delete this.j,EM(this.g),delete this.g,Po.$.N.call(this)},Mi(cO,dM),Mi(dO,hM),Mi(Zm,lO),Zm.prototype.Ba=function(){qi(this.g,"a")},Zm.prototype.Aa=function(n){qi(this.g,new cO(n))},Zm.prototype.za=function(n){qi(this.g,new dO)},Zm.prototype.ya=function(){qi(this.g,"b")},Mi(yu,function AB(){this.blockSize=-1}),yu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},yu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)IM(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){IM(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){IM(this,r),i=0;break}}this.h=i,this.i+=e},yu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var SB={};function TM(n){return-128<=n&&128>n?function FU(n,e){var t=SB;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Vn([0|e],0>e?-1:0)}):new Vn([0|n],0>n?-1:0)}function Dl(n){if(isNaN(n)||!isFinite(n))return Km;if(0>n)return Wi(Dl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=DM;return new Vn(e,0)}var DM=4294967296,Km=TM(0),AM=TM(1),fO=TM(16777216);function ed(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ya(n){return-1==n.h}function Wi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Vn(t,~n.h).add(AM)}function kI(n,e){return n.add(Wi(e))}function OI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function F0(n,e){this.g=n,this.h=e}function FI(n,e){if(ed(e))throw Error("division by zero");if(ed(n))return new F0(Km,Km);if(ya(n))return e=FI(Wi(n),e),new F0(Wi(e.g),Wi(e.h));if(ya(e))return e=FI(n,Wi(e)),new F0(Wi(e.g),e.h);if(30<n.g.length){if(ya(n)||ya(e))throw Error("slowDivide_ only works with positive integers.");for(var t=AM,r=e;0>=r.X(n);)t=pO(t),r=pO(r);var i=Ym(t,1),a=Ym(r,1);for(r=Ym(r,2),t=Ym(t,2);!ed(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=Ym(r,1),t=Ym(t,1)}return e=kI(n,i.R(e)),new F0(i,e)}for(i=Km;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Dl(t)).R(e);ya(c)||0<c.X(n);)c=(a=Dl(t-=r)).R(e);ed(a)&&(a=AM),i=i.add(a),n=kI(n,c)}return new F0(i,n)}function pO(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Vn(t,n.h)}function Ym(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Vn(i,n.h)}(ot=Vn.prototype).ea=function(){if(ya(this))return-Wi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:DM+r)*e,e*=DM}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ed(this))return"0";if(ya(this))return"-"+Wi(this).toString(n);for(var e=Dl(Math.pow(n,6)),t=this,r="";;){var i=FI(t,e).g,a=((0<(t=kI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ed(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return ya(n=kI(this,n))?-1:ed(n)?0:1},ot.abs=function(){return ya(this)?Wi(this):this},ot.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new Vn(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(n){if(ed(this)||ed(n))return Km;if(ya(this))return ya(n)?Wi(this).R(Wi(n)):Wi(Wi(this).R(n));if(ya(n))return Wi(this.R(Wi(n)));if(0>this.X(fO)&&0>n.X(fO))return Dl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,y=65535&n.D(i);t[2*r+2*i]+=c*y,OI(t,2*r+2*i),t[2*r+2*i+1]+=a*y,OI(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,OI(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,OI(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Vn(t,0)},ot.gb=function(n){return FI(this,n).h},ot.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Vn(t,this.h&n.h)},ot.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Vn(t,this.h|n.h)},ot.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Vn(t,this.h^n.h)},NI.prototype.createWebChannel=NI.prototype.g,Po.prototype.send=Po.prototype.u,Po.prototype.open=Po.prototype.m,Po.prototype.close=Po.prototype.close,wI.NO_ERROR=0,wI.TIMEOUT=8,wI.HTTP_ERROR=6,Ik.COMPLETE="complete",Dk.EventType=I0,I0.OPEN="a",I0.CLOSE="b",I0.ERROR="c",I0.MESSAGE="d",Ri.prototype.listen=Ri.prototype.O,Vr.prototype.listenOnce=Vr.prototype.P,Vr.prototype.getLastError=Vr.prototype.Sa,Vr.prototype.getLastErrorCode=Vr.prototype.Ia,Vr.prototype.getStatus=Vr.prototype.da,Vr.prototype.getResponseJson=Vr.prototype.Wa,Vr.prototype.getResponseText=Vr.prototype.ja,Vr.prototype.send=Vr.prototype.ha,Vr.prototype.setWithCredentials=Vr.prototype.Oa,yu.prototype.digest=yu.prototype.l,yu.prototype.reset=yu.prototype.reset,yu.prototype.update=yu.prototype.j,Vn.prototype.add=Vn.prototype.add,Vn.prototype.multiply=Vn.prototype.R,Vn.prototype.modulo=Vn.prototype.gb,Vn.prototype.compare=Vn.prototype.X,Vn.prototype.toNumber=Vn.prototype.ea,Vn.prototype.toString=Vn.prototype.toString,Vn.prototype.getBits=Vn.prototype.D,Vn.fromNumber=Dl,Vn.fromString=function hO(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Wi(hO(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Dl(Math.pow(e,8)),r=Km,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Dl(Math.pow(e,a)),r=r.R(a).add(Dl(c))):r=(r=r.R(t)).add(Dl(c))}return r};var xB=mu.createWebChannelTransport=function(){return new NI},MB=mu.getStatEventTarget=function(){return vI()},SM=mu.ErrorCode=wI,RB=mu.EventType=Ik,PB=mu.Event=bp,gO=mu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},NB=mu.FetchXmlHttpFactory=R0,LI=mu.WebChannel=Dk,kB=mu.XhrIo=Vr,OB=mu.Md5=yu,Qm=mu.Integer=Vn;const mO="@firebase/firestore";class Pi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pi.UNAUTHENTICATED=new Pi(null),Pi.GOOGLE_CREDENTIALS=new Pi("google-credentials-uid"),Pi.FIRST_PARTY=new Pi("first-party-uid"),Pi.MOCK_USER=new Pi("mock-user");let Jm="9.23.0";const Sh=new vl.Yd("@firebase/firestore");function xM(){return Sh.logLevel}function Ue(n,...e){if(Sh.logLevel<=vl.in.DEBUG){const t=e.map(MM);Sh.debug(`Firestore (${Jm}): ${n}`,...t)}}function Wr(n,...e){if(Sh.logLevel<=vl.in.ERROR){const t=e.map(MM);Sh.error(`Firestore (${Jm}): ${n}`,...t)}}function _a(n,...e){if(Sh.logLevel<=vl.in.WARN){const t=e.map(MM);Sh.warn(`Firestore (${Jm}): ${n}`,...t)}}function MM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Jm}) INTERNAL ASSERTION FAILED: `+n;throw Wr(e),new Error(e)}function It(n,e){n||ht()}function st(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends Xt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _i{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pi.UNAUTHENTICATED))}shutdown(){}}class UB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class BB{constructor(e){this.t=e,this.currentUser=Pi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _i,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=c;e.enqueueRetryable((0,fe.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},y=w=>{Ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>y(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?y(w):(Ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _i)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new yO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Pi(e)}}class jB{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Pi.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $B{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new jB(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Pi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _O{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HB{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,Ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.T=t.token,new _O(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function GB(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class vO{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GB(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Zt(n,e){return n<e?-1:n>e?1:0}function Xm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function wO(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Zt(this.nanoseconds,e.nanoseconds):Zt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Er(0,0))}static max(){return new Dt(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class L0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===L0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof L0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends L0{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const zB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends L0{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return zB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Fe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Fe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[i+1];if("\\"!==y&&"."!==y&&"`"!==y)throw new Fe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Fe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(En.fromString(e))}static fromName(e){return new rt(En.fromString(e).popFirst(5))}static empty(){return new rt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new En(e.slice()))}}class VI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function RM(n){return n.fields.find(e=>2===e.kind)}function Dp(n){return n.fields.filter(e=>2!==e.kind)}VI.UNKNOWN_ID=-1;class UI{constructor(e,t){this.fieldPath=e,this.kind=t}}class V0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new V0(0,No.min())}}function EO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new No(i,rt.empty(),e)}function bO(n){return new No(n.readTime,n.key,-1)}class No{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new No(Dt.min(),rt.empty(),-1)}static max(){return new No(Dt.max(),rt.empty(),-1)}}function PM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Zt(n.largestBatchId,e.largestBatchId))}const CO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function xh(n){return NM.apply(this,arguments)}function NM(){return NM=(0,fe.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==CO)throw n;Ue("LocalStore","Unexpectedly lost primary lease")}),NM.apply(this,arguments)}class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ae((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ae?t:ae.resolve(t)}catch(t){return ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ae.reject(t)}static resolve(e){return new ae((t,r)=>{t(e)})}static reject(e){return new ae((t,r)=>{r(e)})}static waitFor(e){return new ae((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},y=>r(y))}),c=!0,a===i&&t()})}static or(e){let t=ae.resolve(!1);for(const r of e)t=t.next(i=>i?ae.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ae((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let y=0;y<a;y++){const w=y;t(e[w]).next(D=>{c[w]=D,++f,f===a&&r(c)},D=>i(D))}})}static doWhile(e,t){return new ae((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class BI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new _i,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new U0(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=kM(r.target.error);this.v.reject(new U0(e,i))}}static open(e,t,r,i){try{return new BI(t,e.transaction(i,r))}catch(a){throw new U0(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KB(t)}}class _u{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===_u.S((0,Xt.z$)())&&Wr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ue("SimpleDb","Removing database:",e),Ap(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Xt.hl)())return!1;if(_u.C())return!0;const e=(0,Xt.z$)(),t=_u.S(e),r=0<t&&t<10,i=_u.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new U0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Fe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Fe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new U0(e,f))},a.onupgradeneeded=c=>{Ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,fe.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const y=BI.open(a.db,e,c?"readonly":"readwrite",r),w=i(y).next(D=>(y.P(),D)).catch(D=>(y.abort(D),ae.reject(D))).toPromise();return w.catch(()=>{}),yield y.R,w}catch(y){const w=y,D="FirebaseError"!==w.name&&f<3;if(Ue("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ZB{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ap(this.L.delete())}}class U0 extends Fe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Mh(n){return"IndexedDbTransactionError"===n.name}class KB{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ap(r)}add(e){return Ue("SimpleDb","ADD",this.store.name,e,e),Ap(this.store.add(e))}get(e){return Ap(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ue("SimpleDb","DELETE",this.store.name,e),Ap(this.store.delete(e))}count(){return Ue("SimpleDb","COUNT",this.store.name),Ap(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ae((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ae((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ae((r,i)=>{t.onerror=a=>{const c=kM(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ae((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const y=new ZB(f),w=t(f.primaryKey,f.value,y);if(w instanceof ae){const D=w.catch(S=>(y.done(),ae.reject(S)));r.push(D)}y.isDone?i():null===y.K?f.continue():f.continue(y.K)}}).next(()=>ae.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ap(n){return new ae((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=kM(r.target.error);t(i)}})}let TO=!1;function kM(n){const e=_u.S((0,Xt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TO||(TO=!0,setTimeout(()=>{throw r},0)),r}}return n}class YB{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ue("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Ue("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Mh(r)?Ue("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield xh(r)}yield t.et(6e4)}))}}class QB{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ae.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ue("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(Ue("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=bO(a);PM(c,r)>0&&(r=c)}),new No(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ko=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function B0(n){return null==n}function j0(n){return 0===n&&1/n==-1/0}function DO(n){return"number"==typeof n&&Number.isInteger(n)&&!j0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ls(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=AO(e)),e=JB(n.get(t),e);return AO(e)}function JB(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function AO(n){return n+"\x01\x01"}function Al(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ht(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let y;0===i.length?y=f:(i+=f,y=i,i=""),r.push(y);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ht()}a=c+2}return new En(r)}const SO=["userId","batchId"];function jI(n,e){return[n,ls(e)]}function xO(n,e,t){return[n,ls(e),t]}const XB={},ej=["prefixPath","collectionGroup","readTime","documentId"],tj=["prefixPath","collectionGroup","documentId"],nj=["collectionGroup","readTime","prefixPath","documentId"],rj=["canonicalId","targetId"],ij=["targetId","path"],sj=["path","targetId"],oj=["collectionId","parent"],aj=["indexId","uid"],uj=["uid","sequenceNumber"],lj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cj=["indexId","uid","orderedDocumentKey"],dj=["userId","collectionPath","documentId"],hj=["userId","collectionPath","largestBatchId"],fj=["userId","collectionGroup","largestBatchId"],MO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pj=[...MO,"documentOverlays"],RO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PO=RO,gj=[...PO,"indexConfiguration","indexState","indexEntries"];class OM extends IO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ni(n,e){const t=st(n);return _u.M(t.ht,e)}function NO(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function kO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class tr{constructor(e,t){this.comparator=e,this.root=t||Zi.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zi.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $I(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $I(this.root,e,this.comparator,!1)}getReverseIterator(){return new $I(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $I(this.root,e,this.comparator,!0)}}class $I{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Zi.RED,this.left=i??Zi.EMPTY,this.right=a??Zi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Zi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Zi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Zi.EMPTY=null,Zi.RED=!0,Zi.BLACK=!1,Zi.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Zi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OO(this.data.getIterator())}getIteratorFrom(e){return new OO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class OO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ey(n){return n.hasNext()?n.getNext():void 0}class to{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new to([])}unionWith(e){let t=new cr(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new to(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class FO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new FO("Invalid base64 string: "+i):i}}(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Zt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const yj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ph(n){if(It(!!n),"string"==typeof n){let e=0;const t=yj.exec(n);if(It(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function td(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function HI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function GI(n){const e=n.mapValue.fields.__previous_value__;return HI(e)?GI(e):e}function $0(n){const e=Ph(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class _j{constructor(e,t,r,i,a,c,f,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=y,this.useFetchStreams=w}}class Nh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Nh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Nh&&e.projectId===this.projectId&&e.database===this.database}}const kh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zI={nullValue:"NULL_VALUE"};function Oh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?HI(n)?4:BO(n)?9007199254740991:10:ht()}function Sl(n,e){if(n===e)return!0;const t=Oh(n);if(t!==Oh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $0(n).isEqual($0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Ph(r.timestampValue),c=Ph(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,td(n.bytesValue).isEqual(td(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Br(r.doubleValue),c=Br(i.doubleValue);return a===c?j0(a)===j0(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return Xm(n.arrayValue.values||[],e.arrayValue.values||[],Sl);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if(NO(a)!==NO(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!Sl(a[f],c[f])))return!1;return!0}(n,e);default:return ht()}var i}function H0(n,e){return void 0!==(n.values||[]).find(t=>Sl(t,e))}function Fh(n,e){if(n===e)return 0;const t=Oh(n),r=Oh(e);if(t!==r)return Zt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Zt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Br(i.integerValue||i.doubleValue),f=Br(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return LO(n.timestampValue,e.timestampValue);case 4:return LO($0(n),$0(e));case 5:return Zt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=td(i),f=td(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let y=0;y<c.length&&y<f.length;y++){const w=Zt(c[y],f[y]);if(0!==w)return w}return Zt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Zt(Br(i.latitude),Br(a.latitude));return 0!==c?c:Zt(Br(i.longitude),Br(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let y=0;y<c.length&&y<f.length;++y){const w=Fh(c[y],f[y]);if(w)return w}return Zt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===kh.mapValue&&a===kh.mapValue)return 0;if(i===kh.mapValue)return 1;if(a===kh.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),y=a.fields||{},w=Object.keys(y);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const S=Zt(f[D],w[D]);if(0!==S)return S;const B=Fh(c[f[D]],y[w[D]]);if(0!==B)return B}return Zt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw ht()}}function LO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Zt(n,e);const t=Ph(n),r=Ph(e),i=Zt(t.seconds,r.seconds);return 0!==i?i:Zt(t.nanos,r.nanos)}function ty(n){return FM(n)}function FM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ph(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?td(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=FM(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${FM(r.fields[f])}`;return a+"}"}(n.mapValue):ht();var e}function Sp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function LM(n){return!!n&&"integerValue"in n}function G0(n){return!!n&&"arrayValue"in n}function VO(n){return!!n&&"nullValue"in n}function UO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function WI(n){return!!n&&"mapValue"in n}function z0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=z0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=z0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vj(n){return"nullValue"in n?zI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sp(Nh.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function wj(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sp(Nh.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?kh:ht()}function jO(n,e){const t=Fh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $O(n,e){const t=Fh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!WI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=z0(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const y=this.getFieldsMap(t);this.applyChanges(y,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=z0(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());WI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];WI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ki(z0(this.value))}}function HO(n){const e=[];return Rh(n.fields,(t,r)=>{const i=new Ur([t]);if(WI(r)){const a=HO(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new to(e)}class dr{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new dr(e,0,Dt.min(),Dt.min(),Dt.min(),Ki.empty(),0)}static newFoundDocument(e,t,r,i){return new dr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new dr(e,2,t,Dt.min(),Dt.min(),Ki.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,Dt.min(),Dt.min(),Ki.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lh{constructor(e,t){this.position=e,this.inclusive=t}}function GO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),t.key):Fh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function zO(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sl(n.position[t],e.position[t]))return!1;return!0}class ny{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ej(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qO{}class mn extends qO{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new bj(e,t,r):"array-contains"===t?new Tj(e,r):"in"===t?new JO(e,r):"not-in"===t?new Dj(e,r):"array-contains-any"===t?new Aj(e,r):new mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Cj(e,r):new Ij(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fh(t,this.value)):null!==t&&Oh(this.value)===Oh(t)&&this.matchesComparison(Fh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Un extends qO{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Un(e,t)}matches(e){return ry(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ry(n){return"and"===n.op}function VM(n){return"or"===n.op}function UM(n){return WO(n)&&ry(n)}function WO(n){for(const e of n.filters)if(e instanceof Un)return!1;return!0}function BM(n){if(n instanceof mn)return n.field.canonicalString()+n.op.toString()+ty(n.value);if(UM(n))return n.filters.map(e=>BM(e)).join(",");{const e=n.filters.map(t=>BM(t)).join(",");return`${n.op}(${e})`}}function ZO(n,e){return n instanceof mn?(t=n,(r=e)instanceof mn&&t.op===r.op&&t.field.isEqual(r.field)&&Sl(t.value,r.value)):n instanceof Un?function(t,r){return r instanceof Un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&ZO(a,r.filters[c]),!0)}(n,e):void ht();var t,r}function KO(n,e){const t=n.filters.concat(e);return Un.create(t,n.op)}function YO(n){return n instanceof mn?`${(e=n).field.canonicalString()} ${e.op} ${ty(e.value)}`:n instanceof Un?function(e){return e.op.toString()+" {"+e.getFilters().map(YO).join(" ,")+"}"}(n):"Filter";var e}class bj extends mn{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Cj extends mn{constructor(e,t){super(e,"in",t),this.keys=QO(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ij extends mn{constructor(e,t){super(e,"not-in",t),this.keys=QO(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QO(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class Tj extends mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return G0(t)&&H0(t.arrayValue,this.value)}}class JO extends mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&H0(this.value.arrayValue,t)}}class Dj extends mn{constructor(e,t){super(e,"not-in",t)}matches(e){if(H0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!H0(this.value.arrayValue,t)}}class Aj extends mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!G0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>H0(this.value.arrayValue,r))}}class Sj{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.dt=null}}function jM(n,e=null,t=[],r=[],i=null,a=null,c=null){return new Sj(n,e,t,r,i,a,c)}function xp(n){const e=st(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>BM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),B0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ty(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ty(r)).join(",")),e.dt=t}return e.dt}function q0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Ej(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!zO(n.startAt,e.startAt)&&zO(n.endAt,e.endAt)}function ZI(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function KI(n,e){return n.filters.filter(t=>t instanceof mn&&t.field.isEqual(e))}function XO(n,e,t){let r=zI,i=!0;for(const a of KI(n,e)){let c=zI,f=!0;switch(a.op){case"<":case"<=":c=vj(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=zI}jO({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];jO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function eF(n,e,t){let r=kh,i=!0;for(const a of KI(n,e)){let c=kh,f=!0;switch(a.op){case">=":case">":c=wj(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=kh}$O({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];$O({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class nd{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=y,this.wt=null,this._t=null}}function tF(n,e,t,r,i,a,c,f){return new nd(n,e,t,r,i,a,c,f)}function iy(n){return new nd(n)}function nF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function $M(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function YI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function HM(n){return null!==n.collectionGroup}function Mp(n){const e=st(n);if(null===e.wt){e.wt=[];const t=YI(e),r=$M(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new ny(t)),e.wt.push(new ny(Ur.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ny(Ur.keyField(),a))}}}return e.wt}function Rs(n){const e=st(n);if(!e._t)if("F"===e.limitType)e._t=jM(e.path,e.collectionGroup,Mp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Mp(e))t.push(new ny(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Lh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Lh(e.startAt.position,e.startAt.inclusive):null;e._t=jM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function GM(n,e){e.getFirstInequalityField(),YI(n);const t=n.filters.concat([e]);return new nd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function QI(n,e,t){return new nd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function W0(n,e){return q0(Rs(n),Rs(e))&&n.limitType===e.limitType}function rF(n){return`${xp(Rs(n))}|lt:${n.limitType}`}function zM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>YO(r)).join(", ")}]`),B0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ty(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ty(r)).join(",")),`Target(${t})`}(Rs(n))}; limitType=${n.limitType})`}function Z0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Mp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=GO(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,Mp(t),r)||t.endAt&&!function(i,a,c){const f=GO(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,Mp(t),r)));var t,r}function iF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sF(n){return(e,t)=>{let r=!1;for(const i of Mp(n)){const a=xj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function xj(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),y=c.data.field(i);return null!==f&&null!==y?Fh(f,y):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}class rd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return kO(this.inner)}size(){return this.innerSize}}const Mj=new tr(rt.comparator);function no(){return Mj}const oF=new tr(rt.comparator);function K0(...n){let e=oF;for(const t of n)e=e.insert(t.key,t);return e}function aF(n){let e=oF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xl(){return Y0()}function uF(){return Y0()}function Y0(){return new rd(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rj=new tr(rt.comparator),Pj=new cr(rt.comparator);function nn(...n){let e=Pj;for(const t of n)e=e.add(t);return e}const Nj=new cr(Zt);function qM(){return Nj}function lF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:j0(e)?"-0":e}}function cF(n){return{integerValue:""+n}}function dF(n,e){return DO(e)?cF(e):lF(n,e)}class JI{constructor(){this._=void 0}}function kj(n,e,t){return n instanceof sy?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&HI(i)&&(i=GI(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Rp?fF(n,e):n instanceof Pp?pF(n,e):function(r,i){const a=hF(r,i),c=gF(a)+gF(r.gt);return LM(a)&&LM(r.gt)?cF(c):lF(r.serializer,c)}(n,e)}function Oj(n,e,t){return n instanceof Rp?fF(n,e):n instanceof Pp?pF(n,e):t}function hF(n,e){return n instanceof oy?LM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class sy extends JI{}class Rp extends JI{constructor(e){super(),this.elements=e}}function fF(n,e){const t=mF(e);for(const r of n.elements)t.some(i=>Sl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Pp extends JI{constructor(e){super(),this.elements=e}}function pF(n,e){let t=mF(e);for(const r of n.elements)t=t.filter(i=>!Sl(i,r));return{arrayValue:{values:t}}}class oy extends JI{constructor(e,t){super(),this.serializer=e,this.gt=t}}function gF(n){return Br(n.integerValue||n.doubleValue)}function mF(n){return G0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Q0{constructor(e,t){this.field=e,this.transform=t}}class Lj{constructor(e,t){this.version=e,this.transformResults=t}}class br{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new br}static exists(e){return new br(void 0,e)}static updateTime(e){return new br(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function XI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class eT{}function yF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new uy(n.key,br.none()):new ay(n.key,n.data,br.none());{const t=n.data,r=Ki.empty();let i=new cr(Ur.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new id(n.key,r,new to(i.toArray()),br.none())}}function Vj(n,e,t){n instanceof ay?function(r,i,a){const c=r.value.clone(),f=wF(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof id?function(r,i,a){if(!XI(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=wF(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(vF(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function J0(n,e,t,r){return n instanceof ay?function(i,a,c,f){if(!XI(i.precondition,a))return c;const y=i.value.clone(),w=EF(i.fieldTransforms,f,a);return y.setAll(w),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof id?function(i,a,c,f){if(!XI(i.precondition,a))return c;const y=EF(i.fieldTransforms,f,a),w=a.data;return w.setAll(vF(i)),w.setAll(y),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(c=t,XI(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function Uj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=hF(r.transform,i||null);null!=a&&(null===t&&(t=Ki.empty()),t.set(r.field,a))}return t||null}function _F(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Xm(t,r,(i,a)=>function Fj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Rp&&r instanceof Rp||t instanceof Pp&&r instanceof Pp?Xm(t.elements,r.elements,Sl):t instanceof oy&&r instanceof oy?Sl(t.gt,r.gt):t instanceof sy&&r instanceof sy);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ay extends eT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class id extends eT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function vF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wF(n,e,t){const r=new Map;It(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,Oj(c,f,t[i]))}return r}function EF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,kj(a,c,e))}return r}class uy extends eT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WM extends eT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Vj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=J0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=J0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=uF();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const y=yF(c,f);null!==y&&r.set(i.key,y),c.isValidDocument()||c.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&Xm(this.mutations,e.mutations,(t,r)=>_F(t,r))&&Xm(this.baseMutations,e.baseMutations,(t,r)=>_F(t,r))}}class KM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length);let i=Rj;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new KM(e,t,r,i)}}class YM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jj{constructor(e,t){this.count=e,this.unchangedNames=t}}var ni,bn;function bF(n){switch(n){default:return ht();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function CF(n){if(void 0===n)return Wr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case ni.OK:return ge.OK;case ni.CANCELLED:return ge.CANCELLED;case ni.UNKNOWN:return ge.UNKNOWN;case ni.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case ni.INTERNAL:return ge.INTERNAL;case ni.UNAVAILABLE:return ge.UNAVAILABLE;case ni.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case ni.NOT_FOUND:return ge.NOT_FOUND;case ni.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case ni.ABORTED:return ge.ABORTED;case ni.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case ni.DATA_LOSS:return ge.DATA_LOSS;default:return ht()}}(bn=ni||(ni={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";class QM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return tT}static getOrCreateInstance(){return null===tT&&(tT=new QM),tT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let tT=null;function IF(){return new TextEncoder}const $j=new Qm([4294967295,4294967295],0);function TF(n){const e=IF().encode(n),t=new OB;return t.update(e),new Uint8Array(t.digest())}function DF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Qm([t,r],0),new Qm([i,a],0)]}class JM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new X0(`Invalid padding: ${t}`);if(r<0)throw new X0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new X0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new X0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Qm.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Qm.fromNumber(r)));return 1===i.compare($j)&&(i=new Qm([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=TF(e),[r,i]=DF(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new JM(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=TF(e),[r,i]=DF(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class X0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ew{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,tw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ew(Dt.min(),i,new tr(Zt),no(),nn())}}class tw{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new tw(r,t,nn(),nn(),nn())}}class nT{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class AF{constructor(e,t){this.targetId=e,this.Vt=t}}class SF{constructor(e,t,r=vi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class xF{constructor(){this.St=0,this.Dt=RF(),this.Ct=vi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=nn(),t=nn(),r=nn();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new tw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=RF()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Hj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=no(),this.zt=MF(),this.Wt=new tr(Zt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(ZI(c))if(0===i){const f=new rt(c.path);this.Yt(r,f,dr.newNoDocument(f,Dt.min()))}else It(1===i);else{const f=this.ie(r);if(f!==i){const y=this.re(e,f);0!==y&&(this.ee(r),this.Wt=this.Wt.insert(r,2===y?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=QM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,D,S){var B,H,K,se,ce,Be;const Qe={localCacheCount:D,existenceFilterCount:S.count},We=S.unchangedNames;return We&&(Qe.bloomFilter={applied:0===w,hashCount:null!==(B=We?.hashCount)&&void 0!==B?B:0,bitmapLength:null!==(se=null===(K=null===(H=We?.bits)||void 0===H?void 0:H.bitmap)||void 0===K?void 0:K.length)&&void 0!==se?se:0,padding:null!==(Be=null===(ce=We?.bits)||void 0===ce?void 0:ce.padding)&&void 0!==Be?Be:0}),Qe}(y,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let y,w;try{y=td(a).toUint8Array()}catch(D){if(D instanceof FO)return _a("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{w=new JM(y,c,f)}catch(D){return _a(D instanceof X0?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===w.It?1:i!==t-this.oe(e.targetId,w)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const f=this.se(c);if(f){if(a.current&&ZI(f.target)){const y=new rt(f.target.path);null!==this.jt.get(y)||this.ae(c,y)||this.Yt(c,y,dr.newNoDocument(y,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=nn();this.zt.forEach((a,c)=>{let f=!0;c.forEachWhile(y=>{const w=this.se(y);return!w||"TargetPurposeLimboResolution"===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new ew(e,t,this.Wt,this.jt,r);return this.jt=no(),this.zt=MF(),this.Wt=new tr(Zt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new xF,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new cr(Zt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ue("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new xF),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function MF(){return new tr(rt.comparator)}function RF(){return new tr(rt.comparator)}const Gj={asc:"ASCENDING",desc:"DESCENDING"},zj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qj={and:"AND",or:"OR"};class Wj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function XM(n,e){return n.useProto3Json||B0(e)?e:{value:e}}function ly(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function PF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zj(n,e){return ly(n,e.toTimestamp())}function Zr(n){return It(!!n),Dt.fromTimestamp(function(e){const t=Ph(e);return new Er(t.seconds,t.nanos)}(n))}function e1(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function NF(n){const e=En.fromString(n);return It($F(e)),e}function nw(n,e){return e1(n.databaseId,e.path)}function Ml(n,e){const t=NF(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(OF(t))}function t1(n,e){return e1(n.databaseId,e)}function kF(n){const e=NF(n);return 4===e.length?En.emptyPath():OF(e)}function rw(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OF(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function FF(n,e,t){return{name:nw(n,e),fields:t.value.mapValue.fields}}function LF(n,e,t){const r=Ml(n,e.name),i=Zr(e.updateTime),a=e.createTime?Zr(e.createTime):Dt.min(),c=new Ki({mapValue:{fields:e.fields}}),f=dr.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function iw(n,e){let t;if(e instanceof ay)t={update:FF(n,e.key,e.value)};else if(e instanceof uy)t={delete:nw(n,e.key)};else if(e instanceof id)t={update:FF(n,e.key,e.data),updateMask:n$(e.fieldMask)};else{if(!(e instanceof WM))return ht();t={verify:nw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof sy)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Rp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Pp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof oy)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Zj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function n1(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?br.updateTime(Zr(i.updateTime)):void 0!==i.exists?br.exists(i.exists):br.none():br.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(It("REQUEST_TIME"===c.setToServerValue),f=new sy):"appendMissingElements"in c?f=new Rp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Pp(c.removeAllFromArray.values||[]):"increment"in c?f=new oy(a,c.increment):ht();const y=Ur.fromServerFormat(c.fieldPath);return new Q0(y,f)}(n,i)):[];var i;if(e.update){const i=Ml(n,e.update.name),a=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new to((e.updateMask.fieldPaths||[]).map(w=>Ur.fromServerFormat(w)));return new id(i,a,c,t,r)}return new ay(i,a,t,r)}if(e.delete){const i=Ml(n,e.delete);return new uy(i,t)}if(e.verify){const i=Ml(n,e.verify);return new WM(i,t)}return ht()}function VF(n,e){return{documents:[t1(n,e.path)]}}function r1(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=t1(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=t1(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(y){if(0!==y.length)return jF(Un.create(y,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(y){if(0!==y.length)return y.map(w=>{return{field:Vh((D=w).field),direction:Xj(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=XM(n,e.limit);var f,y;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(y=e.endAt).inclusive,values:y.position}),t}function UF(n){let e=kF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const S=BF(D);return S instanceof Un&&UM(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new ny(cy((S=D).field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(D){let S;return S="object"==typeof D?D.value:D,B0(S)?null:S}(t.limit));let y=null;var D;t.startAt&&(y=new Lh((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Lh(D.values||[],!D.before)}(t.endAt)),tF(e,i,c,a,f,"F",y,w)}function BF(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=cy(e.unaryFilter.field);return mn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=cy(e.unaryFilter.field);return mn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=cy(e.unaryFilter.field);return mn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=cy(e.unaryFilter.field);return mn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?mn.create(cy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Un.create(e.compositeFilter.filters.map(t=>BF(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ht()}}(e.compositeFilter.op))}(n):ht();var e}function Xj(n){return Gj[n]}function e$(n){return zj[n]}function t$(n){return qj[n]}function Vh(n){return{fieldPath:n.canonicalString()}}function cy(n){return Ur.fromServerFormat(n.fieldPath)}function jF(n){return n instanceof mn?function(e){if("=="===e.op){if(UO(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NAN"}};if(VO(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(UO(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NOT_NAN"}};if(VO(e.value))return{unaryFilter:{field:Vh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vh(e.field),op:e$(e.op),value:e.value}}}(n):n instanceof Un?function(e){const t=e.getFilters().map(r=>jF(r));return 1===t.length?t[0]:{compositeFilter:{op:t$(e.op),filters:t}}}(n):ht()}function n$(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $F(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sd{constructor(e,t,r,i,a=Dt.min(),c=Dt.min(),f=vi.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=y}withSequenceNumber(e){return new sd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class HF{constructor(e){this.fe=e}}function GF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:rT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:nw(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:ly(i,a.version.toTimestamp()),createTime:ly(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Np(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Np(e.version)}}var i,a;return r}function rT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Np(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function kp(n){const e=new Er(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Op(n,e){const t=(e.baseMutations||[]).map(a=>n1(n.fe,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>n1(n.fe,a)),i=Er.fromMillis(e.localWriteTimeMs);return new ZM(e.batchId,i,t,r)}function sw(n){const e=kp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?kp(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(It(1===(i=n.query).documents.length),r=Rs(iy(kF(i.documents[0])))):r=Rs(UF(n.query)),new sd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken))}function zF(n,e){const t=Np(e.snapshotVersion),r=Np(e.lastLimboFreeSnapshotVersion);let i;i=ZI(e.target)?VF(n.fe,e.target):r1(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function i1(n){const e=UF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?QI(e,e.limit,"L"):e}function s1(n,e){return new YM(e.largestBatchId,n1(n.fe,e.overlayMutation))}function qF(n,e){const t=e.path.lastSegment();return[n,ls(e.path.popLast()),t]}function WF(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Np(r.readTime),documentKey:ls(r.documentKey.path),largestBatchId:r.largestBatchId}}class i${getBundleMetadata(e,t){return ZF(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:kp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return ZF(e).put({bundleId:(r=t).id,createTime:Np(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return KF(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:i1(i.bundledQuery),readTime:kp(i.readTime)};var i})}saveNamedQuery(e,t){return KF(e).put({name:(r=t).name,readTime:Np(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ZF(n){return Ni(n,"bundles")}function KF(n){return Ni(n,"namedQueries")}class iT{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new iT(e,t.uid||"")}getOverlay(e,t){return ow(e).get(qF(this.userId,t)).next(r=>r?s1(this.serializer,r):null)}getOverlays(e,t){const r=xl();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new YM(t,c);i.push(this.we(e,f))}),ae.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ls(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(ow(e).J("collectionPathOverlayIndex",f))}),ae.waitFor(a)}getOverlaysForCollection(e,t,r){const i=xl(),a=ls(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ow(e).j("collectionPathOverlayIndex",c).next(f=>{for(const y of f){const w=s1(this.serializer,y);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=xl();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ow(e).X({index:"collectionGroupOverlayIndex",range:f},(y,w,D)=>{const S=s1(this.serializer,w);a.size()<i||S.largestBatchId===c?(a.set(S.getKey(),S),c=S.largestBatchId):D.done()}).next(()=>a)}we(e,t){return ow(e).put(function(r,i,a){const[c,f,y]=qF(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:y,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:iw(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function ow(n){return Ni(n,"documentOverlays")}class Fp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),j0(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(td(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?BO(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ht()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),rt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function s$(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function YF(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=s$(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Fp.Ve=new Fp;class o${constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=YF(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=YF(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class a${constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class u${constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class aw{constructor(){this.je=new o$,this.ze=new a$(this.je),this.We=new u$(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Lp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Lp(this.indexId,this.documentKey,this.arrayValue,r)}}function Uh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=QF(n.arrayValue,e.arrayValue),0!==t?t:(t=QF(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function QF(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class l${constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){It(e.collectionGroup===this.collectionId);const t=RM(e);if(void 0!==t&&!this.en(t))return!1;const r=Dp(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++a}for(;a<r.length;++a){const f=r[a];if(c>=this.Ye.length||!this.sn(this.Ye[c++],f))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function JF(n){var e,t;if(It(n instanceof mn||n instanceof Un),n instanceof mn){if(n instanceof JO){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>mn.create(n.field,"==",a)))||[];return Un.create(i,"or")}return n}const r=n.filters.map(i=>JF(i));return Un.create(r,n.op)}function c$(n){if(0===n.getFilters().length)return[];const e=u1(JF(n));return It(XF(e)),o1(e)||a1(e)?[e]:e.getFilters()}function o1(n){return n instanceof mn}function a1(n){return n instanceof Un&&UM(n)}function XF(n){return o1(n)||a1(n)||function(e){if(e instanceof Un&&VM(e)){for(const t of e.getFilters())if(!o1(t)&&!a1(t))return!1;return!0}return!1}(n)}function u1(n){if(It(n instanceof mn||n instanceof Un),n instanceof mn)return n;if(1===n.filters.length)return u1(n.filters[0]);const e=n.filters.map(r=>u1(r));let t=Un.create(e,n.op);return t=sT(t),XF(t)?t:(It(t instanceof Un),It(ry(t)),It(t.filters.length>1),t.filters.reduce((r,i)=>l1(r,i)))}function l1(n,e){let t;return It(n instanceof mn||n instanceof Un),It(e instanceof mn||e instanceof Un),t=n instanceof mn?e instanceof mn?Un.create([n,e],"and"):eL(n,e):e instanceof mn?eL(e,n):function(r,i){if(It(r.filters.length>0&&i.filters.length>0),ry(r)&&ry(i))return KO(r,i.getFilters());const a=VM(r)?r:i,c=VM(r)?i:r,f=a.filters.map(y=>l1(y,c));return Un.create(f,"or")}(n,e),sT(t)}function eL(n,e){if(ry(e))return KO(e,n.getFilters());{const t=e.filters.map(r=>l1(n,r));return Un.create(t,"or")}}function sT(n){if(It(n instanceof mn||n instanceof Un),n instanceof mn)return n;const e=n.getFilters();if(1===e.length)return sT(e[0]);if(WO(n))return n;const t=e.map(i=>sT(i)),r=[];return t.forEach(i=>{i instanceof mn?r.push(i):i instanceof Un&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Un.create(r,n.op)}class d${constructor(){this.rn=new c1}addToCollectionParentIndex(e,t){return this.rn.add(t),ae.resolve()}getCollectionParents(e,t){return ae.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ae.resolve()}deleteFieldIndex(e,t){return ae.resolve()}getDocumentsMatchingTarget(e,t){return ae.resolve(null)}getIndexType(e,t){return ae.resolve(0)}getFieldIndexes(e,t){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,t){return ae.resolve(No.min())}getMinOffsetFromCollectionGroup(e,t){return ae.resolve(No.min())}updateCollectionGroup(e,t,r){return ae.resolve()}updateIndexEntries(e,t){return ae.resolve()}}class c1{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(En.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(En.comparator)).toArray()}}const oT=new Uint8Array(0);class h${constructor(e,t){this.user=e,this.databaseId=t,this.on=new c1,this.un=new rd(r=>xp(r),(r,i)=>q0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:ls(i)};return tL(e).put(a)}return ae.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[wO(t),""],!1,!0);return tL(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Al(c.parent))}return r})}addFieldIndex(e,t){const r=aT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=lw(e);return a.next(f=>{c.put(WF(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=aT(e),i=lw(e),a=uw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=uw(e);let i=!0;const a=new Map;return ae.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=nn();const f=[];return ae.forEach(a,(y,w)=>{var D;Ue("IndexedDbIndexManager",`Using index ${D=y,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(We=>`${We.fieldPath}:${We.kind}`).join(",")}`} to execute ${xp(t)}`);const S=function(We,Xe){const Ut=RM(Xe);if(void 0===Ut)return null;for(const Bt of KI(We,Ut.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(w,y),B=function(We,Xe){const Ut=new Map;for(const Bt of Dp(Xe))for(const _n of KI(We,Bt.fieldPath))switch(_n.op){case"==":case"in":Ut.set(Bt.fieldPath.canonicalString(),_n.value);break;case"not-in":case"!=":return Ut.set(Bt.fieldPath.canonicalString(),_n.value),Array.from(Ut.values())}return null}(w,y),H=function(We,Xe){const Ut=[];let Bt=!0;for(const _n of Dp(Xe)){const Dr=0===_n.kind?XO(We,_n.fieldPath,We.startAt):eF(We,_n.fieldPath,We.startAt);Ut.push(Dr.value),Bt&&(Bt=Dr.inclusive)}return new Lh(Ut,Bt)}(w,y),K=function(We,Xe){const Ut=[];let Bt=!0;for(const _n of Dp(Xe)){const Dr=0===_n.kind?eF(We,_n.fieldPath,We.endAt):XO(We,_n.fieldPath,We.endAt);Ut.push(Dr.value),Bt&&(Bt=Dr.inclusive)}return new Lh(Ut,Bt)}(w,y),se=this.hn(y,w,H),ce=this.hn(y,w,K),Be=this.ln(y,w,B),Qe=this.fn(y.indexId,S,se,H.inclusive,ce,K.inclusive,Be);return ae.forEach(Qe,We=>r.H(We,t.limit).next(Xe=>{Xe.forEach(Ut=>{const Bt=rt.fromSegments(Ut.documentKey);c.has(Bt)||(c=c.add(Bt),f.push(Bt))})}))}).next(()=>f)}return ae.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:c$(Un.create(e.filters,"and")).map(r=>jM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,f){const y=(null!=t?t.length:1)*Math.max(r.length,a.length),w=y/(null!=t?t.length:1),D=[];for(let S=0;S<y;++S){const B=t?this.dn(t[S/w]):oT,H=this.wn(e,B,r[S%w],i),K=this._n(e,B,a[S%w],c),se=f.map(ce=>this.wn(e,B,ce,!0));D.push(...this.createRange(H,K,se))}return D}wn(e,t,r,i){const a=new Lp(e,rt.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new Lp(e,rt.empty(),t,r);return i?a.Je():a}an(e,t){const r=new l$(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ae.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let y=new cr(Ur.comparator),w=!1;for(const D of f.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:y=y.add(S.field));for(const D of f.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new aw;for(const i of Dp(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);Fp.Ve._e(a,c)}return r.Qe()}dn(e){const t=new aw;return Fp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new aw;return Fp.Ve._e(Sp(this.databaseId,t),r.He(function(i){const a=Dp(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new aw);let a=0;for(const c of Dp(e)){const f=r[a++];for(const y of i)if(this.yn(t,c.fieldPath)&&G0(f))i=this.pn(i,c,f);else{const w=y.He(c.kind);Fp.Ve._e(f,w)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const y=new aw;y.seed(f.Qe()),Fp.Ve._e(c,y.He(t.kind)),a.push(y)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof mn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=aT(e),i=lw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ae.forEach(a,f=>i.get([f.indexId,this.uid]).next(y=>{c.push(function(w,D){const S=D?new V0(D.sequenceNumber,new No(kp(D.readTime),new rt(Al(D.documentKey)),D.largestBatchId)):V0.empty(),B=w.fields.map(([H,K])=>new UI(Ur.fromServerFormat(H),K));return new VI(w.indexId,w.collectionGroup,B,S)}(f,y))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Zt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=aT(e),a=lw(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ae.forEach(f,y=>a.put(WF(y.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ae.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ae.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ae.forEach(f,y=>this.En(e,i,y).next(w=>{const D=this.An(a,y);return w.isEqual(D)?ae.resolve():this.vn(e,a,y,w,D)}))))})}Rn(e,t,r,i){return uw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return uw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=uw(e);let a=new cr(Uh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{a=a.add(new Lp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new cr(Uh);const i=this.mn(t,e);if(null==i)return r;const a=RM(t);if(null!=a){const c=e.data.field(a.fieldPath);if(G0(c))for(const f of c.arrayValue.values||[])r=r.add(new Lp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new Lp(t.indexId,e.key,oT,i));return r}vn(e,t,r,i,a){Ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,y,w,D,S){const B=f.getIterator(),H=y.getIterator();let K=ey(B),se=ey(H);for(;K||se;){let ce=!1,Be=!1;if(K&&se){const Qe=w(K,se);Qe<0?Be=!0:Qe>0&&(ce=!0)}else null!=K?Be=!0:ce=!0;ce?(D(se),se=ey(H)):Be?(S(K),K=ey(B)):(K=ey(B),se=ey(H))}}(i,a,Uh,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),ae.waitFor(c)}Tn(e){let t=1;return lw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Uh(c,f)).filter((c,f,y)=>!f||0!==Uh(c,y[f-1]));const i=[];i.push(e);for(const c of r){const f=Uh(c,e),y=Uh(c,t);if(0===f)i[0]=e.Je();else if(f>0&&y<0)i.push(c),i.push(c.Je());else if(y>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,oT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,oT,[]]))}return a}bn(e,t){return Uh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nL)}getMinOffset(e,t){return ae.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ht())).next(nL)}}function tL(n){return Ni(n,"collectionParents")}function uw(n){return Ni(n,"indexEntries")}function aT(n){return Ni(n,"indexConfiguration")}function lw(n){return Ni(n,"indexState")}function nL(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;PM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new No(e.readTime,e.documentKey,t)}const rL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function iL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const y=r.X({range:c},(D,S,B)=>(f++,B.delete()));a.push(y.next(()=>{It(1===f)}));const w=[];for(const D of t.mutations){const S=xO(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return ae.waitFor(a).next(()=>w)}function uT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class lT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){It(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new lT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=dy(e),c=Bh(e);return c.add({}).next(f=>{It("number"==typeof f);const y=new ZM(f,t,r,i),w=function(B,H,K){const se=K.baseMutations.map(Be=>iw(B.fe,Be)),ce=K.mutations.map(Be=>iw(B.fe,Be));return{userId:H,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:se,mutations:ce}}(this.serializer,this.userId,y),D=[];let S=new cr((B,H)=>Zt(B.canonicalString(),H.canonicalString()));for(const B of i){const H=xO(this.userId,B.key.path,f);S=S.add(B.key.path.popLast()),D.push(c.put(w)),D.push(a.put(H,XB))}return S.forEach(B=>{D.push(this.indexManager.addToCollectionParentIndex(e,B))}),e.addOnCommittedListener(()=>{this.Vn[f]=y.keys()}),ae.waitFor(D).next(()=>y)})}lookupMutationBatch(e,t){return Bh(e).get(t).next(r=>r?(It(r.userId===this.userId),Op(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ae.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Bh(e).X({index:"userMutationsIndex",range:i},(c,f,y)=>{f.userId===this.userId&&(It(f.batchId>=r),a=Op(this.serializer,f)),y.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Bh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Op(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=jI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return dy(e).X({range:i},(c,f,y)=>{const[w,D,S]=c,B=Al(D);if(w===this.userId&&t.path.isEqual(B))return Bh(e).get(S).next(H=>{if(!H)throw ht();It(H.userId===this.userId),a.push(Op(this.serializer,H))});y.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Zt);const i=[];return t.forEach(a=>{const c=jI(this.userId,a.path),f=IDBKeyRange.lowerBound(c),y=dy(e).X({range:f},(w,D,S)=>{const[B,H,K]=w,se=Al(H);B===this.userId&&a.path.isEqual(se)?r=r.add(K):S.done()});i.push(y)}),ae.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=jI(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new cr(Zt);return dy(e).X({range:c},(y,w,D)=>{const[S,B,H]=y,K=Al(B);S===this.userId&&r.isPrefixOf(K)?K.length===i&&(f=f.add(H)):D.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Bh(e).get(a).next(c=>{if(null===c)throw ht();It(c.userId===this.userId),r.push(Op(this.serializer,c))}))}),ae.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return iL(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ae.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ae.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return dy(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const y=Al(a[1]);i.push(y)}else f.done()}).next(()=>{It(0===i.length)})})}containsKey(e,t){return sL(e,this.userId,t)}xn(e){return oL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sL(n,e,t){const r=jI(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return dy(n).X({range:a,Y:!0},(f,y,w)=>{const[D,S,B]=f;D===e&&S===i&&(c=!0),w.done()}).next(()=>c)}function Bh(n){return Ni(n,"mutations")}function dy(n){return Ni(n,"documentMutations")}function oL(n){return Ni(n,"mutationQueues")}class Vp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Vp(0)}static Mn(){return new Vp(-1)}}class f${constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Vp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hy(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return hy(e).X((c,f)=>{const y=sw(f);y.sequenceNumber<=t&&null===r.get(y.targetId)&&(i++,a.push(this.removeTargetData(e,y)))}).next(()=>ae.waitFor(a)).next(()=>i)}forEachTarget(e,t){return hy(e).X((r,i)=>{const a=sw(i);t(a)})}$n(e){return aL(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}On(e,t){return aL(e).put("targetGlobalKey",t)}Fn(e,t){return hy(e).put(zF(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=xp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return hy(e).X({range:i,index:"queryTargetsIndex"},(c,f,y)=>{const w=sw(f);q0(t,w.target)&&(a=w,y.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=jh(e);return t.forEach(c=>{const f=ls(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ae.waitFor(i)}removeMatchingKeys(e,t,r){const i=jh(e);return ae.forEach(t,a=>{const c=ls(a.path);return ae.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=jh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=jh(e);let a=nn();return i.X({range:r,Y:!0},(c,f,y)=>{const w=Al(c[1]),D=new rt(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=ls(t.path),i=IDBKeyRange.bound([r],[wO(r)],!1,!0);let a=0;return jh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],y,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}le(e,t){return hy(e).get(t).next(r=>r?sw(r):null)}}function hy(n){return Ni(n,"targets")}function aL(n){return Ni(n,"targetGlobal")}function jh(n){return Ni(n,"targetDocuments")}function uL([n,e],[t,r]){const i=Zt(n,t);return 0===i?Zt(e,r):i}class p${constructor(e){this.Ln=e,this.buffer=new cr(uL),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Mh(r)?Ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield xh(r)}yield t.Qn(3e5)}))}}class g${constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ae.resolve(ko.ct);const r=new p$(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(rL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rL):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,f,y,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,y=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),xM()<=vl.in.DEBUG&&Ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(y-f)+`ms\n\tRemoved ${S} documents in `+(w-y)+`ms\nTotal Duration: ${w-D}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class m${constructor(e,t){this.db=e,this.garbageCollector=function cL(n,e){return new g$(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return cT(e,r)}removeReference(e,t,r){return cT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return cT(e,t)}Xn(e,t){return function(r,i){let a=!1;return oL(r).Z(c=>sL(r,c,i).next(f=>(f&&(a=!0),ae.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,f)=>{if(f<=t){const y=this.Xn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Dt.min()),jh(e).delete([0,ls(c.path)])))});i.push(y)}}).next(()=>ae.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return cT(e,t)}Yn(e,t){const r=jh(e);let i,a=ko.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:y,sequenceNumber:w})=>{0===c?(a!==ko.ct&&t(new rt(Al(i)),a),a=w,i=y):a=ko.ct}).next(()=>{a!==ko.ct&&t(new rt(Al(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function cT(n,e){return jh(n).put((r=n.currentSequenceNumber,{targetId:0,path:ls(e.path),sequenceNumber:r}));var r}class dL{constructor(){this.changes=new rd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ae.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class y${constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Up(e).put(r)}removeEntry(e,t,r){return Up(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],rT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=dr.newInvalidDocument(t);return Up(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(cw(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:dr.newInvalidDocument(t)};return Up(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(cw(t))},(i,a)=>{r={document:this.ts(t,a),size:uT(a)}}).next(()=>r)}getEntries(e,t){let r=no();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=no(),i=new tr(rt.comparator);return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);r=r.insert(a,f),i=i.insert(a,uT(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ae.resolve();let i=new cr(gL);t.forEach(y=>i=i.add(y));const a=IDBKeyRange.bound(cw(i.first()),cw(i.last())),c=i.getIterator();let f=c.getNext();return Up(e).X({index:"documentKeyIndex",range:a},(y,w,D)=>{const S=rt.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&gL(f,S)<0;)r(f,null),f=c.getNext();f&&f.isEqual(S)&&(r(f,w),f=c.hasNext()?c.getNext():null),f?D.G(cw(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),rT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Up(e).j(IDBKeyRange.bound(c,f,!0)).next(y=>{let w=no();for(const D of y){const S=this.ts(rt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(Z0(t,S)||i.has(S.key))&&(w=w.insert(S.key,S))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=no();const c=pL(t,r),f=pL(t,No.max());return Up(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(y,w,D)=>{const S=this.ts(rt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new _$(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fL(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Zn(e,t){return fL(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function r$(n,e){let t;if(e.document)t=LF(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=kp(e.noDocument.readTime);t=dr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=rt.fromSegments(e.unknownDocument.path),i=kp(e.unknownDocument.version);t=dr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return dr.newInvalidDocument(e)}}function hL(n){return new y$(n)}class _$ extends dL{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new rd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new cr((a,c)=>Zt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),c.isValidDocument()){const y=GF(this.os.serializer,c);i=i.add(a.path.popLast()),r+=uT(y)-f.size,t.push(this.os.addEntry(e,a,y))}else if(r-=f.size,this.trackRemovals){const y=GF(this.os.serializer,c.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,a,y))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ae.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function fL(n){return Ni(n,"remoteDocumentGlobal")}function Up(n){return Ni(n,"remoteDocumentsV14")}function cw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function pL(n,e){const t=e.documentKey.path.toArray();return[n,rT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function gL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Zt(t[a],r[a]),i)return i;return i=Zt(t.length,r.length),i||(i=Zt(t[t.length-2],r[r.length-2]),i||Zt(t[t.length-1],r[r.length-1]))}class v${constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class mL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&J0(r.mutation,i,to.empty(),Er.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=xl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=K0();return a.forEach((f,y)=>{c=c.insert(f,y.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=xl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=no();const c=Y0(),f=Y0();return t.forEach((y,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof id)?a=a.insert(w.key,w):void 0!==D?(c.set(w.key,D.mutation.getFieldMask()),J0(D.mutation,w,D.mutation.getFieldMask(),Er.now())):c.set(w.key,to.empty())}),this.recalculateAndSaveOverlays(e,a).next(y=>(y.forEach((w,D)=>c.set(w,D)),t.forEach((w,D)=>{var S;return f.set(w,new v$(D,null!==(S=c.get(w))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Y0();let i=new tr((c,f)=>c-f),a=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(y=>{const w=t.get(y);if(null===w)return;let D=r.get(y)||to.empty();D=f.applyToLocalView(w,D),r.set(y,D);const S=(i.get(f.batchId)||nn()).add(y);i=i.insert(f.batchId,S)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const y=f.getNext(),w=y.key,D=y.value,S=uF();D.forEach(B=>{if(!a.has(B)){const H=yF(t.get(B),r.get(B));null!==H&&S.set(B,H),a=a.add(B)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,S))}return ae.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):HM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ae.resolve(xl());let f=-1,y=a;return c.next(w=>ae.forEach(w,(D,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(D)?ae.resolve():this.remoteDocumentCache.getEntry(e,D).next(B=>{y=y.insert(D,B)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,y,w,nn())).next(D=>({batchId:f,changes:aF(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=K0();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=K0();return this.indexManager.getCollectionParents(e,i).next(c=>ae.forEach(c,f=>{const y=(w=t,D=f.child(i),new nd(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,y,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,y)=>{const w=y.getKey();null===a.get(w)&&(a=a.insert(w,dr.newInvalidDocument(w)))});let c=K0();return a.forEach((f,y)=>{const w=i.get(f);void 0!==w&&J0(w.mutation,y,to.empty(),Er.now()),Z0(t,y)&&(c=c.insert(f,y))}),c})}}class w${constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ae.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),ae.resolve()}getNamedQuery(e,t){return ae.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:i1(r.bundledQuery),readTime:Zr(r.readTime)}),ae.resolve();var r}}class E${constructor(){this.overlays=new tr(rt.comparator),this.ls=new Map}getOverlay(e,t){return ae.resolve(this.overlays.get(t))}getOverlays(e,t){const r=xl();return ae.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ae.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ae.resolve()}getOverlaysForCollection(e,t,r){const i=xl(),a=t.length+1,c=new rt(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const y=f.getNext().value,w=y.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&y.largestBatchId>r&&i.set(y.getKey(),y)}return ae.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new tr((w,D)=>w-D);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=xl(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const f=xl(),y=a.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((w,D)=>f.set(w,D)),!(f.size()>=i)););return ae.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new YM(t,r));let a=this.ls.get(t);void 0===a&&(a=nn(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class d1{constructor(){this.fs=new cr(ki.ds),this.ws=new cr(ki._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ki(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ki(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new rt(new En([])),r=new ki(t,e),i=new ki(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rt(new En([])),r=new ki(t,e),i=new ki(t,e+1);let a=nn();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new ki(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rt.comparator(e.key,t.key)||Zt(e.As,t.As)}static _s(e,t){return Zt(e.As,t.As)||rt.comparator(e.key,t.key)}}class b${constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new cr(ki.ds)}checkEmpty(e){return ae.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new ZM(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new ki(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ae.resolve(c)}lookupMutationBatch(e,t){return ae.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ae.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);a.push(f)}),ae.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Zt);return t.forEach(i=>{const a=new ki(i,0),c=new ki(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.As)})}),ae.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;rt.isDocumentKey(a)||(a=a.child(""));const c=new ki(new rt(a),0);let f=new cr(Zt);return this.Rs.forEachWhile(y=>{const w=y.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(y.As)),!0)},c),ae.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){It(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ae.forEach(t.mutations,i=>{const a=new ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ki(t,0),i=this.Rs.firstAfterOrEqual(r);return ae.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ae.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class C${constructor(e){this.Ds=e,this.docs=new tr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ae.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let r=no();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),ae.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=no();const c=t.path,f=new rt(c.child("")),y=this.docs.getIteratorFrom(f);for(;y.hasNext();){const{key:w,value:{document:D}}=y.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||PM(bO(D),r)<=0||(i.has(D.key)||Z0(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return ae.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ht()}Cs(e,t){return ae.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new I$(this)}getSize(e){return ae.resolve(this.size)}}class I$ extends dL{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ae.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class T${constructor(e){this.persistence=e,this.xs=new rd(t=>xp(t),q0),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new d1,this.targetCount=0,this.Ms=Vp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ae.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Vp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ae.resolve()}updateTargetData(e,t){return this.Fn(t),ae.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ae.waitFor(a).next(()=>i)}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ae.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ae.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ae.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ae.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ae.resolve(r)}containsKey(e,t){return ae.resolve(this.ks.containsKey(t))}}class h1{constructor(e,t){this.$s={},this.overlays={},this.Os=new ko(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new T$(this),this.indexManager=new d$,this.remoteDocumentCache=new C$(r=>this.referenceDelegate.Ls(r)),this.serializer=new HF(t),this.qs=new w$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E$,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new b$(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("MemoryPersistence","Starting transaction:",e);const i=new D$(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ae.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class D$ extends IO{constructor(e){super(),this.currentSequenceNumber=e}}class dT{constructor(e){this.persistence=e,this.Qs=new d1,this.js=null}static zs(e){return new dT(e)}get Ws(){if(this.js)return this.js;throw ht()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ae.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ae.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ae.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.Ws,r=>{const i=rt.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ae.or([()=>ae.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class A${constructor(e){this.serializer=e}O(e,t,r,i){const a=new BI("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SO,{unique:!0}),f.createObjectStore("documentMutations"),yL(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ae.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),yL(e)),c=c.next(()=>function(f){const y=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,y){return y.store("mutations").j().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SO,{unique:!0});const D=y.store("mutations"),S=w.map(B=>D.put(B));return ae.waitFor(S)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const y=f.createObjectStore("documentOverlays",{keyPath:dj});y.createIndex("collectionPathOverlayIndex",hj,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",fj,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const y=f.createObjectStore("remoteDocumentsV14",{keyPath:ej});y.createIndex("documentKeyIndex",tj),y.createIndex("collectionGroupIndex",nj)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:aj}).createIndex("sequenceNumberIndex",uj,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:lj}).createIndex("documentKeyIndex",cj,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=uT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ae.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ae.forEach(f,y=>{It(y.userId===a.userId);const w=Op(this.serializer,y);return iL(e,a.userId,w).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const y=new En(c),w=[0,ls(y)];a.push(t.get(w).next(D=>D?ae.resolve():t.put({targetId:0,path:ls(y),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ae.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:oj});const r=t.store("collectionParents"),i=new c1,a=c=>{if(i.add(c)){const f=c.lastSegment(),y=c.popLast();return r.put({collectionId:f,parent:ls(y)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const y=new En(c);return a(y.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,y],w)=>{const D=Al(f);return a(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=sw(i),c=zF(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),y=(w=c,w.document?new rt(En.fromString(w.document.name).popFirst(5)):w.noDocument?rt.fromSegments(w.noDocument.path):w.unknownDocument?rt.fromSegments(w.unknownDocument.path):ht()).path.toArray();var w;const D={prefixPath:y.slice(0,y.length-2),collectionGroup:y[y.length-2],documentId:y[y.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(D))}).next(()=>ae.waitFor(i))}si(e,t){const r=t.store("mutations"),i=hL(this.serializer),a=new h1(dT.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(y=>{var w;let D=null!==(w=f.get(y.userId))&&void 0!==w?w:nn();Op(this.serializer,y).keys().forEach(S=>D=D.add(S)),f.set(y.userId,D)}),ae.forEach(f,(y,w)=>{const D=new Pi(w),S=iT.de(this.serializer,D),B=a.getIndexManager(D),H=lT.de(D,this.serializer,B,a.referenceDelegate);return new mL(i,H,S,B).recalculateAndSaveOverlaysForDocumentKeys(new OM(t,ko.ct),y).next()})})}}function yL(n){n.createObjectStore("targetDocuments",{keyPath:ij}).createIndex("documentTargetsIndex",sj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rj,{unique:!0}),n.createObjectStore("targetGlobal")}const f1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class p1{constructor(e,t,r,i,a,c,f,y,w,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=f,this.ri=w,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=B=>Promise.resolve(),!p1.D())throw new Fe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m$(this,i),this.di=t+"main",this.serializer=new HF(y),this.wi=new _u(this.di,this.ui,new A$(this.serializer)),this.Bs=new f$(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hL(this.serializer),this.qs=new i$,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&Wr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(ge.FAILED_PRECONDITION,f1);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ko(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>fT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Mh(e))return Ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return dw(e).get("owner").next(t=>ae.resolve(this.Ri(t)))}Pi(e){return fT(e).delete(this.clientId)}bi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ni(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),f=a.filter(y=>-1===c.indexOf(y));return ae.forEach(f,y=>i.delete(y.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ae.resolve(!0):dw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Fe(ge.FAILED_PRECONDITION,f1);return!1}}return!(!this.networkEnabled||!this.inForeground)||fT(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new OM(t,ko.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>fT(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return lT.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new h$(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return iT.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?gj:14===c?PO:13===c?RO:12===c?pj:11===c?MO:void ht();var c;let f;return this.wi.runTransaction(e,i,a,y=>(f=new OM(y,this.Os?this.Os.next():ko.ct),"readwrite-primary"===t?this.Ti(f).next(w=>!!w||this.Ei(f)).next(w=>{if(!w)throw Wr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Fe(ge.FAILED_PRECONDITION,CO);return r(f)}).next(w=>this.vi(f).next(()=>w)):this.Oi(f).next(()=>r(f)))).then(y=>(f.raiseOnCommittedEvent(),y))}Oi(e){return dw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(ge.FAILED_PRECONDITION,f1)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dw(e).put("owner",t)}static D(){return _u.D()}Ai(e){const t=dw(e);return t.get("owner").next(r=>this.Ri(r)?(Ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ae.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Xt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Wr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dw(n){return Ni(n,"owner")}function fT(n){return Ni(n,"clientMetadata")}function g1(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class m1{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=nn(),i=nn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new m1(e,t.fromCache,r,i)}}class _L{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(nF(t))return ae.resolve(null);let r=Rs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=QI(t,null,"F"),r=Rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=nn(...a);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(y=>{const w=this.ji(t,f);return this.zi(t,w,c,y.readTime)?this.Ki(e,QI(t,null,"F")):this.Wi(e,w,t,y)}))})))}Gi(e,t,r,i){return nF(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(xM()<=vl.in.DEBUG&&Ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zM(t)),this.Wi(e,c,t,EO(i,-1)))})}ji(e,t){let r=new cr(sF(e));return t.forEach((i,a)=>{Z0(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return xM()<=vl.in.DEBUG&&Ue("QueryEngine","Using full collection scan to execute query:",zM(t)),this.Ui.getDocumentsMatchingQuery(e,t,No.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class S${constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new tr(Zt),this.Yi=new rd(a=>xp(a),q0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mL(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function vL(n,e,t,r){return new S$(n,e,t,r)}function wL(n,e){return y1.apply(this,arguments)}function y1(){return y1=(0,fe.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let y=nn();for(const w of i){c.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}for(const w of a){f.push(w.batchId);for(const D of w.mutations)y=y.add(D.key)}return t.localDocuments.getDocuments(r,y).next(w=>({er:w,removedBatchIds:c,addedBatchIds:f}))})})}),y1.apply(this,arguments)}function x$(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,y,w){const D=y.batch,S=D.keys();let B=ae.resolve();return S.forEach(H=>{B=B.next(()=>w.getEntry(f,H)).next(K=>{const se=y.docVersions.get(H);It(null!==se),K.version.compareTo(se)<0&&(D.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),w.addEntry(K)))})}),B.next(()=>c.mutationQueue.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=nn();for(let y=0;y<c.mutationResults.length;++y)c.mutationResults[y].transformResults.length>0&&(f=f.add(c.batch.mutations[y].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function EL(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function M$(n,e){const t=st(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((D,S)=>{const B=i.get(S);if(!B)return;f.push(t.Bs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,D.addedDocuments,S)));let H=B.withSequenceNumber(a.currentSequenceNumber);var K,se,ce;null!==e.targetMismatches.get(S)?H=H.withResumeToken(vi.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):D.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(D.resumeToken,r)),i=i.insert(S,H),se=H,ce=D,(0===(K=B).resumeToken.approximateByteSize()||se.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||ce.addedDocuments.size+ce.modifiedDocuments.size+ce.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,H))});let y=no(),w=nn();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),f.push(bL(a,c,e.documentUpdates).next(D=>{y=D.nr,w=D.sr})),!r.isEqual(Dt.min())){const D=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(D)}return ae.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,y,w)).next(()=>y)}).then(a=>(t.Ji=i,a))}function bL(n,e,t){let r=nn(),i=nn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=no();return t.forEach((f,y)=>{const w=a.get(f);y.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),y.isNoDocument()&&y.version.isEqual(Dt.min())?(e.removeEntry(f,y.readTime),c=c.insert(f,y)):!w.isValidDocument()||y.version.compareTo(w.version)>0||0===y.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(y),c=c.insert(f,y)):Ue("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",y.version)}),{nr:c,sr:i}})}function R$(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fy(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ae.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new sd(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function py(n,e,t){return _1.apply(this,arguments)}function _1(){return _1=(0,fe.Z)(function*(n,e,t){const r=st(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Mh(c))throw c;Ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),_1.apply(this,arguments)}function pT(n,e,t){const r=st(n);let i=Dt.min(),a=nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,y,w){const D=st(f),S=D.Yi.get(w);return void 0!==S?ae.resolve(D.Ji.get(S)):D.Bs.getTargetData(y,w)}(r,c,Rs(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(y=>{a=y})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Dt.min(),t?a:nn())).next(f=>(TL(r,iF(e),f),{documents:f,ir:a})))}function CL(n,e){const t=st(n),r=st(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function IL(n,e){const t=st(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,EO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(TL(t,e,i),i))}function TL(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function v1(){return v1=(0,fe.Z)(function*(n,e,t,r){const i=st(n);let a=nn(),c=no();for(const w of t){const D=e.rr(w.metadata.name);w.document&&(a=a.add(D));const S=e.ur(w);S.setReadTime(e.cr(w.metadata.readTime)),c=c.insert(D,S)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),y=yield fy(i,(w=r,Rs(iy(En.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>bL(w,f,c).next(D=>(f.apply(w),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(w,y.targetId).next(()=>i.Bs.addMatchingKeys(w,a,y.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.nr,D.sr)).next(()=>D.nr)))}),v1.apply(this,arguments)}function N$(n,e){return w1.apply(this,arguments)}function w1(){return w1=(0,fe.Z)(function*(n,e,t=nn()){const r=yield fy(n,Rs(i1(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Zr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(vi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),w1.apply(this,arguments)}function DL(n,e){return`firestore_clients_${n}_${e}`}function AL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function E1(n,e){return`firestore_targets_${n}_${e}`}class gT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Fe(i.error.code,i.error.message))),c?new gT(e,t,i.state,a):(Wr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Fe(r.error.code,r.error.message))),a?new hw(e,r.state,i):(Wr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=qM();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=DO(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new mT(e,a):(Wr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class b1{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new b1(t.clientId,t.onlineState):(Wr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class C1{constructor(){this.activeTargetIds=qM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class I1{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new tr(Zt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=DL(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new C1),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(DL(e.persistenceKey,i));if(a){const c=mT.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(E1(this.persistenceKey,e));if(r){const i=hw.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(E1(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ue("SharedClientState","READ",e,t),t}setItem(e,t){Ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Wr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=ko.ct;if(null!=a)try{const f=JSON.parse(a);It("number"==typeof f),c=f}catch(f){Wr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==ko.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new gT(this.currentUser,e,t,r),a=AL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=AL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=E1(this.persistenceKey,e),a=new hw(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return mT.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return gT.ar(new Pi(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return hw.ar(i,t)}br(e){return b1.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],f=[];return a.forEach(y=>{i.has(y)||c.push(y)}),i.forEach(y=>{a.has(y)||f.push(y)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=qM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class SL{constructor(){this.Hr=new C1,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new C1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class k${Yr(e){}shutdown(){}}class xL{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let yT=null;function T1(){return null===yT?yT=268435456+Math.round(2147483648*Math.random()):yT++,"0x"+yT.toString(16)}const O$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class F${constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ds="WebChannelConnection";class L$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=T1(),f=this.To(e,t);Ue("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const y={};return this.Eo(y,i,a),this.Ao(e,f,y,r).then(w=>(Ue("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw _a("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",r),w})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${O$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=T1();return new Promise((c,f)=>{const y=new kB;y.setWithCredentials(!0),y.listenOnce(RB.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case SM.NO_ERROR:const D=y.getResponseJson();Ue(ds,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(D)),c(D);break;case SM.TIMEOUT:Ue(ds,`RPC '${e}' ${a} timed out`),f(new Fe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case SM.HTTP_ERROR:const S=y.getStatus();if(Ue(ds,`RPC '${e}' ${a} failed with status:`,S,"response text:",y.getResponseText()),S>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const H=B?.error;if(H&&H.status&&H.message){const K=function(se){const ce=se.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(ce)>=0?ce:ge.UNKNOWN}(H.status);f(new Fe(K,H.message))}else f(new Fe(ge.UNKNOWN,"Server responded with status "+y.getStatus()))}else f(new Fe(ge.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{Ue(ds,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Ue(ds,`RPC '${e}' ${a} sending request:`,i),y.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=T1(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=xB(),f=MB(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(y.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(y.xmlHttpFactory=new NB({})),this.Eo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const D=a.join("");Ue(ds,`Creating RPC '${e}' stream ${i}: ${D}`,y);const S=c.createWebChannel(D,y);let B=!1,H=!1;const K=new F$({ro:ce=>{H?Ue(ds,`Not sending because RPC '${e}' stream ${i} is closed:`,ce):(B||(Ue(ds,`Opening RPC '${e}' stream ${i} transport.`),S.open(),B=!0),Ue(ds,`RPC '${e}' stream ${i} sending:`,ce),S.send(ce))},oo:()=>S.close()}),se=(ce,Be,Qe)=>{ce.listen(Be,We=>{try{Qe(We)}catch(Xe){setTimeout(()=>{throw Xe},0)}})};return se(S,LI.EventType.OPEN,()=>{H||Ue(ds,`RPC '${e}' stream ${i} transport opened.`)}),se(S,LI.EventType.CLOSE,()=>{H||(H=!0,Ue(ds,`RPC '${e}' stream ${i} transport closed`),K.wo())}),se(S,LI.EventType.ERROR,ce=>{H||(H=!0,_a(ds,`RPC '${e}' stream ${i} transport errored:`,ce),K.wo(new Fe(ge.UNAVAILABLE,"The operation could not be completed")))}),se(S,LI.EventType.MESSAGE,ce=>{var Be;if(!H){const Qe=ce.data[0];It(!!Qe);const We=Qe,Xe=We.error||(null===(Be=We[0])||void 0===Be?void 0:Be.error);if(Xe){Ue(ds,`RPC '${e}' stream ${i} received error:`,Xe);const Ut=Xe.status;let Bt=function(Dr){const hs=ni[Dr];if(void 0!==hs)return CF(hs)}(Ut),_n=Xe.message;void 0===Bt&&(Bt=ge.INTERNAL,_n="Unknown error status: "+Ut+" with message "+Xe.message),H=!0,K.wo(new Fe(Bt,_n)),S.close()}else Ue(ds,`RPC '${e}' stream ${i} received:`,Qe),K._o(Qe)}}),se(f,PB.STAT_EVENT,ce=>{ce.stat===gO.PROXY?Ue(ds,`RPC '${e}' stream ${i} detected buffering proxy`):ce.stat===gO.NOPROXY&&Ue(ds,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{K.fo()},0),K}}function ML(){return typeof window<"u"?window:null}function _T(){return typeof document<"u"?document:null}function fw(n){return new Wj(n,!0)}class D1{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class RL{constructor(e,t,r,i,a,c,f,y){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=y,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new D1(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,fe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,fe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Wr(t.toString()),Wr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Fe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,fe.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V$ extends RL{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function Yj(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ht(),i=e.targetChange.targetIds||[],a=function(y,w){return y.useProto3Json?(It(void 0===w||"string"==typeof w),vi.fromBase64String(w||"")):(It(void 0===w||w instanceof Uint8Array),vi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(y){const w=void 0===y.code?ge.UNKNOWN:CF(y.code);return new Fe(w,y.message||"")}(c);t=new SF(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Ml(n,r.document.name),a=Zr(r.document.updateTime),c=r.document.createTime?Zr(r.document.createTime):Dt.min(),f=new Ki({mapValue:{fields:r.document.fields}}),y=dr.newFoundDocument(i,a,c,f);t=new nT(r.targetIds||[],r.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const r=e.documentDelete,i=Ml(n,r.document),a=r.readTime?Zr(r.readTime):Dt.min(),c=dr.newNoDocument(i,a);t=new nT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ml(n,r.document);t=new nT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new jj(i,a);t=new AF(r.targetId,c)}}var y;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Zr(a.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=rw(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=ZI(f)?{documents:VF(i,f)}:{query:r1(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=PF(i,a.resumeToken);const y=XM(i,a.expectedCount);null!==y&&(c.expectedCount=y)}else if(a.snapshotVersion.compareTo(Dt.min())>0){c.readTime=ly(i,a.snapshotVersion.toTimestamp());const y=XM(i,a.expectedCount);null!==y&&(c.expectedCount=y)}return c}(this.serializer,e);const r=function Jj(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=rw(this.serializer),t.removeTarget=e,this.Wo(t)}}class U$ extends RL{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function Qj(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,i){let a=Zr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=Zr(i)),new Lj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.cu(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=rw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>iw(this.serializer,r))};this.Wo(t)}}class B$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Fe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Fe(ge.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Fe(ge.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class $${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Wr(t),this.mu=!1):Ue("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class H${constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,fe.Z)(function*(){var y;$h(c)&&(Ue("RemoteStore","Restarting streams for network reachability change."),yield(y=(0,fe.Z)(function*(w){const D=st(w);D.vu.add(4),yield gy(D),D.bu.set("Unknown"),D.vu.delete(4),yield pw(D)}),function(w){return y.apply(this,arguments)})(c))}))}),this.bu=new $$(r,i)}}function pw(n){return S1.apply(this,arguments)}function S1(){return S1=(0,fe.Z)(function*(n){if($h(n))for(const e of n.Ru)yield e(!0)}),S1.apply(this,arguments)}function gy(n){return x1.apply(this,arguments)}function x1(){return x1=(0,fe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),x1.apply(this,arguments)}function vT(n,e){const t=st(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),P1(t)?R1(t):yy(t).Ko()&&M1(t,e))}function gw(n,e){const t=st(n),r=yy(t);t.Au.delete(e),r.Ko()&&PL(t,e),0===t.Au.size&&(r.Ko()?r.jo():$h(t)&&t.bu.set("Unknown"))}function M1(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yy(n).su(e)}function PL(n,e){n.Vu.qt(e),yy(n).iu(e)}function R1(n){n.Vu=new Hj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),yy(n).start(),n.bu.gu()}function P1(n){return $h(n)&&!yy(n).Uo()&&n.Au.size>0}function $h(n){return 0===st(n).vu.size}function NL(n){n.Vu=void 0}function G$(n){return N1.apply(this,arguments)}function N1(){return N1=(0,fe.Z)(function*(n){n.Au.forEach((e,t)=>{M1(n,e)})}),N1.apply(this,arguments)}function z$(n,e){return k1.apply(this,arguments)}function k1(){return k1=(0,fe.Z)(function*(n,e){NL(n),P1(n)?(n.bu.Iu(e),R1(n)):n.bu.set("Unknown")}),k1.apply(this,arguments)}function q$(n,e,t){return O1.apply(this,arguments)}function O1(){return O1=(0,fe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof SF&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wT(n,r)}else if(e instanceof nT?n.Vu.Ht(e):e instanceof AF?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield EL(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((f,y)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.Au.get(y);w&&i.Au.set(y,w.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,y)=>{const w=i.Au.get(f);if(!w)return;i.Au.set(f,w.withResumeToken(vi.EMPTY_BYTE_STRING,w.snapshotVersion)),PL(i,f);const D=new sd(w.target,f,y,w.sequenceNumber);M1(i,D)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ue("RemoteStore","Failed to raise snapshot:",r),yield wT(n,r)}var r}),O1.apply(this,arguments)}function wT(n,e,t){return F1.apply(this,arguments)}function F1(){return F1=(0,fe.Z)(function*(n,e,t){if(!Mh(e))throw e;n.vu.add(1),yield gy(n),n.bu.set("Offline"),t||(t=()=>EL(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield pw(n)}))}),F1.apply(this,arguments)}function kL(n,e){return e().catch(t=>wT(n,t,e))}function my(n){return L1.apply(this,arguments)}function L1(){return L1=(0,fe.Z)(function*(n){const e=st(n),t=Hh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;W$(e);)try{const i=yield R$(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Z$(e,i)}catch(i){yield wT(e,i)}OL(e)&&FL(e)}),L1.apply(this,arguments)}function W$(n){return $h(n)&&n.Eu.length<10}function Z$(n,e){n.Eu.push(e);const t=Hh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function OL(n){return $h(n)&&!Hh(n).Uo()&&n.Eu.length>0}function FL(n){Hh(n).start()}function K$(n){return V1.apply(this,arguments)}function V1(){return V1=(0,fe.Z)(function*(n){Hh(n).hu()}),V1.apply(this,arguments)}function Y$(n){return U1.apply(this,arguments)}function U1(){return U1=(0,fe.Z)(function*(n){const e=Hh(n);for(const t of n.Eu)e.uu(t.mutations)}),U1.apply(this,arguments)}function Q$(n,e,t){return B1.apply(this,arguments)}function B1(){return B1=(0,fe.Z)(function*(n,e,t){const r=n.Eu.shift(),i=KM.from(r,e,t);yield kL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield my(n)}),B1.apply(this,arguments)}function J$(n,e){return j1.apply(this,arguments)}function j1(){return j1=(0,fe.Z)(function*(n,e){var t;e&&Hh(n).ou&&(yield(t=(0,fe.Z)(function*(r,i){if(bF(a=i.code)&&a!==ge.ABORTED){const c=r.Eu.shift();Hh(r).Qo(),yield kL(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield my(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),OL(n)&&FL(n)}),j1.apply(this,arguments)}function LL(n,e){return $1.apply(this,arguments)}function $1(){return $1=(0,fe.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Ue("RemoteStore","RemoteStore received new credentials");const r=$h(t);t.vu.add(3),yield gy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield pw(t)}),$1.apply(this,arguments)}function H1(n,e){return G1.apply(this,arguments)}function G1(){return G1=(0,fe.Z)(function*(n,e){const t=st(n);e?(t.vu.delete(2),yield pw(t)):e||(t.vu.add(2),yield gy(t),t.bu.set("Unknown"))}),G1.apply(this,arguments)}function yy(n){return n.Su||(n.Su=function(e,t,r){const i=st(e);return i.fu(),new V$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:G$.bind(null,n),ao:z$.bind(null,n),nu:q$.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Su.Qo(),P1(n)?R1(n):n.bu.set("Unknown")):(yield n.Su.stop(),NL(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Hh(n){return n.Du||(n.Du=function(e,t,r){const i=st(e);return i.fu(),new U$(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:K$.bind(null,n),ao:J$.bind(null,n),au:Y$.bind(null,n),cu:Q$.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Du.Qo(),yield my(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ue("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class z1{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new z1(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(n,e){if(Wr("AsyncQueue",`${e}: ${n}`),Mh(n))return new Fe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class vy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=K0(),this.sortedSet=new tr(this.comparator)}static emptySet(e){return new vy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof vy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new vy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class VL{constructor(){this.Cu=new tr(rt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ht():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wy{constructor(e,t,r,i,a,c,f,y,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=y,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new wy(e,t,vy.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&W0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class X${constructor(){this.Nu=void 0,this.listeners=[]}}class e3{constructor(){this.queries=new rd(e=>rF(e),W0),this.onlineState="Unknown",this.ku=new Set}}function q1(n,e){return W1.apply(this,arguments)}function W1(){return W1=(0,fe.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new X$),i)try{a.Nu=yield t.onListen(r)}catch(c){const f=_y(c,`Initialization of query '${zM(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&Y1(t)}),W1.apply(this,arguments)}function Z1(n,e){return K1.apply(this,arguments)}function K1(){return K1=(0,fe.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),K1.apply(this,arguments)}function t3(n,e){const t=st(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&Y1(t)}function n3(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Y1(n){n.ku.forEach(e=>{e.next()})}class Q1{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=wy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class r3{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class UL{constructor(e){this.serializer=e}rr(e){return Ml(this.serializer,e)}ur(e){return e.metadata.exists?LF(this.serializer,e.document,!1):dr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Zr(e)}}class i3{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=BL(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=En.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new UL(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||nn()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function P$(n,e,t,r){return v1.apply(this,arguments)}(e.localStore,new UL(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield N$(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function BL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class jL{constructor(e){this.key=e}}class $L{constructor(e){this.key=e}}class HL{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=nn(),this.mutatedKeys=nn(),this.tc=sF(e),this.ec=new vy(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new VL,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const y="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const B=i.get(D),H=Z0(this.query,S)?S:null,K=!!B&&this.mutatedKeys.has(B.key),se=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let ce=!1;B&&H?B.data.isEqual(H.data)?K!==se&&(r.track({type:3,doc:H}),ce=!0):this.rc(B,H)||(r.track({type:2,doc:H}),ce=!0,(y&&this.tc(H,y)>0||w&&this.tc(H,w)<0)&&(f=!0)):!B&&H?(r.track({type:0,doc:H}),ce=!0):B&&!H&&(r.track({type:1,doc:B}),ce=!0,(y||w)&&(f=!0)),ce&&(H?(c=c.add(H),a=se?a.add(D):a.delete(D)):(c=c.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{ec:c,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((w,D)=>function(S,B){const H=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return H(S)-H(B)}(w.type,D.type)||this.tc(w.doc,D.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,y=f!==this.Xu;return this.Xu=f,0!==a.length||y?{snapshot:new wy(this.query,e.ec,i,a,e.mutatedKeys,0===f,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new VL,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=nn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new $L(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new jL(r))}),t}hc(e){this.Yu=e.ir,this.Zu=nn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return wy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class s3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class o3{constructor(e){this.key=e,this.fc=!1}}class a3{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new rd(f=>rF(f),W0),this._c=new Map,this.mc=new Set,this.gc=new tr(rt.comparator),this.yc=new Map,this.Ic=new d1,this.Tc={},this.Ec=new Map,this.Ac=Vp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function u3(n,e){return J1.apply(this,arguments)}function J1(){return J1=(0,fe.Z)(function*(n,e){const t=ER(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield fy(t.localStore,Rs(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield X1(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&vT(t.remoteStore,c)}return i}),J1.apply(this,arguments)}function X1(n,e,t,r,i){return eR.apply(this,arguments)}function eR(){return eR=(0,fe.Z)(function*(n,e,t,r,i){n.Rc=(S,B,H)=>{return(K=(0,fe.Z)(function*(se,ce,Be,Qe){let We=ce.view.sc(Be);We.zi&&(We=yield pT(se.localStore,ce.query,!1).then(({documents:Bt})=>ce.view.sc(Bt,We)));const Xe=Qe&&Qe.targetChanges.get(ce.targetId),Ut=ce.view.applyChanges(We,se.isPrimaryClient,Xe);return cR(se,ce.targetId,Ut.cc),Ut.snapshot}),function(se,ce,Be,Qe){return K.apply(this,arguments)})(n,S,B,H);var K};const a=yield pT(n.localStore,e,!0),c=new HL(e,a.ir),f=c.sc(a.documents),y=tw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(f,n.isPrimaryClient,y);cR(n,t,w.cc);const D=new s3(e,t,c);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),eR.apply(this,arguments)}function l3(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,fe.Z)(function*(n,e){const t=st(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!W0(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield py(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),gw(t.remoteStore,r.targetId),Ey(t,r.targetId)}).catch(xh))):(Ey(t,r.targetId),yield py(t.localStore,r.targetId,!0))}),tR.apply(this,arguments)}function nR(){return nR=(0,fe.Z)(function*(n,e,t){const r=bR(n);try{const i=yield function(a,c){const f=st(a),y=Er.now(),w=c.reduce((B,H)=>B.add(H.key),nn());let D,S;return f.persistence.runTransaction("Locally write mutations","readwrite",B=>{let H=no(),K=nn();return f.Zi.getEntries(B,w).next(se=>{H=se,H.forEach((ce,Be)=>{Be.isValidDocument()||(K=K.add(ce))})}).next(()=>f.localDocuments.getOverlayedDocuments(B,H)).next(se=>{D=se;const ce=[];for(const Be of c){const Qe=Uj(Be,D.get(Be.key).overlayedDocument);null!=Qe&&ce.push(new id(Be.key,Qe,HO(Qe.value.mapValue),br.exists(!0)))}return f.mutationQueue.addMutationBatch(B,y,ce,c)}).next(se=>{S=se;const ce=se.applyToLocalDocumentSet(D,K);return f.documentOverlayCache.saveOverlays(B,se.batchId,ce)})}).then(()=>({batchId:S.batchId,changes:aF(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let y=a.Tc[a.currentUser.toKey()];y||(y=new tr(Zt)),y=y.insert(c,f),a.Tc[a.currentUser.toKey()]=y}(r,i.batchId,t),yield od(r,i.changes),yield my(r.remoteStore)}catch(i){const a=_y(i,"Failed to persist write");t.reject(a)}}),nR.apply(this,arguments)}function GL(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,fe.Z)(function*(n,e){const t=st(n);try{const r=yield M$(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?It(c.fc):i.removedDocuments.size>0&&(It(c.fc),c.fc=!1))}),yield od(t,r,e)}catch(r){yield xh(r)}}),rR.apply(this,arguments)}function zL(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=st(a);f.onlineState=c;let y=!1;f.queries.forEach((w,D)=>{for(const S of D.listeners)S.Mu(c)&&(y=!0)}),y&&Y1(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function d3(n,e,t){return iR.apply(this,arguments)}function iR(){return iR=(0,fe.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new tr(rt.comparator);c=c.insert(a,dr.newNoDocument(a,Dt.min()));const f=nn().add(a),y=new ew(Dt.min(),new Map,new tr(Zt),c,f);yield GL(r,y),r.gc=r.gc.remove(a),r.yc.delete(e),dR(r)}else yield py(r.localStore,e,!1).then(()=>Ey(r,e,t)).catch(xh)}),iR.apply(this,arguments)}function h3(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,fe.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield x$(t.localStore,e);lR(t,r,null),uR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,i)}catch(i){yield xh(i)}}),sR.apply(this,arguments)}function f3(n,e,t){return oR.apply(this,arguments)}function oR(){return oR=(0,fe.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(a,c){const f=st(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return f.mutationQueue.lookupMutationBatch(y,c).next(D=>(It(null!==D),w=D.keys(),f.mutationQueue.removeMutationBatch(y,D))).next(()=>f.mutationQueue.performConsistencyCheck(y)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(y,w,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>f.localDocuments.getDocuments(y,w))})}(r.localStore,e);lR(r,e,t),uR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,i)}catch(i){yield xh(i)}}),oR.apply(this,arguments)}function aR(){return aR=(0,fe.Z)(function*(n,e){const t=st(n);$h(t.remoteStore)||Ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=st(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=_y(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),aR.apply(this,arguments)}function uR(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function lR(n,e,t){const r=st(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ey(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||qL(n,r)})}function qL(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(gw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),dR(n))}function cR(n,e,t){for(const r of t)r instanceof jL?(n.Ic.addReference(r.key,e),g3(n,r)):r instanceof $L?(Ue("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||qL(n,r.key)):ht()}function g3(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ue("SyncEngine","New document in limbo: "+t),n.mc.add(r),dR(n))}function dR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new rt(En.fromString(e)),r=n.Ac.next();n.yc.set(r,new o3(t)),n.gc=n.gc.insert(t,r),vT(n.remoteStore,new sd(Rs(iy(t.path)),r,"TargetPurposeLimboResolution",ko.ct))}}function od(n,e,t){return hR.apply(this,arguments)}function hR(){return hR=(0,fe.Z)(function*(n,e,t){const r=st(n),i=[],a=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,y)=>{c.push(r.Rc(y,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(y.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=m1.Li(y.targetId,w);a.push(D)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,fe.Z)(function*(y,w){const D=st(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ae.forEach(w,B=>ae.forEach(B.Fi,H=>D.persistence.referenceDelegate.addReference(S,B.targetId,H)).next(()=>ae.forEach(B.Bi,H=>D.persistence.referenceDelegate.removeReference(S,B.targetId,H)))))}catch(S){if(!Mh(S))throw S;Ue("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const B=S.targetId;if(!S.fromCache){const H=D.Ji.get(B),se=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);D.Ji=D.Ji.insert(B,se)}}}),function(y,w){return f.apply(this,arguments)})(r.localStore,a))}),hR.apply(this,arguments)}function m3(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,fe.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Ue("SyncEngine","User change. New user:",e.toKey());const r=yield wL(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Fe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.er)}var i}),fR.apply(this,arguments)}function y3(n,e){const t=st(n),r=t.yc.get(e);if(r&&r.fc)return nn().add(r.key);{let i=nn();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function _3(n,e){return pR.apply(this,arguments)}function pR(){return pR=(0,fe.Z)(function*(n,e){const t=st(n),r=yield pT(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&cR(t,e.targetId,i.cc),i}),pR.apply(this,arguments)}function v3(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,fe.Z)(function*(n,e){const t=st(n);return IL(t.localStore,e).then(r=>od(t,r))}),gR.apply(this,arguments)}function w3(n,e,t,r){return mR.apply(this,arguments)}function mR(){return mR=(0,fe.Z)(function*(n,e,t,r){const i=st(n),a=yield function(c,f){const y=st(c),w=st(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Sn(D,f).next(S=>S?y.localDocuments.getDocuments(D,S):ae.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield my(i.remoteStore):"acknowledged"===t||"rejected"===t?(lR(i,e,r||null),uR(i,e),f=e,st(st(i.localStore).mutationQueue).Cn(f)):ht(),yield od(i,a)):Ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),mR.apply(this,arguments)}function yR(){return yR=(0,fe.Z)(function*(n,e){const t=st(n);if(ER(t),bR(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield WL(t,r.toArray());t.vc=!0,yield H1(t.remoteStore,!0);for(const a of i)vT(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Ey(t,c),py(t.localStore,c,!0))),gw(t.remoteStore,c)}),yield i,yield WL(t,r),function(a){const c=st(a);c.yc.forEach((f,y)=>{gw(c.remoteStore,y)}),c.Ic.Ts(),c.yc=new Map,c.gc=new tr(rt.comparator)}(t),t.vc=!1,yield H1(t.remoteStore,!1)}}),yR.apply(this,arguments)}function WL(n,e,t){return _R.apply(this,arguments)}function _R(){return _R=(0,fe.Z)(function*(n,e,t){const r=st(n),i=[],a=[];for(const c of e){let f;const y=r._c.get(c);if(y&&0!==y.length){f=yield fy(r.localStore,Rs(y[0]));for(const w of y){const D=r.wc.get(w),S=yield _3(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield CL(r.localStore,c);f=yield fy(r.localStore,w),yield X1(r,ZL(w),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),_R.apply(this,arguments)}function ZL(n){return tF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function b3(n){const e=st(n);return st(st(e.localStore).persistence).$i()}function C3(n,e,t,r){return vR.apply(this,arguments)}function vR(){return vR=(0,fe.Z)(function*(n,e,t,r){const i=st(n);if(i.vc)return void Ue("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield IL(i.localStore,iF(a[0])),f=ew.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vi.EMPTY_BYTE_STRING);yield od(i,c,f);break}case"rejected":yield py(i.localStore,e,!0),Ey(i,e,r);break;default:ht()}}),vR.apply(this,arguments)}function I3(n,e,t){return wR.apply(this,arguments)}function wR(){return wR=(0,fe.Z)(function*(n,e,t){const r=ER(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ue("SyncEngine","Adding an already active target "+i);continue}const a=yield CL(r.localStore,i),c=yield fy(r.localStore,a);yield X1(r,ZL(a),c.targetId,!1,c.resumeToken),vT(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield py(r.localStore,i,!1).then(()=>{gw(r.remoteStore,i),Ey(r,i)}).catch(xh))}}),wR.apply(this,arguments)}function ER(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=GL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d3.bind(null,e),e.dc.nu=t3.bind(null,e.eventManager),e.dc.Pc=n3.bind(null,e.eventManager),e}function bR(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f3.bind(null,e),e}class mw{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.serializer=fw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return vL(this.persistence,new _L,e.initialUser,this.serializer)}createPersistence(e){return new h1(dT.zs,this.serializer)}createSharedClientState(e){return new SL}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class CR extends mw{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield bR(r.Vc.syncEngine),yield my(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return vL(this.persistence,new _L,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new lL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new QB(t,this.persistence);return new YB(e.asyncQueue,r)}createPersistence(e){const t=g1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new p1(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ML(),_T(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new SL}}class KL extends CR{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof I1&&(r.sharedClientState.syncEngine={jr:w3.bind(null,i),zr:C3.bind(null,i),Wr:I3.bind(null,i),$i:b3.bind(null,i),Qr:v3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,fe.Z)(function*(c){yield function E3(n,e){return yR.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=ML();if(!I1.D(t))throw new Fe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=g1(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new I1(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class by{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>zL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=m3.bind(null,r.syncEngine),yield H1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new e3}createDatastore(e){const t=fw(e.databaseInfo.databaseId),r=new L$(e.databaseInfo);return new B$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>zL(this.syncEngine,f,0),c=xL.D()?new xL:new k$,new H$(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,y,w){const D=new a3(r,i,a,c,f,y);return w&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=st(t);Ue("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield gy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function YL(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ET{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Wr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class A3{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new _i,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new r3(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,fe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class S3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(a,c){const f=st(a),y=rw(f.serializer)+"/documents",w={documents:c.map(H=>nw(f.serializer,H))},D=yield f.vo("BatchGetDocuments",y,w,c.length),S=new Map;D.forEach(H=>{const K=function Kj(n,e){return"found"in e?function(t,r){It(!!r.found);const i=Ml(t,r.found.name),a=Zr(r.found.updateTime),c=r.found.createTime?Zr(r.found.createTime):Dt.min(),f=new Ki({mapValue:{fields:r.found.fields}});return dr.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const i=Ml(t,r.missing),a=Zr(r.readTime);return dr.newNoDocument(i,a)}(n,e):ht()}(f.serializer,H);S.set(K.key.toString(),K)});const B=[];return c.forEach(H=>{const K=S.get(H.toString());It(!!K),B.push(K)}),B}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=rt.fromPath(i);e.mutations.push(new WM(a,e.precondition(a)))}),yield(r=(0,fe.Z)(function*(i,a){const c=st(i),f=rw(c.serializer)+"/documents",y={writes:a.map(w=>iw(c.serializer,w))};yield c.Io("Commit",f,y)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?br.exists(!1):br.updateTime(t):br.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Fe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return br.updateTime(t)}return br.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class x3{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new D1(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,fe.Z)(function*(){const t=new S3(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!B0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!bF(t)}return!1}}class M3{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pi.UNAUTHENTICATED,this.clientId=vO.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,fe.Z)(function*(f){Ue("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ue("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=_y(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bT(n,e){return IR.apply(this,arguments)}function IR(){return IR=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ue("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(a){r.isEqual(a)||(yield wL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),IR.apply(this,arguments)}function TR(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield AR(n);Ue("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>LL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>LL(e.remoteStore,a)),n._onlineComponents=e}),DR.apply(this,arguments)}function QL(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function AR(n){return SR.apply(this,arguments)}function SR(){return SR=(0,fe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!QL(t))throw t;_a("Error using user provided cache. Falling back to memory cache: "+t),yield bT(n,new mw)}}else Ue("FirestoreClient","Using default OfflineComponentProvider"),yield bT(n,new mw);return n._offlineComponents}),SR.apply(this,arguments)}function CT(n){return xR.apply(this,arguments)}function xR(){return xR=(0,fe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield TR(n,n._uninitializedComponentsProvider._online)):(Ue("FirestoreClient","Using default OnlineComponentProvider"),yield TR(n,new by))),n._onlineComponents}),xR.apply(this,arguments)}function JL(n){return AR(n).then(e=>e.persistence)}function IT(n){return AR(n).then(e=>e.localStore)}function XL(n){return CT(n).then(e=>e.remoteStore)}function MR(n){return CT(n).then(e=>e.syncEngine)}function Cy(n){return RR.apply(this,arguments)}function RR(){return RR=(0,fe.Z)(function*(n){const e=yield CT(n),t=e.eventManager;return t.onListen=u3.bind(null,e.syncEngine),t.onUnlisten=l3.bind(null,e.syncEngine),t}),RR.apply(this,arguments)}function t2(n,e,t={}){const r=new _i;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,c,f,y){const w=new ET({next:S=>{a.enqueueAndForget(()=>Z1(i,D));const B=S.docs.has(c);!B&&S.fromCache?y.reject(new Fe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&S.fromCache&&f&&"server"===f.source?y.reject(new Fe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new Q1(iy(c.path),w,{includeMetadataChanges:!0,Ku:!0});return q1(i,D)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}function n2(n,e,t={}){const r=new _i;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,c,f,y){const w=new ET({next:S=>{a.enqueueAndForget(()=>Z1(i,D)),S.fromCache&&"server"===f.source?y.reject(new Fe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),D=new Q1(c,w,{includeMetadataChanges:!0,Ku:!0});return q1(i,D)}(yield Cy(n),n.asyncQueue,e,t,r)})),r.promise}function r2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const i2=new Map;function PR(n,e,t){if(!t)throw new Fe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function s2(n,e,t,r){if(!0===e&&!0===r)throw new Fe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function o2(n){if(!rt.isDocumentKey(n))throw new Fe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function a2(n){if(rt.isDocumentKey(n))throw new Fe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function TT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=TT(n);throw new Fe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function u2(n,e){if(e<=0)throw new Fe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class l2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=r2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Fe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Fe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Fe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new VB;switch(t.type){case"firstParty":return new $B(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=i2.get(e);t&&(Ue("ComponentProvider","Removing Datastore"),i2.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class Rl extends Yi{constructor(e,t,r){super(e,t,iy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new rt(e))}withConverter(e){return new Rl(this.firestore,e,this._path)}}function d2(n,e,...t){if(n=(0,Xt.m9)(n),PR("collection","path",e),n instanceof yw){const r=En.fromString(e,...t);return a2(r),new Rl(n,null,r)}{if(!(n instanceof hr||n instanceof Rl))throw new Fe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return a2(r),new Rl(n.firestore,null,r)}}function DT(n,e,...t){if(n=(0,Xt.m9)(n),1===arguments.length&&(e=vO.A()),PR("doc","path",e),n instanceof yw){const r=En.fromString(e,...t);return o2(r),new hr(n,null,new rt(r))}{if(!(n instanceof hr||n instanceof Rl))throw new Fe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return o2(r),new hr(n.firestore,n instanceof Rl?n.converter:null,new rt(r))}}function h2(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),(n instanceof hr||n instanceof Rl)&&(e instanceof hr||e instanceof Rl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NR(n,e){return n=(0,Xt.m9)(n),e=(0,Xt.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&W0(n._query,e._query)&&n.converter===e.converter}class B3{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new D1(this,"async_queue_retry"),this.Xc=()=>{const t=_T();t&&Ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=_T();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=_T();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new _i;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Mh(t))throw t;Ue("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Wr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=z1.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ht()}verifyOperationInProgress(){}sa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function kR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class j3{constructor(){this._progressObserver={},this._taskCompletionResolver=new _i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends yw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new B3,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||f2(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||f2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function f2(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new _j(n._databaseId,f,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,r2(w.experimentalLongPollingOptions),w.useFetchStreams));var f,w;n._firestoreClient=new M3(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function p2(n,e,t){const r=new _i;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield bT(n,t),yield TR(n,e),r.resolve()}catch(i){const a=i;if(!QL(a))throw a;_a("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function g2(n){if(n._initialized||n._terminated)throw new Fe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pl(vi.fromBase64String(e))}catch(t){throw new Fe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pl(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ad{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bp{constructor(e){this._methodName=e}}class AT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Zt(this._lat,e._lat)||Zt(this._long,e._long)}}const J3=/^__.*__$/;class X3{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new id(e,this.data,this.fieldMask,t,this.fieldTransforms):new ay(e,this.data,t,this.fieldTransforms)}}class m2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new id(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function y2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class ST{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ST(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return RT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(y2(this.ca)&&J3.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class eH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fw(e)}ya(e,t,r,i=!1){return new ST({ca:e,methodName:t,ga:r,path:Ur.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jp(n){const e=n._freezeSettings(),t=fw(n._databaseId);return new eH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xT(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);VR("Data must be an object, but it was:",c,r);const f=w2(r,c);let y,w;if(a.merge)y=new to(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const B=ww(e,S,t);if(!c.contains(B))throw new Fe(ge.INVALID_ARGUMENT,`Field '${B}' is specified in your field mask but missing from your input data.`);b2(D,B)||D.push(B)}y=new to(D),w=c.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,w=c.fieldTransforms;return new X3(new Ki(f),y,w)}class vw extends Bp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vw}}function _2(n,e,t){return new ST({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class OR extends Bp{_toFieldTransform(e){return new Q0(e.path,new sy)}isEqual(e){return e instanceof OR}}class tH extends Bp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=_2(this,e,!0),r=this.pa.map(a=>$p(a,t)),i=new Rp(r);return new Q0(e.path,i)}isEqual(e){return this===e}}class nH extends Bp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=_2(this,e,!0),r=this.pa.map(a=>$p(a,t)),i=new Pp(r);return new Q0(e.path,i)}isEqual(e){return this===e}}class rH extends Bp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new oy(e.serializer,dF(e.serializer,this.Ia));return new Q0(e.path,t)}isEqual(e){return this===e}}function FR(n,e,t,r){const i=n.ya(1,e,t);VR("Data must be an object, but it was:",i,r);const a=[],c=Ki.empty();Rh(r,(y,w)=>{const D=MT(e,y,t);w=(0,Xt.m9)(w);const S=i.da(D);if(w instanceof vw)a.push(D);else{const B=$p(w,S);null!=B&&(a.push(D),c.set(D,B))}});const f=new to(a);return new m2(c,f,i.fieldTransforms)}function LR(n,e,t,r,i,a){const c=n.ya(1,e,t),f=[ww(e,r,t)],y=[i];if(a.length%2!=0)throw new Fe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let B=0;B<a.length;B+=2)f.push(ww(e,a[B])),y.push(a[B+1]);const w=[],D=Ki.empty();for(let B=f.length-1;B>=0;--B)if(!b2(w,f[B])){const H=f[B];let K=y[B];K=(0,Xt.m9)(K);const se=c.da(H);if(K instanceof vw)w.push(H);else{const ce=$p(K,se);null!=ce&&(w.push(H),D.set(H,ce))}}const S=new to(w);return new m2(D,S,c.fieldTransforms)}function v2(n,e,t,r=!1){return $p(t,n.ya(r?4:3,e))}function $p(n,e){if(E2(n=(0,Xt.m9)(n)))return VR("Unsupported field value:",e,n),w2(n,e);if(n instanceof Bp)return function(t,r){if(!y2(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=$p(c,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Xt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dF(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:ly(r.serializer,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ly(r.serializer,i)}}if(t instanceof AT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pl)return{bytesValue:PF(r.serializer,t._byteString)};if(t instanceof hr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:e1(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${TT(t)}`)}(n,e)}function w2(n,e){const t={};return kO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rh(n,(r,i)=>{const a=$p(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function E2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof AT||n instanceof Pl||n instanceof hr||n instanceof Bp)}function VR(n,e,t){if(!E2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=TT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function ww(n,e,t){if((e=(0,Xt.m9)(e))instanceof ad)return e._internalPath;if("string"==typeof e)return MT(n,e);throw RT("Field path arguments must be of type string or ",n,!1,void 0,t)}const iH=new RegExp("[~\\*/\\[\\]]");function MT(n,e,t){if(e.search(iH)>=0)throw RT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw RT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RT(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let y="";return(a||c)&&(y+=" (found",a&&(y+=` in field ${r}`),c&&(y+=` in document ${i}`),y+=")"),new Fe(ge.INVALID_ARGUMENT,f+n+y)}function b2(n,e){return n.some(t=>t.isEqual(e))}class Ew{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(PT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class sH extends Ew{data(){return super.data()}}function PT(n,e){return"string"==typeof e?MT(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}function C2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UR{}class bw extends UR{}function Gh(n,e,...t){let r=[];e instanceof UR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof Iy).length,c=i.filter(f=>f instanceof Cw).length;if(a>1||a>0&&c>0)throw new Fe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Cw extends bw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Cw(e,t,r)}_apply(e){const t=this._parse(e);return A2(e._query,t),new Yi(e.firestore,e.converter,GM(e._query,t))}_parse(e){const t=jp(e.firestore);return function(i,a,c,f,y,w,D){let S;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Fe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){D2(D,w);const B=[];for(const H of D)B.push(T2(f,i,H));S={arrayValue:{values:B}}}else S=T2(f,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||D2(D,w),S=v2(c,"where",D,"in"===w||"not-in"===w);return mn.create(y,w,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Iy extends UR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Iy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)A2(a,f),a=GM(a,f)}(e._query,t),new Yi(e.firestore,e.converter,GM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class BR extends bw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new BR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Fe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new ny(i,a);return function(f,y){if(null===$M(f)){const w=YI(f);null!==w&&S2(0,w,y.field)}}(r,c),c}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new nd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class NT extends bw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new NT(e,t,r)}_apply(e){return new Yi(e.firestore,e.converter,QI(e._query,this._limit,this._limitType))}}class kT extends bw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new kT(e,t,r)}_apply(e){const t=I2(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(i=t,new nd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class OT extends bw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new OT(e,t,r)}_apply(e){const t=I2(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(i=t,new nd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function I2(n,e,t,r){if(t[0]=(0,Xt.m9)(t[0]),t[0]instanceof Ew)return function(i,a,c,f,y){if(!f)throw new Fe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const D of Mp(i))if(D.field.isKeyField())w.push(Sp(a,f.key));else{const S=f.data.field(D.field);if(HI(S))throw new Fe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const B=D.field.canonicalString();throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${B}' (used as the orderBy) does not exist.`)}w.push(S)}return new Lh(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=jp(n.firestore);return function(a,c,f,y,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Fe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const B=[];for(let H=0;H<w.length;H++){const K=w[H];if(S[H].field.isKeyField()){if("string"!=typeof K)throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof K}`);if(!HM(a)&&-1!==K.indexOf("/"))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${K}' contains a slash.`);const se=a.path.child(En.fromString(K));if(!rt.isDocumentKey(se))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${se}' is not because it contains an odd number of segments.`);const ce=new rt(se);B.push(Sp(c,ce))}else{const se=v2(f,y,K);B.push(se)}}return new Lh(B,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function T2(n,e,t){if("string"==typeof(t=(0,Xt.m9)(t))){if(""===t)throw new Fe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HM(e)&&-1!==t.indexOf("/"))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!rt.isDocumentKey(r))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sp(n,new rt(r))}if(t instanceof hr)return Sp(n,t._key);throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${TT(t)}.`)}function D2(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function A2(n,e){if(e.isInequality()){const r=YI(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=$M(n);null!==a&&S2(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Fe(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function S2(n,e,t){if(!t.isEqual(e))throw new Fe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class jR{convertValue(e,t="none"){switch(Oh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(td(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rh(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new AT(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=GI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($0(e));default:return null}}convertTimestamp(e){const t=Ph(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);It($F(r));const i=new Nh(r.get(1),r.get(3)),a=new rt(r.popFirst(5));return i.isEqual(t)||Wr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function FT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pH extends jR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class Hp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends Ew{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Iw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(PT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Iw extends ud{data(e={}){return super.data(e)}}class zh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Hp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Iw(this._firestore,this._userDataWriter,r.key,r,new Hp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Iw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Iw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Hp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let y=-1,w=-1;return 0!==c.type&&(y=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:mH(c.type),doc:f,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function mH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function M2(n,e){return n instanceof ud&&e instanceof ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof zh&&e instanceof zh&&n._firestore===e._firestore&&NR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class qh extends jR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function R2(n,e,t){n=yn(n,hr);const r=yn(n.firestore,fr),i=FT(n.converter,e,t);return Ty(r,[xT(jp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,br.none())])}function P2(n,e,t,...r){n=yn(n,hr);const i=yn(n.firestore,fr),a=jp(i);let c;return c="string"==typeof(e=(0,Xt.m9)(e))||e instanceof ad?LR(a,"updateDoc",n._key,e,t,r):FR(a,"updateDoc",n._key,e),Ty(i,[c.toMutation(n._key,br.exists(!0))])}function N2(n,...e){var t,r,i;n=(0,Xt.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||kR(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(kR(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let y,w,D;if(n instanceof hr)w=yn(n.firestore,fr),D=iy(n._key.path),y={next:S=>{e[c]&&e[c]($R(w,n,S))},error:e[c+1],complete:e[c+2]};else{const S=yn(n,Yi);w=yn(S.firestore,fr),D=S._query;const B=new qh(w);y={next:H=>{e[c]&&e[c](new zh(w,B,S,H))},error:e[c+1],complete:e[c+2]},C2(n._query)}return function(S,B,H,K){const se=new ET(K),ce=new Q1(B,se,H);return S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return q1(yield Cy(S),ce)})),()=>{se.Dc(),S.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return Z1(yield Cy(S),ce)}))}}(Kr(w),D,f,y)}function Ty(n,e){return function(t,r){const i=new _i;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function c3(n,e,t){return nR.apply(this,arguments)}(yield MR(t),r,i)})),i.promise}(Kr(n),e)}function $R(n,e,t){const r=t.docs.get(e._key),i=new qh(n);return new ud(n,i,e._key,r,new Hp(t.hasPendingWrites,t.fromCache),e.converter)}const kH={maxAttempts:5};class k2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=jp(e)}set(e,t,r){this._verifyNotCommitted();const i=Wh(e,this._firestore),a=FT(i.converter,t,r),c=xT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,br.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Wh(e,this._firestore);let c;return c="string"==typeof(t=(0,Xt.m9)(t))||t instanceof ad?LR(this._dataReader,"WriteBatch.update",a._key,t,r,i):FR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,br.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Wh(e,this._firestore);return this._mutations=this._mutations.concat(new uy(t._key,br.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wh(n,e){if((n=(0,Xt.m9)(n)).firestore!==e)throw new Fe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class OH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=jp(e)}get(e){const t=Wh(e,this._firestore),r=new pH(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const a=i[0];if(a.isFoundDocument())return new Ew(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Ew(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Wh(e,this._firestore),a=FT(i.converter,t,r),c=xT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Wh(e,this._firestore);let c;return c="string"==typeof(t=(0,Xt.m9)(t))||t instanceof ad?LR(this._dataReader,"Transaction.update",a._key,t,r,i):FR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Wh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wh(e,this._firestore),r=new qh(this._firestore);return super.get(e).then(i=>new ud(this._firestore,r,t._key,i._document,new Hp(!1,!1),t.converter))}}function HR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function F2(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function L2(){if(!function mj(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Jm=Ss.SDK_VERSION,(0,Ss._registerComponent)(new Eh.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new fr(new BB(t.getProvider("auth-internal")),new HB(t.getProvider("app-check-internal")),function(f,y){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Fe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nh(f.options.projectId,y)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Ss.registerVersion)(mO,"3.13.0",n),(0,Ss.registerVersion)(mO,"3.13.0","esm2017")}();class Tw{constructor(e){this._delegate=e}static fromBase64String(e){return L2(),new Tw(Pl.fromBase64String(e))}static fromUint8Array(e){return F2(),new Tw(Pl.fromUint8Array(e))}toBase64(){return L2(),this._delegate.toBase64()}toUint8Array(){return F2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function GR(n){return function GH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class zH{enableIndexedDbPersistence(e,t){return function H3(n,e){g2(n=yn(n,fr));const t=Kr(n);if(t._uninitializedComponentsProvider)throw new Fe(ge.FAILED_PRECONDITION,"SDK cache is already specified.");_a("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new by;return p2(t,i,new CR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function G3(n){g2(n=yn(n,fr));const e=Kr(n);if(e._uninitializedComponentsProvider)throw new Fe(ge.FAILED_PRECONDITION,"SDK cache is already specified.");_a("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new by;return p2(e,r,new KL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function z3(n){if(n._initialized&&!n._terminated)throw new Fe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _i;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!_u.D())return Promise.resolve();const i=r+"main";yield _u.delete(i)}),function(r){return t.apply(this,arguments)})(g1(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class V2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Nh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_a("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function c2(n,e,t,r={}){var i;const a=(n=yn(n,yw))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&_a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let f,y;if("string"==typeof r.mockUserToken)f=r.mockUserToken,y=Pi.MOCK_USER;else{f=(0,Xt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Fe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Pi(w)}n._authCredentials=new UB(new yO(f,y))}}(this._delegate,e,t,r)}enableNetwork(){return function W3(n){return function R3(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield JL(n),t=yield XL(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i.vu.delete(0),pw(i)}(t)}))}(Kr(n=yn(n,fr)))}(this._delegate)}disableNetwork(){return function Z3(n){return function P3(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield JL(n),t=yield XL(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const a=st(i);a.vu.add(0),yield gy(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=yn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,s2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function q3(n){return function(e){const t=new _i;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function p3(n,e){return aR.apply(this,arguments)}(yield MR(e),t)})),t.promise}(Kr(n=yn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function TH(n,e){return function O3(n,e){const t=new ET(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Cy(n),i=t,st(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield Cy(n),i=t,void st(r).ku.delete(i);var r,i}))}}(Kr(n=yn(n,fr)),kR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Dy(this,d2(this._delegate,e))}catch(t){throw Ps(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,DT(this._delegate,e))}catch(t){throw Ps(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,function U3(n,e){if(n=yn(n,yw),PR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new nd(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ps(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function FH(n,e,t){n=yn(n,fr);const r=Object.assign(Object.assign({},kH),t);return function(i){if(i.maxAttempts<1)throw new Fe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new _i;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const y=yield function e2(n){return CT(n).then(e=>e.datastore)}(i);new x3(i.asyncQueue,y,c,a,f).run()})),f.promise}(Kr(n),i=>e(new OH(n,i)),r)}(this._delegate,t=>e(new U2(this,t)))}batch(){return Kr(this._delegate),new B2(new k2(this._delegate,e=>Ty(this._delegate,e)))}loadBundle(e){return function K3(n,e){const t=Kr(n=yn(n,fr)),r=new j3;return function F3(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?IF().encode(a):a,y=function(y,w){if(y instanceof Uint8Array)return YL(y,w);if(y instanceof ArrayBuffer)return YL(new Uint8Array(y),w);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new A3(y,c);var y}(t,fw(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function T3(n,e,t){const r=st(n);var i;(i=(0,fe.Z)(function*(a,c,f){try{const y=yield c.getMetadata();if(yield function(B,H){const K=st(B),se=Zr(H.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",ce=>K.qs.getBundleMetadata(ce,H.id)).then(ce=>!!ce&&ce.createTime.compareTo(se)>=0)}(a.localStore,y))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(B=y).totalDocuments,bytesLoaded:B.totalBytes,totalDocuments:B.totalDocuments,totalBytes:B.totalBytes}),Promise.resolve(new Set);f._updateProgress(BL(y));const w=new i3(y,a.localStore,c.serializer);let D=yield c.bc();for(;D;){const B=yield w.zu(D);B&&f._updateProgress(B),D=yield c.bc()}const S=yield w.complete();return yield od(a,S.Ju,void 0),yield function(B,H){const K=st(B);return K.persistence.runTransaction("Save bundle","readwrite",se=>K.qs.saveBundleMetadata(se,H))}(a.localStore,y),f._completeWith(S.progress),Promise.resolve(S.Hu)}catch(y){return _a("SyncEngine",`Loading bundle failed with ${y}`),f._failWith(y),Promise.resolve(new Set)}var B}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield MR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Y3(n,e){return function L3(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield IT(n),e)}))}(Kr(n=yn(n,fr)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ns(this,t):null)}}class LT extends jR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tw(new Pl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class U2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new LT(e)}get(e){const t=zp(e);return this._delegate.get(t).then(r=>new Dw(this._firestore,new ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=zp(e);return r?(HR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}}class B2{constructor(e){this._delegate=e}set(e,t,r){const i=zp(e);return r?(HR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=zp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Iw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Aw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Gp(e,new LT(e),t),i.set(t,a)),a}}Gp.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new hr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new va(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Dy(this.firestore,d2(this._delegate,e))}catch(t){throw Ps(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Xt.m9)(e))instanceof hr&&h2(this._delegate,e)}set(e,t){t=HR("DocumentReference.set",t);try{return t?R2(this._delegate,e,t):R2(this._delegate,e)}catch(r){throw Ps(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?P2(this._delegate,e):P2(this._delegate,e,t,...r)}catch(i){throw Ps(i,"updateDoc()","DocumentReference.update()")}}delete(){return function CH(n){return Ty(yn(n.firestore,fr),[new uy(n._key,br.none())])}(this._delegate)}onSnapshot(...e){const t=j2(e),r=$2(e,i=>new Dw(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return N2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function _H(n){n=yn(n,hr);const e=yn(n.firestore,fr),t=Kr(e),r=new qh(e);return function N3(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,c){try{const f=yield function(y,w){const D=st(y);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,w))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Fe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const y=_y(f,`Failed to get document '${a} from cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield IT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new ud(e,r,n._key,i,new Hp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function vH(n){n=yn(n,hr);const e=yn(n.firestore,fr);return t2(Kr(e),n._key,{source:"server"}).then(t=>$R(e,n,t))}(this._delegate):function yH(n){n=yn(n,hr);const e=yn(n.firestore,fr);return t2(Kr(e),n._key).then(t=>$R(e,n,t))}(this._delegate),t.then(r=>new Dw(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}function Ps(n,e,t){return n.message=n.message.replace(e,t),n}function j2(n){for(const e of n)if("object"==typeof e&&!GR(e))return e;return{}}function $2(n,e){var t,r;let i;return i=GR(n[0])?n[0]:GR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Dw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return M2(this._delegate,e._delegate)}}class Aw extends Dw{data(e){const t=this._delegate.data(e);return function LB(n,e){n||ht()}(void 0!==t),t}}class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LT(e)}where(e,t,r){try{return new Ns(this.firestore,Gh(this._delegate,function oH(n,e,t){const r=e,i=PT("where",n);return Cw._create(i,r,t)}(e,t,r)))}catch(i){throw Ps(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ns(this.firestore,Gh(this._delegate,function aH(n,e="asc"){const t=e,r=PT("orderBy",n);return BR._create(r,t)}(e,t)))}catch(r){throw Ps(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ns(this.firestore,Gh(this._delegate,function uH(n){return u2("limit",n),NT._create("limit",n,"F")}(e)))}catch(t){throw Ps(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ns(this.firestore,Gh(this._delegate,function lH(n){return u2("limitToLast",n),NT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ps(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ns(this.firestore,Gh(this._delegate,function cH(...n){return kT._create("startAt",n,!0)}(...e)))}catch(t){throw Ps(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ns(this.firestore,Gh(this._delegate,function dH(...n){return kT._create("startAfter",n,!1)}(...e)))}catch(t){throw Ps(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ns(this.firestore,Gh(this._delegate,function hH(...n){return OT._create("endBefore",n,!1)}(...e)))}catch(t){throw Ps(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ns(this.firestore,Gh(this._delegate,function fH(...n){return OT._create("endAt",n,!0)}(...e)))}catch(t){throw Ps(t,"endAt()","Query.endAt()")}}isEqual(e){return NR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function EH(n){n=yn(n,Yi);const e=yn(n.firestore,fr),t=Kr(e),r=new qh(e);return function k3(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,c){try{const f=yield pT(i,a,!0),y=new HL(a,f.ir),w=y.sc(f.documents),D=y.applyChanges(w,!1);c.resolve(D.snapshot)}catch(f){const y=_y(f,`Failed to execute query '${a} against cache`);c.reject(y)}}),function(i,a,c){return r.apply(this,arguments)})(yield IT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new zh(e,r,n,i))}(this._delegate):"server"===e?.source?function bH(n){n=yn(n,Yi);const e=yn(n.firestore,fr),t=Kr(e),r=new qh(e);return n2(t,n._query,{source:"server"}).then(i=>new zh(e,r,n,i))}(this._delegate):function wH(n){n=yn(n,Yi);const e=yn(n.firestore,fr),t=Kr(e),r=new qh(e);return C2(n._query),n2(t,n._query).then(i=>new zh(e,r,n,i))}(this._delegate),t.then(r=>new zR(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=j2(e),r=$2(e,i=>new zR(this.firestore,new zh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return N2(this._delegate,t,r)}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}class WH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Aw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Aw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new WH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Aw(this._firestore,r))})}isEqual(e){return M2(this._delegate,e._delegate)}}class Dy extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?DT(this._delegate):DT(this._delegate,e))}catch(t){throw Ps(t,"doc()","CollectionReference.doc()")}}add(e){return function IH(n,e){const t=yn(n.firestore,fr),r=DT(n),i=FT(n.converter,e);return Ty(t,[xT(jp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,br.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return h2(this._delegate,e._delegate)}withConverter(e){return new Dy(this.firestore,this._delegate.withConverter(e?Gp.getInstance(this.firestore,e):null))}}function zp(n){return yn(n,hr)}class qR{constructor(...e){this._delegate=new ad(...e)}static documentId(){return new qR(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,Xt.m9)(e))instanceof ad&&this._delegate._internalPath.isEqual(e._internalPath)}}class qp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function VH(){return new OR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qp(e)}static delete(){const e=function LH(){return new vw("deleteField")}();return e._methodName="FieldValue.delete",new qp(e)}static arrayUnion(...e){const t=function UH(...n){return new tH("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new qp(t)}static arrayRemove(...e){const t=function BH(...n){return new nH("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new qp(t)}static increment(e){const t=function jH(n){return new rH("increment",n)}(e);return t._methodName="FieldValue.increment",new qp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ZH={Firestore:V2,GeoPoint:AT,Timestamp:Er,Blob:Tw,Transaction:U2,WriteBatch:B2,DocumentReference:va,DocumentSnapshot:Dw,Query:Ns,QueryDocumentSnapshot:Aw,QuerySnapshot:zR,CollectionReference:Dy,FieldPath:qR,FieldValue:qp,setLogLevel:function qH(n){!function FB(n){Sh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function H2(n,e){return function QH(n,e=TU.z){return new xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function WR(n,e){return H2(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function VT(n,e){return WR(n,e).pipe($f(void 0),Bx(),(0,ft.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const y=i.find(D=>D.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(c.ref));y&&JSON.stringify(y.doc.metadata)===JSON.stringify(c.metadata)||!y&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function G2(n,e,t){return VT(n,t).pipe(uh((r,i)=>function XH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function e6(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ZR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ZR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function DU(n,e=Vf.y){return n=n??AU,(0,gi.e)((t,r)=>{let i,a=!0;t.subscribe((0,Zn.x)(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}(),(0,ft.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ZR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function z2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function YH(n){(function KH(n,e){n.INTERNAL.registerComponent(new Eh.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},ZH)))})(n,(e,t)=>new V2(e,t,new zH)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(SU.Z);class q2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=VT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe($f(void 0),Bx(),Ks(([r,i])=>i.length>0||!r),(0,ft.U)(([r,i])=>i),gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(uh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=z2(e);return G2(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return WR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),gn.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(gn.iC)}add(e){return this.ref.add(e)}doc(e){return new W2(this.ref.doc(e),this.afs)}}class W2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=Z2(r,t);return new q2(i,a,this.afs)}snapshotChanges(){return function JH(n,e){return H2(n,e).pipe($f(void 0),Bx(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,In.D)(this.ref.get(e)).pipe(gn.iC)}}class t6{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?VT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ks(t=>t.length>0),gn.iC):VT(this.query,this.afs.schedulers.outsideAngular).pipe(gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(uh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=z2(e);return G2(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn.iC)}valueChanges(e={}){return WR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),gn.iC)}get(e){return(0,In.D)(this.query.get(e)).pipe(gn.iC)}}const n6=new l.OlP("angularfire2.enableFirestorePersistence"),r6=new l.OlP("angularfire2.firestore.persistenceSettings"),i6=new l.OlP("angularfire2.firestore.settings"),s6=new l.OlP("angularfire2.firestore.use-emulator");function Z2(n,e=(t=>t)){return{query:e(n),ref:n}}let UT=(()=>{class n{constructor(t,r,i,a,c,f,y,w,D,S,B,H,K,se,ce,Be,Qe){this.schedulers=y;const We=(0,xo.on)(t,f,r),Xe=D;S&&qS(We,f,B,K,se,ce,H,Be),[this.firestore,this.persistenceEnabled$]=(0,xo.cc)(`${We.name}.firestore`,"AngularFirestore",We.name,()=>{const Ut=f.runOutsideAngular(()=>We.firestore());if(a&&Ut.settings(a),Xe&&Ut.useEmulator(...Xe),i&&!Os(c)){const Bt=()=>{try{return(0,In.D)(Ut.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(_n){return typeof console<"u"&&console.warn(_n),Ct(!1)}};return[Ut,f.runOutsideAngular(Bt)]}return[Ut,Ct(!1)]},[a,Xe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=Z2(i,r),f=this.schedulers.ngZone.run(()=>a);return new q2(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new t6(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new W2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(xo.Dh),l.LFG(xo.xv,8),l.LFG(n6,8),l.LFG(i6,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(gn.HU),l.LFG(r6,8),l.LFG(s6,8),l.LFG(ga,8),l.LFG(BS,8),l.LFG(jS,8),l.LFG($S,8),l.LFG(HS,8),l.LFG(GS,8),l.LFG(zS,8),l.LFG(Mm,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),o6=(()=>{class n{constructor(t){this.firestore=t}getImage(){return this.firestore.collection("galeriasi").snapshotChanges()}getImagesById(t){return this.firestore.collection("galeriasi").doc(t).valueChanges()}addImagenInfo(t){return this.firestore.collection("galeriasi").add(t)}updateImage(t,r){return this.firestore.collection("galeriasi").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(UT))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function a6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",11)(1,"div",12)(2,"input",13),l.NdJ("change",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.subirArchivo(i))}),l.qZA(),l.TgZ(3,"label",14),l._UZ(4,"i",15),l._uU(5," Agregar nueva imagen "),l.qZA()()()}}function u6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",16)(1,"img",17),l.NdJ("mouseenter",function(){const a=l.CHM(t).index,c=l.oxw();return l.KtG(c.onMouseEnter(a))})("mouseleave",function(){const a=l.CHM(t).index,c=l.oxw();return l.KtG(c.onMouseLeave(a))})("click",function(){const a=l.CHM(t).index,c=l.oxw();return l.KtG(c.onPreviewImage(a))}),l.qZA(),l.TgZ(2,"div",18)(3,"div")(4,"i",19),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.abrirCom(a))}),l.qZA(),l.TgZ(5,"span"),l._uU(6),l.qZA()(),l.TgZ(7,"div")(8,"i",20),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.likeImage(a))}),l.qZA(),l.TgZ(9,"span"),l._uU(10),l.qZA()()()()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(1),l.Q6J("src",t.url,l.LSH),l.xp6(5),l.Oqu(t.commentsVideo.length),l.xp6(2),l.ekj("liked",t.likedByImage.includes(r.currentUser.uid)),l.xp6(2),l.Oqu(t.likesCountImage)}}function l6(n,e){if(1&n&&(l.TgZ(0,"span",27),l._uU(1),l.qZA()),2&n){const t=l.oxw(2);l.xp6(1),l.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function c6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",28),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.onClosePreview())}),l._UZ(1,"i",29),l.qZA()}}function d6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",30),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.prev())}),l._UZ(1,"i",31),l.qZA()}}function h6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",32),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.next())}),l._UZ(1,"i",33),l.qZA()}}function f6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",34),l._UZ(1,"img",35),l.TgZ(2,"div",18)(3,"div")(4,"i",19),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.abrirCom(i.currentLightboxImage))}),l.qZA(),l.TgZ(5,"span"),l._uU(6),l.qZA()(),l.TgZ(7,"div")(8,"i",20),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.likeImage(i.currentLightboxImage))}),l.qZA(),l.TgZ(9,"span"),l._uU(10),l.qZA()()()()}if(2&n){const t=l.oxw(2);l.xp6(1),l.ekj("zoom-in",t.previewImage),l.Q6J("src",t.currentLightboxImage.url,l.LSH),l.xp6(5),l.Oqu(t.currentLightboxImage.commentsVideo.length),l.xp6(2),l.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),l.xp6(2),l.Oqu(t.currentLightboxImage.likesCountImage)}}const p6=function(n){return{active:n}};function g6(n,e){if(1&n&&(l.TgZ(0,"div",21),l.YNc(1,l6,2,2,"span",22),l.YNc(2,c6,2,0,"button",23),l.YNc(3,d6,2,0,"button",24),l.YNc(4,h6,2,0,"button",25),l.YNc(5,f6,11,7,"div",26),l.qZA()),2&n){const t=l.oxw();l.Q6J("ngClass",l.VKq(6,p6,t.previewImage)),l.xp6(1),l.Q6J("ngIf",t.showCount),l.xp6(1),l.Q6J("ngIf",t.previewImage),l.xp6(1),l.Q6J("ngIf",t.controls),l.xp6(1),l.Q6J("ngIf",t.controls),l.xp6(1),l.Q6J("ngIf",t.previewImage)}}function m6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",36)(1,"div",37)(2,"span",38),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.close())}),l.qZA(),l.TgZ(3,"div",39)(4,"p"),l._uU(5," Primero debes "),l.TgZ(6,"a",40),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.salir())}),l._uU(7,"Iniciar Sesion"),l.qZA(),l._uU(8," o "),l.TgZ(9,"a",41),l._uU(10,"Registrate"),l.qZA()()()()()}}function y6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",54),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.close())}),l.qZA()}}function _6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"span"),l._uU(2),l.qZA(),l.TgZ(3,"div",55)(4,"p",56),l._uU(5),l.qZA(),l.TgZ(6,"div",57)(7,"div")(8,"i",20),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw(2);return l.KtG(c.likeComment(a))}),l.qZA(),l.TgZ(9,"span"),l._uU(10),l.qZA()(),l.TgZ(11,"i",58),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw(2);return l.KtG(c.abrirEditar(a))}),l.qZA(),l.TgZ(12,"i",59),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw(2);return l.KtG(c.deleteModal(a))}),l.qZA()()()()}if(2&n){const t=e.$implicit,r=l.oxw(2);l.xp6(2),l.Oqu(t.usuario),l.xp6(3),l.Oqu(t.comentario),l.xp6(3),l.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),l.xp6(2),l.Oqu(t.likesCountComment)}}function v6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",42)(1,"div",43),l.YNc(2,y6,1,0,"span",44),l.TgZ(3,"h3"),l._uU(4,"Comentarios:"),l.qZA(),l.TgZ(5,"div",45)(6,"div",46),l.YNc(7,_6,13,5,"div",47),l.qZA()(),l.TgZ(8,"div",48)(9,"form",49,50),l.NdJ("submit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.addComment(i.comentario))}),l.TgZ(11,"label",51),l._uU(12,"Agregar comentario:"),l.qZA(),l._UZ(13,"br"),l.TgZ(14,"textarea",52),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.comentario=i)}),l.qZA(),l._UZ(15,"br"),l.TgZ(16,"button",53),l._uU(17," Comentar "),l.qZA()()()()()}if(2&n){const t=l.MAs(10),r=l.oxw();l.xp6(2),l.Q6J("ngIf",r.ocultarx),l.xp6(5),l.Q6J("ngForOf",r.dataVideoId.commentsVideo),l.xp6(7),l.Q6J("ngModel",r.comentario),l.xp6(2),l.Q6J("disabled",!t.valid)}}function w6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",60)(1,"div",37)(2,"div",39)(3,"p"),l._uU(4,"\xbfDeseas eliminar este Comentario?"),l.qZA()(),l.TgZ(5,"div",61)(6,"button",62),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeDelete())}),l._uU(7,"Cancelar"),l.qZA(),l.TgZ(8,"button",62),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.borrarComentario())}),l._uU(9,"Aceptar"),l.qZA()()()()}}function E6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",63)(1,"div",37)(2,"div",39)(3,"p"),l._uU(4,"Editar comentario:"),l.qZA(),l.TgZ(5,"textarea",64),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.esteComentario=i)}),l.qZA()(),l.TgZ(6,"div",65)(7,"button",62),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeDelete())}),l._uU(8,"Cancelar"),l.qZA(),l.TgZ(9,"button",62),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.editarComentario())}),l._uU(10,"Aceptar"),l.qZA()()()()}if(2&n){const t=l.oxw();l.xp6(5),l.Q6J("ngModel",t.esteComentario)}}let b6=(()=>{class n{constructor(t,r,i,a,c,f){this.storage=t,this.el=r,this.afAuth=i,this._image=a,this.toastr=c,this.router=f,this.images=[],this.showCount=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.images[0],this.currentIndex=0,this.controls=!0,this.totalImageCount=0,this.reset=0,this.adm=!1,this.esInvitado=!1,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[]}ngOnInit(){this.getImages(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getImages(){this._image.getImage().subscribe(t=>{this.images=[],t.forEach(r=>{const i=r.payload.doc.data();this.images.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeImage(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const a=i.uid,c=i.displayName,f=i.email,y=t.likedByImage.indexOf(a);-1!==y?(t.likedByImage.splice(y,1),t.userImageLikes.splice(y,1),t.likesCountImage--):(t.likedByImage.push(a),t.likesCountImage++,t.userImageLikes.push({usuario:c,correo:f}));const w=t.id,D={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._image.updateImage(w,D)}else r.modal=!0})()}subirArchivo(t){var r=this;const i=t.target.files[0],a=cI(this.storage,`images/${i.name}`);XN(a,i).then(function(){var c=(0,fe.Z)(function*(f){yield r.getImages(),r.capturarNuevaImagen(),r.toastr.success("Agregando nueva imagen")});return function(f){return c.apply(this,arguments)}}()).catch(c=>console.log(c))}capturarNuevaImagen(){var t=this;const r=cI(this.storage,"images");JN(r).then(function(){var i=(0,fe.Z)(function*(a){let c,f=new Date(0);for(let y of a.items){const w=yield lU(y),D=new Date(w.timeCreated);D>f&&(f=D,c=y)}if(c){const w={url:yield QN(c)};t._image.addImagenInfo(w).then(()=>{console.log("actualizando"),window.location.reload(),t.toastr.info("Actualizando la lista de Imagenes")})}else console.log("No se encontraron im\xe1genes.")});return function(a){return i.apply(this,arguments)}}()).catch(i=>console.log(i))}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.images[t],this.totalImageCount=this.images.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.images.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.images[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.currentLightboxImage=this.images[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,fe.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const a=r.dataVideoId,c=r.dataVideoId.id;a.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t});const w={commentsVideo:a.commentsVideo};yield r._image.updateImage(c,w),r.comentario=""}})()}abrirCom(t){var r=this;return(0,fe.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(a=>{console.error("Error al eliminar el comentario:",a)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const a=i.uid,c=t.likedByComment.indexOf(a);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(a),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(w=>w===t)){const w={commentsVideo:r.dataVideoId.commentsVideo};yield r._image.updateImage(f,w)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Gm),l.Y36(l.SBq),l.Y36(ga),l.Y36(o6),l.Y36(pu),l.Y36(An))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-galeria"]],decls:14,vars:7,consts:[[1,"contenedor"],[1,"box"],["class","con-input",4,"ngIf"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modal",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"con-input"],[1,"input-file-container"],["id","file-input","type","file",3,"change"],["for","file-input",1,"file-label"],[1,"fas","fa-plus"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[2,"display","inline-flex","gap","4rem"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],[4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"display","flex","align-items","center","justify-content","space-between"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-navbar"),l.YNc(3,a6,6,0,"div",2),l.TgZ(4,"div",3)(5,"div",4),l.YNc(6,u6,11,5,"div",5),l.qZA(),l.YNc(7,g6,6,8,"div",6),l.qZA()()(),l.TgZ(8,"div"),l.YNc(9,m6,11,0,"div",7),l.qZA(),l.YNc(10,v6,18,4,"div",8),l.TgZ(11,"div"),l.YNc(12,w6,10,0,"div",9),l.qZA(),l.YNc(13,E6,11,1,"div",10)),2&t&&(l.xp6(3),l.Q6J("ngIf",r.adm),l.xp6(3),l.Q6J("ngForOf",r.images),l.xp6(1),l.Q6J("ngIf",r.showMask),l.xp6(2),l.Q6J("ngIf",r.modal),l.xp6(1),l.Q6J("ngIf",r.modalcom),l.xp6(2),l.Q6J("ngIf",r.modalDelete),l.xp6(1),l.Q6J("ngIf",r.modalEditar))},dependencies:[ln,ks,kn,ml,wo,Gs,bs,Pr,Cs,Sc,nu,km],styles:[".contenedor[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:350px;cursor:zoom-in;border-radius:.35rem;margin-bottom:30px;margin-top:56px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:92%;height:50vh;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.con-input[_ngcontent-%COMP%]{padding:15px 0 20px}.file-label[_ngcontent-%COMP%]{padding:4px;font-size:14px}}@media (max-width: 500px){.caja[_ngcontent-%COMP%]{font-size:12px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:1}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}"]}),n})(),K2=(()=>{class n{constructor(t){this.firestore=t}getVideos(){return this.firestore.collection("videos").snapshotChanges()}getVideoById(t){return this.firestore.collection("videos").doc(t).valueChanges()}updateVideo(t,r){return this.firestore.collection("videos").doc(t).update(r)}addImagenInfo(t){return this.firestore.collection("videos").add(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(UT))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C6=(()=>{class n{constructor(t){this.firestore=t}updateLikesVideo(t,r){return this.firestore.collection("likes").doc(r).set({[t.id]:{likesCount:t.likesCountVideo,likedBy:t.likedByVideo}},{merge:!0})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(UT))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function I6(n,e){1&n&&(l.TgZ(0,"div",10)(1,"div",11),l._UZ(2,"button",12),l.TgZ(3,"label",13),l._UZ(4,"i",14),l._uU(5," Agregar nuevo video "),l.qZA()()())}function T6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",15)(1,"video",16),l._UZ(2,"source",17),l.qZA(),l.TgZ(3,"div",18)(4,"div",19)(5,"p",20),l._uU(6),l.qZA()(),l.TgZ(7,"div",21)(8,"div",22)(9,"i",23),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.abrirCom(a))}),l.qZA(),l.TgZ(10,"span"),l._uU(11),l.qZA()(),l.TgZ(12,"div",24)(13,"i",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw();return l.KtG(c.likeVideo(a))}),l.qZA(),l.TgZ(14,"span"),l._uU(15),l.qZA()()()()()}if(2&n){const t=e.$implicit,r=l.oxw();l.xp6(2),l.Q6J("src",t.url,l.LSH),l.xp6(4),l.hij(" ",t.nombre," "),l.xp6(5),l.Oqu(t.commentsVideo.length),l.xp6(2),l.ekj("liked",t.likedByVideo.includes(r.currentUser.uid)),l.xp6(2),l.Oqu(t.likesCountVideo)}}function D6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",26)(1,"div",27)(2,"span",28),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.close())}),l.qZA(),l.TgZ(3,"div",29)(4,"p"),l._uU(5," Primero debes "),l.TgZ(6,"a",30),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.salir())}),l._uU(7,"Iniciar Sesion"),l.qZA(),l._uU(8," o "),l.TgZ(9,"a",31),l._uU(10,"Registrate"),l.qZA()()()()()}}function A6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",44),l.NdJ("click",function(){l.CHM(t);const i=l.oxw(2);return l.KtG(i.close())}),l.qZA()}}function S6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"span"),l._uU(2),l.qZA(),l.TgZ(3,"div",45)(4,"p",46),l._uU(5),l.qZA(),l.TgZ(6,"div",47)(7,"div")(8,"i",25),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw(2);return l.KtG(c.likeComment(a))}),l.qZA(),l.TgZ(9,"span"),l._uU(10),l.qZA()(),l.TgZ(11,"i",48),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw(2);return l.KtG(c.abrirEditar(a))}),l.qZA(),l.TgZ(12,"i",49),l.NdJ("click",function(){const a=l.CHM(t).$implicit,c=l.oxw(2);return l.KtG(c.deleteModal(a))}),l.qZA()()()()}if(2&n){const t=e.$implicit,r=l.oxw(2);l.xp6(2),l.Oqu(t.usuario),l.xp6(3),l.Oqu(t.comentario),l.xp6(3),l.ekj("liked",t.likedByComment.includes(r.currentUser.uid)),l.xp6(2),l.Oqu(t.likesCountComment)}}function x6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",32)(1,"div",33),l.YNc(2,A6,1,0,"span",34),l.TgZ(3,"h3"),l._uU(4,"Comentarios:"),l.qZA(),l.TgZ(5,"div",35)(6,"div",36),l.YNc(7,S6,13,5,"div",37),l.qZA()(),l.TgZ(8,"div",38)(9,"form",39,40),l.NdJ("submit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.addComment(i.comentario))}),l.TgZ(11,"label",41),l._uU(12,"Agregar comentario:"),l.qZA(),l._UZ(13,"br"),l.TgZ(14,"textarea",42),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.comentario=i)}),l.qZA(),l._UZ(15,"br"),l.TgZ(16,"button",43),l._uU(17," Comentar "),l.qZA()()()()()}if(2&n){const t=l.MAs(10),r=l.oxw();l.xp6(2),l.Q6J("ngIf",r.ocultarx),l.xp6(5),l.Q6J("ngForOf",r.dataVideoId.commentsVideo),l.xp6(7),l.Q6J("ngModel",r.comentario),l.xp6(2),l.Q6J("disabled",!t.valid)}}function M6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",50)(1,"div",27)(2,"div",29)(3,"p"),l._uU(4,"\xbfDeseas eliminar este Comentario?"),l.qZA()(),l.TgZ(5,"div",51)(6,"button",52),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeDelete())}),l._uU(7,"Cancelar"),l.qZA(),l.TgZ(8,"button",52),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.borrarComentario())}),l._uU(9,"Aceptar"),l.qZA()()()()}}function R6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",53)(1,"div",27)(2,"div",29)(3,"p"),l._uU(4,"Editar comentario:"),l.qZA(),l.TgZ(5,"textarea",54),l.NdJ("ngModelChange",function(i){l.CHM(t);const a=l.oxw();return l.KtG(a.esteComentario=i)}),l.qZA()(),l.TgZ(6,"div",55)(7,"button",52),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.closeDelete())}),l._uU(8,"Cancelar"),l.qZA(),l.TgZ(9,"button",52),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.editarComentario())}),l._uU(10,"Aceptar"),l.qZA()()()()}if(2&n){const t=l.oxw();l.xp6(5),l.Q6J("ngModel",t.esteComentario)}}let P6=(()=>{class n{constructor(t,r,i,a,c,f){this.storage=t,this.afAuth=r,this._videosService=i,this.afs=a,this._users=c,this.router=f,this.videos=[],this.esInvitado=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.ocultarx=!0,this.adm=!1}ngOnInit(){this.getVideos(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getVideos(){this._videosService.getVideos().subscribe(t=>{this.videos=[],t.forEach(r=>{const i=r.payload.doc.data();this.videos.push({id:r.payload.doc.id,...i,likesCountVideo:i.likesCountVideo||0,likedByVideo:i.likedByVideo||[],userVideoLikes:i.userVideoLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeVideo(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const a=i.uid,c=i.displayName,f=i.email,y=t.likedByVideo.indexOf(a);-1!==y?(t.likedByVideo.splice(y,1),t.userVideoLikes.splice(y,1),t.likesCountVideo--):(t.likedByVideo.push(a),t.likesCountVideo++,t.userVideoLikes.push({usuario:c,correo:f}));const w=t.id,D={likesCountVideo:t.likesCountVideo,likedByVideo:t.likedByVideo,userVideoLikes:t.userVideoLikes};yield r._videosService.updateVideo(w,D)}else r.modal=!0})()}addComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const a=r.dataVideoId,c=r.dataVideoId.id;a.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t});const w={commentsVideo:a.commentsVideo};yield r._videosService.updateVideo(c,w),r.comentario=""}})()}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}abrirCom(t){var r=this;return(0,fe.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}deleteModal(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(a=>{console.error("Error al eliminar el comentario:",a)})):console.error("\xcdndice de comentario no v\xe1lido")}abrirEditar(t){var r=this;return(0,fe.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const a=i.uid,c=t.likedByComment.indexOf(a);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(a),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(w=>w===t)){const w={commentsVideo:r.dataVideoId.commentsVideo};yield r._videosService.updateVideo(f,w),console.log(w)}}else r.modal=!0})()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Gm),l.Y36(ga),l.Y36(K2),l.Y36(UT),l.Y36(C6),l.Y36(An))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-videos"]],decls:13,vars:6,consts:[[1,"contenedor"],[1,"box"],["class","con-input",4,"ngIf"],[1,"video-container"],[1,"video"],["width","320","height","240","class","gallery-video",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"con-input"],[1,"input-file-container"],["routerLink","/nuevo-video","id","file-input"],["for","file-input",1,"file-label"],[1,"fas","fa-plus"],["width","320","height","240",1,"gallery-video"],["controls",""],["type","video/mp4",3,"src"],[1,"section"],[1,"title"],[2,"margin","0"],[1,"bocadillos"],[1,"comment"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"likes"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"],[1,"modalcom"],[1,"modal-com"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],[4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"display","flex","align-items","center","justify-content","space-between"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-navbar"),l.YNc(3,I6,6,0,"div",2),l.TgZ(4,"div",3)(5,"div",4),l.YNc(6,T6,16,6,"div",5),l.qZA()()()(),l.TgZ(7,"div"),l.YNc(8,D6,11,0,"div",6),l.qZA(),l.YNc(9,x6,18,4,"div",7),l.TgZ(10,"div"),l.YNc(11,M6,10,0,"div",8),l.qZA(),l.YNc(12,R6,11,1,"div",9)),2&t&&(l.xp6(3),l.Q6J("ngIf",r.adm),l.xp6(3),l.Q6J("ngForOf",r.videos),l.xp6(2),l.Q6J("ngIf",r.modal),l.xp6(1),l.Q6J("ngIf",r.modalcom),l.xp6(2),l.Q6J("ngIf",r.modalDelete),l.xp6(1),l.Q6J("ngIf",r.modalEditar))},dependencies:[ks,kn,vh,ml,wo,Gs,bs,Pr,Cs,Sc,nu,km],styles:[".contenedor[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}.bocadillos[_ngcontent-%COMP%]{display:flex;gap:1rem}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.video-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;padding:25px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);column-gap:30px;row-gap:30px}.gallery-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:.35rem;margin-bottom:17px;box-shadow:0 1px 5px #00000036}@media (max-width: 900px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 580px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]}),n})();function N6(n,e){if(1&n&&(l.TgZ(0,"div",4)(1,"p",5),l._uU(2),l.qZA(),l.TgZ(3,"audio",6),l._UZ(4,"source",7),l.qZA()()),2&n){const t=e.$implicit;l.xp6(2),l.Oqu(t.title),l.xp6(2),l.Q6J("src",t.url,l.LSH)}}let k6=(()=>{class n{constructor(t){this.storage=t,this.musica=[],this.titulos=["Aguanile","Arrepientete","Asi soy yo","Bam bam bidi bim bam bam","Batman y el hombre Ara\xf1a","Caderona","Con la punta del pie","Donde estabas tu","Welcome to party","La negra tiene tumbao","Llora Corazon","Payaso","Cancion 13","Lupita","Paloma","Yo soy el rey","Cancion 17","Sangre son colora","Sangre son colora (editado)","boogalo 1","Cancion 21","Cancion 22","Cancion 23","Todo tiene su final (editado)","Cancion 25","Cancion 26","Cancion 27","Omele","Boogalo 2","Aguazate","Aqui no ha pasado nada","Saraguey santoja","Arranca en fa","Arroyando","Asi soy yo (edit)","Askarakatiski","Ballandel","Bam bam (edit)","Bomba caranbomba","Boogalo 3","Boogalo 4","Boogalo 5","Boogalo 6","Cancion 45","Boogalo 7","Boogalo 8","Boogalo 9","Boogalo 10","Boogalo 11","Boogalo 12","Boogalo 13","Cancion 53","Cachondea","Cancion 54","Camina como chencha","Cancion 56","Carmen","Cancion 57","Cancion 58","Cancion 59","Cancion 60","Cancion 61","Ran kan kan","Echo chi echo no","El malo","Cancion 65","Federico boogalo","Fuego pal 23","Hagan silencio","Indestructible","Lancion 70","cancion 71","La bamba","Cancion 73","La luz del cielo","La pelota","Cancion 76","Mambo rock","Merecumbe","Boogalo 14","Boogalo 15","Mondongo","Oh mayi","Pal 23","Cancion 85","Pruebalo","Quimbara (edit)","Quimbara","Cancion 89","Cancion 90","Cancion 91","Cancion 92","Cancion 93","Fuma el barco","Sonido bestial","Cancion 96","Cancion 97","Cancion 98","Cancion 99","El yoyo","Tremendo rumbon","Tres pata","Tres pata v2","Cancion 104","Cancion 105"]}ngOnInit(){this.getMusica()}subirArchivo(t){const r=t.target.files[0],i=cI(this.storage,`videos/${r.name}`);XN(i,r).then(()=>{this.getMusica()}).catch(a=>console.log(a))}getMusica(){var t=this;return(0,fe.Z)(function*(){const r=cI(t.storage,"musica");try{const i=yield JN(r);t.musica=yield Promise.all(i.items.map(function(){var a=(0,fe.Z)(function*(c,f){const y=yield QN(c);return{title:t.titulos[f]||`Canci\xf3n ${f+1}`,url:y}});return function(c,f){return a.apply(this,arguments)}}()))}catch(i){console.log(i)}})()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Gm))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-musica"]],decls:5,vars:1,consts:[[1,"contenedor"],[1,"box"],[1,"musica-container"],["class","musica",4,"ngFor","ngForOf"],[1,"musica"],[2,"margin-bottom","10px"],["controls",""],["type","audio/mp3",3,"src"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-navbar"),l.TgZ(3,"div",2),l.YNc(4,N6,5,2,"div",3),l.qZA()()()),2&t&&(l.xp6(4),l.Q6J("ngForOf",r.musica))},dependencies:[ks,km],styles:[".contenedor[_ngcontent-%COMP%]{background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.musica-container[_ngcontent-%COMP%]{margin-top:25px;display:flex;flex-wrap:wrap;justify-content:space-around}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),Y2=(()=>{class n{constructor(t){this.toastr=t}mensaje(t){return"auth/invalid-email"===t?"Por favor, introduce un correo electr\xf3nico v\xe1lido.":""}errorFirebase(t){switch(t){case"auth/user-not-found":case"auth/wrong-password":this.toastr.error("Usuario/Contrase\xf1a invalida","Error");break;case"auth/invalid-email":this.toastr.error("No hay correo valido o llena todos los campos","Error");break;case"auth/invalid-login-credentials":this.toastr.error("El correo o contrase\xf1a no son correctos","Error");break;case"auth/missing-password":this.toastr.error("Digita la contrase\xf1a","Error");break;case"auth/email-already-in-use":this.toastr.error("Usuario ya registrado","Error");break;case"auth/weak-password":this.toastr.error("Contrase\xf1a Debil","Error");break;case"auth/internal-error":this.toastr.error("Correo no valido","Error")}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(pu))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-spinner"]],decls:3,vars:0,consts:[["role","status",1,"spinner"],[1,"visually-hidden"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"span",1),l._uU(2,"Loading..."),l.qZA()())},styles:['@charset "UTF-8";.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}']}),n})();function O6(n,e){1&n&&(l.TgZ(0,"span",19),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"correo "),l.qZA(),l._uU(4,"es requerido"),l.qZA())}function F6(n,e){1&n&&(l.TgZ(0,"span",19),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"correo "),l.qZA(),l._uU(4,"es invalido"),l.qZA())}function L6(n,e){1&n&&(l.TgZ(0,"span",19),l._uU(1,"La "),l.TgZ(2,"strong"),l._uU(3,"contrase\xf1a "),l.qZA(),l._uU(4,"debe contener mas de 6 caracteres"),l.qZA())}function V6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",3)(1,"form",4),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.login())}),l.TgZ(2,"div")(3,"h2",5),l._uU(4,"Asi Somos Asi Bailamos"),l.qZA()(),l.TgZ(5,"h2",6),l._uU(6,"Iniciar sesi\xf3n"),l.qZA(),l.TgZ(7,"div",7)(8,"label",8),l._uU(9,"Correo electr\xf3nico"),l.qZA(),l._UZ(10,"input",9),l.YNc(11,O6,5,0,"span",10),l.YNc(12,F6,5,0,"span",10),l.qZA(),l.TgZ(13,"div",7)(14,"label",11),l._uU(15,"Contrase\xf1a"),l.qZA(),l._UZ(16,"input",12),l.YNc(17,L6,5,0,"span",10),l.qZA(),l.TgZ(18,"div",13)(19,"a",14),l._uU(20,"\xbfOlvidaste tu contrase\xf1a?"),l.qZA(),l.TgZ(21,"a",15),l._uU(22,"Registrarse"),l.qZA()(),l.TgZ(23,"button",16),l._uU(24,"Iniciar sesi\xf3n"),l.qZA(),l.TgZ(25,"div",17)(26,"a",18),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.loginAsGuest())}),l._uU(27,"Iniciar sesi\xf3n como invitado"),l.qZA()()()()}if(2&n){const t=l.oxw();let r,i,a;l.xp6(1),l.Q6J("formGroup",t.loginUsuario),l.xp6(10),l.Q6J("ngIf",(null==(r=t.loginUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.loginUsuario.get("email"))?null:r.touched)),l.xp6(1),l.Q6J("ngIf",(null==(i=t.loginUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.loginUsuario.get("email"))?null:i.touched)),l.xp6(5),l.Q6J("ngIf",(null==(a=t.loginUsuario.get("password"))?null:a.hasError("required"))&&(null==(a=t.loginUsuario.get("password"))?null:a.touched))}}function U6(n,e){1&n&&(l.TgZ(0,"div",20)(1,"h2",21),l._uU(2,"Asi Somos Asi Bailamos"),l.qZA(),l.TgZ(3,"span",22),l._uU(4,"Iniciando sesion..."),l.qZA(),l._UZ(5,"app-spinner"),l.qZA())}let B6=(()=>{class n{constructor(t,r,i,a,c){this.toastr=t,this.fb=r,this.firebaseError=i,this.afAuth=a,this.router=c,this.loading=!1,this.verificar=!1,this.message="",this.loginUsuario=this.fb.group({email:["",[Rr.required,Rr.email]],password:["",Rr.required]})}ngOnInit(){}login(){const t=this.loginUsuario.value.email,r=this.loginUsuario.value.password;this.loading=!0,this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.router.navigate(["/main"]),this.loading=!1}).catch(i=>{this.loading=!1,this.verificar=!0,this.firebaseError.errorFirebase(i.code),this.message=this.firebaseError.mensaje(i.code),setTimeout(()=>{this.message=""},2e3)})}loginAsGuest(){this.loading=!0,this.afAuth.signInWithEmailAndPassword("soyinvitado@gmail.com","123456").then(()=>{this.loading=!1,this.router.navigate(["/main"])}).catch(i=>{this.loading=!1,console.error("Error al iniciar sesi\xf3n con invitado:",i)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(pu),l.Y36(Cf),l.Y36(Y2),l.Y36(ga),l.Y36(An))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login-form"]],decls:3,vars:2,consts:[[2,"display","flex","justify-content","center","height","100vh","background-color","white"],["class","container-login",4,"ngIf"],["style","\n      display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;\n    ",4,"ngIf"],[1,"container-login"],[1,"form-contenedor",3,"formGroup","ngSubmit"],[1,"elH2",2,"user-select","none"],[1,"form-title",2,"user-select","none"],[1,"form-group"],["for","email",2,"user-select","none"],["type","email","name","email","placeholder","correo electronico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],["for","password",2,"user-select","none"],["type","password","id","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],[1,"form-group","form-links"],["routerLink","/recuperar",1,"forgot-password",2,"user-select","none"],["routerLink","/registrar",1,"register-link",2,"user-select","none"],["type","submit",1,"submit-button"],[2,"text-align","center","margin-top","14px"],[1,"register-link",2,"user-select","none","cursor","pointer",3,"click"],[1,"text-danger","errorLabel"],[2,"display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[1,"elH2"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,V6,28,4,"div",1),l.YNc(2,U6,6,0,"div",2),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",!r.loading),l.xp6(1),l.Q6J("ngIf",r.loading))},dependencies:[kn,ml,wo,Gs,bs,Pr,ol,Yd,KR],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px;-webkit-user-select:none;user-select:none}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#0040ff;color:#fffefe}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}.container-login[_ngcontent-%COMP%]{margin-top:8%;width:30%}.logo[_ngcontent-%COMP%]{position:absolute}@media screen and (max-width: 600px){.container-login[_ngcontent-%COMP%]{margin-top:19%;width:87%}.logo[_ngcontent-%COMP%]{display:none}}"]}),n})();function j6(n,e){1&n&&(l.TgZ(0,"span",20),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"nombre de usuario"),l.qZA(),l._uU(4," es requerido"),l.qZA())}function $6(n,e){1&n&&(l.TgZ(0,"span",20),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"correo "),l.qZA(),l._uU(4,"es requerido"),l.qZA())}function H6(n,e){1&n&&(l.TgZ(0,"span",20),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"correo "),l.qZA(),l._uU(4,"es inv\xe1lido"),l.qZA())}function G6(n,e){1&n&&(l.TgZ(0,"span",20),l._uU(1,"La "),l.TgZ(2,"strong"),l._uU(3,"contrase\xf1a "),l.qZA(),l._uU(4,"debe contener m\xe1s de 6 caracteres"),l.qZA())}function z6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"form",3,4),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.registrar())}),l.TgZ(3,"h2",5),l._uU(4,"Asi Somos Asi Bailamos"),l.qZA(),l.TgZ(5,"h2",6),l._uU(6,"REGISTRARSE"),l.qZA(),l.TgZ(7,"div",7)(8,"label",8),l._uU(9,"Nombre de Usuario"),l.qZA(),l._UZ(10,"input",9),l.YNc(11,j6,5,0,"span",10),l.qZA(),l.TgZ(12,"div",7)(13,"label",11),l._uU(14,"Correo electr\xf3nico"),l.qZA(),l._UZ(15,"input",12),l.YNc(16,$6,5,0,"span",10),l.YNc(17,H6,5,0,"span",10),l.qZA(),l.TgZ(18,"div",7)(19,"label",13),l._uU(20,"Contrase\xf1a"),l.qZA(),l._UZ(21,"input",14),l.YNc(22,G6,5,0,"span",10),l.qZA(),l.TgZ(23,"div",7)(24,"label",15),l._uU(25,"Repetir Contrase\xf1a"),l.qZA(),l._UZ(26,"input",16),l.qZA(),l.TgZ(27,"div",17)(28,"button",18),l.NdJ("click",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.goBack())}),l._uU(29," Volver "),l.qZA(),l.TgZ(30,"button",19),l._uU(31,"Registrar"),l.qZA()()()()}if(2&n){const t=l.oxw();let r,i,a,c;l.xp6(1),l.Q6J("formGroup",t.registrarUsuario),l.xp6(10),l.Q6J("ngIf",(null==(r=t.registrarUsuario.get("username"))?null:r.hasError("required"))&&(null==(r=t.registrarUsuario.get("username"))?null:r.touched)),l.xp6(5),l.Q6J("ngIf",(null==(i=t.registrarUsuario.get("email"))?null:i.hasError("required"))&&(null==(i=t.registrarUsuario.get("email"))?null:i.touched)),l.xp6(1),l.Q6J("ngIf",(null==(a=t.registrarUsuario.get("email"))?null:a.hasError("email"))&&(null==(a=t.registrarUsuario.get("email"))?null:a.touched)),l.xp6(5),l.Q6J("ngIf",(null==(c=t.registrarUsuario.get("password"))?null:c.hasError("required"))&&(null==(c=t.registrarUsuario.get("password"))?null:c.touched)),l.xp6(8),l.Q6J("disabled",t.registrarUsuario.invalid)}}function q6(n,e){1&n&&(l.TgZ(0,"div",21)(1,"h2",5),l._uU(2,"Asi Somos Asi Bailamos"),l.qZA(),l.TgZ(3,"span",22),l._uU(4,"Registrando..."),l.qZA(),l._UZ(5,"app-spinner"),l.qZA())}let W6=(()=>{class n{constructor(t,r,i,a,c,f){this.fb=t,this.afAuth=r,this.router=i,this.firebaseError=a,this.toastr=c,this.location=f,this.loading=!1,this.registrarUsuario=this.fb.group({username:["",Rr.required],email:["",[Rr.required,Rr.email]],password:["",[Rr.required,Rr.minLength(6)]],repetirPassword:["",Rr.required]})}ngOnInit(){}registrar(){const t=this.registrarUsuario.value.username,r=this.registrarUsuario.value.email,i=this.registrarUsuario.value.password;i===this.registrarUsuario.value.repetirPassword?(this.loading=!0,this.afAuth.createUserWithEmailAndPassword(r,i).then(c=>c.user?.updateProfile({displayName:t})).then(c=>{this.router.navigate(["/login"]),this.toastr.success("El usuario fue registrado con exito!!","Usuario Registrado")}).catch(c=>{this.loading=!1,console.log(c),this.firebaseError.errorFirebase(c.code)})):this.toastr.error("Las contrase\xf1as no coinciden","Error")}goBack(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Cf),l.Y36(ga),l.Y36(An),l.Y36(Y2),l.Y36(pu),l.Y36(Se))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-registrar-usuario"]],decls:2,vars:2,consts:[["class","content",4,"ngIf"],["style"," background-color: white; display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;",4,"ngIf"],[1,"content"],[1,"login-form",3,"formGroup","ngSubmit"],["loginForm","ngForm"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["for","username"],["type","text","name","username","placeholder","Nombre de Usuario","formControlName","username"],["class","text-danger errorLabel",4,"ngIf"],["for","email"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["for","password"],["type","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],["for","repetirPassword"],["type","password","name","password","placeholder","Repetir contrase\xf1a","formControlName","repetirPassword"],[2,"display","flex","gap","2px"],["type","button",1,"submit",2,"background-color","blue",3,"click"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"background-color","white","display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(l.YNc(0,z6,32,6,"div",0),l.YNc(1,q6,6,0,"div",1)),2&t&&(l.Q6J("ngIf",!r.loading),l.xp6(1),l.Q6J("ngIf",r.loading))},dependencies:[kn,wo,Gs,bs,Pr,ol,Yd,KR],styles:[".login-form[_ngcontent-%COMP%]{margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a;height:94vh}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#e44d42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})();function Z6(n,e){1&n&&(l.TgZ(0,"span",12),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"correo "),l.qZA(),l._uU(4,"es requerido"),l.qZA())}function K6(n,e){1&n&&(l.TgZ(0,"span",12),l._uU(1,"El "),l.TgZ(2,"strong"),l._uU(3,"correo "),l.qZA(),l._uU(4,"es invalido"),l.qZA())}function Y6(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div",2)(1,"form",3),l.NdJ("ngSubmit",function(){l.CHM(t);const i=l.oxw();return l.KtG(i.recuperar())}),l.TgZ(2,"h2",4),l._uU(3,"Asi Somos Asi Bailamos"),l.qZA(),l.TgZ(4,"h2",5),l._uU(5,"RECUPERAR CUENTA"),l.qZA(),l.TgZ(6,"div",6),l._UZ(7,"input",7),l.YNc(8,Z6,5,0,"span",8),l.YNc(9,K6,5,0,"span",8),l.qZA(),l.TgZ(10,"div",9)(11,"button",10),l._uU(12," Volver "),l.qZA(),l.TgZ(13,"button",11),l._uU(14,"Aceptar"),l.qZA()()()()}if(2&n){const t=l.oxw();let r,i;l.xp6(1),l.Q6J("formGroup",t.recuperarUsuario),l.xp6(7),l.Q6J("ngIf",(null==(r=t.recuperarUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.recuperarUsuario.get("email"))?null:r.touched)),l.xp6(1),l.Q6J("ngIf",(null==(i=t.recuperarUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.recuperarUsuario.get("email"))?null:i.touched)),l.xp6(4),l.Q6J("disabled",t.recuperarUsuario.invalid)}}function Q6(n,e){1&n&&(l.TgZ(0,"div",13)(1,"h2",4),l._uU(2,"Asi Somos Asi Bailamos"),l.qZA(),l.TgZ(3,"span",14),l._uU(4,"Registrando..."),l.qZA(),l._UZ(5,"app-spinner"),l.qZA())}let J6=(()=>{class n{constructor(t,r,i,a){this.fb=t,this.afAuth=r,this.router=i,this.toastr=a,this.loading=!1,this.recuperarUsuario=this.fb.group({email:["",[Rr.required,Rr.email]]})}ngOnInit(){}recuperar(){const t=this.recuperarUsuario.value.email;this.loading=!0,this.afAuth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/login"]),this.toastr.info("Revisa tu correo para restablecer tu contrase\xf1a","Peticion Aceptada")}).catch(r=>{this.loading=!1,this.firebaseError(r.code)})}firebaseError(t){switch(t){case"auth/user-not-found":this.toastr.error("Este correo no es valido","Error");break;case"auth/missing-email":this.toastr.error("Inserta un correo","Error")}}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Cf),l.Y36(ga),l.Y36(An),l.Y36(pu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-recuperar-contrasena"]],decls:3,vars:2,consts:[["style","margin-top: 8%",4,"ngIf"],["style","display: flex;background-color: white;\n    height: 90vh;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;",4,"ngIf"],[2,"margin-top","8%"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],[2,"display","flex","gap","2px"],["type","button","routerLink","/login",1,"submit",2,"background-color","blue"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"display","flex","background-color","white","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(l.TgZ(0,"div"),l.YNc(1,Y6,15,4,"div",0),l.YNc(2,Q6,6,0,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngIf",!r.loading),l.xp6(1),l.Q6J("ngIf",r.loading))},dependencies:[kn,vh,wo,Gs,bs,Pr,ol,Yd,KR],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})(),X6=(()=>{class n{constructor(t){this.afAuth=t}isLoggedIn(){return this.afAuth.authState.pipe((0,ft.U)(t=>!!t))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ga))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Sw=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn().pipe((0,ft.U)(i=>!!i||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(X6),l.LFG(An))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const e4=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:B6},{path:"registrar",component:W6},{path:"recuperar",component:J6},{path:"main",component:Kv,canActivate:[Sw]},{path:"galeria",component:b6,canActivate:[Sw]},{path:"videos",component:P6,canActivate:[Sw]},{path:"nuevo-video",component:(()=>{class n{constructor(t,r,i){this._videosService=t,this.router=r,this.toastr=i,this.subir={nombre:"",url:""}}ngOnInit(){}subirVideo(){console.log(this.subir),this._videosService.addImagenInfo(this.subir).then(()=>{this.router.navigate(["/videos"]),this.toastr.success("Agregando nuevo video")})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(K2),l.Y36(An),l.Y36(pu))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-form-video"]],decls:17,vars:2,consts:[[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["name","nombre","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["name","url","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["type","submit"],["routerLink","/videos",2,"background-color","green"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"form",2),l.NdJ("ngSubmit",function(){return r.subirVideo()}),l.TgZ(3,"div",3)(4,"label"),l._uU(5,"Nombre"),l.qZA(),l.TgZ(6,"input",4),l.NdJ("ngModelChange",function(a){return r.subir.nombre=a}),l.qZA()(),l.TgZ(7,"div",3)(8,"label"),l._uU(9,"Url"),l.qZA(),l.TgZ(10,"input",5),l.NdJ("ngModelChange",function(a){return r.subir.url=a}),l.qZA()(),l.TgZ(11,"div",3)(12,"button",6),l._uU(13,"Agregar Video"),l.qZA()(),l.TgZ(14,"div",3)(15,"button",7),l._uU(16,"Volver"),l.qZA()()()()()),2&t&&(l.xp6(6),l.Q6J("ngModel",r.subir.nombre),l.xp6(4),l.Q6J("ngModel",r.subir.url))},dependencies:[vh,wo,Gs,bs,Pr,Sc,nu],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{width:80%;max-width:400px;padding:20px;background-color:#f5f5f5;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;cursor:pointer;transition:background-color .3s ease;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]}),n})(),canActivate:[Sw]},{path:"musica",component:k6,canActivate:[Sw]},{path:"**",redirectTo:"/",pathMatch:"full"}];let t4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[gC.forRoot(e4),gC]}),n})(),n4=(()=>{class n{constructor(){this.title="asi-somos-asi-bailamos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[X_]}),n})();const YR_firebase={apiKey:"AIzaSyC-xnNzaTCFveAr77Iqf1CQ-wRct6kCBkQ",authDomain:"fitpal-horario.firebaseapp.com",projectId:"fitpal-horario",storageBucket:"fitpal-horario.appspot.com",messagingSenderId:"240368209776",appId:"1:240368209776:web:7b2960966943d391e049b5"};let r4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[n4]}),n.\u0275inj=l.cJS({imports:[qa,t4,iD,Gw,QD,xo.hO.initializeApp(YR_firebase),EC(()=>fS(YR_firebase)),CU(()=>IU()),Pm,Zv.forRoot({timeOut:4e3,positionClass:"toast-bottom-right",preventDuplicates:!0})]}),n})();(0,l.G48)(),oc().bootstrapModule(r4).catch(n=>console.error(n))},9751:(wt,Oe,V)=>{V.d(Oe,{y:()=>ve});var l=V(2961),j=V(727),O=V(8822),re=V(9635),le=V(2416),ye=V(576),pe=V(2806);let ve=(()=>{class J{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const De=new J;return De.source=this,De.operator=ke,De}subscribe(ke,De,it){const Ee=function z(J){return J&&J instanceof l.Lv||function q(J){return J&&(0,ye.m)(J.next)&&(0,ye.m)(J.error)&&(0,ye.m)(J.complete)}(J)&&(0,j.Nn)(J)}(ke)?ke:new l.Hp(ke,De,it);return(0,pe.x)(()=>{const{operator:_e,source:_t}=this;Ee.add(_e?_e.call(Ee,_t):_t?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(ke){try{return this._subscribe(ke)}catch(De){ke.error(De)}}forEach(ke,De){return new(De=we(De))((it,Ee)=>{const _e=new l.Hp({next:_t=>{try{ke(_t)}catch(pt){Ee(pt),_e.unsubscribe()}},error:Ee,complete:it});this.subscribe(_e)})}_subscribe(ke){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(ke)}[O.L](){return this}pipe(...ke){return(0,re.U)(ke)(this)}toPromise(ke){return new(ke=we(ke))((De,it)=>{let Ee;this.subscribe(_e=>Ee=_e,_e=>it(_e),()=>De(Ee))})}}return J.create=$e=>new J($e),J})();function we(J){var $e;return null!==($e=J??le.v.Promise)&&void 0!==$e?$e:Promise}},7579:(wt,Oe,V)=>{V.d(Oe,{x:()=>pe});var l=V(9751),j=V(727);const re=(0,V(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=V(8737),ye=V(2806);let pe=(()=>{class we extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new ve(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new re}next(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:$e,observers:ke}=this;return J||$e?j.Lc:(this.currentObservers=null,ke.push(z),new j.w0(()=>{this.currentObservers=null,(0,le.P)(ke,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:$e,isStopped:ke}=this;J?z.error($e):ke&&z.complete()}asObservable(){const z=new l.y;return z.source=this,z}}return we.create=(q,z)=>new ve(q,z),we})();class ve extends pe{constructor(q,z){super(),this.destination=q,this.source=z}next(q){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,q)}error(q){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,q)}complete(){var q,z;null===(z=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===z||z.call(q)}_subscribe(q){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(q))&&void 0!==J?J:j.Lc}}},2961:(wt,Oe,V)=>{V.d(Oe,{Hp:()=>it,Lv:()=>J});var l=V(576),j=V(727),O=V(2416),re=V(7849);function le(){}const ye=we("C",void 0,void 0);function we(Se,Ie,xe){return{kind:Se,value:Ie,error:xe}}var q=V(3410),z=V(2806);class J extends j.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,j.Nn)(Ie)&&Ie.add(this)):this.destination=pt}static create(Ie,xe,Ge){return new it(Ie,xe,Ge)}next(Ie){this.isStopped?_t(function ve(Se){return we("N",Se,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?_t(function pe(Se){return we("E",void 0,Se)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?_t(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function ke(Se,Ie){return $e.call(Se,Ie)}class De{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ie)}catch(Ge){Ee(Ge)}}error(Ie){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ie)}catch(Ge){Ee(Ge)}else Ee(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(xe){Ee(xe)}}}class it extends J{constructor(Ie,xe,Ge){let ze;if(super(),(0,l.m)(Ie)||!Ie)ze={next:Ie??void 0,error:xe??void 0,complete:Ge??void 0};else{let ue;this&&O.v.useDeprecatedNextContext?(ue=Object.create(Ie),ue.unsubscribe=()=>this.unsubscribe(),ze={next:Ie.next&&ke(Ie.next,ue),error:Ie.error&&ke(Ie.error,ue),complete:Ie.complete&&ke(Ie.complete,ue)}):ze=Ie}this.destination=new De(ze)}}function Ee(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Se):(0,re.h)(Se)}function _t(Se,Ie){const{onStoppedNotification:xe}=O.v;xe&&q.z.setTimeout(()=>xe(Se,Ie))}const pt={closed:!0,next:le,error:function _e(Se){throw Se},complete:le}},727:(wt,Oe,V)=>{V.d(Oe,{Lc:()=>ye,w0:()=>le,Nn:()=>pe});var l=V(576);const O=(0,V(3888).d)(we=>function(z){we(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var re=V(8737);class le{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const ke of z)ke.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,l.m)(J))try{J()}catch(ke){q=ke instanceof O?ke.errors:[ke]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const ke of $e)try{ve(ke)}catch(De){q=q??[],De instanceof O?q=[...q,...De.errors]:q.push(De)}}if(q)throw new O(q)}}add(q){var z;if(q&&q!==this)if(this.closed)ve(q);else{if(q instanceof le){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(q)}}_hasParent(q){const{_parentage:z}=this;return z===q||Array.isArray(z)&&z.includes(q)}_addParent(q){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(q),z):z?[z,q]:q}_removeParent(q){const{_parentage:z}=this;z===q?this._parentage=null:Array.isArray(z)&&(0,re.P)(z,q)}remove(q){const{_finalizers:z}=this;z&&(0,re.P)(z,q),q instanceof le&&q._removeParent(this)}}le.EMPTY=(()=>{const we=new le;return we.closed=!0,we})();const ye=le.EMPTY;function pe(we){return we instanceof le||we&&"closed"in we&&(0,l.m)(we.remove)&&(0,l.m)(we.add)&&(0,l.m)(we.unsubscribe)}function ve(we){(0,l.m)(we)?we():we.unsubscribe()}},2416:(wt,Oe,V)=>{V.d(Oe,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,Oe,V)=>{V.d(Oe,{E:()=>j});const j=new(V(9751).y)(le=>le.complete())},8996:(wt,Oe,V)=>{V.d(Oe,{D:()=>Ie});var l=V(8421),j=V(5363),O=V(9468),ye=V(9751),ve=V(2202),we=V(576),q=V(9672);function J(xe,Ge){if(!xe)throw new Error("Iterable cannot be null");return new ye.y(ze=>{(0,q.f)(ze,Ge,()=>{const ue=xe[Symbol.asyncIterator]();(0,q.f)(ze,Ge,()=>{ue.next().then(Ke=>{Ke.done?ze.complete():ze.next(Ke.value)})},0,!0)})})}var $e=V(3670),ke=V(8239),De=V(1144),it=V(6495),Ee=V(2206),_e=V(4532),_t=V(3260);function Ie(xe,Ge){return Ge?function Se(xe,Ge){if(null!=xe){if((0,$e.c)(xe))return function re(xe,Ge){return(0,l.Xf)(xe).pipe((0,O.R)(Ge),(0,j.Q)(Ge))}(xe,Ge);if((0,De.z)(xe))return function pe(xe,Ge){return new ye.y(ze=>{let ue=0;return Ge.schedule(function(){ue===xe.length?ze.complete():(ze.next(xe[ue++]),ze.closed||this.schedule())})})}(xe,Ge);if((0,ke.t)(xe))return function le(xe,Ge){return(0,l.Xf)(xe).pipe((0,O.R)(Ge),(0,j.Q)(Ge))}(xe,Ge);if((0,Ee.D)(xe))return J(xe,Ge);if((0,it.T)(xe))return function z(xe,Ge){return new ye.y(ze=>{let ue;return(0,q.f)(ze,Ge,()=>{ue=xe[ve.h](),(0,q.f)(ze,Ge,()=>{let Ke,At;try{({value:Ke,done:At}=ue.next())}catch(gt){return void ze.error(gt)}At?ze.complete():ze.next(Ke)},0,!0)}),()=>(0,we.m)(ue?.return)&&ue.return()})}(xe,Ge);if((0,_t.L)(xe))return function pt(xe,Ge){return J((0,_t.Q)(xe),Ge)}(xe,Ge)}throw(0,_e.z)(xe)}(xe,Ge):(0,l.Xf)(xe)}},8421:(wt,Oe,V)=>{V.d(Oe,{Xf:()=>$e});var l=V(7582),j=V(1144),O=V(8239),re=V(9751),le=V(3670),ye=V(2206),pe=V(4532),ve=V(6495),we=V(3260),q=V(576),z=V(7849),J=V(8822);function $e(Se){if(Se instanceof re.y)return Se;if(null!=Se){if((0,le.c)(Se))return function ke(Se){return new re.y(Ie=>{const xe=Se[J.L]();if((0,q.m)(xe.subscribe))return xe.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,j.z)(Se))return function De(Se){return new re.y(Ie=>{for(let xe=0;xe<Se.length&&!Ie.closed;xe++)Ie.next(Se[xe]);Ie.complete()})}(Se);if((0,O.t)(Se))return function it(Se){return new re.y(Ie=>{Se.then(xe=>{Ie.closed||(Ie.next(xe),Ie.complete())},xe=>Ie.error(xe)).then(null,z.h)})}(Se);if((0,ye.D)(Se))return _e(Se);if((0,ve.T)(Se))return function Ee(Se){return new re.y(Ie=>{for(const xe of Se)if(Ie.next(xe),Ie.closed)return;Ie.complete()})}(Se);if((0,we.L)(Se))return function _t(Se){return _e((0,we.Q)(Se))}(Se)}throw(0,pe.z)(Se)}function _e(Se){return new re.y(Ie=>{(function pt(Se,Ie){var xe,Ge,ze,ue;return(0,l.mG)(this,void 0,void 0,function*(){try{for(xe=(0,l.KL)(Se);!(Ge=yield xe.next()).done;)if(Ie.next(Ge.value),Ie.closed)return}catch(Ke){ze={error:Ke}}finally{try{Ge&&!Ge.done&&(ue=xe.return)&&(yield ue.call(xe))}finally{if(ze)throw ze.error}}Ie.complete()})})(Se,Ie).catch(xe=>Ie.error(xe))})}},6451:(wt,Oe,V)=>{V.d(Oe,{T:()=>ye});var l=V(8189),j=V(8421),O=V(515),re=V(7669),le=V(8996);function ye(...pe){const ve=(0,re.yG)(pe),we=(0,re._6)(pe,1/0),q=pe;return q.length?1===q.length?(0,j.Xf)(q[0]):(0,l.J)(we)((0,le.D)(q,ve)):O.E}},5403:(wt,Oe,V)=>{V.d(Oe,{x:()=>j});var l=V(2961);function j(re,le,ye,pe,ve){return new O(re,le,ye,pe,ve)}class O extends l.Lv{constructor(le,ye,pe,ve,we,q){super(le),this.onFinalize=we,this.shouldUnsubscribe=q,this._next=ye?function(z){try{ye(z)}catch(J){le.error(J)}}:super._next,this._error=ve?function(z){try{ve(z)}catch(J){le.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){le.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(wt,Oe,V)=>{V.d(Oe,{U:()=>O});var l=V(4482),j=V(5403);function O(re,le){return(0,l.e)((ye,pe)=>{let ve=0;ye.subscribe((0,j.x)(pe,we=>{pe.next(re.call(le,we,ve++))}))})}},8189:(wt,Oe,V)=>{V.d(Oe,{J:()=>O});var l=V(5577),j=V(4671);function O(re=1/0){return(0,l.z)(j.y,re)}},5577:(wt,Oe,V)=>{V.d(Oe,{z:()=>ve});var l=V(4004),j=V(8421),O=V(4482),re=V(9672),le=V(5403),pe=V(576);function ve(we,q,z=1/0){return(0,pe.m)(q)?ve((J,$e)=>(0,l.U)((ke,De)=>q(J,ke,$e,De))((0,j.Xf)(we(J,$e))),z):("number"==typeof q&&(z=q),(0,O.e)((J,$e)=>function ye(we,q,z,J,$e,ke,De,it){const Ee=[];let _e=0,_t=0,pt=!1;const Se=()=>{pt&&!Ee.length&&!_e&&q.complete()},Ie=Ge=>_e<J?xe(Ge):Ee.push(Ge),xe=Ge=>{ke&&q.next(Ge),_e++;let ze=!1;(0,j.Xf)(z(Ge,_t++)).subscribe((0,le.x)(q,ue=>{$e?.(ue),ke?Ie(ue):q.next(ue)},()=>{ze=!0},void 0,()=>{if(ze)try{for(_e--;Ee.length&&_e<J;){const ue=Ee.shift();De?(0,re.f)(q,De,()=>xe(ue)):xe(ue)}Se()}catch(ue){q.error(ue)}}))};return we.subscribe((0,le.x)(q,Ie,()=>{pt=!0,Se()})),()=>{it?.()}}(J,$e,we,z)))}},5363:(wt,Oe,V)=>{V.d(Oe,{Q:()=>re});var l=V(9672),j=V(4482),O=V(5403);function re(le,ye=0){return(0,j.e)((pe,ve)=>{pe.subscribe((0,O.x)(ve,we=>(0,l.f)(ve,le,()=>ve.next(we),ye),()=>(0,l.f)(ve,le,()=>ve.complete(),ye),we=>(0,l.f)(ve,le,()=>ve.error(we),ye)))})}},3099:(wt,Oe,V)=>{V.d(Oe,{B:()=>le});var l=V(8421),j=V(7579),O=V(2961),re=V(4482);function le(pe={}){const{connector:ve=(()=>new j.x),resetOnError:we=!0,resetOnComplete:q=!0,resetOnRefCountZero:z=!0}=pe;return J=>{let $e,ke,De,it=0,Ee=!1,_e=!1;const _t=()=>{ke?.unsubscribe(),ke=void 0},pt=()=>{_t(),$e=De=void 0,Ee=_e=!1},Se=()=>{const Ie=$e;pt(),Ie?.unsubscribe()};return(0,re.e)((Ie,xe)=>{it++,!_e&&!Ee&&_t();const Ge=De=De??ve();xe.add(()=>{it--,0===it&&!_e&&!Ee&&(ke=ye(Se,z))}),Ge.subscribe(xe),!$e&&it>0&&($e=new O.Hp({next:ze=>Ge.next(ze),error:ze=>{_e=!0,_t(),ke=ye(pt,we,ze),Ge.error(ze)},complete:()=>{Ee=!0,_t(),ke=ye(pt,q),Ge.complete()}}),(0,l.Xf)(Ie).subscribe($e))})(J)}}function ye(pe,ve,...we){if(!0===ve)return void pe();if(!1===ve)return;const q=new O.Hp({next:()=>{q.unsubscribe(),pe()}});return ve(...we).subscribe(q)}},9468:(wt,Oe,V)=>{V.d(Oe,{R:()=>j});var l=V(4482);function j(O,re=0){return(0,l.e)((le,ye)=>{ye.add(O.schedule(()=>le.subscribe(ye),re))})}},8505:(wt,Oe,V)=>{V.d(Oe,{b:()=>le});var l=V(576),j=V(4482),O=V(5403),re=V(4671);function le(ye,pe,ve){const we=(0,l.m)(ye)||pe||ve?{next:ye,error:pe,complete:ve}:ye;return we?(0,j.e)((q,z)=>{var J;null===(J=we.subscribe)||void 0===J||J.call(we);let $e=!0;q.subscribe((0,O.x)(z,ke=>{var De;null===(De=we.next)||void 0===De||De.call(we,ke),z.next(ke)},()=>{var ke;$e=!1,null===(ke=we.complete)||void 0===ke||ke.call(we),z.complete()},ke=>{var De;$e=!1,null===(De=we.error)||void 0===De||De.call(we,ke),z.error(ke)},()=>{var ke,De;$e&&(null===(ke=we.unsubscribe)||void 0===ke||ke.call(we)),null===(De=we.finalize)||void 0===De||De.call(we)}))}):re.y}},4408:(wt,Oe,V)=>{V.d(Oe,{o:()=>le});var l=V(727);class j extends l.w0{constructor(pe,ve){super()}schedule(pe,ve=0){return this}}const O={setInterval(ye,pe,...ve){const{delegate:we}=O;return we?.setInterval?we.setInterval(ye,pe,...ve):setInterval(ye,pe,...ve)},clearInterval(ye){const{delegate:pe}=O;return(pe?.clearInterval||clearInterval)(ye)},delegate:void 0};var re=V(8737);class le extends j{constructor(pe,ve){super(pe,ve),this.scheduler=pe,this.work=ve,this.pending=!1}schedule(pe,ve=0){var we;if(this.closed)return this;this.state=pe;const q=this.id,z=this.scheduler;return null!=q&&(this.id=this.recycleAsyncId(z,q,ve)),this.pending=!0,this.delay=ve,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(z,this.id,ve),this}requestAsyncId(pe,ve,we=0){return O.setInterval(pe.flush.bind(pe,this),we)}recycleAsyncId(pe,ve,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(pe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(pe,ve);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ve){let q,we=!1;try{this.work(pe)}catch(z){we=!0,q=z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ve}=this,{actions:we}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(we,this),null!=pe&&(this.id=this.recycleAsyncId(ve,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,Oe,V)=>{V.d(Oe,{v:()=>O});var l=V(6063);class j{constructor(le,ye=j.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,pe){return new this.schedulerActionCtor(this,le).schedule(pe,ye)}}j.now=l.l.now;class O extends j{constructor(le,ye=j.now){super(le,ye),this.actions=[],this._active=!1}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let pe;this._active=!0;do{if(pe=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,pe){for(;le=ye.shift();)le.unsubscribe();throw pe}}}},4986:(wt,Oe,V)=>{V.d(Oe,{z:()=>O});var l=V(4408);const O=new(V(7565).v)(l.o)},6063:(wt,Oe,V)=>{V.d(Oe,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(wt,Oe,V)=>{V.d(Oe,{z:()=>l});const l={setTimeout(j,O,...re){const{delegate:le}=l;return le?.setTimeout?le.setTimeout(j,O,...re):setTimeout(j,O,...re)},clearTimeout(j){const{delegate:O}=l;return(O?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(wt,Oe,V)=>{V.d(Oe,{h:()=>j});const j=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,Oe,V)=>{V.d(Oe,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,Oe,V)=>{V.d(Oe,{_6:()=>ye,jO:()=>re,yG:()=>le});var l=V(576);function O(pe){return pe[pe.length-1]}function re(pe){return(0,l.m)(O(pe))?pe.pop():void 0}function le(pe){return function j(pe){return pe&&(0,l.m)(pe.schedule)}(O(pe))?pe.pop():void 0}function ye(pe,ve){return"number"==typeof O(pe)?pe.pop():ve}},8737:(wt,Oe,V)=>{function l(j,O){if(j){const re=j.indexOf(O);0<=re&&j.splice(re,1)}}V.d(Oe,{P:()=>l})},3888:(wt,Oe,V)=>{function l(j){const re=j(le=>{Error.call(le),le.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}V.d(Oe,{d:()=>l})},2806:(wt,Oe,V)=>{V.d(Oe,{O:()=>re,x:()=>O});var l=V(2416);let j=null;function O(le){if(l.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),le(),ye){const{errorThrown:pe,error:ve}=j;if(j=null,pe)throw ve}}else le()}function re(le){l.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=le)}},9672:(wt,Oe,V)=>{function l(j,O,re,le=0,ye=!1){const pe=O.schedule(function(){re(),ye?j.add(this.schedule(null,le)):this.unsubscribe()},le);if(j.add(pe),!ye)return pe}V.d(Oe,{f:()=>l})},4671:(wt,Oe,V)=>{function l(j){return j}V.d(Oe,{y:()=>l})},1144:(wt,Oe,V)=>{V.d(Oe,{z:()=>l});const l=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(wt,Oe,V)=>{V.d(Oe,{D:()=>j});var l=V(576);function j(O){return Symbol.asyncIterator&&(0,l.m)(O?.[Symbol.asyncIterator])}},576:(wt,Oe,V)=>{function l(j){return"function"==typeof j}V.d(Oe,{m:()=>l})},3670:(wt,Oe,V)=>{V.d(Oe,{c:()=>O});var l=V(8822),j=V(576);function O(re){return(0,j.m)(re[l.L])}},6495:(wt,Oe,V)=>{V.d(Oe,{T:()=>O});var l=V(2202),j=V(576);function O(re){return(0,j.m)(re?.[l.h])}},8239:(wt,Oe,V)=>{V.d(Oe,{t:()=>j});var l=V(576);function j(O){return(0,l.m)(O?.then)}},3260:(wt,Oe,V)=>{V.d(Oe,{L:()=>re,Q:()=>O});var l=V(7582),j=V(576);function O(le){return(0,l.FC)(this,arguments,function*(){const pe=le.getReader();try{for(;;){const{value:ve,done:we}=yield(0,l.qq)(pe.read());if(we)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(ve)}}finally{pe.releaseLock()}})}function re(le){return(0,j.m)(le?.getReader)}},4482:(wt,Oe,V)=>{V.d(Oe,{A:()=>j,e:()=>O});var l=V(576);function j(re){return(0,l.m)(re?.lift)}function O(re){return le=>{if(j(le))return le.lift(function(ye){try{return re(ye,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(wt,Oe,V)=>{V.d(Oe,{U:()=>O,z:()=>j});var l=V(4671);function j(...re){return O(re)}function O(re){return 0===re.length?l.y:1===re.length?re[0]:function(ye){return re.reduce((pe,ve)=>ve(pe),ye)}}},7849:(wt,Oe,V)=>{V.d(Oe,{h:()=>O});var l=V(2416),j=V(3410);function O(re){j.z.setTimeout(()=>{const{onUnhandledError:le}=l.v;if(!le)throw re;le(re)})}},4532:(wt,Oe,V)=>{function l(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Oe,{z:()=>l})},4650:(wt,Oe,V)=>{V.d(Oe,{$8M:()=>Nd,$Z:()=>IE,AFp:()=>$C,AaK:()=>ve,AsE:()=>Xf,BQk:()=>pl,CHM:()=>Wl,CRH:()=>Am,CZH:()=>Nm,CqO:()=>jc,D6c:()=>Px,EJc:()=>QS,EiD:()=>Wy,EpF:()=>H_,F4k:()=>G_,FYo:()=>TD,FiY:()=>vs,G48:()=>pN,GfV:()=>bg,Gpc:()=>z,JOm:()=>Pr,JVY:()=>Hy,KtG:()=>xu,L6k:()=>JT,LAX:()=>Lw,LFG:()=>or,LSH:()=>Zy,Lbi:()=>ZS,Lck:()=>oS,MAs:()=>Zf,MMx:()=>gn,NdJ:()=>z_,OlP:()=>pn,Oqu:()=>Pb,PXZ:()=>uN,Q6J:()=>U_,QGY:()=>Qg,QP$:()=>be,QbO:()=>KS,Qsj:()=>DD,R0b:()=>Mo,RDi:()=>ZT,Rgc:()=>cp,SBq:()=>Df,Sil:()=>XS,Suo:()=>kv,TTD:()=>Vl,TgZ:()=>j_,Tol:()=>nm,Udp:()=>fh,VKq:()=>Eh,X6Q:()=>fN,XFs:()=>lt,Xpm:()=>Pn,Xts:()=>Yw,Y36:()=>uu,YKP:()=>vC,YNc:()=>ab,Yjl:()=>F,Yz7:()=>Re,Z0I:()=>Mt,ZZ4:()=>o0,_Bn:()=>_C,_UZ:()=>$_,_Vd:()=>Tf,_c5:()=>Mx,_uU:()=>yA,aQg:()=>Lm,c2e:()=>YS,cJS:()=>Tt,cg1:()=>ip,d8E:()=>nv,dDg:()=>Xv,dqk:()=>tn,eBb:()=>Fw,eFA:()=>ux,ekj:()=>tm,eoX:()=>YC,f3M:()=>hc,g9A:()=>GC,h0i:()=>fu,hGG:()=>Rx,hij:()=>ev,iGM:()=>mp,ifc:()=>bt,ip1:()=>jC,jDz:()=>yl,kL8:()=>am,lG2:()=>$,lqb:()=>Pc,lri:()=>Jv,mCW:()=>mg,n5z:()=>Ga,oAB:()=>_r,oJD:()=>oD,oxw:()=>db,pB0:()=>Mc,q3G:()=>Or,q4F:()=>ru,qLn:()=>pi,qOj:()=>Qs,qZA:()=>Yg,qzn:()=>Qd,rWj:()=>sx,sBO:()=>gN,sIi:()=>zf,s_b:()=>Im,soG:()=>qv,tb:()=>zC,tp0:()=>Ko,uIk:()=>O_,vHH:()=>De,vpe:()=>pa,wAp:()=>Lt,xp6:()=>su,ynx:()=>fl,z2F:()=>e0,z3N:()=>oa,zSh:()=>Yy,zs3:()=>kc});var l=V(7579),j=V(727),O=V(9751),re=V(6451),le=V(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function pe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ye({__forward_ref__:ye});function z(s){return s.__forward_ref__=z,s.toString=function(){return ve(this())},s}function J(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===z}class De extends Error{constructor(o,u){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s,o){throw new De(-201,!1)}function ie(s,o){null==s&&function ee(s,o,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Re(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Tt(s){return{providers:s.providers||[],imports:s.imports||[]}}function en(s){return rn(s,Sn)||rn(s,gr)}function Mt(s){return null!==en(s)}function rn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Qn(s){return s&&(s.hasOwnProperty(Bn)||s.hasOwnProperty(wi))?s[Bn]:null}const Sn=ye({\u0275prov:ye}),Bn=ye({\u0275inj:ye}),gr=ye({ngInjectableDef:ye}),wi=ye({ngInjectorDef:ye});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let mr;function Gn(s){const o=mr;return mr=s,o}function Fi(s,o,u){const d=en(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&lt.Optional?null:void 0!==o?o:void Ie(ve(s))}function Nn(s){return{toString:s}.toString()}var xn=(()=>((xn=xn||{})[xn.OnPush=0]="OnPush",xn[xn.Default=1]="Default",xn))(),bt=(()=>{return(s=bt||(bt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",bt;var s})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nr={},St=[],zn=ye({\u0275cmp:ye}),qt=ye({\u0275dir:ye}),Xi=ye({\u0275pipe:ye}),sn=ye({\u0275mod:ye}),jn=ye({\u0275fac:ye}),vn=ye({__NG_ELEMENT_ID__:ye});let Xn=0;function Pn(s){return Nn(()=>{const u=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===xn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||bt.Emulated,id:"c"+Xn++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,_=s.features;return h.inputs=G(s.inputs,d),h.outputs=G(s.outputs),_&&_.forEach(C=>C(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(er).filter(Ei):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(Y).filter(Ei):null,h})}function er(s){return k(s)||R(s)}function Ei(s){return null!==s}function _r(s){return Nn(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function G(s,o){if(null==s)return nr;const u={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),u[h]=d,o&&(o[h]=g)}return u}const $=Pn;function F(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function k(s){return s[zn]||null}function R(s){return s[qt]||null}function Y(s){return s[Xi]||null}function be(s){const o=k(s)||R(s)||Y(s);return null!==o&&o.standalone}function Ze(s,o){const u=s[sn]||null;if(!u&&!0===o)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return u}function Cr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Gr(s){return Array.isArray(s)&&!0===s[1]}function Ia(s){return 0!=(8&s.flags)}function ps(s){return 2==(2&s.flags)}function Ta(s){return 1==(1&s.flags)}function bi(s){return null!==s.template}function Da(s){return 0!=(256&s[2])}function oo(s,o){return s.hasOwnProperty(jn)?s[jn]:null}class es{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function Vl(){return Cu}function Cu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Sa),Ul}function Ul(){const s=Bl(this),o=s?.current;if(o){const u=s.previous;if(u===nr)s.previous=o;else for(let d in o)u[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Sa(s,o,u,d){const h=Bl(s)||function vd(s,o){return s[_d]=o}(s,{previous:nr,current:null}),g=h.current||(h.current={}),_=h.previous,C=this.declaredInputs[u],I=_[C];g[C]=new es(I&&I.currentValue,o,_===nr),s[d]=o}Vl.ngInherit=!0;const _d="__ngSimpleChanges__";function Bl(s){return s[_d]||null}function Cn(s){for(;Array.isArray(s);)s=s[0];return s}function ao(s,o){return Cn(o[s])}function si(s,o){return Cn(o[s.index])}function Hl(s,o){return s.data[o]}function Sr(s,o){const u=o[s];return Cr(u)?u:u[0]}function Tu(s){return 64==(64&s[2])}function Ci(s,o){return null==o?null:s[o]}function Ir(s){s[18]=0}function Vo(s,o){s[5]+=o;let u=s,d=s[3];for(;null!==d&&(1===o&&1===u[5]||-1===o&&0===u[5]);)d[5]+=o,u=d,d=d[3]}const Rt={lFrame:Oa(null),bindingsEnabled:!0};function Au(){return Rt.bindingsEnabled}function Pe(){return Rt.lFrame.lView}function Jt(){return Rt.lFrame.tView}function Wl(s){return Rt.lFrame.contextLView=s,s[8]}function xu(s){return Rt.lFrame.contextLView=null,s}function Wn(){let s=Ma();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ma(){return Rt.lFrame.currentTNode}function Ii(s,o){const u=Rt.lFrame;u.currentTNode=s,u.isParent=o}function Ra(){return Rt.lFrame.isParent}function Mu(){Rt.lFrame.isParent=!1}function uo(){return Rt.lFrame.bindingIndex++}function ui(s){const o=Rt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}function Id(s,o){const u=Rt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Na(o)}function Na(s){Rt.lFrame.currentDirectiveIndex=s}function Kl(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Uo(){return Rt.lFrame.currentQueryIndex}function Xr(s){Rt.lFrame.currentQueryIndex=s}function Pu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Yl(s,o,u){if(u&lt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||u&lt.Host||(h=Pu(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const d=Rt.lFrame=ka();return d.currentTNode=o,d.lView=s,!0}function lo(s){const o=ka(),u=s[1];Rt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function ka(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?Oa(s):o}function Oa(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Ql(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Td=Ql;function Ls(){const s=Ql();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function cn(){return Rt.lFrame.selectedIndex}function co(s){Rt.lFrame.selectedIndex=s}function Dn(){const s=Rt.lFrame;return Hl(s.tView,s.selectedIndex)}function La(s,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:P}=g;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(u,P)}}function ho(s,o,u){Jl(s,o,3,u)}function Ou(s,o,u,d){(3&s[2])===u&&Jl(s,o,u,d)}function Fu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Jl(s,o,u,d){const g=d??-1,_=o.length-1;let C=0;for(let I=void 0!==d?65535&s[18]:0;I<_;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=d&&C>=d)break}else o[I]<0&&(s[18]+=65536),(C<g||-1==g)&&(tf(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function tf(s,o,u,d){const h=u[d]<0,g=u[d+1],C=s[h?-u[d]:u[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Bo{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function ec(s,o,u){let d=0;for(;d<u.length;){const h=u[d];if("number"==typeof h){if(0!==h)break;d++;const g=u[d++],_=u[d++],C=u[d++];s.setAttribute(o,_,C,g)}else{const g=h,_=u[++d];Rd(g)?s.setProperty(o,g,_):s.setAttribute(o,g,_),d++}}return d}function Vu(s){return 3===s||4===s||6===s}function Rd(s){return 64===s.charCodeAt(0)}function $o(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?u=h:0===u||rf(s,u,h,null,-1===u||2===u?o[++d]:null)}}return s}function rf(s,o,u,d,h){let g=0,_=s.length;if(-1===o)_=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){_=-1;break}if(C>o){_=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==_&&(s.splice(_,0,o),g=_+1),s.splice(g++,0,u),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}function tc(s){return-1!==s}function Va(s){return 32767&s}function ns(s,o){let u=function sf(s){return s>>16}(s),d=o;for(;u>0;)d=d[15],u--;return d}let Vs=!0;function li(s){const o=Vs;return Vs=s,o}let Ua=0;const Bi={};function Ho(s,o){const u=po(s,o);if(-1!==u)return u;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Ba(d.data,s),Ba(o,null),Ba(d.blueprint,null));const h=ja(s,o),g=s.injectorIndex;if(tc(h)){const _=Va(h),C=ns(h,o),I=C[1].data;for(let A=0;A<8;A++)o[g+A]=C[_+A]|I[_+A]}return o[g+8]=h,g}function Ba(s,o){s.push(0,0,0,0,0,0,0,0,o)}function po(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ja(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,h=o;for(;null!==h;){if(d=sc(h),null===d)return-1;if(u++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function Bs(s,o,u){!function Bu(s,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(vn)&&(d=u[vn]),null==d&&(d=u[vn]=Ua++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function rc(s,o,u){if(u&lt.Optional||void 0!==s)return s;Ie()}function af(s,o,u,d){if(u&lt.Optional&&void 0===d&&(d=null),0==(u&(lt.Self|lt.Host))){const h=s[9],g=Gn(void 0);try{return h?h.get(o,d,u&lt.Optional):Fi(o,d,u&lt.Optional)}finally{Gn(g)}}return rc(d,0,u)}function Go(s,o,u,d=lt.Default,h){if(null!==s){if(1024&o[2]){const _=function ic(s,o,u,d,h){let g=s,_=o;for(;null!==g&&null!==_&&1024&_[2]&&!(256&_[2]);){const C=Ha(g,_,u,d|lt.Self,Bi);if(C!==Bi)return C;let I=g.parent;if(!I){const A=_[21];if(A){const P=A.get(u,Bi,d);if(P!==Bi)return P}I=sc(_),_=_[15]}g=I}return h}(s,o,u,d,Bi);if(_!==Bi)return _}const g=Ha(s,o,u,d,Bi);if(g!==Bi)return g}return af(o,u,d,h)}function Ha(s,o,u,d,h){const g=function eg(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(vn)?s[vn]:void 0;return"number"==typeof o?o>=0?255&o:rr:o}(u);if("function"==typeof g){if(!Yl(o,s,d))return d&lt.Host?rc(h,0,d):af(o,u,d,h);try{const _=g(d);if(null!=_||d&lt.Optional)return _;Ie()}finally{Td()}}else if("number"==typeof g){let _=null,C=po(s,o),I=-1,A=d&lt.Host?o[16][6]:null;for((-1===C||d&lt.SkipSelf)&&(I=-1===C?ja(s,o):o[C+8],-1!==I&&$s(d,!1)?(_=o[1],C=Va(I),o=ns(I,o)):C=-1);-1!==C;){const P=o[1];if(uf(g,C,P.data)){const U=Pd(C,o,u,_,d,A);if(U!==Bi)return U}I=o[C+8],-1!==I&&$s(d,o[1].data[C+8]===A)&&uf(g,C,o)?(_=P,C=Va(I),o=ns(I,o)):C=-1}}return h}function Pd(s,o,u,d,h,g){const _=o[1],C=_.data[s+8],P=zo(C,_,u,null==d?ps(C)&&Vs:d!=_&&0!=(3&C.type),h&lt.Host&&g===C);return null!==P?js(o,_,P,C):Bi}function zo(s,o,u,d,h){const g=s.providerIndexes,_=o.data,C=1048575&g,I=s.directiveStart,P=g>>20,Z=h?C+P:s.directiveEnd;for(let te=d?C:C+P;te<Z;te++){const Te=_[te];if(te<I&&u===Te||te>=I&&Te.type===u)return te}if(h){const te=_[I];if(te&&bi(te)&&te.type===u)return I}return null}function js(s,o,u,d){let h=s[u];const g=o.data;if(function Sd(s){return s instanceof Bo}(h)){const _=h;_.resolving&&function _t(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${u}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(g[u]));const C=li(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Gn(_.injectImpl):null;Yl(s,d,lt.Default);try{h=s[u]=_.factory(void 0,g,s,d),o.firstCreatePass&&u>=d.directiveStart&&function Fa(s,o,u){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(d){const _=Cu(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==I&&Gn(I),li(C),_.resolving=!1,Td()}}return h}function uf(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function $s(s,o){return!(s&lt.Self||s&lt.Host&&o)}class qo{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return Go(this._tNode,this._lView,o,d,u)}}function rr(){return new qo(Wn(),Pe())}function Ga(s){return Nn(()=>{const o=s.prototype.constructor,u=o[jn]||za(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[jn]||za(h);if(g&&g!==u)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function za(s){return $e(s)?()=>{const o=za(J(s));return o&&o()}:oo(s)}function sc(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Nd(s){return function $a(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const d=u.length;let h=0;for(;h<d;){const g=u[h];if(Vu(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof u[h];)h++;else{if(g===o)return u[h+1];h+=2}}}return null}(Wn(),s)}const Fn="__parameters__";function Ti(s,o,u){return Nn(()=>{const d=function ju(s){return function(...u){if(s){const d=s(...u);for(const h in d)this[h]=d[h]}}}(o);function h(...g){if(this instanceof h)return d.apply(this,g),this;const _=new h(...g);return C.annotation=_,C;function C(I,A,P){const U=I.hasOwnProperty(Fn)?I[Fn]:Object.defineProperty(I,Fn,{value:[]})[Fn];for(;U.length<=P;)U.push(null);return(U[P]=U[P]||[]).push(_),I}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Re({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Tr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let d=s[u];Array.isArray(d)?(o===s&&(o=s.slice(0,u)),Tr(d,o)):o!==s&&o.push(d)}return o}function ji(s,o){s.forEach(u=>Array.isArray(u)?ji(u,o):o(u))}function ac(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Wa(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ci(s,o,u){let d=go(s,o);return d>=0?s[1|d]=u:(d=~d,function rg(s,o,u,d){let h=s.length;if(h==o)s.push(u,d);else if(1===h)s.push(d,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=d}}(s,d,o,u)),d}function Wu(s,o){const u=go(s,o);if(u>=0)return s[1|u]}function go(s,o){return function lc(s,o,u){let d=0,h=s.length>>u;for(;h!==d;){const g=d+(h-d>>1),_=s[g<<u];if(o===_)return g<<u;_>o?h=g:d=g+1}return~(h<<u)}(s,o,1)}const di={},Ka="__NG_DI_FLAG__",hi="ngTempTokenPath",jd=/\n/gm,_s="__source";let Zn;function ft(s){const o=Zn;return Zn=s,o}function Ya(s,o=lt.Default){if(void 0===Zn)throw new De(-203,!1);return null===Zn?Fi(s,void 0,o):Zn.get(s,o&lt.Optional?null:void 0,o)}function or(s,o=lt.Default){return(function Jn(){return mr}()||Ya)(J(s),o)}function hc(s,o=lt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),or(s,o)}function Ku(s){const o=[];for(let u=0;u<s.length;u++){const d=J(s[u]);if(Array.isArray(d)){if(0===d.length)throw new De(900,!1);let h,g=lt.Default;for(let _=0;_<d.length;_++){const C=d[_],I=mo(C);"number"==typeof I?-1===I?h=C.token:g|=I:h=C}o.push(or(h,g))}else o.push(or(d))}return o}function Hs(s,o){return s[Ka]=o,s.prototype[Ka]=o,s}function mo(s){return s[Ka]}const vs=Hs(Ti("Optional"),8),Ko=Hs(Ti("SkipSelf"),4);var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();const x=new Map;let L=0;const Nr="__ngContext__";function dn(s,o){Cr(o)?(s[Nr]=o[20],function X(s){x.set(s[20],s)}(o)):s[Nr]=o}function zd(s,o){return undefined(s,o)}function Wd(s){const o=s[3];return Gr(o)?o[3]:o}function Dc(s){return p(s[13])}function v(s){return p(s[4])}function p(s){for(;null!==s&&!Gr(s);)s=s[4];return s}function b(s,o,u,d,h){if(null!=d){let g,_=!1;Gr(d)?g=d:Cr(d)&&(_=!0,d=d[0]);const C=Cn(d);0===s&&null!==u?null==h?tu(o,u,C):vo(o,u,C,h||null,!0):1===s&&null!==u?vo(o,u,C,h||null,!0):2===s?function fg(s,o,u){const d=il(s,o);d&&function Kd(s,o,u,d){s.removeChild(o,u,d)}(s,d,o,u)}(o,C,_):3===s&&o.destroyNode(C),null!=g&&function GT(s,o,u,d,h){const g=u[7];g!==Cn(u)&&b(o,s,d,g,h);for(let C=10;C<u.length;C++){const I=u[C];wo(I[1],I,s,o,d,g)}}(o,s,g,u,h)}}function de(s,o,u){return s.createElement(o,u)}function nl(s,o){const u=s[9],d=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Vo(h,-1)),u.splice(d,1)}function _f(s,o){if(s.length<=10)return;const u=10+o,d=s[u];if(d){const h=d[17];null!==h&&h!==s&&nl(h,d),o>0&&(s[u-1][4]=d[4]);const g=Wa(s,10+o);!function He(s,o){wo(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const _=g[19];null!==_&&_.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function rl(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&wo(s,o,u,3,null,null),function an(s){let o=s[13];if(!o)return Zd(s[1],s);for(;o;){let u=null;if(Cr(o))u=o[13];else{const d=o[10];d&&(u=d)}if(!u){for(;o&&!o[4]&&o!==s;)Cr(o)&&Zd(o[1],o),o=o[3];null===o&&(o=s),Cr(o)&&Zd(o[1],o),u=o&&o[4]}o=u}}(o)}}function Zd(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Ac(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const h=o[u[d]];if(!(h instanceof Bo)){const g=u[d+1];if(Array.isArray(g))for(let _=0;_<g.length;_+=2){const C=h[g[_]],I=g[_+1];try{I.call(C)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function vf(s,o){const u=s.cleanup,d=o[7];let h=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const _=u[g+1],C="function"==typeof _?_(o):Cn(o[_]),I=d[h=u[g+2]],A=u[g+3];"boolean"==typeof A?C.removeEventListener(u[g],I,A):A>=0?d[h=A]():d[h=-A].unsubscribe(),g+=2}else{const _=d[h=u[g+1]];u[g].call(_)}if(null!==d){for(let g=h+1;g<d.length;g++)(0,d[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&Gr(o[3])){u!==o[3]&&nl(u,o);const d=o[19];null!==d&&d.detachView(s)}!function Ye(s){x.delete(s[20])}(o)}}function wf(s,o,u){return function dg(s,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===bt.None||h===bt.Emulated)return null}return si(d,u)}(s,o.parent,u)}function vo(s,o,u,d,h){s.insertBefore(o,u,d,h)}function tu(s,o,u){s.appendChild(o,u)}function nu(s,o,u,d,h){null!==d?vo(s,o,u,d,h):tu(s,o,u)}function il(s,o){return s.parentNode(o)}let Ef,ol,gg,jT=function Py(s,o,u){return 40&s.type?si(s,u):null};function Ny(s,o,u,d){const h=wf(s,d,o),g=o[11],C=function Pw(s,o,u){return jT(s,o,u)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(u))for(let I=0;I<u.length;I++)nu(g,h,u[I],C,!1);else nu(g,h,u,C,!1)}function hg(s,o){if(null!==o){const u=o.type;if(3&u)return si(o,s);if(4&u)return Oy(-1,s[o.index]);if(8&u){const d=o.child;if(null!==d)return hg(s,d);{const h=s[o.index];return Gr(h)?Oy(-1,h):Cn(h)}}if(32&u)return zd(o,s)()||Cn(s[o.index]);{const d=ky(s,o);return null!==d?Array.isArray(d)?d[0]:hg(Wd(s[16]),d):hg(s,o.next)}}return null}function ky(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Oy(s,o){const u=10+s+1;if(u<o.length){const d=o[u],h=d[1].firstChild;if(null!==h)return hg(d,h)}return o[7]}function Sc(s,o,u,d,h,g,_){for(;null!=u;){const C=d[u.index],I=u.type;if(_&&0===o&&(C&&dn(Cn(C),d),u.flags|=4),64!=(64&u.flags))if(8&I)Sc(s,o,u.child,d,h,g,!1),b(o,s,h,C,g);else if(32&I){const A=zd(u,d);let P;for(;P=A();)b(o,s,h,P,g);b(o,s,h,C,g)}else 16&I?Fy(s,o,d,u,h,g):b(o,s,h,C,g);u=_?u.projectionNext:u.next}}function wo(s,o,u,d,h,g){Sc(u,d,s.firstChild,o,h,g,!1)}function Fy(s,o,u,d,h,g){const _=u[16],I=_[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)b(o,s,h,I[A],g);else Sc(s,o,I,_[3],h,g,!0)}function Ly(s,o,u){s.setAttribute(o,"style",u)}function Vy(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function sl(s){return function Uy(){if(void 0===Ef&&(Ef=null,tn.trustedTypes))try{Ef=tn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ef}()?.createHTML(s)||s}function ZT(s){ol=s}function jy(s){return function bf(){if(void 0===gg&&(gg=null,tn.trustedTypes))try{gg=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return gg}()?.createHTML(s)||s}class xc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ow extends xc{getTypeName(){return"HTML"}}class KT extends xc{getTypeName(){return"Style"}}class $y extends xc{getTypeName(){return"Script"}}class YT extends xc{getTypeName(){return"URL"}}class QT extends xc{getTypeName(){return"ResourceURL"}}function oa(s){return s instanceof xc?s.changingThisBreaksApplicationSecurity:s}function Qd(s,o){const u=function eP(s){return s instanceof xc&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function Hy(s){return new Ow(s)}function JT(s){return new KT(s)}function Fw(s){return new $y(s)}function Lw(s){return new YT(s)}function Mc(s){return new QT(s)}class Uw{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(sl(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch{return null}}}class XT{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const d=this.inertDocument.createElement("body");u.appendChild(d)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=sl(o),u;const d=this.inertDocument.createElement("body");return d.innerHTML=sl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const u=o.attributes;for(let h=u.length-1;0<h;h--){const _=u.item(h).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const eD=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function mg(s){return(s=String(s)).match(eD)?s:"unsafe:"+s}function Cs(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Jd(...s){const o={};for(const u of s)for(const d in u)u.hasOwnProperty(d)&&(o[d]=!0);return o}const jw=Cs("area,br,col,hr,img,wbr"),Gy=Cs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$w=Cs("rp,rt"),zy=Jd(jw,Jd(Gy,Cs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jd($w,Cs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jd($w,Gy)),yg=Cs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rD=Jd(yg,Cs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Cs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Hw=Cs("script,style,template");class iD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,d=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?d=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,d&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let h=this.checkClobberedElement(u,u.nextSibling);if(h){u=h;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!zy.hasOwnProperty(u))return this.sanitizedSomething=!0,!Hw.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const d=o.attributes;for(let h=0;h<d.length;h++){const g=d.item(h),_=g.name,C=_.toLowerCase();if(!rD.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=g.value;yg[C]&&(I=mg(I)),this.buf.push(" ",_,'="',sD(I),'"')}return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();zy.hasOwnProperty(u)&&!jw.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(sD(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const Gw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zw=/([^\#-~ |!])/g;function sD(s){return s.replace(/&/g,"&amp;").replace(Gw,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(zw,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qy;function Wy(s,o){let u=null;try{qy=qy||function Vw(s){const o=new XT(s);return function Bw(){try{return!!(new window.DOMParser).parseFromString(sl(""),"text/html")}catch{return!1}}()?new Uw(o):o}(s);let d=o?String(o):"";u=qy.getInertBodyElement(d);let h=5,g=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=g,g=u.innerHTML,u=qy.getInertBodyElement(d)}while(d!==g);return sl((new iD).sanitizeChildren(Cf(u)||u))}finally{if(u){const d=Cf(u)||u;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Cf(s){return"content"in s&&function nP(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Or=(()=>((Or=Or||{})[Or.NONE=0]="NONE",Or[Or.HTML=1]="HTML",Or[Or.STYLE=2]="STYLE",Or[Or.SCRIPT=3]="SCRIPT",Or[Or.URL=4]="URL",Or[Or.RESOURCE_URL=5]="RESOURCE_URL",Or))();function oD(s){const o=Xd();return o?jy(o.sanitize(Or.HTML,s)||""):Qd(s,"HTML")?jy(oa(s)):Wy(function pg(){return void 0!==ol?ol:typeof document<"u"?document:void 0}(),Ee(s))}function Zy(s){const o=Xd();return o?o.sanitize(Or.URL,s)||"":Qd(s,"URL")?oa(s):mg(Ee(s))}function Xd(){const s=Pe();return s&&s[12]}const Yw=new pn("ENVIRONMENT_INITIALIZER"),uD=new pn("INJECTOR",-1),lD=new pn("INJECTOR_DEF_TYPES");class cD{get(o,u=di){if(u===di){const d=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw d.name="NullInjectorError",d}return u}}function iP(...s){return{\u0275providers:Ky(0,s)}}function Ky(s,...o){const u=[],d=new Set;let h;return ji(o,g=>{const _=g;_g(_,u,[],d)&&(h||(h=[]),h.push(_))}),void 0!==h&&eh(h,u),u}function eh(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];ji(h,g=>{o.push(g)})}}function _g(s,o,u,d){if(!(s=J(s)))return!1;let h=null,g=Qn(s);const _=!g&&k(s);if(g||_){if(_&&!_.standalone)return!1;h=s}else{const I=s.ngModule;if(g=Qn(I),!g)return!1;h=I}const C=d.has(h);if(_){if(C)return!1;if(d.add(h),_.dependencies){const I="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const A of I)_g(A,o,u,d)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let A;d.add(h);try{ji(g.imports,P=>{_g(P,o,u,d)&&(A||(A=[]),A.push(P))})}finally{}void 0!==A&&eh(A,o)}if(!C){const A=oo(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:St},{provide:lD,useValue:h,multi:!0},{provide:Yw,useValue:()=>or(h),multi:!0})}const I=g.providers;null==I||C||ji(I,P=>{o.push(P)})}}return h!==s&&void 0!==s.providers}const sP=ye({provide:String,useValue:ye});function vg(s){return null!==s&&"object"==typeof s&&sP in s}function Rc(s){return"function"==typeof s}const Yy=new pn("Set Injector scope."),wg={},hD={};let Qy;function Eg(){return void 0===Qy&&(Qy=new cD),Qy}class Pc{}class fD extends Pc{constructor(o,u,d,h){super(),this.parent=u,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xy(o,_=>this.processProvider(_)),this.records.set(uD,th(void 0,this)),h.has("environment")&&this.records.set(Pc,th(void 0,this));const g=this.records.get(Yy);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(lD.multi,St,lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=ft(this),d=Gn(void 0);try{return o()}finally{ft(u),Gn(d)}}get(o,u=di,d=lt.Default){this.assertNotDestroyed();const h=ft(this),g=Gn(void 0);try{if(!(d&lt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function _D(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&en(o);C=I&&this.injectableDefInScope(I)?th(Jy(o),wg):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(d&lt.Self?Eg():this.parent).get(o,u=d&lt.Optional&&u===di?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[hi]=_[hi]||[]).unshift(ve(o)),h)throw _;return function Mr(s,o,u,d){const h=s[hi];throw o[_s]&&h.unshift(o[_s]),s.message=function og(s,o,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ve(o);if(Array.isArray(o))h=o.map(ve).join(" -> ");else if("object"==typeof o){let g=[];for(let _ in o)if(o.hasOwnProperty(_)){let C=o[_];g.push(_+":"+("string"==typeof C?JSON.stringify(C):ve(C)))}h=`{${g.join(", ")}}`}return`${u}${d?"("+d+")":""}[${h}]: ${s.replace(jd,"\n  ")}`}("\n"+s.message,h,u,d),s.ngTokenPath=h,s[hi]=null,s}(_,o,"R3InjectorError",this.source)}throw _}finally{Gn(g),ft(h)}}resolveInjectorInitializers(){const o=ft(this),u=Gn(void 0);try{const d=this.get(Yw.multi,St,lt.Self);for(const h of d)h()}finally{ft(o),Gn(u)}}toString(){const o=[],u=this.records;for(const d of u.keys())o.push(ve(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let u=Rc(o=J(o))?o:J(o&&o.provide);const d=function gD(s){return vg(s)?th(void 0,s.useValue):th(eE(s),wg)}(o);if(Rc(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=th(void 0,wg,!0),h.factory=()=>Ku(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,d)}hydrate(o,u){return u.value===wg&&(u.value=hD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function yD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Jy(s){const o=en(s),u=null!==o?o.factory:oo(s);if(null!==u)return u;if(s instanceof pn)throw new De(204,!1);if(s instanceof Function)return function pD(s){const o=s.length;if(o>0)throw function qu(s,o){const u=[];for(let d=0;d<s;d++)u.push(o);return u}(o,"?"),new De(204,!1);const u=function Rn(s){const o=s&&(s[Sn]||s[gr]);if(o){const u=function hn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new De(204,!1)}function eE(s,o,u){let d;if(Rc(s)){const h=J(s);return oo(h)||Jy(h)}if(vg(s))d=()=>J(s.useValue);else if(function Xw(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Ku(s.deps||[]));else if(function Jw(s){return!(!s||!s.useExisting)}(s))d=()=>or(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function mD(s){return!!s.deps}(s))return oo(h)||Jy(h);d=()=>new h(...Ku(s.deps))}return d}function th(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function vD(s){return!!s.\u0275providers}function Xy(s,o){for(const u of s)Array.isArray(u)?Xy(u,o):vD(u)?Xy(u.\u0275providers,o):o(u)}class tE{}class bD{resolveComponentFactory(o){throw function ED(s){const o=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Tf=(()=>{class s{}return s.NULL=new bD,s})();function CD(){return nh(Wn(),Pe())}function nh(s,o){return new Df(si(s,o))}let Df=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=CD,s})();function ID(s){return s instanceof Df?s.nativeElement:s}class TD{}let DD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function AD(){const s=Pe(),u=Sr(Wn().index,s);return(Cr(u)?u:s)[11]}(),s})(),SD=(()=>{class s{}return s.\u0275prov=Re({token:s,providedIn:"root",factory:()=>null}),s})();class bg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const ru=new bg("14.3.0"),Cg={};function Sf(s){return s.ngOriginalError}class pi{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Sf(o);for(;u&&Sf(u);)u=Sf(u);return u||null}}function ua(s){return s instanceof Function?s():s}function i_(s,o,u){let d=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}u=h+1}}const aE="ng-template";function uE(s,o,u){let d=0;for(;d<s.length;){let h=s[d++];if(u&&"class"===h){if(h=s[d],-1!==i_(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function lE(s){return 4===s.type&&s.value!==aE}function s_(s,o,u){return o===(4!==s.type||u?s.value:aE)}function Ig(s,o,u){let d=4;const h=s.attrs||[],g=function iu(s){for(let o=0;o<s.length;o++)if(Vu(s[o]))return o;return s.length}(h);let _=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!_)if(4&d){if(d=2|1&d,""!==I&&!s_(s,I,u)||""===I&&1===o.length){if(os(d))return!1;_=!0}}else{const A=8&d?I:o[++C];if(8&d&&null!==s.attrs){if(!uE(s.attrs,A,u)){if(os(d))return!1;_=!0}continue}const U=Tg(8&d?"class":I,h,lE(s),u);if(-1===U){if(os(d))return!1;_=!0;continue}if(""!==A){let Z;Z=U>g?"":h[U+1].toLowerCase();const te=8&d?Z:null;if(te&&-1!==i_(te,A,0)||2&d&&A!==Z){if(os(d))return!1;_=!0}}}}else{if(!_&&!os(d)&&!os(I))return!1;if(_&&os(I))continue;_=!1,d=I|1&d}}return os(d)||_}function os(s){return 0==(1&s)}function Tg(s,o,u,d){if(null===o)return-1;let h=0;if(d||!u){let g=!1;for(;h<o.length;){const _=o[h];if(_===s)return h;if(3===_||6===_)g=!0;else{if(1===_||2===_){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===_)break;if(0===_){h+=4;continue}}h+=g?1:2}return-1}return function u_(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,s)}function o_(s,o,u=!1){for(let d=0;d<o.length;d++)if(Ig(s,o[d],u))return!0;return!1}function cE(s,o){return s?":not("+o.trim()+")":o}function xf(s){let o=s[0],u=1,d=2,h="",g=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&d){const C=s[++u];h+="["+_+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+_:4&d&&(h+=" "+_);else""!==h&&!os(_)&&(o+=cE(g,h),h=""),d=_,g=g||!os(d);u++}return""!==h&&(o+=cE(g,h)),o}const Wt={};function su(s){l_(Jt(),Pe(),cn()+s,!1)}function l_(s,o,u,d){if(!d)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&ho(o,g,u)}else{const g=s.preOrderHooks;null!==g&&Ou(o,g,0,u)}co(u)}function fE(s,o=null,u=null,d){const h=Sg(s,o,u,d);return h.resolveInjectorInitializers(),h}function Sg(s,o=null,u=null,d,h=new Set){const g=[u||St,iP(s)];return d=d||("object"==typeof s?void 0:ve(s)),new fD(g,o||Eg(),d||null,h)}let kc=(()=>{class s{static create(u,d){if(Array.isArray(u))return fE({name:""},d,u,"");{const h=u.name??"";return fE({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=di,s.NULL=new cD,s.\u0275prov=Re({token:s,providedIn:"any",factory:()=>or(uD)}),s.__NG_ELEMENT_ID__=-1,s})();function uu(s,o=lt.Default){const u=Pe();return null===u?or(s,o):Go(Wn(),u,J(s),o)}function IE(){throw new Error("invalid")}function Rg(s,o){return s<<17|o<<2}function Eo(s){return s>>17&32767}function v_(s){return 2|s}function Ws(s){return(131068&s)>>2}function Pf(s,o){return-131069&s|o<<2}function w_(s){return 1|s}function Is(s,o){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const h=u[d],g=u[d+1];if(-1!==g){const _=s.data[g];Xr(h),_.contentQueries(2,o[g],g)}}}function Og(s,o,u,d,h,g,_,C,I,A,P){const U=o.blueprint.slice();return U[0]=h,U[2]=76|d,(null!==P||s&&1024&s[2])&&(U[2]|=1024),Ir(U),U[3]=U[15]=s,U[8]=u,U[10]=_||s&&s[10],U[11]=C||s&&s[11],U[12]=I||s&&s[12]||null,U[9]=A||s&&s[9]||null,U[6]=g,U[20]=function W(){return L++}(),U[21]=P,U[16]=2==o.type?s[16]:U,U}function Oc(s,o,u,d,h){let g=s.data[o];if(null===g)g=function A_(s,o,u,d,h){const g=Ma(),_=Ra(),I=s.data[o]=function jE(s,o,u,d,h,g){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?g:g&&g.parent,u,o,d,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(_?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,u,d,h),function Pa(){return Rt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=d,g.attrs=h;const _=function Fs(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===_?-1:_.injectorIndex}return Ii(g,!0),g}function Fc(s,o,u,d){if(0===u)return-1;const h=o.length;for(let g=0;g<u;g++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function oh(s,o,u){lo(o);try{const d=s.viewQuery;null!==d&&Fr(1,d,u);const h=s.template;null!==h&&VE(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Is(s,o),s.staticViewQueries&&Fr(2,s.viewQuery,u);const g=s.components;null!==g&&function qD(s,o){for(let u=0;u<o.length;u++)Bf(s,o[u])}(o,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Ls()}}function Fg(s,o,u,d){const h=o[2];if(128!=(128&h)){lo(o);try{Ir(o),function ai(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&VE(s,o,u,2,d);const _=3==(3&h);if(_){const A=s.preOrderCheckHooks;null!==A&&ho(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Ou(o,A,0,null),Fu(o,0)}if(function ZE(s){for(let o=Dc(s);null!==o;o=v(o)){if(!o[2])continue;const u=o[9];for(let d=0;d<u.length;d++){const h=u[d],g=h[3];0==(512&h[2])&&Vo(g,1),h[2]|=512}}}(o),function R_(s){for(let o=Dc(s);null!==o;o=v(o))for(let u=10;u<o.length;u++){const d=o[u],h=d[1];Tu(d)&&Fg(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Is(s,o),_){const A=s.contentCheckHooks;null!==A&&ho(o,A)}else{const A=s.contentHooks;null!==A&&Ou(o,A,1),Fu(o,1)}!function LE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const h=u[d];if(h<0)co(~h);else{const g=h,_=u[++d],C=u[++d];Id(_,g),C(2,o[g])}}}finally{co(-1)}}(s,o);const C=s.components;null!==C&&function sh(s,o){for(let u=0;u<o.length;u++)eA(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&Fr(2,I,d),_){const A=s.viewCheckHooks;null!==A&&ho(o,A)}else{const A=s.viewHooks;null!==A&&Ou(o,A,2),Fu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Vo(o[3],-1))}finally{Ls()}}}function VE(s,o,u,d,h){const g=cn(),_=2&d;try{co(-1),_&&o.length>22&&l_(s,o,22,!1),u(d,h)}finally{co(g)}}function Lg(s,o,u){if(Ia(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const _=s.data[g];_.contentQueries&&_.contentQueries(1,u[g],g)}}}function S_(s,o,u){!Au()||(function QD(s,o,u,d){const h=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Ho(u,o),dn(d,o);const _=u.initialInputs;for(let C=h;C<g;C++){const I=s.data[C],A=bi(I);A&&Vf(o,u,I);const P=js(o,s,C,u);dn(P,o),null!==_&&XD(0,C-h,P,I,0,_),A&&(Sr(u.index,o)[8]=P)}}(s,o,u,si(u,o)),128==(128&u.flags)&&function TP(s,o,u){const d=u.directiveStart,h=u.directiveEnd,g=u.index,_=function Ru(){return Rt.lFrame.currentDirectiveIndex}();try{co(g);for(let C=d;C<h;C++){const I=s.data[C],A=o[C];Na(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&JD(I,A)}}finally{co(-1),Na(_)}}(s,o,u))}function Vg(s,o,u=si){const d=o.localNames;if(null!==d){let h=o.index+1;for(let g=0;g<d.length;g+=2){const _=d[g+1],C=-1===_?u(o,s):s[_];s[h++]=C}}}function UE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=x_(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function x_(s,o,u,d,h,g,_,C,I,A){const P=22+d,U=P+h,Z=function WD(s,o){const u=[];for(let d=0;d<o;d++)u.push(d<s?null:Wt);return u}(P,U),te="function"==typeof A?A():A;return Z[1]={type:s,blueprint:Z,template:u,queries:null,viewQuery:C,declTNode:o,data:Z.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function Ff(s,o,u,d){const h=$f(o);null===u?h.push(d):(h.push(u),s.firstCreatePass&&Ks(s).push(d,h.length-1))}function $E(s,o,u){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(u=null===u?{}:u).hasOwnProperty(d)?u[d].push(o,h):u[d]=[o,h]}return u}function M_(s,o){const d=o.directiveEnd,h=s.data,g=o.attrs,_=[];let C=null,I=null;for(let A=o.directiveStart;A<d;A++){const P=h[A],U=P.inputs,Z=null===g||lE(o)?null:qE(U,g);_.push(Z),C=$E(U,A,C),I=$E(P.outputs,A,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=C,o.outputs=I}function Ts(s,o,u,d,h,g,_,C){const I=si(o,u);let P,A=o.inputs;!C&&null!=A&&(P=A[d])?(Gg(s,u,P,d,h),ps(o)&&HE(u,o.index)):3&o.type&&(d=function ZD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=_?_(h,o.value||"",d):h,g.setProperty(I,d,h))}function HE(s,o){const u=Sr(o,s);16&u[2]||(u[2]|=32)}function Ug(s,o,u,d){let h=!1;if(Au()){const g=function DP(s,o,u){const d=s.directiveRegistry;let h=null;if(d)for(let g=0;g<d.length;g++){const _=d[g];o_(u,_.selectors,!1)&&(h||(h=[]),Bs(Ho(u,o),s,_.type),bi(_)?(Ct(s,u),h.unshift(_)):h.push(_))}return h}(s,o,u),_=null===d?null:{"":-1};if(null!==g){h=!0,zE(u,s.data.length,g.length);for(let P=0;P<g.length;P++){const U=g[P];U.providersResolver&&U.providersResolver(U)}let C=!1,I=!1,A=Fc(s,o,g.length,null);for(let P=0;P<g.length;P++){const U=g[P];u.mergedAttrs=$o(u.mergedAttrs,U.hostAttrs),Lf(s,u,o,A,U),Co(A,U,_),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const Z=U.type.prototype;!C&&(Z.ngOnChanges||Z.ngOnInit||Z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(Z.ngOnChanges||Z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),A++}M_(s,u)}_&&function Ai(s,o,u){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=u[o[h+1]];if(null==g)throw new De(-301,!1);d.push(o[h],g)}}}(u,d,_)}return u.mergedAttrs=$o(u.mergedAttrs,u.attrs),h}function Bg(s,o,u,d,h,g){const _=g.hostBindings;if(_){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function GE(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(d,h,_)}}function JD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ct(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Co(s,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=s;bi(o)&&(u[""]=s)}}function zE(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Lf(s,o,u,d,h){s.data[d]=h;const g=h.factory||(h.factory=oo(h.type)),_=new Bo(g,bi(h),uu);s.blueprint[d]=_,u[d]=_,Bg(s,o,0,d,Fc(s,u,h.hostVars,Wt),h)}function Vf(s,o,u){const d=si(o,s),h=UE(u),g=s[10],_=jf(s,Og(s,h,null,u.onPush?32:16,d,o,g,g.createRenderer(d,u),null,null,null));s[o.index]=_}function ca(s,o,u,d,h,g){const _=si(s,o);!function jg(s,o,u,d,h,g,_){if(null==g)s.removeAttribute(o,h,u);else{const C=null==_?Ee(g):_(g,d||"",h);s.setAttribute(o,h,C,u)}}(o[11],_,g,s.value,u,d,h)}function XD(s,o,u,d,h,g){const _=g[o];if(null!==_){const C=d.setInput;for(let I=0;I<_.length;){const A=_[I++],P=_[I++],U=_[I++];null!==C?d.setInput(u,U,A,P):u[P]=U}}}function qE(s,o){let u=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return u}function WE(s,o,u,d){return new Array(s,!0,!1,o,null,0,d,u,null,null)}function eA(s,o){const u=Sr(o,s);if(Tu(u)){const d=u[1];48&u[2]?Fg(d,u,d.template,u[8]):u[5]>0&&Uf(u)}}function Uf(s){for(let d=Dc(s);null!==d;d=v(d))for(let h=10;h<d.length;h++){const g=d[h];if(Tu(g))if(512&g[2]){const _=g[1];Fg(_,g,_.template,g[8])}else g[5]>0&&Uf(g)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const h=Sr(u[d],s);Tu(h)&&h[5]>0&&Uf(h)}}function Bf(s,o){const u=Sr(o,s),d=u[1];(function Lc(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(d,u),oh(d,u,u[8])}function jf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function gi(s){for(;s;){s[2]|=32;const o=Wd(s);if(Da(s)&&!o)return s;s=o}return null}function ah(s,o,u,d=!0){const h=o[10];h.begin&&h.begin();try{Fg(s,o,s.template,u)}catch(_){throw d&&Hf(o,_),_}finally{h.end&&h.end()}}function Fr(s,o,u){Xr(0),o(s,u)}function $f(s){return s[7]||(s[7]=[])}function Ks(s){return s.cleanup||(s.cleanup=[])}function Hf(s,o){const u=s[9],d=u?u.get(pi,null):null;d&&d.handleError(o)}function Gg(s,o,u,d,h){for(let g=0;g<u.length;){const _=u[g++],C=u[g++],I=o[_],A=s.data[_];null!==A.setInput?A.setInput(I,h,d,C):I[C]=h}}function lu(s,o,u){const d=ao(o,s);!function N(s,o,u){s.setValue(o,u)}(s[11],d,u)}function Ys(s,o,u){let d=u?s.styles:null,h=u?s.classes:null,g=0;if(null!==o)for(let _=0;_<o.length;_++){const C=o[_];"number"==typeof C?g=C:1==g?h=we(h,C):2==g&&(d=we(d,C+": "+o[++_]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=h:s.classesWithoutHost=h}function da(s,o,u,d,h=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&d.push(Cn(g)),Gr(g))for(let C=10;C<g.length;C++){const I=g[C],A=I[1].firstChild;null!==A&&da(I[1],I,A,d)}const _=u.type;if(8&_)da(s,o,u.child,d);else if(32&_){const C=zd(u,o);let I;for(;I=C();)d.push(I)}else if(16&_){const C=ky(o,u);if(Array.isArray(C))d.push(...C);else{const I=Wd(o[16]);da(I[1],I,C,d,!0)}}u=h?u.projectionNext:u.next}return d}class Lr{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return da(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Gr(o)){const u=o[8],d=u?u.indexOf(this):-1;d>-1&&(_f(o,d),Wa(u,d))}this._attachedToViewContainer=!1}rl(this._lView[1],this._lView)}onDestroy(o){Ff(this._lView[1],this._lView,null,o)}markForCheck(){gi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ah(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vt(s,o){wo(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class ul extends Lr{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;ah(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class P_ extends Tf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=k(o);return new Gf(u,this.ngModule)}}function uh(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class KE{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,d){const h=this.injector.get(o,Cg,d);return h!==Cg||u===Cg?h:this.parentInjector.get(o,u,d)}}class Gf extends tE{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function dE(s){return s.map(xf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return uh(this.componentDef.inputs)}get outputs(){return uh(this.componentDef.outputs)}create(o,u,d,h){let g=(h=h||this.ngModule)instanceof Pc?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const _=g?new KE(o,g):o,C=_.get(TD,null);if(null===C)throw new De(407,!1);const I=_.get(SD,null),A=C.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",U=d?function BE(s,o,u){return s.selectRootElement(o,u===bt.ShadowDom)}(A,d,this.componentDef.encapsulation):de(A,P,function N_(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(P)),Z=this.componentDef.onPush?288:272,te=x_(0,null,null,1,0,null,null,null,null,null),Te=Og(null,te,null,Z,null,null,C,A,I,_,null);let je,Je;lo(Te);try{const yt=function rA(s,o,u,d,h,g){const _=u[1];u[22]=s;const I=Oc(_,22,2,"#host",null),A=I.mergedAttrs=o.hostAttrs;null!==A&&(Ys(I,A,!0),null!==s&&(ec(h,s,A),null!==I.classes&&Vy(h,s,I.classes),null!==I.styles&&Ly(h,s,I.styles)));const P=d.createRenderer(s,o),U=Og(u,UE(o),null,o.onPush?32:16,u[22],I,d,P,g||null,null,null);return _.firstCreatePass&&(Bs(Ho(I,u),_,o.type),Ct(_,I),zE(I,u.length,1)),jf(u,U),u[22]=U}(U,this.componentDef,Te,C,A);if(U)if(d)ec(A,U,["ng-version",ru.full]);else{const{attrs:Pt,classes:Me}=function PD(s){const o=[],u=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++d]):8===h&&u.push(g);else{if(!os(h))break;h=g}d++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Pt&&ec(A,U,Pt),Me&&Me.length>0&&Vy(A,U,Me.join(" "))}if(Je=Hl(te,22),void 0!==u){const Pt=Je.projection=[];for(let Me=0;Me<this.ngContentSelectors.length;Me++){const Vt=u[Me];Pt.push(null!=Vt?Array.from(Vt):null)}}je=function lh(s,o,u,d){const h=u[1],g=function YD(s,o,u){const d=Wn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Lf(s,d,o,Fc(s,o,1,null),u),M_(s,d));const h=js(o,s,d.directiveStart,d);dn(h,o);const g=si(d,o);return g&&dn(g,o),h}(h,u,o);if(s[8]=u[8]=g,null!==d)for(const C of d)C(g,o);if(o.contentQueries){const C=Wn();o.contentQueries(1,g,C.directiveStart)}const _=Wn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(co(_.index),Bg(u[1],_,0,_.directiveStart,_.directiveEnd,o),JD(o,g)),g}(yt,this.componentDef,Te,[iA]),oh(te,Te,null)}finally{Ls()}return new un(this.componentType,je,nh(Je,Te),Te,Je)}}class un extends class wD{}{constructor(o,u,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new ul(h),this.componentType=o}setInput(o,u){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){const g=this._rootLView;Gg(g[1],g,h,o,u),HE(g,this._tNode.index)}}get injector(){return new qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function iA(){const s=Wn();La(Pe()[1],s)}function Qs(s){let o=function QE(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const d=[s];for(;o;){let h;if(bi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);h=o.\u0275dir}if(h){if(u){d.push(h);const _=s;_.inputs=qg(s.inputs),_.declaredInputs=qg(s.declaredInputs),_.outputs=qg(s.outputs);const C=h.hostBindings;C&&mi(s,C);const I=h.viewQuery,A=h.contentQueries;if(I&&XE(s,I),A&&AP(s,A),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),bi(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let _=0;_<g.length;_++){const C=g[_];C&&C.ngInherit&&C(s),C===Qs&&(u=!1)}}o=Object.getPrototypeOf(o)}!function JE(s){let o=0,u=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=$o(h.hostAttrs,u=$o(u,h.hostAttrs))}}(d)}function qg(s){return s===nr?{}:s===St?[]:s}function XE(s,o){const u=s.viewQuery;s.viewQuery=u?(d,h)=>{o(d,h),u(d,h)}:o}function AP(s,o){const u=s.contentQueries;s.contentQueries=u?(d,h,g)=>{o(d,h,g),u(d,h,g)}:o}function mi(s,o){const u=s.hostBindings;s.hostBindings=u?(d,h)=>{o(d,h),u(d,h)}:o}let Wg=null;function cl(){if(!Wg){const s=tn.Symbol;if(s&&s.iterator)Wg=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const d=o[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Wg=d)}}}return Wg}function zf(s){return!!Zg(s)&&(Array.isArray(s)||!(s instanceof Map)&&cl()in s)}function Zg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function kt(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function O_(s,o,u,d){const h=Pe();return kt(h,uo(),o)&&(Jt(),ca(Dn(),h,s,o,u,d)),O_}function ch(s,o,u,d,h,g){const C=function To(s,o,u,d){const h=kt(s,o,u);return kt(s,o+1,d)||h}(s,function zr(){return Rt.lFrame.bindingIndex}(),u,h);return ui(2),C?o+Ee(u)+d+Ee(h)+g:Wt}function ab(s,o,u,d,h,g,_,C){const I=Pe(),A=Jt(),P=s+22,U=A.firstCreatePass?function lA(s,o,u,d,h,g,_,C,I){const A=o.consts,P=Oc(o,s,4,_||null,Ci(A,C));Ug(o,u,P,Ci(A,I)),La(o,P);const U=P.tViews=x_(2,P,d,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,P),U.queries=o.queries.embeddedTView(P)),P}(P,A,I,o,u,d,h,g,_):A.data[P];Ii(U,!1);const Z=I[11].createComment("");Ny(A,I,Z,U),dn(Z,I),jf(I,I[P]=WE(Z,I,Z,U)),Ta(U)&&S_(A,I,U),null!=_&&Vg(I,U,C)}function Zf(s){return function Vi(s,o){return s[o]}(function On(){return Rt.lFrame.contextLView}(),22+s)}function U_(s,o,u){const d=Pe();return kt(d,uo(),o)&&Ts(Jt(),Dn(),d,s,o,d[11],u,!1),U_}function hu(s,o,u,d,h){const _=h?"class":"style";Gg(s,u,o.inputs[_],_,d)}function j_(s,o,u,d){const h=Pe(),g=Jt(),_=22+s,C=h[11],I=h[_]=de(C,o,function Ad(){return Rt.lFrame.currentNamespace}()),A=g.firstCreatePass?function B_(s,o,u,d,h,g,_){const C=o.consts,A=Oc(o,s,2,h,Ci(C,g));return Ug(o,u,A,Ci(C,_)),null!==A.attrs&&Ys(A,A.attrs,!1),null!==A.mergedAttrs&&Ys(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(_,g,h,0,o,u,d):g.data[_];Ii(A,!0);const P=A.mergedAttrs;null!==P&&ec(C,I,P);const U=A.classes;null!==U&&Vy(C,I,U);const Z=A.styles;return null!==Z&&Ly(C,I,Z),64!=(64&A.flags)&&Ny(g,h,I,A),0===function ql(){return Rt.lFrame.elementDepthCount}()&&dn(I,h),function Ed(){Rt.lFrame.elementDepthCount++}(),Ta(A)&&(S_(g,h,A),Lg(g,A,h)),null!==d&&Vg(h,A),j_}function Yg(){let s=Wn();Ra()?Mu():(s=s.parent,Ii(s,!1));const o=s;!function Xh(){Rt.lFrame.elementDepthCount--}();const u=Jt();return u.firstCreatePass&&(La(u,s),Ia(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Md(s){return 0!=(16&s.flags)}(o)&&hu(u,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function nf(s){return 0!=(32&s.flags)}(o)&&hu(u,o,Pe(),o.stylesWithoutHost,!1),Yg}function $_(s,o,u,d){return j_(s,o,u,d),Yg(),$_}function fl(s,o,u){const d=Pe(),h=Jt(),g=s+22,_=h.firstCreatePass?function cA(s,o,u,d,h){const g=o.consts,_=Ci(g,d),C=Oc(o,s,8,"ng-container",_);return null!==_&&Ys(C,_,!0),Ug(o,u,C,Ci(g,h)),null!==o.queries&&o.queries.elementStart(o,C),C}(g,h,d,o,u):h.data[g];Ii(_,!0);const C=d[g]=d[11].createComment("");return Ny(h,d,C,_),dn(C,d),Ta(_)&&(S_(h,d,_),Lg(h,_,d)),null!=u&&Vg(d,_),fl}function pl(){let s=Wn();const o=Jt();return Ra()?Mu():(s=s.parent,Ii(s,!1)),o.firstCreatePass&&(La(o,s),Ia(s)&&o.queries.elementEnd(s)),pl}function H_(){return Pe()}function Qg(s){return!!s&&"function"==typeof s.then}function G_(s){return!!s&&"function"==typeof s.subscribe}const jc=G_;function z_(s,o,u,d){const h=Pe(),g=Jt(),_=Wn();return function cb(s,o,u,d,h,g,_,C){const I=Ta(d),P=s.firstCreatePass&&Ks(s),U=o[8],Z=$f(o);let te=!0;if(3&d.type||C){const Je=si(d,o),yt=C?C(Je):Je,Pt=Z.length,Me=C?wn=>C(Cn(wn[d.index])):d.index;let Vt=null;if(!C&&I&&(Vt=function lb(s,o,u,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const _=h[g];if(_===u&&h[g+1]===d){const C=o[7],I=h[g+2];return C.length>I?C[I]:null}"string"==typeof _&&(g+=2)}return null}(s,o,h,d.index)),null!==Vt)(Vt.__ngLastListenerFn__||Vt).__ngNextListenerFn__=g,Vt.__ngLastListenerFn__=g,te=!1;else{g=hh(d,o,U,g,!1);const wn=u.listen(yt,h,g);Z.push(g,wn),P&&P.push(h,Me,Pt,Pt+1)}}else g=hh(d,o,U,g,!1);const Te=d.outputs;let je;if(te&&null!==Te&&(je=Te[h])){const Je=je.length;if(Je)for(let yt=0;yt<Je;yt+=2){const Yn=o[je[yt]][je[yt+1]].subscribe(g),Jc=Z.length;Z.push(g,Yn),P&&P.push(h,d.index,Jc,-(Jc+1))}}}(g,h,h[11],_,s,o,0,d),z_}function Jg(s,o,u,d){try{return!1!==u(d)}catch(h){return Hf(s,h),!1}}function hh(s,o,u,d,h){return function g(_){if(_===Function)return d;gi(2&s.flags?Sr(s.index,o):o);let I=Jg(o,0,d,_),A=g.__ngNextListenerFn__;for(;A;)I=Jg(o,0,A,_)&&I,A=A.__ngNextListenerFn__;return h&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function db(s=1){return function Dd(s){return(Rt.lFrame.contextLView=function Jp(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function yb(s,o,u,d,h){const g=s[u+1],_=null===o;let C=d?Eo(g):Ws(g),I=!1;for(;0!==C&&(!1===I||_);){const P=s[C+1];pA(s[C],o)&&(I=!0,s[C+1]=d?w_(P):v_(P)),C=d?Eo(P):Ws(P)}I&&(s[u+1]=d?v_(g):w_(g))}function pA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&go(s,o)>=0}const qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function _b(s){return s.substring(qr.key,qr.keyEnd)}function K_(s,o){const u=qr.textEnd;return u===o?-1:(o=qr.keyEnd=function wb(s,o,u){for(;o<u&&s.charCodeAt(o)>32;)o++;return o}(s,qr.key=o,u),Ao(s,o,u))}function Ao(s,o,u){for(;o<u&&s.charCodeAt(o)<=32;)o++;return o}function fh(s,o,u){return So(s,o,u,!1),fh}function tm(s,o){return So(s,o,null,!0),tm}function nm(s){!function Gi(s,o,u,d){const h=Jt(),g=ui(2);h.firstUpdatePass&&Tb(h,null,g,d);const _=Pe();if(u!==Wt&&kt(_,g,u)){const C=h.data[cn()];if(mA(C,d)&&!Ib(h,g)){let I=d?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(u=we(I,u||"")),hu(h,C,_,u,d)}else!function X_(s,o,u,d,h,g,_,C){h===Wt&&(h=St);let I=0,A=0,P=0<h.length?h[0]:null,U=0<g.length?g[0]:null;for(;null!==P||null!==U;){const Z=I<h.length?h[I+1]:void 0,te=A<g.length?g[A+1]:void 0;let je,Te=null;P===U?(I+=2,A+=2,Z!==te&&(Te=U,je=te)):null===U||null!==P&&P<U?(I+=2,Te=P):(A+=2,Te=U,je=te),null!==Te&&xb(s,o,u,d,Te,je,_,C),P=I<h.length?h[I]:null,U=A<g.length?g[A]:null}}(h,C,_,_[11],_[g+1],_[g+1]=function Qf(s,o,u){if(null==u||""===u)return St;const d=[],h=oa(u);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(d,g,h[g]);else"string"==typeof h&&o(d,h);return d}(s,o,u),d,g)}}(ci,Xs,s,!0)}function Xs(s,o){for(let u=function gA(s){return function fa(s){qr.key=0,qr.keyEnd=0,qr.value=0,qr.valueEnd=0,qr.textEnd=s.length}(s),K_(s,Ao(s,0,qr.textEnd))}(o);u>=0;u=K_(o,u))ci(s,_b(o),!0)}function So(s,o,u,d){const h=Pe(),g=Jt(),_=ui(2);g.firstUpdatePass&&Tb(g,s,_,d),o!==Wt&&kt(h,_,o)&&xb(g,g.data[cn()],h,h[11],s,h[_+1]=function Rb(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ve(oa(s)))),s}(o,u),d,_)}function Ib(s,o){return o>=s.expandoStartIndex}function Tb(s,o,u,d){const h=s.data;if(null===h[u+1]){const g=h[cn()],_=Ib(s,u);mA(g,d)&&null===o&&!_&&(o=!1),o=function J_(s,o,u,d){const h=Kl(s);let g=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(u=Yf(u=rm(null,s,o,u,d),o.attrs,d),g=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==h)if(u=rm(h,s,o,u,d),null===g){let I=function Db(s,o,u){const d=u?o.classBindings:o.styleBindings;if(0!==Ws(d))return s[Eo(d)]}(s,o,d);void 0!==I&&Array.isArray(I)&&(I=rm(null,s,o,I[1],d),I=Yf(I,o.attrs,d),function Ab(s,o,u,d){s[Eo(u?o.classBindings:o.styleBindings)]=d}(s,o,d,I))}else g=function Sb(s,o,u){let d;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)d=Yf(d,s[g].hostAttrs,u);return Yf(d,o.attrs,u)}(s,o,d)}return void 0!==g&&(d?o.residualClasses=g:o.residualStyles=g),u}(h,g,o,d),function hA(s,o,u,d,h,g){let _=g?o.classBindings:o.styleBindings,C=Eo(_),I=Ws(_);s[d]=u;let P,A=!1;if(Array.isArray(u)){const U=u;P=U[1],(null===P||go(U,P)>0)&&(A=!0)}else P=u;if(h)if(0!==I){const Z=Eo(s[C+1]);s[d+1]=Rg(Z,C),0!==Z&&(s[Z+1]=Pf(s[Z+1],d)),s[C+1]=function __(s,o){return 131071&s|o<<17}(s[C+1],d)}else s[d+1]=Rg(C,0),0!==C&&(s[C+1]=Pf(s[C+1],d)),C=d;else s[d+1]=Rg(I,0),0===C?C=d:s[I+1]=Pf(s[I+1],d),I=d;A&&(s[d+1]=v_(s[d+1])),yb(s,P,d,!0),yb(s,P,d,!1),function fA(s,o,u,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&go(g,o)>=0&&(u[d+1]=w_(u[d+1]))}(o,P,s,d,g),_=Rg(C,I),g?o.classBindings=_:o.styleBindings=_}(h,g,o,u,_,d)}}function rm(s,o,u,d,h){let g=null;const _=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<_&&(g=o[C],d=Yf(d,g.hostAttrs,h),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),d}function Yf(s,o,u){const d=u?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const _=o[g];"number"==typeof _?h=_:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ci(s,_,!!u||o[++g]))}return void 0===s?null:s}function xb(s,o,u,d,h,g,_,C){if(!(3&o.type))return;const I=s.data,A=I[C+1];ph(function Nf(s){return 1==(1&s)}(A)?Mb(I,o,u,h,Ws(A),_):void 0)||(ph(g)||function DE(s){return 2==(2&s)}(A)&&(g=Mb(I,null,u,h,C,_)),function XR(s,o,u,d,h){if(o)h?s.addClass(u,d):s.removeClass(u,d);else{let g=-1===d.indexOf("-")?void 0:Pr.DashCase;null==h?s.removeStyle(u,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=Pr.Important),s.setStyle(u,d,h,g))}}(d,_,ao(cn(),u),h,g))}function Mb(s,o,u,d,h,g){const _=null===o;let C;for(;h>0;){const I=s[h],A=Array.isArray(I),P=A?I[1]:I,U=null===P;let Z=u[h+1];Z===Wt&&(Z=U?St:void 0);let te=U?Wu(Z,d):P===d?Z:void 0;if(A&&!ph(te)&&(te=Wu(I,d)),ph(te)&&(C=te,_))return C;const Te=s[h+1];h=_?Eo(Te):Ws(Te)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(C=Wu(I,d))}return C}function ph(s){return void 0!==s}function mA(s,o){return 0!=(s.flags&(o?16:32))}function yA(s,o=""){const u=Pe(),d=Jt(),h=s+22,g=d.firstCreatePass?Oc(d,h,1,o,null):d.data[h],_=u[h]=function M(s,o){return s.createText(o)}(u[11],o);Ny(d,u,_,g),Ii(g,!1)}function Pb(s){return ev("",s,""),Pb}function ev(s,o,u){const d=Pe(),h=function dl(s,o,u,d){return kt(s,uo(),u)?o+Ee(u)+d:Wt}(d,s,o,u);return h!==Wt&&lu(d,cn(),h),ev}function Xf(s,o,u,d,h){const g=Pe(),_=ch(g,s,o,u,d,h);return _!==Wt&&lu(g,cn(),_),Xf}function nv(s,o,u){const d=Pe();if(kt(d,uo(),o)){const g=Jt(),_=Dn();Ts(g,_,d,s,o,function Si(s,o,u){return(null===s||bi(s))&&(u=function Lo(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(u[o.index])),u[11]}(Kl(g.data),_,d),u,!0)}return nv}const Gc=void 0;var PA=["en",[["a","p"],["AM","PM"],Gc],[["AM","PM"],Gc,Gc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gc,"{1} 'at' {0}",Gc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function RA(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let zc={};function ip(s){const o=function kA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=sp(o);if(u)return u;const d=o.split("-")[0];if(u=sp(d),u)return u;if("en"===d)return PA;throw new De(701,!1)}function am(s){return ip(s)[Lt.PluralCase]}function sp(s){return s in zc||(zc[s]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[s]),zc[s]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();const qc="en-US";let rv=qc;function cv(s,o,u,d,h){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)cv(s[g],o,u,d,h);else{const g=Jt(),_=Pe();let C=Rc(s)?s:J(s.provide),I=eE(s);const A=Wn(),P=1048575&A.providerIndexes,U=A.directiveStart,Z=A.providerIndexes>>20;if(Rc(s)||!s.multi){const te=new Bo(I,h,uu),Te=hv(C,o,h?P:P+Z,U);-1===Te?(Bs(Ho(A,_),g,C),dv(g,s,o.length),o.push(C),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(te),_.push(te)):(u[Te]=te,_[Te]=te)}else{const te=hv(C,o,P+Z,U),Te=hv(C,o,P,P+Z),je=te>=0&&u[te],Je=Te>=0&&u[Te];if(h&&!Je||!h&&!je){Bs(Ho(A,_),g,C);const yt=function UP(s,o,u,d,h){const g=new Bo(s,u,uu);return g.multi=[],g.index=o,g.componentProviders=0,mC(g,h,d&&!u),g}(h?yC:sS,u.length,h,d,I);!h&&Je&&(u[Te].providerFactory=yt),dv(g,s,o.length,0),o.push(C),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(yt),_.push(yt)}else dv(g,s,te>-1?te:Te,mC(u[h?Te:te],I,!h&&d));!h&&d&&Je&&u[Te].componentProviders++}}}function dv(s,o,u,d){const h=Rc(o),g=function dD(s){return!!s.useClass}(o);if(h||g){const I=(g?J(o.useClass):o).prototype.ngOnDestroy;if(I){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const P=A.indexOf(u);-1===P?A.push(u,[d,I]):A[P+1].push(d,I)}else A.push(u,I)}}}function mC(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function hv(s,o,u,d){for(let h=u;h<d;h++)if(o[h]===s)return h;return-1}function sS(s,o,u,d){return fv(this.multi,[])}function yC(s,o,u,d){const h=this.multi;let g;if(this.providerFactory){const _=this.providerFactory.componentProviders,C=js(u,u[1],this.providerFactory.index,d);g=C.slice(0,_),fv(h,g);for(let I=_;I<C.length;I++)g.push(C[I])}else g=[],fv(h,g);return g}function fv(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function _C(s,o=[]){return u=>{u.providersResolver=(d,h)=>function gC(s,o,u){const d=Jt();if(d.firstCreatePass){const h=bi(s);cv(u,d.data,d.blueprint,h,!0),cv(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class fu{}class vC{}function oS(s,o){return new pv(s,o??null)}class pv extends fu{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new P_(this);const d=Ze(o);this._bootstrapComponents=ua(d.bootstrap),this._r3Injector=Sg(o,u,[{provide:fu,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver}],ve(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class _m extends vC{constructor(o){super(),this.moduleType=o}create(o){return new pv(this.moduleType,o)}}class gv extends fu{constructor(o,u,d){super(),this.componentFactoryResolver=new P_(this),this.instance=null;const h=new fD([...o,{provide:fu,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver}],u||Eg(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function gn(s,o,u=null){return new gv(s,o,u).injector}let xo=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=Ky(0,u.type),h=d.length>0?gn([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Re({token:s,providedIn:"environment",factory:()=>new s(or(Pc))}),s})();function yl(s){s.getStandaloneInjector=o=>o.get(xo).getOrCreateStandaloneInjector(s)}function Eh(s,o,u,d){return function CC(s,o,u,d,h,g){const _=o+u;return kt(s,_,h)?function Ds(s,o,u){return s[o]=u}(s,_+1,g?d.call(g,h):d(h)):function Yc(s,o){const u=s[o];return u===Wt?void 0:u}(s,_+1)}(Pe(),function oi(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,u,d)}function bv(s){return o=>{setTimeout(s,void 0,o)}}const pa=class Ev extends l.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){let h=o,g=u||(()=>null),_=d;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),_=I.complete?.bind(I)}this.__isAsync&&(g=bv(g),h&&(h=bv(h)),_&&(_=bv(_)));const C=super.subscribe({next:h,error:g,complete:_});return o instanceof j.w0&&o.add(C),C}};function AC(){return this._results[cl()]()}class Cv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=cl(),d=Cv.prototype;d[u]||(d[u]=AC)}get changes(){return this._changes||(this._changes=new pa)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const h=Tr(o);(this._changesDetected=!function zu(s,o,u){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=o[d];if(u&&(h=u(h),g=u(g)),g!==h)return!1}return!0}(d._results,h,u))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let cp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Cm,s})();const dp=cp,SC=class extends dp{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o,u){const d=this._declarationTContainer.tViews,h=Og(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(d)),oh(d,h,o),new Lr(h)}};function Cm(){return hp(Wn(),Pe())}function hp(s,o){return 4&s.type?new SC(o,s,nh(s,o)):null}let Im=(()=>{class s{}return s.__NG_ELEMENT_ID__=_S,s})();function _S(){return Tv(Wn(),Pe())}const vS=Im,xC=class extends vS{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return nh(this._hostTNode,this._hostLView)}get injector(){return new qo(this._hostTNode,this._hostLView)}get parentInjector(){const o=ja(this._hostTNode,this._hostLView);if(tc(o)){const u=ns(o,this._hostLView),d=Va(o);return new qo(u[1].data[d+8],u)}return new qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Iv(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const _=o.createEmbeddedView(u||{},g);return this.insert(_,h),_}createComponent(o,u,d,h,g){const _=o&&!function Di(s){return"function"==typeof s}(o);let C;if(_)C=u;else{const U=u||{};C=U.index,d=U.injector,h=U.projectableNodes,g=U.environmentInjector||U.ngModuleRef}const I=_?o:new Gf(k(o)),A=d||this.parentInjector;if(!g&&null==I.ngModule){const Z=(_?A:this.parentInjector).get(Pc,null);Z&&(g=Z)}const P=I.create(A,h,void 0,g);return this.insert(P.hostView,C),P}insert(o,u){const d=o._lView,h=d[1];if(function xa(s){return Gr(s[3])}(d)){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const U=d[3],Z=new xC(U,U[6],U[3]);Z.detach(Z.indexOf(o))}}const g=this._adjustIndex(u),_=this._lContainer;!function $i(s,o,u,d){const h=10+d,g=u.length;d>0&&(u[h-1][4]=o),d<g-10?(o[4]=u[h],ac(u,10+d,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function sa(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,d,_,g);const C=Oy(g,_),I=d[11],A=il(I,_[7]);return null!==A&&function nt(s,o,u,d,h,g){d[0]=h,d[6]=o,wo(s,d,u,1,h,g)}(h,_[6],I,d,A,C),o.attachToViewContainerRef(),ac(fp(_),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Iv(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=_f(this._lContainer,u);d&&(Wa(fp(this._lContainer),u),rl(d[1],d))}detach(o){const u=this._adjustIndex(o,-1),d=_f(this._lContainer,u);return d&&null!=Wa(fp(this._lContainer),u)?new Lr(d):null}_adjustIndex(o,u=0){return o??this.length+u}};function Iv(s){return s[8]}function fp(s){return s[8]||(s[8]=[])}function Tv(s,o){let u;const d=o[s.index];if(Gr(d))u=d;else{let h;if(8&s.type)h=Cn(d);else{const g=o[11];h=g.createComment("");const _=si(s,o);vo(g,il(g,_),h,function JR(s,o){return s.nextSibling(o)}(g,_),!1)}o[s.index]=u=WE(d,o,h,s),jf(o,u)}return new xC(u,s,o)}class Av{constructor(o){this.queryList=o,this.matches=null}clone(){return new Av(this.queryList)}setDirty(){this.queryList.setDirty()}}class pp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let g=0;g<d;g++){const _=u.getByIndex(g);h.push(this.queries[_.indexInDeclarationView].clone())}return new pp(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Lv(o,u).matches&&this.queries[u].setDirty()}}class Dm{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class Sv{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const h=null!==u?u.length:0,g=this.getByIndex(d).embeddedTView(o,h);g&&(g.indexInDeclarationView=d,null!==u?u.push(g):u=[g])}return null!==u?new Sv(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class gp{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new gp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(o,u,xv(u,g)),this.matchTNodeWithReadOption(o,u,zo(u,o,g,!1,!1))}else d===cp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,zo(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Df||h===Im||h===cp&&4&u.type)this.addMatch(u.index,-2);else{const g=zo(u,o,h,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function xv(s,o){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function Rv(s,o,u,d){return-1===u?function Mv(s,o){return 11&s.type?nh(s,o):4&s.type?hp(s,o):null}(o,s):-2===u?function wS(s,o,u){return u===Df?nh(o,s):u===cp?hp(o,s):u===Im?Tv(o,s):void 0}(s,o,d):js(s,s[1],u,o)}function RC(s,o,u,d){const h=o[19].queries[d];if(null===h.matches){const g=s.data,_=u.matches,C=[];for(let I=0;I<_.length;I+=2){const A=_[I];C.push(A<0?null:Rv(o,g[A],_[I+1],u.metadata.read))}h.matches=C}return h.matches}function Pv(s,o,u,d){const h=s.queries.getByIndex(u),g=h.matches;if(null!==g){const _=RC(s,o,h,u);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)d.push(_[C/2]);else{const A=g[C+1],P=o[-I];for(let U=10;U<P.length;U++){const Z=P[U];Z[17]===Z[3]&&Pv(Z[1],Z,A,d)}if(null!==P[9]){const U=P[9];for(let Z=0;Z<U.length;Z++){const te=U[Z];Pv(te[1],te,A,d)}}}}}return d}function mp(s){const o=Pe(),u=Jt(),d=Uo();Xr(d+1);const h=Lv(u,d);if(s.dirty&&function Gl(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Pv(u,o,d,[]):RC(u,o,h,d);s.reset(g,ID),s.notifyOnChanges()}return!0}return!1}function kv(s,o,u,d){const h=Jt();if(h.firstCreatePass){const g=Wn();(function Fv(s,o,u){null===s.queries&&(s.queries=new Sv),s.queries.track(new gp(o,u))})(h,new Dm(o,u,d),g.index),function ES(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function Sm(s,o,u){const d=new Cv(4==(4&u));Ff(s,o,d,d.destroy),null===o[19]&&(o[19]=new pp),o[19].queries.push(new Av(d))}(h,Pe(),u)}function Am(){return function Ov(s,o){return s[19].queries[o].queryList}(Pe(),Uo())}function Lv(s,o){return s.queries.getByIndex(o)}function Pm(...s){}const jC=new pn("Application Initializer");let Nm=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Pm,this.reject=Pm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(Qg(g))u.push(g);else if(jc(g)){const _=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});u.push(_)}}Promise.all(u).then(()=>{d()}).catch(h=>{this.reject(h)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(or(jC,8))},s.\u0275prov=Re({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const $C=new pn("AppId",{providedIn:"root",factory:function HC(){return`${zv()}${zv()}${zv()}`}});function zv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const GC=new pn("Platform Initializer"),ZS=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zC=new pn("appBootstrapListener"),KS=new pn("AnimationModuleType");let YS=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Re({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const qv=new pn("LocaleId",{providedIn:"root",factory:()=>hc(qv,lt.Optional|lt.SkipSelf)||function tN(){return typeof $localize<"u"&&$localize.locale||qc}()}),QS=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qC{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let XS=(()=>{class s{compileModuleSync(u){return new _m(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),g=ua(Ze(u).declarations).reduce((_,C)=>{const I=k(C);return I&&_.push(new Gf(I)),_},[]);return new qC(d,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Re({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const nx=(()=>Promise.resolve(0))();function Zv(s){typeof Zone>"u"?nx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Mo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pa(!1),this.onMicrotaskEmpty=new pa(!1),this.onStable=new pa(!1),this.onError=new pa(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&u,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function iN(){let s=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function rx(s){const o=()=>{!function km(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(tn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Kv(s),s.isCheckStableRunning=!0,KC(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Kv(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,h,g,_,C)=>{try{return ix(s),u.invokeTask(h,g,_,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Yv(s)}},onInvoke:(u,d,h,g,_,C,I)=>{try{return ix(s),u.invoke(h,g,_,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Yv(s)}},onHasTask:(u,d,h,g)=>{u.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,Kv(s),KC(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,d,h,g)=>(u.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mo.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Mo.isInAngularZone())throw new De(909,!1)}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,h){const g=this._inner,_=g.scheduleEventTask("NgZoneEvent: "+h,o,sN,Pm,Pm);try{return g.runTask(_,u,d)}finally{g.cancelTask(_)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const sN={};function KC(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Kv(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function ix(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Yv(s){s._nesting--,KC(s)}class Qv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pa,this.onMicrotaskEmpty=new pa,this.onStable=new pa,this.onError=new pa}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,h){return o.apply(u,d)}}const Jv=new pn(""),sx=new pn("");let QC,Xv=(()=>{class s{constructor(u,d,h){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,QC||(function ox(s){QC=s}(h),h.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mo.assertNotInAngularZone(),Zv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zv(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==g),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:h})}whenStable(u,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(or(Mo),or(YC),or(sx))},s.\u0275prov=Re({token:s,factory:s.\u0275fac}),s})(),YC=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return QC?.findTestabilityInTree(this,u,d)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Re({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Qc=null;const JC=new pn("AllowMultipleToken"),XC=new pn("PlatformDestroyListeners");class uN{constructor(o,u){this.name=o,this.token=u}}function ux(s,o,u=[]){const d=`Platform: ${o}`,h=new pn(d);return(g=[])=>{let _=eI();if(!_||_.injector.get(JC,!1)){const C=[...u,...g,{provide:h,useValue:!0}];s?s(C):function lN(s){if(Qc&&!Qc.get(JC,!1))throw new De(400,!1);Qc=s;const o=s.get(cx);(function ax(s){const o=s.get(GC,null);o&&o.forEach(u=>u())})(s)}(function lx(s=[],o){return kc.create({name:o,providers:[{provide:Yy,useValue:"platform"},{provide:XC,useValue:new Set([()=>Qc=null])},...s]})}(C,d))}return function dN(s){const o=eI();if(!o)throw new De(401,!1);return o}()}}function eI(){return Qc?.get(cx)??null}let cx=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const h=function hx(s,o){let u;return u="noop"===s?new Qv:("zone.js"===s?void 0:s)||new Mo(o),u}(d?.ngZone,function dx(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Mo,useValue:h}];return h.run(()=>{const _=kc.create({providers:g,parent:this.injector,name:u.moduleType.name}),C=u.create(_),I=C.injector.get(pi,null);if(!I)throw new De(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:P=>{I.handleError(P)}});C.onDestroy(()=>{t0(this._modules,C),A.unsubscribe()})}),function fx(s,o,u){try{const d=u();return Qg(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(I,h,()=>{const A=C.injector.get(Nm);return A.runInitializers(),A.donePromise.then(()=>(function Gb(s){ie(s,"Expected localeId to be defined"),"string"==typeof s&&(rv=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(qv,qc)||qc),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,d=[]){const h=px({},d);return function oN(s,o,u){const d=new _m(u);return Promise.resolve(d)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(u){const d=u.injector.get(e0);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new De(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(XC,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(or(kc))},s.\u0275prov=Re({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function px(s,o){return Array.isArray(o)?o.reduce(px,s):{...s,...o}}let e0=(()=>{class s{constructor(u,d,h){this._zone=u,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),_=new O.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Mo.assertNotInAngularZone(),Zv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Mo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),A.unsubscribe()}});this.isStable=(0,re.T)(g,_.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const h=u instanceof tE;if(!this._injector.get(Nm).done)throw!h&&be(u),new De(405,false);let _;_=h?u:this._injector.get(Tf).resolveComponentFactory(u),this.componentTypes.push(_.componentType);const C=function aN(s){return s.isBoundToModule}(_)?void 0:this._injector.get(fu),A=_.create(kc.NULL,[],d||_.selector,C),P=A.location.nativeElement,U=A.injector.get(Jv,null);return U?.registerApplication(P),A.onDestroy(()=>{this.detachView(A.hostView),t0(this.components,A),U?.unregisterApplication(P)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;t0(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(zC,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>t0(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new De(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(or(Mo),or(Pc),or(pi))},s.\u0275prov=Re({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function t0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let mx=!0,yx=!1;function fN(){return yx=!0,mx}function pN(){if(yx)throw new Error("Cannot enable prod mode after platform setup.");mx=!1}let gN=(()=>{class s{}return s.__NG_ELEMENT_ID__=mN,s})();function mN(s){return function yN(s,o,u){if(ps(s)&&!u){const d=Sr(s.index,o);return new Lr(d,d)}return 47&s.type?new Lr(o[16],o):null}(Wn(),Pe(),16==(16&s))}class s0{constructor(){}supports(o){return zf(o)}create(o){return new Cx(o)}}const bx=(s,o)=>o;class Cx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||bx}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,h=0,g=null;for(;u||d;){const _=!d||u&&u.currentIndex<Om(d,h,g)?u:d,C=Om(_,h,g),I=_.currentIndex;if(_===d)h--,d=d._nextRemoved;else if(u=u._next,null==_.previousIndex)h++;else{g||(g=[]);const A=C-h,P=I-h;if(A!=P){for(let Z=0;Z<A;Z++){const te=Z<g.length?g[Z]:g[Z]=0,Te=te+Z;P<=Te&&Te<A&&(g[Z]=te+1)}g[_.previousIndex]=P-A}}C!==I&&o(_,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!zf(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,_,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],_=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,_)?(d&&(u=this._verifyReinsertion(u,g,_,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,_,C),d=!0),u=u._next}else h=0,function aA(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[cl()]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,C=>{_=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,_)?(d&&(u=this._verifyReinsertion(u,C,_,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,_,h),d=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,h)):o=this._addAfter(new Ix(u,d),g,h),o}_verifyReinsertion(o,u,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ln),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ln),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Ix{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ur{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Ln{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new ur,this.map.set(u,d)),d.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Om(s,o,u){const d=s.previousIndex;if(null===d)return d;let h=0;return u&&d<u.length&&(h=u[d]),d+o+h}class Fm{constructor(){}supports(o){return o instanceof Map||Zg(o)}create(){return new Tx}}class Tx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Zg(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(h,d);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const g=h._prev,_=h._next;return g&&(g._next=_),_&&(_._prev=g),h._next=null,h._prev=null,h}const d=new Dx(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class Dx{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sI(){return new o0([new s0])}let o0=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||sI()),deps:[[s,new Ko,new vs]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(null!=d)return d;throw new De(901,!1)}}return s.\u0275prov=Re({token:s,providedIn:"root",factory:sI}),s})();function a0(){return new Lm([new Fm])}let Lm=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||a0()),deps:[[s,new Ko,new vs]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(d)return d;throw new De(901,!1)}}return s.\u0275prov=Re({token:s,providedIn:"root",factory:a0}),s})();const Mx=ux(null,"core",[]);let Rx=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(or(e0))},s.\u0275mod=_r({type:s}),s.\u0275inj=Tt({}),s})();function Px(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(wt,Oe,V)=>{V.d(Oe,{Z:()=>De});var l=V(2090),j=V(4859),O=V(6881),re=V(1877);class le{constructor(Ee,_e){this._delegate=Ee,this.firebase=_e,(0,O._addComponent)(Ee,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ee,_e=O._DEFAULT_ENTRY_NAME){var _t;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ee);return!pt.isInitialized()&&"EXPLICIT"===(null===(_t=pt.getComponent())||void 0===_t?void 0:_t.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:_e})}_removeServiceInstance(Ee,_e=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(_e)}_addComponent(Ee){(0,O._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,O._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function we(){const it=function ve(it){const Ee={},_e={__esModule:!0,initializeApp:function Se(ze,ue={}){const Ke=O.initializeApp(ze,ue);if((0,l.r3)(Ee,Ke.name))return Ee[Ke.name];const At=new it(Ke,_e);return Ee[Ke.name]=At,At},app:pt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function xe(ze){const ue=ze.name,Ke=ue.replace("-compat","");if(O._registerComponent(ze)&&"PUBLIC"===ze.type){const At=(gt=pt())=>{if("function"!=typeof gt[Ke])throw pe.create("invalid-app-argument",{appName:ue});return gt[Ke]()};void 0!==ze.serviceProps&&(0,l.ZB)(At,ze.serviceProps),_e[Ke]=At,it.prototype[Ke]=function(...gt){return this._getService.bind(this,ue).apply(this,ze.multipleInstances?gt:[])}}return"PUBLIC"===ze.type?_e[Ke]:null},removeApp:function _t(ze){delete Ee[ze]},useAsService:function Ge(ze,ue){return"serverAuth"===ue?null:ue},modularAPIs:O}};function pt(ze){if(!(0,l.r3)(Ee,ze=ze||O._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ze});return Ee[ze]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Ie(){return Object.keys(Ee).map(ze=>Ee[ze])}}),pt.App=it,_e}(le);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ee(_e){(0,l.ZB)(it,_e)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),it}(),z=new re.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=q;!function ke(it){(0,O.registerVersion)("@firebase/app-compat","0.2.13",it)}()},6881:(wt,Oe,V)=>{V.r(Oe),V.d(Oe,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>Xi,_DEFAULT_ENTRY_NAME:()=>Yr,_addComponent:()=>dt,_addOrOverwriteComponent:()=>bt,_apps:()=>xn,_clearComponents:()=>nr,_components:()=>zt,_getProvider:()=>Qr,_registerComponent:()=>tn,_removeServiceInstance:()=>yr,deleteApp:()=>Xn,getApp:()=>jn,getApps:()=>vn,initializeApp:()=>sn,onLog:()=>er,registerVersion:()=>Jr,setLogLevel:()=>Ei});var l=V(5861),j=V(4859),O=V(1877),re=V(2090);let ye,pe;const q=new WeakMap,z=new WeakMap,J=new WeakMap,$e=new WeakMap,ke=new WeakMap;let Ee={get(oe,ne,Le){if(oe instanceof IDBTransaction){if("done"===ne)return z.get(oe);if("objectStoreNames"===ne)return oe.objectStoreNames||J.get(oe);if("store"===ne)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return Se(oe[ne])},set:(oe,ne,Le)=>(oe[ne]=Le,!0),has:(oe,ne)=>oe instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in oe};function pt(oe){return"function"==typeof oe?function _t(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...ne){return oe.apply(Ie(this),ne),Se(q.get(this))}:function(...ne){return Se(oe.apply(Ie(this),ne))}:function(ne,...Le){const Ve=oe.call(Ie(this),ne,...Le);return J.set(Ve,ne.sort?ne.sort():[ne]),Se(Ve)}}(oe):(oe instanceof IDBTransaction&&function it(oe){if(z.has(oe))return;const ne=new Promise((Le,Ve)=>{const xt=()=>{oe.removeEventListener("complete",$t),oe.removeEventListener("error",fn),oe.removeEventListener("abort",fn)},$t=()=>{Le(),xt()},fn=()=>{Ve(oe.error||new DOMException("AbortError","AbortError")),xt()};oe.addEventListener("complete",$t),oe.addEventListener("error",fn),oe.addEventListener("abort",fn)});z.set(oe,ne)}(oe),((oe,ne)=>ne.some(Le=>oe instanceof Le))(oe,function ve(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,Ee):oe)}function Se(oe){if(oe instanceof IDBRequest)return function De(oe){const ne=new Promise((Le,Ve)=>{const xt=()=>{oe.removeEventListener("success",$t),oe.removeEventListener("error",fn)},$t=()=>{Le(Se(oe.result)),xt()},fn=()=>{Ve(oe.error),xt()};oe.addEventListener("success",$t),oe.addEventListener("error",fn)});return ne.then(Le=>{Le instanceof IDBCursor&&q.set(Le,oe)}).catch(()=>{}),ke.set(ne,oe),ne}(oe);if($e.has(oe))return $e.get(oe);const ne=pt(oe);return ne!==oe&&($e.set(oe,ne),ke.set(ne,oe)),ne}const Ie=oe=>ke.get(oe),ze=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Ke=new Map;function At(oe,ne){if(!(oe instanceof IDBDatabase)||ne in oe||"string"!=typeof ne)return;if(Ke.get(ne))return Ke.get(ne);const Le=ne.replace(/FromIndex$/,""),Ve=ne!==Le,xt=ue.includes(Le);if(!(Le in(Ve?IDBIndex:IDBObjectStore).prototype)||!xt&&!ze.includes(Le))return;const $t=function(){var fn=(0,l.Z)(function*($n,...Qt){const Hr=this.transaction($n,xt?"readwrite":"readonly");let Li=Hr.store;return Ve&&(Li=Li.index(Qt.shift())),(yield Promise.all([Li[Le](...Qt),xt&&Hr.done]))[0]});return function(Qt){return fn.apply(this,arguments)}}();return Ke.set(ne,$t),$t}!function _e(oe){Ee=oe(Ee)}(oe=>({...oe,get:(ne,Le,Ve)=>At(ne,Le)||oe.get(ne,Le,Ve),has:(ne,Le)=>!!At(ne,Le)||oe.has(ne,Le)}));class gt{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function Gt(oe){return"VERSION"===oe.getComponent()?.type}(Le)){const Ve=Le.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(Le=>Le).join(" ")}}const ct="@firebase/app",pr=new O.Yd("@firebase/app"),Yr="[DEFAULT]",Nn={[ct]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},xn=new Map,zt=new Map;function dt(oe,ne){try{oe.container.addComponent(ne)}catch(Le){pr.debug(`Component ${ne.name} failed to register with FirebaseApp ${oe.name}`,Le)}}function bt(oe,ne){oe.container.addOrOverwriteComponent(ne)}function tn(oe){const ne=oe.name;if(zt.has(ne))return pr.debug(`There were multiple attempts to register component ${ne}.`),!1;zt.set(ne,oe);for(const Le of xn.values())dt(Le,oe);return!0}function Qr(oe,ne){const Le=oe.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),oe.container.getProvider(ne)}function yr(oe,ne,Le=Yr){Qr(oe,ne).clearInstance(Le)}function nr(){zt.clear()}const zn=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qt{constructor(ne,Le,Ve){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}const Xi="9.23.0";function sn(oe,ne={}){let Le=oe;"object"!=typeof ne&&(ne={name:ne});const Ve=Object.assign({name:Yr,automaticDataCollectionEnabled:!1},ne),xt=Ve.name;if("string"!=typeof xt||!xt)throw zn.create("bad-app-name",{appName:String(xt)});if(Le||(Le=(0,re.aH)()),!Le)throw zn.create("no-options");const $t=xn.get(xt);if($t){if((0,re.vZ)(Le,$t.options)&&(0,re.vZ)(Ve,$t.config))return $t;throw zn.create("duplicate-app",{appName:xt})}const fn=new j.H0(xt);for(const Qt of zt.values())fn.addComponent(Qt);const $n=new qt(Le,Ve,fn);return xn.set(xt,$n),$n}function jn(oe=Yr){const ne=xn.get(oe);if(!ne&&oe===Yr&&(0,re.aH)())return sn();if(!ne)throw zn.create("no-app",{appName:oe});return ne}function vn(){return Array.from(xn.values())}function Xn(oe){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,l.Z)(function*(oe){const ne=oe.name;xn.has(ne)&&(xn.delete(ne),yield Promise.all(oe.container.getProviders().map(Le=>Le.delete())),oe.isDeleted=!0)})).apply(this,arguments)}function Jr(oe,ne,Le){var Ve;let xt=null!==(Ve=Nn[oe])&&void 0!==Ve?Ve:oe;Le&&(xt+=`-${Le}`);const $t=xt.match(/\s|\//),fn=ne.match(/\s|\//);if($t||fn){const $n=[`Unable to register library "${xt}" with version "${ne}":`];return $t&&$n.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),$t&&fn&&$n.push("and"),fn&&$n.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void pr.warn($n.join(" "))}tn(new j.wA(`${xt}-version`,()=>({library:xt,version:ne}),"VERSION"))}function er(oe,ne){if(null!==oe&&"function"!=typeof oe)throw zn.create("invalid-log-argument");(0,O.Am)(oe,ne)}function Ei(oe){(0,O.Ub)(oe)}const G="firebase-heartbeat-store";let $=null;function F(){return $||($=function xe(oe,ne,{blocked:Le,upgrade:Ve,blocking:xt,terminated:$t}={}){const fn=indexedDB.open(oe,ne),$n=Se(fn);return Ve&&fn.addEventListener("upgradeneeded",Qt=>{Ve(Se(fn.result),Qt.oldVersion,Qt.newVersion,Se(fn.transaction),Qt)}),Le&&fn.addEventListener("blocked",Qt=>Le(Qt.oldVersion,Qt.newVersion,Qt)),$n.then(Qt=>{$t&&Qt.addEventListener("close",()=>$t()),xt&&Qt.addEventListener("versionchange",Hr=>xt(Hr.oldVersion,Hr.newVersion,Hr))}).catch(()=>{}),$n}("firebase-heartbeat-database",1,{upgrade:(oe,ne)=>{0===ne&&oe.createObjectStore(G)}}).catch(oe=>{throw zn.create("idb-open",{originalErrorMessage:oe.message})})),$}function R(){return(R=(0,l.Z)(function*(oe){try{return yield(yield F()).transaction(G).objectStore(G).get(Ze(oe))}catch(ne){if(ne instanceof re.ZR)pr.warn(ne.message);else{const Le=zn.create("idb-get",{originalErrorMessage:ne?.message});pr.warn(Le.message)}}})).apply(this,arguments)}function Y(oe,ne){return be.apply(this,arguments)}function be(){return(be=(0,l.Z)(function*(oe,ne){try{const Ve=(yield F()).transaction(G,"readwrite");yield Ve.objectStore(G).put(ne,Ze(oe)),yield Ve.done}catch(Le){if(Le instanceof re.ZR)pr.warn(Le.message);else{const Ve=zn.create("idb-set",{originalErrorMessage:Le?.message});pr.warn(Ve.message)}}})).apply(this,arguments)}function Ze(oe){return`${oe.name}!${oe.options.appId}`}class tt{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Ot(Le),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var ne=this;return(0,l.Z)(function*(){const Ve=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=at();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==xt&&!ne._heartbeatsCache.heartbeats.some($t=>$t.date===xt))return ne._heartbeatsCache.heartbeats.push({date:xt,agent:Ve}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter($t=>{const fn=new Date($t.date).valueOf();return Date.now()-fn<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,l.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Le=at(),{heartbeatsToSend:Ve,unsentEntries:xt}=function Yt(oe,ne=1024){const Le=[];let Ve=oe.slice();for(const xt of oe){const $t=Le.find(fn=>fn.agent===xt.agent);if($t){if($t.dates.push(xt.date),on(Le)>ne){$t.dates.pop();break}}else if(Le.push({agent:xt.agent,dates:[xt.date]}),on(Le)>ne){Le.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:Le,unsentEntries:Ve}}(ne._heartbeatsCache.heartbeats),$t=(0,re.L)(JSON.stringify({version:2,heartbeats:Ve}));return ne._heartbeatsCache.lastSentHeartbeatDate=Le,xt.length>0?(ne._heartbeatsCache.heartbeats=xt,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),$t})()}}function at(){return(new Date).toISOString().substring(0,10)}class Ot{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,l.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function k(oe){return R.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Le=this;return(0,l.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const $t=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=ne.lastSentHeartbeatDate)&&void 0!==Ve?Ve:$t.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Le=this;return(0,l.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const $t=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=ne.lastSentHeartbeatDate)&&void 0!==Ve?Ve:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...ne.heartbeats]})}})()}}function on(oe){return(0,re.L)(JSON.stringify({version:2,heartbeats:oe})).length}!function $r(oe){tn(new j.wA("platform-logger",ne=>new gt(ne),"PRIVATE")),tn(new j.wA("heartbeat",ne=>new tt(ne),"PRIVATE")),Jr(ct,"0.9.13",oe),Jr(ct,"0.9.13","esm2017"),Jr("fire-js","")}("")},4859:(wt,Oe,V)=>{V.d(Oe,{H0:()=>ve,wA:()=>O});var l=V(5861),j=V(2090);class O{constructor(q,z,J){this.name=q,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const re="[DEFAULT]";class le{constructor(q,z){this.name=q,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const z=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(z)){const J=new j.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&J.resolve($e)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(q){var z;const J=this.normalizeInstanceIdentifier(q?.identifier),$e=null!==(z=q?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(ke){if($e)return null;throw ke}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function pe(we){return"EAGER"===we.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const ke=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(ke)}catch{}}}}clearInstance(q=re){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,l.Z)(function*(){const z=Array.from(q.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=re){return this.instances.has(q)}getOptions(q=re){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:z={}}=q,J=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[ke,De]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(ke)&&De.resolve($e);return $e}onInit(q,z){var J;const $e=this.normalizeInstanceIdentifier(z),ke=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;ke.add(q),this.onInitCallbacks.set($e,ke);const De=this.instances.get($e);return De&&q(De,$e),()=>{ke.delete(q)}}invokeOnInitCallbacks(q,z){const J=this.onInitCallbacks.get(z);if(J)for(const $e of J)try{$e(q,z)}catch{}}getOrInitializeService({instanceIdentifier:q,options:z={}}){let J=this.instances.get(q);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(we=q,we===re?void 0:we),options:z}),this.instances.set(q,J),this.instancesOptions.set(q,z),this.invokeOnInitCallbacks(J,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,J)}catch{}var we;return J||null}normalizeInstanceIdentifier(q=re){return this.component?this.component.multipleInstances?q:re:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const z=this.getProvider(q.name);if(z.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);z.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const z=new le(q,this);return this.providers.set(q,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,Oe,V)=>{V.d(Oe,{Am:()=>we,Ub:()=>ve,Yd:()=>pe,in:()=>j});const l=[];var j=(()=>{return(q=j||(j={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",j;var q})();const O={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},re=j.INFO,le={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(q,z,...J)=>{if(z<q.logLevel)return;const $e=(new Date).toISOString(),ke=le[z];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[ke](`[${$e}]  ${q.name}:`,...J)};class pe{constructor(z){this.name=z,this._logLevel=re,this._logHandler=ye,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in j))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...z),this._logHandler(this,j.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...z),this._logHandler(this,j.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,j.INFO,...z),this._logHandler(this,j.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,j.WARN,...z),this._logHandler(this,j.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...z),this._logHandler(this,j.ERROR,...z)}}function ve(q){l.forEach(z=>{z.setLogLevel(q)})}function we(q,z){for(const J of l){let $e=null;z&&z.level&&($e=O[z.level]),J.userLogHandler=null===q?null:(ke,De,...it)=>{const Ee=it.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");De>=($e??ke.logLevel)&&q({level:j[De].toLowerCase(),message:Ee,args:it,type:ke.name})}}}},259:(wt,Oe,V)=>{V.d(Oe,{C6:()=>l.getApps,KN:()=>l.registerVersion,Mq:()=>l.getApp,ZF:()=>l.initializeApp});var l=V(6881);(0,l.registerVersion)("firebase","9.23.0","app")},9260:(wt,Oe,V)=>{V.d(Oe,{Z:()=>l.Z});var l=V(3942);l.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(wt,Oe,V)=>{V.r(Oe);var l=V(5861),j=V(3942),O=V(1389),re=V(2090),pe=(V(6881),V(1877),V(4859));function ve(){return window}function z(){return(z=(0,l.Z)(function*(F,k,R){var Y;const{BuildInfo:be}=ve();(0,O.as)(k.sessionId,"AuthEvent did not contain a session ID");const Ze=yield _e(k.sessionId),mt={};return(0,O.at)()?mt.ibi=be.packageName:(0,O.au)()?mt.apn=be.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),be.displayName&&(mt.appDisplayName=be.displayName),mt.sessionId=Ze,(0,O.aw)(F,R,k.type,void 0,null!==(Y=k.eventId)&&void 0!==Y?Y:void 0,mt)})).apply(this,arguments)}function $e(){return($e=(0,l.Z)(function*(F){const{BuildInfo:k}=ve(),R={};(0,O.at)()?R.iosBundleId=k.packageName:(0,O.au)()?R.androidPackageName=k.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),yield(0,O.ax)(F,R)})).apply(this,arguments)}function it(){return(it=(0,l.Z)(function*(F,k,R){const{cordova:Y}=ve();let be=()=>{};try{yield new Promise((Ze,mt)=>{let Ce=null;function tt(){var Ot;Ze();const on=null===(Ot=Y.plugins.browsertab)||void 0===Ot?void 0:Ot.close;"function"==typeof on&&on(),"function"==typeof R?.close&&R.close()}function at(){Ce||(Ce=window.setTimeout(()=>{mt((0,O.az)(F,"redirect-cancelled-by-user"))},2e3))}function Yt(){"visible"===document?.visibilityState&&at()}k.addPassiveListener(tt),document.addEventListener("resume",at,!1),(0,O.au)()&&document.addEventListener("visibilitychange",Yt,!1),be=()=>{k.removePassiveListener(tt),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Yt,!1),Ce&&window.clearTimeout(Ce)}})}finally{be()}})).apply(this,arguments)}function _e(F){return _t.apply(this,arguments)}function _t(){return(_t=(0,l.Z)(function*(F){const k=pt(F),R=yield crypto.subtle.digest("SHA-256",k);return Array.from(new Uint8Array(R)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pt(F){if((0,O.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const k=new ArrayBuffer(F.length),R=new Uint8Array(k);for(let Y=0;Y<F.length;Y++)R[Y]=F.charCodeAt(Y);return R}class Ie extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(k=>{this.resolveInialized=k})}addPassiveListener(k){this.passiveListeners.add(k)}removePassiveListener(k){this.passiveListeners.delete(k)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(k){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(k)),super.onEvent(k)}initialized(){var k=this;return(0,l.Z)(function*(){yield k.initPromise})()}}function ze(F){return ue.apply(this,arguments)}function ue(){return(ue=(0,l.Z)(function*(F){const k=yield gt()._get(Gt(F));return k&&(yield gt()._remove(Gt(F))),k})).apply(this,arguments)}function At(){const F=[],k="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<20;R++){const Y=Math.floor(Math.random()*k.length);F.push(k.charAt(Y))}return F.join("")}function gt(){return(0,O.aC)(O.b)}function Gt(F){return(0,O.aD)("authEvent",F.config.apiKey,F.name)}function pr(F){if(!F?.includes("?"))return{};const[k,...R]=F.split("?");return(0,re.zd)(R.join("?"))}function ee(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function ut(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function en(F=(0,re.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){try{const F=self.localStorage,k=O.aL();if(F)return F.setItem(k,"1"),F.removeItem(k),!function hn(F=(0,re.z$)()){return function rn(){return(0,re.w1)()&&11===document?.documentMode}()||function Rn(F=(0,re.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,re.hl)()}catch{return Sn()&&(0,re.hl)()}return!1}function Sn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Tt(){return"http:"===ut()||"https:"===ut()}()||(0,re.ru)()||en())&&!function Mt(){return(0,re.b$)()||(0,re.UG)()}()&&Qn()&&!Sn()}function gr(){return en()&&typeof document<"u"}function lt(){return(lt=(0,l.Z)(function*(){return!!gr()&&new Promise(F=>{const k=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(k),F(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},Gn=O.aA,Fi="persistence";function Nn(F){return xn.apply(this,arguments)}function xn(){return(xn=(0,l.Z)(function*(F){yield F._initializationPromise;const k=dt(),R=O.aD(Fi,F.config.apiKey,F.name);k&&k.setItem(R,F._getPersistence())})).apply(this,arguments)}function dt(){var F;try{return(null===(F=function mr(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const bt=O.aA;class tn{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(class Ji{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(k){var R=this;return(0,l.Z)(function*(){const Y=k._key();let be=R.eventManagers.get(Y);return be||(be=new Ie(k),R.eventManagers.set(Y,be),R.attachCallbackListeners(k,be)),be})()}_openPopup(k){(0,O.av)(k,"operation-not-supported-in-this-environment")}_openRedirect(k,R,Y,be){var Ze=this;return(0,l.Z)(function*(){!function Ee(F){var k,R,Y,be,Ze,mt,Ce,tt,at,Yt;const Ot=ve();(0,O.aA)("function"==typeof(null===(k=Ot?.universalLinks)||void 0===k?void 0:k.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(R=Ot?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(Ze=null===(be=null===(Y=Ot?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===be?void 0:be.browsertab)||void 0===Ze?void 0:Ze.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(tt=null===(Ce=null===(mt=Ot?.cordova)||void 0===mt?void 0:mt.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===tt?void 0:tt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Yt=null===(at=Ot?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Yt?void 0:Yt.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(k);const mt=yield Ze._initialize(k);yield mt.initialized(),mt.resetRedirect(),(0,O.aG)(),yield Ze._originValidation(k);const Ce=function xe(F,k,R=null){return{type:k,eventId:R,urlResponse:null,sessionId:At(),postBody:null,tenantId:F.tenantId,error:(0,O.az)(F,"no-auth-event")}}(k,Y,be);yield function Ge(F,k){return gt()._set(Gt(F),k)}(k,Ce);const tt=yield function q(F,k,R){return z.apply(this,arguments)}(k,Ce,R),at=yield function ke(F){const{cordova:k}=ve();return new Promise(R=>{k.plugins.browsertab.isAvailable(Y=>{let be=null;Y?k.plugins.browsertab.openUrl(F):be=k.InAppBrowser.open(F,(0,O.ay)()?"_blank":"_system","location=yes"),R(be)})})}(tt);return function De(F,k,R){return it.apply(this,arguments)}(k,mt,at)})()}_isIframeWebStorageSupported(k,R){throw new Error("Method not implemented.")}_originValidation(k){const R=k._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function J(F){return $e.apply(this,arguments)}(k)),this.originValidationPromises[R]}attachCallbackListeners(k,R){const{universalLinks:Y,handleOpenURL:be,BuildInfo:Ze}=ve(),mt=setTimeout((0,l.Z)(function*(){yield ze(k),R.onEvent(ee())}),500),Ce=function(){var Yt=(0,l.Z)(function*(Ot){clearTimeout(mt);const on=yield ze(k);let $r=null;on&&Ot?.url&&($r=function Ke(F,k){var R,Y;const be=function Qi(F){const k=pr(F),R=k.link?decodeURIComponent(k.link):void 0,Y=pr(R).link,be=k.deep_link_id?decodeURIComponent(k.deep_link_id):void 0;return pr(be).link||be||Y||R||F}(k);if(be.includes("/__/auth/callback")){const Ze=pr(be),mt=Ze.firebaseError?function ct(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(Ze.firebaseError)):null,Ce=null===(Y=null===(R=mt?.code)||void 0===R?void 0:R.split("auth/"))||void 0===Y?void 0:Y[1],tt=Ce?(0,O.az)(Ce):null;return tt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:be,postBody:null}}return null}(on,Ot.url)),R.onEvent($r||ee())});return function(on){return Yt.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,Ce);const tt=be,at=`${Ze.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var Yt=(0,l.Z)(function*(Ot){if(Ot.toLowerCase().startsWith(at)&&Ce({url:Ot}),"function"==typeof tt)try{tt(Ot)}catch(on){console.error(on)}});return function(Ot){return Yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(k){var R=this;return(0,l.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(k)})()}_openPopup(k,R,Y,be){var Ze=this;return(0,l.Z)(function*(){return yield Ze.selectUnderlyingResolver(),Ze.assertedUnderlyingResolver._openPopup(k,R,Y,be)})()}_openRedirect(k,R,Y,be){var Ze=this;return(0,l.Z)(function*(){return yield Ze.selectUnderlyingResolver(),Ze.assertedUnderlyingResolver._openRedirect(k,R,Y,be)})()}_isIframeWebStorageSupported(k,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(k,R)}_originValidation(k){return this.assertedUnderlyingResolver._originValidation(k)}get _shouldInitProactively(){return gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return bt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var k=this;return(0,l.Z)(function*(){if(k.underlyingResolver)return;const R=yield function wi(){return lt.apply(this,arguments)}();k.underlyingResolver=R?k.cordovaResolver:k.browserResolver})()}}function Qr(F){return F.unwrap()}function nr(F){return zn(F)}function zn(F){const{_tokenResponse:k}=F instanceof re.ZR?F.customData:F;if(!k)return null;if(!(F instanceof re.ZR)&&"temporaryProof"in k&&"phoneNumber"in k)return O.P.credentialFromResult(F);const R=k.providerId;if(!R||R===O.p.PASSWORD)return null;let Y;switch(R){case O.p.GOOGLE:Y=O.V;break;case O.p.FACEBOOK:Y=O.U;break;case O.p.GITHUB:Y=O.W;break;case O.p.TWITTER:Y=O.Z;break;default:const{oauthIdToken:be,oauthAccessToken:Ze,oauthTokenSecret:mt,pendingToken:Ce,nonce:tt}=k;return Ze||mt||be||Ce?Ce?R.startsWith("saml.")?O.aO._create(R,Ce):O.L._fromParams({providerId:R,signInMethod:R,pendingToken:Ce,idToken:be,accessToken:Ze}):new O.X(R).credential({idToken:be,accessToken:Ze,rawNonce:tt}):null}return F instanceof re.ZR?Y.credentialFromError(F):Y.credentialFromResult(F)}function qt(F,k){return k.catch(R=>{throw R instanceof re.ZR&&function St(F,k){var R;const Y=null===(R=k.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===k?.code)k.resolver=new jn(F,O.aq(F,k));else if(Y){const be=zn(k),Ze=k;be&&(Ze.credential=be,Ze.tenantId=Y.tenantId||void 0,Ze.email=Y.email||void 0,Ze.phoneNumber=Y.phoneNumber||void 0)}}(F,R),R}).then(R=>{const be=R.user;return{operationType:R.operationType,credential:nr(R),additionalUserInfo:O.ao(R),user:vn.getOrCreate(be)}})}function Xi(F,k){return sn.apply(this,arguments)}function sn(){return(sn=(0,l.Z)(function*(F,k){const R=yield k;return{verificationId:R.verificationId,confirm:Y=>qt(F,R.confirm(Y))}})).apply(this,arguments)}class jn{constructor(k,R){this.resolver=R,this.auth=function yr(F){return F.wrapped()}(k)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(k){return qt(Qr(this.auth),this.resolver.resolveSignIn(k))}}class vn{constructor(k){this._delegate=k,this.multiFactor=O.ar(k)}static getOrCreate(k){return vn.USER_MAP.has(k)||vn.USER_MAP.set(k,new vn(k)),vn.USER_MAP.get(k)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(k){return this._delegate.getIdTokenResult(k)}getIdToken(k){return this._delegate.getIdToken(k)}linkAndRetrieveDataWithCredential(k){return this.linkWithCredential(k)}linkWithCredential(k){var R=this;return(0,l.Z)(function*(){return qt(R.auth,O.a0(R._delegate,k))})()}linkWithPhoneNumber(k,R){var Y=this;return(0,l.Z)(function*(){return Xi(Y.auth,O.l(Y._delegate,k,R))})()}linkWithPopup(k){var R=this;return(0,l.Z)(function*(){return qt(R.auth,O.d(R._delegate,k,tn))})()}linkWithRedirect(k){var R=this;return(0,l.Z)(function*(){return yield Nn(O.aH(R.auth)),O.g(R._delegate,k,tn)})()}reauthenticateAndRetrieveDataWithCredential(k){return this.reauthenticateWithCredential(k)}reauthenticateWithCredential(k){var R=this;return(0,l.Z)(function*(){return qt(R.auth,O.a1(R._delegate,k))})()}reauthenticateWithPhoneNumber(k,R){return Xi(this.auth,O.r(this._delegate,k,R))}reauthenticateWithPopup(k){return qt(this.auth,O.e(this._delegate,k,tn))}reauthenticateWithRedirect(k){var R=this;return(0,l.Z)(function*(){return yield Nn(O.aH(R.auth)),O.h(R._delegate,k,tn)})()}sendEmailVerification(k){return O.ae(this._delegate,k)}unlink(k){var R=this;return(0,l.Z)(function*(){return yield O.an(R._delegate,k),R})()}updateEmail(k){return O.aj(this._delegate,k)}updatePassword(k){return O.ak(this._delegate,k)}updatePhoneNumber(k){return O.u(this._delegate,k)}updateProfile(k){return O.ai(this._delegate,k)}verifyBeforeUpdateEmail(k,R){return O.af(this._delegate,k,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vn.USER_MAP=new WeakMap;const Xn=O.aA;let Pn=(()=>{class F{constructor(R,Y){if(this.app=R,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=R.options;Xn(be,"invalid-api-key",{appName:R.name}),Xn(be,"invalid-api-key",{appName:R.name});const Ze=typeof window<"u"?tn:void 0;this._delegate=Y.initialize({options:{persistence:er(be,R.name),popupRedirectResolver:Ze}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,Y){O.I(this._delegate,R,Y)}applyActionCode(R){return O.a5(this._delegate,R)}checkActionCode(R){return O.a6(this._delegate,R)}confirmPasswordReset(R,Y){return O.a4(this._delegate,R,Y)}createUserWithEmailAndPassword(R,Y){var be=this;return(0,l.Z)(function*(){return qt(be._delegate,O.a8(be._delegate,R,Y))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return O.ad(this._delegate,R)}isSignInWithEmailLink(R){return O.ab(this._delegate,R)}getRedirectResult(){var R=this;return(0,l.Z)(function*(){Xn(Bn(),R._delegate,"operation-not-supported-in-this-environment");const Y=yield O.j(R._delegate,tn);return Y?qt(R._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function Ae(F,k){(0,O.aH)(F)._logFramework(k)}(this._delegate,R)}onAuthStateChanged(R,Y,be){const{next:Ze,error:mt,complete:Ce}=Jr(R,Y,be);return this._delegate.onAuthStateChanged(Ze,mt,Ce)}onIdTokenChanged(R,Y,be){const{next:Ze,error:mt,complete:Ce}=Jr(R,Y,be);return this._delegate.onIdTokenChanged(Ze,mt,Ce)}sendSignInLinkToEmail(R,Y){return O.aa(this._delegate,R,Y)}sendPasswordResetEmail(R,Y){return O.a3(this._delegate,R,Y||void 0)}setPersistence(R){var Y=this;return(0,l.Z)(function*(){let be;switch(function Yr(F,k){Gn(Object.values(Jn).includes(k),F,"invalid-persistence-type"),(0,re.b$)()?Gn(k!==Jn.SESSION,F,"unsupported-persistence-type"):(0,re.UG)()?Gn(k===Jn.NONE,F,"unsupported-persistence-type"):Sn()?Gn(k===Jn.NONE||k===Jn.LOCAL&&(0,re.hl)(),F,"unsupported-persistence-type"):Gn(k===Jn.NONE||Qn(),F,"unsupported-persistence-type")}(Y._delegate,R),R){case Jn.SESSION:be=O.a;break;case Jn.LOCAL:be=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Jn.NONE:be=O.N;break;default:return O.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return qt(this._delegate,O._(this._delegate))}signInWithCredential(R){return qt(this._delegate,O.$(this._delegate,R))}signInWithCustomToken(R){return qt(this._delegate,O.a2(this._delegate,R))}signInWithEmailAndPassword(R,Y){return qt(this._delegate,O.a9(this._delegate,R,Y))}signInWithEmailLink(R,Y){return qt(this._delegate,O.ac(this._delegate,R,Y))}signInWithPhoneNumber(R,Y){return Xi(this._delegate,O.s(this._delegate,R,Y))}signInWithPopup(R){var Y=this;return(0,l.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),qt(Y._delegate,O.c(Y._delegate,R,tn))})()}signInWithRedirect(R){var Y=this;return(0,l.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),yield Nn(Y._delegate),O.f(Y._delegate,R,tn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return O.a7(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Jn,F})();function Jr(F,k,R){let Y=F;"function"!=typeof F&&({next:Y,error:k,complete:R}=F);const be=Y;return{next:mt=>be(mt&&vn.getOrCreate(mt)),error:k,complete:R}}function er(F,k){const R=function zt(F,k){const R=dt();if(!R)return[];const Y=O.aD(Fi,F,k);switch(R.getItem(Y)){case Jn.NONE:return[O.N];case Jn.LOCAL:return[O.i,O.a];case Jn.SESSION:return[O.a];default:return[]}}(F,k);if(typeof self<"u"&&!R.includes(O.i)&&R.push(O.i),typeof window<"u")for(const Y of[O.b,O.a])R.includes(Y)||R.push(Y);return R.includes(O.N)||R.push(O.N),R}class Ei{constructor(){this.providerId="phone",this._delegate=new O.P(Qr(j.Z.auth()))}static credential(k,R){return O.P.credential(k,R)}verifyPhoneNumber(k,R){return this._delegate.verifyPhoneNumber(k,R)}unwrap(){return this._delegate}}Ei.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ei.PROVIDER_ID=O.P.PROVIDER_ID;const _r=O.aA;class jr{constructor(k,R,Y=j.Z.app()){var be;_r(null===(be=Y.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new O.R(k,R,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(F){F.INTERNAL.registerComponent(new pe.wA("auth-compat",k=>{const R=k.getProvider("app-compat").getImmediate(),Y=k.getProvider("auth");return new Pn(R,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Ei,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:jr,TwitterAuthProvider:O.Z,Auth:Pn,AuthCredential:O.J,Error:re.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}(j.Z)},5861:(wt,Oe,V)=>{function l(O,re,le,ye,pe,ve,we){try{var q=O[ve](we),z=q.value}catch(J){return void le(J)}q.done?re(z):Promise.resolve(z).then(ye,pe)}function j(O){return function(){var re=this,le=arguments;return new Promise(function(ye,pe){var ve=O.apply(re,le);function we(z){l(ve,ye,pe,we,q,"next",z)}function q(z){l(ve,ye,pe,we,q,"throw",z)}we(void 0)})}}V.d(Oe,{Z:()=>j})},7582:(wt,Oe,V)=>{function re(ie,ee){var Ae={};for(var he in ie)Object.prototype.hasOwnProperty.call(ie,he)&&ee.indexOf(he)<0&&(Ae[he]=ie[he]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Ne=0;for(he=Object.getOwnPropertySymbols(ie);Ne<he.length;Ne++)ee.indexOf(he[Ne])<0&&Object.prototype.propertyIsEnumerable.call(ie,he[Ne])&&(Ae[he[Ne]]=ie[he[Ne]])}return Ae}function J(ie,ee,Ae,he){return new(Ae||(Ae=Promise))(function(Re,ut){function Tt(rn){try{Mt(he.next(rn))}catch(Rn){ut(Rn)}}function en(rn){try{Mt(he.throw(rn))}catch(Rn){ut(Rn)}}function Mt(rn){rn.done?Re(rn.value):function Ne(Re){return Re instanceof Ae?Re:new Ae(function(ut){ut(Re)})}(rn.value).then(Tt,en)}Mt((he=he.apply(ie,ee||[])).next())})}function Se(ie){return this instanceof Se?(this.v=ie,this):new Se(ie)}function Ie(ie,ee,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ne,he=Ae.apply(ie,ee||[]),Re=[];return Ne={},ut("next"),ut("throw"),ut("return"),Ne[Symbol.asyncIterator]=function(){return this},Ne;function ut(hn){he[hn]&&(Ne[hn]=function(Qn){return new Promise(function(Sn,Bn){Re.push([hn,Qn,Sn,Bn])>1||Tt(hn,Qn)})})}function Tt(hn,Qn){try{!function en(hn){hn.value instanceof Se?Promise.resolve(hn.value.v).then(Mt,rn):Rn(Re[0][2],hn)}(he[hn](Qn))}catch(Sn){Rn(Re[0][3],Sn)}}function Mt(hn){Tt("next",hn)}function rn(hn){Tt("throw",hn)}function Rn(hn,Qn){hn(Qn),Re.shift(),Re.length&&Tt(Re[0][0],Re[0][1])}}function Ge(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,ee=ie[Symbol.asyncIterator];return ee?ee.call(ie):(ie=function it(ie){var ee="function"==typeof Symbol&&Symbol.iterator,Ae=ee&&ie[ee],he=0;if(Ae)return Ae.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&he>=ie.length&&(ie=void 0),{value:ie&&ie[he++],done:!ie}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),Ae={},he("next"),he("throw"),he("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function he(Re){Ae[Re]=ie[Re]&&function(ut){return new Promise(function(Tt,en){!function Ne(Re,ut,Tt,en){Promise.resolve(en).then(function(Mt){Re({value:Mt,done:Tt})},ut)}(Tt,en,(ut=ie[Re](ut)).done,ut.value)})}}}V.d(Oe,{FC:()=>Ie,KL:()=>Ge,_T:()=>re,mG:()=>J,qq:()=>Se}),"function"==typeof SuppressedError&&SuppressedError}},wt=>{wt(wt.s=1694)}]);