<div class="inbox-container">
  <div class="cabecera">
    <div class="inbox-header">
      <i class="fas fa-arrow-left" (click)="volver()"></i>
      <h1>Mensajes</h1>
    </div>
    <div class="option" [ngClass]="{ active: optionDelete }">
      <i (click)="eliminar()" class="fas fa-trash"></i>
      <span class="close" [ngClass]="{ active: close }" (click)="cerrar()">&times;</span>
    </div>
  </div>
  <div
    style="
      gap: 1rem;
      display: flex;
      width: 100%;
      overflow-x: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
    "
  >
    <div style="text-align: center" *ngFor="let user of users2">
      <img
        (click)="abrirMensaje(user.idUser)"
        [src]="
          user?.foto
            ? user.foto
            : 'https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg'
        "
        alt="Foto de perfil"
        width="40"
        height="40"
        style="border-radius: 50%"
      />
      <div>{{ user?.usuario }}</div>
    </div>
  </div>
  <div style="width: 100%" class="inbox-messages">
    <div
      *ngFor="let message of mensajes; let i = index"
      class="message"
      [ngClass]="{ indicar: i === capIndex, active: i === capIndex && close }"
    >
      <div>
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div
            (click)="abrirMensaje(message.idEmisor)"
            style="
              display: flex;
              align-items: center;
              justify-content: space-between;
              width: -webkit-fill-available;
            "
          >
            <span style="display: flex; gap: 1rem; align-items: center">
              <img
                [src]="
                  message?.foto
                    ? message.foto
                    : 'https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg'
                "
                alt="Foto de perfil"
                width="40"
                height="40"
                style="border-radius: 50%"
              />
              <strong>{{ message.para }}</strong>
            </span>
          </div>
          <div>
            <span (click)="abrirEliminar(message.id, i)" style="font-size: 26px">&#8942;</span>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div style="width: 100%" class="inbox-messages">
    <div *ngFor="let message of mensajes3" class="message">
      <div>
        <div>
          <span
            style="display: flex; gap: 1rem; align-items: center"
            (click)="abrirMensaje(message.idReceptor)"
          >
            <img
              [src]="
                message?.foto1
                  ? message.foto1
                  : 'https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg'
              "
              alt="Foto de perfil"
              width="40"
              height="40"
              style="border-radius: 50%"
            />
            <strong>{{ message.de }}</strong>
          </span>
        </div>
      </div>
    </div>
  </div>
</div>
