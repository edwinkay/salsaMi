"use strict";(self.webpackChunkasi_somos_asi_bailamos=self.webpackChunkasi_somos_asi_bailamos||[]).push([[179],{2011:(bt,Ne,U)=>{U.d(Ne,{Dh:()=>ve,GT:()=>_e,cc:()=>Oe,hO:()=>He,on:()=>Z,pX:()=>de,xv:()=>we});var o=U(4650),$=U(9260),R=U(4976);bt=U.hmd(bt);const ie=["ngOnDestroy"],de=(ye,yt,pt,xe={})=>new Proxy(ye,{get:(Ie,Se)=>pt.runOutsideAngular(()=>{var qe;if(ye[Se])return!(null===(qe=xe?.spy)||void 0===qe)&&qe.get&&xe.spy.get(Se,ye[Se]),ye[Se];if(ie.indexOf(Se)>-1)return()=>{};const Ze=yt.toPromise().then(ce=>{const Qe=ce&&ce[Se];return"function"==typeof Qe?Qe.bind(ce):Qe&&Qe.then?Qe.then(xt=>pt.run(()=>xt)):pt.run(()=>Qe)});return new Proxy(()=>{},{get:(ce,Qe)=>Ze[Qe],apply:(ce,Qe,xt)=>Ze.then(gt=>{var qt;const ct=gt&&gt(...xt);return!(null===(qt=xe?.spy)||void 0===qt)&&qt.apply&&xe.spy.apply(Se,xt,ct),ct})})})}),_e=(ye,yt)=>{yt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(xe=>{Object.defineProperty(ye.prototype,xe,Object.getOwnPropertyDescriptor(pt.prototype||pt,xe))})})};class pe{constructor(yt){return yt}}const ve=new o.OlP("angularfire2.app.options"),we=new o.OlP("angularfire2.app.name");function Z(ye,yt,pt){const Ie="object"==typeof pt&&pt||{};Ie.name=Ie.name||"string"==typeof pt&&pt||"[DEFAULT]";const qe=$.Z.apps.filter(Ze=>Ze&&Ze.name===Ie.name)[0]||yt.runOutsideAngular(()=>$.Z.initializeApp(ye,Ie));try{JSON.stringify(ye)!==JSON.stringify(qe.options)&&q("error",`${qe.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(qe)}const q=(ye,...yt)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ye](...yt)},J={provide:pe,useFactory:Z,deps:[ve,o.R0b,[new o.FiY,we]]};let He=(()=>{class ye{constructor(pt){$.Z.registerVersion("angularfire",R.q4.full,"core"),$.Z.registerVersion("angularfire",R.q4.full,"app-compat"),$.Z.registerVersion("angular",o.q4F.full,pt.toString())}static initializeApp(pt,xe){return{ngModule:ye,providers:[{provide:ve,useValue:pt},{provide:we,useValue:xe}]}}}return ye.\u0275fac=function(pt){return new(pt||ye)(o.LFG(o.Lbi))},ye.\u0275mod=o.oAB({type:ye}),ye.\u0275inj=o.cJS({providers:[J]}),ye})();function Oe(ye,yt,pt,xe,Ie){const[,Se,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ze=>Ze[0]===ye)||[];if(Se)return function De(ye,yt){try{return ye.toString()===yt.toString()}catch{return ye===yt}}(Ie,qe)||(Ce("error",`${yt} was already initialized on the ${pt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),Ce("warn",{is:Ie,was:qe})),Se;{const Ze=xe();return globalThis.\u0275AngularfireInstanceCache.push([ye,Ze,Ie]),Ze}}const it=!!bt.hot,Ce=(ye,...yt)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ye](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(bt,Ne,U)=>{U.d(Ne,{q4:()=>su,iC:()=>Ai,fc:()=>wf,HU:()=>il,vb:()=>Kd,JM:()=>oa,u3:()=>aa});var o=U(4650),$=U(259),R=U(5861),ie=U(6881),de=U(2090),_e=U(4859),pe=U(1877);let we,Z;const He=new WeakMap,Oe=new WeakMap,De=new WeakMap,it=new WeakMap,Ce=new WeakMap;let pt={get(C,T,S){if(C instanceof IDBTransaction){if("done"===T)return Oe.get(C);if("objectStoreNames"===T)return C.objectStoreNames||De.get(C);if("store"===T)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return qe(C[T])},set:(C,T,S)=>(C[T]=S,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function Se(C){return"function"==typeof C?function Ie(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(Ze(this),T),qe(He.get(this))}:function(...T){return qe(C.apply(Ze(this),T))}:function(T,...S){const V=C.call(Ze(this),T,...S);return De.set(V,T.sort?T.sort():[T]),qe(V)}}(C):(C instanceof IDBTransaction&&function yt(C){if(Oe.has(C))return;const T=new Promise((S,V)=>{const W=()=>{C.removeEventListener("complete",X),C.removeEventListener("error",me),C.removeEventListener("abort",me)},X=()=>{S(),W()},me=()=>{V(C.error||new DOMException("AbortError","AbortError")),W()};C.addEventListener("complete",X),C.addEventListener("error",me),C.addEventListener("abort",me)});Oe.set(C,T)}(C),((C,T)=>T.some(S=>C instanceof S))(C,function q(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,pt):C)}function qe(C){if(C instanceof IDBRequest)return function ye(C){const T=new Promise((S,V)=>{const W=()=>{C.removeEventListener("success",X),C.removeEventListener("error",me)},X=()=>{S(qe(C.result)),W()},me=()=>{V(C.error),W()};C.addEventListener("success",X),C.addEventListener("error",me)});return T.then(S=>{S instanceof IDBCursor&&He.set(S,C)}).catch(()=>{}),Ce.set(T,C),T}(C);if(it.has(C))return it.get(C);const T=Se(C);return T!==C&&(it.set(C,T),Ce.set(T,C)),T}const Ze=C=>Ce.get(C),xt=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],qt=new Map;function ct(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(qt.get(T))return qt.get(T);const S=T.replace(/FromIndex$/,""),V=T!==S,W=gt.includes(S);if(!(S in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!xt.includes(S))return;const X=function(){var me=(0,R.Z)(function*(Je,...We){const et=this.transaction(Je,W?"readwrite":"readonly");let Vt=et.store;return V&&(Vt=Vt.index(We.shift())),(yield Promise.all([Vt[S](...We),W&&et.done]))[0]});return function(We){return me.apply(this,arguments)}}();return qt.set(T,X),X}!function xe(C){pt=C(pt)}(C=>({...C,get:(T,S,V)=>ct(T,S)||C.get(T,S,V),has:(T,S)=>!!ct(T,S)||C.has(T,S)}));const is="@firebase/installations",ss="w:0.6.4",se="FIS_v2",ut=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dt(C){return C instanceof de.ZR&&C.code.includes("request-failed")}function en({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Pt(C){return{token:C.token,requestStatus:2,expiresIn:gr(C.expiresIn),creationTime:Date.now()}}function rn(C,T){return kn.apply(this,arguments)}function kn(){return(kn=(0,R.Z)(function*(C,T){const V=(yield T.json()).error;return ut.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function pn({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Qn(C,{refreshToken:T}){const S=pn(C);return S.append("Authorization",function wi(C){return`${se} ${C}`}(T)),S}function Sn(C){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,R.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function gr(C){return Number(C.replace("s","000"))}function lt(C,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,R.Z)(function*({appConfig:C,heartbeatServiceProvider:T},{fid:S}){const V=en(C),W=pn(C),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Je={method:"POST",headers:W,body:JSON.stringify({fid:S,authVersion:se,appId:C.appId,sdkVersion:ss})},We=yield Sn(()=>fetch(V,Je));if(We.ok){const et=yield We.json();return{fid:et.fid||S,registrationStatus:2,refreshToken:et.refreshToken,authToken:Pt(et.authToken)}}throw yield rn("Create Installation",We)})).apply(this,arguments)}function Jn(C){return new Promise(T=>{setTimeout(T,C)})}const Ui=/^[cdef][\w-]{21}$/;function Nn(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const S=function Mn(C){return function zn(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Ui.test(S)?S:""}catch{return""}}function zt(C){return`${C.appName}!${C.appId}`}const dt=new Map;function It(C,T){const S=zt(C);_r(S,T),function rr(C,T){const S=function Zn(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=C=>{_r(C.data.key,C.data.fid)}),St}();S&&S.postMessage({key:C,fid:T}),function Zt(){0===dt.size&&St&&(St.close(),St=null)}()}(S,T)}function _r(C,T){const S=dt.get(C);if(S)for(const V of S)V(T)}let St=null;const jn="firebase-installations-store";let En=null;function Xn(){return En||(En=function ce(C,T,{blocked:S,upgrade:V,blocking:W,terminated:X}={}){const me=indexedDB.open(C,T),Je=qe(me);return V&&me.addEventListener("upgradeneeded",We=>{V(qe(me.result),We.oldVersion,We.newVersion,qe(me.transaction))}),S&&me.addEventListener("blocked",()=>S()),Je.then(We=>{X&&We.addEventListener("close",()=>X()),W&&We.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}("firebase-installations-database",1,{upgrade:(C,T)=>{0===T&&C.createObjectStore(jn)}})),En}function On(C,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,R.Z)(function*(C,T){const S=zt(C),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(S);return yield X.put(T,S),yield W.done,(!me||me.fid!==T.fid)&&It(C,T.fid),T})).apply(this,arguments)}function er(C){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,R.Z)(function*(C){const T=zt(C),V=(yield Xn()).transaction(jn,"readwrite");yield V.objectStore(jn).delete(T),yield V.done})).apply(this,arguments)}function yr(C,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,R.Z)(function*(C,T){const S=zt(C),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(S),Je=T(me);return void 0===Je?yield X.delete(S):yield X.put(Je,S),yield W.done,Je&&(!me||me.fid!==Je.fid)&&It(C,Je.fid),Je})).apply(this,arguments)}function G(C){return H.apply(this,arguments)}function H(){return(H=(0,R.Z)(function*(C){let T;const S=yield yr(C.appConfig,V=>{const W=F(V),X=N(C,W);return T=X.registrationPromise,X.installationEntry});return""===S.fid?{installationEntry:yield T}:{installationEntry:S,registrationPromise:T}})).apply(this,arguments)}function F(C){return Ee(C||{fid:Nn(),registrationStatus:0})}function N(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ut.create("app-offline"))};const S={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function k(C,T){return Y.apply(this,arguments)}(C,S);return{installationEntry:S,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:be(C)}:{installationEntry:T}}function Y(){return(Y=(0,R.Z)(function*(C,T){try{const S=yield lt(C,T);return On(C.appConfig,S)}catch(S){throw Dt(S)&&409===S.customData.serverCode?yield er(C.appConfig):yield On(C.appConfig,{fid:T.fid,registrationStatus:0}),S}})).apply(this,arguments)}function be(C){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,R.Z)(function*(C){let T=yield mt(C.appConfig);for(;1===T.registrationStatus;)yield Jn(100),T=yield mt(C.appConfig);if(0===T.registrationStatus){const{installationEntry:S,registrationPromise:V}=yield G(C);return V||S}return T})).apply(this,arguments)}function mt(C){return yr(C,T=>{if(!T)throw ut.create("installation-not-found");return Ee(T)})}function Ee(C){return function tt(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function at(C,T){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,R.Z)(function*({appConfig:C,heartbeatServiceProvider:T},S){const V=Lt(C,S),W=Qn(C,S),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Je={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:ss,appId:C.appId}})},We=yield Sn(()=>fetch(V,Je));if(We.ok)return Pt(yield We.json());throw yield rn("Generate Auth Token",We)})).apply(this,arguments)}function Lt(C,{fid:T}){return`${en(C)}/${T}/authTokens:generate`}function on(C){return $r.apply(this,arguments)}function $r(){return($r=(0,R.Z)(function*(C,T=!1){let S;const V=yield yr(C.appConfig,X=>{if(!$t(X))throw ut.create("not-registered");const me=X.authToken;if(!T&&gn(me))return X;if(1===me.requestStatus)return S=ue(C,T),X;{if(!navigator.onLine)throw ut.create("app-offline");const Je=Jt(X);return S=Ve(C,Je),Je}});return S?yield S:V.authToken})).apply(this,arguments)}function ue(C,T){return re.apply(this,arguments)}function re(){return(re=(0,R.Z)(function*(C,T){let S=yield Le(C.appConfig);for(;1===S.authToken.requestStatus;)yield Jn(100),S=yield Le(C.appConfig);const V=S.authToken;return 0===V.requestStatus?on(C,T):V})).apply(this,arguments)}function Le(C){return yr(C,T=>{if(!$t(T))throw ut.create("not-registered");return function Hr(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ve(C,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,R.Z)(function*(C,T){try{const S=yield at(C,T),V=Object.assign(Object.assign({},T),{authToken:S});return yield On(C.appConfig,V),S}catch(S){if(!Dt(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield On(C.appConfig,V)}else yield er(C.appConfig);throw S}})).apply(this,arguments)}function $t(C){return void 0!==C&&2===C.registrationStatus}function gn(C){return 2===C.requestStatus&&!function $n(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function Jt(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function si(){return(si=(0,R.Z)(function*(C){const T=C,{installationEntry:S,registrationPromise:V}=yield G(T);return V?V.catch(console.error):on(T).catch(console.error),S.fid})).apply(this,arguments)}function Da(){return(Da=(0,R.Z)(function*(C,T=!1){const S=C;return yield an(S),(yield on(S,T)).token})).apply(this,arguments)}function an(C){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,R.Z)(function*(C){const{registrationPromise:T}=yield G(C);T&&(yield T)})).apply(this,arguments)}function Tr(C){return ut.create("missing-app-config-values",{valueName:C})}const Gr="installations",bs=C=>{const T=C.getProvider("app").getImmediate(),S=function _d(C){if(!C||!C.options)throw Tr("App Configuration");if(!C.name)throw Tr("App Name");const T=["projectId","apiKey","appId"];for(const S of T)if(!C.options[S])throw Tr(S);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:S,heartbeatServiceProvider:(0,ie._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Sa=C=>{const T=C.getProvider("app").getImmediate(),S=(0,ie._getProvider)(T,Gr).getImmediate();return{getId:()=>function Bi(C){return si.apply(this,arguments)}(S),getToken:W=>function Ta(C){return Da.apply(this,arguments)}(S,W)}};(function bi(){(0,ie._registerComponent)(new _e.wA(Gr,bs,"PUBLIC")),(0,ie._registerComponent)(new _e.wA("installations-internal",Sa,"PRIVATE"))})(),(0,ie.registerVersion)(is,"0.6.4"),(0,ie.registerVersion)(is,"0.6.4","esm2017");const Ma="@firebase/remote-config",Pn=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Gl{constructor(T,S,V,W){this.client=T,this.storage=S,this.storageCache=V,this.logger=W}isCachedDataFresh(T,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-S,W=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var S=this;return(0,R.Z)(function*(){const[V,W]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(W&&S.isCachedDataFresh(T.cacheMaxAgeMillis,V))return W;T.eTag=W&&W.eTag;const X=yield S.client.fetch(T),me=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&me.push(S.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(me),X})()}}function xu(C=navigator){return C.languages&&C.languages[0]||C.language}class ql{constructor(T,S,V,W,X,me){this.firebaseInstallations=T,this.sdkVersion=S,this.namespace=V,this.projectId=W,this.apiKey=X,this.appId=me}fetch(T){var S=this;return(0,R.Z)(function*(){const[V,W]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},We={sdk_version:S.sdkVersion,app_instance_id:V,app_instance_id_token:W,app_id:S.appId,language_code:xu()},et={method:"POST",headers:Je,body:JSON.stringify(We)},Vt=fetch(me,et),Nt=new Promise((ei,Rr)=>{T.signal.addEventListener(()=>{const la=new Error("The operation was aborted.");la.name="AbortError",Rr(la)})});let Nr;try{yield Promise.race([Vt,Nt]),Nr=yield Vt}catch(ei){let Rr="fetch-client-network";throw"AbortError"===ei?.name&&(Rr="fetch-timeout"),Pn.create(Rr,{originalErrorMessage:ei?.message})}let hn=Nr.status;const ds=Nr.headers.get("ETag")||void 0;let ua,hs;if(200===Nr.status){let ei;try{ei=yield Nr.json()}catch(Rr){throw Pn.create("fetch-client-parse",{originalErrorMessage:Rr?.message})}ua=ei.entries,hs=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===hs?hn=500:"NO_CHANGE"===hs?hn=304:("NO_TEMPLATE"===hs||"EMPTY_CONFIG"===hs)&&(ua={}),304!==hn&&200!==hn)throw Pn.create("fetch-status",{httpStatus:hn});return{status:hn,eTag:ds,config:ua}})()}}class zl{constructor(T,S){this.client=T,this.storage=S}fetch(T){var S=this;return(0,R.Z)(function*(){const V=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:S,backoffCount:V}){var W=this;return(0,R.Z)(function*(){yield function ka(C,T){return new Promise((S,V)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(S,W);C.addEventListener(()=>{clearTimeout(X),V(Pn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,S);try{const X=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function Id(C){if(!(C instanceof de.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const me={throttleEndTimeMillis:Date.now()+(0,de.$s)(V),backoffCount:V+1};return yield W.storage.setThrottleMetadata(me),W.attemptFetch(T,me)}})()}}class Zl{constructor(T,S,V,W,X){this.app=T,this._client=S,this._storageCache=V,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wn(C,T){const S=C.target.error||void 0;return Pn.create(T,{originalErrorMessage:S&&S?.message})}const Es="app_namespace_store";class nf{constructor(T,S,V,W=function L_(){return new Promise((C,T)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=V=>{T(Wn(V,"storage-open"))},S.onsuccess=V=>{C(V.target.result)},S.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Es,{keyPath:"compositeKey"})}}catch(S){T(Pn.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=T,this.appName=S,this.namespace=V,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var S=this;return(0,R.Z)(function*(){const V=yield S.openDbPromise;return new Promise((W,X)=>{const Je=V.transaction([Es],"readonly").objectStore(Es),We=S.createCompositeKey(T);try{const et=Je.get(We);et.onerror=Vt=>{X(Wn(Vt,"storage-get"))},et.onsuccess=Vt=>{const Nt=Vt.target.result;W(Nt?Nt.value:void 0)}}catch(et){X(Pn.create("storage-get",{originalErrorMessage:et?.message}))}})})()}set(T,S){var V=this;return(0,R.Z)(function*(){const W=yield V.openDbPromise;return new Promise((X,me)=>{const We=W.transaction([Es],"readwrite").objectStore(Es),et=V.createCompositeKey(T);try{const Vt=We.put({compositeKey:et,value:S});Vt.onerror=Nt=>{me(Wn(Nt,"storage-set"))},Vt.onsuccess=()=>{X()}}catch(Vt){me(Pn.create("storage-set",{originalErrorMessage:Vt?.message}))}})})()}delete(T){var S=this;return(0,R.Z)(function*(){const V=yield S.openDbPromise;return new Promise((W,X)=>{const Je=V.transaction([Es],"readwrite").objectStore(Es),We=S.createCompositeKey(T);try{const et=Je.delete(We);et.onerror=Vt=>{X(Wn(Vt,"storage-delete"))},et.onsuccess=()=>{W()}}catch(et){X(Pn.create("storage-delete",{originalErrorMessage:et?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Dn{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,R.Z)(function*(){const S=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),X=yield S;X&&(T.lastFetchStatus=X);const me=yield V;me&&(T.lastSuccessfulFetchTimestampMillis=me);const Je=yield W;Je&&(T.activeConfig=Je)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function oi(){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,R.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}let $i,Pr;!function $o(){(0,ie._registerComponent)(new _e.wA("remote-config",function C(T,{instanceIdentifier:S}){const V=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!(0,de.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:X,apiKey:me,appId:Je}=V.options;if(!X)throw Pn.create("registration-project-id");if(!me)throw Pn.create("registration-api-key");if(!Je)throw Pn.create("registration-app-id");const We=new nf(Je,V.name,S=S||"firebase"),et=new Dn(We),Vt=new pe.Yd(Ma);Vt.logLevel=pe.in.ERROR;const Nt=new ql(W,ie.SDK_VERSION,S,X,me,Je),Nr=new zl(Nt,We),hn=new Gl(Nr,We,et,Vt),ds=new Zl(V,hn,et,We,Vt);return function Ed(C){const T=(0,de.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ds),ds},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Ma,"0.4.4"),(0,ie.registerVersion)(Ma,"0.4.4","esm2017")}();const Oa=new WeakMap,Ei=new WeakMap,Dr=new WeakMap,Ho=new WeakMap,kt=new WeakMap;let Jl={get(C,T,S){if(C instanceof IDBTransaction){if("done"===T)return Ei.get(C);if("objectStoreNames"===T)return C.objectStoreNames||Dr.get(C);if("store"===T)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return Hi(C[T])},set:(C,T,S)=>(C[T]=S,!0),has:(C,T)=>C instanceof IDBTransaction&&("done"===T||"store"===T)||T in C};function ku(C){return"function"==typeof C?function rf(C){return C!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Mu(){return Pr||(Pr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(C)?function(...T){return C.apply(Ou(this),T),Hi(Oa.get(this))}:function(...T){return Hi(C.apply(Ou(this),T))}:function(T,...S){const V=C.call(Ou(this),T,...S);return Dr.set(V,T.sort?T.sort():[T]),Hi(V)}}(C):(C instanceof IDBTransaction&&function Ql(C){if(Ei.has(C))return;const T=new Promise((S,V)=>{const W=()=>{C.removeEventListener("complete",X),C.removeEventListener("error",me),C.removeEventListener("abort",me)},X=()=>{S(),W()},me=()=>{V(C.error||new DOMException("AbortError","AbortError")),W()};C.addEventListener("complete",X),C.addEventListener("error",me),C.addEventListener("abort",me)});Ei.set(C,T)}(C),((C,T)=>T.some(S=>C instanceof S))(C,function Yl(){return $i||($i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(C,Jl):C)}function Hi(C){if(C instanceof IDBRequest)return function Pu(C){const T=new Promise((S,V)=>{const W=()=>{C.removeEventListener("success",X),C.removeEventListener("error",me)},X=()=>{S(Hi(C.result)),W()},me=()=>{V(C.error),W()};C.addEventListener("success",X),C.addEventListener("error",me)});return T.then(S=>{S instanceof IDBCursor&&Oa.set(S,C)}).catch(()=>{}),kt.set(T,C),T}(C);if(Ho.has(C))return Ho.get(C);const T=ku(C);return T!==C&&(Ho.set(C,T),kt.set(T,C)),T}const Ou=C=>kt.get(C);function Pe(C,T,{blocked:S,upgrade:V,blocking:W,terminated:X}={}){const me=indexedDB.open(C,T),Je=Hi(me);return V&&me.addEventListener("upgradeneeded",We=>{V(Hi(me.result),We.oldVersion,We.newVersion,Hi(me.transaction))}),S&&me.addEventListener("blocked",()=>S()),Je.then(We=>{X&&We.addEventListener("close",()=>X()),W&&We.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}function Xt(C,{blocked:T}={}){const S=indexedDB.deleteDatabase(C);return T&&S.addEventListener("blocked",()=>T()),Hi(S).then(()=>{})}const Xl=["get","getKey","getAll","getAllKeys","count"],Nu=["put","add","delete","clear"],Kn=new Map;function Na(C,T){if(!(C instanceof IDBDatabase)||T in C||"string"!=typeof T)return;if(Kn.get(T))return Kn.get(T);const S=T.replace(/FromIndex$/,""),V=T!==S,W=Nu.includes(S);if(!(S in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!Xl.includes(S))return;const X=function(){var me=(0,R.Z)(function*(Je,...We){const et=this.transaction(Je,W?"readwrite":"readonly");let Vt=et.store;return V&&(Vt=Vt.index(We.shift())),(yield Promise.all([Vt[S](...We),W&&et.done]))[0]});return function(We){return me.apply(this,arguments)}}();return Kn.set(T,X),X}!function Ad(C){Jl=C(Jl)}(C=>({...C,get:(T,S,V)=>Na(T,S)||C.get(T,S,V),has:(T,S)=>!!Na(T,S)||C.has(T,S)}));const Hs="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",Ra="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xd="google.c.a.c_id",Rn="google.c.a.c_l",V_="google.c.a.ts",ec="google.c.a.e";var qr=(()=>{return(C=qr||(qr={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",qr;var C})();function ui(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mo(C){const S=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(S),W=new Uint8Array(V.length);for(let X=0;X<V.length;++X)W[X]=V.charCodeAt(X);return W}const li="fcm_token_details_db",Sd="fcm_token_object_Store";function Md(C){return Fu.apply(this,arguments)}function Fu(){return Fu=(0,R.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(li))return null;let T=null;return(yield Pe(li,5,{upgrade:(V=(0,R.Z)(function*(W,X,me,Je){var We;if(X<2||!W.objectStoreNames.contains(Sd))return;const et=Je.objectStore(Sd),Vt=yield et.index("fcmSenderId").get(C);if(yield et.clear(),Vt)if(2===X){const Nt=Vt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;T={token:Nt.fcmToken,createTime:null!==(We=Nt.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:ui(Nt.vapidKey)}}}else if(3===X){const Nt=Vt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ui(Nt.auth),p256dh:ui(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ui(Nt.vapidKey)}}}else if(4===X){const Nt=Vt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ui(Nt.auth),p256dh:ui(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ui(Nt.vapidKey)}}}}),function(X,me,Je,We){return V.apply(this,arguments)})})).close(),yield Xt(li),yield Xt("fcm_vapid_details_db"),yield Xt("undefined"),La(T)?T:null;var V}),Fu.apply(this,arguments)}function La(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Xr="firebase-messaging-store";let Lu=null;function nc(){return Lu||(Lu=Pe("firebase-messaging-database",1,{upgrade:(C,T)=>{0===T&&C.createObjectStore(Xr)}})),Lu}function _o(C){return Va.apply(this,arguments)}function Va(){return(Va=(0,R.Z)(function*(C){const T=kd(C),V=yield(yield nc()).transaction(Xr).objectStore(Xr).get(T);if(V)return V;{const W=yield Md(C.appConfig.senderId);if(W)return yield Ua(C,W),W}})).apply(this,arguments)}function Ua(C,T){return rc.apply(this,arguments)}function rc(){return(rc=(0,R.Z)(function*(C,T){const S=kd(C),W=(yield nc()).transaction(Xr,"readwrite");return yield W.objectStore(Xr).put(T,S),yield W.done,T})).apply(this,arguments)}function Pd(C){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,R.Z)(function*(C){const T=kd(C),V=(yield nc()).transaction(Xr,"readwrite");yield V.objectStore(Xr).delete(T),yield V.done})).apply(this,arguments)}function kd({appConfig:C}){return C.appId}const dn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yo(C,T){return xn.apply(this,arguments)}function xn(){return(xn=(0,R.Z)(function*(C,T){const S=yield Ba(C),V=vo(T),W={method:"POST",headers:S,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(Od(C.appConfig),W)).json()}catch(me){throw dn.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(X.error)throw dn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function cg(C,T){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,R.Z)(function*(C,T){const S=yield Ba(C),V=vo(T.subscriptionOptions),W={method:"PATCH",headers:S,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(`${Od(C.appConfig)}/${T.token}`,W)).json()}catch(me){throw dn.create("token-update-failed",{errorInfo:me?.toString()})}if(X.error)throw dn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-update-no-token");return X.token})).apply(this,arguments)}function sf(C,T){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,R.Z)(function*(C,T){const V={method:"DELETE",headers:yield Ba(C)};try{const X=yield(yield fetch(`${Od(C.appConfig)}/${T}`,V)).json();if(X.error)throw dn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw dn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Od({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function Ba(C){return ja.apply(this,arguments)}function ja(){return(ja=(0,R.Z)(function*({appConfig:C,installations:T}){const S=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function vo({p256dh:C,auth:T,endpoint:S,vapidKey:V}){const W={web:{endpoint:S,auth:T,p256dh:C}};return V!==Ra&&(W.web.applicationPubKey=V),W}const Bu=6048e5;function ju(C){return ic.apply(this,arguments)}function ic(){return(ic=(0,R.Z)(function*(C){const T=yield Rd(C.swRegistration,C.vapidKey),S={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:ui(T.getKey("auth")),p256dh:ui(T.getKey("p256dh"))},V=yield _o(C.firebaseDependencies);if(V){if(uf(V.subscriptionOptions,S))return Date.now()>=V.createTime+Bu?qo(C,{token:V.token,createTime:Date.now(),subscriptionOptions:S}):V.token;try{yield sf(C.firebaseDependencies,V.token)}catch(W){console.warn(W)}return zo(C.firebaseDependencies,S)}return zo(C.firebaseDependencies,S)})).apply(this,arguments)}function af(C){return us.apply(this,arguments)}function us(){return(us=(0,R.Z)(function*(C){const T=yield _o(C.firebaseDependencies);T&&(yield sf(C.firebaseDependencies,T.token),yield Pd(C.firebaseDependencies));const S=yield C.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function qo(C,T){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,R.Z)(function*(C,T){try{const S=yield cg(C.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:S,createTime:Date.now()});return yield Ua(C.firebaseDependencies,V),S}catch(S){throw yield af(C),S}})).apply(this,arguments)}function zo(C,T){return wo.apply(this,arguments)}function wo(){return(wo=(0,R.Z)(function*(C,T){const V={token:yield yo(C,T),createTime:Date.now(),subscriptionOptions:T};return yield Ua(C,V),V.token})).apply(this,arguments)}function Rd(C,T){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,R.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mo(T)})})).apply(this,arguments)}function uf(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function sc(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function $u(C,T){if(!T.notification)return;C.notification={};const S=T.notification.title;S&&(C.notification.title=S);const V=T.notification.body;V&&(C.notification.body=V);const W=T.notification.image;W&&(C.notification.image=W);const X=T.notification.icon;X&&(C.notification.icon=X)}(T,C),function oc(C,T){!T.data||(C.data=T.data)}(T,C),function Hu(C,T){var S,V,W,X,me;if(!(T.fcmOptions||null!==(S=T.notification)&&void 0!==S&&S.click_action))return;C.fcmOptions={};const Je=null!==(W=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==W?W:null===(X=T.notification)||void 0===X?void 0:X.click_action;Je&&(C.fcmOptions.link=Je);const We=null===(me=T.fcmOptions)||void 0===me?void 0:me.analytics_label;We&&(C.fcmOptions.analyticsLabel=We)}(T,C),T}function Ld(C){return"object"==typeof C&&!!C&&xd in C}function Zo(C,T){const S=[];for(let V=0;V<C.length;V++)S.push(C.charAt(V)),V<T.length&&S.push(T.charAt(V));return S.join("")}function ac(C){return dn.create("missing-app-config-values",{valueName:C})}Zo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $a{constructor(T,S,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function lf(C){if(!C||!C.options)throw ac("App Configuration Object");if(!C.name)throw ac("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:S}=C;for(const V of T)if(!S[V])throw ac(V);return{appName:C.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:S,analyticsProvider:V}}_delete(){return Promise.resolve()}}function cf(C){return ls.apply(this,arguments)}function ls(){return(ls=(0,R.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Hs,{scope:Ii}),C.swRegistration.update().catch(()=>{})}catch(T){throw dn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function qs(C,T){return ci.apply(this,arguments)}function ci(){return(ci=(0,R.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield cf(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function uc(C,T){return zs.apply(this,arguments)}function zs(){return(zs=(0,R.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=Ra)})).apply(this,arguments)}function Ha(){return(Ha=(0,R.Z)(function*(C,T){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield uc(C,T?.vapidKey),yield qs(C,T?.serviceWorkerRegistration),ju(C)})).apply(this,arguments)}function Gi(C,T,S){return qu.apply(this,arguments)}function qu(){return(qu=(0,R.Z)(function*(C,T,S){const V=Wo(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:S[xd],message_name:S[Rn],message_time:S[V_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Wo(C){switch(C){case qr.NOTIFICATION_CLICKED:return"notification_open";case qr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Co(){return(Co=(0,R.Z)(function*(C,T){const S=T.data;if(!S.isFirebaseMessaging)return;C.onMessageHandler&&S.messageType===qr.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(sc(S)):C.onMessageHandler.next(sc(S)));const V=S.data;Ld(V)&&"1"===V[ec]&&(yield Gi(C,S.messageType,V))})).apply(this,arguments)}const qa="@firebase/messaging",za=C=>{const T=new $a(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function Ga(C,T){return Co.apply(this,arguments)}(T,S)),T},lc=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:V=>function Gu(C,T){return Ha.apply(this,arguments)}(T,V)}};function Ko(){return Za.apply(this,arguments)}function Za(){return(Za=(0,R.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function df(){(0,ie._registerComponent)(new _e.wA("messaging",za,"PUBLIC")),(0,ie._registerComponent)(new _e.wA("messaging-internal",lc,"PRIVATE")),(0,ie.registerVersion)(qa,"0.12.4"),(0,ie.registerVersion)(qa,"0.12.4","esm2017")}();const Wa="analytics",Ka="firebase_id",Ud="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Is="https://www.googletagmanager.com/gtag/js",Fn=new pe.Yd("@firebase/analytics"),sr=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function zu(C){if(!C.startsWith(Is)){const T=sr.create("invalid-gtag-resource",{gtagURL:C});return Fn.warn(T.message),""}return C}function Ti(C){return Promise.all(C.map(T=>T.catch(S=>S)))}function Bd(C,T){const S=function hc(C,T){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(C,T)),S}("firebase-js-sdk-policy",{createScriptURL:zu}),V=document.createElement("script"),W=`${Is}?l=${C}&id=${T}`;V.src=S?S?.createScriptURL(W):W,V.async=!0,document.head.appendChild(V)}function jd(C,T,S,V,W,X){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,R.Z)(function*(C,T,S,V,W,X){const me=V[W];try{if(me)yield T[me];else{const We=(yield Ti(S)).find(et=>et.measurementId===W);We&&(yield T[We.appId])}}catch(Je){Fn.error(Je)}C("config",W,X)})).apply(this,arguments)}function U_(C,T,S,V,W){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,R.Z)(function*(C,T,S,V,W){try{let X=[];if(W&&W.send_to){let me=W.send_to;Array.isArray(me)||(me=[me]);const Je=yield Ti(S);for(const We of me){const et=Je.find(Nt=>Nt.measurementId===We),Vt=et&&T[et.appId];if(!Vt){X=[];break}X.push(Vt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),C("event",V,W||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function ff(C){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Is)&&S.src.includes(C))return S;return null}const or=new class B_{constructor(T={},S=1e3){this.throttleMetadata=T,this.intervalMillis=S}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,S){this.throttleMetadata[T]=S}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ku(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function Di(C){return $d.apply(this,arguments)}function $d(){return($d=(0,R.Z)(function*(C){var T;const{appId:S,apiKey:V}=C,W={method:"GET",headers:Ku(V)},X=Ud.replace("{app-id}",S),me=yield fetch(X,W);if(200!==me.status&&304!==me.status){let Je="";try{const We=yield me.json();null!==(T=We.error)&&void 0!==T&&T.message&&(Je=We.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Je})}return me.json()})).apply(this,arguments)}function Yu(C){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,R.Z)(function*(C,T=or,S){const{appId:V,apiKey:W,measurementId:X}=C.options;if(!V)throw sr.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:V};throw sr.create("no-api-key")}const me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new Hd;return setTimeout((0,R.Z)(function*(){Je.abort()}),void 0!==S?S:6e4),qi({appId:V,apiKey:W,measurementId:X},me,Je,T)})).apply(this,arguments)}function qi(C,T,S){return fc.apply(this,arguments)}function fc(){return(fc=(0,R.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:S},V,W=or){var X;const{appId:me,measurementId:Je}=C;try{yield Qa(V,T)}catch(We){if(Je)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:me,measurementId:Je};throw We}try{const We=yield Di(C);return W.deleteThrottleMetadata(me),We}catch(We){const et=We;if(!Qu(et)){if(W.deleteThrottleMetadata(me),Je)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${et?.message}]`),{appId:me,measurementId:Je};throw We}const Vt=503===Number(null===(X=et?.customData)||void 0===X?void 0:X.httpStatus)?(0,de.$s)(S,W.intervalMillis,30):(0,de.$s)(S,W.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Vt,backoffCount:S+1};return W.setThrottleMetadata(me,Nt),Fn.debug(`Calling attemptFetch again in ${Vt} millis`),qi(C,Nt,V,W)}})).apply(this,arguments)}function Qa(C,T){return new Promise((S,V)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(S,W);C.addEventListener(()=>{clearTimeout(X),V(sr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Qu(C){if(!(C instanceof de.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Hd{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Gd,Xa;function gf(){return(gf=(0,R.Z)(function*(C,T,S,V,W){if(W&&W.global)C("event",S,V);else{const X=yield T;C("event",S,Object.assign(Object.assign({},V),{send_to:X}))}})).apply(this,arguments)}function Xo(C){Xa=C}function mc(C){Gd=C}function mn(){return xr.apply(this,arguments)}function xr(){return(xr=(0,R.Z)(function*(){if(!(0,de.hl)())return Fn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(C){return Fn.warn(sr.create("indexeddb-unavailable",{errorInfo:C?.toString()}).message),!1}return!0})).apply(this,arguments)}function hi(){return(hi=(0,R.Z)(function*(C,T,S,V,W,X,me){var Je;const We=Yu(C);We.then(hn=>{S[hn.measurementId]=hn.appId,C.options.measurementId&&hn.measurementId!==C.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hn=>Fn.error(hn)),T.push(We);const et=mn().then(hn=>{if(hn)return V.getId()}),[Vt,Nt]=yield Promise.all([We,et]);ff(X)||Bd(X,Vt.measurementId),Xa&&(W("consent","default",Xa),Xo(void 0)),W("js",new Date);const Nr=null!==(Je=me?.config)&&void 0!==Je?Je:{};return Nr.origin="firebase",Nr.update=!0,null!=Nt&&(Nr[Ka]=Nt),W("config",Vt.measurementId,Nr),Gd&&(W("set",Gd),mc(void 0)),Vt.measurementId})).apply(this,arguments)}class eu{constructor(T){this.app=T}_delete(){return delete fi[this.app.options.appId],Promise.resolve()}}let fi={},_c=[];const Zd={};let Gn,ht,Ts="dataLayer",tu=!1;function yc(C,T,S){!function nu(){const C=[];if((0,de.ru)()&&C.push("This is a browser extension environment."),(0,de.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((V,W)=>`(${W+1}) ${V}`).join(" "),S=sr.create("invalid-analytics-context",{errorInfo:T});Fn.warn(S.message)}}();const V=C.options.appId;if(!V)throw sr.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw sr.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fi[V])throw sr.create("already-exists",{id:V});if(!tu){!function yn(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(Ts);const{wrappedGtag:X,gtagCore:me}=function fg(C,T,S,V,W){let X=function(...me){window[V].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function hg(C,T,S,V){function X(){return(X=(0,R.Z)(function*(me,...Je){try{if("event"===me){const[We,et]=Je;yield U_(C,T,S,We,et)}else if("config"===me){const[We,et]=Je;yield jd(C,T,S,V,We,et)}else if("consent"===me){const[We]=Je;C("consent","update",We)}else if("get"===me){const[We,et,Vt]=Je;C("get",We,et,Vt)}else if("set"===me){const[We]=Je;C("set",We)}else C(me,...Je)}catch(We){Fn.error(We)}})).apply(this,arguments)}return function W(me){return X.apply(this,arguments)}}(X,C,T,S),{gtagCore:X,wrappedGtag:window[W]}}(fi,_c,Zd,Ts,"gtag");ht=X,Gn=me,tu=!0}return fi[V]=function mg(C,T,S,V,W,X,me){return hi.apply(this,arguments)}(C,_c,Zd,T,Gn,Ts,S),new eu(C)}function Eo(){return kr.apply(this,arguments)}function kr(){return(kr=(0,R.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const vr="@firebase/analytics";!function Cc(){(0,ie._registerComponent)(new _e.wA(Wa,(T,{options:S})=>yc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,ie._registerComponent)(new _e.wA("analytics-internal",function C(T){try{const S=T.getProvider(Wa).getImmediate();return{logEvent:(V,W,X)=>function pi(C,T,S,V){C=(0,de.m9)(C),function pg(C,T,S,V,W){return gf.apply(this,arguments)}(ht,fi[C.app.options.appId],T,S,V).catch(W=>Fn.error(W))}(S,V,W,X)}}catch(S){throw sr.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,ie.registerVersion)(vr,"0.10.0"),(0,ie.registerVersion)(vr,"0.10.0","esm2017")}();var Or=U(4408),el=U(7565);const bc=new class _f extends el.v{}(class ta extends Or.o{constructor(T,S){super(T,S),this.scheduler=T,this.work=S}schedule(T,S=0){return S>0?super.schedule(T,S):(this.delay=S,this.state=T,this.scheduler.flush(this),this)}execute(T,S){return S>0||this.closed?super.execute(T,S):this._execute(T,S)}requestAsyncId(T,S,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,S,V):(T.flush(this),0)}});var yf=U(4986),iu=U(9751),tl=U(8505),Qs=U(5363),Io=U(9468);const su=new o.GfV("7.6.1"),nl="__angularfire_symbol__analyticsIsSupportedValue",na="__angularfire_symbol__analyticsIsSupported",Ic="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",Tc="__angularfire_symbol__messagingIsSupportedValue",ia="__angularfire_symbol__messagingIsSupported";function oa(C,T,S){if(T){if(1===T.length)return T[0];const X=T.filter(me=>me.app===S);if(1===X.length)return X[0]}return S.container.getProvider(C).getImmediate({optional:!0})}globalThis[na]||(globalThis[na]=Eo().then(C=>globalThis[nl]=C).catch(()=>globalThis[nl]=!1)),globalThis[ia]||(globalThis[ia]=Ko().then(C=>globalThis[Tc]=C).catch(()=>globalThis[Tc]=!1)),globalThis[ra]||(globalThis[ra]=oi().then(C=>globalThis[Ic]=C).catch(()=>globalThis[Ic]=!1));const Kd=(C,T)=>{const S=T?[T]:(0,$.C6)(),V=[];return S.forEach(W=>{W.container.getProvider(C).instances.forEach(me=>{V.includes(me)||V.push(me)})}),V};function Js(){}class Dc{constructor(T,S=bc){this.zone=T,this.delegate=S}now(){return this.delegate.now()}schedule(T,S,V){const W=this.zone;return this.delegate.schedule(function(me){W.runGuarded(()=>{T.apply(this,[me])})},S,V)}}class vf{constructor(T){this.zone=T,this.task=null}call(T,S){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Js,{},Js,Js)),S.pipe((0,tl.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let il=(()=>{class C{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new Dc(Zone.current)),this.insideAngular=S.run(()=>new Dc(Zone.current,yf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(S){return new(S||C)(o.LFG(o.R0b))},C.\u0275prov=o.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Yn(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function Ss(C){return Yn().ngZone.runOutsideAngular(()=>C())}function cs(C){return Yn().ngZone.run(()=>C())}function wf(C){return C.pipe((0,Qs.Q)(Yn().outsideAngular))}function Ai(C){return Yn(),function wr(C){return function(S){return(S=S.lift(new vf(C.ngZone))).pipe((0,Io.R)(C.outsideAngular),(0,Qs.Q)(C.insideAngular))}}(Yn())(C)}const Ac=(C,T)=>function(){const V=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),cs(()=>C.apply(void 0,V))},aa=(C,T)=>function(){let S;const V=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof V[X]&&(T&&(S||(S=cs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Js,{},Js,Js)))),V[X]=Ac(V[X],S));const W=Ss(()=>C.apply(this,V));if(!T){if(W instanceof iu.y){const X=Yn();return W.pipe((0,Io.R)(X.outsideAngular),(0,Qs.Q)(X.insideAngular))}return cs(()=>W)}return W instanceof iu.y?W.pipe(Ai):W instanceof Promise?cs(()=>new Promise((X,me)=>W.then(Je=>cs(()=>X(Je)),Je=>cs(()=>me(Je))))):"function"==typeof W&&S?function(){return setTimeout(()=>{S&&"scheduled"===S.state&&S.invoke()},10),W.apply(this,arguments)}:cs(()=>W)}},1389:(bt,Ne,U)=>{U.d(Ne,{$:()=>Hs,A:()=>q,D:()=>Oe,I:()=>_n,J:()=>bs,L:()=>as,N:()=>yr,P:()=>mg,Q:()=>nf,R:()=>di,U:()=>go,V:()=>oi,W:()=>Dd,X:()=>Wl,Y:()=>Yl,Z:()=>Mu,_:()=>kt,a:()=>Ws,a0:()=>Ra,a1:()=>xd,a2:()=>ai,a3:()=>Sd,a4:()=>Fu,a5:()=>tc,a6:()=>Xr,a7:()=>nc,a8:()=>Va,a9:()=>rc,aA:()=>ce,aB:()=>na,aC:()=>er,aD:()=>jr,aE:()=>tl,aF:()=>Wd,aG:()=>zi,aH:()=>Hn,aL:()=>Ks,aO:()=>$i,aa:()=>Pd,ab:()=>kd,ac:()=>lg,ad:()=>cg,ae:()=>sf,af:()=>Od,ai:()=>Bu,aj:()=>ic,ak:()=>af,an:()=>rf,ao:()=>$u,aq:()=>zs,ar:()=>qa,as:()=>xt,at:()=>Ee,au:()=>be,av:()=>xe,aw:()=>Nt,ax:()=>ia,ay:()=>tt,az:()=>Ie,b:()=>Vd,c:()=>ht,d:()=>yc,e:()=>ar,f:()=>vr,g:()=>_f,h:()=>Or,i:()=>pf,j:()=>yf,k:()=>hs,l:()=>qd,m:()=>la,p:()=>ve,r:()=>Ja,s:()=>mf,u:()=>mn});var o=U(5861),$=U(2090),R=U(6881),ie=U(7582),de=U(1877),_e=U(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},De=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new de.Yd("@firebase/auth");function pt(w,...p){ye.logLevel<=de.in.ERROR&&ye.error(`Auth (${R.SDK_VERSION}): ${w}`,...p)}function xe(w,...p){throw Ze(w,...p)}function Ie(w,...p){return Ze(w,...p)}function Se(w,p,_){const b=Object.assign(Object.assign({},De()),{[p]:_});return new $.LL("auth","Firebase",b).create(p,{appName:w.name})}function qe(w,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&xe(w,"argument-error"),Se(w,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ze(w,...p){if("string"!=typeof w){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(_,...b)}return it.create(w,...p)}function ce(w,p,..._){if(!w)throw Ze(p,..._)}function Qe(w){const p="INTERNAL ASSERTION FAILED: "+w;throw pt(p),new Error(p)}function xt(w,p){w||Qe(p)}function gt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function qt(){return"http:"===ct()||"https:"===ct()}function ct(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class ii{constructor(p,_){this.shortDelay=p,this.longDelay=_,xt(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function is(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(qt()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ss(w,p){xt(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class se{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ae=new ii(3e4,6e4);function fe(w,p){return w.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:w.tenantId}):p}function ke(w,p,_,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,o.Z)(function*(w,p,_,b,M={}){return ut(w,M,(0,o.Z)(function*(){let O={},Q={};b&&("GET"===p?Q=b:O={body:JSON.stringify(b)});const he=(0,$.xO)(Object.assign({key:w.config.apiKey},Q)).slice(1),Ge=yield w._getAdditionalHeaders();return Ge["Content-Type"]="application/json",w.languageCode&&(Ge["X-Firebase-Locale"]=w.languageCode),se.fetch()(rn(w,w.config.apiHost,_,he),Object.assign({method:p,headers:Ge,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ut(w,p,_){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,o.Z)(function*(w,p,_){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},te),p);try{const M=new kn(w),O=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw pn(w,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const he=O.ok?Q.errorMessage:Q.error.message,[Ge,nt]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ge)throw pn(w,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ge)throw pn(w,"email-already-in-use",Q);if("USER_DISABLED"===Ge)throw pn(w,"user-disabled",Q);const vt=b[Ge]||Ge.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw Se(w,vt,nt);xe(w,vt)}}catch(M){if(M instanceof $.ZR)throw M;xe(w,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function en(w,p,_,b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,o.Z)(function*(w,p,_,b,M={}){const O=yield ke(w,p,_,b,M);return"mfaPendingCredential"in O&&xe(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function rn(w,p,_,b){const M=`${p}${_}?${b}`;return w.config.emulator?ss(w.config,M):`${w.config.apiScheme}://${M}`}class kn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Ie(this.auth,"network-request-failed")),Ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pn(w,p,_){const b={appName:w.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const M=Ie(w,p,b);return M.customData._tokenResponse=_,M}function Sn(){return(Sn=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Bn(w,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wi(w,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function mr(w){if(w)try{const p=new Date(Number(w));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Ui(){return(Ui=(0,o.Z)(function*(w,p=!1){const _=(0,$.m9)(w),b=yield _.getIdToken(p),M=Nn(b);ce(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Q=O?.sign_in_provider;return{claims:M,token:b,authTime:mr(Yr(M.auth_time)),issuedAtTime:mr(Yr(M.iat)),expirationTime:mr(Yr(M.exp)),signInProvider:Q||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Yr(w){return 1e3*Number(w)}function Nn(w){const[p,_,b]=w.split(".");if(void 0===p||void 0===_||void 0===b)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(_);return M?JSON.parse(M):(pt("Failed to decode base64 JWT payload"),null)}catch(M){return pt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function zt(w,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,o.Z)(function*(w,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof $.ZR&&It(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function It({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class tn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,o.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Qr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _r(w){return rr.apply(this,arguments)}function rr(){return(rr=(0,o.Z)(function*(w){var p;const _=w.auth,b=yield w.getIdToken(),M=yield zt(w,wi(_,{idToken:b}));ce(M?.users.length,_,"internal-error");const O=M.users[0];w._notifyReloadListener(O);const Q=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?os(O.providerUserInfo):[],he=Zt(w.providerData,Q),vt=!!w.isAnonymous&&!(w.email&&O.passwordHash||he?.length),un={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new Qr(O.createdAt,O.lastLoginAt),isAnonymous:vt};Object.assign(w,un)})).apply(this,arguments)}function Zn(){return(Zn=(0,o.Z)(function*(w){const p=(0,$.m9)(w);yield _r(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Zt(w,p){return[...w.filter(b=>!p.some(M=>M.providerId===b.providerId)),...p]}function os(w){return w.map(p=>{var{providerId:_}=p,b=(0,ie._T)(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function jn(){return(jn=(0,o.Z)(function*(w,p){const _=yield ut(w,{},(0,o.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:O}=w.config,Q=rn(w,M,"/v1/token",`key=${O}`),he=yield w._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(Q,{method:"POST",headers:he,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class En{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ce(p.idToken,"internal-error"),ce(typeof p.idToken<"u","internal-error"),ce(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Mn(w){const p=Nn(w);return ce(p,"internal-error"),ce(typeof p.exp<"u","internal-error"),ce(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var b=this;return(0,o.Z)(function*(){return ce(!b.accessToken||b.refreshToken,p,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,o.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Q}=yield function sn(w,p){return jn.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(M,O,Number(Q))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:M,expirationTime:O}=_,Q=new En;return b&&(ce("string"==typeof b,"internal-error",{appName:p}),Q.refreshToken=b),M&&(ce("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),O&&(ce("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new En,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Xn(w,p){ce("string"==typeof w||typeof w>"u","internal-error",{appName:p})}class On{constructor(p){var{uid:_,auth:b,stsTokenManager:M}=p,O=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Qr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,o.Z)(function*(){const b=yield zt(_,_.stsTokenManager.getToken(_.auth,p));return ce(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function zn(w){return Ui.apply(this,arguments)}(this,p)}reload(){return function St(w){return Zn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ce(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new On(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var b=this;return(0,o.Z)(function*(){let M=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield _r(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,o.Z)(function*(){const _=yield p.getIdToken();return yield zt(p,function Qn(w,p){return Sn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,M,O,Q,he,Ge,nt,vt;const un=null!==(b=_.displayName)&&void 0!==b?b:void 0,Zi=null!==(M=_.email)&&void 0!==M?M:void 0,ca=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,ol=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Ef=null!==(he=_.tenantId)&&void 0!==he?he:void 0,al=null!==(Ge=_._redirectEventId)&&void 0!==Ge?Ge:void 0,eh=null!==(nt=_.createdAt)&&void 0!==nt?nt:void 0,If=null!==(vt=_.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Oc,emailVerified:Tf,isAnonymous:Cg,providerData:To,stsTokenManager:ou}=_;ce(Oc&&ou,p,"internal-error");const Do=En.fromJSON(this.name,ou);ce("string"==typeof Oc,p,"internal-error"),Xn(un,p.name),Xn(Zi,p.name),ce("boolean"==typeof Tf,p,"internal-error"),ce("boolean"==typeof Cg,p,"internal-error"),Xn(ca,p.name),Xn(ol,p.name),Xn(Ef,p.name),Xn(al,p.name),Xn(eh,p.name),Xn(If,p.name);const th=new On({uid:Oc,auth:p,email:Zi,emailVerified:Tf,displayName:un,isAnonymous:Cg,photoURL:ol,phoneNumber:ca,tenantId:Ef,stsTokenManager:Do,createdAt:eh,lastLoginAt:If});return To&&Array.isArray(To)&&(th.providerData=To.map(j_=>Object.assign({},j_))),al&&(th._redirectEventId=al),th}static _fromIdTokenResponse(p,_,b=!1){return(0,o.Z)(function*(){const M=new En;M.updateFromServerResponse(_);const O=new On({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:b});return yield _r(O),O})()}}const Jr=new Map;function er(w){xt(w instanceof Function,"Expected a class definition");let p=Jr.get(w);return p?(xt(p instanceof w,"Instance stored in cache mismatched with class"),p):(p=new w,Jr.set(w,p),p)}const yr=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,b){var M=this;return(0,o.Z)(function*(){M.storage[_]=b})()}_get(_){var b=this;return(0,o.Z)(function*(){const M=b.storage[_];return void 0===M?null:M})()}_remove(_){var b=this;return(0,o.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return w.type="NONE",w})();function jr(w,p,_){return`firebase:${w}:${p}:${_}`}class G{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:M,name:O}=this.auth;this.fullUserKey=jr(this.userKey,M.apiKey,O),this.fullPersistenceKey=jr("persistence",M.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,o.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?On._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,o.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,b="authUser"){return(0,o.Z)(function*(){if(!_.length)return new G(er(yr),p,b);const M=(yield Promise.all(_.map(function(){var nt=(0,o.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let O=M[0]||er(yr);const Q=jr(b,p.config.apiKey,p.name);let he=null;for(const nt of _)try{const vt=yield nt._get(Q);if(vt){const un=On._fromJSON(p,vt);nt!==O&&(he=un),O=nt;break}}catch{}const Ge=M.filter(nt=>nt._shouldAllowMigration);return O._shouldAllowMigration&&Ge.length?(O=Ge[0],he&&(yield O._set(Q,he.toJSON())),yield Promise.all(_.map(function(){var nt=(0,o.Z)(function*(vt){if(vt!==O)try{yield vt._remove(Q)}catch{}});return function(vt){return nt.apply(this,arguments)}}())),new G(O,p,b)):new G(O,p,b)})()}}function H(w){const p=w.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Y(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(F(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ke(p))return"Blackberry";if(mt(p))return"Webos";if(N(p))return"Safari";if((p.includes("chrome/")||k(p))&&!p.includes("edge/"))return"Chrome";if(be(p))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function F(w=(0,$.z$)()){return/firefox\//i.test(w)}function N(w=(0,$.z$)()){const p=w.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function k(w=(0,$.z$)()){return/crios\//i.test(w)}function Y(w=(0,$.z$)()){return/iemobile/i.test(w)}function be(w=(0,$.z$)()){return/android/i.test(w)}function Ke(w=(0,$.z$)()){return/blackberry/i.test(w)}function mt(w=(0,$.z$)()){return/webos/i.test(w)}function Ee(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function tt(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Lt(w=(0,$.z$)()){return Ee(w)||be(w)||mt(w)||Ke(w)||/windows phone/i.test(w)||Y(w)}function $r(w,p=[]){let _;switch(w){case"Browser":_=H((0,$.z$)());break;case"Worker":_=`${H((0,$.z$)())}-${w}`;break;default:_=w}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${R.SDK_VERSION}/${b}`}function re(){return(re=(0,o.Z)(function*(w){return(yield ke(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(w,p){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)(function*(w,p){return ke(w,"GET","/v2/recaptchaConfig",fe(w,p))})).apply(this,arguments)}function Mt(w){return void 0!==w&&void 0!==w.getResponse}function $t(w){return void 0!==w&&void 0!==w.enterprise}class gn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Jt(w){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=p,b.onerror=M=>{const O=Ie("internal-error");O.customData=M,_(O)},b.type="text/javascript",b.charset="UTF-8",function $n(){var w,p;return null!==(p=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==p?p:document}().appendChild(b)})}function Hr(w){return`__${w}${Math.floor(1e6*Math.random())}`}class Da{constructor(p){this.type="recaptcha-enterprise",this.auth=Hn(p)}verify(p="verify",_=!1){var b=this;return(0,o.Z)(function*(){function O(){return O=(0,o.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var Ge=(0,o.Z)(function*(nt,vt){Le(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(un=>{if(void 0!==un.recaptchaKey){const Zi=new gn(un);return null==he.tenantId?he._agentRecaptchaConfig=Zi:he._tenantRecaptchaConfigs[he.tenantId]=Zi,nt(Zi.siteKey)}vt(new Error("recaptcha Enterprise site key undefined"))}).catch(un=>{vt(un)})});return function(nt,vt){return Ge.apply(this,arguments)}}())}),O.apply(this,arguments)}function Q(he,Ge,nt){const vt=window.grecaptcha;$t(vt)?vt.enterprise.ready(()=>{vt.enterprise.execute(he,{action:p}).then(un=>{Ge(un)}).catch(()=>{Ge("NO_RECAPTCHA")})}):nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,Ge)=>{(function M(he){return O.apply(this,arguments)})(b.auth).then(nt=>{if(!_&&$t(window.grecaptcha))Q(nt,he,Ge);else{if(typeof window>"u")return void Ge(new Error("RecaptchaVerifier is only supported in browser"));Jt("https://www.google.com/recaptcha/enterprise.js?render="+nt).then(()=>{Q(nt,he,Ge)}).catch(vt=>{Ge(vt)})}}).catch(nt=>{Ge(nt)})})})()}}function an(w,p,_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,o.Z)(function*(w,p,_,b=!1){const M=new Da(w);let O;try{O=yield M.verify(_)}catch{O=yield M.verify(_,!0)}const Q=Object.assign({},p);return Object.assign(Q,b?{captchaResp:O}:{captchaResponse:O}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class md{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const b=O=>new Promise((Q,he)=>{try{Q(p(O))}catch(Ge){he(Ge)}});b.onAbort=_,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===p)return;const b=[];try{for(const M of _.queue)yield M(p),M.onAbort&&b.push(M.onAbort)}catch(M){b.reverse();for(const O of b)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class co{constructor(p,_,b,M){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ji(this),this.idTokenSubscription=new ji(this),this.beforeStateQueue=new md(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=er(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var M,O;if(!b._deleted&&(b.persistenceManager=yield G.create(b,p),!b._deleted)){if(null!==(M=b._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,o.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,o.Z)(function*(){var b;const M=yield _.assertedPersistence.getCurrentUser();let O=M,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,Ge=O?._redirectEventId,nt=yield _.tryRedirectSignIn(p);(!he||he===Ge)&&nt?.user&&(O=nt.user,Q=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(O)}catch(he){O=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ce(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,o.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,o.Z)(function*(){try{yield _r(p)}catch(b){if("auth/network-request-failed"!==b?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pr(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var p=this;return(0,o.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,o.Z)(function*(){const b=p?(0,$.m9)(p):null;return b&&ce(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p,_=!1){var b=this;return(0,o.Z)(function*(){if(!b._deleted)return p&&ce(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,o.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,o.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(er(p))}))}initializeRecaptchaConfig(){var p=this;return(0,o.Z)(function*(){const _=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new gn(_);null==p.tenantId?p._agentRecaptchaConfig=b:p._tenantRecaptchaConfigs[p.tenantId]=b,b.emailPasswordEnabled&&new Da(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,o.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&er(p)||_._popupRedirectResolver;ce(b,_,"argument-error"),_.redirectPersistenceManager=yield G.create(_,[er(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,o.Z)(function*(){var b,M;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,o.Z)(function*(){if(p===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,M){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ce(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,b,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,o.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(b["X-Firebase-Client"]=M);const O=yield p._getAppCheckToken();return O&&(b["X-Firebase-AppCheck"]=O),b})()}_getAppCheckToken(){var p=this;return(0,o.Z)(function*(){var _;const b=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return b?.error&&function yt(w,...p){ye.logLevel<=de.in.WARN&&ye.warn(`Auth (${R.SDK_VERSION}): ${w}`,...p)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function Hn(w){return(0,$.m9)(w)}class ji{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(w,p,_){const b=Hn(w);ce(b._canInitEmulator,b,"emulator-config-failed"),ce(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const M=!!_?.disableWarnings,O=_d(p),{host:Q,port:he}=function Tr(w){const p=_d(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const O=M[1];return{host:O,port:Gr(b.substr(O.length+1))}}{const[O,Q]=b.split(":");return{host:O,port:Gr(Q)}}}(p);b.config.emulator={url:`${O}//${Q}${null===he?"":`:${he}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function xa(){function w(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function _d(w){const p=w.indexOf(":");return p<0?"":w.substr(0,p+1)}function Gr(w){if(!w)return null;const p=Number(w);return isNaN(p)?null:p}class bs{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Qe("not implemented")}_getIdTokenResponse(p){return Qe("not implemented")}_linkToIdToken(p,_){return Qe("not implemented")}_getReauthenticationResolver(p){return Qe("not implemented")}}function Sa(w,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:resetPassword",fe(w,p))})).apply(this,arguments)}function Ma(w,p){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yd(w,p){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:update",fe(w,p))})).apply(this,arguments)}function Xh(w,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithPassword",fe(w,p))})).apply(this,arguments)}function jl(w,p){return vd.apply(this,arguments)}function vd(){return(vd=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:sendOobCode",fe(w,p))})).apply(this,arguments)}function og(w,p){return $l.apply(this,arguments)}function $l(){return($l=(0,o.Z)(function*(w,p){return jl(w,p)})).apply(this,arguments)}function wd(w,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,o.Z)(function*(w,p){return jl(w,p)})).apply(this,arguments)}function ef(w,p){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,o.Z)(function*(w,p){return jl(w,p)})).apply(this,arguments)}function bd(w,p){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,o.Z)(function*(w,p){return jl(w,p)})).apply(this,arguments)}function Du(){return(Du=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithEmailLink",fe(w,p))})).apply(this,arguments)}function Au(){return(Au=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithEmailLink",fe(w,p))})).apply(this,arguments)}class Hl extends bs{constructor(p,_,b,M=null){super("password",b),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new Hl(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new Hl(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,o.Z)(function*(){var b;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const O=yield an(p,M,"signInWithPassword");return Xh(p,O)}return Xh(p,M).catch(function(){var O=(0,o.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield an(p,M,"signInWithPassword");return Xh(p,he)}return Promise.reject(Q)});return function(Q){return O.apply(this,arguments)}}());case"emailLink":return function ag(w,p){return Du.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:xe(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,o.Z)(function*(){switch(b.signInMethod){case"password":return Ma(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function tf(w,p){return Au.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function fo(w,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithIdp",fe(w,p))})).apply(this,arguments)}class as extends bs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new as(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M}=_,O=(0,ie._T)(_,["providerId","signInMethod"]);if(!b||!M)return null;const Q=new as(b,M);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return fo(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,fo(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,fo(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,$.xO)(_)}return p}}function Gl(w,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:sendVerificationCode",fe(w,p))})).apply(this,arguments)}function ka(){return(ka=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",fe(w,p))})).apply(this,arguments)}function zl(){return(zl=(0,o.Z)(function*(w,p){const _=yield en(w,"POST","/v1/accounts:signInWithPhoneNumber",fe(w,p));if(_.temporaryProof)throw pn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Td={USER_NOT_FOUND:"user-not-found"};function Zl(){return(Zl=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithPhoneNumber",fe(w,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Td)})).apply(this,arguments)}class Wn extends bs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Wn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Wn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function ql(w,p){return ka.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Id(w,p){return zl.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Su(w,p){return Zl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:M,temporaryProof:O}=p;return b||_||M||O?new Wn({verificationId:_,verificationCode:b,phoneNumber:M,temporaryProof:O}):null}}class $s{constructor(p){var _,b,M,O,Q,he;const Ge=(0,$.zd)((0,$.pd)(p)),nt=null!==(_=Ge.apiKey)&&void 0!==_?_:null,vt=null!==(b=Ge.oobCode)&&void 0!==b?b:null,un=function Es(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ge.mode)&&void 0!==M?M:null);ce(nt&&vt&&un,"argument-error"),this.apiKey=nt,this.operation=un,this.code=vt,this.continueUrl=null!==(O=Ge.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=Ge.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(he=Ge.tenantId)&&void 0!==he?he:null}static parseLink(p){const _=function ug(w){const p=(0,$.zd)((0,$.pd)(w)).link,_=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||_||p||w}(p);try{return new $s(_)}catch{return null}}}let nf=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,b){return Hl._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const M=$s.parseLink(b);return ce(M,"argument-error"),Hl._fromEmailAndCode(_,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Dn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class $o extends Dn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Wl extends $o{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ce("providerId"in _&&"signInMethod"in _,"argument-error"),as._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ce(p.idToken||p.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Wl.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Wl.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:O,nonce:Q,providerId:he}=p;if(!b&&!M&&!_&&!O||!he)return null;try{return new Wl(he)._credential({idToken:_,accessToken:b,nonce:Q,pendingToken:O})}catch{return null}}}let go=(()=>{class w extends $o{constructor(){super("facebook.com")}static credential(_){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),oi=(()=>{class w extends $o{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:M}=_;if(!b&&!M)return null;try{return w.credential(b,M)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Dd=(()=>{class w extends $o{constructor(){super("github.com")}static credential(_){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class $i extends bs{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return fo(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,fo(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,fo(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M,pendingToken:O}=_;return b&&M&&O&&b===M?new $i(b,O):null}static _create(p,_){return new $i(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yl extends Dn{constructor(p){ce(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Yl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Yl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=$i.fromJSON(p);return ce(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return $i._create(b,_)}catch{return null}}}let Mu=(()=>{class w extends $o{constructor(){super("twitter.com")}static credential(_,b){return as._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=_;if(!b||!M)return null;try{return w.credential(b,M)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Oa(w,p){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signUp",fe(w,p))})).apply(this,arguments)}class Dr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b,M=!1){return(0,o.Z)(function*(){const O=yield On._fromIdTokenResponse(p,b,M),Q=Ho(b);return new Dr({user:O,providerId:Q,_tokenResponse:b,operationType:_})})()}static _forOperation(p,_,b){return(0,o.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const M=Ho(b);return new Dr({user:p,providerId:M,_tokenResponse:b,operationType:_})})()}}function Ho(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function kt(w){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,o.Z)(function*(w){var p;const _=Hn(w);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Dr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Oa(_,{returnSecureToken:!0}),M=yield Dr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ql extends $.ZR{constructor(p,_,b,M){var O;super(_.code,_.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,Ql.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,M){return new Ql(p,_,b,M)}}function Jl(w,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ql._fromErrorAndOperation(w,O,p,b):O})}function Ad(w){return new Set(w.map(({providerId:p})=>p).filter(p=>!!p))}function rf(w,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,o.Z)(function*(w,p){const _=(0,$.m9)(w);yield Pe(!0,_,p);const{providerUserInfo:b}=yield Bn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=Ad(b||[]);return _.providerData=_.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Hi(w,p){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,o.Z)(function*(w,p,_=!1){const b=yield zt(w,p._linkToIdToken(w.auth,yield w.getIdToken()),_);return Dr._forOperation(w,"link",b)})).apply(this,arguments)}function Pe(w,p,_){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,o.Z)(function*(w,p,_){yield _r(p);const M=!1===w?"provider-already-linked":"no-such-provider";ce(Ad(p.providerData).has(_)===w,p.auth,M)})).apply(this,arguments)}function Xl(w,p){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,o.Z)(function*(w,p,_=!1){const{auth:b}=w,M="reauthenticate";try{const O=yield zt(w,Jl(b,M,p,w),_);ce(O.idToken,b,"internal-error");const Q=Nn(O.idToken);ce(Q,b,"internal-error");const{sub:he}=Q;return ce(w.uid===he,b,"user-mismatch"),Dr._forOperation(w,M,O)}catch(O){throw"auth/user-not-found"===O?.code&&xe(b,"user-mismatch"),O}})).apply(this,arguments)}function Kn(w,p){return Na.apply(this,arguments)}function Na(){return(Na=(0,o.Z)(function*(w,p,_=!1){const b="signIn",M=yield Jl(w,b,p),O=yield Dr._fromIdTokenResponse(w,b,M);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Hs(w,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,o.Z)(function*(w,p){return Kn(Hn(w),p)})).apply(this,arguments)}function Ra(w,p){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,o.Z)(function*(w,p){const _=(0,$.m9)(w);return yield Pe(!1,_,p.providerId),Hi(_,p)})).apply(this,arguments)}function xd(w,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,o.Z)(function*(w,p){return Xl((0,$.m9)(w),p)})).apply(this,arguments)}function V_(w,p){return ec.apply(this,arguments)}function ec(){return(ec=(0,o.Z)(function*(w,p){return en(w,"POST","/v1/accounts:signInWithCustomToken",fe(w,p))})).apply(this,arguments)}function ai(w,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,o.Z)(function*(w,p){const _=Hn(w),b=yield V_(_,{token:p,returnSecureToken:!0}),M=yield Dr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class ui{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?mo._fromServerResponse(p,_):"totpInfo"in _?li._fromServerResponse(p,_):xe(p,"internal-error")}}class mo extends ui{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new mo(_)}}class li extends ui{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new li(_)}}function Fa(w,p,_){var b;ce((null===(b=_.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),ce(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ce(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ce(_.android.packageName.length>0,w,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Sd(w,p,_){return Md.apply(this,arguments)}function Md(){return Md=(0,o.Z)(function*(w,p,_){var b;const M=Hn(w),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Q=yield an(M,O,"getOobCode",!0);_&&Fa(M,Q,_),yield wd(M,Q)}else _&&Fa(M,O,_),yield wd(M,O).catch(function(){var Q=(0,o.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ge=yield an(M,O,"getOobCode",!0);_&&Fa(M,Ge,_),yield wd(M,Ge)}});return function(he){return Q.apply(this,arguments)}}())}),Md.apply(this,arguments)}function Fu(w,p,_){return La.apply(this,arguments)}function La(){return(La=(0,o.Z)(function*(w,p,_){yield Sa((0,$.m9)(w),{oobCode:p,newPassword:_})})).apply(this,arguments)}function tc(w,p){return Go.apply(this,arguments)}function Go(){return(Go=(0,o.Z)(function*(w,p){yield yd((0,$.m9)(w),{oobCode:p})})).apply(this,arguments)}function Xr(w,p){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,o.Z)(function*(w,p){const _=(0,$.m9)(w),b=yield Sa(_,{oobCode:p}),M=b.requestType;switch(ce(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ce(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ce(b.mfaInfo,_,"internal-error");default:ce(b.email,_,"internal-error")}let O=null;return b.mfaInfo&&(O=ui._fromServerResponse(Hn(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function nc(w,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,o.Z)(function*(w,p){const{data:_}=yield Xr((0,$.m9)(w),p);return _.email})).apply(this,arguments)}function Va(w,p,_){return Ua.apply(this,arguments)}function Ua(){return Ua=(0,o.Z)(function*(w,p,_){var b;const M=Hn(w),O={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const nt=yield an(M,O,"signUpPassword");Q=Oa(M,nt)}else Q=Oa(M,O).catch(function(){var nt=(0,o.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const un=yield an(M,O,"signUpPassword");return Oa(M,un)}return Promise.reject(vt)});return function(vt){return nt.apply(this,arguments)}}());const he=yield Q.catch(nt=>Promise.reject(nt)),Ge=yield Dr._fromIdTokenResponse(M,"signIn",he);return yield M._updateCurrentUser(Ge.user),Ge}),Ua.apply(this,arguments)}function rc(w,p,_){return Hs((0,$.m9)(w),nf.credential(p,_))}function Pd(w,p,_){return Gs.apply(this,arguments)}function Gs(){return Gs=(0,o.Z)(function*(w,p,_){var b;const M=Hn(w),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(he,Ge){ce(Ge.handleCodeInApp,M,"argument-error"),Ge&&Fa(M,he,Ge)}if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const he=yield an(M,O,"getOobCode",!0);Q(he,_),yield ef(M,he)}else Q(O,_),yield ef(M,O).catch(function(){var he=(0,o.Z)(function*(Ge){if("auth/missing-recaptcha-token"!==Ge.code)return Promise.reject(Ge);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const nt=yield an(M,O,"getOobCode",!0);Q(nt,_),yield ef(M,nt)}});return function(Ge){return he.apply(this,arguments)}}())}),Gs.apply(this,arguments)}function kd(w,p){return"EMAIL_SIGNIN"===$s.parseLink(p)?.operation}function lg(w,p,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w),M=nf.credentialWithLink(p,_||gt());return ce(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Hs(b,M)})).apply(this,arguments)}function yo(w,p){return xn.apply(this,arguments)}function xn(){return(xn=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:createAuthUri",fe(w,p))})).apply(this,arguments)}function cg(w,p){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,o.Z)(function*(w,p){const b={identifier:p,continueUri:qt()?gt():"http://localhost"},{signinMethods:M}=yield yo((0,$.m9)(w),b);return M||[]})).apply(this,arguments)}function sf(w,p){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,o.Z)(function*(w,p){const _=(0,$.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};p&&Fa(_.auth,M,p);const{email:O}=yield og(_.auth,M);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function Od(w,p,_){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:p};_&&Fa(b.auth,O,_);const{email:Q}=yield bd(b.auth,O);Q!==w.email&&(yield w.reload())})).apply(this,arguments)}function ja(w,p){return vo.apply(this,arguments)}function vo(){return(vo=(0,o.Z)(function*(w,p){return ke(w,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bu(w,p){return ju.apply(this,arguments)}function ju(){return(ju=(0,o.Z)(function*(w,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,$.m9)(w),O={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield zt(b,ja(b.auth,O));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const he=b.providerData.find(({providerId:Ge})=>"password"===Ge);he&&(he.displayName=b.displayName,he.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function ic(w,p){return us((0,$.m9)(w),p,null)}function af(w,p){return us((0,$.m9)(w),null,p)}function us(w,p,_){return qo.apply(this,arguments)}function qo(){return(qo=(0,o.Z)(function*(w,p,_){const{auth:b}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const Q=yield zt(w,Ma(b,O));yield w._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class zo{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class wo extends zo{constructor(p,_,b,M){super(p,_,b),this.username=M}}class Rd extends zo{constructor(p,_){super(p,"facebook.com",_)}}class Fd extends wo{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class uf extends zo{constructor(p,_){super(p,"google.com",_)}}class sc extends wo{constructor(p,_,b){super(p,"twitter.com",_,b)}}function $u(w){const{user:p,_tokenResponse:_}=w;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Nd(w){var p,_;if(!w)return null;const{providerId:b}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&w?.idToken){const Q=null===(_=null===(p=Nn(w.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new zo(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new Rd(O,M);case"github.com":return new Fd(O,M);case"google.com":return new uf(O,M);case"twitter.com":return new sc(O,M,w.screenName||null);case"custom":case"anonymous":return new zo(O,null);default:return new zo(O,b,M)}}(_)}class ci{constructor(p,_,b){this.type=p,this.credential=_,this.auth=b}static _fromIdtoken(p,_){return new ci("enroll",p,_)}static _fromMfaPendingCredential(p){return new ci("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return ci._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return ci._fromIdtoken(p.multiFactorSession.idToken)}return null}}class uc{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=Hn(p),M=_.customData._serverResponse,O=(M.mfaInfo||[]).map(he=>ui._fromServerResponse(b,he));ce(M.mfaPendingCredential,b,"internal-error");const Q=ci._fromMfaPendingCredential(M.mfaPendingCredential);return new uc(Q,O,function(){var he=(0,o.Z)(function*(Ge){const nt=yield Ge._process(b,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const vt=Object.assign(Object.assign({},M),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(_.operationType){case"signIn":const un=yield Dr._fromIdTokenResponse(b,_.operationType,vt);return yield b._updateCurrentUser(un.user),un;case"reauthenticate":return ce(_.user,b,"internal-error"),Dr._forOperation(_.user,_.operationType,vt);default:xe(b,"internal-error")}});return function(Ge){return he.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,o.Z)(function*(){return _.signInResolver(p)})()}}function zs(w,p){var _;const b=(0,$.m9)(w),M=p;return ce(p.customData.operationType,b,"argument-error"),ce(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),uc._fromError(b,M)}function Gu(w,p){return ke(w,"POST","/v2/accounts/mfaEnrollment:start",fe(w,p))}class Ga{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>ui._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Ga(p)}getSession(){var p=this;return(0,o.Z)(function*(){return ci._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var b=this;return(0,o.Z)(function*(){const M=p,O=yield b.getSession(),Q=yield zt(b.user,M._process(b.user.auth,O,_));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(p){var _=this;return(0,o.Z)(function*(){const b="string"==typeof p?p:p.uid,M=yield _.user.getIdToken();try{const O=yield zt(_.user,function Wo(w,p){return ke(w,"POST","/v2/accounts/mfaEnrollment:withdraw",fe(w,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==b),yield _.user._updateTokensIfNecessary(O),yield _.user.reload()}catch(O){throw O}})()}}const Co=new WeakMap;function qa(w){const p=(0,$.m9)(w);return Co.has(p)||Co.set(p,Ga._fromUser(p)),Co.get(p)}const Zs="__sak";class za{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Zs,"1"),this.storage.removeItem(Zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vd=(()=>{class w extends za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function lc(){const w=(0,$.z$)();return N(w)||Ee(w)}()&&function on(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Lt(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),O=this.localCache[b];M!==O&&_(b,O,M)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((he,Ge,nt)=>{this.notifyListeners(he,nt)});const M=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(M);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!b)return}const O=()=>{const he=this.storage.getItem(M);!b&&this.localCache[M]===he||this.notifyListeners(M,he)},Q=this.storage.getItem(M);!function Qt(){return(0,$.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,b){this.localCache[_]=b;const M=this.listeners[_];if(M)for(const O of Array.from(M))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var M=()=>super._set,O=this;return(0,o.Z)(function*(){yield M().call(O,_,b),O.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,M=this;return(0,o.Z)(function*(){const O=yield b().call(M,_);return M.localCache[_]=JSON.stringify(O),O})()}_remove(_){var b=()=>super._remove,M=this;return(0,o.Z)(function*(){yield b().call(M,_),delete M.localCache[_]})()}}return w.type="LOCAL",w})(),Ws=(()=>{class w extends za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return w.type="SESSION",w})();let hf=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(O=>O.isListeningto(_));if(b)return b;const M=new w(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,o.Z)(function*(){const M=_,{eventId:O,eventType:Q,data:he}=M.data,Ge=b.handlersMap[Q];if(!Ge?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const nt=Array.from(Ge).map(function(){var un=(0,o.Z)(function*(Zi){return Zi(M.origin,he)});return function(Zi){return un.apply(this,arguments)}}()),vt=yield function dg(w){return Promise.all(w.map(function(){var p=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(nt);M.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:vt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Ks(w="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return w+_}class Qo{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,b=50){var M=this;return(0,o.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,he;return new Promise((Ge,nt)=>{const vt=Ks("",20);O.port1.start();const un=setTimeout(()=>{nt(new Error("unsupported_event"))},b);he={messageChannel:O,onMessage(Zi){const ca=Zi;if(ca.data.eventId===vt)switch(ca.data.status){case"ack":clearTimeout(un),Q=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ge(ca.data.response);break;default:clearTimeout(un),clearTimeout(Q),nt(new Error("invalid_response"))}}},M.handlers.add(he),O.port1.addEventListener("message",he.onMessage),M.target.postMessage({eventType:p,eventId:vt,data:_},[O.port2])}).finally(()=>{he&&M.removeMessageHandler(he)})})()}}function ir(){return window}function Ka(){return typeof ir().WorkerGlobalScope<"u"&&"function"==typeof ir().importScripts}function dc(){return(dc=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fn="firebaseLocalStorageDb",sr="firebaseLocalStorage",zu="fbase_key";class Ti{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function hc(w,p){return w.transaction([sr],p?"readwrite":"readonly").objectStore(sr)}function yn(){const w=indexedDB.open(Fn,1);return new Promise((p,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(sr,{keyPath:zu})}catch(M){_(M)}}),w.addEventListener("success",(0,o.Z)(function*(){const b=w.result;b.objectStoreNames.contains(sr)?p(b):(b.close(),yield function Bd(){const w=indexedDB.deleteDatabase(Fn);return new Ti(w).toPromise()}(),p(yield yn()))}))})}function jd(w,p,_){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,o.Z)(function*(w,p,_){const b=hc(w,!0).put({[zu]:p,value:_});return new Ti(b).toPromise()})).apply(this,arguments)}function Zu(){return(Zu=(0,o.Z)(function*(w,p){const _=hc(w,!1).get(p),b=yield new Ti(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function hg(w,p){const _=hc(w,!0).delete(p);return new Ti(_).toPromise()}const pf=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield yn()),_.db})()}_withRetries(_){var b=this;return(0,o.Z)(function*(){let M=0;for(;;)try{const O=yield b._openDb();return yield _(O)}catch(O){if(M++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return Ka()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=hf._getInstance(function Is(){return Ka()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,o.Z)(function*(M,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(M,O){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,o.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var b,M;if(_.activeServiceWorker=yield function cc(){return dc.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Qo(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,o.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Ud(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield yn();return yield jd(_,Zs,"1"),yield hg(_,Zs),!0}catch{}return!1})()}_withPendingWrite(_){var b=this;return(0,o.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var M=this;return(0,o.Z)(function*(){return M._withPendingWrite((0,o.Z)(function*(){return yield M._withRetries(O=>jd(O,_,b)),M.localCache[_]=b,M.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,o.Z)(function*(){const M=yield b._withRetries(O=>function U_(w,p){return Zu.apply(this,arguments)}(O,_));return b.localCache[_]=M,M})()}_remove(_){var b=this;return(0,o.Z)(function*(){return b._withPendingWrite((0,o.Z)(function*(){return yield b._withRetries(M=>hg(M,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const b=yield _._withRetries(Q=>{const he=hc(Q,!1).getAll();return new Ti(he).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Q,value:he}of b)O.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(he)&&(_.notifyListeners(Q,he),M.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!O.has(Q)&&(_.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(_,b){this.localCache[_]=b;const M=this.listeners[_];if(M)for(const O of Array.from(M))O(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function B_(w,p){return ke(w,"POST","/v2/accounts/mfaSignIn:start",fe(w,p))}const Yu=1e12;class Ar{constructor(p){this.auth=p,this.counter=Yu,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new qi(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||Yu;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Yu))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,o.Z)(function*(){var b;return null===(b=_._widgets.get(p||Yu))||void 0===b||b.execute(),""})()}}class qi{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;ce(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fc(w){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qa=Hr("rcb"),Qu=new ii(3e4,6e4);class Gd{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ir().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ce(function pg(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&Mt(ir().grecaptcha)?Promise.resolve(ir().grecaptcha):new Promise((b,M)=>{const O=ir().setTimeout(()=>{M(Ie(p,"network-request-failed"))},Qu.get());ir()[Qa]=()=>{ir().clearTimeout(O),delete ir()[Qa];const he=ir().grecaptcha;if(!he||!Mt(he))return void M(Ie(p,"internal-error"));const Ge=he.render;he.render=(nt,vt)=>{const un=Ge(nt,vt);return this.counter++,un},this.hostLanguage=_,b(he)},Jt(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Qa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),M(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=ir().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gf{load(p){return(0,o.Z)(function*(){return new Ar(p)})()}clearedOneInstance(){}}const gg="recaptcha",pc={theme:"light",type:"image"};class di{constructor(p,_=Object.assign({},pc),b){this.parameters=_,this.type=gg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hn(b),this.isInvisible="invisible"===this.parameters.size,ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;ce(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gf:new Gd,this.validateStartingState()}verify(){var p=this;return(0,o.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(O=>{const Q=he=>{!he||(p.tokenChangeListeners.delete(Q),O(he))};p.tokenChangeListeners.add(Q),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ce(!this.parameters.sitekey,this.auth,"argument-error"),ce(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ce(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=ir()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){ce(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,o.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,o.Z)(function*(){ce(qt()&&!Ka(),p.auth,"internal-error"),yield function Ju(){let w=null;return new Promise(p=>{"complete"!==document.readyState?(w=()=>p(),window.addEventListener("load",w)):p()}).catch(p=>{throw w&&window.removeEventListener("load",w),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function ue(w){return re.apply(this,arguments)}(p.auth);ce(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ce(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class bo{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Wn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function mf(w,p,_){return gc.apply(this,arguments)}function gc(){return(gc=(0,o.Z)(function*(w,p,_){const b=Hn(w),M=yield Xo(b,p,(0,$.m9)(_));return new bo(M,O=>Hs(b,O))})).apply(this,arguments)}function qd(w,p,_){return zd.apply(this,arguments)}function zd(){return(zd=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w);yield Pe(!1,b,"phone");const M=yield Xo(b.auth,p,(0,$.m9)(_));return new bo(M,O=>Ra(b,O))})).apply(this,arguments)}function Ja(w,p,_){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w),M=yield Xo(b.auth,p,(0,$.m9)(_));return new bo(M,O=>xd(b,O))})).apply(this,arguments)}function Xo(w,p,_){return mc.apply(this,arguments)}function mc(){return(mc=(0,o.Z)(function*(w,p,_){var b;const M=yield _.verify();try{let O;if(ce("string"==typeof M,w,"argument-error"),ce(_.type===gg,w,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return ce("enroll"===Q.type,w,"internal-error"),(yield Gu(w,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ce("signin"===Q.type,w,"internal-error");const he=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return ce(he,w,"missing-multi-factor-info"),(yield B_(w,{mfaPendingCredential:Q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Gl(w,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Q}}finally{_._reset()}})).apply(this,arguments)}function mn(w,p){return xr.apply(this,arguments)}function xr(){return(xr=(0,o.Z)(function*(w,p){yield Hi((0,$.m9)(w),p)})).apply(this,arguments)}let mg=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=Hn(_)}verifyPhoneNumber(_,b){return Xo(this.auth,_,(0,$.m9)(b))}static credential(_,b){return Wn._fromVerification(_,b)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:M}=_;return b&&M?Wn._fromTokenResponse(b,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function hi(w,p){return p?er(p):(ce(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class eu extends bs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return fo(p,this._buildIdpRequest())}_linkToIdToken(p,_){return fo(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return fo(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function fi(w){return Kn(w.auth,new eu(w),w.bypassAuthState)}function _c(w){const{auth:p,user:_}=w;return ce(_,p,"internal-error"),Xl(_,new eu(w),w.bypassAuthState)}function Zd(w){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,o.Z)(function*(w){const{auth:p,user:_}=w;return ce(_,p,"internal-error"),Hi(_,new eu(w),w.bypassAuthState)})).apply(this,arguments)}class Ds{constructor(p,_,b,M,O=!1){this.auth=p,this.resolver=b,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,o.Z)(function*(b,M){p.pendingPromise={resolve:b,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(b,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,o.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:O,tenantId:Q,error:he,type:Ge}=p;if(he)return void _.reject(he);const nt={auth:_.auth,requestUri:b,sessionId:M,tenantId:Q||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ge)(nt))}catch(vt){_.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return fi;case"linkViaPopup":case"linkViaRedirect":return Zd;case"reauthViaPopup":case"reauthViaRedirect":return _c;default:xe(this.auth,"internal-error")}}resolve(p){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gn=new ii(2e3,1e4);function ht(w,p,_){return tu.apply(this,arguments)}function tu(){return(tu=(0,o.Z)(function*(w,p,_){const b=Hn(w);qe(w,p,Dn);const M=hi(b,_);return new Ys(b,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function ar(w,p,_){return nu.apply(this,arguments)}function nu(){return(nu=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w);qe(b.auth,p,Dn);const M=hi(b.auth,_);return new Ys(b.auth,"reauthViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}function yc(w,p,_){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w);qe(b.auth,p,Dn);const M=hi(b.auth,_);return new Ys(b.auth,"linkViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}let Ys=(()=>{class w extends Ds{constructor(_,b,M,O,Q){super(_,b,O,Q),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const b=yield _.execute();return ce(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,o.Z)(function*(){xt(1===_.filter.length,"Popup operations only handle one event");const b=Ks();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Ie(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,M;this.pollId=null!==(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Gn.get())};_()}}return w.currentPopupAction=null,w})();const kr=new Map;class _g extends Ds{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,o.Z)(function*(){let b=kr.get(_.auth._key());if(!b){try{const O=(yield function vc(w,p){return As.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(O)}catch(M){b=()=>Promise.reject(M)}kr.set(_.auth._key(),b)}return _.bypassAuthState||kr.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,o.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const M=yield b.auth._redirectUserForId(p.eventId);if(M)return b.user=M,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function As(){return(As=(0,o.Z)(function*(w,p){const _=ru(p),b=pi(w);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(_));return yield b._remove(_),M})).apply(this,arguments)}function wc(w,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,o.Z)(function*(w,p){return pi(w)._set(ru(p),"true")})).apply(this,arguments)}function zi(){kr.clear()}function Wd(w,p){kr.set(w._key(),p)}function pi(w){return er(w._redirectPersistence)}function ru(w){return jr("pendingRedirect",w.config.apiKey,w.name)}function vr(w,p,_){return function xs(w,p,_){return Cc.apply(this,arguments)}(w,p,_)}function Cc(){return(Cc=(0,o.Z)(function*(w,p,_){const b=Hn(w);qe(w,p,Dn),yield b._initializationPromise;const M=hi(b,_);return yield wc(M,b),M._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Or(w,p,_){return function ta(w,p,_){return el.apply(this,arguments)}(w,p,_)}function el(){return(el=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w);qe(b.auth,p,Dn),yield b.auth._initializationPromise;const M=hi(b.auth,_);yield wc(M,b.auth);const O=yield Io(b);return M._openRedirect(b.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function _f(w,p,_){return function bc(w,p,_){return Ec.apply(this,arguments)}(w,p,_)}function Ec(){return(Ec=(0,o.Z)(function*(w,p,_){const b=(0,$.m9)(w);qe(b.auth,p,Dn),yield b.auth._initializationPromise;const M=hi(b.auth,_);yield Pe(!1,b,p.providerId),yield wc(M,b.auth);const O=yield Io(b);return M._openRedirect(b.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function yf(w,p){return iu.apply(this,arguments)}function iu(){return(iu=(0,o.Z)(function*(w,p){return yield Hn(w)._initializationPromise,tl(w,p,!1)})).apply(this,arguments)}function tl(w,p){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,o.Z)(function*(w,p,_=!1){const b=Hn(w),M=hi(b,p),Q=yield new _g(b,M,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,p)),Q})).apply(this,arguments)}function Io(w){return su.apply(this,arguments)}function su(){return(su=(0,o.Z)(function*(w){const p=Ks(`${w.uid}:::`);return w._redirectEventId=p,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),p})).apply(this,arguments)}class na{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Tc(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ra(w);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!ra(p)){const M=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Ie(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ic(p))}saveEventToCache(p){this.cachedEventUids.add(Ic(p)),this.lastProcessedEventTime=Date.now()}}function Ic(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(p=>p).join("-")}function ra({type:w,error:p}){return"unknown"===w&&"auth/no-auth-event"===p?.code}function ia(w){return sa.apply(this,arguments)}function sa(){return(sa=(0,o.Z)(function*(w,p={}){return ke(w,"GET","/v1/projects",p)})).apply(this,arguments)}const rl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yg=/^https?/;function oa(){return(oa=(0,o.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:p}=yield ia(w);for(const _ of p)try{if(Kd(_))return}catch{}xe(w,"unauthorized-domain")})).apply(this,arguments)}function Kd(w){const p=gt(),{protocol:_,hostname:b}=new URL(p);if(w.startsWith("chrome-extension://")){const Q=new URL(w);return""===Q.hostname&&""===b?"chrome-extension:"===_&&w.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===b}if(!yg.test(_))return!1;if(rl.test(w))return b===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const Js=new ii(3e4,6e4);function Dc(){const w=ir().___jsl;if(w?.H)for(const p of Object.keys(w.H))if(w.H[p].r=w.H[p].r||[],w.H[p].L=w.H[p].L||[],w.H[p].r=[...w.H[p].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let il=null;function Yn(w){return il=il||function vf(w){return new Promise((p,_)=>{var b,M,O;function Q(){Dc(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Dc(),_(Ie(w,"network-request-failed"))},timeout:Js.get()})}if(null!==(M=null===(b=ir().gapi)||void 0===b?void 0:b.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(O=ir().gapi)||void 0===O||!O.load){const he=Hr("iframefcb");return ir()[he]=()=>{gapi.load?Q():_(Ie(w,"network-request-failed"))},Jt(`https://apis.google.com/js/api.js?onload=${he}`).catch(Ge=>_(Ge))}Q()}}).catch(p=>{throw il=null,p})}(w),il}const Ss=new ii(5e3,15e3),wg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ai=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wr(w){const p=w.config;ce(p.authDomain,w,"auth-domain-config-required");const _=p.emulator?ss(p,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:w.name,v:R.SDK_VERSION},M=Ai.get(w.config.apiHost);M&&(b.eid=M);const O=w._getFrameworks();return O.length&&(b.fw=O.join(",")),`${_}?${(0,$.xO)(b).slice(1)}`}function aa(){return aa=(0,o.Z)(function*(w){const p=yield Yn(w),_=ir().gapi;return ce(_,w,"internal-error"),p.open({where:document.body,url:wr(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wg,dontclear:!0},b=>new Promise(function(){var M=(0,o.Z)(function*(O,Q){yield b.restyle({setHideOnLeave:!1});const he=Ie(w,"network-request-failed"),Ge=ir().setTimeout(()=>{Q(he)},Ss.get());function nt(){ir().clearTimeout(Ge),O(b)}b.ping(nt).then(nt,()=>{Q(he)})});return function(O,Q){return M.apply(this,arguments)}}()))}),aa.apply(this,arguments)}const C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class X{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Vt=encodeURIComponent("fac");function Nt(w,p,_,b,M,O){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,o.Z)(function*(w,p,_,b,M,O){ce(w.config.authDomain,w,"auth-domain-config-required"),ce(w.config.apiKey,w,"invalid-api-key");const Q={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:b,v:R.SDK_VERSION,eventId:M};if(p instanceof Dn){p.setDefaultLanguage(w.languageCode),Q.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[vt,un]of Object.entries(O||{}))Q[vt]=un}if(p instanceof $o){const vt=p.getScopes().filter(un=>""!==un);vt.length>0&&(Q.scopes=vt.join(","))}w.tenantId&&(Q.tid=w.tenantId);const he=Q;for(const vt of Object.keys(he))void 0===he[vt]&&delete he[vt];const Ge=yield w._getAppCheckToken(),nt=Ge?`#${Vt}=${encodeURIComponent(Ge)}`:"";return`${hn(w)}?${(0,$.xO)(he).slice(1)}${nt}`})).apply(this,arguments)}function hn({config:w}){return w.emulator?ss(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}const ds="webStorageSupport",hs=class ua{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=tl,this._overrideRedirectResult=Wd}_openPopup(p,_,b,M){var O=this;return(0,o.Z)(function*(){var Q;xt(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const he=yield Nt(p,_,b,gt(),M);return function me(w,p,_,b=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let he="";const Ge=Object.assign(Object.assign({},C),{width:b.toString(),height:M.toString(),top:O,left:Q}),nt=(0,$.z$)().toLowerCase();_&&(he=k(nt)?"_blank":_),F(nt)&&(p=p||"http://localhost",Ge.scrollbars="yes");const vt=Object.entries(Ge).reduce((Zi,[ca,ol])=>`${Zi}${ca}=${ol},`,"");if(function at(w=(0,$.z$)()){var p;return Ee(w)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(nt)&&"_self"!==he)return function Je(w,p){const _=document.createElement("a");_.href=w,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",he),new X(null);const un=window.open(p||"",he,vt);ce(un,w,"popup-blocked");try{un.focus()}catch{}return new X(un)}(p,he,Ks())})()}_openRedirect(p,_,b,M){var O=this;return(0,o.Z)(function*(){return yield O._originValidation(p),function Wa(w){ir().location.href=w}(yield Nt(p,_,b,gt(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:O}=this.eventManagers[_];return M?Promise.resolve(M):(xt(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,o.Z)(function*(){const b=yield function Ac(w){return aa.apply(this,arguments)}(p),M=new na(p);return b.register("authEvent",O=>(ce(O?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=b,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(ds,{type:ds},M=>{var O;const Q=null===(O=M?.[0])||void 0===O?void 0:O[ds];void 0!==Q&&_(!!Q),xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function vg(w){return oa.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Lt()||N()||Ee()}};class Rr extends class ei{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Rr(p)}_finalizeEnroll(p,_,b){return function Ha(w,p){return ke(w,"POST","/v2/accounts/mfaEnrollment:finalize",fe(w,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function or(w,p){return ke(w,"POST","/v2/accounts/mfaSignIn:finalize",fe(w,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let la=(()=>{class w{constructor(){}static assertion(_){return Rr._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Mc="@firebase/auth";class Qd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{p(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function sl(w){(0,R._registerComponent)(new _e.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:he}=b.options;ce(Q&&!Q.includes(":"),"invalid-api-key",{appName:b.name});const Ge={apiKey:Q,authDomain:he,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$r(w)},nt=new co(b,M,O,Ge);return function jo(w,p){const _=p?.persistence||[],b=(Array.isArray(_)?_:[_]).map(er);p?.errorMap&&w._updateErrorMap(p.errorMap),w._initializeWithPersistence(b,p?.popupRedirectResolver)}(nt,_),nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new _e.wA("auth-internal",p=>{const _=Hn(p.getProvider("auth").getImmediate());return new Qd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Mc,"0.23.2",function Jd(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,R.registerVersion)(Mc,"0.23.2","esm2017")}("Browser")},2090:(bt,Ne,U)=>{U.d(Ne,{$s:()=>er,BH:()=>Se,G6:()=>ss,L:()=>we,LL:()=>Me,P0:()=>pt,Pz:()=>Ie,Sg:()=>qe,UG:()=>Qe,US:()=>_e,ZB:()=>J,ZR:()=>ke,aH:()=>xe,b$:()=>qt,eu:()=>te,hl:()=>se,jU:()=>xt,m9:()=>jr,ne:()=>zt,pd:()=>Nn,r3:()=>Bn,ru:()=>gt,tV:()=>Z,uI:()=>ce,vZ:()=>mr,w1:()=>is,xO:()=>Ui,xb:()=>wi,z$:()=>Ze,zI:()=>Ae,zd:()=>Yr});const ie=function(G){const H=[];let F=0;for(let N=0;N<G.length;N++){let k=G.charCodeAt(N);k<128?H[F++]=k:k<2048?(H[F++]=k>>6|192,H[F++]=63&k|128):55296==(64512&k)&&N+1<G.length&&56320==(64512&G.charCodeAt(N+1))?(k=65536+((1023&k)<<10)+(1023&G.charCodeAt(++N)),H[F++]=k>>18|240,H[F++]=k>>12&63|128,H[F++]=k>>6&63|128,H[F++]=63&k|128):(H[F++]=k>>12|224,H[F++]=k>>6&63|128,H[F++]=63&k|128)}return H},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let k=0;k<G.length;k+=3){const Y=G[k],be=k+1<G.length,Ke=be?G[k+1]:0,mt=k+2<G.length,Ee=mt?G[k+2]:0;let Qt=(15&Ke)<<2|Ee>>6,Lt=63&Ee;mt||(Lt=64,be||(Qt=64)),N.push(F[Y>>2],F[(3&Y)<<4|Ke>>4],F[Qt],F[Lt])}return N.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(ie(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let F=0,N=0;for(;F<G.length;){const k=G[F++];if(k<128)H[N++]=String.fromCharCode(k);else if(k>191&&k<224){const Y=G[F++];H[N++]=String.fromCharCode((31&k)<<6|63&Y)}else if(k>239&&k<365){const mt=((7&k)<<18|(63&G[F++])<<12|(63&G[F++])<<6|63&G[F++])-65536;H[N++]=String.fromCharCode(55296+(mt>>10)),H[N++]=String.fromCharCode(56320+(1023&mt))}else{const Y=G[F++],be=G[F++];H[N++]=String.fromCharCode((15&k)<<12|(63&Y)<<6|63&be)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const F=H?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let k=0;k<G.length;){const Y=F[G.charAt(k++)],Ke=k<G.length?F[G.charAt(k)]:0;++k;const Ee=k<G.length?F[G.charAt(k)]:64;++k;const at=k<G.length?F[G.charAt(k)]:64;if(++k,null==Y||null==Ke||null==Ee||null==at)throw new pe;N.push(Y<<2|Ke>>4),64!==Ee&&(N.push(Ke<<4&240|Ee>>2),64!==at&&N.push(Ee<<6&192|at))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(G){return function(G){const H=ie(G);return _e.encodeByteArray(H,!0)}(G).replace(/\./g,"")},Z=function(G){try{return _e.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function J(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const F in H)!H.hasOwnProperty(F)||!He(F)||(G[F]=J(G[F],H[F]));return G}function He(G){return"__proto__"!==G}const ye=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=G&&Z(G[1]);return H&&JSON.parse(H)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},pt=G=>{const H=(G=>{var H,F;return null===(F=null===(H=ye())||void 0===H?void 0:H.emulatorHosts)||void 0===F?void 0:F[G]})(G);if(!H)return;const F=H.lastIndexOf(":");if(F<=0||F+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const N=parseInt(H.substring(F+1),10);return"["===H[0]?[H.substring(1,F-1),N]:[H.substring(0,F),N]},xe=()=>{var G;return null===(G=ye())||void 0===G?void 0:G.config},Ie=G=>{var H;return null===(H=ye())||void 0===H?void 0:H[`_${G}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,F)=>{this.resolve=H,this.reject=F})}wrapCallback(H){return(F,N)=>{F?this.reject(F):this.resolve(N),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(F):H(F,N))}}}function qe(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=H||"demo-project",k=G.iat||0,Y=G.sub||G.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:k,exp:k+3600,auth_time:k,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},G);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(be)),""].join(".")}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ce(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function Qe(){var G;const H=null===(G=ye())||void 0===G?void 0:G.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function xt(){return"object"==typeof self&&self.self===self}function gt(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function qt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function is(){const G=Ze();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function ss(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((G,H)=>{try{let F=!0;const N="validate-browser-context-for-indexeddb-analytics-module",k=self.indexedDB.open(N);k.onsuccess=()=>{k.result.close(),F||self.indexedDB.deleteDatabase(N),G(!0)},k.onupgradeneeded=()=>{F=!1},k.onerror=()=>{var Y;H((null===(Y=k.error)||void 0===Y?void 0:Y.message)||"")}}catch(F){H(F)}})}function Ae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ke extends Error{constructor(H,F,N){super(F),this.code=H,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(H,F,N){this.service=H,this.serviceName=F,this.errors=N}create(H,...F){const N=F[0]||{},k=`${this.service}/${H}`,Y=this.errors[H],be=Y?function ut(G,H){return G.replace(Dt,(F,N)=>{const k=H[N];return null!=k?String(k):`<${N}?>`})}(Y,N):"Error";return new ke(k,`${this.serviceName}: ${be} (${k}).`,N)}}const Dt=/\{\$([^}]+)}/g;function Bn(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function wi(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function mr(G,H){if(G===H)return!0;const F=Object.keys(G),N=Object.keys(H);for(const k of F){if(!N.includes(k))return!1;const Y=G[k],be=H[k];if(Jn(Y)&&Jn(be)){if(!mr(Y,be))return!1}else if(Y!==be)return!1}for(const k of N)if(!F.includes(k))return!1;return!0}function Jn(G){return null!==G&&"object"==typeof G}function Ui(G){const H=[];for(const[F,N]of Object.entries(G))Array.isArray(N)?N.forEach(k=>{H.push(encodeURIComponent(F)+"="+encodeURIComponent(k))}):H.push(encodeURIComponent(F)+"="+encodeURIComponent(N));return H.length?"&"+H.join("&"):""}function Yr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[k,Y]=N.split("=");H[decodeURIComponent(k)]=decodeURIComponent(Y)}}),H}function Nn(G){const H=G.indexOf("?");if(!H)return"";const F=G.indexOf("#",H);return G.substring(H,F>0?F:void 0)}function zt(G,H){const F=new dt(G,H);return F.subscribe.bind(F)}class dt{constructor(H,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{H(this)}).catch(N=>{this.error(N)})}next(H){this.forEachObserver(F=>{F.next(H)})}error(H){this.forEachObserver(F=>{F.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,F,N){let k;if(void 0===H&&void 0===F&&void 0===N)throw new Error("Missing Observer.");k=function tn(G,H){if("object"!=typeof G||null===G)return!1;for(const F of H)if(F in G&&"function"==typeof G[F])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:F,complete:N},void 0===k.next&&(k.next=Qr),void 0===k.error&&(k.error=Qr),void 0===k.complete&&(k.complete=Qr);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?k.error(this.finalError):k.complete()}catch{}}),this.observers.push(k),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,H)}sendOne(H,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{F(this.observers[H])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function er(G,H=1e3,F=2){const N=H*Math.pow(F,G),k=Math.round(.5*N*(Math.random()-.5)*2);return Math.min(144e5,N+k)}function jr(G){return G&&G._delegate?G._delegate:G}},5935:(bt,Ne,U)=>{var o=U(4650);let $=null;function R(){return $}const pe=new o.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function we(){return(0,o.LFG)(q)}()},providedIn:"platform"}),n})();const Z=new o.OlP("Location Initialized");let q=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function He(){return new q((0,o.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let Ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(yt)},providedIn:"root"}),n})();const ye=new o.OlP("appBaseHref");let yt=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+it(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+it(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ve),o.LFG(ye,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends Ce{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+it(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+it(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ve),o.LFG(ye,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=Oe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(o.LFG(Ce))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ie(){return new xe((0,o.LFG)(Ce))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}let an=(()=>{class n{constructor(t,r,i,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Hn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ji=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const f=r.get(u);r.move(f,c),ho(f,i)}});for(let i=0,u=r.length;i<u;i++){const f=r.get(i).context;f.index=i,f.count=u,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ho(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ho(n,e){n.context.$implicit=e.item}let _n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _d,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class _d{constructor(){this.$implicit=null,this.ngIf=null}}function Tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(e)}'.`)}let yd=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,u]=t.split("."),c=-1===i.indexOf("-")?void 0:o.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,u?`${r}${u}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Td=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function $s(n){return"server"===n}let $o=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Wl((0,o.LFG)(pe),window)}),n})();class Wl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=go(this.window.history)||go(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function go(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class sc extends class uf extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){$||($=n)}(new sc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function oc(){return $u=$u||document.querySelector("base"),$u?$u.getAttribute("href"):null}();return null==t?null:function Ld(n){Hu=Hu||document.createElement("a"),Hu.setAttribute("href",n);const e=Hu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){$u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Da(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Hu,$u=null;const Zo=new o.OlP("TRANSITION_ID"),ac=[{provide:o.ip1,useFactory:function lf(n,e,t){return()=>{t.get(o.CZH).donePromise.then(()=>{const r=R(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[Zo,pe,o.zs3],multi:!0}];let cf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ls=new o.OlP("EventManagerPlugins");let qs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ls),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class ci{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=R().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let uc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n extends uc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Gu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Gu))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Gu(n){R().remove(n)}const Ha={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gi=/%COMP%/g;function za(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?za(n,i,t):(i=i.replace(Gi,n),t.push(i))}return t}function lc(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ko=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Za(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case o.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new dg(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case o.ifc.ShadowDom:return new hf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=za(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(qs),o.LFG(zs),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Za{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ha[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Ws(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Ws(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Ha[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Ha[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(o.JOm.DashCase|o.JOm.Important)?e.style.setProperty(t,r,i&o.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&o.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,lc(r)):this.eventManager.addEventListener(e,t,lc(r))}}function Ws(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class dg extends Za{constructor(e,t,r,i){super(e),this.component=r;const u=za(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function qa(n){return"_ngcontent-%COMP%".replace(Gi,n)}(i+"-"+r.id),this.hostAttr=function Zs(n){return"_nghost-%COMP%".replace(Gi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class hf extends Za{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=za(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const f=document.createElement("style");f.textContent=u[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ks=(()=>{class n extends ci{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Qo=["alt","control","meta","shift"],ir={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ka=(()=>{class n extends ci{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Qo.forEach(v=>{const D=r.indexOf(v);D>-1&&(r.splice(D,1),c+=v+".")}),c+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=i,m.fullKey=c,m}static matchEventFullKeyCode(t,r){let i=ir[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Qo.forEach(c=>{c!==i&&(0,Wa[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const hc=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function Jo(){sc.makeCurrent()},multi:!0},{provide:pe,useFactory:function zu(){return(0,o.RDi)(document),document},deps:[]}]),Bd=new o.OlP(""),yn=[{provide:o.rWj,useClass:class $a{addToWindow(e){o.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},o.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(r=>{const i=o.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const f=function(m){c=c||m,u--,0==u&&r(c)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],jd=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function sr(){return new o.qLn},deps:[]},{provide:ls,useClass:Ks,multi:!0,deps:[pe,o.R0b,o.Lbi]},{provide:ls,useClass:Ka,multi:!0,deps:[pe]},{provide:Ko,useClass:Ko,deps:[qs,zs,o.AFp]},{provide:o.FYo,useExisting:Ko},{provide:uc,useExisting:zs},{provide:zs,useClass:zs,deps:[pe]},{provide:qs,useClass:qs,deps:[ls,o.R0b]},{provide:class Kl{},useClass:cf,deps:[]},[]];let Ya=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:o.AFp,useValue:t.appId},{provide:Zo,useExisting:o.AFp},ac]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Bd,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...jd,...yn],imports:[Td,o.hGG]}),n})(),ff=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function fg(){return new ff((0,o.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Ja=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):o.LFG(Xo),r},providedIn:"root"}),n})(),Xo=(()=>{class n extends Ja{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case o.q3G.NONE:return r;case o.q3G.HTML:return(0,o.qzn)(r,"HTML")?(0,o.z3N)(r):(0,o.EiD)(this._doc,String(r)).toString();case o.q3G.STYLE:return(0,o.qzn)(r,"Style")?(0,o.z3N)(r):r;case o.q3G.SCRIPT:if((0,o.qzn)(r,"Script"))return(0,o.z3N)(r);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(r,"URL")?(0,o.z3N)(r):(0,o.mCW)(String(r));case o.q3G.RESOURCE_URL:if((0,o.qzn)(r,"ResourceURL"))return(0,o.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,o.JVY)(t)}bypassSecurityTrustStyle(t){return(0,o.L6k)(t)}bypassSecurityTrustScript(t){return(0,o.eBb)(t)}bypassSecurityTrustUrl(t){return(0,o.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,o.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Xa(n){return new Xo(n.get(pe))}(o.LFG(o.zs3)),r},providedIn:"root"}),n})();var mn=U(8996),xr=U(9751);const{isArray:mg}=Array,{getPrototypeOf:hi,prototype:eu,keys:fi}=Object;function _c(n){if(1===n.length){const e=n[0];if(mg(e))return{args:e,keys:null};if(function Zd(n){return n&&"object"==typeof n&&hi(n)===eu}(e)){const t=fi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ts=U(8421),Ds=U(7669),Gn=U(5403),ht=U(4004);const{isArray:tu}=Array;function nu(n){return(0,ht.U)(e=>function ar(n,e){return tu(e)?n(...e):n(e)}(n,e))}function yc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Ys=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Eo=(()=>{class n extends Ys{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const kr=new o.OlP("NgValueAccessor"),As={provide:kr,useExisting:(0,o.Gpc)(()=>zi),multi:!0},ea=new o.OlP("CompositionEventMode");let zi=(()=>{class n extends Ys{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function wc(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(ea,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[o._Bn([As]),o.qOj]}),n})();function pi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function ru(n){return null!=n&&"number"==typeof n.length}const vr=new o.OlP("NgValidators"),xs=new o.OlP("NgAsyncValidators"),Cc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Or{static min(e){return function ta(n){return e=>{if(pi(e.value)||pi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function el(n){return e=>{if(pi(e.value)||pi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return _f(e)}static requiredTrue(e){return function bc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ec(n){return pi(n.value)||Cc.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function yf(n){return e=>pi(e.value)||!ru(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return iu(e)}static pattern(e){return function tl(n){if(!n)return Qs;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(pi(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Tc(e)}static composeAsync(e){return sa(e)}}function _f(n){return pi(n.value)?{required:!0}:null}function iu(n){return e=>ru(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Qs(n){return null}function Io(n){return null!=n}function su(n){return(0,o.QGY)(n)?(0,mn.D)(n):n}function nl(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function na(n,e){return e.map(t=>t(n))}function ra(n){return n.map(e=>function Ic(n){return!n.validate}(e)?e:t=>e.validate(t))}function Tc(n){if(!n)return null;const e=n.filter(Io);return 0==e.length?null:function(t){return nl(na(t,e))}}function ia(n){return null!=n?Tc(ra(n)):null}function sa(n){if(!n)return null;const e=n.filter(Io);return 0==e.length?null:function(t){return function Xu(...n){const e=(0,Ds.jO)(n),{args:t,keys:r}=_c(n),i=new xr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const f=new Array(c);let m=c,v=c;for(let D=0;D<c;D++){let A=!1;(0,Ts.Xf)(t[D]).subscribe((0,Gn.x)(u,L=>{A||(A=!0,v--),f[D]=L},()=>m--,void 0,()=>{(!m||!A)&&(v||u.next(r?yc(r,f):f),u.complete())}))}});return e?i.pipe(nu(e)):i}(na(t,e).map(su)).pipe((0,ht.U)(nl))}}function rl(n){return null!=n?sa(ra(n)):null}function yg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function vg(n){return n._rawValidators}function oa(n){return n._rawAsyncValidators}function Kd(n){return n?Array.isArray(n)?n:[n]:[]}function Js(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dc(n,e){const t=Kd(e);return Kd(n).forEach(i=>{Js(t,i)||t.push(i)}),t}function vf(n,e){return Kd(e).filter(t=>!Js(n,t))}class il{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ia(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yn extends il{get formDirective(){return null}get path(){return null}}class Ss extends il{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class cs{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ai=(()=>{class n extends cs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ss,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[o.qOj]}),n})(),wr=(()=>{class n extends cs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Yn,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[o.qOj]}),n})();const hs="VALID",ei="INVALID",Rr="PENDING",la="DISABLED";function Cf(n){return(Mc(n)?n.validators:n)||null}function Yd(n){return Array.isArray(n)?ia(n):n||null}function xc(n,e){return(Mc(e)?e.asyncValidators:n)||null}function Sc(n){return Array.isArray(n)?rl(n):n||null}function Mc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Pc(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new o.vHH(1e3,"");if(!r[t])throw new o.vHH(1001,"")}function Qd(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new o.vHH(1002,"")})}class Jd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Yd(this._rawValidators),this._composedAsyncValidatorFn=Sc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===hs}get invalid(){return this.status===ei}get pending(){return this.status==Rr}get disabled(){return this.status===la}get enabled(){return this.status!==la}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Yd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Sc(e)}addValidators(e){this.setValidators(Dc(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dc(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vf(e,this._rawAsyncValidators))}hasValidator(e){return Js(this._rawValidators,e)}hasAsyncValidator(e){return Js(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Rr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=la,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=hs,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===hs||this.status===Rr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?la:hs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Rr,this._hasOwnPendingAsyncValidator=!0;const t=su(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?la:this.errors?ei:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rr)?Rr:this._anyControlsHaveStatus(ei)?ei:hs}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class sl extends Jd{constructor(e,t,r){super(Cf(t),xc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Qd(this,0,e),Object.keys(e).forEach(r=>{Pc(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class bf extends sl{}function kc(n,e){return[...e.path,n]}function w(n,e){M(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Q(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ge(n,e)})}(n,e),function nt(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function he(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ge(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function b(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function p(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),O(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function M(n,e){const t=vg(n);null!==e.validator?n.setValidators(yg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=oa(n);null!==e.asyncValidator?n.setAsyncValidators(yg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_(e._rawValidators,i),_(e._rawAsyncValidators,i)}function O(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=vg(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=oa(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return _(e._rawValidators,r),_(e._rawAsyncValidators,r),t}function Ge(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vt(n,e){M(n,e)}function al(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function If(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Oc(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===zi?t=u:function eh(n){return Object.getPrototypeOf(n.constructor)===Eo}(u)?r=u:i=u}),i||r||t||null}const To={provide:Yn,useExisting:(0,o.Gpc)(()=>Do)},ou=(()=>Promise.resolve())();let Do=(()=>{class n extends Yn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new sl({},ia(t),rl(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ou.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),w(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ou.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ou.then(()=>{const r=this._findContainer(t.path),i=new sl({});vt(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ou.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ou.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,If(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(vr,10),o.Y36(xs,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([To]),o.qOj]}),n})();function th(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function j_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ul=class extends Jd{constructor(e=null,t,r){super(Cf(t),xc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=j_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){th(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){th(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){j_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},q_={provide:Ss,useExisting:(0,o.Gpc)(()=>da)},Eg=(()=>Promise.resolve())();let da=(()=>{class n extends Ss{constructor(t,r,i,u,c){super(),this._changeDetectorRef=c,this.control=new ul,this._registered=!1,this.update=new o.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Oc(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),al(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){w(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Eg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,o.D6c)(r);Eg.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?kc(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Yn,9),o.Y36(vr,10),o.Y36(xs,10),o.Y36(kr,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([q_]),o.qOj,o.TTD]}),n})(),Ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const eD={provide:kr,useExisting:(0,o.Gpc)(()=>Ig),multi:!0};let Ig=(()=>{class n extends Eo{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([eD]),o.qOj]}),n})(),z_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const K_=new o.OlP("NgModelWithFormControlWarning"),iD={provide:Yn,useExisting:(0,o.Gpc)(()=>cl)};let cl=(()=>{class n extends Yn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(O(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return w(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){p(t.control||null,t,!1),function Tf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,If(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(p(r||null,t),(n=>n instanceof ul)(i)&&(w(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);vt(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function un(n,e){return O(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){M(this.form,this),this._oldForm&&O(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(vr,10),o.Y36(xs,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([iD]),o.qOj,o.TTD]}),n})();const Bw={provide:Ss,useExisting:(0,o.Gpc)(()=>nh)};let nh=(()=>{class n extends Ss{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Oc(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),al(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return kc(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(o.Y36(Yn,13),o.Y36(vr,10),o.Y36(xs,10),o.Y36(kr,10),o.Y36(K_,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([Bw]),o.qOj,o.TTD]}),n})();const Nc={provide:kr,useExisting:(0,o.Gpc)(()=>Ag),multi:!0};function jw(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ag=(()=>{class n extends Eo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=jw(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function oD(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&o.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Nc]),o.qOj]}),n})(),$w=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Ag,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const aD={provide:kr,useExisting:(0,o.Gpc)(()=>Q_),multi:!0};function ha(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Q_=(()=>{class n extends Eo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let f=0;f<c.length;f++){const v=this._getOptionValue(c[f].value);i.push(v)}}else{const c=r.options;for(let f=0;f<c.length;f++){const m=c[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function rh(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([aD]),o.qOj]}),n})(),Hw=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ha(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ha(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Q_,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Rc=(()=>{class n{constructor(){this._validator=Qs}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Qs,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const lD={provide:vr,useExisting:(0,o.Gpc)(()=>xi),multi:!0};let xi=(()=>{class n extends Rc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=t=>_f}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([lD]),o.qOj]}),n})();const ak={provide:vr,useExisting:(0,o.Gpc)(()=>Qw),multi:!0};let Qw=(()=>{class n extends Rc{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function Gw(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>iu(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([ak]),o.qOj]}),n})(),Jw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[z_]}),n})(),hD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Jw]}),n})(),Xw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:K_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Jw]}),n})();class eC extends Jd{constructor(e,t,r){super(Cf(t),xc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Qd(this,0,e),e.forEach((r,i)=>{Pc(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function ty(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let xf=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return ty(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new sl(i,u)}record(t,r=null){const i=this._reduceControls(t);return new bf(i,r)}control(t,r,i){let u={};return this.useNonNullable?(ty(r)?u=r:(u.validators=r,u.asyncValidators=i),new ul(t,{...u,nonNullable:!0})):new ul(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new eC(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ul||t instanceof Jd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:Xw}),n})();class tC{}const Ao="*";function gD(n,e){return{type:7,name:n,definitions:e,options:{}}}function nC(n,e=null){return{type:4,styles:e,timings:n}}function rC(n,e=null){return{type:2,steps:n,options:e}}function Sf(n){return{type:6,styles:n,offset:null}}function iC(n,e,t){return{type:0,name:n,styles:e,options:t}}function sh(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function ry(n){Promise.resolve().then(n)}class oh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ry(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Mg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?ry(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Pg(n){return new o.vHH(3e3,!1)}function FD(){return typeof window<"u"&&typeof window.document<"u"}function Ng(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function au(n){switch(n.length){case 0:return new oh;case 1:return n[0];default:return new Mg(n)}}function Rg(n,e,t,r,i=new Map,u=new Map){const c=[],f=[];let m=-1,v=null;if(r.forEach(D=>{const A=D.get("offset"),L=A==m,j=L&&v||new Map;D.forEach((z,ee)=>{let oe=ee,Ue=z;if("offset"!==ee)switch(oe=e.normalizePropertyName(oe,c),Ue){case"!":Ue=i.get(ee);break;case Ao:Ue=u.get(ee);break;default:Ue=e.normalizeStyleValue(ee,oe,Ue,c)}j.set(oe,Ue)}),L||f.push(j),v=j,m=A}),c.length)throw function SD(n){return new o.vHH(3502,!1)}();return f}function kf(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&uy(t,"start",n)));break;case"done":n.onDone(()=>r(t&&uy(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&uy(t,"destroy",n)))}}function uy(n,e,t){const u=Of(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function Of(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function gi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function hC(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ly=(n,e)=>!1,fC=(n,e,t)=>[],pC=null;function cy(n){const e=n.parentNode||n.host;return e===pC?null:e}(Ng()||typeof Element<"u")&&(FD()?(pC=(()=>document.documentElement)(),ly=(n,e)=>{for(;e;){if(e===n)return!0;e=cy(e)}return!1}):ly=(n,e)=>n.contains(e),fC=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Xs=null,fa=!1;const UD=ly,dy=fC;let hy=(()=>{class n{validateStyleProperty(t){return function VD(n){Xs||(Xs=function mk(){return typeof document<"u"?document.body:null}()||{},fa=!!Xs.style&&"WebkitAppearance"in Xs.style);let e=!0;return Xs.style&&!function LD(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Xs.style,!e&&fa&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Xs.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return UD(t,r)}getParentElement(t){return cy(t)}query(t,r,i){return dy(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,f=[],m){return new oh(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),gC=(()=>{class n{}return n.NOOP=new hy,n})();const fy="ng-enter",Fg="ng-leave",fs="ng-trigger",Lg=".ng-trigger",py="ng-animating",gy=".ng-animating";function uu(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:my(parseFloat(e[1]),e[2])}function my(n,e){return"s"===e?1e3*n:n}function Vg(n,e,t){return n.hasOwnProperty("duration")?n:function vC(n,e,t){let i,u=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(Pg()),{duration:0,delay:0,easing:""};i=my(parseFloat(f[1]),f[2]);const m=f[3];null!=m&&(u=my(parseFloat(m),f[4]));const v=f[5];v&&(c=v)}else i=n;if(!t){let f=!1,m=e.length;i<0&&(e.push(function aC(){return new o.vHH(3100,!1)}()),f=!0),u<0&&(e.push(function uC(){return new o.vHH(3101,!1)}()),f=!0),f&&e.splice(m,0,Pg())}return{duration:i,delay:u,easing:c}}(n,e,t)}function Nf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function wC(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function lu(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function _y(n,e,t){return t?e+":"+t+";":""}function yy(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=_y(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_y(0,Uc(t),n.style[t]));n.setAttribute("style",e)}function pa(n,e,t){n.style&&(e.forEach((r,i)=>{const u=Bg(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),Ng()&&yy(n))}function Vc(n,e){n.style&&(e.forEach((t,r)=>{const i=Bg(r);n.style[i]=""}),Ng()&&yy(n))}function lh(n){return Array.isArray(n)?1==n.length?n[0]:rC(n):n}const Ug=new RegExp("{{\\s*(.+?)\\s*}}","g");function CC(n){let e=[];if("string"==typeof n){let t;for(;t=Ug.exec(n);)e.push(t[1]);Ug.lastIndex=0}return e}function Rf(n,e,t){const r=n.toString(),i=r.replace(Ug,(u,c)=>{let f=e[c];return null==f&&(t.push(function vD(n){return new o.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function vy(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bC=/-+([a-z0-9])/g;function Bg(n){return n.replace(bC,(...e)=>e[1].toUpperCase())}function Uc(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function iy(n){return new o.vHH(3004,!1)}()}}function EC(n,e){return window.getComputedStyle(n)[e]}function GD(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function TC(n,e,t){if(":"==n[0]){const m=function jg(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function AD(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function DD(n){return new o.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(DC(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(DC(c,i))}(r,t,e)):t.push(n),t}const $g=new Set(["true","1"]),Ff=new Set(["false","0"]);function DC(n,e){const t=$g.has(n)||Ff.has(n),r=$g.has(e)||Ff.has(e);return(i,u)=>{let c="*"==n||n==i,f="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?$g.has(n):Ff.has(n)),!f&&r&&"boolean"==typeof u&&(f=u?$g.has(e):Ff.has(e)),c&&f}}const qD=new RegExp("s*:selfs*,?","g");function Ey(n,e,t,r){return new SC(n).build(e,t,r)}class SC{constructor(e){this._driver=e}build(e,t,r){const i=new PC(t);return this._resetContextStyleTimingState(i),Wi(this,lh(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function wD(){return new o.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const m=f,v=m.name;v.toString().split(/\s*,\s*/).forEach(D=>{m.name=D,u.push(this.visitState(m,t))}),m.name=v}else if(1==f.type){const m=this.visitTransition(f,t);r+=m.queryCount,i+=m.depCount,c.push(m)}else t.errors.push(function sy(){return new o.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(m=>{CC(m).forEach(v=>{c.hasOwnProperty(v)||u.add(v)})})}),u.size&&(vy(u.values()),t.errors.push(function Og(n,e){return new o.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Wi(this,lh(e.animation),t);return{type:1,matchers:GD(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:du(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Wi(this,r,t)),options:du(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const f=Wi(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:u,options:du(e.options)}}visitAnimate(e,t){const r=function vk(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Ty(Vg(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=Ty(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=Vg(t,e);return Ty(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:Sf({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,f=!1;if(!c){f=!0;const v={};r.easing&&(v.easing=r.easing),c=Sf(v)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(c,t);m.isEmptyStep=f,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===Ao?r.push(f):t.errors.push(new o.vHH(3002,!1)):r.push(wC(f));let u=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!u))for(let m of f.values())if(m.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,m)=>{const v=t.collectedStyles.get(t.currentQuerySelector),D=v.get(m);let A=!0;D&&(u!=i&&u>=D.startTime&&i<=D.endTime&&(t.errors.push(function oy(n,e,t,r,i){return new o.vHH(3010,!1)}()),A=!1),u=D.startTime),A&&v.set(m,{startTime:u,endTime:i}),t.options&&function jD(n,e,t){const r=e.params||{},i=CC(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function Fc(n){return new o.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function bD(){return new o.vHH(3011,!1)}()),r;let u=0;const c=[];let f=!1,m=!1,v=0;const D=e.steps.map(Ue=>{const ze=this._makeStyleAst(Ue,t);let je=null!=ze.offset?ze.offset:function Iy(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ze.styles),Ye=0;return null!=je&&(u++,Ye=ze.offset=je),m=m||Ye<0||Ye>1,f=f||Ye<v,v=Ye,c.push(Ye),ze});m&&t.errors.push(function ED(){return new o.vHH(3012,!1)}()),f&&t.errors.push(function lC(){return new o.vHH(3200,!1)}());const A=e.steps.length;let L=0;u>0&&u<A?t.errors.push(function ah(){return new o.vHH(3202,!1)}()):0==u&&(L=1/(A-1));const j=A-1,z=t.currentTime,ee=t.currentAnimateTimings,oe=ee.duration;return D.forEach((Ue,ze)=>{const je=L>0?ze==j?1:L*ze:c[ze],Ye=je*oe;t.currentTime=z+ee.delay+Ye,ee.duration=Ye,this._validateStyleAst(Ue,t),Ue.offset=je,r.styles.push(Ue)}),r}visitReference(e,t){return{type:8,animation:Wi(this,lh(e.animation),t),options:du(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:du(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:du(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function zD(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(qD,"")),n=n.replace(/@\*/g,Lg).replace(/@\w+/g,t=>Lg+"-"+t.slice(1)).replace(/:animating/g,gy),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,gi(t.collectedStyles,t.currentQuerySelector,new Map);const f=Wi(this,lh(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:du(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function ID(){return new o.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Vg(e.timings,t.errors,!0);return{type:12,animation:Wi(this,lh(e.animation),t),timings:r,options:null}}}class PC{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function du(n){return n?(n=Nf(n)).params&&(n.params=function MC(n){return n?Nf(n):null}(n.params)):n={},n}function Ty(n,e,t){return{duration:n,delay:e,easing:t}}function kC(n,e,t,r,i,u,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:f}}class hu{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Hg=new RegExp(":enter","g"),RC=new RegExp(":leave","g");function Dy(n,e,t,r,i,u=new Map,c=new Map,f,m,v=[]){return(new Ay).buildKeyframes(n,e,t,r,i,u,c,f,m,v)}class Ay{buildKeyframes(e,t,r,i,u,c,f,m,v,D=[]){v=v||new hu;const A=new Lf(e,t,v,i,u,D,[]);A.options=m;const L=m.delay?uu(m.delay):0;A.currentTimeline.delayNextStep(L),A.currentTimeline.setStyles([c],null,A.errors,m),Wi(this,r,A);const j=A.timelines.filter(z=>z.containsAnimation());if(j.length&&f.size){let z;for(let ee=j.length-1;ee>=0;ee--){const oe=j[ee];if(oe.element===t){z=oe;break}}z&&!z.allowOnlyTimelineStyles()&&z.setStyles([f],null,A.errors,m)}return j.length?j.map(z=>z.buildKeyframes()):[kC(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const u=i?.delay;if(u){const c="number"==typeof u?u:uu(Rf(u,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?uu(r.duration):null,f=null!=r.delay?uu(r.delay):null;return 0!==c&&e.forEach(m=>{const v=t.appendInstructionToTimeline(m,c,f);u=Math.max(u,v.duration+v.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Wi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=eo);const c=uu(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Wi(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?uu(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);u&&f.delayNextStep(u),Wi(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Vg(t.params?Rf(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(m=>{f.forwardTime((m.offset||0)*u),f.setStyles(m.styles,m.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?uu(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=eo);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let m=null;f.forEach((v,D)=>{t.currentQueryIndex=D;const A=t.createSubContext(e.options,v);u&&A.delayNextStep(u),v===t.element&&(m=A.currentTimeline),Wi(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),f=c*(t.currentQueryTotal-1);let m=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":m=f-m;break;case"full":m=r.currentStaggerTime}const D=t.currentTimeline;m&&D.delayNextStep(m);const A=D.currentTime;Wi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const eo={};class Lf{constructor(e,t,r,i,u,c,f,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eo,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Vf(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=uu(r.duration)),null!=r.delay&&(i.delay=uu(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=Rf(u[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new Lf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=eo,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new xy(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(Hg,"."+this._enterClassName)).replace(RC,"."+this._leaveClassName);let v=this._driver.query(this.element,e,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),f.push(...v)}return!u&&0==f.length&&c.push(function TD(n){return new o.vHH(3014,!1)}()),f}}class Vf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Vf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ao),this._currentKeyframe.set(t,Ao);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function FC(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,Ao)}else lu(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,m]of c){const v=Rf(m,u,r);this._pendingStyles.set(f,v),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Ao),this._updateStyle(f,v)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,m)=>{const v=lu(f,new Map,this._backFill);v.forEach((D,A)=>{"!"===D?e.add(A):D===Ao&&t.add(A)}),r||v.set("offset",m/this.duration),i.push(v)});const u=e.size?vy(e.values()):[],c=t.size?vy(t.values()):[];if(r){const f=i[0],m=new Map(f);f.set("offset",0),m.set("offset",1),i=[f,m]}return kC(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class xy extends Vf{constructor(e,t,r,i,u,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,f=t/c,m=lu(e[0]);m.set("offset",0),u.push(m);const v=lu(e[0]);v.set("offset",ZD(f)),u.push(v);const D=e.length-1;for(let A=1;A<=D;A++){let L=lu(e[A]);const j=L.get("offset");L.set("offset",ZD((t+j*r)/c)),u.push(L)}r=c,t=0,i="",e=u}return kC(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ZD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class ch{}const My=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Py extends ch{normalizePropertyName(e,t){return Bg(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(My.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function kg(n,e){return new o.vHH(3005,!1)}())}return c+u}}function Gg(n,e,t,r,i,u,c,f,m,v,D,A,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:f,queriedElements:m,preStyleProps:v,postStyleProps:D,totalTime:A,errors:L}}const LC={};class VC{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function WD(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,f,m,v,D){const A=[],L=this.ast.options&&this.ast.options.params||LC,z=this.buildStyles(r,f&&f.params||LC,A),ee=m&&m.params||LC,oe=this.buildStyles(i,ee,A),Ue=new Set,ze=new Map,je=new Map,Ye="void"===i,Ft={params:KD(ee,L),delay:this.ast.options?.delay},Bt=D?[]:Dy(e,t,this.ast.animation,u,c,z,oe,Ft,v,A);let Cn=0;if(Bt.forEach(ws=>{Cn=Math.max(ws.duration+ws.delay,Cn)}),A.length)return Gg(t,this._triggerName,r,i,Ye,z,oe,[],[],ze,je,Cn,A);Bt.forEach(ws=>{const gd=ws.element,gV=gi(ze,gd,new Set);ws.preStyleProps.forEach(ig=>gV.add(ig));const Rw=gi(je,gd,new Set);ws.postStyleProps.forEach(ig=>Rw.add(ig)),gd!==t&&Ue.add(gd)});const Sr=vy(Ue.values());return Gg(t,this._triggerName,r,i,Ye,z,oe,Bt,Sr,ze,je,Cn)}}function KD(n,e){const t=Nf(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class UC{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Nf(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,f)=>{c&&(c=Rf(c,i,t));const m=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,m,c,t),r.set(m,c)})}),r}}class YD{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new UC(i.style,i.options&&i.options.params||{},r))}),ky(this.states,"true","1"),ky(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new VC(e,i,this.states))}),this.fallbackTransition=function bk(n,e,t){return new VC(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function ky(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const BC=new hu;class QD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=Ey(this._driver,t,r,[]);if(r.length)throw function dC(n){return new o.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=Rg(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const f=new Map;if(u?(c=Dy(this._driver,t,u,fy,Fg,new Map,new Map,r,BC,i),c.forEach(D=>{const A=gi(f,D.element,new Map);D.postStyleProps.forEach(L=>A.set(L,null))})):(i.push(function hk(){return new o.vHH(3300,!1)}()),c=[]),i.length)throw function MD(n){return new o.vHH(3504,!1)}();f.forEach((D,A)=>{D.forEach((L,j)=>{D.set(j,this._driver.computeStyle(A,j,Ao))})});const v=au(c.map(D=>{const A=f.get(D.element);return this._buildPlayer(D,new Map,A)}));return this._playersById.set(e,v),v.onDestroy(()=>this.destroy(e)),this.players.push(v),v}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Mf(n){return new o.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=Of(t,"","","");return kf(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const qg="ng-animate-queued",jC="ng-animate-disabled",Ak=[],JD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},xk={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},So="__ng_removed";class $C{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Oy(n){return n??null}(r?e.value:e),r){const u=Nf(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const to="void",Uf=new $C(to);class XD{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ps(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function PD(n,e){return new o.vHH(3302,!1)}();if(null==r||0==r.length)throw function uh(n){return new o.vHH(3303,!1)}();if(!function dl(n){return"start"==n||"done"==n}(r))throw function Pf(n,e){return new o.vHH(3400,!1)}();const u=gi(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const f=gi(this._engine.statesByElement,e,new Map);return f.has(t)||(Ps(e,fs),Ps(e,fs+"-"+t),f.set(t,Uf)),()=>{this._engine.afterFlush(()=>{const m=u.indexOf(c);m>=0&&u.splice(m,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function kD(n){return new o.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new Bf(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Ps(e,fs),Ps(e,fs+"-"+t),this._engine.statesByElement.set(e,f=new Map));let m=f.get(t);const v=new $C(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),f.set(t,v),m||(m=Uf),v.value!==to&&m.value===v.value){if(!function Ry(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(m.params,v.params)){const ee=[],oe=u.matchStyles(m.value,m.params,ee),Ue=u.matchStyles(v.value,v.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Vc(e,oe),pa(e,Ue)})}return}const L=gi(this._engine.playersByElement,e,[]);L.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let j=u.matchTransition(m.value,v.value,e,v.params),z=!1;if(!j){if(!i)return;j=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:j,fromState:m,toState:v,player:c,isFallbackTransition:z}),z||(Ps(e,qg),c.onStart(()=>{dh(e,qg)})),c.onDone(()=>{let ee=this.players.indexOf(c);ee>=0&&this.players.splice(ee,1);const oe=this._engine.playersByElement.get(e);if(oe){let Ue=oe.indexOf(c);Ue>=0&&oe.splice(Ue,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Lg,!0);r.forEach(i=>{if(i[So])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const f=[];if(u.forEach((m,v)=>{if(c.set(v,m.value),this._triggers.has(v)){const D=this.trigger(e,v,to,i);D&&f.push(D)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&au(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const m=this._triggers.get(c).fallbackTransition,v=r.get(c)||Uf,D=new $C(to),A=new Bf(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:m,fromState:v,toState:D,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[So];(!u||u===JD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ps(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(f=>{if(f.name==r.triggerName){const m=Of(u,r.triggerName,r.fromState.value,r.toState.value);m._data=e,kf(r.player,f.phase,m,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class HC{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new XD(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const m=i.get(f);if(m){const v=r.indexOf(m);r.splice(v+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(zg(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!zg(t))return;const u=t[So];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ps(e,jC)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dh(e,jC))}removeNode(e,t,r,i){if(zg(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[So]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return zg(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,Lg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,gy,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return au(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[So];if(t&&t.setForRemoval){if(e[So]=JD,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jC)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ps(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?au(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function fk(n){return new o.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new hu,i=[],u=new Map,c=[],f=new Map,m=new Map,v=new Map,D=new Set;this.disabledNodes.forEach(Et=>{D.add(Et);const jt=this.driver.query(Et,".ng-animate-queued",!0);for(let Ht=0;Ht<jt.length;Ht++)D.add(jt[Ht])});const A=this.bodyNode,L=Array.from(this.statesByElement.keys()),j=zC(L,this.collectedEnterElements),z=new Map;let ee=0;j.forEach((Et,jt)=>{const Ht=fy+ee++;z.set(jt,Ht),Et.forEach(An=>Ps(An,Ht))});const oe=[],Ue=new Set,ze=new Set;for(let Et=0;Et<this.collectedLeaveElements.length;Et++){const jt=this.collectedLeaveElements[Et],Ht=jt[So];Ht&&Ht.setForRemoval&&(oe.push(jt),Ue.add(jt),Ht.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(An=>Ue.add(An)):ze.add(jt))}const je=new Map,Ye=zC(L,Array.from(Ue));Ye.forEach((Et,jt)=>{const Ht=Fg+ee++;je.set(jt,Ht),Et.forEach(An=>Ps(An,Ht))}),e.push(()=>{j.forEach((Et,jt)=>{const Ht=z.get(jt);Et.forEach(An=>dh(An,Ht))}),Ye.forEach((Et,jt)=>{const Ht=je.get(jt);Et.forEach(An=>dh(An,Ht))}),oe.forEach(Et=>{this.processLeaveNode(Et)})});const Ft=[],Bt=[];for(let Et=this._namespaceList.length-1;Et>=0;Et--)this._namespaceList[Et].drainQueuedTransitions(t).forEach(Ht=>{const An=Ht.player,Vi=Ht.element;if(Ft.push(An),this.collectedEnterElements.length){const Cs=Vi[So];if(Cs&&Cs.setForMove){if(Cs.previousTriggersValues&&Cs.previousTriggersValues.has(Ht.triggerName)){const sg=Cs.previousTriggersValues.get(Ht.triggerName),Ia=this.statesByElement.get(Ht.element);if(Ia&&Ia.has(Ht.triggerName)){const QT=Ia.get(Ht.triggerName);QT.value=sg,Ia.set(Ht.triggerName,QT)}}return void An.destroy()}}const Ul=!A||!this.driver.containsElement(A,Vi),Bo=je.get(Vi),Jh=z.get(Vi),Mr=this._buildInstruction(Ht,r,Jh,Bo,Ul);if(Mr.errors&&Mr.errors.length)return void Bt.push(Mr);if(Ul)return An.onStart(()=>Vc(Vi,Mr.fromStyles)),An.onDestroy(()=>pa(Vi,Mr.toStyles)),void i.push(An);if(Ht.isFallbackTransition)return An.onStart(()=>Vc(Vi,Mr.fromStyles)),An.onDestroy(()=>pa(Vi,Mr.toStyles)),void i.push(An);const yV=[];Mr.timelines.forEach(Cs=>{Cs.stretchStartingKeyframe=!0,this.disabledNodes.has(Cs.element)||yV.push(Cs)}),Mr.timelines=yV,r.append(Vi,Mr.timelines),c.push({instruction:Mr,player:An,element:Vi}),Mr.queriedElements.forEach(Cs=>gi(f,Cs,[]).push(An)),Mr.preStyleProps.forEach((Cs,sg)=>{if(Cs.size){let Ia=m.get(sg);Ia||m.set(sg,Ia=new Set),Cs.forEach((QT,rk)=>Ia.add(rk))}}),Mr.postStyleProps.forEach((Cs,sg)=>{let Ia=v.get(sg);Ia||v.set(sg,Ia=new Set),Cs.forEach((QT,rk)=>Ia.add(rk))})});if(Bt.length){const Et=[];Bt.forEach(jt=>{Et.push(function ND(n,e){return new o.vHH(3505,!1)}())}),Ft.forEach(jt=>jt.destroy()),this.reportError(Et)}const Cn=new Map,Sr=new Map;c.forEach(Et=>{const jt=Et.element;r.has(jt)&&(Sr.set(jt,jt),this._beforeAnimationBuild(Et.player.namespaceId,Et.instruction,Cn))}),i.forEach(Et=>{const jt=Et.element;this._getPreviousPlayers(jt,!1,Et.namespaceId,Et.triggerName,null).forEach(An=>{gi(Cn,jt,[]).push(An),An.destroy()})});const ws=oe.filter(Et=>jc(Et,m,v)),gd=new Map;qC(gd,this.driver,ze,v,Ao).forEach(Et=>{jc(Et,m,v)&&ws.push(Et)});const Rw=new Map;j.forEach((Et,jt)=>{qC(Rw,this.driver,new Set(Et),m,"!")}),ws.forEach(Et=>{const jt=gd.get(Et),Ht=Rw.get(Et);gd.set(Et,new Map([...Array.from(jt?.entries()??[]),...Array.from(Ht?.entries()??[])]))});const ig=[],mV=[],_V={};c.forEach(Et=>{const{element:jt,player:Ht,instruction:An}=Et;if(r.has(jt)){if(D.has(jt))return Ht.onDestroy(()=>pa(jt,An.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(An.totalTime),void i.push(Ht);let Vi=_V;if(Sr.size>1){let Bo=jt;const Jh=[];for(;Bo=Bo.parentNode;){const Mr=Sr.get(Bo);if(Mr){Vi=Mr;break}Jh.push(Bo)}Jh.forEach(Mr=>Sr.set(Mr,Vi))}const Ul=this._buildAnimation(Ht.namespaceId,An,Cn,u,Rw,gd);if(Ht.setRealPlayer(Ul),Vi===_V)ig.push(Ht);else{const Bo=this.playersByElement.get(Vi);Bo&&Bo.length&&(Ht.parentPlayer=au(Bo)),i.push(Ht)}}else Vc(jt,An.fromStyles),Ht.onDestroy(()=>pa(jt,An.toStyles)),mV.push(Ht),D.has(jt)&&i.push(Ht)}),mV.forEach(Et=>{const jt=u.get(Et.element);if(jt&&jt.length){const Ht=au(jt);Et.setRealPlayer(Ht)}}),i.forEach(Et=>{Et.parentPlayer?Et.syncPlayerEvents(Et.parentPlayer):Et.destroy()});for(let Et=0;Et<oe.length;Et++){const jt=oe[Et],Ht=jt[So];if(dh(jt,Fg),Ht&&Ht.hasAnimation)continue;let An=[];if(f.size){let Ul=f.get(jt);Ul&&Ul.length&&An.push(...Ul);let Bo=this.driver.query(jt,gy,!0);for(let Jh=0;Jh<Bo.length;Jh++){let Mr=f.get(Bo[Jh]);Mr&&Mr.length&&An.push(...Mr)}}const Vi=An.filter(Ul=>!Ul.destroyed);Vi.length?eA(this,jt,Vi):this.processLeaveNode(jt)}return oe.length=0,ig.forEach(Et=>{this.players.push(Et),Et.onDone(()=>{Et.destroy();const jt=this.players.indexOf(Et);this.players.splice(jt,1)}),Et.play()}),ig}elementContainsData(e,t){let r=!1;const i=t[So];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const m=!u||u==to;f.forEach(v=>{v.queued||!m&&v.triggerName!=i||c.push(v)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const v=m.element,D=v!==u,A=gi(r,v,[]);this._getPreviousPlayers(v,D,c,f,t.toState).forEach(j=>{const z=j.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),j.destroy(),A.push(j)})}Vc(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const f=t.triggerName,m=t.element,v=[],D=new Set,A=new Set,L=t.timelines.map(z=>{const ee=z.element;D.add(ee);const oe=ee[So];if(oe&&oe.removedBeforeQueried)return new oh(z.duration,z.delay);const Ue=ee!==m,ze=function Zg(n){const e=[];return Bc(n,e),e}((r.get(ee)||Ak).map(Cn=>Cn.getRealPlayer())).filter(Cn=>!!Cn.element&&Cn.element===ee),je=u.get(ee),Ye=c.get(ee),Ft=Rg(0,this._normalizer,0,z.keyframes,je,Ye),Bt=this._buildPlayer(z,Ft,ze);if(z.subTimeline&&i&&A.add(ee),Ue){const Cn=new Bf(e,f,ee);Cn.setRealPlayer(Bt),v.push(Cn)}return Bt});v.forEach(z=>{gi(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function GC(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,z.element,z))}),D.forEach(z=>Ps(z,py));const j=au(L);return j.onDestroy(()=>{D.forEach(z=>dh(z,py)),pa(m,t.toStyles)}),A.forEach(z=>{gi(i,z,[]).push(j)}),j}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new oh(e.duration,e.delay)}}class Bf{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new oh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>kf(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){gi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function zg(n){return n&&1===n.nodeType}function Ny(n,e){const t=n.style.display;return n.style.display=e??"none",t}function qC(n,e,t,r,i){const u=[];t.forEach(m=>u.push(Ny(m)));const c=[];r.forEach((m,v)=>{const D=new Map;m.forEach(A=>{const L=e.computeStyle(v,A,i);D.set(A,L),(!L||0==L.length)&&(v[So]=xk,c.push(v))}),n.set(v,D)});let f=0;return t.forEach(m=>Ny(m,u[f++])),c}function zC(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(f){if(!f)return 1;let m=u.get(f);if(m)return m;const v=f.parentNode;return m=t.has(v)?v:i.has(v)?1:c(v),u.set(f,m),m}return e.forEach(f=>{const m=c(f);1!==m&&t.get(m).push(f)}),t}function Ps(n,e){n.classList?.add(e)}function dh(n,e){n.classList?.remove(e)}function eA(n,e,t){au(t).onDone(()=>n.processLeaveNode(e))}function Bc(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Mg?Bc(r.players,e):e.push(r)}}function jc(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class hh{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new HC(e,t,r),this._timelineEngine=new QD(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const m=[],D=Ey(this._driver,u,m,[]);if(m.length)throw function cC(n,e){return new o.vHH(3404,!1)}();f=function Ck(n,e,t){return new YD(n,e,t)}(i,D,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=hC(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,f]=hC(r);return this._timelineEngine.listen(c,t,f,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ZC=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&pa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(pa(this._element,this._initialStyles),this._endStyles&&(pa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vc(this._element,this._endStyles),this._endStyles=null),pa(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Kg(n){let e=null;return n.forEach((t,r)=>{(function Fy(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Yg{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:EC(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class WC{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return UD(e,t)}getParentElement(e){return cy(e)}query(e,t,r){return dy(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(m.easing=u);const v=new Map,D=c.filter(j=>j instanceof Yg);(function $D(n,e){return 0===n||0===e})(r,i)&&D.forEach(j=>{j.currentSnapshot.forEach((z,ee)=>v.set(ee,z))});let A=function BD(n){return n.length?n[0]instanceof Map?n:n.map(e=>wC(e)):[]}(t).map(j=>lu(j));A=function wy(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(f=>c.set(f,EC(n,f)))}}return e}(e,A,v);const L=function Wg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Kg(e[0]),e.length>1&&(r=Kg(e[e.length-1]))):e instanceof Map&&(t=Kg(e)),t||r?new ZC(n,t,r):null}(e,A);return new Yg(e,A,m,L)}}let Ly=(()=>{class n extends tC{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?rC(t):t;return KC(this._renderer,null,r,"register",[i]),new tA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class tA extends class ny{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Sk(this._id,e,t||{},this._renderer)}}class Sk{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return KC(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function KC(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const YC="@.disabled";let QC=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const f=c?.parentNode(u);f&&c.removeChild(f,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let D=this._rendererCache.get(u);return D||(D=new Vy("",u,this.engine,()=>this._rendererCache.delete(u)),this._rendererCache.set(u,D)),D}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const m=D=>{Array.isArray(D)?D.forEach(m):this.engine.registerTrigger(c,f,t,D.name,D)};return r.data.animation.forEach(m),new nA(this,f,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,f]=u;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(hh),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Vy{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?u=>t.destroyNode(u):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==YC?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class nA extends Vy{constructor(e,t,r,i,u){super(t,r,i,u),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==YC?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function ks(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function JC(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let rA=(()=>{class n extends hh{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe),o.LFG(gC),o.LFG(ch),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Qg=[{provide:tC,useClass:Ly},{provide:ch,useFactory:function Mk(){return new Py}},{provide:hh,useClass:rA},{provide:o.FYo,useFactory:function iA(n,e,t){return new QC(n,e,t)},deps:[Ko,hh,o.R0b]}],Jg=[{provide:gC,useFactory:()=>new WC},{provide:o.QbO,useValue:"BrowserAnimations"},...Qg],XC=[{provide:gC,useClass:hy},{provide:o.QbO,useValue:"NoopAnimations"},...Qg];let sA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?XC:Jg}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:Jg,imports:[Ya]}),n})();function Ct(...n){const e=(0,Ds.yG)(n);return(0,mn.D)(n,e)}var Si=U(7579);class Mo extends Si.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const $f=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Hf=U(4671),ga=U(9672);function Xg(...n){const e=(0,Ds.yG)(n),t=(0,Ds.jO)(n),{args:r,keys:i}=_c(n);if(0===r.length)return(0,mn.D)([],e);const u=new xr.y(function aA(n,e,t=Hf.y){return r=>{tb(e,()=>{const{length:i}=n,u=new Array(i);let c=i,f=i;for(let m=0;m<i;m++)tb(e,()=>{const v=(0,mn.D)(n[m],e);let D=!1;v.subscribe((0,Gn.x)(r,A=>{u[m]=A,D||(D=!0,f--),f||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>yc(i,c):Hf.y));return t?u.pipe(nu(t)):u}function tb(n,e,t){n?(0,ga.f)(t,n,e):e()}var em=U(8189);function Uy(...n){return function nb(){return(0,em.J)(1)}()((0,mn.D)(n,(0,Ds.yG)(n)))}function rb(n){return new xr.y(e=>{(0,Ts.Xf)(n()).subscribe(e)})}var uA=U(9635),Gf=U(576);function qf(n,e){const t=(0,Gf.m)(n)?n:()=>n,r=i=>i.error(t());return new xr.y(e?i=>e.schedule(r,0,i):r)}var $c=U(515),zf=U(727),ti=U(4482);function fh(){return(0,ti.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class lA extends xr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ti.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zf.w0.EMPTY)}return e}refCount(){return fh()(this)}}function Cr(n,e){return(0,ti.e)((t,r)=>{let i=null,u=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Gn.x)(r,m=>{i?.unsubscribe();let v=0;const D=u++;(0,Ts.Xf)(n(m,D)).subscribe(i=(0,Gn.x)(r,A=>r.next(e?e(m,A,D,v++):A),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function tm(n){return n<=0?()=>$c.E:(0,ti.e)((e,t)=>{let r=0;e.subscribe((0,Gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zf(...n){const e=(0,Ds.yG)(n);return(0,ti.e)((t,r)=>{(e?Uy(n,t,e):Uy(n,t)).subscribe(r)})}function no(n,e){return(0,ti.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var Mi=U(5577);function Wf(n){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function nm(n=fu){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function fu(){return new $f}function ro(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((i,u)=>n(i,u,r)):Hf.y,tm(1),t?Wf(e):nm(()=>new $f))}function ma(n,e){return(0,Gf.m)(e)?(0,Mi.z)(n,e,1):(0,Mi.z)(n,1)}var Lr=U(8505);function hl(n){return(0,ti.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,c=>{u=(0,Ts.Xf)(n(c,hl(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function By(n,e,t,r,i){return(u,c)=>{let f=t,m=e,v=0;u.subscribe((0,Gn.x)(c,D=>{const A=v++;m=f?n(m,D,A):(f=!0,D),r&&c.next(m)},i&&(()=>{f&&c.next(m),c.complete()})))}}function ph(n,e){return(0,ti.e)(By(n,e,arguments.length>=2,!0))}function jy(n){return n<=0?()=>$c.E:(0,ti.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ib(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((i,u)=>n(i,u,r)):Hf.y,jy(1),t?Wf(e):nm(()=>new $f))}function Hc(n){return(0,ti.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ln="primary",rm=Symbol("RouteTitle");class dA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gh(n){return new dA(n)}function hA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],f=n[u];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function io(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!ob(n[i],e[i]))return!1;return!0}function ob(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function im(n){return Array.prototype.concat.apply([],n)}function ab(n){return n.length>0?n[n.length-1]:null}function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function fl(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,mn.D)(Promise.resolve(n)):Ct(n)}const sm={exact:function ub(n,e,t){if(!ni(n.segments,e.segments)||!Os(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ub(n.children[r],e.children[r],t))return!1;return!0},subset:om},pl={exact:function Yf(n,e){return io(n,e)},subset:function gA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ob(n[t],e[t]))},ignored:()=>!0};function pA(n,e,t){return sm[t.paths](n.root,e.root,t.matrixParams)&&pl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function om(n,e,t){return lb(n,e,e.segments,t)}function lb(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ni(i,t)||e.hasChildren()||!Os(i,t,r))}if(n.segments.length===t.length){if(!ni(n.segments,t)||!Os(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!om(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ni(n.segments,i)&&Os(n.segments,i,r)&&n.children[ln])&&lb(n.children[ln],e,u,r)}}function Os(n,e,t){return e.every((r,i)=>pl[t](n[i].parameters,r.parameters))}class Po{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gh(this.queryParams)),this._queryParamMap}toString(){return mh.serialize(this)}}class Rt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pu(this)}}class ko{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gh(this.parameters)),this._parameterMap}toString(){return qy(this)}}function ni(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Gc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new gl},providedIn:"root"}),n})();class gl{parse(e){const t=new gb(e);return new Po(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_a(e.root,!0)}`,r=function db(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gu(t)}=${gu(i)}`).join("&"):`${gu(t)}=${gu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _h(n){return encodeURI(n)}(e.fragment)}`:""}`}}const mh=new gl;function pu(n){return n.segments.map(e=>qy(e)).join("/")}function _a(n,e){if(!n.hasChildren())return pu(n);if(e){const t=n.children[ln]?_a(n.children[ln],!1):"",r=[];return mi(n.children,(i,u)=>{u!==ln&&r.push(`${u}:${_a(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Hy(n,e){let t=[];return mi(n.children,(r,i)=>{i===ln&&(t=t.concat(e(r,i)))}),mi(n.children,(r,i)=>{i!==ln&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===ln?[_a(n.children[ln],!1)]:[`${i}:${_a(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${pu(n)}/${t[0]}`:`${pu(n)}/(${t.join("//")})`}}function qc(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gu(n){return qc(n).replace(/%3B/gi,";")}function ml(n){return qc(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qf(n){return decodeURIComponent(n)}function Gy(n){return Qf(n.replace(/\+/g,"%20"))}function qy(n){return`${ml(n.path)}${function cb(n){return Object.keys(n).map(e=>`;${ml(e)}=${ml(n[e])}`).join("")}(n.parameters)}`}const hb=/^[^\/()?;=#]+/;function Jf(n){const e=n.match(hb);return e?e[0]:""}const fb=/^[^=?&#]+/,mA=/^[^&#]+/;class gb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ln]=new Rt(e,t)),r}parseSegment(){const e=Jf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new o.vHH(4009,!1);return this.capture(e),new ko(Qf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Jf(this.remaining);i&&(r=i,this.capture(r))}e[Qf(t)]=Qf(r)}parseQueryParam(e){const t=function pb(n){const e=n.match(fb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function _A(n){const e=n.match(mA);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Gy(t),u=Gy(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new o.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=ln);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[ln]:new Rt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new o.vHH(4011,!1)}}function zy(n){return n.segments.length>0?new Rt([],{[ln]:n}):n}function Xf(n){const e={};for(const r of Object.keys(n.children)){const u=Xf(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Zy(n){if(1===n.numberOfChildren&&n.children[ln]){const e=n.children[ln];return new Rt(n.segments.concat(e.segments),e.children)}return n}(new Rt(n.segments,e))}function mu(n){return n instanceof Po}function yA(n,e,t,r,i){if(0===t.length)return zc(e.root,e.root,e.root,r,i);const u=function Jy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return mi(u.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,u]},[]);return new lm(t,e,r)}(t);return u.toRoot()?zc(e.root,e.root,new Rt([],{}),r,i):function c(m){const v=function mb(n,e,t,r){if(n.isAbsolute)return new Zc(e.root,!0,0);if(-1===r)return new Zc(t,t===e.root,0);return function _b(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new o.vHH(4005,!1);i=r.segments.length}return new Zc(r,!1,i-u)}(t,r+(_l(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,m),D=v.processChildren?yh(v.segmentGroup,v.index,u.commands):cm(v.segmentGroup,v.index,u.commands);return zc(e.root,v.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function _l(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yl(n){return"object"==typeof n&&null!=n&&n.outlets}function zc(n,e,t,r,i){let c,u={};r&&mi(r,(m,v)=>{u[v]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),c=n===e?t:Qy(n,e,t);const f=zy(Xf(c));return new Po(f,u,i)}function Qy(n,e,t){const r={};return mi(n.children,(i,u)=>{r[u]=i===e?t:Qy(i,e,t)}),new Rt(n.segments,r)}class lm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_l(r[0]))throw new o.vHH(4003,!1);const i=r.find(yl);if(i&&i!==ab(r))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cm(n,e,t){if(n||(n=new Rt([],{})),0===n.segments.length&&n.hasChildren())return yh(n,e,t);const r=function vb(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],f=t[r];if(yl(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!tv(m,v,c))return u;r+=2}else{if(!tv(m,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Rt(n.segments.slice(0,r.pathIndex),{});return u.children[ln]=new Rt(n.segments.slice(r.pathIndex),n.children),yh(u,0,i)}return r.match&&0===i.length?new Rt(n.segments,{}):r.match&&!n.hasChildren()?ev(n,e,t):r.match?yh(n,0,i):ev(n,e,t)}function yh(n,e,t){if(0===t.length)return new Rt(n.segments,{});{const r=function yb(n){return yl(n[0])?n[0].outlets:{[ln]:n}}(t),i={};return mi(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=cm(n.children[c],e,u))}),mi(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Rt(n.segments,i)}}function ev(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(yl(u)){const m=vA(u.outlets);return new Rt(r,m)}if(0===i&&_l(t[0])){r.push(new ko(n.segments[e].path,wb(t[0]))),i++;continue}const c=yl(u)?u.outlets[ln]:`${u}`,f=i<t.length-1?t[i+1]:null;c&&f&&_l(f)?(r.push(new ko(c,wb(f))),i+=2):(r.push(new ko(c,{})),i++)}return new Rt(r,{})}function vA(n){const e={};return mi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ev(new Rt([],{}),0,t))}),e}function wb(n){const e={};return mi(n,(t,r)=>e[r]=`${t}`),e}function tv(n,e,t){return n==t.path&&io(e,t.parameters)}class Oo{constructor(e,t){this.id=e,this.url=t}}class dm extends Oo{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vl extends Oo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ep extends Oo{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nv extends Oo{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cb extends Oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bb extends Oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eb extends Oo{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ib extends Oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nk extends Oo{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wA{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class CA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zr{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Db{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ab{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=iv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=iv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hm(e,this._root).map(t=>t.value)}}function iv(n,e){if(n===e.value)return e;for(const t of e.children){const r=iv(n,t);if(r)return r}return null}function hm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=hm(n,t);if(r.length)return r.unshift(e),r}return[]}class ya{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function No(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xb extends rv{constructor(e,t){super(e),this.snapshot=t,so(this,e)}toString(){return this.snapshot.toString()}}function Sb(n,e){const t=function Mb(n,e){const c=new vh([],{},{},"",{},ln,e,null,n.root,-1,{});return new fm("",new ya(c,[]))}(n,e),r=new Mo([new ko("",{})]),i=new Mo({}),u=new Mo({}),c=new Mo({}),f=new Mo(""),m=new wl(r,i,c,f,u,ln,e,t.root);return m.snapshot=t.root,new xb(new ya(m,[]),t)}class wl{constructor(e,t,r,i,u,c,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,ht.U)(v=>v[rm]))??Ct(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>gh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>gh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function Rk(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vh{constructor(e,t,r,i,u,c,f,m,v,D,A,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=f,this.title=this.data?.[rm],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=D,this._correctedLastPathIndex=L??D,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class fm extends rv{constructor(e,t){super(t),this.url=e,so(this,t)}toString(){return Pb(this._root)}}function so(n,e){e.value._routerState=n,e.children.forEach(t=>so(n,t))}function Pb(n){const e=n.children.length>0?` { ${n.children.map(Pb).join(", ")} } `:"";return`${n.value}${e}`}function pm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,io(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),io(e.params,t.params)||n.params.next(t.params),function sb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!io(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),io(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function oo(n,e){const t=io(n.params,e.params)&&function am(n,e){return ni(n,e)&&n.every((t,r)=>io(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||oo(n.parent,e.parent))}function Ki(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function kb(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ki(n,r,i);return Ki(n,r)})}(n,e,t);return new ya(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Ki(n,f)),c}}const r=function Ob(n){return new wl(new Mo(n.url),new Mo(n.params),new Mo(n.queryParams),new Mo(n.fragment),new Mo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ki(n,u));return new ya(r,i)}}const ov="ngNavigationCancelingError";function Nb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=mu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Rb(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Rb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[ov]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Fb(n){return gm(n)&&mu(n.url)}function gm(n){return n&&n[ov]}class tp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new np,this.attachRef=null}}let np=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tp,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rp=!1;let av=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=i||ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,rp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,rp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,rp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new o.vHH(4013,rp);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new Lb(t,f,i.injector);if(r&&function Vb(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(c);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(c,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(np),o.Y36(o.s_b),o.$8M("name"),o.Y36(o.sBO),o.Y36(o.lqb))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Lb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wl?this.route:e===np?this.childContexts:this.parent.get(e,t)}}let wh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[av],encapsulation:2}),n})();function Ub(n,e){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function mm(n){const e=n.children&&n.children.map(mm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ln&&(t.component=wh),t}function Ns(n){return n.outlet||ln}function lv(n,e){const t=n.filter(r=>Ns(r)===e);return t.push(...n.filter(r=>Ns(r)!==e)),t}function Ch(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class AA{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),pm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=No(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),mi(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=No(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=No(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=No(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new Db(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(pm(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),pm(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=Ch(i.snapshot),m=f?.get(o._Vd)??null;c.attachRef=null,c.route=i,c.resolver=m,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Gb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class _m{constructor(e,t){this.component=e,this.route=t}}function xA(n,e,t){const r=n._root;return sp(r,e?e._root:null,t,[r.value])}function bh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,o.Z0I)(n)?e.get(n):n:r}function sp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=No(e);return n.children.forEach(c=>{(function MA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const m=function PA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ni(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ni(n.url,e.url)||!io(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oo(n,e)||!io(n.queryParams,e.queryParams);default:return!oo(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Gb(r)):(u.data=c.data,u._resolvedData=c._resolvedData),sp(n,e,u.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new _m(f.outlet.component,c))}else c&&op(e,f,i),i.canActivateChecks.push(new Gb(r)),sp(n,null,u.component?f?f.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),mi(u,(c,f)=>op(c,t.getContext(f),i)),i}function op(n,e,t){const r=No(n),i=n.value;mi(r,(u,c)=>{op(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new _m(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ap(n){return"function"==typeof n}function ym(n){return n instanceof $f||"EmptyError"===n?.name}const up=Symbol("INITIAL_VALUE");function Wc(){return Cr(n=>Xg(n.map(e=>e.pipe(tm(1),Zf(up)))).pipe((0,ht.U)(e=>{for(const t of e)if(!0!==t){if(t===up)return up;if(!1===t||t instanceof Po)return t}return!0}),no(e=>e!==up),tm(1)))}function Yc(n){return(0,uA.z)((0,Lr.b)(e=>{if(mu(e))throw Nb(0,e)}),(0,ht.U)(e=>!0===e))}const lp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jA(n,e,t,r,i){const u=vm(n,e,t);return u.matched?function Fk(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Ct(i.map(c=>{const f=bh(c,n);return fl(function LA(n){return n&&ap(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Wc(),Yc()):Ct(!0)}(r=Ub(e,r),e,t).pipe((0,ht.U)(c=>!0===c?u:{...lp})):Ct(u)}function vm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||hA)(t,n,e);if(!i)return{...lp};const u={};mi(i.posParams,(f,m)=>{u[m]=f.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function cp(n,e,t,r,i="corrected"){if(t.length>0&&function $A(n,e,t){return t.some(r=>wm(n,e,r)&&Ns(r)!==ln)}(n,t,r)){const c=new Rt(e,function Ut(n,e,t,r){const i={};i[ln]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ns(u)!==ln){const c=new Rt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ns(u)]=c}return i}(n,e,r,new Rt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function HA(n,e,t){return t.some(r=>wm(n,e,r))}(n,t,r)){const c=new Rt(n.segments,function Lk(n,e,t,r,i,u){const c={};for(const f of r)if(wm(n,t,f)&&!i[Ns(f)]){const m=new Rt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Ns(f)]=m}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Rt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function wm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qc(n,e,t,r){return!!(Ns(n)===r||r!==ln&&wm(e,t,n))&&("**"===n.path||vm(e,n,t).matched)}function Qb(n,e,t){return 0===e.length&&!n.children[t]}const Jc=!1;class Xc{constructor(e){this.segmentGroup=e||null}}class ur{constructor(e){this.urlTree=e}}function Cm(n){return qf(new Xc(n))}function dv(n){return qf(new ur(n))}class eE{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=cp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Rt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ln).pipe((0,ht.U)(u=>this.createUrlTree(Xf(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hl(u=>{if(u instanceof ur)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Xc?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ln).pipe((0,ht.U)(i=>this.createUrlTree(Xf(i),e.queryParams,e.fragment))).pipe(hl(i=>{throw i instanceof Xc?this.noMatchError(i):i}))}noMatchError(e){return new o.vHH(4002,Jc)}createUrlTree(e,t,r){const i=zy(e);return new Po(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(u=>new Rt([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,mn.D)(i).pipe(ma(u=>{const c=r.children[u],f=lv(t,u);return this.expandSegmentGroup(e,f,c,u).pipe((0,ht.U)(m=>({segment:m,outlet:u})))}),ph((u,c)=>(u[c.outlet]=c.segment,u),{}),ib())}expandSegment(e,t,r,i,u,c){return(0,mn.D)(r).pipe(ma(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,u,c).pipe(hl(v=>{if(v instanceof Xc)return Ct(null);throw v}))),ro(f=>!!f),hl((f,m)=>{if(ym(f))return Qb(t,i,u)?Ct(new Rt([],{})):Cm(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,u,c,f){return Qc(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Cm(t):Cm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dv(u):this.lineralizeSegments(r,u).pipe((0,Mi.z)(c=>{const f=new Rt(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:D}=vm(t,i,u);if(!f)return Cm(t);const A=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?dv(A):this.lineralizeSegments(i,A).pipe((0,Mi.z)(L=>this.expandSegment(e,t,r,L.concat(v),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=Ub(r,e),r.loadChildren?(r._loadedRoutes?Ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ht.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Rt(i,{})))):Ct(new Rt(i,{}))):jA(t,r,i,e).pipe(Cr(({matched:c,consumedSegments:f,remainingSegments:m})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Mi.z)(D=>{const A=D.injector??e,L=D.routes,{segmentGroup:j,slicedSegments:z}=cp(t,f,m,L),ee=new Rt(j.segments,j.children);if(0===z.length&&ee.hasChildren())return this.expandChildren(A,L,ee).pipe((0,ht.U)(je=>new Rt(f,je)));if(0===L.length&&0===z.length)return Ct(new Rt(f,{}));const oe=Ns(r)===u;return this.expandSegment(A,ee,L,z,oe?ln:u,!0).pipe((0,ht.U)(ze=>new Rt(f.concat(ze.segments),ze.children)))})):Cm(t)))}getChildConfig(e,t,r){return t.children?Ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function BA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Ct(!0):Ct(i.map(c=>{const f=bh(c,n);return fl(function OA(n){return n&&ap(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Wc(),Yc())}(e,t,r).pipe((0,Mi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Lr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function GA(n){return qf(Rb(Jc,3))}())):Ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ct(r);if(i.numberOfChildren>1||!i.children[ln])return qf(new o.vHH(4e3,Jc));i=i.children[ln]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Po(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mi(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[u]=t[f]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return mi(t.children,(f,m)=>{c[m]=this.createSegmentGroup(e,f,r,i)}),new Rt(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new o.vHH(4001,Jc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class qA{}class hp{constructor(e,t,r,i,u,c,f,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=m}recognize(){const e=cp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ln).pipe((0,ht.U)(t=>{if(null===t)return null;const r=new vh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ya(r,t),u=new fm(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=sv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,mn.D)(Object.keys(r.children)).pipe(ma(i=>{const u=r.children[i],c=lv(t,i);return this.processSegmentGroup(e,c,u,i)}),ph((i,u)=>i&&u?(i.push(...u),i):null),function Kf(n,e=!1){return(0,ti.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),Wf(null),ib(),(0,ht.U)(i=>{if(null===i)return null;const u=fp(i);return function WA(n){n.sort((e,t)=>e.value.outlet===ln?-1:t.value.outlet===ln?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,mn.D)(t).pipe(ma(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),ro(c=>!!c),hl(c=>{if(ym(c))return Qb(r,i,u)?Ct([]):Ct(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!Qc(t,r,i,u))return Ct(null);let c;if("**"===t.path){const f=i.length>0?ab(i).parameters:{},m=fv(r)+i.length;c=Ct({snapshot:new vh(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Eh(t),Ns(t),t.component??t._loadedComponent??null,t,hv(r),m,Ih(t),m),consumedSegments:[],remainingSegments:[]})}else c=jA(r,t,i,e).pipe((0,ht.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:D})=>{if(!f)return null;const A=fv(r)+m.length;return{snapshot:new vh(m,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Eh(t),Ns(t),t.component??t._loadedComponent??null,t,hv(r),A,Ih(t),A),consumedSegments:m,remainingSegments:v}}));return c.pipe(Cr(f=>{if(null===f)return Ct(null);const{snapshot:m,consumedSegments:v,remainingSegments:D}=f;e=t._injector??e;const A=t._loadedInjector??e,L=function KA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:z}=cp(r,v,D,L.filter(oe=>void 0===oe.redirectTo),this.relativeLinkResolution);if(0===z.length&&j.hasChildren())return this.processChildren(A,L,j).pipe((0,ht.U)(oe=>null===oe?null:[new ya(m,oe)]));if(0===L.length&&0===z.length)return Ct([new ya(m,[])]);const ee=Ns(t)===u;return this.processSegment(A,L,j,z,ee?ln:u).pipe((0,ht.U)(oe=>null===oe?null:[new ya(m,oe)]))}))}}function YA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fp(n){const e=[],t=new Set;for(const r of n){if(!YA(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=fp(r.children);e.push(new ya(r.value,i))}return e.filter(r=>!t.has(r))}function hv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fv(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Eh(n){return n.data||{}}function Ih(n){return n.resolve||{}}function aE(n){return"string"==typeof n.title||null===n.title}function bm(n){return Cr(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,ht.U)(()=>e)):Ct(e)})}let uE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===ln);return r}getResolvedTitleForRoute(t){return t.data[rm]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(lE)},providedIn:"root"}),n})(),lE=(()=>{class n extends uE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ff))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Vk{}class Bk extends class Uk{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ed=new o.OlP("",{providedIn:"root",factory:()=>({})}),pv=new o.OlP("ROUTES");let Em=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=fl(t.loadComponent()).pipe((0,Lr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Hc(()=>{this.componentLoaders.delete(t)})),i=new lA(r,()=>new Si.x).pipe(fh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ht.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,D=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=im(m.get(pv,[],o.XFs.Self|o.XFs.Optional)));return{routes:v.map(mm),injector:m}}),Hc(()=>{this.childrenLoaders.delete(r)})),c=new lA(u,()=>new Si.x).pipe(fh());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return fl(t()).pipe((0,Mi.z)(r=>r instanceof o.YKP||Array.isArray(r)?Ct(r):(0,mn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pp{}class ex{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function tx(n){throw n}function nx(n,e,t){return e.parse("/")}const rx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function fE(){const n=(0,o.f3M)(Gc),e=(0,o.f3M)(np),t=(0,o.f3M)(xe),r=(0,o.f3M)(o.zs3),i=(0,o.f3M)(o.Sil),u=(0,o.f3M)(pv,{optional:!0})??[],c=(0,o.f3M)(ed,{optional:!0})??{},f=(0,o.f3M)(lE),m=(0,o.f3M)(uE,{optional:!0}),v=(0,o.f3M)(pp,{optional:!0}),D=(0,o.f3M)(Vk,{optional:!0}),A=new fn(null,n,e,t,r,i,im(u));return v&&(A.urlHandlingStrategy=v),D&&(A.routeReuseStrategy=D),A.titleStrategy=m??f,function ix(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,A),A}let fn=(()=>{class n{constructor(t,r,i,u,c,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Si.x,this.errorHandler=tx,this.malformedUriErrorHandler=nx,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ct(void 0),this.urlHandlingStrategy=new ex,this.routeReuseStrategy=new Bk,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Em),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new CA(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new wA(L)),this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const A=c.get(o.R0b);this.isNgZoneEnabled=A instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function fA(){return new Po(new Rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sb(this.currentUrlTree,this.rootComponentType),this.transitions=new Mo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(no(i=>0!==i.id),(0,ht.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Cr(i=>{let u=!1,c=!1;return Ct(i).pipe((0,Lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Cr(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return gv(f.source)&&(this.browserUrlTree=f.extractedUrl),Ct(f).pipe(Cr(A=>{const L=this.transitions.getValue();return r.next(new dm(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),L!==this.transitions.getValue()?$c.E:Promise.resolve(A)}),function tE(n,e,t,r){return Cr(i=>function Xb(n,e,t,r,i){return new eE(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Lr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function QA(n,e,t,r,i,u){return(0,Mi.z)(c=>function ZA(n,e,t,r,i,u,c="emptyOnly",f="legacy"){return new hp(n,e,t,r,i,c,f,u).recognize().pipe(Cr(m=>null===m?function zA(n){return new xr.y(e=>e.error(n))}(new qA):Ct(m)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,ht.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Lr.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(j,A)}this.browserUrlTree=A.urlAfterRedirects}const L=new Cb(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(L)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:j,source:z,restoredState:ee,extras:oe}=f,Ue=new dm(L,this.serializeUrl(j),z,ee);r.next(Ue);const ze=Sb(j,this.rootComponentType).snapshot;return Ct(i={...f,targetSnapshot:ze,urlAfterRedirects:j,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),$c.E}),(0,Lr.b)(f=>{const m=new bb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,ht.U)(f=>i={...f,guards:xA(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function zb(n,e){return(0,Mi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?Ct({...t,guardsResult:!0}):function Zb(n,e,t,r){return(0,mn.D)(n).pipe((0,Mi.z)(i=>function UA(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Ct(u.map(f=>{const m=Ch(e)??i,v=bh(f,m);return fl(function FA(n){return n&&ap(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(ro())})).pipe(Wc()):Ct(!0)}(i.component,i.route,t,e,r)),ro(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Mi.z)(f=>f&&function kA(n){return"boolean"==typeof n}(f)?function Wb(n,e,t,r){return(0,mn.D)(e).pipe(ma(i=>Uy(function Yb(n,e){return null!==n&&e&&e(new Tb(n)),Ct(!0)}(i.route.parent,r),function Kb(n,e){return null!==n&&e&&e(new zr(n)),Ct(!0)}(i.route,r),function Kc(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function SA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>rb(()=>Ct(c.guards.map(m=>{const v=Ch(c.node)??t,D=bh(m,v);return fl(function RA(n){return n&&ap(n.canActivateChild)}(D)?D.canActivateChild(r,n):v.runInContext(()=>D(r,n))).pipe(ro())})).pipe(Wc())));return Ct(u).pipe(Wc())}(n,i.path,t),function cv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ct(!0);const i=r.map(u=>rb(()=>{const c=Ch(e)??t,f=bh(u,c);return fl(function NA(n){return n&&ap(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(ro())}));return Ct(i).pipe(Wc())}(n,i.route,t))),ro(i=>!0!==i,!0))}(r,u,n,e):Ct(f)),(0,ht.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Lr.b)(f=>{if(i.guardsResult=f.guardsResult,mu(f.guardsResult))throw Nb(0,f.guardsResult);const m=new Eb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),no(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),bm(f=>{if(f.guards.canActivateChecks.length)return Ct(f).pipe((0,Lr.b)(m=>{const v=new Ib(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Cr(m=>{let v=!1;return Ct(m).pipe(function JA(n,e){return(0,Mi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Ct(t);let u=0;return(0,mn.D)(i).pipe(ma(c=>function XA(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!aE(i)&&(u[rm]=i.title),function iE(n,e,t,r){const i=function sE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Ct({});const u={};return(0,mn.D)(i).pipe((0,Mi.z)(c=>function oE(n,e,t,r){const i=Ch(e)??r,u=bh(n,i);return fl(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(ro(),(0,Lr.b)(f=>{u[c]=f}))),jy(1),function cA(n){return(0,ht.U)(()=>n)}(u),hl(c=>ym(c)?$c.E:qf(c)))}(u,n,e,r).pipe((0,ht.U)(c=>(n._resolvedData=c,n.data=sv(n,t).resolve,i&&aE(i)&&(n.data[rm]=i.title),null)))}(c.route,r,n,e)),(0,Lr.b)(()=>u++),jy(1),(0,Mi.z)(c=>u===i.length?Ct(t):$c.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Lr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Lr.b)(m=>{const v=new Nk(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),bm(f=>{const m=v=>{const D=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Lr.b)(A=>{v.component=A}),(0,ht.U)(()=>{})));for(const A of v.children)D.push(...m(A));return D};return Xg(m(f.targetSnapshot.root)).pipe(Wf(),tm(1))}),bm(()=>this.afterPreactivation()),(0,ht.U)(f=>{const m=function Ro(n,e,t){const r=Ki(n,e._root,t?t._root:void 0);return new xb(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:m}}),(0,Lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new AA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Lr.b)({next(){u=!0},complete(){u=!0}}),Hc(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),hl(f=>{if(c=!0,gm(f)){Fb(f)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new ep(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(m),Fb(f)){const v=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gv(i.source)};this.scheduleNavigation(v,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new nv(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return $c.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const f={...u};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(mm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,D=m?this.currentUrlTree.fragment:c;let A=null;switch(f){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),yA(v,this.currentUrlTree,t,A,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=mu(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sx(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new o.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...rx}:!1===r?{...hE}:r,mu(t))return pA(this.currentUrlTree,t,i);const u=this.parseUrl(t);return pA(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new vl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let f,m,v;c?(f=c.resolve,m=c.reject,v=c.promise):v=new Promise((L,j)=>{f=L,m=j});const D=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:D,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new ep(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:function(){return fE()},providedIn:"root"}),n})();function gv(n){return"imperative"!==n}let _u=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Si.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,o.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,o.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,o.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(fn),o.Y36(wl),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&o.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})(),Cl=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Si.x,this.subscription=t.events.subscribe(u=>{u instanceof vl&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,o.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,o.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,o.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,u,c){return!!(0!==t||r||i||u||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(fn),o.Y36(wl),o.Y36(Ce))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&o.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&o.uIk("target",r.target)("href",r.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})();class gE{}let _E=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(no(t=>t instanceof vl),ma(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,o.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,f=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,mn.D)(i).pipe((0,em.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Ct(null);const u=i.pipe((0,Mi.z)(c=>null===c?Ct(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,mn.D)([u,c]).pipe((0,em.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(fn),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(gE),o.LFG(Em))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Tm=new o.OlP("");let yE=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof dm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ab&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ab(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Th(n,e){return{\u0275kind:n,\u0275providers:e}}function xm(n){return[{provide:pv,multi:!0,useValue:n}]}function vE(){const n=(0,o.f3M)(o.zs3);return e=>{const t=n.get(o.z2F);if(e!==t.components[0])return;const r=n.get(fn),i=n.get(wE);1===n.get(mv)&&r.initialNavigation(),n.get(CE,null,o.XFs.Optional)?.setUpPreloading(),n.get(Tm,null,o.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const wE=new o.OlP("",{factory:()=>new Si.x}),mv=new o.OlP("",{providedIn:"root",factory:()=>1});const CE=new o.OlP("");function bE(n){return Th(0,[{provide:CE,useExisting:_E},{provide:gE,useExisting:n}])}const _v=new o.OlP("ROUTER_FORROOT_GUARD"),dx=[xe,{provide:Gc,useClass:gl},{provide:fn,useFactory:fE},np,{provide:wl,useFactory:function Am(n){return n.routerState.root},deps:[fn]},Em];function hx(){return new o.PXZ("Router",fn)}let EE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dx,[],xm(t),{provide:_v,useFactory:wv,deps:[[fn,new o.FiY,new o.tp0]]},{provide:ed,useValue:r||{}},r?.useHash?{provide:Ce,useClass:pt}:{provide:Ce,useClass:yt},{provide:Tm,useFactory:()=>{const n=(0,o.f3M)(fn),e=(0,o.f3M)($o),t=(0,o.f3M)(ed);return t.scrollOffset&&e.setOffset(t.scrollOffset),new yE(n,e,t)}},r?.preloadingStrategy?bE(r.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:hx},r?.initialNavigation?fx(r):[],[{provide:TE,useFactory:vE},{provide:o.tb,multi:!0,useExisting:TE}]]}}static forChild(t){return{ngModule:n,providers:[xm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(_v,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[wh]}),n})();function wv(n){return"guarded"}function fx(n){return["disabled"===n.initialNavigation?Th(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const e=(0,o.f3M)(fn);return()=>{e.setUpLocationChangeListener()}}},{provide:mv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Th(2,[{provide:mv,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:e=>{const t=e.get(Z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(fn),f=e.get(wE);(function i(u){e.get(fn).events.pipe(no(f=>f instanceof vl||f instanceof ep||f instanceof nv),(0,ht.U)(f=>f instanceof vl||f instanceof ep&&(0===f.code||1===f.code)&&null),no(f=>null!==f),tm(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||f.closed?Ct(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const TE=new o.OlP("");var DE=U(6451),yu=U(5363),AE=U(6063);class px extends Si.x{constructor(e=1/0,t=1/0,r=AE.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)f=m;f&&r.splice(0,f+1)}}}var zk=U(3099);function bv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,zk.B)({connector:()=>new px(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Mm(n,e){return(0,Gf.m)(e)?Cr(()=>n,e):Cr(()=>n)}var Ev=U(9468),cn=U(4976),Yi=U(2011),bl=U(259);class El{constructor(e){return e}}class Iv{constructor(){return(0,bl.C6)()}}const Pm=new o.OlP("angularfire2._apps"),mx={provide:El,useFactory:function xE(n){return n&&1===n.length?n[0]:new El((0,bl.Mq)())},deps:[[new o.FiY,Pm]]},_x={provide:Iv,deps:[[new o.FiY,Pm]]};function yx(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new El(r)}}let vx=(()=>{class n{constructor(t){(0,bl.KN)("angularfire",cn.q4.full,"core"),(0,bl.KN)("angularfire",cn.q4.full,"app"),(0,bl.KN)("angular",o.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.Lbi))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[mx,_x]}),n})();function SE(n,...e){return{ngModule:vx,providers:[{provide:Pm,useFactory:yx(n),multi:!0,deps:[o.R0b,o.zs3,cn.HU,...e]}]}}const Cx=(0,cn.u3)(bl.ZF,!0);var ae=U(5861),Rs=U(6881),td=U(4859),Gt=U(2090),Il=U(1877);const Tv=new Map,ME={activated:!1,tokenObservers:[]},bx={initialized:!1,enabled:!1};function br(n){return Tv.get(n)||Object.assign({},ME)}function km(){return bx}class RE{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ae.Z)(function*(){t.stop();try{t.pending=new Gt.BH,yield function Ix(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Av(n){if(!br(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function Tl(n,e){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,ae.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,u)}catch(A){throw _i.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==c.status)throw _i.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(A){throw _i.create("fetch-parse-error",{originalErrorMessage:A?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+v,issuedAtTimeMillis:D}})).apply(this,arguments)}function FE(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _p="firebase-app-check-store";let Nm=null;function yp(){return Nm||(Nm=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_i.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_p,{keyPath:"compositeKey"})}}catch(t){e(_i.create("storage-open",{originalErrorMessage:t?.message}))}}),Nm)}function vp(){return(vp=(0,ae.Z)(function*(n,e){const r=(yield yp()).transaction(_p,"readwrite"),u=r.objectStore(_p).put({compositeKey:n,value:e});return new Promise((c,f)=>{u.onsuccess=m=>{c()},r.onerror=m=>{var v;f(_i.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Fm=new Il.Yd("@firebase/app-check");function Lm(n,e){return(0,Gt.hl)()?function Tx(n,e){return function kv(n,e){return vp.apply(this,arguments)}(function UE(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lv(){return km().enabled}function Vv(){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,ae.Z)(function*(){const n=km();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const BE={error:"UNKNOWN_ERROR"};function Bv(n){return Gt.US.encodeString(JSON.stringify(n),!1)}function bp(n){return jv.apply(this,arguments)}function jv(){return(jv=(0,ae.Z)(function*(n,e=!1){const t=n.app;Av(t);const r=br(t);let u,i=r.token;if(i&&!Dh(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(Dh(m)?i=m:yield Lm(t,void 0))}if(!e&&i&&Dh(i))return{token:i.token};let f,c=!1;if(Lv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Tl(FE(t,yield Vv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const m=yield r.exchangeTokenPromise;return yield Lm(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield br(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Fm.warn(m.message):Fm.error(m),u=m}return i?u?f=Dh(i)?{token:i.token,internalError:u}:Pi(u):(f={token:i.token},r.token=i,yield Lm(t,i)):f=Pi(u),c&&qv(t,f),f})).apply(this,arguments)}function Vm(){return(Vm=(0,ae.Z)(function*(n){const e=n.app;Av(e);const{provider:t}=br(e);if(Lv()){const r=yield Vv(),{token:i}=yield Tl(FE(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Um(n,e){const t=br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Gv(n){const{app:e}=n,t=br(e);let r=t.tokenRefresher;r||(r=function xx(n){const{app:e}=n;return new RE((0,ae.Z)(function*(){let r;if(r=br(e).token?yield bp(n,!0):yield bp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function qv(n,e){const t=br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Dh(n){return n.expireTimeMillis-Date.now()>0}function Pi(n){return{token:Bv(BE),error:n}}class Ah{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=br(this.app);for(const t of e)Um(this.app,t.next);return Promise.resolve()}}const qE="app-check-internal";!function Xk(){(0,Rs._registerComponent)(new td.wA("app-check",n=>function Sx(n,e){return new Ah(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qE).initialize()})),(0,Rs._registerComponent)(new td.wA(qE,n=>function Mx(n){return{getToken:e=>bp(n,e),getLimitedUseToken:()=>function $v(n){return Vm.apply(this,arguments)}(n),addTokenListener:e=>function Hv(n,e,t,r){const{app:i}=n,u=br(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Dh(u.token)){const f=u.token;Promise.resolve().then(()=>{t({token:f.token}),Gv(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>Gv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Um(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rs.registerVersion)("@firebase/app-check","0.8.0")}();class Dp{constructor(){return(0,cn.vb)("app-check")}}typeof window<"u"&&window;var iO=U(9260);const Zx=new o.OlP("angularfire2.auth.use-emulator"),Wx=new o.OlP("angularfire2.auth.settings"),Kx=new o.OlP("angularfire2.auth.tenant-id"),Yx=new o.OlP("angularfire2.auth.langugage-code"),Qx=new o.OlP("angularfire2.auth.use-device-language"),Jx=new o.OlP("angularfire.auth.persistence"),Xx=(n,e,t,r,i,u,c,f)=>(0,Yi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,u&&m.useDeviceLanguage(),c)for(const[v,D]of Object.entries(c))m.settings[v]=D;return f&&m.setPersistence(f),m},[t,r,i,u,c,f]);let ki=(()=>{class n{constructor(t,r,i,u,c,f,m,v,D,A,L,j){const z=new Si.x,ee=Ct(void 0).pipe((0,yu.Q)(c.outsideAngular),Cr(()=>u.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,ht.U)(()=>(0,Yi.on)(t,u,r)),(0,ht.U)(oe=>Xx(oe,u,f,v,D,A,m,L)),bv({bufferSize:1,refCount:!1}));if($s(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ct(null);else{ee.pipe(ro()).subscribe();const Ue=ee.pipe(Cr(Ye=>Ye.getRedirectResult().then(Ft=>Ft,()=>null)),cn.iC,bv({bufferSize:1,refCount:!1})),ze=ee.pipe(Cr(Ye=>new xr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>Ye.onAuthStateChanged(Bt=>Ft.next(Bt),Bt=>Ft.error(Bt),()=>Ft.complete()))})))),je=ee.pipe(Cr(Ye=>new xr.y(Ft=>({unsubscribe:u.runOutsideAngular(()=>Ye.onIdTokenChanged(Bt=>Ft.next(Bt),Bt=>Ft.error(Bt),()=>Ft.complete()))}))));this.authState=Ue.pipe(Mm(ze),(0,Ev.R)(c.outsideAngular),(0,yu.Q)(c.insideAngular)),this.user=Ue.pipe(Mm(je),(0,Ev.R)(c.outsideAngular),(0,yu.Q)(c.insideAngular)),this.idToken=this.user.pipe(Cr(Ye=>Ye?(0,mn.D)(Ye.getIdToken()):Ct(null))),this.idTokenResult=this.user.pipe(Cr(Ye=>Ye?(0,mn.D)(Ye.getIdTokenResult()):Ct(null))),this.credential=(0,DE.T)(Ue,z,this.authState.pipe(no(Ye=>!Ye))).pipe((0,ht.U)(Ye=>Ye?.user?Ye:null),(0,Ev.R)(c.outsideAngular),(0,yu.Q)(c.insideAngular))}return(0,Yi.pX)(this,ee,u,{spy:{apply:(oe,Ue,ze)=>{(oe.startsWith("signIn")||oe.startsWith("createUser"))&&ze.then(je=>z.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi.Dh),o.LFG(Yi.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(cn.HU),o.LFG(Zx,8),o.LFG(Wx,8),o.LFG(Kx,8),o.LFG(Yx,8),o.LFG(Qx,8),o.LFG(Jx,8),o.LFG(Dp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$m=(()=>{class n{constructor(){iO.Z.registerVersion("angularfire",cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[ki]}),n})();const eS=["toast-component",""];function YE(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.remove())}),o.TgZ(1,"span",6),o._uU(2,"\xd7"),o.qZA()()}}function Hm(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij("[",t.duplicatesCount+1,"]")}}function QE(n,e){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.YNc(2,Hm,2,1,"ng-container",4),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.titleClass),o.uIk("aria-label",t.title),o.xp6(1),o.hij(" ",t.title," "),o.xp6(1),o.Q6J("ngIf",t.duplicatesCount)}}function JE(n,e){if(1&n&&o._UZ(0,"div",7),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.Q6J("innerHTML",t.message,o.oJD)}}function sO(n,e){if(1&n&&(o.TgZ(0,"div",8),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.uIk("aria-label",t.message),o.xp6(1),o.hij(" ",t.message," ")}}function Xv(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"div",9),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Udp("width",t.width+"%")}}class iS{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class t0{constructor(e,t,r,i,u,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=c,this._onTap=new Si.x,this._onAction=new Si.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const tI=new o.OlP("ToastConfig");class oS{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Si.x,this._activate=new Si.x,this._manualClose=new Si.x,this._resetTimeout=new Si.x,this._countDuplicate=new Si.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class aS{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===t0?this._toastPackage:this._parentInjector.get(e,t,r)}}class lO extends class uO{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class uS{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let nI=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rI=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new lO(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new uS(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(nI),o.LFG(o._Vd),o.LFG(o.z2F),o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ps=(()=>{class n{constructor(t,r,i,u,c){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const f of this.toasts){const m=c&&f.title===t;if((!c||m)&&f.message===r)return f.toastRef.onDuplicate(i,u),f}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const m=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let v=r;r&&u.enableHtml&&(v=this.sanitizer.sanitize(o.q3G.HTML,r));const D=new oS(m),A=new t0(this.index,u,v,i,t,D),L=new aS(A,this._injector),j=new iS(u.toastComponent,L),z=m.attach(j,this.toastrConfig.newestOnTop);D.componentInstance=z.instance;const ee={toastId:this.index,title:i||"",message:r||"",toastRef:D,onShown:D.afterActivate(),onHidden:D.afterClosed(),onTap:A.onTap(),onAction:A.onAction(),portal:z};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ee.toastRef.activate()})),this.toasts.push(ee),ee}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(tI),o.LFG(rI),o.LFG(o.zs3),o.LFG(Ja),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lS={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ps),o.Y36(t0),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&o.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(o.d8E("@flyInOut",r.state),o.Tol(r.toastClasses),o.Udp("display",r.displayStyle))},attrs:eS,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(o.YNc(0,YE,3,0,"button",0),o.YNc(1,QE,3,5,"div",1),o.YNc(2,JE,1,3,"div",2),o.YNc(3,sO,2,4,"div",3),o.YNc(4,Xv,2,2,"div",4)),2&t&&(o.Q6J("ngIf",r.options.closeButton),o.xp6(1),o.Q6J("ngIf",r.title),o.xp6(1),o.Q6J("ngIf",r.message&&r.options.enableHtml),o.xp6(1),o.Q6J("ngIf",r.message&&!r.options.enableHtml),o.xp6(1),o.Q6J("ngIf",r.options.progressBar))},dependencies:[_n],encapsulation:2,data:{animation:[gD("flyInOut",[iC("inactive",Sf({opacity:0})),iC("active",Sf({opacity:1})),iC("removed",Sf({opacity:0})),sh("inactive => active",nC("{{ easeTime }}ms {{ easing }}")),sh("active => removed",nC("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let n0=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:tI,useValue:{default:lS,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Td]]}),n})();function cS(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",10)(1,"div",11)(2,"span",12),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",13)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",14),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",15),o._uU(10,"Registrate"),o.qZA()()()()()}}let Gm=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.esInvitado=!1,this.modal=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}verPerfil(){this.router.navigate(["/perfil"])}close(){this.modal=!1}salir(){this.logout()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ki),o.Y36(fn),o.Y36(ps))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-navbar"]],decls:18,vars:2,consts:[[2,"user-select","none"],[1,"log"],[1,"verperfil",2,"text-shadow","3px 1px 2px #1669c1","cursor","pointer","color","white",3,"click"],[2,"text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"caja"],["routerLink","/main",1,"nav-link"],["routerLink","/galeria",1,"nav-link"],["routerLink","/videos",1,"nav-link"],["routerLink","/musica",1,"nav-link"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"span",2),o.NdJ("click",function(){return r.verPerfil()}),o._uU(4),o.qZA(),o.TgZ(5,"span",3),o.NdJ("click",function(){return r.logout()}),o._uU(6,"Salir"),o.qZA()()(),o.TgZ(7,"div",4)(8,"a",5),o._uU(9,"INICIO"),o.qZA(),o.TgZ(10,"a",6),o._uU(11,"IMAGENES"),o.qZA(),o.TgZ(12,"a",7),o._uU(13,"VIDEOS"),o.qZA(),o.TgZ(14,"a",8),o._uU(15,"MUSICA"),o.qZA()()(),o.TgZ(16,"div"),o.YNc(17,cS,11,0,"div",9),o.qZA()),2&t&&(o.xp6(4),o.hij("Hola ",r.usuarioActual,""),o.xp6(13),o.Q6J("ngIf",r.modal))},dependencies:[_n,Cl],styles:[".log[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.verperfil[_ngcontent-%COMP%]{cursor:pointer}.verperfil[_ngcontent-%COMP%]:hover{color:red}.caja[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,rgba(76,175,80,.3294117647),rgba(33,150,243,.5490196078));display:flex;justify-content:space-around;padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center;margin-top:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 900px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})();const r0=function(n){return{"background-image":n,"background-blend-mode":"soft-light","background-size":"cover","background-position":"center"}};let sI=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.imagenesFondo=["https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto1.jpg?alt=media&token=144909e5-fa88-4785-a196-a9e829d644ee","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp30.jpg?alt=media&token=8835ef58-75a7-46ed-8d66-182c8b12a5b9","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp37.jpg?alt=media&token=1b507c45-18ad-44ab-9080-fcb944188969","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp45.jpg?alt=media&token=805448f0-c5f8-4c9d-b163-7de9487ea921","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp46.jpg?alt=media&token=52922013-1f5c-413d-8008-5bb74a93bad0","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp62.jpg?alt=media&token=96809e52-9a26-42fb-a0d1-608b0ec80cc4","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10500411_10201454213716073_6332111602942763551_n_10201454213716073.jpg?alt=media&token=6e7caa54-9319-4551-83bf-53cb96bbf047","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10580144_10201454209915978_1885626682807728120_n_10201454209915978.jpg?alt=media&token=eb7ef51f-afe5-490a-b17d-864642c1136a","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F164789_1372685215984_2451351_n_1372685215984.jpg?alt=media&token=46c640a2-1a32-458f-ab07-a6dbb2370cc4"],this.indiceImagen=0}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t&&t.displayName?t.displayName:"Invitad@"}),this.cambiarImagenFondo(),setInterval(()=>this.cambiarImagenFondo(),15e3)}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}cambiarImagenFondo(){const t=Math.floor(Math.random()*this.imagenesFondo.length);this.backgroundImage=this.imagenesFondo[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ki),o.Y36(fn),o.Y36(ps))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main"]],decls:15,vars:3,consts:[[1,"contenedor",2,"user-select","none"],[1,"box",3,"ngStyle"],[1,"titulo"],[1,"align"],[1,"msj"],[1,"pie"],["href","https://www.facebook.com/profile.php?id=100013672369598",1,"foo"],[1,"fab","fa-facebook-square"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.TgZ(3,"h1",2),o._uU(4,"Asi somos asi Bailamos Corinto"),o.qZA(),o.TgZ(5,"div")(6,"p",3),o._uU(7," Sum\xe9rgete en el coraz\xf3n de Corinto, Cauca, a trav\xe9s de esta conmovedora recopilaci\xf3n de ensayos, presentaciones, eventos, im\xe1genes y m\xfasica, protagonizados por nuestros queridos j\xf3venes. Cada momento capturado refleja la dedicaci\xf3n, el talento y la pasi\xf3n de nuestros muchachos, quienes con su esfuerzo y creatividad han dejado una huella imborrable en nuestra comunidad. "),o.qZA()(),o.TgZ(8,"div",4),o._uU(9,"Gracias a todos espero lo disfruten tanto como yo!!."),o.qZA(),o.TgZ(10,"aside")(11,"footer",5)(12,"a",6),o._UZ(13,"i",7),o._uU(14," by Edwin 2022"),o.qZA()()()()()),2&t&&(o.xp6(1),o.Q6J("ngStyle",o.VKq(1,r0,"url("+r.backgroundImage+")")))},dependencies:[yd,Gm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;padding:0;overflow:hidden}.log[_ngcontent-%COMP%]{display:flex;justify-content:space-between;animation:moveText .8s ease-in;white-space:nowrap;overflow:hidden}.logout[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.box[_ngcontent-%COMP%]{background-color:#3144c169;display:flex;flex-direction:column;justify-content:space-around;height:90%;width:85%;color:#fff;font-size:20px;padding:20px;border:1px solid white;border-radius:15px;outline:solid #ffffff;background-repeat:no-repeat;background-position:right;background-size:contain;animation:apearText 2s linear}.titulo[_ngcontent-%COMP%]{padding:10px;font-size:30px;text-align:center;background-color:#09ffb340;border-radius:8px;animation:moveText .5s linear}.align[_ngcontent-%COMP%]{padding:12px;text-align:center;border-radius:12px;border:1px solid white;color:#fff;margin-bottom:15px;font-size:17px;animation:moveText 1s linear;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:3px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0ff}.msj[_ngcontent-%COMP%]{color:#fff;margin-bottom:9px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{animation:apearText 2.3s linear;position:relative}.foo[_ngcontent-%COMP%]{color:#fff;text-decoration:none}@media (max-width: 767px){.titulo[_ngcontent-%COMP%]{font-size:22px}.welcome[_ngcontent-%COMP%]{font-size:20px;padding:0;margin:0}.t1[_ngcontent-%COMP%]{animation:moveText 1.2s linear;white-space:nowrap;overflow:hidden}.t2[_ngcontent-%COMP%]{animation:moveText 1.4s linear;white-space:nowrap;overflow:hidden}.t3[_ngcontent-%COMP%]{animation:moveText 1.6s linear;white-space:nowrap;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:7px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}.msj[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2.3s linear}}@media (max-width: 433px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}.msj[_ngcontent-%COMP%]{font-size:13px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:16px;animation:apearText 2.3s linear}}@media (max-width: 348px){.titulo[_ngcontent-%COMP%]{font-size:16px}.align[_ngcontent-%COMP%]{padding:4px}}@keyframes moveText{0%{opacity:0;transform:translate(100%)}50%{opacity:.5}to{opacity:1;transform:translate(0)}}@keyframes apearText{0%{opacity:0}50%{opacity:.5}to{opacity:1}}"]}),n})();U(1389);class s0{constructor(){return(0,cn.vb)("auth")}}const h0="firebasestorage.googleapis.com",hI="storageBucket";class tr extends Gt.ZR{constructor(e,t,r=0){super(Zm(e),`Firebase Storage: ${t} (${Zm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ln=(()=>{return(n=Ln||(Ln={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ln;var n})();function Zm(n){return"storage/"+n}function f0(){return new tr(Ln.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Wm(){return new tr(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gI(){return new tr(Ln.CANCELED,"User canceled the upload/download.")}function mI(){return new tr(Ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ap(n){return new tr(Ln.INVALID_ARGUMENT,n)}function RS(){return new tr(Ln.APP_DELETED,"The Firebase app was deleted.")}function FS(n){return new tr(Ln.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Km(n,e){return new tr(Ln.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function xp(n){throw new tr(Ln.INTERNAL_ERROR,"Internal error: "+n)}class Qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Qi.makeFromUrl(e,t)}catch{return new Qi(e,"")}if(""===r.path)return r;throw function MO(n){return new tr(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ye){Ye.path_=decodeURIComponent(Ye.path)}const A=t.replace(/[.]/g,"\\."),je=[{regex:f,indices:{bucket:1,path:3},postModify:function u(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===h0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ye=0;Ye<je.length;Ye++){const Ft=je[Ye],Bt=Ft.regex.exec(e);if(Bt){let Sr=Bt[Ft.indices.path];Sr||(Sr=""),r=new Qi(Bt[Ft.indices.bucket],Sr),Ft.postModify(r);break}}if(null==r)throw function kS(n){return new tr(Ln.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class OO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function a(n){return"string"==typeof n||n instanceof String}function l(n){return d()&&n instanceof Blob}function d(){return typeof Blob<"u"&&!(0,Gt.UG)()}function h(n,e,t,r){if(r<e)throw Ap(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ap(`Invalid value for '${n}'. Expected ${t} or less.`)}function g(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function y(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var E=(()=>{return(n=E||(E={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",E;var n})();function I(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class x{constructor(e,t,r,i,u,c,f,m,v,D,A,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=D,this.connectionFactory_=A,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,z)=>{this.resolve_=j,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function FO(n){return void 0!==n}(m)?u():u(m)}catch(m){c(m)}else if(null!==f){const m=f0();m.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,m):m)}else c(i.canceled?this.appDelete_?RS():gI():Wm())};this.canceled_?t(0,new P(!1,null,!0)):this.backoffId_=function NO(n,e,t){let r=1,i=null,u=null,c=!1,f=0;function m(){return 2===f}let v=!1;function D(...oe){v||(v=!0,e.apply(null,oe))}function A(oe){i=setTimeout(()=>{i=null,n(j,m())},oe)}function L(){u&&clearTimeout(u)}function j(oe,...Ue){if(v)return void L();if(oe)return L(),void D.call(null,oe,...Ue);if(m()||c)return L(),void D.call(null,oe,...Ue);let je;r<64&&(r*=2),1===f?(f=2,je=0):je=1e3*(r+Math.random()),A(je)}let z=!1;function ee(oe){z||(z=!0,L(),!v&&(null!==i?(oe||(f=2),clearTimeout(i),A(0)):oe||(f=1)))}return A(0),u=setTimeout(()=>{c=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new P(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const f=u.getErrorCode()===E.NO_ERROR,m=u.getStatus();if(!f||I(m,this.additionalRetryCodes_)&&this.retry){const D=u.getErrorCode()===E.ABORT;return void r(!1,new P(!1,null,D))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new P(v,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function RO(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class P{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _t(...n){const e=function Xe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(d())return new Blob(n);throw new tr(Ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const wt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bn{constructor(e,t){this.data=e,this.contentType=t||null}}function qn(n,e){switch(n){case wt.RAW:return new bn(Al(e));case wt.BASE64:case wt.BASE64URL:return new bn(Ym(n,e));case wt.DATA_URL:return new bn(function m0(n){const e=new Qm(n);return e.base64?Ym(wt.BASE64,e.rest):function g0(n){let e;try{e=decodeURIComponent(n)}catch{throw Km(wt.DATA_URL,"Malformed data URL.")}return Al(e)}(e.rest)}(e),function _0(n){return new Qm(n).contentType}(e))}throw f0()}function Al(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ym(n,e){switch(n){case wt.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw Km(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wt.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw Km(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Fe(n){if(typeof atob>"u")throw function kO(n){return new tr(Ln.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Km(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Qm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Km(wt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function y0(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class ao{constructor(e,t){let r=0,i="";l(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(l(this.data_)){const i=function Ot(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ao(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ao(r,!0)}}static getBlob(...e){if(d()){const t=e.map(r=>r instanceof ao?r.data_:r);return new ao(_t.apply(null,t))}{const t=e.map(c=>a(c)?qn(wt.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[u++]=c[f]}),new ao(i,!0)}}uploadData(){return this.data_}}function Sp(n){let e;try{e=JSON.parse(n)}catch{return null}return function s(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function VO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function GV(n,e){return e}class Fs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||GV}}let _I=null;function w0(){if(_I)return _I;const n=[];n.push(new Fs("bucket")),n.push(new Fs("generation")),n.push(new Fs("metageneration")),n.push(new Fs("name","fullPath",!0));const t=new Fs("name");t.xform=function e(u,c){return function qV(n){return!a(n)||n.length<2?n:VO(n)}(c)},n.push(t);const i=new Fs("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Fs("timeCreated")),n.push(new Fs("updated")),n.push(new Fs("md5Hash",null,!0)),n.push(new Fs("cacheControl",null,!0)),n.push(new Fs("contentDisposition",null,!0)),n.push(new Fs("contentEncoding",null,!0)),n.push(new Fs("contentLanguage",null,!0)),n.push(new Fs("contentType",null,!0)),n.push(new Fs("metadata","customMetadata",!0)),_I=n,_I}function UO(n,e,t){const r=Sp(e);return null===r?null:function ZV(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function zV(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Qi(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function LS(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const BO="prefixes";class xl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sl(n){if(!n)throw f0()}function yI(n,e){return function t(r,i){const u=UO(n,i,e);return Sl(null!==u),u}}function Jm(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function SO(){return new tr(Ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function p0(){return new tr(Ln.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fI(n){return new tr(Ln.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function pI(n){return new tr(Ln.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function C0(n){const e=Jm(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function PS(n){return new tr(Ln.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function $O(n,e,t){const i=g(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new xl(i,"GET",yI(n,t),c);return f.errorHandler=C0(e),f}function XV(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const f=g(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,D=new xl(f,"GET",function QV(n,e){return function t(r,i){const u=function YV(n,e,t){const r=Sp(t);return null===r?null:function KV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[BO])for(const i of t[BO]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new Qi(e,u));r.prefixes.push(c)}if(t.items)for(const i of t.items){const u=n._makeStorageReference(new Qi(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return Sl(null!==u),u}}(n,e.bucket),v);return D.urlParams=u,D.errorHandler=Jm(e),D}function GO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function rU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function qO(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let je="";for(let Ye=0;Ye<2;Ye++)je+=Math.random().toString().slice(2);return je}();c["Content-Type"]="multipart/related; boundary="+m;const v=GO(e,r,i),D=LS(v,t),j=ao.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===j)throw mI();const z={name:v.fullPath},ee=g(u,n.host,n._protocol),Ue=n.maxUploadRetryTime,ze=new xl(ee,"POST",yI(n,t),Ue);return ze.urlParams=z,ze.headers=c,ze.body=j.uploadData(),ze.errorHandler=Jm(e),ze}class vI{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function VS(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Sl(!1)}return Sl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const aU={STATE_CHANGED:"state_changed"},Ls={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function US(n){switch(n){case"running":case"pausing":case"canceling":return Ls.RUNNING;case"paused":return Ls.PAUSED;case"success":return Ls.SUCCESS;case"canceled":return Ls.CANCELED;default:return Ls.ERROR}}class uU{constructor(e,t,r){if(function LO(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function Xm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class cU extends class lU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=E.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=E.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=E.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw xp("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xp("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xp("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xp("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xp("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function vu(){return new cU}class WO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=w0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ln.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(I(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Wm()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ln.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function iU(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=GO(e,r,i),f={name:c.fullPath},m=g(u,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},A=LS(c,t),z=new xl(m,"POST",function j(ee){let oe;VS(ee);try{oe=ee.getResponseHeader("X-Goog-Upload-URL")}catch{Sl(!1)}return Sl(a(oe)),oe},n.maxUploadRetryTime);return z.urlParams=f,z.headers=D,z.body=A,z.errorHandler=Jm(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function sU(n,e,t,r){const m=new xl(t,"POST",function u(v){const D=VS(v,["active","final"]);let A=null;try{A=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sl(!1)}A||Sl(!1);const L=Number(A);return Sl(!isNaN(L)),new vI(L,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Jm(e),m}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,vu,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new vI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function oU(n,e,t,r,i,u,c,f){const m=new vI(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function OS(){return new tr(Ln.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let D=v;i>0&&(D=Math.min(D,i));const A=m.current;let j="";j=0===D?"finalize":v===D?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":`${m.current}`},ee=r.slice(A,A+D);if(null===ee)throw mI();const je=new xl(t,"POST",function oe(Ye,Ft){const Bt=VS(Ye,["active","final"]),Cn=m.current+D,Sr=r.size();let ws;return ws="final"===Bt?yI(e,u)(Ye,Ft):null,new vI(Cn,Sr,"final"===Bt,ws)},e.maxUploadRetryTime);return je.headers=z,je.body=ee.uploadData(),je.progressCallback=f||null,je.errorHandler=Jm(n),je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(c,vu,i,u,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=$O(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=qO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=gI(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=US(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new uU(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(US(this._state)){case Ls.SUCCESS:Xm(this._resolve.bind(null,this.snapshot))();break;case Ls.CANCELED:case Ls.ERROR:Xm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(US(this._state)){case Ls.RUNNING:case Ls.PAUSED:e.next&&Xm(e.next.bind(e,this.snapshot))();break;case Ls.SUCCESS:e.complete&&Xm(e.complete.bind(e))();break;default:e.error&&Xm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Mp{constructor(e,t){this._service=e,this._location=t instanceof Qi?t:Qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mp(e,t)}get root(){const e=new Qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VO(this._location.path)}get storage(){return this._service}get parent(){const e=function v0(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Qi(this._location.bucket,e);return new Mp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw FS(e)}}function YO(n,e,t){return BS.apply(this,arguments)}function BS(){return(BS=(0,ae.Z)(function*(n,e,t){const i=yield QO(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield YO(n,e,i.nextPageToken))})).apply(this,arguments)}function QO(n,e){null!=e&&"number"==typeof e.maxResults&&h("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=XV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,vu)}function bU(n){n._throwIfRoot("getDownloadURL");const e=function eU(n,e,t){const i=g(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new xl(i,"GET",function JV(n,e){return function t(r,i){const u=UO(n,i,e);return Sl(null!==u),function WV(n,e,t,r){const i=Sp(e);if(null===i||!a(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(v=>{const A=n.fullPath;return g("/b/"+c(n.bucket)+"/o/"+c(A),t,r)+y({alt:"media",token:v})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=C0(e),f}(n.storage,n._location,w0());return n.storage.makeRequestWithTokens(e,vu).then(t=>{if(null===t)throw function NS(){return new tr(Ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function JO(n,e){const t=function HV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Qi(n._location.bucket,t);return new Mp(n.storage,r)}function XO(n,e){if(n instanceof jS){const t=n;if(null==t._bucket)throw function PO(){return new tr(Ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hI+"' property when initializing the app?")}();const r=new Mp(t,t._bucket);return null!=e?XO(r,e):r}return void 0!==e?JO(n,e):n}function DU(n,e){if(e&&function IU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof jS)return function TU(n,e){return new Mp(n,e)}(n,e);throw Ap("To use ref(service, url), the first argument must be a Storage instance.")}return XO(n,e)}function eN(n,e){const t=e?.[hI];return null==t?null:Qi.makeFromBucketSpec(t,n)}class jS{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=h0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Qi.makeFromBucketSpec(i,this._host):eN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Qi.makeFromBucketSpec(this._url,e):eN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){h("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){h("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ae.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ae.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mp(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new OO(RS());{const c=function $e(n,e,t,r,i,u,c=!0){const f=y(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function ne(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function B(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function K(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,u),function Te(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new x(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,ae.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const tN="@firebase/storage",rN="storage";function xU(n,e,t){return function KO(n,e,t){n._throwIfRoot("uploadBytes");const r=qO(n.storage,n._location,w0(),new ao(e,!0),t);return n.storage.makeRequestWithTokens(r,vu).then(i=>({metadata:i,ref:n}))}(n=(0,Gt.m9)(n),e,t)}function iN(n){return function vU(n){const e={prefixes:[],items:[]};return YO(n,e).then(()=>e)}(n=(0,Gt.m9)(n))}function sN(n){return bU(n=(0,Gt.m9)(n))}function $S(n,e){return DU(n=(0,Gt.m9)(n),e)}function RU(n=(0,Rs.getApp)(),e){n=(0,Gt.m9)(n);const r=(0,Rs._getProvider)(n,rN).getImmediate({identifier:e}),i=(0,Gt.P0)("storage");return i&&oN(r,...i),r}function oN(n,e,t,r={}){!function AU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Gt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function FU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new jS(t,r,i,e,Rs.SDK_VERSION)}!function LU(){(0,Rs._registerComponent)(new td.wA(rN,FU,"PUBLIC").setMultipleInstances(!0)),(0,Rs.registerVersion)(tN,"0.11.2",""),(0,Rs.registerVersion)(tN,"0.11.2","esm2017")}();class e_{constructor(e){return e}}const aN="storage",HS=new o.OlP("angularfire2.storage-instances");function BU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new e_(r)}}const jU={provide:class VU{constructor(){return(0,cn.vb)(aN)}},deps:[[new o.FiY,HS]]},$U={provide:e_,useFactory:function UU(n,e){const t=(0,cn.JM)(aN,n,e);return t&&new e_(t)},deps:[[new o.FiY,HS],El]};let HU=(()=>{class n{constructor(){(0,bl.KN)("angularfire",cn.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[$U,jU]}),n})();function GU(n,...e){return{ngModule:HU,providers:[{provide:HS,useFactory:BU(n),multi:!0,deps:[o.R0b,o.zs3,cn.HU,Iv,[new o.FiY,s0],[new o.FiY,Dp],...e]}]}}const qU=(0,cn.u3)(sN,!0),zU=(0,cn.u3)(RU,!0),ZU=(0,cn.u3)(iN,!0),uN=(0,cn.u3)($S,!0),WU=(0,cn.u3)(xU,!0);var lN=U(4986);function GS(){return(0,ti.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function YU(n,e){return n===e}U(9568);var ot,cN=U(3942),QU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wu={},qS=qS||{},Yt=QU||self;function wI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function b0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var zS="closure_uid_"+(1e9*Math.random()>>>0),XU=0;function eB(n,e,t){return n.call.apply(n.bind,arguments)}function tB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function gs(n,e,t){return(gs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eB:tB).apply(null,arguments)}function CI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Oi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function Mh(){this.s=this.s,this.o=this.o}Mh.prototype.s=!1,Mh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function JU(n){Object.prototype.hasOwnProperty.call(n,zS)&&n[zS]||(n[zS]=++XU)}(this)},Mh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ZS(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hN(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(wI(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function ms(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ms.prototype.h=function(){this.defaultPrevented=!0};var rB=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",()=>{},e),Yt.removeEventListener("test",()=>{},e)}catch{}return n}();function E0(n){return/^[\s\xa0]*$/.test(n)}function bI(){var n=Yt.navigator;return n&&(n=n.userAgent)?n:""}function Ml(n){return-1!=bI().indexOf(n)}function WS(n){return WS[" "](n),n}WS[" "]=function(){};var YS,n,sB=Ml("Opera"),t_=Ml("Trident")||Ml("MSIE"),fN=Ml("Edge"),KS=fN||t_,pN=Ml("Gecko")&&!(-1!=bI().toLowerCase().indexOf("webkit")&&!Ml("Edge"))&&!(Ml("Trident")||Ml("MSIE"))&&!Ml("Edge"),oB=-1!=bI().toLowerCase().indexOf("webkit")&&!Ml("Edge");function gN(){var n=Yt.document;return n?n.documentMode:void 0}e:{var QS="",JS=(n=bI(),pN?/rv:([^\);]+)(\)|;)/.exec(n):fN?/Edge\/([\d\.]+)/.exec(n):t_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):oB?/WebKit\/(\S+)/.exec(n):sB?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(JS&&(QS=JS?JS[1]:""),t_){var XS=gN();if(null!=XS&&XS>parseFloat(QS)){YS=String(XS);break e}}YS=QS}var aB=Yt.document&&t_&&(gN()||parseInt(YS,10))||void 0;function I0(n,e){if(ms.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pN){e:{try{WS(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:uB[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&I0.$.h.call(this)}}Oi(I0,ms);var uB={2:"touch",3:"pen",4:"mouse"};I0.prototype.h=function(){I0.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var T0="closure_listenable_"+(1e6*Math.random()|0),lB=0;function cB(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++lB,this.fa=this.ia=!1}function EI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function t1(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _N(n){const e={};for(const t in n)e[t]=n[t];return e}const yN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vN(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<yN.length;u++)t=yN[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function II(n){this.src=n,this.g={},this.h=0}function n1(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=dN(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(EI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function r1(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}II.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=r1(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new cB(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var i1="closure_lm_"+(1e6*Math.random()|0),s1={};function wN(n,e,t,r,i){if(r&&r.once)return bN(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)wN(n,e[u],t,r,i);return null}return t=l1(t),n&&n[T0]?n.O(e,t,b0(r)?!!r.capture:!!r,i):CN(n,e,t,!1,r,i)}function CN(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=b0(i)?!!i.capture:!!i,f=a1(n);if(f||(n[i1]=f=new II(n)),(t=f.add(e,t,r,c,u)).proxy)return t;if(r=function hB(){const e=fB;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)rB||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(IN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function bN(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)bN(n,e[u],t,r,i);return null}return t=l1(t),n&&n[T0]?n.P(e,t,b0(r)?!!r.capture:!!r,i):CN(n,e,t,!0,r,i)}function EN(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)EN(n,e[u],t,r,i);else r=b0(r)?!!r.capture:!!r,t=l1(t),n&&n[T0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=r1(u=n.g[e],t,r,i))&&(EI(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=a1(n))&&(e=n.g[e.toString()],n=-1,e&&(n=r1(e,t,r,i)),(t=-1<n?e[n]:null)&&o1(t))}function o1(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[T0])n1(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(IN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=a1(e))?(n1(t,n),0==t.h&&(t.src=null,e[i1]=null)):EI(n)}}}function IN(n){return n in s1?s1[n]:s1[n]="on"+n}function fB(n,e){if(n.fa)n=!0;else{e=new I0(e,this);var t=n.listener,r=n.la||n.src;n.ia&&o1(n),n=t.call(r,e)}return n}function a1(n){return(n=n[i1])instanceof II?n:null}var u1="__closure_events_fn_"+(1e9*Math.random()>>>0);function l1(n){return"function"==typeof n?n:(n[u1]||(n[u1]=function(e){return n.handleEvent(e)}),n[u1])}function Ni(){Mh.call(this),this.i=new II(this),this.S=this,this.J=null}function Ji(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new ms(e,n);else if(e instanceof ms)e.target=e.target||n;else{var i=e;vN(e=new ms(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=TI(c,r,!0,e)&&i}if(i=TI(c=e.g=n,r,!0,e)&&i,i=TI(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=TI(c=e.g=t[u],r,!1,e)&&i}function TI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var f=c.listener,m=c.la||c.src;c.ia&&n1(n.i,c),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Oi(Ni,Mh),Ni.prototype[T0]=!0,Ni.prototype.removeEventListener=function(n,e,t,r){EN(this,n,e,t,r)},Ni.prototype.N=function(){if(Ni.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)EI(t[r]);delete n.g[e],n.h--}}this.J=null},Ni.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ni.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var c1=Yt.JSON.stringify;function gB(){var n=d1;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var TN=new class pB{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _B,n=>n.reset());class _B{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yB(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function vB(n){Yt.setTimeout(()=>{throw n},0)}let D0,A0=!1,d1=new class mB{constructor(){this.h=this.g=null}add(e,t){const r=TN.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},DN=()=>{const n=Yt.Promise.resolve(void 0);D0=()=>{n.then(wB)}};var wB=()=>{for(var n;n=gB();){try{n.h.call(n.g)}catch(t){vB(t)}var e=TN;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}A0=!1};function DI(n,e){Ni.call(this),this.h=n||1,this.g=e||Yt,this.j=gs(this.qb,this),this.l=Date.now()}function h1(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function f1(n,e,t){if("function"==typeof n)t&&(n=gs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gs(n.handleEvent,n)}return 2147483647<Number(e)?-1:Yt.setTimeout(n,e||0)}function AN(n){n.g=f1(()=>{n.g=null,n.i&&(n.i=!1,AN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Oi(DI,Ni),(ot=DI.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ji(this,"tick"),this.ga&&(h1(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){DI.$.N.call(this),h1(this),delete this.g};class CB extends Mh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:AN(this)}N(){super.N(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function x0(n){Mh.call(this),this.h=n,this.g={}}Oi(x0,Mh);var xN=[];function SN(n,e,t,r){Array.isArray(t)||(t&&(xN[0]=t.toString()),t=xN);for(var i=0;i<t.length;i++){var u=wN(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function MN(n){t1(n.g,function(e,t){this.g.hasOwnProperty(t)&&o1(e)},n),n.g={}}function AI(){this.g=!0}function n_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function TB(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return c1(t)}catch{return e}}(n,t)+(r?" "+r:"")})}x0.prototype.N=function(){x0.$.N.call(this),MN(this)},x0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},AI.prototype.Ea=function(){this.g=!1},AI.prototype.info=function(){};var Pp={},PN=null;function xI(){return PN=PN||new Ni}function kN(n){ms.call(this,Pp.Ta,n)}function S0(n){const e=xI();Ji(e,new kN(e))}function ON(n,e){ms.call(this,Pp.STAT_EVENT,n),this.stat=e}function Vs(n){const e=xI();Ji(e,new ON(e,n))}function NN(n,e){ms.call(this,Pp.Ua,n),this.size=e}function M0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},e)}Pp.Ta="serverreachability",Oi(kN,ms),Pp.STAT_EVENT="statevent",Oi(ON,ms),Pp.Ua="timingevent",Oi(NN,ms);var SI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function p1(){}function LN(){}p1.prototype.h=null;var _1,P0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function g1(){ms.call(this,"d")}function m1(){ms.call(this,"c")}function MI(){}function k0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new x0(this),this.P=DB,this.V=new DI(n=KS?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new VN}function VN(){this.i=null,this.g="",this.h=!1}Oi(g1,ms),Oi(m1,ms),Oi(MI,p1),MI.prototype.g=function(){return new XMLHttpRequest},MI.prototype.i=function(){return{}},_1=new MI;var DB=45e3,y1={},PI={};function v1(n,e,t){n.L=1,n.v=RI(id(e)),n.s=t,n.S=!0,UN(n,null)}function UN(n,e){n.G=Date.now(),O0(n),n.A=id(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),KN(t.i,"t",r),n.C=0,t=n.l.J,n.h=new VN,n.g=vR(n.l,t?e:null,!n.s),0<n.O&&(n.M=new CB(gs(n.Pa,n,n.g),n.O)),SN(n.U,n.g,"readystatechange",n.nb),e=n.I?_N(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),S0(),function bB(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",f=u.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var D=v[0];v=v[1];var A=D.split("_");c=2<=A.length&&"type"==A[1]?c+(D+"=")+v+"&":c+(D+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function BN(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function jN(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=AB(n,t),i==PI){4==e&&(n.o=4,Vs(14),r=!1),n_(n.j,n.m,null,"[Incomplete Response]");break}if(i==y1){n.o=4,Vs(15),n_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}n_(n.j,n.m,i,null),w1(n,i)}BN(n)&&i!=PI&&i!=y1&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),A1(e),e.M=!0,Vs(11))):(n_(n.j,n.m,t,"[Invalid Chunked Response]"),kp(n),N0(n))}function AB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?PI:(t=Number(e.substring(t,r)),isNaN(t)?y1:(r+=1)+t>e.length?PI:(e=e.slice(r,r+t),n.C=r+t,e))}function O0(n){n.Y=Date.now()+n.P,$N(n,n.P)}function $N(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=M0(gs(n.lb,n),e)}function kI(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function N0(n){0==n.l.H||n.J||gR(n.l,n)}function kp(n){kI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,h1(n.V),MN(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function w1(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||C1(t.i,n)))if(!n.K&&C1(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;jI(t),UI(t)}D1(t),Vs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=M0(gs(t.ib,t),6e3));if(1>=JN(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Np(t,11)}else if((n.K||t.g==n)&&jI(t),!E0(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const D=v[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const A=v[4];null!=A&&(t.Ga=A,t.l.info("SVER="+t.Ga));const L=v[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const z=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.i;u.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(b1(u,u.h),u.h=null))}if(r.F){const ee=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.Da=ee,lr(r.I,r.F,ee))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=yR(r,r.J?r.pa:null,r.Y),c.K){XN(r.i,c);var f=c,m=r.L;m&&f.setTimeout(m),f.B&&(kI(f),O0(f)),r.g=c}else fR(r);0<t.j.length&&BI(t)}else"stop"!=v[0]&&"close"!=v[0]||Np(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Np(t,7):T1(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}S0()}catch{}}function HN(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(wI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function SB(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(wI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function xB(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(wI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(ot=k0.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const e=this.M;e&&3==Pl(n)?e.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const D=Pl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||KS||this.g&&(this.h.h||this.g.ja()||aR(this.g)))){this.J||4!=D||7==e||S0(),kI(this);var t=this.g.da();this.ca=t;t:if(BN(this)){var r=aR(this.g);n="";var i=r.length,u=4==Pl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kp(this),N0(this);var c="";break t}this.h.i=new Yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function EB(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E0(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Vs(12),kp(this),N0(this);break e}n_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,w1(this,t)}this.S?(jN(this,D,c),KS&&this.i&&3==D&&(SN(this.U,this.V,"tick",this.mb),this.V.start())):(n_(this.j,this.m,c,null),w1(this,c)),4==D&&kp(this),this.i&&!this.J&&(4==D?gR(this.l,this):(this.i=!1,O0(this)))}else(function ZB(n){const e={};n=(n.g&&2<=Pl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(E0(n[r]))continue;var t=yB(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function dB(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Vs(12)):(this.o=0,Vs(13)),kp(this),N0(this)}}}catch{}},ot.mb=function(){if(this.g){var n=Pl(this.g),e=this.g.ja();this.C<e.length&&(kI(this),jN(this,n,e),this.i&&4!=n&&O0(this))}},ot.cancel=function(){this.J=!0,kp(this)},ot.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function IB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(S0(),Vs(17)),kp(this),this.o=2,N0(this)):$N(this,this.Y-n)};var GN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Op(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Op){this.h=n.h,OI(this,n.j),this.s=n.s,this.g=n.g,NI(this,n.m),this.l=n.l;var e=n.i,t=new L0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),qN(this,t),this.o=n.o}else n&&(e=String(n).match(GN))?(this.h=!1,OI(this,e[1]||"",!0),this.s=R0(e[2]||""),this.g=R0(e[3]||"",!0),NI(this,e[4]),this.l=R0(e[5]||"",!0),qN(this,e[6]||"",!0),this.o=R0(e[7]||"")):(this.h=!1,this.i=new L0(null,this.h))}function id(n){return new Op(n)}function OI(n,e,t){n.j=t?R0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function NI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function qN(n,e,t){e instanceof L0?(n.i=e,function FB(n,e){e&&!n.j&&(Ph(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ZN(this,r),KN(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=F0(e,NB)),n.i=new L0(e,n.h))}function lr(n,e,t){n.i.set(e,t)}function RI(n){return lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function R0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function F0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Op.prototype.toString=function(){var n=[],e=this.j;e&&n.push(F0(e,zN,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(F0(e,zN,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(F0(t,"/"==t.charAt(0)?OB:kB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",F0(t,RB)),n.join("")};var zN=/[#\/\?@]/g,kB=/[#\?:]/g,OB=/[#\?]/g,NB=/[#\?@]/g,RB=/#/g;function L0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ph(n){n.g||(n.g=new Map,n.h=0,n.i&&function MB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ZN(n,e){Ph(n),e=r_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function WN(n,e){return Ph(n),e=r_(n,e),n.g.has(e)}function KN(n,e,t){ZN(n,e),0<t.length&&(n.i=null,n.g.set(r_(n,e),ZS(t)),n.h+=t.length)}function r_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function YN(n){this.l=n||VB,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ka&&Yt.g.Ka()&&Yt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=L0.prototype).add=function(n,e){Ph(this),this.i=null,n=r_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Ph(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.ta=function(){Ph(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},ot.Z=function(n){Ph(this);let e=[];if("string"==typeof n)WN(this,n)&&(e=e.concat(this.g.get(r_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Ph(this),this.i=null,WN(this,n=r_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var VB=10;function QN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function JN(n){return n.h?1:n.g?n.g.size:0}function C1(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function b1(n,e){n.g?n.g.add(e):n.h=e}function XN(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function eR(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return ZS(n.i)}function BB(){this.g=new class{stringify(n){return Yt.JSON.stringify(n,void 0)}parse(n){return Yt.JSON.parse(n,void 0)}}}function jB(n,e,t){const r=t||"";try{HN(n,function(i,u){let c=i;b0(i)&&(c=c1(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function FI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function V0(n){this.l=n.fc||null,this.j=n.ob||!1}function LI(n,e){Ni.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=E1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}YN.prototype.cancel=function(){if(this.i=eR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Oi(V0,p1),V0.prototype.g=function(){return new LI(this.l,this.j)},V0.prototype.i=function(n){return function(){return n}}({}),Oi(LI,Ni);var E1=0;function tR(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function U0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,B0(n)}function B0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=LI.prototype).open=function(n,e){if(this.readyState!=E1)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,B0(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,U0(this)),this.readyState=E1},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,B0(this)),this.g&&(this.readyState=3,B0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tR(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?U0(this):B0(this),3==this.readyState&&tR(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,U0(this))},ot.Ya=function(n){this.g&&(this.response=n,U0(this))},ot.ka=function(){this.g&&U0(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(LI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var HB=Yt.JSON.parse;function Vr(n){Ni.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nR,this.L=this.M=!1}Oi(Vr,Ni);var nR="",GB=/^https?$/i,qB=["POST","PUT"];function rR(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iR(n),VI(n)}function iR(n){n.F||(n.F=!0,Ji(n,"complete"),Ji(n,"error"))}function sR(n){if(n.h&&typeof qS<"u"&&(!n.C[1]||4!=Pl(n)||2!=n.da()))if(n.v&&4==Pl(n))f1(n.La,0,n);else if(Ji(n,"readystatechange"),4==Pl(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(GN)[1]||null;!i&&Yt.self&&Yt.self.location&&(i=Yt.self.location.protocol.slice(0,-1)),r=!GB.test(i?i.toLowerCase():"")}t=r}if(t)Ji(n,"complete"),Ji(n,"success");else{n.m=6;try{var u=2<Pl(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",iR(n)}}finally{VI(n)}}}function VI(n,e){if(n.g){oR(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Ji(n,"ready");try{t.onreadystatechange=r}catch{}}}function oR(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function Pl(n){return n.g?n.g.readyState:0}function aR(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case nR:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function uR(n){let e="";return t1(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function I1(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=uR(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):lr(n,e,t))}function j0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lR(n){this.Ga=0,this.j=[],this.l=new AI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=j0("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=j0("baseRetryDelayMs",5e3,n),this.hb=j0("retryDelaySeedMs",1e4,n),this.eb=j0("forwardChannelMaxRetries",2,n),this.xa=j0("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new YN(n&&n.concurrentRequestLimit),this.Ja=new BB,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function T1(n){if(cR(n),3==n.H){var e=n.W++,t=id(n.I);if(lr(t,"SID",n.K),lr(t,"RID",e),lr(t,"TYPE","terminate"),$0(n,t),(e=new k0(n,n.l,e)).L=2,e.v=RI(id(t)),t=!1,Yt.navigator&&Yt.navigator.sendBeacon)try{t=Yt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vR(e.l,null),e.g.ha(e.v)),e.G=Date.now(),O0(e)}_R(n)}function UI(n){n.g&&(A1(n),n.g.cancel(),n.g=null)}function cR(n){UI(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),jI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function BI(n){if(!QN(n.i)&&!n.m){n.m=!0;var e=n.Na;D0||DN(),A0||(D0(),A0=!0),d1.add(e,n),n.C=0}}function dR(n,e){var t;t=e?e.m:n.W++;const r=id(n.I);lr(r,"SID",n.K),lr(r,"RID",t),lr(r,"AID",n.V),$0(n,r),n.o&&n.s&&I1(r,n.o,n.s),t=new k0(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=hR(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),b1(n.i,t),v1(t,r,e)}function $0(n,e){n.na&&t1(n.na,function(t,r){lr(e,r,t)}),n.h&&HN({},function(t,r){lr(e,r,t)})}function hR(n,e,t){t=Math.min(n.j.length,t);var r=n.h?gs(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let f=!0;for(let m=0;m<t;m++){let v=i[m].g;const D=i[m].map;if(v-=u,0>v)u=Math.max(0,i[m].g-100),f=!1;else try{jB(D,c,"req"+v+"_")}catch{r&&r(D)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function fR(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;D0||DN(),A0||(D0(),A0=!0),d1.add(e,n),n.A=0}}function D1(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=M0(gs(n.Ma,n),mR(n,n.A)),n.A++,0))}function A1(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function pR(n){n.g=new k0(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=id(n.wa);lr(e,"RID","rpc"),lr(e,"SID",n.K),lr(e,"AID",n.V),lr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&lr(e,"TO",n.qa),lr(e,"TYPE","xmlhttp"),$0(n,e),n.o&&n.s&&I1(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=RI(id(e)),t.s=null,t.S=!0,UN(t,n)}function jI(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function gR(n,e){var t=null;if(n.g==e){jI(n),A1(n),n.g=null;var r=2}else{if(!C1(n.i,e))return;t=e.F,XN(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Ji(r=xI(),new NN(r,t)),BI(n)}else fR(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function WB(n,e){return!(JN(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=M0(gs(n.Na,n,e),mR(n,n.C)),n.C++,0)))}(n,e)||2==r&&D1(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Np(n,5);break;case 4:Np(n,10);break;case 3:Np(n,6);break;default:Np(n,2)}}function mR(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Np(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=gs(n.pb,n);t||(t=new Op("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||OI(t,"https"),RI(t)),function $B(n,e){const t=new AI;if(Yt.Image){const r=new Image;r.onload=CI(FI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=CI(FI,t,r,"TestLoadImage: error",!1,e),r.onabort=CI(FI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=CI(FI,t,r,"TestLoadImage: timeout",!1,e),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vs(2);n.H=0,n.h&&n.h.za(e),_R(n),cR(n)}function _R(n){if(n.H=0,n.ma=[],n.h){const e=eR(n.i);(0!=e.length||0!=n.j.length)&&(hN(n.ma,e),hN(n.ma,n.j),n.i.i.length=0,ZS(n.j),n.j.length=0),n.h.ya()}}function yR(n,e,t){var r=t instanceof Op?id(t):new Op(t);if(""!=r.g)e&&(r.g=e+"."+r.g),NI(r,r.m);else{var i=Yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new Op(null);r&&OI(u,r),e&&(u.g=e),i&&NI(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&lr(r,t,e),lr(r,"VER",n.ra),$0(n,r),r}function vR(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t&&n.Ha&&!n.va?new V0({ob:!0}):n.va)).Oa(n.J),e}function wR(){}function $I(){if(t_&&!(10<=Number(aB)))throw Error("Environmental error: no available transport.")}function Lo(n,e){Ni.call(this),this.g=new lR(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!E0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E0(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new i_(this)}function CR(n){g1.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bR(){m1.call(this),this.status=1}function i_(n){this.g=n}function Cu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function x1(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=u+((c=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function Vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(ot=Vr.prototype).Oa=function(n){this.M=n},ot.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_1.g(),this.C=function FN(n){return n.h||(n.h=n.i())}(this.u?this.u:_1),this.g.onreadystatechange=gs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void rR(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Yt.FormData&&n instanceof Yt.FormData,!(0<=dN(qB,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{oR(this),0<this.B&&((this.L=function zB(n){return t_&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gs(this.ua,this)):this.A=f1(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){rR(this,u)}},ot.ua=function(){typeof qS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ji(this,"complete"),Ji(this,"abort"),VI(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),VI(this,!0)),Vr.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?sR(this):this.kb())},ot.kb=function(){sR(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<Pl(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),HB(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=lR.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new k0(this,this.l,n);let u=this.s;if(this.U&&(u?(u=_N(u),vN(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=hR(this,i,e),lr(t=id(this.I),"RID",n),lr(t,"CVER",22),this.F&&lr(t,"X-HTTP-Session-Id",this.F),$0(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(uR(u)))+"&"+e:this.o&&I1(t,this.o,u)),b1(this.i,i),this.bb&&lr(t,"TYPE","init"),this.P?(lr(t,"$req",e),lr(t,"SID","null"),i.aa=!0,v1(i,t,null)):v1(i,t,e),this.H=2}}else 3==this.H&&(n?dR(this,n):0==this.j.length||QN(this.i)||dR(this))},ot.Ma=function(){if(this.u=null,pR(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=M0(gs(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vs(10),UI(this),pR(this))},ot.ib=function(){null!=this.v&&(this.v=null,UI(this),D1(this),Vs(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Vs(2)):(this.l.info("Failed to ping google.com"),Vs(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=wR.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},$I.prototype.g=function(n,e){return new Lo(n,e)},Oi(Lo,Ni),Lo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Vs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yR(n,null,n.Y),BI(n)},Lo.prototype.close=function(){T1(this.g)},Lo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=c1(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&BI(e)},Lo.prototype.N=function(){this.g.h=null,delete this.j,T1(this.g),delete this.g,Lo.$.N.call(this)},Oi(CR,g1),Oi(bR,m1),Oi(i_,wR),i_.prototype.Ba=function(){Ji(this.g,"a")},i_.prototype.Aa=function(n){Ji(this.g,new CR(n))},i_.prototype.za=function(n){Ji(this.g,new bR)},i_.prototype.ya=function(){Ji(this.g,"b")},Oi(Cu,function KB(){this.blockSize=-1}),Cu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Cu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)x1(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){x1(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){x1(this,r),i=0;break}}this.h=i,this.i+=e},Cu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var YB={};function S1(n){return-128<=n&&128>n?function iB(n,e){var t=YB;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Vn([0|e],0>e?-1:0)}):new Vn([0|n],0>n?-1:0)}function kl(n){if(isNaN(n)||!isFinite(n))return s_;if(0>n)return Xi(kl(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=M1;return new Vn(e,0)}var M1=4294967296,s_=S1(0),P1=S1(1),IR=S1(16777216);function sd(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ca(n){return-1==n.h}function Xi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Vn(t,~n.h).add(P1)}function HI(n,e){return n.add(Xi(e))}function GI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function H0(n,e){this.g=n,this.h=e}function qI(n,e){if(sd(e))throw Error("division by zero");if(sd(n))return new H0(s_,s_);if(Ca(n))return e=qI(Xi(n),e),new H0(Xi(e.g),Xi(e.h));if(Ca(e))return e=qI(n,Xi(e)),new H0(Xi(e.g),e.h);if(30<n.g.length){if(Ca(n)||Ca(e))throw Error("slowDivide_ only works with positive integers.");for(var t=P1,r=e;0>=r.X(n);)t=TR(t),r=TR(r);var i=o_(t,1),u=o_(r,1);for(r=o_(r,2),t=o_(t,2);!sd(r);){var c=u.add(r);0>=c.X(n)&&(i=i.add(t),u=c),r=o_(r,1),t=o_(t,1)}return e=HI(n,i.R(e)),new H0(i,e)}for(i=s_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=kl(t)).R(e);Ca(c)||0<c.X(n);)c=(u=kl(t-=r)).R(e);sd(u)&&(u=P1),i=i.add(u),n=HI(n,c)}return new H0(i,n)}function TR(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Vn(t,n.h)}function o_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Vn(i,n.h)}(ot=Vn.prototype).ea=function(){if(Ca(this))return-Xi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:M1+r)*e,e*=M1}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(sd(this))return"0";if(Ca(this))return"-"+Xi(this).toString(n);for(var e=kl(Math.pow(n,6)),t=this,r="";;){var i=qI(t,e).g,u=((0<(t=HI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(sd(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return Ca(n=HI(this,n))?-1:sd(n)?0:1},ot.abs=function(){return Ca(this)?Xi(this):this},ot.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),c=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(u&=65535)}return new Vn(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(n){if(sd(this)||sd(n))return s_;if(Ca(this))return Ca(n)?Xi(this).R(Xi(n)):Xi(Xi(this).R(n));if(Ca(n))return Xi(this.R(Xi(n)));if(0>this.X(IR)&&0>n.X(IR))return kl(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=c*m,GI(t,2*r+2*i),t[2*r+2*i+1]+=u*m,GI(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,GI(t,2*r+2*i+1),t[2*r+2*i+2]+=u*f,GI(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Vn(t,0)},ot.gb=function(n){return qI(this,n).h},ot.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Vn(t,this.h&n.h)},ot.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Vn(t,this.h|n.h)},ot.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Vn(t,this.h^n.h)},$I.prototype.createWebChannel=$I.prototype.g,Lo.prototype.send=Lo.prototype.u,Lo.prototype.open=Lo.prototype.m,Lo.prototype.close=Lo.prototype.close,SI.NO_ERROR=0,SI.TIMEOUT=8,SI.HTTP_ERROR=6,RN.COMPLETE="complete",LN.EventType=P0,P0.OPEN="a",P0.CLOSE="b",P0.ERROR="c",P0.MESSAGE="d",Ni.prototype.listen=Ni.prototype.O,Vr.prototype.listenOnce=Vr.prototype.P,Vr.prototype.getLastError=Vr.prototype.Sa,Vr.prototype.getLastErrorCode=Vr.prototype.Ia,Vr.prototype.getStatus=Vr.prototype.da,Vr.prototype.getResponseJson=Vr.prototype.Wa,Vr.prototype.getResponseText=Vr.prototype.ja,Vr.prototype.send=Vr.prototype.ha,Vr.prototype.setWithCredentials=Vr.prototype.Oa,Cu.prototype.digest=Cu.prototype.l,Cu.prototype.reset=Cu.prototype.reset,Cu.prototype.update=Cu.prototype.j,Vn.prototype.add=Vn.prototype.add,Vn.prototype.multiply=Vn.prototype.R,Vn.prototype.modulo=Vn.prototype.gb,Vn.prototype.compare=Vn.prototype.X,Vn.prototype.toNumber=Vn.prototype.ea,Vn.prototype.toString=Vn.prototype.toString,Vn.prototype.getBits=Vn.prototype.D,Vn.fromNumber=kl,Vn.fromString=function ER(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Xi(ER(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=kl(Math.pow(e,8)),r=s_,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+u),e);8>u?(u=kl(Math.pow(e,u)),r=r.R(u).add(kl(c))):r=(r=r.R(t)).add(kl(c))}return r};var QB=wu.createWebChannelTransport=function(){return new $I},JB=wu.getStatEventTarget=function(){return xI()},k1=wu.ErrorCode=SI,XB=wu.EventType=RN,e3=wu.Event=Pp,DR=wu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},t3=wu.FetchXmlHttpFactory=V0,zI=wu.WebChannel=LN,n3=wu.XhrIo=Vr,r3=wu.Md5=Cu,a_=wu.Integer=Vn;const AR="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let u_="9.23.0";const kh=new Il.Yd("@firebase/firestore");function O1(){return kh.logLevel}function Be(n,...e){if(kh.logLevel<=Il.in.DEBUG){const t=e.map(N1);kh.debug(`Firestore (${u_}): ${n}`,...t)}}function Zr(n,...e){if(kh.logLevel<=Il.in.ERROR){const t=e.map(N1);kh.error(`Firestore (${u_}): ${n}`,...t)}}function ba(n,...e){if(kh.logLevel<=Il.in.WARN){const t=e.map(N1);kh.warn(`Firestore (${u_}): ${n}`,...t)}}function N1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${u_}) INTERNAL ASSERTION FAILED: `+n;throw Zr(e),new Error(e)}function Tt(n,e){n||ft()}function st(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class xR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class a3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class u3{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let c=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yi,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const v=c;e.enqueueRetryable((0,ae.Z)(function*(){yield v.promise,yield u(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new xR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Ri(e)}}class l3{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class c3{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new l3(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d3{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.T=t.token,new SR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function h3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class MR{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=h3(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function l_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function PR(n){return n+"\0"}class Er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Er.fromMillis(Date.now())}static fromDate(e){return Er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Er(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new Er(0,0))}static max(){return new At(new Er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class G0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===G0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof G0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class In extends G0{construct(e,t,r){return new In(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new In(t)}static emptyPath(){return new In([])}}const f3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends G0{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return f3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(u(),i++)}if(u(),c)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(In.fromString(e))}static fromName(e){return new rt(In.fromString(e).popFirst(5))}static empty(){return new rt(In.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===In.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return In.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new In(e.slice()))}}class ZI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function R1(n){return n.fields.find(e=>2===e.kind)}function Rp(n){return n.fields.filter(e=>2!==e.kind)}ZI.UNKNOWN_ID=-1;class WI{constructor(e,t){this.fieldPath=e,this.kind=t}}class q0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new q0(0,Vo.min())}}function kR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new Er(t+1,0):new Er(t,r));return new Vo(i,rt.empty(),e)}function OR(n){return new Vo(n.readTime,n.key,-1)}class Vo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Vo(At.min(),rt.empty(),-1)}static max(){return new Vo(At.max(),rt.empty(),-1)}}function F1(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Oh(n){return L1.apply(this,arguments)}function L1(){return L1=(0,ae.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==NR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),L1.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,u=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++u,c&&u===i&&t()},m=>r(m))}),c=!0,u===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const u=e.length,c=new Array(u);let f=0;for(let m=0;m<u;m++){const v=m;t(e[v]).next(D=>{c[v]=D,++f,f===u&&r(c)},D=>i(D))}})}static doWhile(e,t){return new le((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class KI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new yi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new z0(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=V1(r.target.error);this.v.reject(new z0(e,i))}}static open(e,t,r,i){try{return new KI(t,e.transaction(i,r))}catch(u){throw new z0(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _3(t)}}class bu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===bu.S((0,Gt.z$)())&&Zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Fp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Gt.hl)())return!1;if(bu.C())return!0;const e=(0,Gt.z$)(),t=bu.S(e),r=0<t&&t<10,i=bu.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ae.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new z0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Re(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new z0(e,f))},u.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,ae.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{u.db=yield u.$(e);const m=KI.open(u.db,e,c?"readonly":"readwrite",r),v=i(m).next(D=>(m.P(),D)).catch(D=>(m.abort(D),le.reject(D))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,D="FirebaseError"!==v.name&&f<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",D),u.close(),!D)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class m3{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Fp(this.L.delete())}}class z0 extends Re{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nh(n){return"IndexedDbTransactionError"===n.name}class _3{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fp(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Fp(this.store.add(e))}get(e){return Fp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Fp(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Fp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(c,f)=>{u.push(f)}).next(()=>u)}{const i=this.store.getAll(r.range);return new le((u,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{u(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=u=>{const c=V1(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new le((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const m=new m3(f),v=t(f.primaryKey,f.value,m);if(v instanceof le){const D=v.catch(A=>(m.done(),le.reject(A)));r.push(D)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fp(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=V1(r.target.error);t(i)}})}let FR=!1;function V1(n){const e=bu.S((0,Gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FR||(FR=!0,setTimeout(()=>{throw r},0)),r}}return n}class y3{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ae.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Nh(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Oh(r)}yield t.et(6e4)}))}}class v3{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return le.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Be("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,u)).next(f=>(Be("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=OR(u);F1(c,r)>0&&(r=c)}),new Vo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Uo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Z0(n){return null==n}function W0(n){return 0===n&&1/n==-1/0}function LR(n){return"number"==typeof n&&Number.isInteger(n)&&!W0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function _s(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VR(e)),e=w3(n.get(t),e);return VR(e)}function w3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function VR(n){return n+"\x01\x01"}function Ol(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),In.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&ft(),n.charAt(c+1)){case"\x01":const f=n.substring(u,c);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:ft()}u=c+2}return new In(r)}const UR=["userId","batchId"];function YI(n,e){return[n,_s(e)]}function BR(n,e,t){return[n,_s(e),t]}const C3={},b3=["prefixPath","collectionGroup","readTime","documentId"],E3=["prefixPath","collectionGroup","documentId"],I3=["collectionGroup","readTime","prefixPath","documentId"],T3=["canonicalId","targetId"],D3=["targetId","path"],A3=["path","targetId"],x3=["collectionId","parent"],S3=["indexId","uid"],M3=["uid","sequenceNumber"],P3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],k3=["indexId","uid","orderedDocumentKey"],O3=["userId","collectionPath","documentId"],N3=["userId","collectionPath","largestBatchId"],R3=["userId","collectionGroup","largestBatchId"],jR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],F3=[...jR,"documentOverlays"],$R=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HR=$R,L3=[...HR,"indexConfiguration","indexState","indexEntries"];class U1 extends RR{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Fi(n,e){const t=st(n);return bu.M(t.ht,e)}function GR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nr{constructor(e,t){this.comparator=e,this.root=t||es.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,es.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,es.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new QI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new QI(this.root,e,this.comparator,!1)}getReverseIterator(){return new QI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new QI(this.root,e,this.comparator,!0)}}class QI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class es{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??es.RED,this.left=i??es.EMPTY,this.right=u??es.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new es(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return es.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return es.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,es.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,es.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}es.EMPTY=null,es.RED=!0,es.BLACK=!1,es.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new es(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zR(this.data.getIterator())}getIteratorFrom(e){return new zR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class zR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function c_(n){return n.hasNext()?n.getNext():void 0}class uo{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new uo([])}unionWith(e){let t=new cr(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return l_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ZR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ZR("Invalid base64 string: "+i):i}}(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const U3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fh(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=U3.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function od(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function JI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XI(n){const e=n.mapValue.fields.__previous_value__;return JI(e)?XI(e):e}function K0(n){const e=Fh(n.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}class B3{constructor(e,t,r,i,u,c,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v}}class Lh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lh&&e.projectId===this.projectId&&e.database===this.database}}const Vh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eT={nullValue:"NULL_VALUE"};function Uh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?JI(n)?4:QR(n)?9007199254740991:10:ft()}function Nl(n,e){if(n===e)return!0;const t=Uh(n);if(t!==Uh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return K0(n).isEqual(K0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=Fh(r.timestampValue),c=Fh(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,od(n.bytesValue).isEqual(od(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=Br(r.doubleValue),c=Br(i.doubleValue);return u===c?W0(u)===W0(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return l_(n.arrayValue.values||[],e.arrayValue.values||[],Nl);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(GR(u)!==GR(c))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(void 0===c[f]||!Nl(u[f],c[f])))return!1;return!0}(n,e);default:return ft()}var i}function Y0(n,e){return void 0!==(n.values||[]).find(t=>Nl(t,e))}function Bh(n,e){if(n===e)return 0;const t=Uh(n),r=Uh(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=Br(i.integerValue||i.doubleValue),f=Br(u.integerValue||u.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return WR(n.timestampValue,e.timestampValue);case 4:return WR(K0(n),K0(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=od(i),f=od(u);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),f=u.split("/");for(let m=0;m<c.length&&m<f.length;m++){const v=Kt(c[m],f[m]);if(0!==v)return v}return Kt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Kt(Br(i.latitude),Br(u.latitude));return 0!==c?c:Kt(Br(i.longitude),Br(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],f=u.values||[];for(let m=0;m<c.length&&m<f.length;++m){const v=Bh(c[m],f[m]);if(v)return v}return Kt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===Vh.mapValue&&u===Vh.mapValue)return 0;if(i===Vh.mapValue)return 1;if(u===Vh.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),m=u.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let D=0;D<f.length&&D<v.length;++D){const A=Kt(f[D],v[D]);if(0!==A)return A;const L=Bh(c[f[D]],m[v[D]]);if(0!==L)return L}return Kt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw ft()}}function WR(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Fh(n),r=Fh(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function d_(n){return B1(n)}function B1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Fh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?od(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=B1(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const f of i)c?c=!1:u+=",",u+=`${f}:${B1(r.fields[f])}`;return u+"}"}(n.mapValue):ft();var e}function Lp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j1(n){return!!n&&"integerValue"in n}function Q0(n){return!!n&&"arrayValue"in n}function KR(n){return!!n&&"nullValue"in n}function YR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nT(n){return!!n&&"mapValue"in n}function J0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=J0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=J0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QR(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function j3(n){return"nullValue"in n?eT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lp(Lh.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function $3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lp(Lh.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vh:ft()}function JR(n,e){const t=Bh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XR(n,e){const t=Bh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ts{constructor(e){this.value=e}static empty(){return new ts({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=J0(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=J0(c):i.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());nT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rh(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ts(J0(this.value))}}function eF(n){const e=[];return Rh(n.fields,(t,r)=>{const i=new Ur([t]);if(nT(r)){const u=eF(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new uo(e)}class dr{constructor(e,t,r,i,u,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=c,this.documentState=f}static newInvalidDocument(e){return new dr(e,0,At.min(),At.min(),At.min(),ts.empty(),0)}static newFoundDocument(e,t,r,i){return new dr(e,1,t,At.min(),r,i,0)}static newNoDocument(e,t){return new dr(e,2,t,At.min(),At.min(),ts.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,At.min(),At.min(),ts.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jh{constructor(e,t){this.position=e,this.inclusive=t}}function tF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),t.key):Bh(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function nF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nl(n.position[t],e.position[t]))return!1;return!0}class h_{constructor(e,t="asc"){this.field=e,this.dir=t}}function H3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class rF{}class vn extends rF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new G3(e,t,r):"array-contains"===t?new Z3(e,r):"in"===t?new lF(e,r):"not-in"===t?new W3(e,r):"array-contains-any"===t?new K3(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new q3(e,r):new z3(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bh(t,this.value)):null!==t&&Uh(this.value)===Uh(t)&&this.matchesComparison(Bh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Un extends rF{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Un(e,t)}matches(e){return f_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function f_(n){return"and"===n.op}function $1(n){return"or"===n.op}function H1(n){return iF(n)&&f_(n)}function iF(n){for(const e of n.filters)if(e instanceof Un)return!1;return!0}function G1(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+d_(n.value);if(H1(n))return n.filters.map(e=>G1(e)).join(",");{const e=n.filters.map(t=>G1(t)).join(",");return`${n.op}(${e})`}}function sF(n,e){return n instanceof vn?(t=n,(r=e)instanceof vn&&t.op===r.op&&t.field.isEqual(r.field)&&Nl(t.value,r.value)):n instanceof Un?function(t,r){return r instanceof Un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,c)=>i&&sF(u,r.filters[c]),!0)}(n,e):void ft();var t,r}function oF(n,e){const t=n.filters.concat(e);return Un.create(t,n.op)}function aF(n){return n instanceof vn?`${(e=n).field.canonicalString()} ${e.op} ${d_(e.value)}`:n instanceof Un?function(e){return e.op.toString()+" {"+e.getFilters().map(aF).join(" ,")+"}"}(n):"Filter";var e}class G3 extends vn{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class q3 extends vn{constructor(e,t){super(e,"in",t),this.keys=uF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z3 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=uF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class Z3 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Q0(t)&&Y0(t.arrayValue,this.value)}}class lF extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Y0(this.value.arrayValue,t)}}class W3 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Y0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Y0(this.value.arrayValue,t)}}class K3 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Q0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Y0(this.value.arrayValue,r))}}class Y3{constructor(e,t=null,r=[],i=[],u=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=f,this.dt=null}}function q1(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Y3(n,e,t,r,i,u,c)}function Vp(n){const e=st(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>G1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Z0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>d_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>d_(r)).join(",")),e.dt=t}return e.dt}function X0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!H3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nF(n.startAt,e.startAt)&&nF(n.endAt,e.endAt)}function rT(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function iT(n,e){return n.filters.filter(t=>t instanceof vn&&t.field.isEqual(e))}function cF(n,e,t){let r=eT,i=!0;for(const u of iT(n,e)){let c=eT,f=!0;switch(u.op){case"<":case"<=":c=j3(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,f=!1;break;case"!=":case"not-in":c=eT}JR({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];JR({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function dF(n,e,t){let r=Vh,i=!0;for(const u of iT(n,e)){let c=Vh,f=!0;switch(u.op){case">=":case">":c=$3(u.value),f=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,f=!1;break;case"!=":case"not-in":c=Vh}XR({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];XR({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class ad{constructor(e,t=null,r=[],i=[],u=null,c="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=f,this.endAt=m,this.wt=null,this._t=null}}function hF(n,e,t,r,i,u,c,f){return new ad(n,e,t,r,i,u,c,f)}function p_(n){return new ad(n)}function fF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function z1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Z1(n){return null!==n.collectionGroup}function Up(n){const e=st(n);if(null===e.wt){e.wt=[];const t=sT(e),r=z1(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new h_(t)),e.wt.push(new h_(Ur.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new h_(Ur.keyField(),u))}}}return e.wt}function Us(n){const e=st(n);if(!e._t)if("F"===e.limitType)e._t=q1(e.path,e.collectionGroup,Up(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Up(e))t.push(new h_(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new jh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new jh(e.startAt.position,e.startAt.inclusive):null;e._t=q1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function W1(n,e){e.getFirstInequalityField(),sT(n);const t=n.filters.concat([e]);return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oT(n,e,t){return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ew(n,e){return X0(Us(n),Us(e))&&n.limitType===e.limitType}function pF(n){return`${Vp(Us(n))}|lt:${n.limitType}`}function K1(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>aF(r)).join(", ")}]`),Z0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>d_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>d_(r)).join(",")),`Target(${t})`}(Us(n))}; limitType=${n.limitType})`}function tw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Up(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const f=tF(i,u,c);return i.inclusive?f<=0:f<0}(t.startAt,Up(t),r)||t.endAt&&!function(i,u,c){const f=tF(i,u,c);return i.inclusive?f>=0:f>0}(t.endAt,Up(t),r)));var t,r}function gF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mF(n){return(e,t)=>{let r=!1;for(const i of Up(n)){const u=Q3(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function Q3(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,u,c){const f=u.data.field(i),m=c.data.field(i);return null!==f&&null!==m?Bh(f,m):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}class ud{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rh(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return qR(this.inner)}size(){return this.innerSize}}const J3=new nr(rt.comparator);function lo(){return J3}const _F=new nr(rt.comparator);function nw(...n){let e=_F;for(const t of n)e=e.insert(t.key,t);return e}function yF(n){let e=_F;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rl(){return rw()}function vF(){return rw()}function rw(){return new ud(n=>n.toString(),(n,e)=>n.isEqual(e))}const X3=new nr(rt.comparator),e6=new cr(rt.comparator);function nn(...n){let e=e6;for(const t of n)e=e.add(t);return e}const t6=new cr(Kt);function Y1(){return t6}function wF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:W0(e)?"-0":e}}function CF(n){return{integerValue:""+n}}function bF(n,e){return LR(e)?CF(e):wF(n,e)}class aT{constructor(){this._=void 0}}function n6(n,e,t){return n instanceof g_?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&JI(i)&&(i=XI(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Bp?IF(n,e):n instanceof jp?TF(n,e):function(r,i){const u=EF(r,i),c=DF(u)+DF(r.gt);return j1(u)&&j1(r.gt)?CF(c):wF(r.serializer,c)}(n,e)}function r6(n,e,t){return n instanceof Bp?IF(n,e):n instanceof jp?TF(n,e):t}function EF(n,e){return n instanceof m_?j1(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class g_ extends aT{}class Bp extends aT{constructor(e){super(),this.elements=e}}function IF(n,e){const t=AF(e);for(const r of n.elements)t.some(i=>Nl(i,r))||t.push(r);return{arrayValue:{values:t}}}class jp extends aT{constructor(e){super(),this.elements=e}}function TF(n,e){let t=AF(e);for(const r of n.elements)t=t.filter(i=>!Nl(i,r));return{arrayValue:{values:t}}}class m_ extends aT{constructor(e,t){super(),this.serializer=e,this.gt=t}}function DF(n){return Br(n.integerValue||n.doubleValue)}function AF(n){return Q0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class iw{constructor(e,t){this.field=e,this.transform=t}}class s6{constructor(e,t){this.version=e,this.transformResults=t}}class Ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ir}static exists(e){return new Ir(void 0,e)}static updateTime(e){return new Ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lT{}function xF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new y_(n.key,Ir.none()):new __(n.key,n.data,Ir.none());{const t=n.data,r=ts.empty();let i=new cr(Ur.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new ld(n.key,r,new uo(i.toArray()),Ir.none())}}function o6(n,e,t){n instanceof __?function(r,i,u){const c=r.value.clone(),f=PF(r.fieldTransforms,i,u.transformResults);c.setAll(f),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ld?function(r,i,u){if(!uT(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=PF(r.fieldTransforms,i,u.transformResults),f=i.data;f.setAll(MF(r)),f.setAll(c),i.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function sw(n,e,t,r){return n instanceof __?function(i,u,c,f){if(!uT(i.precondition,u))return c;const m=i.value.clone(),v=kF(i.fieldTransforms,f,u);return m.setAll(v),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ld?function(i,u,c,f){if(!uT(i.precondition,u))return c;const m=kF(i.fieldTransforms,f,u),v=u.data;return v.setAll(MF(i)),v.setAll(m),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(c=t,uT(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function a6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=EF(r.transform,i||null);null!=u&&(null===t&&(t=ts.empty()),t.set(r.field,u))}return t||null}function SF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&l_(t,r,(i,u)=>function i6(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bp&&r instanceof Bp||t instanceof jp&&r instanceof jp?l_(t.elements,r.elements,Nl):t instanceof m_&&r instanceof m_?Nl(t.gt,r.gt):t instanceof g_&&r instanceof g_);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class __ extends lT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ld extends lT{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function MF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PF(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,f=e.data.field(u.field);r.set(u.field,r6(c,f,t[i]))}return r}function kF(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,n6(u,c,e))}return r}class y_ extends lT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q1 extends lT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class J1{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&o6(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=sw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=sw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vF();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let f=this.applyToLocalView(c,u.mutatedFields);f=t.has(i.key)?null:f;const m=xF(c,f);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&l_(this.mutations,e.mutations,(t,r)=>SF(t,r))&&l_(this.baseMutations,e.baseMutations,(t,r)=>SF(t,r))}}class X1{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=X3;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new X1(e,t,r,i)}}class eM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class l6{constructor(e,t){this.count=e,this.unchangedNames=t}}var ri,Tn;function OF(n){switch(n){default:return ft();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function NF(n){if(void 0===n)return Zr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case ri.OK:return ge.OK;case ri.CANCELLED:return ge.CANCELLED;case ri.UNKNOWN:return ge.UNKNOWN;case ri.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case ri.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case ri.INTERNAL:return ge.INTERNAL;case ri.UNAVAILABLE:return ge.UNAVAILABLE;case ri.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case ri.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case ri.NOT_FOUND:return ge.NOT_FOUND;case ri.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case ri.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case ri.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case ri.ABORTED:return ge.ABORTED;case ri.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case ri.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case ri.DATA_LOSS:return ge.DATA_LOSS;default:return ft()}}(Tn=ri||(ri={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class tM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return cT}static getOrCreateInstance(){return null===cT&&(cT=new tM),cT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let cT=null;function RF(){return new TextEncoder}const c6=new a_([4294967295,4294967295],0);function FF(n){const e=RF().encode(n),t=new r3;return t.update(e),new Uint8Array(t.digest())}function LF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new a_([t,r],0),new a_([i,u],0)]}class nM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ow(`Invalid padding: ${t}`);if(r<0)throw new ow(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ow(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ow(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=a_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(a_.fromNumber(r)));return 1===i.compare(c6)&&(i=new a_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=FF(e),[r,i]=LF(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new nM(u,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=FF(e),[r,i]=LF(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ow extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class aw{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,uw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new aw(At.min(),i,new nr(Kt),lo(),nn())}}class uw{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new uw(r,t,nn(),nn(),nn())}}class dT{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class VF{constructor(e,t){this.targetId=e,this.Vt=t}}class UF{constructor(e,t,r=vi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class BF{constructor(){this.St=0,this.Dt=$F(),this.Ct=vi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=nn(),t=nn(),r=nn();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new uw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=$F()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class d6{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=lo(),this.zt=jF(),this.Wt=new nr(Kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const c=u.target;if(rT(c))if(0===i){const f=new rt(c.path);this.Yt(r,f,dr.newNoDocument(f,At.min()))}else Tt(1===i);else{const f=this.ie(r);if(f!==i){const m=this.re(e,f);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=tM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,D,A){var L,j,z,ee,oe,Ue;const ze={localCacheCount:D,existenceFilterCount:A.count},je=A.unchangedNames;return je&&(ze.bloomFilter={applied:0===v,hashCount:null!==(L=je?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ee=null===(z=null===(j=je?.bits)||void 0===j?void 0:j.bitmap)||void 0===z?void 0:z.length)&&void 0!==ee?ee:0,padding:null!==(Ue=null===(oe=je?.bits)||void 0===oe?void 0:oe.padding)&&void 0!==Ue?Ue:0}),ze}(m,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:c=0},hashCount:f=0}=r;let m,v;try{m=od(u).toUint8Array()}catch(D){if(D instanceof ZR)return ba("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{v=new nM(m,c,f)}catch(D){return ba(D instanceof ow?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.vt(f)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,c)=>{const f=this.se(c);if(f){if(u.current&&rT(f.target)){const m=new rt(f.target.path);null!==this.jt.get(m)||this.ae(c,m)||this.Yt(c,m,dr.newNoDocument(m,e))}u.Mt&&(t.set(c,u.Ot()),u.Ft())}});let r=nn();this.zt.forEach((u,c)=>{let f=!0;c.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.jt.forEach((u,c)=>c.setReadTime(e));const i=new aw(e,t,this.Wt,this.jt,r);return this.jt=lo(),this.zt=jF(),this.Wt=new nr(Kt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new BF,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new cr(Kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new BF),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function jF(){return new nr(rt.comparator)}function $F(){return new nr(rt.comparator)}const h6={asc:"ASCENDING",desc:"DESCENDING"},f6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p6={and:"AND",or:"OR"};class g6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rM(n,e){return n.useProto3Json||Z0(e)?e:{value:e}}function v_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function m6(n,e){return v_(n,e.toTimestamp())}function Wr(n){return Tt(!!n),At.fromTimestamp(function(e){const t=Fh(e);return new Er(t.seconds,t.nanos)}(n))}function iM(n,e){return(t=n,new In(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function GF(n){const e=In.fromString(n);return Tt(XF(e)),e}function lw(n,e){return iM(n.databaseId,e.path)}function Fl(n,e){const t=GF(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(zF(t))}function sM(n,e){return iM(n.databaseId,e)}function qF(n){const e=GF(n);return 4===e.length?In.emptyPath():zF(e)}function cw(n){return new In(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zF(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ZF(n,e,t){return{name:lw(n,e),fields:t.value.mapValue.fields}}function WF(n,e,t){const r=Fl(n,e.name),i=Wr(e.updateTime),u=e.createTime?Wr(e.createTime):At.min(),c=new ts({mapValue:{fields:e.fields}}),f=dr.newFoundDocument(r,i,u,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function dw(n,e){let t;if(e instanceof __)t={update:ZF(n,e.key,e.value)};else if(e instanceof y_)t={delete:lw(n,e.key)};else if(e instanceof ld)t={update:ZF(n,e.key,e.data),updateMask:I6(e.fieldMask)};else{if(!(e instanceof Q1))return ft();t={verify:lw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof g_)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof m_)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:m6(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function oM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ir.updateTime(Wr(i.updateTime)):void 0!==i.exists?Ir.exists(i.exists):Ir.none():Ir.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let f=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),f=new g_):"appendMissingElements"in c?f=new Bp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new jp(c.removeAllFromArray.values||[]):"increment"in c?f=new m_(u,c.increment):ft();const m=Ur.fromServerFormat(c.fieldPath);return new iw(m,f)}(n,i)):[];var i;if(e.update){const i=Fl(n,e.update.name),u=new ts({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new uo((e.updateMask.fieldPaths||[]).map(v=>Ur.fromServerFormat(v)));return new ld(i,u,c,t,r)}return new __(i,u,t,r)}if(e.delete){const i=Fl(n,e.delete);return new y_(i,t)}if(e.verify){const i=Fl(n,e.verify);return new Q1(i,t)}return ft()}function KF(n,e){return{documents:[sM(n,e.path)]}}function aM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=sM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return JF(Un.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(m){if(0!==m.length)return m.map(v=>{return{field:$h((D=v).field),direction:C6(D.dir)};var D})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=rM(n,e.limit);var f,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function YF(n){let e=qF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let u=[];t.where&&(u=function(D){const A=QF(D);return A instanceof Un&&H1(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new h_(w_((A=D).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(D){let A;return A="object"==typeof D?D.value:D,Z0(A)?null:A}(t.limit));let m=null;var D;t.startAt&&(m=new jh((D=t.startAt).values||[],!!D.before));let v=null;return t.endAt&&(v=function(D){return new jh(D.values||[],!D.before)}(t.endAt)),hF(e,i,c,u,f,"F",m,v)}function QF(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=w_(e.unaryFilter.field);return vn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=w_(e.unaryFilter.field);return vn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=w_(e.unaryFilter.field);return vn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=w_(e.unaryFilter.field);return vn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(n):void 0!==n.fieldFilter?vn.create(w_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Un.create(e.compositeFilter.filters.map(t=>QF(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(n):ft();var e}function C6(n){return h6[n]}function b6(n){return f6[n]}function E6(n){return p6[n]}function $h(n){return{fieldPath:n.canonicalString()}}function w_(n){return Ur.fromServerFormat(n.fieldPath)}function JF(n){return n instanceof vn?function(e){if("=="===e.op){if(YR(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NAN"}};if(KR(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(YR(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NOT_NAN"}};if(KR(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$h(e.field),op:b6(e.op),value:e.value}}}(n):n instanceof Un?function(e){const t=e.getFilters().map(r=>JF(r));return 1===t.length?t[0]:{compositeFilter:{op:E6(e.op),filters:t}}}(n):ft()}function I6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class cd{constructor(e,t,r,i,u=At.min(),c=At.min(),f=vi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new cd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class eL{constructor(e){this.fe=e}}function tL(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:lw(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:v_(i,u.version.toTimestamp()),createTime:v_(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:$p(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:$p(e.version)}}var i,u;return r}function hT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function $p(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hp(n){const e=new Er(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Gp(n,e){const t=(e.baseMutations||[]).map(u=>oM(n.fe,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>oM(n.fe,u)),i=Er.fromMillis(e.localWriteTimeMs);return new J1(e.batchId,i,t,r)}function hw(n){const e=Hp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Hp(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Us(p_(qF(i.documents[0])))):r=Us(YF(n.query)),new cd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken))}function nL(n,e){const t=$p(e.snapshotVersion),r=$p(e.lastLimboFreeSnapshotVersion);let i;i=rT(e.target)?KF(n.fe,e.target):aM(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vp(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uM(n){const e=YF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?oT(e,e.limit,"L"):e}function lM(n,e){return new eM(e.largestBatchId,oM(n.fe,e.overlayMutation))}function rL(n,e){const t=e.path.lastSegment();return[n,_s(e.path.popLast()),t]}function iL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:$p(r.readTime),documentKey:_s(r.documentKey.path),largestBatchId:r.largestBatchId}}class D6{getBundleMetadata(e,t){return sL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Hp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sL(e).put({bundleId:(r=t).id,createTime:$p(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return oL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:uM(i.bundledQuery),readTime:Hp(i.readTime)};var i})}saveNamedQuery(e,t){return oL(e).put({name:(r=t).name,readTime:$p(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sL(n){return Fi(n,"bundles")}function oL(n){return Fi(n,"namedQueries")}class fT{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new fT(e,t.uid||"")}getOverlay(e,t){return fw(e).get(rL(this.userId,t)).next(r=>r?lM(this.serializer,r):null)}getOverlays(e,t){const r=Rl();return le.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const f=new eM(t,c);i.push(this.we(e,f))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(_s(c.getCollectionPath())));const u=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(fw(e).J("collectionPathOverlayIndex",f))}),le.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Rl(),u=_s(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return fw(e).j("collectionPathOverlayIndex",c).next(f=>{for(const m of f){const v=lM(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Rl();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fw(e).X({index:"collectionGroupOverlayIndex",range:f},(m,v,D)=>{const A=lM(this.serializer,v);u.size()<i||A.largestBatchId===c?(u.set(A.getKey(),A),c=A.largestBatchId):D.done()}).next(()=>u)}we(e,t){return fw(e).put(function(r,i,u){const[c,f,m]=rL(i,u.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:dw(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function fw(n){return Fi(n,"documentOverlays")}class qp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),W0(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(od(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?QR(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ft()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),rt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function A6(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function aL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=A6(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}qp.Ve=new qp;class x6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=aL(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=aL(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class S6{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class M6{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class pw{constructor(){this.je=new x6,this.ze=new S6(this.je),this.We=new M6(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class zp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zp(this.indexId,this.documentKey,this.arrayValue,r)}}function Hh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=uL(n.arrayValue,e.arrayValue),0!==t?t:(t=uL(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function uL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class P6{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Tt(e.collectionGroup===this.collectionId);const t=R1(e);if(void 0!==t&&!this.en(t))return!1;const r=Rp(e);let i=new Set,u=0,c=0;for(;u<r.length&&this.en(r[u]);++u)i=i.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[u];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++u}for(;u<r.length;++u){const f=r[u];if(c>=this.Ye.length||!this.sn(this.Ye[c++],f))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function lL(n){var e,t;if(Tt(n instanceof vn||n instanceof Un),n instanceof vn){if(n instanceof lF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>vn.create(n.field,"==",u)))||[];return Un.create(i,"or")}return n}const r=n.filters.map(i=>lL(i));return Un.create(r,n.op)}function k6(n){if(0===n.getFilters().length)return[];const e=hM(lL(n));return Tt(cL(e)),cM(e)||dM(e)?[e]:e.getFilters()}function cM(n){return n instanceof vn}function dM(n){return n instanceof Un&&H1(n)}function cL(n){return cM(n)||dM(n)||function(e){if(e instanceof Un&&$1(e)){for(const t of e.getFilters())if(!cM(t)&&!dM(t))return!1;return!0}return!1}(n)}function hM(n){if(Tt(n instanceof vn||n instanceof Un),n instanceof vn)return n;if(1===n.filters.length)return hM(n.filters[0]);const e=n.filters.map(r=>hM(r));let t=Un.create(e,n.op);return t=pT(t),cL(t)?t:(Tt(t instanceof Un),Tt(f_(t)),Tt(t.filters.length>1),t.filters.reduce((r,i)=>fM(r,i)))}function fM(n,e){let t;return Tt(n instanceof vn||n instanceof Un),Tt(e instanceof vn||e instanceof Un),t=n instanceof vn?e instanceof vn?Un.create([n,e],"and"):dL(n,e):e instanceof vn?dL(e,n):function(r,i){if(Tt(r.filters.length>0&&i.filters.length>0),f_(r)&&f_(i))return oF(r,i.getFilters());const u=$1(r)?r:i,c=$1(r)?i:r,f=u.filters.map(m=>fM(m,c));return Un.create(f,"or")}(n,e),pT(t)}function dL(n,e){if(f_(e))return oF(e,n.getFilters());{const t=e.filters.map(r=>fM(n,r));return Un.create(t,"or")}}function pT(n){if(Tt(n instanceof vn||n instanceof Un),n instanceof vn)return n;const e=n.getFilters();if(1===e.length)return pT(e[0]);if(iF(n))return n;const t=e.map(i=>pT(i)),r=[];return t.forEach(i=>{i instanceof vn?r.push(i):i instanceof Un&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Un.create(r,n.op)}class O6{constructor(){this.rn=new pM}addToCollectionParentIndex(e,t){return this.rn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Vo.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Vo.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class pM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(In.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(In.comparator)).toArray()}}const gT=new Uint8Array(0);class N6{constructor(e,t){this.user=e,this.databaseId=t,this.on=new pM,this.un=new ud(r=>Vp(r),(r,i)=>X0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:_s(i)};return hL(e).put(u)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[PR(t),""],!1,!0);return hL(e).j(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ol(c.parent))}return r})}addFieldIndex(e,t){const r=mT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=mw(e);return u.next(f=>{c.put(iL(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=mT(e),i=mw(e),u=gw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=gw(e);let i=!0;const u=new Map;return le.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),u.set(c,f)})).next(()=>{if(i){let c=nn();const f=[];return le.forEach(u,(m,v)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Vp(t)}`);const A=function(je,Ye){const Ft=R1(Ye);if(void 0===Ft)return null;for(const Bt of iT(je,Ft.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(v,m),L=function(je,Ye){const Ft=new Map;for(const Bt of Rp(Ye))for(const Cn of iT(je,Bt.fieldPath))switch(Cn.op){case"==":case"in":Ft.set(Bt.fieldPath.canonicalString(),Cn.value);break;case"not-in":case"!=":return Ft.set(Bt.fieldPath.canonicalString(),Cn.value),Array.from(Ft.values())}return null}(v,m),j=function(je,Ye){const Ft=[];let Bt=!0;for(const Cn of Rp(Ye)){const Sr=0===Cn.kind?cF(je,Cn.fieldPath,je.startAt):dF(je,Cn.fieldPath,je.startAt);Ft.push(Sr.value),Bt&&(Bt=Sr.inclusive)}return new jh(Ft,Bt)}(v,m),z=function(je,Ye){const Ft=[];let Bt=!0;for(const Cn of Rp(Ye)){const Sr=0===Cn.kind?dF(je,Cn.fieldPath,je.endAt):cF(je,Cn.fieldPath,je.endAt);Ft.push(Sr.value),Bt&&(Bt=Sr.inclusive)}return new jh(Ft,Bt)}(v,m),ee=this.hn(m,v,j),oe=this.hn(m,v,z),Ue=this.ln(m,v,L),ze=this.fn(m.indexId,A,ee,j.inclusive,oe,z.inclusive,Ue);return le.forEach(ze,je=>r.H(je,t.limit).next(Ye=>{Ye.forEach(Ft=>{const Bt=rt.fromSegments(Ft.documentKey);c.has(Bt)||(c=c.add(Bt),f.push(Bt))})}))}).next(()=>f)}return le.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:k6(Un.create(e.filters,"and")).map(r=>q1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,c,f){const m=(null!=t?t.length:1)*Math.max(r.length,u.length),v=m/(null!=t?t.length:1),D=[];for(let A=0;A<m;++A){const L=t?this.dn(t[A/v]):gT,j=this.wn(e,L,r[A%v],i),z=this._n(e,L,u[A%v],c),ee=f.map(oe=>this.wn(e,L,oe,!0));D.push(...this.createRange(j,z,ee))}return D}wn(e,t,r,i){const u=new zp(e,rt.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new zp(e,rt.empty(),t,r);return i?u.Je():u}an(e,t){const r=new P6(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const f of u)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return le.forEach(i,u=>this.an(e,u).next(c=>{c?0!==r&&c.fields.length<function(f){let m=new cr(Ur.comparator),v=!1;for(const D of f.filters)for(const A of D.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field));for(const D of f.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(v?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new pw;for(const i of Rp(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.He(i.kind);qp.Ve._e(u,c)}return r.Qe()}dn(e){const t=new pw;return qp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new pw;return qp.Ve._e(Lp(this.databaseId,t),r.He(function(i){const u=Rp(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new pw);let u=0;for(const c of Rp(e)){const f=r[u++];for(const m of i)if(this.yn(t,c.fieldPath)&&Q0(f))i=this.pn(i,c,f);else{const v=m.He(c.kind);qp.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const f of i){const m=new pw;m.seed(f.Qe()),qp.Ve._e(c,m.He(t.kind)),u.push(m)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof vn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=mT(e),i=mw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return le.forEach(u,f=>i.get([f.indexId,this.uid]).next(m=>{c.push(function(v,D){const A=D?new q0(D.sequenceNumber,new Vo(Hp(D.readTime),new rt(Ol(D.documentKey)),D.largestBatchId)):q0.empty(),L=v.fields.map(([j,z])=>new WI(Ur.fromServerFormat(j),z));return new ZI(v.indexId,v.collectionGroup,L,A)}(f,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=mT(e),u=mw(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>le.forEach(f,m=>u.put(iL(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?le.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),le.forEach(f,m=>this.En(e,i,m).next(v=>{const D=this.An(u,m);return v.isEqual(D)?le.resolve():this.vn(e,u,m,v,D)}))))})}Rn(e,t,r,i){return gw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return gw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=gw(e);let u=new cr(Hh);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{u=u.add(new zp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>u)}An(e,t){let r=new cr(Hh);const i=this.mn(t,e);if(null==i)return r;const u=R1(t);if(null!=u){const c=e.data.field(u.fieldPath);if(Q0(c))for(const f of c.arrayValue.values||[])r=r.add(new zp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new zp(t.indexId,e.key,gT,i));return r}vn(e,t,r,i,u){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,m,v,D,A){const L=f.getIterator(),j=m.getIterator();let z=c_(L),ee=c_(j);for(;z||ee;){let oe=!1,Ue=!1;if(z&&ee){const ze=v(z,ee);ze<0?Ue=!0:ze>0&&(oe=!0)}else null!=z?Ue=!0:oe=!0;oe?(D(ee),ee=c_(j)):Ue?(A(z),z=c_(L)):(z=c_(L),ee=c_(j))}}(i,u,Hh,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),le.waitFor(c)}Tn(e){let t=1;return mw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>Hh(c,f)).filter((c,f,m)=>!f||0!==Hh(c,m[f-1]));const i=[];i.push(e);for(const c of r){const f=Hh(c,e),m=Hh(c,t);if(0===f)i[0]=e.Je();else if(f>0&&m<0)i.push(c),i.push(c.Je());else if(m>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,gT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,gT,[]]))}return u}bn(e,t){return Hh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(fL)}getMinOffset(e,t){return le.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ft())).next(fL)}}function hL(n){return Fi(n,"collectionParents")}function gw(n){return Fi(n,"indexEntries")}function mT(n){return Fi(n,"indexConfiguration")}function mw(n){return Fi(n,"indexState")}function fL(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;F1(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Vo(e.readTime,e.documentKey,t)}const pL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ys{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ys(e,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let f=0;const m=r.X({range:c},(D,A,L)=>(f++,L.delete()));u.push(m.next(()=>{Tt(1===f)}));const v=[];for(const D of t.mutations){const A=BR(e,D.key.path,t.batchId);u.push(i.delete(A)),v.push(D.key)}return le.waitFor(u).next(()=>v)}function _T(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}ys.DEFAULT_COLLECTION_PERCENTILE=10,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ys.DEFAULT=new ys(41943040,ys.DEFAULT_COLLECTION_PERCENTILE,ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ys.DISABLED=new ys(-1,0,0);class yT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Tt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new yT(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gh(e).X({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=C_(e),c=Gh(e);return c.add({}).next(f=>{Tt("number"==typeof f);const m=new J1(f,t,r,i),v=function(L,j,z){const ee=z.baseMutations.map(Ue=>dw(L.fe,Ue)),oe=z.mutations.map(Ue=>dw(L.fe,Ue));return{userId:j,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ee,mutations:oe}}(this.serializer,this.userId,m),D=[];let A=new cr((L,j)=>Kt(L.canonicalString(),j.canonicalString()));for(const L of i){const j=BR(this.userId,L.key.path,f);A=A.add(L.key.path.popLast()),D.push(c.put(v)),D.push(u.put(j,C3))}return A.forEach(L=>{D.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[f]=m.keys()}),le.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return Gh(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Gp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?le.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Gh(e).X({index:"userMutationsIndex",range:i},(c,f,m)=>{f.userId===this.userId&&(Tt(f.batchId>=r),u=Gp(this.serializer,f)),m.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Gp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=YI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return C_(e).X({range:i},(c,f,m)=>{const[v,D,A]=c,L=Ol(D);if(v===this.userId&&t.path.isEqual(L))return Gh(e).get(A).next(j=>{if(!j)throw ft();Tt(j.userId===this.userId),u.push(Gp(this.serializer,j))});m.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Kt);const i=[];return t.forEach(u=>{const c=YI(this.userId,u.path),f=IDBKeyRange.lowerBound(c),m=C_(e).X({range:f},(v,D,A)=>{const[L,j,z]=v,ee=Ol(j);L===this.userId&&u.path.isEqual(ee)?r=r.add(z):A.done()});i.push(m)}),le.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=YI(this.userId,r),c=IDBKeyRange.lowerBound(u);let f=new cr(Kt);return C_(e).X({range:c},(m,v,D)=>{const[A,L,j]=m,z=Ol(L);A===this.userId&&r.isPrefixOf(z)?z.length===i&&(f=f.add(j)):D.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(Gh(e).get(u).next(c=>{if(null===c)throw ft();Tt(c.userId===this.userId),r.push(Gp(this.serializer,c))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return gL(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return C_(e).X({range:r},(u,c,f)=>{if(u[0]===this.userId){const m=Ol(u[1]);i.push(m)}else f.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return mL(e,this.userId,t)}xn(e){return _L(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mL(n,e,t){const r=YI(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return C_(n).X({range:u,Y:!0},(f,m,v)=>{const[D,A,L]=f;D===e&&A===i&&(c=!0),v.done()}).next(()=>c)}function Gh(n){return Fi(n,"mutations")}function C_(n){return Fi(n,"documentMutations")}function _L(n){return Fi(n,"mutationQueues")}class Zp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Zp(0)}static Mn(){return new Zp(-1)}}class R6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Zp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>At.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>b_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return b_(e).X((c,f)=>{const m=hw(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,u.push(this.removeTargetData(e,m)))}).next(()=>le.waitFor(u)).next(()=>i)}forEachTarget(e,t){return b_(e).X((r,i)=>{const u=hw(i);t(u)})}$n(e){return yL(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}On(e,t){return yL(e).put("targetGlobalKey",t)}Fn(e,t){return b_(e).put(nL(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return b_(e).X({range:i,index:"queryTargetsIndex"},(c,f,m)=>{const v=hw(f);X0(t,v.target)&&(u=v,m.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=qh(e);return t.forEach(c=>{const f=_s(c.path);i.push(u.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=qh(e);return le.forEach(t,u=>{const c=_s(u.path);return le.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=qh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=qh(e);let u=nn();return i.X({range:r,Y:!0},(c,f,m)=>{const v=Ol(c[1]),D=new rt(v);u=u.add(D)}).next(()=>u)}containsKey(e,t){const r=_s(t.path),i=IDBKeyRange.bound([r],[PR(r)],!1,!0);let u=0;return qh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],m,v)=>{0!==c&&(u++,v.done())}).next(()=>u>0)}le(e,t){return b_(e).get(t).next(r=>r?hw(r):null)}}function b_(n){return Fi(n,"targets")}function yL(n){return Fi(n,"targetGlobal")}function qh(n){return Fi(n,"targetDocuments")}function vL([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class F6{constructor(e){this.Ln=e,this.buffer=new cr(vL),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ae.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Nh(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Oh(r)}yield t.Qn(3e5)}))}}class L6{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(Uo.ct);const r=new F6(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(pL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pL):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,c,f,m,v;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,c=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(u=A,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),O1()<=Il.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${u} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(v-m)+`ms\nTotal Duration: ${v-D}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:A})))}}class V6{constructor(e,t){this.db=e,this.garbageCollector=function CL(n,e){return new L6(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return vT(e,r)}removeReference(e,t,r){return vT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vT(e,t)}Xn(e,t){return function(r,i){let u=!1;return _L(r).Z(c=>mL(r,c,i).next(f=>(f&&(u=!0),le.resolve(!f)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(c,f)=>{if(f<=t){const m=this.Xn(e,c).next(v=>{if(!v)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),qh(e).delete([0,_s(c.path)])))});i.push(m)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vT(e,t)}Yn(e,t){const r=qh(e);let i,u=Uo.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:m,sequenceNumber:v})=>{0===c?(u!==Uo.ct&&t(new rt(Ol(i)),u),u=v,i=m):u=Uo.ct}).next(()=>{u!==Uo.ct&&t(new rt(Ol(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vT(n,e){return qh(n).put((r=n.currentSequenceNumber,{targetId:0,path:_s(e.path),sequenceNumber:r}));var r}class bL{constructor(){this.changes=new ud(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class U6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wp(e).put(r)}removeEntry(e,t,r){return Wp(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],hT(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=dr.newInvalidDocument(t);return Wp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_w(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:dr.newInvalidDocument(t)};return Wp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_w(t))},(i,u)=>{r={document:this.ts(t,u),size:_T(u)}}).next(()=>r)}getEntries(e,t){let r=lo();return this.ns(e,t,(i,u)=>{const c=this.ts(i,u);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=lo(),i=new nr(rt.comparator);return this.ns(e,t,(u,c)=>{const f=this.ts(u,c);r=r.insert(u,f),i=i.insert(u,_T(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return le.resolve();let i=new cr(DL);t.forEach(m=>i=i.add(m));const u=IDBKeyRange.bound(_w(i.first()),_w(i.last())),c=i.getIterator();let f=c.getNext();return Wp(e).X({index:"documentKeyIndex",range:u},(m,v,D)=>{const A=rt.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&DL(f,A)<0;)r(f,null),f=c.getNext();f&&f.isEqual(A)&&(r(f,v),f=c.hasNext()?c.getNext():null),f?D.G(_w(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),hT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wp(e).j(IDBKeyRange.bound(c,f,!0)).next(m=>{let v=lo();for(const D of m){const A=this.ts(rt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);A.isFoundDocument()&&(tw(t,A)||i.has(A.key))&&(v=v.insert(A.key,A))}return v})}getAllFromCollectionGroup(e,t,r,i){let u=lo();const c=TL(t,r),f=TL(t,Vo.max());return Wp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(m,v,D)=>{const A=this.ts(rt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);u=u.insert(A.key,A),u.size===i&&D.done()}).next(()=>u)}newChangeBuffer(e){return new B6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return IL(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Zn(e,t){return IL(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function T6(n,e){let t;if(e.document)t=WF(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=Hp(e.noDocument.readTime);t=dr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=rt.fromSegments(e.unknownDocument.path),i=Hp(e.unknownDocument.version);t=dr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Er(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return dr.newInvalidDocument(e)}}function EL(n){return new U6(n)}class B6 extends bL{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ud(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new cr((u,c)=>Kt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const f=this.us.get(u);if(t.push(this.os.removeEntry(e,u,f.readTime)),c.isValidDocument()){const m=tL(this.os.serializer,c);i=i.add(u.path.popLast()),r+=_T(m)-f.size,t.push(this.os.addEntry(e,u,m))}else if(r-=f.size,this.trackRemovals){const m=tL(this.os.serializer,c.convertToNoDocument(At.min()));t.push(this.os.addEntry(e,u,m))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,c)=>{this.us.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function IL(n){return Fi(n,"remoteDocumentGlobal")}function Wp(n){return Fi(n,"remoteDocumentsV14")}function _w(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function TL(n,e){const t=e.documentKey.path.toArray();return[n,hT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function DL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Kt(t[u],r[u]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class j6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class AL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&sw(r.mutation,i,uo.empty(),Er.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=Rl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=nw();return u.forEach((f,m)=>{c=c.insert(f,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Rl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let u=lo();const c=rw(),f=rw();return t.forEach((m,v)=>{const D=r.get(v.key);i.has(v.key)&&(void 0===D||D.mutation instanceof ld)?u=u.insert(v.key,v):void 0!==D?(c.set(v.key,D.mutation.getFieldMask()),sw(D.mutation,v,D.mutation.getFieldMask(),Er.now())):c.set(v.key,uo.empty())}),this.recalculateAndSaveOverlays(e,u).next(m=>(m.forEach((v,D)=>c.set(v,D)),t.forEach((v,D)=>{var A;return f.set(v,new j6(D,null!==(A=c.get(v))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=rw();let i=new nr((c,f)=>c-f),u=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let D=r.get(m)||uo.empty();D=f.applyToLocalView(v,D),r.set(m,D);const A=(i.get(f.batchId)||nn()).add(m);i=i.insert(f.batchId,A)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,D=m.value,A=vF();D.forEach(L=>{if(!u.has(L)){const j=xF(t.get(L),r.get(L));null!==j&&A.set(L,j),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,v,A))}return le.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Z1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):le.resolve(Rl());let f=-1,m=u;return c.next(v=>le.forEach(v,(D,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),u.get(D)?le.resolve():this.remoteDocumentCache.getEntry(e,D).next(L=>{m=m.insert(D,L)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,m,v,nn())).next(D=>({batchId:f,changes:yF(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=nw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=nw();return this.indexManager.getCollectionParents(e,i).next(c=>le.forEach(c,f=>{const m=(v=t,D=f.child(i),new ad(D,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((D,A)=>{u=u.insert(D,A)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((f,m)=>{const v=m.getKey();null===u.get(v)&&(u=u.insert(v,dr.newInvalidDocument(v)))});let c=nw();return u.forEach((f,m)=>{const v=i.get(f);void 0!==v&&sw(v.mutation,m,uo.empty(),Er.now()),tw(t,m)&&(c=c.insert(f,m))}),c})}}class $6{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return le.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:uM(r.bundledQuery),readTime:Wr(r.readTime)}),le.resolve();var r}}class H6{constructor(){this.overlays=new nr(rt.comparator),this.ls=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rl();return le.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Rl(),u=t.length+1,c=new rt(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===u&&m.largestBatchId>r&&i.set(m.getKey(),m)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new nr((v,D)=>v-D);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let D=u.get(v.largestBatchId);null===D&&(D=Rl(),u=u.insert(v.largestBatchId,D)),D.set(v.getKey(),v)}}const f=Rl(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,D)=>f.set(v,D)),!(f.size()>=i)););return le.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new eM(t,r));let u=this.ls.get(t);void 0===u&&(u=nn(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class gM{constructor(){this.fs=new cr(Li.ds),this.ws=new cr(Li._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Li(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Li(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new rt(new In([])),r=new Li(t,e),i=new Li(t,e+1),u=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),u.push(c.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rt(new In([])),r=new Li(t,e),i=new Li(t,e+1);let u=nn();return this.ws.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new Li(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Li{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rt.comparator(e.key,t.key)||Kt(e.As,t.As)}static _s(e,t){return Kt(e.As,t.As)||rt.comparator(e.key,t.key)}}class G6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new cr(Li.ds)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const c=new J1(u,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new Li(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return le.resolve(c)}lookupMutationBatch(e,t){return le.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return le.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);u.push(f)}),le.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Kt);return t.forEach(i=>{const u=new Li(i,0),c=new Li(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,c],f=>{r=r.add(f.As)})}),le.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;rt.isDocumentKey(u)||(u=u.child(""));const c=new Li(new rt(u),0);let f=new cr(Kt);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.As)),!0)},c),le.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return le.forEach(t.mutations,i=>{const u=new Li(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Li(t,0),i=this.Rs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class q6{constructor(e){this.Ds=e,this.docs=new nr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let r=lo();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():dr.newInvalidDocument(i))}),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=lo();const c=t.path,f=new rt(c.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:D}}=m.getNext();if(!c.isPrefixOf(v.path))break;v.path.length>c.length+1||F1(OR(D),r)<=0||(i.has(D.key)||tw(t,D))&&(u=u.insert(D.key,D.mutableCopy()))}return le.resolve(u)}getAllFromCollectionGroup(e,t,r,i){ft()}Cs(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new z6(this)}getSize(e){return le.resolve(this.size)}}class z6 extends bL{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Z6{constructor(e){this.persistence=e,this.xs=new ud(t=>Vp(t),X0),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ns=0,this.ks=new gM,this.targetCount=0,this.Ms=Zp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),le.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Zp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Fn(t),le.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),le.waitFor(u).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),le.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.ks.containsKey(t))}}class mM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Uo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Z6(this),this.indexManager=new O6,this.remoteDocumentCache=new q6(r=>this.referenceDelegate.Ls(r)),this.serializer=new eL(t),this.qs=new $6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new H6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new G6(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new W6(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return le.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class W6 extends RR{constructor(e){super(),this.currentSequenceNumber=e}}class wT{constructor(e){this.persistence=e,this.Qs=new gM,this.js=null}static zs(e){return new wT(e)}get Ws(){if(this.js)return this.js;throw ft()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),le.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ws,r=>{const i=rt.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,At.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return le.or([()=>le.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class K6{constructor(e){this.serializer=e}O(e,t,r,i){const u=new KI("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UR,{unique:!0}),f.createObjectStore("documentMutations"),xL(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=le.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),xL(e)),c=c.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UR,{unique:!0});const D=m.store("mutations"),A=v.map(L=>D.put(L));return le.waitFor(A)})}(e,u))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(u))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(u))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(u))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:O3});m.createIndex("collectionPathOverlayIndex",N3,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",R3,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:b3});m.createIndex("documentKeyIndex",E3),m.createIndex("collectionGroupIndex",I3)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,u))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:S3}).createIndex("sequenceNumberIndex",M3,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:P3}).createIndex("documentKeyIndex",k3,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=_T(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>le.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>le.forEach(f,m=>{Tt(m.userId===u.userId);const v=Gp(this.serializer,m);return gL(e,u.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((c,f)=>{const m=new In(c),v=[0,_s(m)];u.push(t.get(v).next(D=>D?le.resolve():t.put({targetId:0,path:_s(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:x3});const r=t.store("collectionParents"),i=new pM,u=c=>{if(i.add(c)){const f=c.lastSegment(),m=c.popLast();return r.put({collectionId:f,parent:_s(m)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const m=new In(c);return u(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,m],v)=>{const D=Ol(f);return u(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=hw(i),c=nL(this.serializer,u);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,c)=>{const f=t.store("remoteDocumentsV14"),m=(v=c,v.document?new rt(In.fromString(v.document.name).popFirst(5)):v.noDocument?rt.fromSegments(v.noDocument.path):v.unknownDocument?rt.fromSegments(v.unknownDocument.path):ft()).path.toArray();var v;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(D))}).next(()=>le.waitFor(i))}si(e,t){const r=t.store("mutations"),i=EL(this.serializer),u=new mM(wT.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(m=>{var v;let D=null!==(v=f.get(m.userId))&&void 0!==v?v:nn();Gp(this.serializer,m).keys().forEach(A=>D=D.add(A)),f.set(m.userId,D)}),le.forEach(f,(m,v)=>{const D=new Ri(v),A=fT.de(this.serializer,D),L=u.getIndexManager(D),j=yT.de(D,this.serializer,L,u.referenceDelegate);return new AL(i,j,A,L).recalculateAndSaveOverlaysForDocumentKeys(new U1(t,Uo.ct),m).next()})})}}function xL(n){n.createObjectStore("targetDocuments",{keyPath:D3}).createIndex("documentTargetsIndex",A3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",T3,{unique:!0}),n.createObjectStore("targetGlobal")}const _M="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yM{constructor(e,t,r,i,u,c,f,m,v,D,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=c,this.document=f,this.ri=v,this.oi=D,this.ui=A,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!yM.D())throw new Re(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V6(this,i),this.di=t+"main",this.serializer=new eL(m),this.wi=new bu(this.di,this.ui,new K6(this.serializer)),this.Bs=new R6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EL(this.serializer),this.qs=new D6,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&Zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,_M);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Uo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ae.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Nh(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return yw(e).get("owner").next(t=>le.resolve(this.Ri(t)))}Pi(e){return bT(e).delete(this.clientId)}bi(){var e=this;return(0,ae.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Fi(r,"clientMetadata");return i.j().next(u=>{const c=e.Si(u,18e5),f=u.filter(m=>-1===c.indexOf(m));return le.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?le.resolve(!0):yw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,_M);return!1}}return!(!this.networkEnabled||!this.inForeground)||bT(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ae.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new U1(t,Uo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>bT(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return yT.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new N6(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return fT.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.ui)?L3:14===c?HR:13===c?$R:12===c?F3:11===c?jR:void ft();var c;let f;return this.wi.runTransaction(e,i,u,m=>(f=new U1(m,this.Os?this.Os.next():Uo.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw Zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ge.FAILED_PRECONDITION,NR);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Oi(e){return yw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ge.FAILED_PRECONDITION,_M)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yw(e).put("owner",t)}static D(){return bu.D()}Ai(e){const t=yw(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Gt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Zr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yw(n){return Fi(n,"owner")}function bT(n){return Fi(n,"clientMetadata")}function vM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=nn(),i=nn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new wM(e,t.fromCache,r,i)}}class SL{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(fF(t))return le.resolve(null);let r=Us(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=oT(t,null,"F"),r=Us(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=nn(...u);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,f);return this.zi(t,v,c,m.readTime)?this.Ki(e,oT(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return fF(t)||i.isEqual(At.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const c=this.ji(t,u);return this.zi(t,c,r,i)?this.Qi(e,t):(O1()<=Il.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),K1(t)),this.Wi(e,c,t,kR(i,-1)))})}ji(e,t){let r=new cr(mF(e));return t.forEach((i,u)=>{tw(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return O1()<=Il.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",K1(t)),this.Ui.getDocumentsMatchingQuery(e,t,Vo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class Y6{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new nr(Kt),this.Yi=new ud(u=>Vp(u),X0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AL(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function ML(n,e,t,r){return new Y6(n,e,t,r)}function PL(n,e){return CM.apply(this,arguments)}function CM(){return CM=(0,ae.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],f=[];let m=nn();for(const v of i){c.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}for(const v of u){f.push(v.batchId);for(const D of v.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:c,addedBatchIds:f}))})})}),CM.apply(this,arguments)}function Q6(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,m,v){const D=m.batch,A=D.keys();let L=le.resolve();return A.forEach(j=>{L=L.next(()=>v.getEntry(f,j)).next(z=>{const ee=m.docVersions.get(j);Tt(null!==ee),z.version.compareTo(ee)<0&&(D.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(f,D))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=nn();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(f=f.add(c.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function kL(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function J6(n,e){const t=st(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((D,A)=>{const L=i.get(A);if(!L)return;f.push(t.Bs.removeMatchingKeys(u,D.removedDocuments,A).next(()=>t.Bs.addMatchingKeys(u,D.addedDocuments,A)));let j=L.withSequenceNumber(u.currentSequenceNumber);var z,ee,oe;null!==e.targetMismatches.get(A)?j=j.withResumeToken(vi.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):D.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(D.resumeToken,r)),i=i.insert(A,j),ee=j,oe=D,(0===(z=L).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(u,j))});let m=lo(),v=nn();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,D))}),f.push(OL(u,c,e.documentUpdates).next(D=>{m=D.nr,v=D.sr})),!r.isEqual(At.min())){const D=t.Bs.getLastRemoteSnapshotVersion(u).next(A=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(D)}return le.waitFor(f).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,m,v)).next(()=>m)}).then(u=>(t.Ji=i,u))}function OL(n,e,t){let r=nn(),i=nn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=lo();return t.forEach((f,m)=>{const v=u.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(At.min())?(e.removeEntry(f,m.readTime),c=c.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),c=c.insert(f,m)):Be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{nr:c,sr:i}})}function X6(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E_(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,le.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new cd(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function I_(n,e,t){return bM.apply(this,arguments)}function bM(){return bM=(0,ae.Z)(function*(n,e,t){const r=st(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Nh(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),bM.apply(this,arguments)}function ET(n,e,t){const r=st(n);let i=At.min(),u=nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,m,v){const D=st(f),A=D.Yi.get(v);return void 0!==A?le.resolve(D.Ji.get(A)):D.Bs.getTargetData(m,v)}(r,c,Us(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(m=>{u=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:At.min(),t?u:nn())).next(f=>(FL(r,gF(e),f),{documents:f,ir:u})))}function NL(n,e){const t=st(n),r=st(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(c=>c?c.target:null))}function RL(n,e){const t=st(n),r=t.Xi.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,kR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FL(t,e,i),i))}function FL(n,e,t){let r=n.Xi.get(e)||At.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function EM(){return EM=(0,ae.Z)(function*(n,e,t,r){const i=st(n);let u=nn(),c=lo();for(const v of t){const D=e.rr(v.metadata.name);v.document&&(u=u.add(D));const A=e.ur(v);A.setReadTime(e.cr(v.metadata.readTime)),c=c.insert(D,A)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield E_(i,(v=r,Us(p_(In.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>OL(v,f,c).next(D=>(f.apply(v),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,u,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,D.nr,D.sr)).next(()=>D.nr)))}),EM.apply(this,arguments)}function t4(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,ae.Z)(function*(n,e,t=nn()){const r=yield E_(n,Us(uM(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(u,e);const f=r.withResumeToken(vi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(u,f).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),IM.apply(this,arguments)}function LL(n,e){return`firestore_clients_${n}_${e}`}function VL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function TM(n,e){return`firestore_targets_${n}_${e}`}class IT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Re(i.error.code,i.error.message))),c?new IT(e,t,i.state,u):(Zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Re(r.error.code,r.error.message))),u?new vw(e,r.state,i):(Zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Y1();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=LR(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new TT(e,u):(Zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class DM{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new DM(t.clientId,t.onlineState):(Zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class AM{constructor(){this.activeTargetIds=Y1()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xM{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new nr(Kt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=LL(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new AM),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ae.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(LL(e.persistenceKey,i));if(u){const c=TT.ar(i,u);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(TM(this.persistenceKey,e));if(r){const i=vw.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TM(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let c=Uo.ct;if(null!=u)try{const f=JSON.parse(u);Tt("number"==typeof f),c=f}catch(f){Zr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Uo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new IT(this.currentUser,e,t,r),u=VL(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=VL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=TM(this.persistenceKey,e),u=new vw(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return TT.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return IT.ar(new Ri(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return vw.ar(i,t)}br(e){return DM.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),c=[],f=[];return u.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{u.has(m)||f.push(m)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Y1();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UL{constructor(){this.Hr=new AM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new AM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class n4{Yr(e){}shutdown(){}}class BL{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let DT=null;function SM(){return null===DT?DT=268435456+Math.round(2147483648*Math.random()):DT++,"0x"+DT.toString(16)}const r4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class i4{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const vs="WebChannelConnection";class s4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const c=SM(),f=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const m={};return this.Eo(m,i,u),this.Ao(e,f,m,r).then(v=>(Be("RestConnection",`Received RPC '${e}' ${c}: `,v),v),v=>{throw ba("RestConnection",`RPC '${e}' ${c} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,u,c){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+u_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${r4[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=SM();return new Promise((c,f)=>{const m=new n3;m.setWithCredentials(!0),m.listenOnce(XB.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case k1.NO_ERROR:const D=m.getResponseJson();Be(vs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(D)),c(D);break;case k1.TIMEOUT:Be(vs,`RPC '${e}' ${u} timed out`),f(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case k1.HTTP_ERROR:const A=m.getStatus();if(Be(vs,`RPC '${e}' ${u} failed with status:`,A,"response text:",m.getResponseText()),A>0){let L=m.getResponseJson();Array.isArray(L)&&(L=L[0]);const j=L?.error;if(j&&j.status&&j.message){const z=function(ee){const oe=ee.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(oe)>=0?oe:ge.UNKNOWN}(j.status);f(new Re(z,j.message))}else f(new Re(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Be(vs,`RPC '${e}' ${u} completed.`)}});const v=JSON.stringify(i);Be(vs,`RPC '${e}' ${u} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=SM(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=QB(),f=JB(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new t3({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const D=u.join("");Be(vs,`Creating RPC '${e}' stream ${i}: ${D}`,m);const A=c.createWebChannel(D,m);let L=!1,j=!1;const z=new i4({ro:oe=>{j?Be(vs,`Not sending because RPC '${e}' stream ${i} is closed:`,oe):(L||(Be(vs,`Opening RPC '${e}' stream ${i} transport.`),A.open(),L=!0),Be(vs,`RPC '${e}' stream ${i} sending:`,oe),A.send(oe))},oo:()=>A.close()}),ee=(oe,Ue,ze)=>{oe.listen(Ue,je=>{try{ze(je)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return ee(A,zI.EventType.OPEN,()=>{j||Be(vs,`RPC '${e}' stream ${i} transport opened.`)}),ee(A,zI.EventType.CLOSE,()=>{j||(j=!0,Be(vs,`RPC '${e}' stream ${i} transport closed`),z.wo())}),ee(A,zI.EventType.ERROR,oe=>{j||(j=!0,ba(vs,`RPC '${e}' stream ${i} transport errored:`,oe),z.wo(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),ee(A,zI.EventType.MESSAGE,oe=>{var Ue;if(!j){const ze=oe.data[0];Tt(!!ze);const je=ze,Ye=je.error||(null===(Ue=je[0])||void 0===Ue?void 0:Ue.error);if(Ye){Be(vs,`RPC '${e}' stream ${i} received error:`,Ye);const Ft=Ye.status;let Bt=function(Sr){const ws=ri[Sr];if(void 0!==ws)return NF(ws)}(Ft),Cn=Ye.message;void 0===Bt&&(Bt=ge.INTERNAL,Cn="Unknown error status: "+Ft+" with message "+Ye.message),j=!0,z.wo(new Re(Bt,Cn)),A.close()}else Be(vs,`RPC '${e}' stream ${i} received:`,ze),z._o(ze)}}),ee(f,e3.STAT_EVENT,oe=>{oe.stat===DR.PROXY?Be(vs,`RPC '${e}' stream ${i} detected buffering proxy`):oe.stat===DR.NOPROXY&&Be(vs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{z.fo()},0),z}}function jL(){return typeof window<"u"?window:null}function AT(){return typeof document<"u"?document:null}function ww(n){return new g6(n,!0)}class MM{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class $L{constructor(e,t,r,i,u,c,f,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new MM(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ae.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ae.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ae.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Zr(t.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,ae.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o4 extends $L{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function y6(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ft(),i=e.targetChange.targetIds||[],u=function(m,v){return m.useProto3Json?(Tt(void 0===v||"string"==typeof v),vi.fromBase64String(v||"")):(Tt(void 0===v||v instanceof Uint8Array),vi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(m){const v=void 0===m.code?ge.UNKNOWN:NF(m.code);return new Re(v,m.message||"")}(c);t=new UF(r,i,u,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Fl(n,r.document.name),u=Wr(r.document.updateTime),c=r.document.createTime?Wr(r.document.createTime):At.min(),f=new ts({mapValue:{fields:r.document.fields}}),m=dr.newFoundDocument(i,u,c,f);t=new dT(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Fl(n,r.document),u=r.readTime?Wr(r.readTime):At.min(),c=dr.newNoDocument(i,u);t=new dT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Fl(n,r.document);t=new dT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,{count:i=0,unchangedNames:u}=r,c=new l6(i,u);t=new VF(r.targetId,c)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return At.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?At.min():u.readTime?Wr(u.readTime):At.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=cw(this.serializer),t.addTarget=function(i,u){let c;const f=u.target;if(c=rT(f)?{documents:KF(i,f)}:{query:aM(i,f)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=HF(i,u.resumeToken);const m=rM(i,u.expectedCount);null!==m&&(c.expectedCount=m)}else if(u.snapshotVersion.compareTo(At.min())>0){c.readTime=v_(i,u.snapshotVersion.toTimestamp());const m=rM(i,u.expectedCount);null!==m&&(c.expectedCount=m)}return c}(this.serializer,e);const r=function w6(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=cw(this.serializer),t.removeTarget=e,this.Wo(t)}}class a4 extends $L{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function v6(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let u=Wr(r.updateTime?r.updateTime:i);return u.isEqual(At.min())&&(u=Wr(i)),new s6(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.cu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=cw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dw(this.serializer,r))};this.Wo(t)}}class u4 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ge.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.vo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Re(ge.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class c4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Zr(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class d4{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(f=>{r.enqueueAndForget((0,ae.Z)(function*(){var m;zh(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ae.Z)(function*(v){const D=st(v);D.vu.add(4),yield T_(D),D.bu.set("Unknown"),D.vu.delete(4),yield Cw(D)}),function(v){return m.apply(this,arguments)})(c))}))}),this.bu=new c4(r,i)}}function Cw(n){return kM.apply(this,arguments)}function kM(){return kM=(0,ae.Z)(function*(n){if(zh(n))for(const e of n.Ru)yield e(!0)}),kM.apply(this,arguments)}function T_(n){return OM.apply(this,arguments)}function OM(){return OM=(0,ae.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),OM.apply(this,arguments)}function xT(n,e){const t=st(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),FM(t)?RM(t):A_(t).Ko()&&NM(t,e))}function bw(n,e){const t=st(n),r=A_(t);t.Au.delete(e),r.Ko()&&HL(t,e),0===t.Au.size&&(r.Ko()?r.jo():zh(t)&&t.bu.set("Unknown"))}function NM(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}A_(n).su(e)}function HL(n,e){n.Vu.qt(e),A_(n).iu(e)}function RM(n){n.Vu=new d6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),A_(n).start(),n.bu.gu()}function FM(n){return zh(n)&&!A_(n).Uo()&&n.Au.size>0}function zh(n){return 0===st(n).vu.size}function GL(n){n.Vu=void 0}function h4(n){return LM.apply(this,arguments)}function LM(){return LM=(0,ae.Z)(function*(n){n.Au.forEach((e,t)=>{NM(n,e)})}),LM.apply(this,arguments)}function f4(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,ae.Z)(function*(n,e){GL(n),FM(n)?(n.bu.Iu(e),RM(n)):n.bu.set("Unknown")}),VM.apply(this,arguments)}function p4(n,e,t){return UM.apply(this,arguments)}function UM(){return UM=(0,ae.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof UF&&2===e.state&&e.cause)try{yield(r=(0,ae.Z)(function*(i,u){const c=u.cause;for(const f of u.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ST(n,r)}else if(e instanceof dT?n.Vu.Ht(e):e instanceof VF?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(At.min()))try{const r=yield kL(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.Vu.ce(u);return c.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(f.resumeToken,u))}}),c.targetMismatches.forEach((f,m)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(vi.EMPTY_BYTE_STRING,v.snapshotVersion)),HL(i,f);const D=new cd(v.target,f,m,v.sequenceNumber);NM(i,D)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield ST(n,r)}var r}),UM.apply(this,arguments)}function ST(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,ae.Z)(function*(n,e,t){if(!Nh(e))throw e;n.vu.add(1),yield T_(n),n.bu.set("Offline"),t||(t=()=>kL(n.localStore)),n.asyncQueue.enqueueRetryable((0,ae.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield Cw(n)}))}),BM.apply(this,arguments)}function qL(n,e){return e().catch(t=>ST(n,t,e))}function D_(n){return jM.apply(this,arguments)}function jM(){return jM=(0,ae.Z)(function*(n){const e=st(n),t=Zh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;g4(e);)try{const i=yield X6(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,m4(e,i)}catch(i){yield ST(e,i)}zL(e)&&ZL(e)}),jM.apply(this,arguments)}function g4(n){return zh(n)&&n.Eu.length<10}function m4(n,e){n.Eu.push(e);const t=Zh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function zL(n){return zh(n)&&!Zh(n).Uo()&&n.Eu.length>0}function ZL(n){Zh(n).start()}function _4(n){return $M.apply(this,arguments)}function $M(){return $M=(0,ae.Z)(function*(n){Zh(n).hu()}),$M.apply(this,arguments)}function y4(n){return HM.apply(this,arguments)}function HM(){return HM=(0,ae.Z)(function*(n){const e=Zh(n);for(const t of n.Eu)e.uu(t.mutations)}),HM.apply(this,arguments)}function v4(n,e,t){return GM.apply(this,arguments)}function GM(){return GM=(0,ae.Z)(function*(n,e,t){const r=n.Eu.shift(),i=X1.from(r,e,t);yield qL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield D_(n)}),GM.apply(this,arguments)}function w4(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,ae.Z)(function*(n,e){var t;e&&Zh(n).ou&&(yield(t=(0,ae.Z)(function*(r,i){if(OF(u=i.code)&&u!==ge.ABORTED){const c=r.Eu.shift();Zh(r).Qo(),yield qL(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield D_(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),zL(n)&&ZL(n)}),qM.apply(this,arguments)}function WL(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,ae.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=zh(t);t.vu.add(3),yield T_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Cw(t)}),zM.apply(this,arguments)}function ZM(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,ae.Z)(function*(n,e){const t=st(n);e?(t.vu.delete(2),yield Cw(t)):e||(t.vu.add(2),yield T_(t),t.bu.set("Unknown"))}),WM.apply(this,arguments)}function A_(n){return n.Su||(n.Su=function(e,t,r){const i=st(e);return i.fu(),new o4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:h4.bind(null,n),ao:f4.bind(null,n),nu:p4.bind(null,n)}),n.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(n.Su.Qo(),FM(n)?RM(n):n.bu.set("Unknown")):(yield n.Su.stop(),GL(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Zh(n){return n.Du||(n.Du=function(e,t,r){const i=st(e);return i.fu(),new a4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:_4.bind(null,n),ao:w4.bind(null,n),au:y4.bind(null,n),cu:v4.bind(null,n)}),n.Ru.push(function(){var e=(0,ae.Z)(function*(t){t?(n.Du.Qo(),yield D_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class KM{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,f=new KM(e,t,c,i,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x_(n,e){if(Zr("AsyncQueue",`${e}: ${n}`),Nh(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class S_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=nw(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new S_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof S_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new S_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class KL{constructor(){this.Cu=new nr(rt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ft():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class M_{constructor(e,t,r,i,u,c,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new M_(e,t,S_.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ew(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class C4{constructor(){this.Nu=void 0,this.listeners=[]}}class b4{constructor(){this.queries=new ud(e=>pF(e),ew),this.onlineState="Unknown",this.ku=new Set}}function YM(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,ae.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new C4),i)try{u.Nu=yield t.onListen(r)}catch(c){const f=x_(c,`Initialization of query '${K1(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&eP(t)}),QM.apply(this,arguments)}function JM(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,ae.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),XM.apply(this,arguments)}function E4(n,e){const t=st(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&eP(t)}function I4(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function eP(n){n.ku.forEach(e=>{e.next()})}class tP{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new M_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=M_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class T4{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class YL{constructor(e){this.serializer=e}rr(e){return Fl(this.serializer,e)}ur(e){return e.metadata.exists?WF(this.serializer,e.document,!1):dr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Wr(e)}}class D4{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QL(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=In.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new YL(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||nn()).add(u);t.set(c,f)}}return t}complete(){var e=this;return(0,ae.Z)(function*(){const t=yield function e4(n,e,t,r){return EM.apply(this,arguments)}(e.localStore,new YL(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield t4(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function QL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class JL{constructor(e){this.key=e}}class XL{constructor(e){this.key=e}}class e2{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=nn(),this.mutatedKeys=nn(),this.tc=mF(e),this.ec=new S_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new KL,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,A)=>{const L=i.get(D),j=tw(this.query,A)?A:null,z=!!L&&this.mutatedKeys.has(L.key),ee=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let oe=!1;L&&j?L.data.isEqual(j.data)?z!==ee&&(r.track({type:3,doc:j}),oe=!0):this.rc(L,j)||(r.track({type:2,doc:j}),oe=!0,(m&&this.tc(j,m)>0||v&&this.tc(j,v)<0)&&(f=!0)):!L&&j?(r.track({type:0,doc:j}),oe=!0):L&&!j&&(r.track({type:1,doc:L}),oe=!0,(m||v)&&(f=!0)),oe&&(j?(c=c.add(j),u=ee?u.add(D):u.delete(D)):(c=c.delete(D),u=u.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),u=u.delete(D.key),r.track({type:1,doc:D})}return{ec:c,ic:r,zi:f,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((v,D)=>function(A,L){const j=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return j(A)-j(L)}(v.type,D.type)||this.tc(v.doc,D.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,m=f!==this.Xu;return this.Xu=f,0!==u.length||m?{snapshot:new M_(this.query,e.ec,i,u,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new KL,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=nn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new XL(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new JL(r))}),t}hc(e){this.Yu=e.ir,this.Zu=nn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return M_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class A4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class x4{constructor(e){this.key=e,this.fc=!1}}class S4{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new ud(f=>pF(f),ew),this._c=new Map,this.mc=new Set,this.gc=new nr(rt.comparator),this.yc=new Map,this.Ic=new gM,this.Tc={},this.Ec=new Map,this.Ac=Zp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function M4(n,e){return nP.apply(this,arguments)}function nP(){return nP=(0,ae.Z)(function*(n,e){const t=TP(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const c=yield E_(t.localStore,Us(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield rP(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&xT(t.remoteStore,c)}return i}),nP.apply(this,arguments)}function rP(n,e,t,r,i){return iP.apply(this,arguments)}function iP(){return iP=(0,ae.Z)(function*(n,e,t,r,i){n.Rc=(A,L,j)=>{return(z=(0,ae.Z)(function*(ee,oe,Ue,ze){let je=oe.view.sc(Ue);je.zi&&(je=yield ET(ee.localStore,oe.query,!1).then(({documents:Bt})=>oe.view.sc(Bt,je)));const Ye=ze&&ze.targetChanges.get(oe.targetId),Ft=oe.view.applyChanges(je,ee.isPrimaryClient,Ye);return pP(ee,oe.targetId,Ft.cc),Ft.snapshot}),function(ee,oe,Ue,ze){return z.apply(this,arguments)})(n,A,L,j);var z};const u=yield ET(n.localStore,e,!0),c=new e2(e,u.ir),f=c.sc(u.documents),m=uw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=c.applyChanges(f,n.isPrimaryClient,m);pP(n,t,v.cc);const D=new A4(e,t,c);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),iP.apply(this,arguments)}function P4(n,e){return sP.apply(this,arguments)}function sP(){return sP=(0,ae.Z)(function*(n,e){const t=st(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!ew(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield I_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bw(t.remoteStore,r.targetId),P_(t,r.targetId)}).catch(Oh))):(P_(t,r.targetId),yield I_(t.localStore,r.targetId,!0))}),sP.apply(this,arguments)}function oP(){return oP=(0,ae.Z)(function*(n,e,t){const r=DP(n);try{const i=yield function(u,c){const f=st(u),m=Er.now(),v=c.reduce((L,j)=>L.add(j.key),nn());let D,A;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let j=lo(),z=nn();return f.Zi.getEntries(L,v).next(ee=>{j=ee,j.forEach((oe,Ue)=>{Ue.isValidDocument()||(z=z.add(oe))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,j)).next(ee=>{D=ee;const oe=[];for(const Ue of c){const ze=a6(Ue,D.get(Ue.key).overlayedDocument);null!=ze&&oe.push(new ld(Ue.key,ze,eF(ze.value.mapValue),Ir.exists(!0)))}return f.mutationQueue.addMutationBatch(L,m,oe,c)}).next(ee=>{A=ee;const oe=ee.applyToLocalDocumentSet(D,z);return f.documentOverlayCache.saveOverlays(L,ee.batchId,oe)})}).then(()=>({batchId:A.batchId,changes:yF(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,f){let m=u.Tc[u.currentUser.toKey()];m||(m=new nr(Kt)),m=m.insert(c,f),u.Tc[u.currentUser.toKey()]=m}(r,i.batchId,t),yield dd(r,i.changes),yield D_(r.remoteStore)}catch(i){const u=x_(i,"Failed to persist write");t.reject(u)}}),oP.apply(this,arguments)}function t2(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,ae.Z)(function*(n,e){const t=st(n);try{const r=yield J6(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.yc.get(u);c&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Tt(c.fc):i.removedDocuments.size>0&&(Tt(c.fc),c.fc=!1))}),yield dd(t,r,e)}catch(r){yield Oh(r)}}),aP.apply(this,arguments)}function n2(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(u,c){const f=st(u);f.onlineState=c;let m=!1;f.queries.forEach((v,D)=>{for(const A of D.listeners)A.Mu(c)&&(m=!0)}),m&&eP(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function O4(n,e,t){return uP.apply(this,arguments)}function uP(){return uP=(0,ae.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let c=new nr(rt.comparator);c=c.insert(u,dr.newNoDocument(u,At.min()));const f=nn().add(u),m=new aw(At.min(),new Map,new nr(Kt),c,f);yield t2(r,m),r.gc=r.gc.remove(u),r.yc.delete(e),gP(r)}else yield I_(r.localStore,e,!1).then(()=>P_(r,e,t)).catch(Oh)}),uP.apply(this,arguments)}function N4(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,ae.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield Q6(t.localStore,e);fP(t,r,null),hP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dd(t,i)}catch(i){yield Oh(i)}}),lP.apply(this,arguments)}function R4(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=(0,ae.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(u,c){const f=st(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,c).next(D=>(Tt(null!==D),v=D.keys(),f.mutationQueue.removeMutationBatch(m,D))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);fP(r,e,t),hP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dd(r,i)}catch(i){yield Oh(i)}}),cP.apply(this,arguments)}function dP(){return dP=(0,ae.Z)(function*(n,e){const t=st(n);zh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=st(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=x_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dP.apply(this,arguments)}function hP(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fP(n,e,t){const r=st(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function P_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||r2(n,r)})}function r2(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(bw(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),gP(n))}function pP(n,e,t){for(const r of t)r instanceof JL?(n.Ic.addReference(r.key,e),L4(n,r)):r instanceof XL?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||r2(n,r.key)):ft()}function L4(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),gP(n))}function gP(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new rt(In.fromString(e)),r=n.Ac.next();n.yc.set(r,new x4(t)),n.gc=n.gc.insert(t,r),xT(n.remoteStore,new cd(Us(p_(t.path)),r,"TargetPurposeLimboResolution",Uo.ct))}}function dd(n,e,t){return mP.apply(this,arguments)}function mP(){return mP=(0,ae.Z)(function*(n,e,t){const r=st(n),i=[],u=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,m)=>{c.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const D=wM.Li(m.targetId,v);u.push(D)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,ae.Z)(function*(m,v){const D=st(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>le.forEach(v,L=>le.forEach(L.Fi,j=>D.persistence.referenceDelegate.addReference(A,L.targetId,j)).next(()=>le.forEach(L.Bi,j=>D.persistence.referenceDelegate.removeReference(A,L.targetId,j)))))}catch(A){if(!Nh(A))throw A;Be("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const L=A.targetId;if(!A.fromCache){const j=D.Ji.get(L),ee=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.Ji=D.Ji.insert(L,ee)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,u))}),mP.apply(this,arguments)}function V4(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,ae.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield PL(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Re(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dd(t,r.er)}var i}),_P.apply(this,arguments)}function U4(n,e){const t=st(n),r=t.yc.get(e);if(r&&r.fc)return nn().add(r.key);{let i=nn();const u=t._c.get(e);if(!u)return i;for(const c of u){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function B4(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,ae.Z)(function*(n,e){const t=st(n),r=yield ET(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&pP(t,e.targetId,i.cc),i}),yP.apply(this,arguments)}function j4(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,ae.Z)(function*(n,e){const t=st(n);return RL(t.localStore,e).then(r=>dd(t,r))}),vP.apply(this,arguments)}function $4(n,e,t,r){return wP.apply(this,arguments)}function wP(){return wP=(0,ae.Z)(function*(n,e,t,r){const i=st(n),u=yield function(c,f){const m=st(c),v=st(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>v.Sn(D,f).next(A=>A?m.localDocuments.getDocuments(D,A):le.resolve(null)))}(i.localStore,e);var f;null!==u?("pending"===t?yield D_(i.remoteStore):"acknowledged"===t||"rejected"===t?(fP(i,e,r||null),hP(i,e),f=e,st(st(i.localStore).mutationQueue).Cn(f)):ft(),yield dd(i,u)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),wP.apply(this,arguments)}function CP(){return CP=(0,ae.Z)(function*(n,e){const t=st(n);if(TP(t),DP(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield i2(t,r.toArray());t.vc=!0,yield ZM(t.remoteStore,!0);for(const u of i)xT(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(P_(t,c),I_(t.localStore,c,!0))),bw(t.remoteStore,c)}),yield i,yield i2(t,r),function(u){const c=st(u);c.yc.forEach((f,m)=>{bw(c.remoteStore,m)}),c.Ic.Ts(),c.yc=new Map,c.gc=new nr(rt.comparator)}(t),t.vc=!1,yield ZM(t.remoteStore,!1)}}),CP.apply(this,arguments)}function i2(n,e,t){return bP.apply(this,arguments)}function bP(){return bP=(0,ae.Z)(function*(n,e,t){const r=st(n),i=[],u=[];for(const c of e){let f;const m=r._c.get(c);if(m&&0!==m.length){f=yield E_(r.localStore,Us(m[0]));for(const v of m){const D=r.wc.get(v),A=yield B4(r,D);A.snapshot&&u.push(A.snapshot)}}else{const v=yield NL(r.localStore,c);f=yield E_(r.localStore,v),yield rP(r,s2(v),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(u),i}),bP.apply(this,arguments)}function s2(n){return hF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G4(n){const e=st(n);return st(st(e.localStore).persistence).$i()}function q4(n,e,t,r){return EP.apply(this,arguments)}function EP(){return EP=(0,ae.Z)(function*(n,e,t,r){const i=st(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield RL(i.localStore,gF(u[0])),f=aw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vi.EMPTY_BYTE_STRING);yield dd(i,c,f);break}case"rejected":yield I_(i.localStore,e,!0),P_(i,e,r);break;default:ft()}}),EP.apply(this,arguments)}function z4(n,e,t){return IP.apply(this,arguments)}function IP(){return IP=(0,ae.Z)(function*(n,e,t){const r=TP(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const u=yield NL(r.localStore,i),c=yield E_(r.localStore,u);yield rP(r,s2(u),c.targetId,!1,c.resumeToken),xT(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield I_(r.localStore,i,!1).then(()=>{bw(r.remoteStore,i),P_(r,i)}).catch(Oh))}}),IP.apply(this,arguments)}function TP(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=t2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O4.bind(null,e),e.dc.nu=E4.bind(null,e.eventManager),e.dc.Pc=I4.bind(null,e.eventManager),e}function DP(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R4.bind(null,e),e}class Ew{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ae.Z)(function*(){t.serializer=ww(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ML(this.persistence,new SL,e.initialUser,this.serializer)}createPersistence(e){return new mM(wT.zs,this.serializer)}createSharedClientState(e){return new UL}terminate(){var e=this;return(0,ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class AP extends Ew{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield DP(r.Vc.syncEngine),yield D_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return ML(this.persistence,new SL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new wL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new v3(t,this.persistence);return new y3(e.asyncQueue,r)}createPersistence(e){const t=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ys.withCacheSize(this.cacheSizeBytes):ys.DEFAULT;return new yM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jL(),AT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new UL}}class o2 extends AP{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ae.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof xM&&(r.sharedClientState.syncEngine={jr:$4.bind(null,i),zr:q4.bind(null,i),Wr:z4.bind(null,i),$i:G4.bind(null,i),Qr:j4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ae.Z)(function*(c){yield function H4(n,e){return CP.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jL();if(!xM.D(t))throw new Re(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class k_{initialize(e,t){var r=this;return(0,ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>n2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=V4.bind(null,r.syncEngine),yield ZM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new b4}createDatastore(e){const t=ww(e.databaseInfo.databaseId),r=new s4(e.databaseInfo);return new u4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=f=>n2(this.syncEngine,f,0),c=BL.D()?new BL:new n4,new d4(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,f,m,v){const D=new S4(r,i,u,c,f,m);return v&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ae.Z)(function*(t){const r=st(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield T_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function a2(n,e=10240){let t=0;return{read:()=>(0,ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ae.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class MT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class K4{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new yi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ae.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ae.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new T4(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ae.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ae.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Y4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ae.Z)(function*(u,c){const f=st(u),m=cw(f.serializer)+"/documents",v={documents:c.map(j=>lw(f.serializer,j))},D=yield f.vo("BatchGetDocuments",m,v,c.length),A=new Map;D.forEach(j=>{const z=function _6(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=Fl(t,r.found.name),u=Wr(r.found.updateTime),c=r.found.createTime?Wr(r.found.createTime):At.min(),f=new ts({mapValue:{fields:r.found.fields}});return dr.newFoundDocument(i,u,c,f)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=Fl(t,r.missing),u=Wr(r.readTime);return dr.newNoDocument(i,u)}(n,e):ft()}(f.serializer,j);A.set(z.key.toString(),z)});const L=[];return c.forEach(j=>{const z=A.get(j.toString());Tt(!!z),L.push(z)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new y_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=rt.fromPath(i);e.mutations.push(new Q1(u,e.precondition(u)))}),yield(r=(0,ae.Z)(function*(i,u){const c=st(i),f=cw(c.serializer)+"/documents",m={writes:u.map(v=>dw(c.serializer,v))};yield c.Io("Commit",f,m)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Ir.exists(!1):Ir.updateTime(t):Ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Re(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ir.updateTime(t)}return Ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Q4{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new MM(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ae.Z)(function*(){const t=new Y4(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Z0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!OF(t)}return!1}}class J4{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ri.UNAUTHENTICATED,this.clientId=MR.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,ae.Z)(function*(f){Be("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=x_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function PT(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ae.Z)(function*(u){r.isEqual(u)||(yield PL(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),xP.apply(this,arguments)}function SP(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PP(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>WL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>WL(e.remoteStore,u)),n._onlineComponents=e}),MP.apply(this,arguments)}function u2(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function PP(n){return kP.apply(this,arguments)}function kP(){return kP=(0,ae.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield PT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!u2(t))throw t;ba("Error using user provided cache. Falling back to memory cache: "+t),yield PT(n,new Ew)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield PT(n,new Ew);return n._offlineComponents}),kP.apply(this,arguments)}function kT(n){return OP.apply(this,arguments)}function OP(){return OP=(0,ae.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield SP(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield SP(n,new k_))),n._onlineComponents}),OP.apply(this,arguments)}function l2(n){return PP(n).then(e=>e.persistence)}function OT(n){return PP(n).then(e=>e.localStore)}function c2(n){return kT(n).then(e=>e.remoteStore)}function NP(n){return kT(n).then(e=>e.syncEngine)}function O_(n){return RP.apply(this,arguments)}function RP(){return RP=(0,ae.Z)(function*(n){const e=yield kT(n),t=e.eventManager;return t.onListen=M4.bind(null,e.syncEngine),t.onUnlisten=P4.bind(null,e.syncEngine),t}),RP.apply(this,arguments)}function h2(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(i,u,c,f,m){const v=new MT({next:A=>{u.enqueueAndForget(()=>JM(i,D));const L=A.docs.has(c);!L&&A.fromCache?m.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&A.fromCache&&f&&"server"===f.source?m.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),D=new tP(p_(c.path),v,{includeMetadataChanges:!0,Ku:!0});return YM(i,D)}(yield O_(n),n.asyncQueue,e,t,r)})),r.promise}function f2(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function(i,u,c,f,m){const v=new MT({next:A=>{u.enqueueAndForget(()=>JM(i,D)),A.fromCache&&"server"===f.source?m.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),D=new tP(c,v,{includeMetadataChanges:!0,Ku:!0});return YM(i,D)}(yield O_(n),n.asyncQueue,e,t,r)})),r.promise}function p2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const g2=new Map;function FP(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function m2(n,e,t,r){if(!0===e&&!0===r)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _2(n){if(!rt.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function y2(n){if(rt.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function NT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=NT(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function v2(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class w2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=p2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new o3;switch(t.type){case"firstParty":return new c3(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=g2.get(e);t&&(Be("ComponentProvider","Removing Datastore"),g2.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Ll extends ns{constructor(e,t,r){super(e,t,p_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new rt(e))}withConverter(e){return new Ll(this.firestore,e,this._path)}}function b2(n,e,...t){if(n=(0,Gt.m9)(n),FP("collection","path",e),n instanceof Iw){const r=In.fromString(e,...t);return y2(r),new Ll(n,null,r)}{if(!(n instanceof hr||n instanceof Ll))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return y2(r),new Ll(n.firestore,null,r)}}function RT(n,e,...t){if(n=(0,Gt.m9)(n),1===arguments.length&&(e=MR.A()),FP("doc","path",e),n instanceof Iw){const r=In.fromString(e,...t);return _2(r),new hr(n,null,new rt(r))}{if(!(n instanceof hr||n instanceof Ll))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(In.fromString(e,...t));return _2(r),new hr(n.firestore,n instanceof Ll?n.converter:null,new rt(r))}}function E2(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),(n instanceof hr||n instanceof Ll)&&(e instanceof hr||e instanceof Ll)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LP(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),n instanceof ns&&e instanceof ns&&n.firestore===e.firestore&&ew(n._query,e._query)&&n.converter===e.converter}class uj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new MM(this,"async_queue_retry"),this.Xc=()=>{const t=AT();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=AT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=AT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new yi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ae.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Nh(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Zr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=KM.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&ft()}verifyOperationInProgress(){}sa(){var e=this;return(0,ae.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function VP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class lj{constructor(){this._progressObserver={},this._taskCompletionResolver=new yi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends Iw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new uj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||I2(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||I2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function I2(n){var e,t,r;const i=n._freezeSettings(),u=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new B3(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,p2(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new J4(n._authCredentials,n._appCheckCredentials,n._queue,u),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function T2(n,e,t){const r=new yi;return n.asyncQueue.enqueue((0,ae.Z)(function*(){try{yield PT(n,t),yield SP(n,e),r.resolve()}catch(i){const u=i;if(!u2(u))throw u;ba("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function D2(n){if(n._initialized||n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vl(vi.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vl(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._methodName=e}}class FT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const wj=/^__.*__$/;class Cj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ld(e,this.data,this.fieldMask,t,this.fieldTransforms):new __(e,this.data,t,this.fieldTransforms)}}class A2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ld(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function x2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class LT{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new LT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return BT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(x2(this.ca)&&wj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class bj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ww(e)}ya(e,t,r,i=!1){return new LT({ca:e,methodName:t,ga:r,path:Ur.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yp(n){const e=n._freezeSettings(),t=ww(n._databaseId);return new bj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VT(n,e,t,r,i,u={}){const c=n.ya(u.merge||u.mergeFields?2:0,e,t,i);$P("Data must be an object, but it was:",c,r);const f=P2(r,c);let m,v;if(u.merge)m=new uo(c.fieldMask),v=c.fieldTransforms;else if(u.mergeFields){const D=[];for(const A of u.mergeFields){const L=Aw(e,A,t);if(!c.contains(L))throw new Re(ge.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);O2(D,L)||D.push(L)}m=new uo(D),v=c.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,v=c.fieldTransforms;return new Cj(new ts(f),m,v)}class Dw extends Kp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dw}}function S2(n,e,t){return new LT({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class UP extends Kp{_toFieldTransform(e){return new iw(e.path,new g_)}isEqual(e){return e instanceof UP}}class Ej extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=S2(this,e,!0),r=this.pa.map(u=>Qp(u,t)),i=new Bp(r);return new iw(e.path,i)}isEqual(e){return this===e}}class Ij extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=S2(this,e,!0),r=this.pa.map(u=>Qp(u,t)),i=new jp(r);return new iw(e.path,i)}isEqual(e){return this===e}}class Tj extends Kp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new m_(e.serializer,bF(e.serializer,this.Ia));return new iw(e.path,t)}isEqual(e){return this===e}}function BP(n,e,t,r){const i=n.ya(1,e,t);$P("Data must be an object, but it was:",i,r);const u=[],c=ts.empty();Rh(r,(m,v)=>{const D=UT(e,m,t);v=(0,Gt.m9)(v);const A=i.da(D);if(v instanceof Dw)u.push(D);else{const L=Qp(v,A);null!=L&&(u.push(D),c.set(D,L))}});const f=new uo(u);return new A2(c,f,i.fieldTransforms)}function jP(n,e,t,r,i,u){const c=n.ya(1,e,t),f=[Aw(e,r,t)],m=[i];if(u.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)f.push(Aw(e,u[L])),m.push(u[L+1]);const v=[],D=ts.empty();for(let L=f.length-1;L>=0;--L)if(!O2(v,f[L])){const j=f[L];let z=m[L];z=(0,Gt.m9)(z);const ee=c.da(j);if(z instanceof Dw)v.push(j);else{const oe=Qp(z,ee);null!=oe&&(v.push(j),D.set(j,oe))}}const A=new uo(v);return new A2(D,A,c.fieldTransforms)}function M2(n,e,t,r=!1){return Qp(t,n.ya(r?4:3,e))}function Qp(n,e){if(k2(n=(0,Gt.m9)(n)))return $P("Unsupported field value:",e,n),P2(n,e);if(n instanceof Kp)return function(t,r){if(!x2(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let f=Qp(c,r.wa(u));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bF(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Er.fromDate(t);return{timestampValue:v_(r.serializer,i)}}if(t instanceof Er){const i=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:v_(r.serializer,i)}}if(t instanceof FT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vl)return{bytesValue:HF(r.serializer,t._byteString)};if(t instanceof hr){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${NT(t)}`)}(n,e)}function P2(n,e){const t={};return qR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rh(n,(r,i)=>{const u=Qp(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function k2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Er||n instanceof FT||n instanceof Vl||n instanceof hr||n instanceof Kp)}function $P(n,e,t){if(!k2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=NT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Aw(n,e,t){if((e=(0,Gt.m9)(e))instanceof hd)return e._internalPath;if("string"==typeof e)return UT(n,e);throw BT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dj=new RegExp("[~\\*/\\[\\]]");function UT(n,e,t){if(e.search(Dj)>=0)throw BT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw BT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BT(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(u||c)&&(m+=" (found",u&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new Re(ge.INVALID_ARGUMENT,f+n+m)}function O2(n,e){return n.some(t=>t.isEqual(e))}class xw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Aj extends xw{data(){return super.data()}}function jT(n,e){return"string"==typeof e?UT(n,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function N2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HP{}class Sw extends HP{}function Wh(n,e,...t){let r=[];e instanceof HP&&r.push(e),r=r.concat(t),function(i){const u=i.filter(f=>f instanceof N_).length,c=i.filter(f=>f instanceof Mw).length;if(u>1||u>0&&c>0)throw new Re(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Mw extends Sw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Mw(e,t,r)}_apply(e){const t=this._parse(e);return V2(e._query,t),new ns(e.firestore,e.converter,W1(e._query,t))}_parse(e){const t=Yp(e.firestore);return function(i,u,c,f,m,v,D){let A;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){L2(D,v);const L=[];for(const j of D)L.push(F2(f,i,j));A={arrayValue:{values:L}}}else A=F2(f,i,D)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||L2(D,v),A=M2(c,"where",D,"in"===v||"not-in"===v);return vn.create(m,v,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class N_ extends HP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new N_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const c=i.getFlattenedFilters();for(const f of c)V2(u,f),u=W1(u,f)}(e._query,t),new ns(e.firestore,e.converter,W1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GP extends Sw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GP(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new h_(i,u);return function(f,m){if(null===z1(f)){const v=sT(f);null!==v&&U2(0,v,m.field)}}(r,c),c}(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new ad(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class $T extends Sw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new $T(e,t,r)}_apply(e){return new ns(e.firestore,e.converter,oT(e._query,this._limit,this._limitType))}}class HT extends Sw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new HT(e,t,r)}_apply(e){const t=R2(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(i=t,new ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class GT extends Sw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new GT(e,t,r)}_apply(e){const t=R2(e,this.type,this._docOrFields,this._inclusive);return new ns(e.firestore,e.converter,(i=t,new ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function R2(n,e,t,r){if(t[0]=(0,Gt.m9)(t[0]),t[0]instanceof xw)return function(i,u,c,f,m){if(!f)throw new Re(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const D of Up(i))if(D.field.isKeyField())v.push(Lp(u,f.key));else{const A=f.data.field(D.field);if(JI(A))throw new Re(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const L=D.field.canonicalString();throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}v.push(A)}return new jh(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Yp(n.firestore);return function(u,c,f,m,v,D){const A=u.explicitOrderBy;if(v.length>A.length)throw new Re(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let j=0;j<v.length;j++){const z=v[j];if(A[j].field.isKeyField()){if("string"!=typeof z)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof z}`);if(!Z1(u)&&-1!==z.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${z}' contains a slash.`);const ee=u.path.child(In.fromString(z));if(!rt.isDocumentKey(ee))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const oe=new rt(ee);L.push(Lp(c,oe))}else{const ee=M2(f,m,z);L.push(ee)}}return new jh(L,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function F2(n,e,t){if("string"==typeof(t=(0,Gt.m9)(t))){if(""===t)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z1(e)&&-1!==t.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(In.fromString(t));if(!rt.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lp(n,new rt(r))}if(t instanceof hr)return Lp(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${NT(t)}.`)}function L2(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function V2(n,e){if(e.isInequality()){const r=sT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=z1(n);null!==u&&U2(0,i,u)}const t=function(r,i){for(const u of r)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function U2(n,e,t){if(!t.isEqual(e))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qP{convertValue(e,t="none"){switch(Uh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(od(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rh(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new FT(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(K0(e));default:return null}}convertTimestamp(e){const t=Fh(e);return new Er(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=In.fromString(e);Tt(XF(r));const i=new Lh(r.get(1),r.get(3)),u=new rt(r.popFirst(5));return i.isEqual(t)||Zr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function qT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fj extends qP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class Jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fd extends xw{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Pw extends fd{data(e={}){return super.data(e)}}class Kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Pw(this._firestore,this._userDataWriter,r.key,r,new Jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Pw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Jp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new Pw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Jp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==c.type&&(m=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),v=u.indexOf(c.doc.key)),{type:Vj(c.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Vj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function j2(n,e){return n instanceof fd&&e instanceof fd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kh&&e instanceof Kh&&n._firestore===e._firestore&&LP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Yh extends qP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function $2(n,e,t){n=wn(n,hr);const r=wn(n.firestore,fr),i=qT(n.converter,e,t);return R_(r,[VT(Yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ir.none())])}function H2(n,e,t,...r){n=wn(n,hr);const i=wn(n.firestore,fr),u=Yp(i);let c;return c="string"==typeof(e=(0,Gt.m9)(e))||e instanceof hd?jP(u,"updateDoc",n._key,e,t,r):BP(u,"updateDoc",n._key,e),R_(i,[c.toMutation(n._key,Ir.exists(!0))])}function G2(n,...e){var t,r,i;n=(0,Gt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||VP(e[c])||(u=e[c],c++);const f={includeMetadataChanges:u.includeMetadataChanges};if(VP(e[c])){const A=e[c];e[c]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[c+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[c+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,v,D;if(n instanceof hr)v=wn(n.firestore,fr),D=p_(n._key.path),m={next:A=>{e[c]&&e[c](zP(v,n,A))},error:e[c+1],complete:e[c+2]};else{const A=wn(n,ns);v=wn(A.firestore,fr),D=A._query;const L=new Yh(v);m={next:j=>{e[c]&&e[c](new Kh(v,L,A,j))},error:e[c+1],complete:e[c+2]},N2(n._query)}return function(A,L,j,z){const ee=new MT(z),oe=new tP(L,ee,j);return A.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return YM(yield O_(A),oe)})),()=>{ee.Dc(),A.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return JM(yield O_(A),oe)}))}}(Kr(v),D,f,m)}function R_(n,e){return function(t,r){const i=new yi;return t.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function k4(n,e,t){return oP.apply(this,arguments)}(yield NP(t),r,i)})),i.promise}(Kr(n),e)}function zP(n,e,t){const r=t.docs.get(e._key),i=new Yh(n);return new fd(n,i,e._key,r,new Jp(t.hasPendingWrites,t.fromCache),e.converter)}const n$={maxAttempts:5};class q2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yp(e)}set(e,t,r){this._verifyNotCommitted();const i=Qh(e,this._firestore),u=qT(i.converter,t,r),c=VT(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Ir.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Qh(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof hd?jP(this._dataReader,"WriteBatch.update",u._key,t,r,i):BP(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qh(e,this._firestore);return this._mutations=this._mutations.concat(new y_(t._key,Ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qh(n,e){if((n=(0,Gt.m9)(n)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class r$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yp(e)}get(e){const t=Qh(e,this._firestore),r=new Fj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const u=i[0];if(u.isFoundDocument())return new xw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new xw(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Qh(e,this._firestore),u=qT(i.converter,t,r),c=VT(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Qh(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof hd?jP(this._dataReader,"Transaction.update",u._key,t,r,i):BP(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qh(e,this._firestore),r=new Yh(this._firestore);return super.get(e).then(i=>new fd(this._firestore,r,t._key,i._document,new Jp(!1,!1),t.converter))}}function ZP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Z2(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function W2(){if(!function V3(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){u_=Rs.SDK_VERSION,(0,Rs._registerComponent)(new td.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new fr(new u3(t.getProvider("auth-internal")),new d3(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lh(f.options.projectId,m)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Rs.registerVersion)(AR,"3.13.0",n),(0,Rs.registerVersion)(AR,"3.13.0","esm2017")}();class kw{constructor(e){this._delegate=e}static fromBase64String(e){return W2(),new kw(Vl.fromBase64String(e))}static fromUint8Array(e){return Z2(),new kw(Vl.fromUint8Array(e))}toBase64(){return W2(),this._delegate.toBase64()}toUint8Array(){return Z2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function WP(n){return function h$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class f${enableIndexedDbPersistence(e,t){return function dj(n,e){D2(n=wn(n,fr));const t=Kr(n);if(t._uninitializedComponentsProvider)throw new Re(ge.FAILED_PRECONDITION,"SDK cache is already specified.");ba("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new k_;return T2(t,i,new AP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function hj(n){D2(n=wn(n,fr));const e=Kr(n);if(e._uninitializedComponentsProvider)throw new Re(ge.FAILED_PRECONDITION,"SDK cache is already specified.");ba("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new k_;return T2(e,r,new o2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function fj(n){if(n._initialized&&!n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ae.Z)(function*(){try{yield(t=(0,ae.Z)(function*(r){if(!bu.D())return Promise.resolve();const i=r+"main";yield bu.delete(i)}),function(r){return t.apply(this,arguments)})(vM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class K2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ba("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function C2(n,e,t,r={}){var i;const u=(n=wn(n,Iw))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let f,m;if("string"==typeof r.mockUserToken)f=r.mockUserToken,m=Ri.MOCK_USER;else{f=(0,Gt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ri(v)}n._authCredentials=new a3(new xR(f,m))}}(this._delegate,e,t,r)}enableNetwork(){return function gj(n){return function X4(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield l2(n),t=yield c2(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i.vu.delete(0),Cw(i)}(t)}))}(Kr(n=wn(n,fr)))}(this._delegate)}disableNetwork(){return function mj(n){return function ej(n){return n.asyncQueue.enqueue((0,ae.Z)(function*(){const e=yield l2(n),t=yield c2(n);return e.setNetworkEnabled(!1),(r=(0,ae.Z)(function*(i){const u=st(i);u.vu.add(0),yield T_(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=wn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,m2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function pj(n){return function(e){const t=new yi;return e.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return function F4(n,e){return dP.apply(this,arguments)}(yield NP(e),t)})),t.promise}(Kr(n=wn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function Zj(n,e){return function rj(n,e){const t=new MT(e);return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r=yield O_(n),i=t,st(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return r=yield O_(n),i=t,void st(r).ku.delete(i);var r,i}))}}(Kr(n=wn(n,fr)),VP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new F_(this,b2(this._delegate,e))}catch(t){throw Bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,RT(this._delegate,e))}catch(t){throw Bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new js(this,function aj(n,e){if(n=wn(n,Iw),FP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ns(n,null,(t=e,new ad(In.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function i$(n,e,t){n=wn(n,fr);const r=Object.assign(Object.assign({},n$),t);return function(i){if(i.maxAttempts<1)throw new Re(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const f=new yi;return i.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){const m=yield function d2(n){return kT(n).then(e=>e.datastore)}(i);new Q4(i.asyncQueue,m,c,u,f).run()})),f.promise}(Kr(n),i=>e(new r$(n,i)),r)}(this._delegate,t=>e(new Y2(this,t)))}batch(){return Kr(this._delegate),new Q2(new q2(this._delegate,e=>R_(this._delegate,e)))}loadBundle(e){return function _j(n,e){const t=Kr(n=wn(n,fr)),r=new lj;return function ij(n,e,t,r){const i=function(u,c){let f;return f="string"==typeof u?RF().encode(u):u,m=function(m,v){if(m instanceof Uint8Array)return a2(m,v);if(m instanceof ArrayBuffer)return a2(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new K4(m,c);var m}(t,ww(e));n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){!function Z4(n,e,t){const r=st(n);var i;(i=(0,ae.Z)(function*(u,c,f){try{const m=yield c.getMetadata();if(yield function(L,j){const z=st(L),ee=Wr(j.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",oe=>z.qs.getBundleMetadata(oe,j.id)).then(oe=>!!oe&&oe.createTime.compareTo(ee)>=0)}(u.localStore,m))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=m).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(QL(m));const v=new D4(m,u.localStore,c.serializer);let D=yield c.bc();for(;D;){const L=yield v.zu(D);L&&f._updateProgress(L),D=yield c.bc()}const A=yield v.complete();return yield dd(u,A.Ju,void 0),yield function(L,j){const z=st(L);return z.persistence.runTransaction("Save bundle","readwrite",ee=>z.qs.saveBundleMetadata(ee,j))}(u.localStore,m),f._completeWith(A.progress),Promise.resolve(A.Hu)}catch(m){return ba("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var L}),function(u,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield NP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function yj(n,e){return function sj(n,e){return n.asyncQueue.enqueue((0,ae.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield OT(n),e)}))}(Kr(n=wn(n,fr)),e).then(t=>t?new ns(n,null,t.query):null)}(this._delegate,e).then(t=>t?new js(this,t):null)}}class zT extends qP{constructor(e){super(),this.firestore=e}convertBytes(e){return new kw(new Vl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class Y2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}get(e){const t=eg(e);return this._delegate.get(t).then(r=>new Ow(this._firestore,new fd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=eg(e);return r?(ZP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=eg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}}class Q2{constructor(e){this._delegate=e}set(e,t,r){const i=eg(e);return r?(ZP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=eg(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Pw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Nw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Xp(e,new zT(e),t),i.set(t,u)),u}}Xp.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new hr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new Ea(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new F_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new F_(this.firestore,b2(this._delegate,e))}catch(t){throw Bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Gt.m9)(e))instanceof hr&&E2(this._delegate,e)}set(e,t){t=ZP("DocumentReference.set",t);try{return t?$2(this._delegate,e,t):$2(this._delegate,e)}catch(r){throw Bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?H2(this._delegate,e):H2(this._delegate,e,t,...r)}catch(i){throw Bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qj(n){return R_(wn(n.firestore,fr),[new y_(n._key,Ir.none())])}(this._delegate)}onSnapshot(...e){const t=J2(e),r=X2(e,i=>new Ow(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return G2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Bj(n){n=wn(n,hr);const e=wn(n.firestore,fr),t=Kr(e),r=new Yh(e);return function tj(n,e){const t=new yi;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(i,u,c){try{const f=yield function(m,v){const D=st(m);return D.persistence.runTransaction("read document","readonly",A=>D.localDocuments.getDocument(A,v))}(i,u);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Re(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=x_(f,`Failed to get document '${u} from cache`);c.reject(m)}}),function(i,u,c){return r.apply(this,arguments)})(yield OT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new fd(e,r,n._key,i,new Jp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function jj(n){n=wn(n,hr);const e=wn(n.firestore,fr);return h2(Kr(e),n._key,{source:"server"}).then(t=>zP(e,n,t))}(this._delegate):function Uj(n){n=wn(n,hr);const e=wn(n.firestore,fr);return h2(Kr(e),n._key).then(t=>zP(e,n,t))}(this._delegate),t.then(r=>new Ow(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function Bs(n,e,t){return n.message=n.message.replace(e,t),n}function J2(n){for(const e of n)if("object"==typeof e&&!WP(e))return e;return{}}function X2(n,e){var t,r;let i;return i=WP(n[0])?n[0]:WP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Ow{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return j2(this._delegate,e._delegate)}}class Nw extends Ow{data(e){const t=this._delegate.data(e);return function s3(n,e){n||ft()}(void 0!==t),t}}class js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new zT(e)}where(e,t,r){try{return new js(this.firestore,Wh(this._delegate,function xj(n,e,t){const r=e,i=jT("where",n);return Mw._create(i,r,t)}(e,t,r)))}catch(i){throw Bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new js(this.firestore,Wh(this._delegate,function Sj(n,e="asc"){const t=e,r=jT("orderBy",n);return GP._create(r,t)}(e,t)))}catch(r){throw Bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new js(this.firestore,Wh(this._delegate,function Mj(n){return v2("limit",n),$T._create("limit",n,"F")}(e)))}catch(t){throw Bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new js(this.firestore,Wh(this._delegate,function Pj(n){return v2("limitToLast",n),$T._create("limitToLast",n,"L")}(e)))}catch(t){throw Bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new js(this.firestore,Wh(this._delegate,function kj(...n){return HT._create("startAt",n,!0)}(...e)))}catch(t){throw Bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new js(this.firestore,Wh(this._delegate,function Oj(...n){return HT._create("startAfter",n,!1)}(...e)))}catch(t){throw Bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new js(this.firestore,Wh(this._delegate,function Nj(...n){return GT._create("endBefore",n,!1)}(...e)))}catch(t){throw Bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new js(this.firestore,Wh(this._delegate,function Rj(...n){return GT._create("endAt",n,!0)}(...e)))}catch(t){throw Bs(t,"endAt()","Query.endAt()")}}isEqual(e){return LP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Hj(n){n=wn(n,ns);const e=wn(n.firestore,fr),t=Kr(e),r=new Yh(e);return function nj(n,e){const t=new yi;return n.asyncQueue.enqueueAndForget((0,ae.Z)(function*(){return(r=(0,ae.Z)(function*(i,u,c){try{const f=yield ET(i,u,!0),m=new e2(u,f.ir),v=m.sc(f.documents),D=m.applyChanges(v,!1);c.resolve(D.snapshot)}catch(f){const m=x_(f,`Failed to execute query '${u} against cache`);c.reject(m)}}),function(i,u,c){return r.apply(this,arguments)})(yield OT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Kh(e,r,n,i))}(this._delegate):"server"===e?.source?function Gj(n){n=wn(n,ns);const e=wn(n.firestore,fr),t=Kr(e),r=new Yh(e);return f2(t,n._query,{source:"server"}).then(i=>new Kh(e,r,n,i))}(this._delegate):function $j(n){n=wn(n,ns);const e=wn(n.firestore,fr),t=Kr(e),r=new Yh(e);return N2(n._query),f2(t,n._query).then(i=>new Kh(e,r,n,i))}(this._delegate),t.then(r=>new KP(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=J2(e),r=X2(e,i=>new KP(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return G2(this._delegate,t,r)}withConverter(e){return new js(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}class g${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Nw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Nw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new g$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Nw(this._firestore,r))})}isEqual(e){return j2(this._delegate,e._delegate)}}class F_ extends js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?RT(this._delegate):RT(this._delegate,e))}catch(t){throw Bs(t,"doc()","CollectionReference.doc()")}}add(e){return function zj(n,e){const t=wn(n.firestore,fr),r=RT(n),i=qT(n.converter,e);return R_(t,[VT(Yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return E2(this._delegate,e._delegate)}withConverter(e){return new F_(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function eg(n){return wn(n,hr)}class YP{constructor(...e){this._delegate=new hd(...e)}static documentId(){return new YP(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,Gt.m9)(e))instanceof hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function o$(){return new UP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tg(e)}static delete(){const e=function s$(){return new Dw("deleteField")}();return e._methodName="FieldValue.delete",new tg(e)}static arrayUnion(...e){const t=function a$(...n){return new Ej("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tg(t)}static arrayRemove(...e){const t=function u$(...n){return new Ij("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tg(t)}static increment(e){const t=function l$(n){return new Tj("increment",n)}(e);return t._methodName="FieldValue.increment",new tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const m$={Firestore:K2,GeoPoint:FT,Timestamp:Er,Blob:kw,Transaction:Y2,WriteBatch:Q2,DocumentReference:Ea,DocumentSnapshot:Ow,Query:js,QueryDocumentSnapshot:Nw,QuerySnapshot:KP,CollectionReference:F_,FieldPath:YP,FieldValue:tg,setLogLevel:function p$(n){!function i3(n){kh.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eV(n,e){return function v$(n,e=lN.z){return new xr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QP(n,e){return eV(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function ZT(n,e){return QP(n,e).pipe(Zf(void 0),GS(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const m=i.find(D=>D.doc.ref.isEqual(c.ref)),v=t?.payload.docs.find(D=>D.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),u}))}function tV(n,e,t){return ZT(n,t).pipe(ph((r,i)=>function C$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function b$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return JP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return JP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function KU(n,e=Hf.y){return n=n??YU,(0,ti.e)((t,r)=>{let i,u=!0;t.subscribe((0,Gn.x)(r,c=>{const f=e(c);(u||!n(i,f))&&(u=!1,i=f,r.next(c))}))})}(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function JP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function nV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function y$(n){(function _$(n,e){n.INTERNAL.registerComponent(new td.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},m$)))})(n,(e,t)=>new K2(e,t,new f$)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(cN.Z);class rV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ZT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Zf(void 0),GS(),no(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nV(e);return tV(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return QP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new iV(this.ref.doc(e),this.afs)}}class iV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=sV(r,t);return new rV(i,u,this.afs)}snapshotChanges(){return function w$(n,e){return eV(n,e).pipe(Zf(void 0),GS(),(0,ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(cn.iC)}}class E${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ZT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),no(t=>t.length>0),cn.iC):ZT(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nV(e);return tV(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return QP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),cn.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(cn.iC)}}const I$=new o.OlP("angularfire2.enableFirestorePersistence"),T$=new o.OlP("angularfire2.firestore.persistenceSettings"),D$=new o.OlP("angularfire2.firestore.settings"),A$=new o.OlP("angularfire2.firestore.use-emulator");function sV(n,e=(t=>t)){return{query:e(n),ref:n}}let ng=(()=>{class n{constructor(t,r,i,u,c,f,m,v,D,A,L,j,z,ee,oe,Ue,ze){this.schedulers=m;const je=(0,Yi.on)(t,f,r),Ye=D;A&&Xx(je,f,L,z,ee,oe,j,Ue),[this.firestore,this.persistenceEnabled$]=(0,Yi.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const Ft=f.runOutsideAngular(()=>je.firestore());if(u&&Ft.settings(u),Ye&&Ft.useEmulator(...Ye),i&&!$s(c)){const Bt=()=>{try{return(0,mn.D)(Ft.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Cn){return typeof console<"u"&&console.warn(Cn),Ct(!1)}};return[Ft,f.runOutsideAngular(Bt)]}return[Ft,Ct(!1)]},[u,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=sV(i,r),f=this.schedulers.ngZone.run(()=>u);return new rV(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new E$(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new iV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi.Dh),o.LFG(Yi.xv,8),o.LFG(I$,8),o.LFG(D$,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(cn.HU),o.LFG(T$,8),o.LFG(A$,8),o.LFG(ki,8),o.LFG(Zx,8),o.LFG(Wx,8),o.LFG(Kx,8),o.LFG(Yx,8),o.LFG(Qx,8),o.LFG(Jx,8),o.LFG(Dp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),x$=(()=>{class n{constructor(t){this.firestore=t}getImage(){return this.firestore.collection("galeriasi").snapshotChanges()}getImagesById(t){return this.firestore.collection("galeriasi").doc(t).valueChanges()}addImagenInfo(t){return this.firestore.collection("galeriasi").add(t)}updateImage(t,r){return this.firestore.collection("galeriasi").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ng))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rg=(()=>{class n{constructor(t){this.firestore=t}getUsers(){return this.firestore.collection("users").snapshotChanges()}getUserById(t){return this.firestore.collection("users").snapshotChanges()}addIUserInfo(t){return this.firestore.collection("users").add(t)}updateUser(t,r){return this.firestore.collection("users").doc(r).update(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ng))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class oV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new WT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new WT(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new WT(c,this,this._ref)):{next:t.next?c=>t.next(new WT(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class aV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new pd(e,this._service))}get items(){return this._delegate.items.map(e=>new pd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function NU(n,e){return JO(n,e)}(this._delegate,e);return new pd(t,this.storage)}get root(){return new pd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new pd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new oV(function SU(n,e,t){return function _U(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new WO(n,new ao(e),t)}(n=(0,Gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=wt.RAW,r){this._throwIfRoot("putString");const i=qn(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new oV(new WO(this._delegate,new ao(i.data,!0),u),this)}listAll(){return iN(this._delegate).then(e=>new aV(e,this.storage))}list(e){return function kU(n,e){return QO(n=(0,Gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new aV(t,this.storage))}getMetadata(){return function MU(n){return function wU(n){n._throwIfRoot("getMetadata");const e=$O(n.storage,n._location,w0());return n.storage.makeRequestWithTokens(e,vu)}(n=(0,Gt.m9)(n))}(this._delegate)}updateMetadata(e){return function PU(n,e){return function CU(n,e){n._throwIfRoot("updateMetadata");const t=function tU(n,e,t,r){const u=g(e.fullServerUrl(),n.host,n._protocol),f=LS(t,r),v=n.maxOperationRetryTime,D=new xl(u,"PATCH",yI(n,r),v);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=C0(e),D}(n.storage,n._location,e,w0());return n.storage.makeRequestWithTokens(t,vu)}(n=(0,Gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return sN(this._delegate)}delete(){return this._throwIfRoot("delete"),function OU(n){return function EU(n){n._throwIfRoot("deleteObject");const e=function nU(n,e){const r=g(e.fullServerUrl(),n.host,n._protocol),f=new xl(r,"DELETE",function c(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=C0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,vu)}(n=(0,Gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw FS(e)}}class uV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(lV(e))throw Ap("ref() expected a child path but got a URL, use refFromURL instead.");return new pd($S(this._delegate,e),this)}refFromURL(e){if(!lV(e))throw Ap("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Qi.makeFromUrl(e,this._delegate.host)}catch{throw Ap("refFromUrl() expected a valid full URL but got an invalid one.")}return new pd($S(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){oN(this._delegate,e,t,r)}}function lV(n){return/^[A-Za-z]+:\/\//.test(n)}function O$(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new uV(t,r)}function cV(n){const e=function R$(n){return new xr.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function S$(n,e=lN.z){return(0,ti.e)((t,r)=>{let i=null,u=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=u;u=null,r.next(v)}};function m(){const v=c+n,D=e.now();if(D<v)return i=this.schedule(void 0,v-D),void r.add(i);f()}t.subscribe((0,Gn.x)(r,v=>{u=v,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function KT(n){return{getDownloadURL:()=>Ct(void 0).pipe(cn.fc,Cr(()=>n.getDownloadURL()),cn.iC),getMetadata:()=>Ct(void 0).pipe(cn.fc,Cr(()=>n.getMetadata()),cn.iC),delete:()=>(0,mn.D)(n.delete()),child:e=>KT(n.child(e)),updateMetadata:e=>(0,mn.D)(n.updateMetadata(e)),put:(e,t)=>cV(n.put(e,t)),putString:(e,t,r)=>cV(n.putString(e,t,r)),list:e=>(0,mn.D)(n.list(e)),listAll:()=>(0,mn.D)(n.listAll())}}!function N$(n){const e={TaskState:Ls,TaskEvent:aU,StringFormat:wt,Storage:uV,Reference:pd};n.INTERNAL.registerComponent(new td.wA("storage-compat",O$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(cN.Z);const F$=new o.OlP("angularfire2.storageBucket"),L$=new o.OlP("angularfire2.storage.maxUploadRetryTime"),V$=new o.OlP("angularfire2.storage.maxOperationRetryTime"),U$=new o.OlP("angularfire2.storage.use-emulator");let XP=(()=>{class n{constructor(t,r,i,u,c,f,m,v,D,A){const L=(0,Yi.on)(t,c,r);this.storage=(0,Yi.cc)(`${L.name}.storage.${i}`,"AngularFireStorage",L.name,()=>{const j=c.runOutsideAngular(()=>L.storage(i||void 0)),z=D;return z&&j.useEmulator(...z),m&&j.setMaxUploadRetryTime(m),v&&j.setMaxOperationRetryTime(v),j},[m,v])}ref(t){return KT(this.storage.ref(t))}refFromURL(t){return KT(this.storage.refFromURL(t))}upload(t,r,i){return KT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Yi.Dh),o.LFG(Yi.xv,8),o.LFG(F$,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(cn.HU),o.LFG(L$,8),o.LFG(V$,8),o.LFG(U$,8),o.LFG(Dp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function B$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11)(1,"img",12),o.NdJ("mouseenter",function(){const u=o.CHM(t).index,c=o.oxw();return o.KtG(c.onMouseEnter(u))})("mouseleave",function(){const u=o.CHM(t).index,c=o.oxw();return o.KtG(c.onMouseLeave(u))})("click",function(){const u=o.CHM(t).index,c=o.oxw();return o.KtG(c.onPreviewImage(u))}),o.qZA(),o.TgZ(2,"div",13)(3,"div")(4,"i",14),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.abrirCom(u))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",15),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.likeImage(u))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(1),o.Q6J("src",t.url,o.LSH),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByImage.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountImage)}}function j$(n,e){if(1&n&&(o.TgZ(0,"span",22),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function $$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",23),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.onClosePreview())}),o._UZ(1,"i",24),o.qZA()}}function H$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.prev())}),o._UZ(1,"i",26),o.qZA()}}function G$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.next())}),o._UZ(1,"i",28),o.qZA()}}function q$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",29),o._UZ(1,"img",30),o.TgZ(2,"div",31)(3,"div")(4,"i",14),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.abrirCom(i.currentLightboxImage))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",15),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.likeImage(i.currentLightboxImage))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=o.oxw(2);o.xp6(1),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage.url,o.LSH),o.xp6(5),o.Oqu(t.currentLightboxImage.commentsVideo.length),o.xp6(2),o.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),o.xp6(2),o.Oqu(t.currentLightboxImage.likesCountImage)}}const z$=function(n){return{active:n}};function Z$(n,e){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,j$,2,2,"span",17),o.YNc(2,$$,2,0,"button",18),o.YNc(3,H$,2,0,"button",19),o.YNc(4,G$,2,0,"button",20),o.YNc(5,q$,11,7,"div",21),o.qZA()),2&n){const t=o.oxw();o.Q6J("ngClass",o.VKq(6,z$,t.previewImage)),o.xp6(1),o.Q6J("ngIf",t.showCount),o.xp6(1),o.Q6J("ngIf",t.previewImage),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.previewImage)}}function W$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",44),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function K$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",45)(1,"div",46)(2,"img",47),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.ir(u.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",48)(6,"p",49),o._uU(7),o.qZA(),o.TgZ(8,"div",50)(9,"div")(10,"i",15),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.likeComment(u))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",51),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.abrirEditar(u))}),o.qZA(),o.TgZ(14,"i",52),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.deleteModal(u))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function Y$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",32)(1,"div",33),o.YNc(2,W$,1,0,"span",34),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",35)(6,"div",36),o.YNc(7,K$,15,6,"div",37),o.qZA()(),o.TgZ(8,"div",38)(9,"form",39,40),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",41),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",42),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",43),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function Q$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",53)(1,"div",54)(2,"div",55)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",56)(6,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function J$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",58)(1,"div",54)(2,"div",55)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",59),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",60)(7,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}let X$=(()=>{class n{constructor(t,r,i,u,c,f,m,v){this.storage=t,this.el=r,this.afAuth=i,this._image=u,this.toastr=c,this.router=f,this._user=m,this.storagex=v,this.images=[],this.showCount=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.images[0],this.currentIndex=0,this.controls=!0,this.totalImageCount=0,this.reset=0,this.adm=!1,this.esInvitado=!1,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[]}ngOnInit(){this.getImages(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getImages(){this._image.getImage().subscribe(t=>{this.images=[],t.forEach(r=>{const i=r.payload.doc.data();this.images.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeImage(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const u=i.uid,c=i.displayName,f=i.email,m=t.likedByImage.indexOf(u);-1!==m?(t.likedByImage.splice(m,1),t.userImageLikes.splice(m,1),t.likesCountImage--):(t.likedByImage.push(u),t.likesCountImage++,t.userImageLikes.push({usuario:c,correo:f}));const v=t.id,D={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._image.updateImage(v,D)}else r.modal=!0})()}subirArchivo(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const u=new Image,c=new FileReader;c.onload=f=>{u.onload=()=>{const m=document.createElement("canvas");let A=u.width,L=u.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),m.width=A,m.height=L;const j=m.getContext("2d");j?(j.drawImage(u,0,0,A,L),m.toBlob(z=>{if(z){const ee=`images/${i.name}`,oe=this.storagex.ref(ee);this.storagex.upload(ee,z,{contentType:z.type}).snapshotChanges().pipe(Hc(()=>{oe.getDownloadURL().subscribe(ze=>{this._image.addImagenInfo({url:ze}).then(()=>{console.log("actualizando"),this.toastr.info("Actualizando lista de Imagenes")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},u.src=f.target.result},c.readAsDataURL(i)}}),t.click()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.images[t],this.totalImageCount=this.images.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.images.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.images[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.currentLightboxImage=this.images[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const u=r.dataVideoId,c=r.dataVideoId.id;u.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const A={commentsVideo:u.commentsVideo};yield r._image.updateImage(c,A),r.comentario=""}})()}abrirCom(t){var r=this;return(0,ae.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(u=>{console.error("Error al eliminar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const u=i.uid,c=t.likedByComment.indexOf(u);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(u),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._image.updateImage(f,v)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}ir(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(e_),o.Y36(o.SBq),o.Y36(ki),o.Y36(x$),o.Y36(ps),o.Y36(fn),o.Y36(rg),o.Y36(XP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-galeria"]],decls:15,vars:5,consts:[[1,"contenedor"],[1,"box"],[1,"con-input"],[3,"click"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[2,"display","inline-flex","gap","4rem"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.TgZ(3,"div",2)(4,"p",3),o.NdJ("click",function(){return r.subirArchivo()}),o._uU(5,"+ Agregar imagen"),o.qZA()(),o.TgZ(6,"div",4)(7,"div",5),o.YNc(8,B$,11,5,"div",6),o.qZA(),o.YNc(9,Z$,6,8,"div",7),o.qZA()()(),o._UZ(10,"div"),o.YNc(11,Y$,18,4,"div",8),o.TgZ(12,"div"),o.YNc(13,Q$,10,0,"div",9),o.qZA(),o.YNc(14,J$,11,1,"div",10)),2&t&&(o.xp6(8),o.Q6J("ngForOf",r.images),o.xp6(1),o.Q6J("ngIf",r.showMask),o.xp6(2),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar))},dependencies:[an,ji,_n,Ms,zi,Ai,wr,xi,da,Do,Gm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:0}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:30px;margin-top:56px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.con-input[_ngcontent-%COMP%]{padding:15px 0 20px}.file-label[_ngcontent-%COMP%]{padding:4px;font-size:14px}}@media (max-width: 500px){.caja[_ngcontent-%COMP%]{font-size:12px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:1}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:20%}}"]}),n})(),dV=(()=>{class n{constructor(t){this.firestore=t}getVideos(){return this.firestore.collection("videos").snapshotChanges()}getVideoById(t){return this.firestore.collection("videos").doc(t).valueChanges()}updateVideo(t,r){return this.firestore.collection("videos").doc(t).update(r)}addImagenInfo(t){return this.firestore.collection("videos").add(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ng))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eH(n,e){1&n&&(o.TgZ(0,"div",10)(1,"div",11),o._UZ(2,"button",12),o.TgZ(3,"label",13),o._UZ(4,"i",14),o._uU(5," Agregar nuevo video "),o.qZA()()())}function tH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",15)(1,"video",16),o._UZ(2,"source",17),o.qZA(),o.TgZ(3,"div",18)(4,"div",19)(5,"p",20),o._uU(6),o.qZA()(),o.TgZ(7,"div",21)(8,"div",22)(9,"i",23),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.abrirCom(u))}),o.qZA(),o.TgZ(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",24)(13,"i",25),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.likeVideo(u))}),o.qZA(),o.TgZ(14,"span"),o._uU(15),o.qZA()()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(2),o.Q6J("src",t.url,o.LSH),o.xp6(4),o.hij(" ",t.nombre," "),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByVideo.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountVideo)}}function nH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",26)(1,"div",27)(2,"span",28),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",29)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",30),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",31),o._uU(10,"Registrate"),o.qZA()()()()()}}function rH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",44),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function iH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",45)(1,"div",46)(2,"img",47),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.ir(u.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",48)(6,"p",49),o._uU(7),o.qZA(),o.TgZ(8,"div",50)(9,"div")(10,"i",25),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.likeComment(u))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",51),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.abrirEditar(u))}),o.qZA(),o.TgZ(14,"i",52),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.deleteModal(u))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function sH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",32)(1,"div",33),o.YNc(2,rH,1,0,"span",34),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",35)(6,"div",36),o.YNc(7,iH,15,6,"div",37),o.qZA()(),o.TgZ(8,"div",38)(9,"form",39,40),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",41),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",42),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",43),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function oH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",53)(1,"div",27)(2,"div",29)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",54)(6,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function aH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",56)(1,"div",27)(2,"div",29)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",57),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",58)(7,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}let uH=(()=>{class n{constructor(t,r,i,u,c,f){this.storage=t,this.afAuth=r,this._videosService=i,this.afs=u,this._users=c,this.router=f,this.videos=[],this.esInvitado=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.ocultarx=!0,this.adm=!1}ngOnInit(){this.getVideos(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getVideos(){this._videosService.getVideos().subscribe(t=>{this.videos=[],t.forEach(r=>{const i=r.payload.doc.data();this.videos.push({id:r.payload.doc.id,...i,likesCountVideo:i.likesCountVideo||0,likedByVideo:i.likedByVideo||[],userVideoLikes:i.userVideoLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeVideo(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const u=i.uid,c=i.displayName,f=i.email,m=t.likedByVideo.indexOf(u);-1!==m?(t.likedByVideo.splice(m,1),t.userVideoLikes.splice(m,1),t.likesCountVideo--):(t.likedByVideo.push(u),t.likesCountVideo++,t.userVideoLikes.push({usuario:c,correo:f}));const v=t.id,D={likesCountVideo:t.likesCountVideo,likedByVideo:t.likedByVideo,userVideoLikes:t.userVideoLikes};yield r._videosService.updateVideo(v,D)}else r.modal=!0})()}addComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const u=r.dataVideoId,c=r.dataVideoId.id;u.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const A={commentsVideo:u.commentsVideo};yield r._videosService.updateVideo(c,A),r.comentario=""}})()}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}abrirCom(t){var r=this;return(0,ae.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}deleteModal(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(u=>{console.error("Error al eliminar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}abrirEditar(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const u=i.uid,c=t.likedByComment.indexOf(u);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(u),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._videosService.updateVideo(f,v),console.log(v)}}else r.modal=!0})()}ir(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(e_),o.Y36(ki),o.Y36(dV),o.Y36(ng),o.Y36(rg),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-videos"]],decls:13,vars:6,consts:[[1,"contenedor"],[1,"box"],["class","con-input",4,"ngIf"],[1,"video-container"],[1,"video"],["width","320","height","240","class","gallery-video",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"con-input"],[1,"input-file-container"],["routerLink","/nuevo-video","id","file-input"],["for","file-input",1,"file-label"],[1,"fas","fa-plus"],["width","320","height","240",1,"gallery-video"],["controls",""],["type","video/mp4",3,"src"],[1,"section"],[1,"title"],[2,"margin","0"],[1,"bocadillos"],[1,"comment"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"likes"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"],[1,"modalcom"],[1,"modal-com"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.YNc(3,eH,6,0,"div",2),o.TgZ(4,"div",3)(5,"div",4),o.YNc(6,tH,16,6,"div",5),o.qZA()()()(),o.TgZ(7,"div"),o.YNc(8,nH,11,0,"div",6),o.qZA(),o.YNc(9,sH,18,4,"div",7),o.TgZ(10,"div"),o.YNc(11,oH,10,0,"div",8),o.qZA(),o.YNc(12,aH,11,1,"div",9)),2&t&&(o.xp6(3),o.Q6J("ngIf",r.adm),o.xp6(3),o.Q6J("ngForOf",r.videos),o.xp6(2),o.Q6J("ngIf",r.modal),o.xp6(1),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar))},dependencies:[ji,_n,_u,Cl,Ms,zi,Ai,wr,xi,da,Do,Gm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}.bocadillos[_ngcontent-%COMP%]{display:flex;gap:1rem}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.video-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;padding:25px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);column-gap:30px;row-gap:30px}.gallery-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:.35rem;margin-bottom:17px;box-shadow:0 1px 5px #00000036}@media (max-width: 900px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 580px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]}),n})();function lH(n,e){if(1&n&&(o.TgZ(0,"div",4)(1,"p",5),o._uU(2),o.qZA(),o.TgZ(3,"audio",6),o._UZ(4,"source",7),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t.title),o.xp6(2),o.Q6J("src",t.url,o.LSH)}}let cH=(()=>{class n{constructor(t){this.storage=t,this.musica=[],this.titulos=["Aguanile","Arrepientete","Asi soy yo","Bam bam bidi bim bam bam","Batman y el hombre Ara\xf1a","Caderona","Con la punta del pie","Donde estabas tu","Welcome to party","La negra tiene tumbao","Llora Corazon","Payaso","Cancion 13","Lupita","Paloma","Yo soy el rey","Cancion 17","Sangre son colora","Sangre son colora (editado)","boogalo 1","Cancion 21","Cancion 22","Cancion 23","Todo tiene su final (editado)","Cancion 25","Cancion 26","Cancion 27","Omele","Boogalo 2","Aguazate","Aqui no ha pasado nada","Saraguey santoja","Arranca en fa","Arroyando","Asi soy yo (edit)","Askarakatiski","Ballandel","Bam bam (edit)","Bomba caranbomba","Boogalo 3","Boogalo 4","Boogalo 5","Boogalo 6","Cancion 45","Boogalo 7","Boogalo 8","Boogalo 9","Boogalo 10","Boogalo 11","Boogalo 12","Boogalo 13","Cancion 53","Cachondea","Cancion 54","Camina como chencha","Cancion 56","Carmen","Cancion 57","Cancion 58","Cancion 59","Cancion 60","Cancion 61","Ran kan kan","Echo chi echo no","El malo","Cancion 65","Federico boogalo","Fuego pal 23","Hagan silencio","Indestructible","Lancion 70","cancion 71","La bamba","Cancion 73","La luz del cielo","La pelota","Cancion 76","Mambo rock","Merecumbe","Boogalo 14","Boogalo 15","Mondongo","Oh mayi","Pal 23","Cancion 85","Pruebalo","Quimbara (edit)","Quimbara","Cancion 89","Cancion 90","Cancion 91","Cancion 92","Cancion 93","Fuma el barco","Sonido bestial","Cancion 96","Cancion 97","Cancion 98","Cancion 99","El yoyo","Tremendo rumbon","Tres pata","Tres pata v2","Cancion 104","Cancion 105"]}ngOnInit(){this.getMusica()}subirArchivo(t){const r=t.target.files[0],i=uN(this.storage,`videos/${r.name}`);WU(i,r).then(()=>{this.getMusica()}).catch(u=>console.log(u))}getMusica(){var t=this;return(0,ae.Z)(function*(){const r=uN(t.storage,"musica");try{const i=yield ZU(r);t.musica=yield Promise.all(i.items.map(function(){var u=(0,ae.Z)(function*(c,f){const m=yield qU(c);return{title:t.titulos[f]||`Canci\xf3n ${f+1}`,url:m}});return function(c,f){return u.apply(this,arguments)}}()))}catch(i){console.log(i)}})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(e_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-musica"]],decls:5,vars:1,consts:[[1,"contenedor"],[1,"box"],[1,"musica-container"],["class","musica",4,"ngFor","ngForOf"],[1,"musica"],[2,"margin-bottom","10px"],["controls",""],["type","audio/mp3",3,"src"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.TgZ(3,"div",2),o.YNc(4,lH,5,2,"div",3),o.qZA()()()),2&t&&(o.xp6(4),o.Q6J("ngForOf",r.musica))},dependencies:[ji,Gm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.musica-container[_ngcontent-%COMP%]{margin-top:25px;display:flex;flex-wrap:wrap;justify-content:space-around}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),hV=(()=>{class n{constructor(t){this.toastr=t}mensaje(t){return"auth/invalid-email"===t?"Por favor, introduce un correo electr\xf3nico v\xe1lido.":""}errorFirebase(t){switch(t){case"auth/user-not-found":case"auth/wrong-password":this.toastr.error("Usuario/Contrase\xf1a invalida","Error");break;case"auth/invalid-email":this.toastr.error("No hay correo valido o llena todos los campos","Error");break;case"auth/invalid-login-credentials":this.toastr.error("El correo o contrase\xf1a no son correctos","Error");break;case"auth/missing-password":this.toastr.error("Digita la contrase\xf1a","Error");break;case"auth/email-already-in-use":this.toastr.error("Usuario ya registrado","Error");break;case"auth/weak-password":this.toastr.error("Contrase\xf1a Debil","Error");break;case"auth/internal-error":this.toastr.error("Correo no valido","Error")}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ps))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ek=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-spinner"]],decls:3,vars:0,consts:[["role","status",1,"spinner"],[1,"visually-hidden"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"span",1),o._uU(2,"Loading..."),o.qZA()())},styles:['@charset "UTF-8";.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}']}),n})();function dH(n,e){1&n&&(o.TgZ(0,"span",19),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es requerido"),o.qZA())}function hH(n,e){1&n&&(o.TgZ(0,"span",19),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es invalido"),o.qZA())}function fH(n,e){1&n&&(o.TgZ(0,"span",19),o._uU(1,"La "),o.TgZ(2,"strong"),o._uU(3,"contrase\xf1a "),o.qZA(),o._uU(4,"debe contener mas de 6 caracteres"),o.qZA())}function pH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",3)(1,"form",4),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.login())}),o.TgZ(2,"div")(3,"h2",5),o._uU(4,"Asi Somos"),o.qZA()(),o.TgZ(5,"h2",6),o._uU(6,"Iniciar sesi\xf3n"),o.qZA(),o.TgZ(7,"div",7)(8,"label",8),o._uU(9,"Correo electr\xf3nico"),o.qZA(),o._UZ(10,"input",9),o.YNc(11,dH,5,0,"span",10),o.YNc(12,hH,5,0,"span",10),o.qZA(),o.TgZ(13,"div",7)(14,"label",11),o._uU(15,"Contrase\xf1a"),o.qZA(),o._UZ(16,"input",12),o.YNc(17,fH,5,0,"span",10),o.qZA(),o.TgZ(18,"div",13)(19,"a",14),o._uU(20,"\xbfOlvidaste tu contrase\xf1a?"),o.qZA(),o.TgZ(21,"a",15),o._uU(22,"Registrarse"),o.qZA()(),o.TgZ(23,"button",16),o._uU(24,"Iniciar sesi\xf3n"),o.qZA(),o.TgZ(25,"div",17)(26,"a",18),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.loginAsGuest())}),o._uU(27,"Iniciar sesi\xf3n como invitado"),o.qZA()()()()}if(2&n){const t=o.oxw();let r,i,u;o.xp6(1),o.Q6J("formGroup",t.loginUsuario),o.xp6(10),o.Q6J("ngIf",(null==(r=t.loginUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.loginUsuario.get("email"))?null:r.touched)),o.xp6(1),o.Q6J("ngIf",(null==(i=t.loginUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.loginUsuario.get("email"))?null:i.touched)),o.xp6(5),o.Q6J("ngIf",(null==(u=t.loginUsuario.get("password"))?null:u.hasError("required"))&&(null==(u=t.loginUsuario.get("password"))?null:u.touched))}}function gH(n,e){1&n&&(o.TgZ(0,"div",20)(1,"h2",21),o._uU(2,"Asi Somos"),o.qZA(),o.TgZ(3,"span",22),o._uU(4,"Iniciando sesion..."),o.qZA(),o._UZ(5,"app-spinner"),o.qZA())}let mH=(()=>{class n{constructor(t,r,i,u,c){this.toastr=t,this.fb=r,this.firebaseError=i,this.afAuth=u,this.router=c,this.loading=!1,this.verificar=!1,this.message="",this.loginUsuario=this.fb.group({email:["",[Or.required,Or.email]],password:["",Or.required]})}ngOnInit(){}login(){const t=this.loginUsuario.value.email,r=this.loginUsuario.value.password;this.loading=!0,this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.router.navigate(["/perfil"]),this.loading=!1}).catch(i=>{this.loading=!1,this.verificar=!0,this.firebaseError.errorFirebase(i.code),this.message=this.firebaseError.mensaje(i.code),setTimeout(()=>{this.message=""},2e3)})}loginAsGuest(){this.loading=!0,this.afAuth.signInWithEmailAndPassword("soyinvitado@gmail.com","123456").then(()=>{this.loading=!1,this.router.navigate(["/perfil"])}).catch(i=>{this.loading=!1,console.error("Error al iniciar sesi\xf3n con invitado:",i)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ps),o.Y36(xf),o.Y36(hV),o.Y36(ki),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login-form"]],decls:3,vars:2,consts:[[2,"display","flex","justify-content","center","height","100vh","background-color","white","user-select","none"],["class","container-login",4,"ngIf"],["style","\n      display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;\n    ",4,"ngIf"],[1,"container-login"],[1,"form-contenedor",3,"formGroup","ngSubmit"],[1,"elH2",2,"user-select","none"],[1,"form-title",2,"user-select","none"],[1,"form-group"],["for","email",2,"user-select","none"],["type","email","name","email","placeholder","correo electronico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],["for","password",2,"user-select","none"],["type","password","id","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],[1,"form-group","form-links"],["routerLink","/recuperar",1,"forgot-password",2,"user-select","none"],["routerLink","/registrar",1,"register-link",2,"user-select","none"],["type","submit",1,"submit-button"],[2,"text-align","center","margin-top","14px"],[1,"register-link",2,"user-select","none","cursor","pointer",3,"click"],[1,"text-danger","errorLabel"],[2,"display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[1,"elH2"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,pH,28,4,"div",1),o.YNc(2,gH,6,0,"div",2),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",!r.loading),o.xp6(1),o.Q6J("ngIf",r.loading))},dependencies:[_n,Cl,Ms,zi,Ai,wr,cl,nh,ek],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px;-webkit-user-select:none;user-select:none}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#0040ff;color:#fffefe}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}.container-login[_ngcontent-%COMP%]{margin-top:8%;width:30%}.logo[_ngcontent-%COMP%]{position:absolute}@media screen and (max-width: 600px){.container-login[_ngcontent-%COMP%]{margin-top:19%;width:87%}.logo[_ngcontent-%COMP%]{display:none}}"]}),n})();function _H(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"nombre de usuario"),o.qZA(),o._uU(4," es requerido"),o.qZA())}function yH(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es requerido"),o.qZA())}function vH(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es inv\xe1lido"),o.qZA())}function wH(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"La "),o.TgZ(2,"strong"),o._uU(3,"contrase\xf1a "),o.qZA(),o._uU(4,"debe contener m\xe1s de 6 caracteres"),o.qZA())}function CH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",2)(1,"form",3,4),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.registrar())}),o.TgZ(3,"h2",5),o._uU(4,"Asi Somos"),o.qZA(),o.TgZ(5,"h2",6),o._uU(6,"REGISTRARSE"),o.qZA(),o.TgZ(7,"div",7)(8,"label",8),o._uU(9,"Nombre de Usuario"),o.qZA(),o._UZ(10,"input",9),o.YNc(11,_H,5,0,"span",10),o.qZA(),o.TgZ(12,"div",7)(13,"label",11),o._uU(14,"Correo electr\xf3nico"),o.qZA(),o._UZ(15,"input",12),o.YNc(16,yH,5,0,"span",10),o.YNc(17,vH,5,0,"span",10),o.qZA(),o.TgZ(18,"div",7)(19,"label",13),o._uU(20,"Contrase\xf1a"),o.qZA(),o._UZ(21,"input",14),o.YNc(22,wH,5,0,"span",10),o.qZA(),o.TgZ(23,"div",7)(24,"label",15),o._uU(25,"Repetir Contrase\xf1a"),o.qZA(),o._UZ(26,"input",16),o.qZA(),o.TgZ(27,"div",17)(28,"button",18),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.goBack())}),o._uU(29," Volver "),o.qZA(),o.TgZ(30,"button",19),o._uU(31,"Registrar"),o.qZA()()()()}if(2&n){const t=o.oxw();let r,i,u,c;o.xp6(1),o.Q6J("formGroup",t.registrarUsuario),o.xp6(10),o.Q6J("ngIf",(null==(r=t.registrarUsuario.get("username"))?null:r.hasError("required"))&&(null==(r=t.registrarUsuario.get("username"))?null:r.touched)),o.xp6(5),o.Q6J("ngIf",(null==(i=t.registrarUsuario.get("email"))?null:i.hasError("required"))&&(null==(i=t.registrarUsuario.get("email"))?null:i.touched)),o.xp6(1),o.Q6J("ngIf",(null==(u=t.registrarUsuario.get("email"))?null:u.hasError("email"))&&(null==(u=t.registrarUsuario.get("email"))?null:u.touched)),o.xp6(5),o.Q6J("ngIf",(null==(c=t.registrarUsuario.get("password"))?null:c.hasError("required"))&&(null==(c=t.registrarUsuario.get("password"))?null:c.touched)),o.xp6(8),o.Q6J("disabled",t.registrarUsuario.invalid)}}function bH(n,e){1&n&&(o.TgZ(0,"div",21)(1,"h2",5),o._uU(2,"Asi Somos"),o.qZA(),o.TgZ(3,"span",22),o._uU(4,"Registrando..."),o.qZA(),o._UZ(5,"app-spinner"),o.qZA())}let EH=(()=>{class n{constructor(t,r,i,u,c,f){this.fb=t,this.afAuth=r,this.router=i,this.firebaseError=u,this.toastr=c,this.location=f,this.loading=!1,this.registrarUsuario=this.fb.group({username:["",Or.required],email:["",[Or.required,Or.email]],password:["",[Or.required,Or.minLength(6)]],repetirPassword:["",Or.required]})}ngOnInit(){}registrar(){const t=this.registrarUsuario.value.username,r=this.registrarUsuario.value.email,i=this.registrarUsuario.value.password;i===this.registrarUsuario.value.repetirPassword?(this.loading=!0,this.afAuth.createUserWithEmailAndPassword(r,i).then(c=>c.user?.updateProfile({displayName:t})).then(c=>{this.router.navigate(["/login"]),this.toastr.success("El usuario fue registrado con exito!!","Usuario Registrado")}).catch(c=>{this.loading=!1,console.log(c),this.firebaseError.errorFirebase(c.code)})):this.toastr.error("Las contrase\xf1as no coinciden","Error")}goBack(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(xf),o.Y36(ki),o.Y36(fn),o.Y36(hV),o.Y36(ps),o.Y36(xe))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-registrar-usuario"]],decls:2,vars:2,consts:[["class","content",4,"ngIf"],["style"," background-color: white; display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;",4,"ngIf"],[1,"content"],[1,"login-form",3,"formGroup","ngSubmit"],["loginForm","ngForm"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["for","username"],["type","text","name","username","placeholder","Nombre de Usuario","formControlName","username"],["class","text-danger errorLabel",4,"ngIf"],["for","email"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["for","password"],["type","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],["for","repetirPassword"],["type","password","name","password","placeholder","Repetir contrase\xf1a","formControlName","repetirPassword"],[2,"display","flex","gap","2px"],["type","button",1,"submit",2,"background-color","blue",3,"click"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"background-color","white","display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(o.YNc(0,CH,32,6,"div",0),o.YNc(1,bH,6,0,"div",1)),2&t&&(o.Q6J("ngIf",!r.loading),o.xp6(1),o.Q6J("ngIf",r.loading))},dependencies:[_n,Ms,zi,Ai,wr,cl,nh,ek],styles:[".login-form[_ngcontent-%COMP%]{margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a;height:94vh}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#e44d42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})();function IH(n,e){1&n&&(o.TgZ(0,"span",12),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es requerido"),o.qZA())}function TH(n,e){1&n&&(o.TgZ(0,"span",12),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es invalido"),o.qZA())}function DH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",2)(1,"form",3),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.recuperar())}),o.TgZ(2,"h2",4),o._uU(3,"Asi Somos"),o.qZA(),o.TgZ(4,"h2",5),o._uU(5,"RECUPERAR CUENTA"),o.qZA(),o.TgZ(6,"div",6),o._UZ(7,"input",7),o.YNc(8,IH,5,0,"span",8),o.YNc(9,TH,5,0,"span",8),o.qZA(),o.TgZ(10,"div",9)(11,"button",10),o._uU(12," Volver "),o.qZA(),o.TgZ(13,"button",11),o._uU(14,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();let r,i;o.xp6(1),o.Q6J("formGroup",t.recuperarUsuario),o.xp6(7),o.Q6J("ngIf",(null==(r=t.recuperarUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.recuperarUsuario.get("email"))?null:r.touched)),o.xp6(1),o.Q6J("ngIf",(null==(i=t.recuperarUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.recuperarUsuario.get("email"))?null:i.touched)),o.xp6(4),o.Q6J("disabled",t.recuperarUsuario.invalid)}}function AH(n,e){1&n&&(o.TgZ(0,"div",13)(1,"h2",4),o._uU(2,"Asi Somos"),o.qZA(),o.TgZ(3,"span",14),o._uU(4,"Registrando..."),o.qZA(),o._UZ(5,"app-spinner"),o.qZA())}let xH=(()=>{class n{constructor(t,r,i,u){this.fb=t,this.afAuth=r,this.router=i,this.toastr=u,this.loading=!1,this.recuperarUsuario=this.fb.group({email:["",[Or.required,Or.email]]})}ngOnInit(){}recuperar(){const t=this.recuperarUsuario.value.email;this.loading=!0,this.afAuth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/login"]),this.toastr.info("Revisa tu correo para restablecer tu contrase\xf1a","Peticion Aceptada")}).catch(r=>{this.loading=!1,this.firebaseError(r.code)})}firebaseError(t){switch(t){case"auth/user-not-found":this.toastr.error("Este correo no es valido","Error");break;case"auth/missing-email":this.toastr.error("Inserta un correo","Error")}}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(xf),o.Y36(ki),o.Y36(fn),o.Y36(ps))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-recuperar-contrasena"]],decls:3,vars:2,consts:[["style","margin-top: 8%",4,"ngIf"],["style","display: flex;background-color: white;\n    height: 90vh;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;",4,"ngIf"],[2,"margin-top","8%"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],[2,"display","flex","gap","2px"],["type","button","routerLink","/login",1,"submit",2,"background-color","blue"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"display","flex","background-color","white","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(o.TgZ(0,"div"),o.YNc(1,DH,15,4,"div",0),o.YNc(2,AH,6,0,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",!r.loading),o.xp6(1),o.Q6J("ngIf",r.loading))},dependencies:[_n,_u,Ms,zi,Ai,wr,cl,nh,ek],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})(),SH=(()=>{class n{constructor(t){this.afAuth=t}isLoggedIn(){return this.afAuth.authState.pipe((0,ht.U)(t=>!!t))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ki))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Eu=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn().pipe((0,ht.U)(i=>!!i||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(SH),o.LFG(fn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MH=(()=>{class n{constructor(t,r,i){this._videosService=t,this.router=r,this.toastr=i,this.subir={nombre:"",url:""}}ngOnInit(){}subirVideo(){console.log(this.subir),this._videosService.addImagenInfo(this.subir).then(()=>{this.router.navigate(["/videos"]),this.toastr.success("Agregando nuevo video")})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(dV),o.Y36(fn),o.Y36(ps))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-form-video"]],decls:17,vars:2,consts:[[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["name","nombre","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["name","url","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["type","submit"],["routerLink","/videos",2,"background-color","green"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"form",2),o.NdJ("ngSubmit",function(){return r.subirVideo()}),o.TgZ(3,"div",3)(4,"label"),o._uU(5,"Nombre"),o.qZA(),o.TgZ(6,"input",4),o.NdJ("ngModelChange",function(u){return r.subir.nombre=u}),o.qZA()(),o.TgZ(7,"div",3)(8,"label"),o._uU(9,"Url"),o.qZA(),o.TgZ(10,"input",5),o.NdJ("ngModelChange",function(u){return r.subir.url=u}),o.qZA()(),o.TgZ(11,"div",3)(12,"button",6),o._uU(13,"Agregar Video"),o.qZA()(),o.TgZ(14,"div",3)(15,"button",7),o._uU(16,"Volver"),o.qZA()()()()()),2&t&&(o.xp6(6),o.Q6J("ngModel",r.subir.nombre),o.xp6(4),o.Q6J("ngModel",r.subir.url))},dependencies:[_u,Ms,zi,Ai,wr,da,Do],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{width:80%;max-width:400px;padding:20px;background-color:#f5f5f5;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;cursor:pointer;transition:background-color .3s ease;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]}),n})();const fV={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let YT;const PH=new Uint8Array(16);function kH(){if(!YT&&(YT=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!YT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return YT(PH)}const rs=[];for(let n=0;n<256;++n)rs.push((n+256).toString(16).slice(1));const NH=function OH(n,e,t){if(fV.randomUUID&&!e&&!n)return fV.randomUUID();const r=(n=n||{}).random||(n.rng||kH)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function pV(n,e=0){return rs[n[e+0]]+rs[n[e+1]]+rs[n[e+2]]+rs[n[e+3]]+"-"+rs[n[e+4]]+rs[n[e+5]]+"-"+rs[n[e+6]]+rs[n[e+7]]+"-"+rs[n[e+8]]+rs[n[e+9]]+"-"+rs[n[e+10]]+rs[n[e+11]]+rs[n[e+12]]+rs[n[e+13]]+rs[n[e+14]]+rs[n[e+15]]}(r)};function RH(n,e){1&n&&(o.TgZ(0,"div")(1,"p",14),o._uU(2,"Editar perfil"),o.qZA()())}function FH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div")(1,"p",15),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.changePortada())}),o._uU(2,"+"),o.qZA()()}}function LH(n,e){1&n&&(o.TgZ(0,"div",16)(1,"div",17)(2,"div",18),o._UZ(3,"img",19),o.TgZ(4,"span"),o._uU(5,"Asi somos"),o.qZA()(),o.TgZ(6,"div",20),o._UZ(7,"img",21),o.TgZ(8,"span"),o._uU(9,"Actividad Fisica"),o.qZA()()()())}function VH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",29)(1,"img",30),o.NdJ("click",function(){const i=o.CHM(t),u=i.index,c=i.$implicit,f=o.oxw(3);return o.KtG(f.onPreviewImage(u,c))}),o.qZA()()}if(2&n){const t=e.$implicit;o.xp6(1),o.Q6J("src",t.url,o.LSH)}}function UH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",31)(1,"div",32)(2,"span",33),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",34)(4,"button",35),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.prev())}),o._UZ(5,"i",36),o.qZA()(),o.TgZ(6,"div",37)(7,"button",38),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.next())}),o._UZ(8,"i",39),o.qZA()(),o.TgZ(9,"div",40),o._UZ(10,"img",41),o.qZA()()()}if(2&n){const t=o.oxw(3);o.xp6(10),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage,o.LSH)}}function BH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",22)(1,"div",23)(2,"p",24),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.misImages())}),o._uU(3,"+ Agregar imagen"),o.qZA()(),o.TgZ(4,"div",25)(5,"div",26),o.YNc(6,VH,2,1,"div",27),o.qZA()(),o.YNc(7,UH,11,3,"div",28),o.qZA()}if(2&n){const t=o.oxw(2);o.xp6(6),o.Q6J("ngForOf",t.imageX),o.xp6(1),o.Q6J("ngIf",t.showMask)}}function jH(n,e){1&n&&(o.TgZ(0,"div"),o._uU(1,"Muy pronto tendremos esta funcion..."),o.qZA())}function $H(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"span",2),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.logout())}),o._uU(2,"Salir"),o.qZA(),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"div",6)(7,"img",7),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.changeProfilePicture())}),o.qZA(),o.TgZ(8,"p",8),o._uU(9),o.qZA()(),o.YNc(10,RH,3,0,"div",1),o.YNc(11,FH,3,0,"div",1),o.qZA(),o.TgZ(12,"p",9),o._uU(13),o.qZA()(),o.TgZ(14,"div",10)(15,"p",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.grupos())}),o._uU(16,"Grupos"),o.qZA(),o.TgZ(17,"p",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.imagenes())}),o._uU(18,"Imagenes"),o.qZA(),o.TgZ(19,"p",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.videos())}),o._uU(20,"Videos"),o.qZA()(),o.YNc(21,LH,10,0,"div",12),o.YNc(22,BH,8,2,"div",13),o.YNc(23,jH,2,0,"div",1),o.BQk()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("src",t.urlPortada||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Starsinthesky.jpg/1024px-Starsinthesky.jpg",o.LSH),o.xp6(2),o.Q6J("src",t.usuario.photoURL||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario.displayName),o.xp6(1),o.Q6J("ngIf",!t.esInvitado),o.xp6(1),o.Q6J("ngIf",!t.esInvitado),o.xp6(2),o.Oqu(t.aboutMeValue),o.xp6(8),o.Q6J("ngIf",t.gr),o.xp6(1),o.Q6J("ngIf",t.im),o.xp6(1),o.Q6J("ngIf",t.vd)}}function HH(n,e){1&n&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2,"No se ha iniciado sesi\xf3n."),o.qZA(),o.BQk())}let GH=(()=>{class n{constructor(t,r,i,u,c){this.afAuth=t,this.storage=r,this._user=i,this.toastr=u,this.router=c,this.usuariosInfo=[],this.idInfo=[],this.esInvitado=!1,this.imageX=[],this.gr=!0,this.im=!1,this.vd=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.imageX[0],this.currentIndex=0}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t,this.getUsers(),this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)}),this.generateUniqueId()}generateUniqueId(){const t=NH();this.idGenerado=t}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],this.idInfo=[],t.forEach(r=>{const i=r.payload.doc.data();this.usuariosInfo.push({id:r.payload.doc.data(),...r.payload.doc.data(),misImagenes:i.misImagenes||[],likedByImage:i.misImagenes[this.currentIndex]});const u=this.usuariosInfo.find(m=>m.id.idUser===this.usuario.uid);this.objetoUsuario=u;const c={id:r.payload.doc.id,...r.payload.doc.data()};this.idInfo.push(c);const f=this.idInfo.find(m=>m.idUser===this.usuario.uid)?.id;this.id=f,this.phoneNumberValue=u.telefono,this.genderValue=u.Genero,this.birthdayValue=u.cumpleanos,this.aboutMeValue=u.about,this.urlPortada=u.portada,this.imageX=u.misImagenes,console.log(this.objetoUsuario)})})}changeProfilePicture(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const u=new Image,c=new FileReader;c.onload=f=>{u.onload=()=>{const m=document.createElement("canvas");let A=u.width,L=u.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),m.width=A,m.height=L;const j=m.getContext("2d");j?(j.drawImage(u,0,0,A,L),m.toBlob(z=>{if(z){const ee=`profilePictures/${this.usuario?.uid}/${i.name}`,oe=this.storage.ref(ee);this.storage.upload(ee,z,{contentType:z.type}).snapshotChanges().pipe(Hc(()=>{oe.getDownloadURL().subscribe(ze=>{this.afAuth.currentUser.then(je=>{je?.updateProfile({photoURL:ze}).then(()=>{this.toastr.info("Foto de perfil cambiada")}).catch(Ye=>{console.error("Error al actualizar la foto de perfil:",Ye)})})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},u.src=f.target.result},c.readAsDataURL(i)}}),t.click()}}grupos(){this.gr=!0,this.im=!1,this.vd=!1}imagenes(){this.gr=!1,this.im=!0,this.vd=!1}videos(){this.gr=!1,this.im=!1,this.vd=!0}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}changePortada(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const u=new Image,c=new FileReader;c.onload=f=>{u.onload=()=>{const m=document.createElement("canvas");let A=u.width,L=u.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),m.width=A,m.height=L;const j=m.getContext("2d");j?(j.drawImage(u,0,0,A,L),m.toBlob(z=>{if(z){const ee=`portada/${this.usuario?.uid}/${i.name}`,oe=this.storage.ref(ee);this.storage.upload(ee,z,{contentType:z.type}).snapshotChanges().pipe(Hc(()=>{oe.getDownloadURL().subscribe(ze=>{this._user.updateUser({portada:ze},this.id).then(()=>{console.log("actualizando"),this.toastr.info("Foto de portada cambiada")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},u.src=f.target.result},c.readAsDataURL(i)}}),t.click()}}misImages(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const u=new Image,c=new FileReader;c.onload=f=>{u.onload=()=>{const m=document.createElement("canvas");let A=u.width,L=u.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),m.width=A,m.height=L;const j=m.getContext("2d");j?(j.drawImage(u,0,0,A,L),m.toBlob(z=>{if(z){const ee=`usuarios/${this.usuario?.uid}/${i.name}`,oe=this.storage.ref(ee);this.storage.upload(ee,z,{contentType:z.type}).snapshotChanges().pipe(Hc(()=>{oe.getDownloadURL().subscribe(ze=>{const je=this.objetoUsuario;je.misImagenes.push({url:ze,id:this.idGenerado}),this._user.updateUser({misImagenes:je.misImagenes},this.id).then(()=>{console.log("actualizando"),this.toastr.info("nueva imagen agregada")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},u.src=f.target.result},c.readAsDataURL(i)}}),t.click()}}onPreviewImage(t,r){this.showMask=!0,this.currentIndex=t,this.previewImage=!0,this.currentLightboxImage=this.imageX[t].url}close(){this.showMask=!1}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.imageX.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.imageX[this.currentIndex].url}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.imageX.length-1),this.currentLightboxImage=this.imageX[this.currentIndex].url}abrirCom(t){console.log("abriendo comentarios",t)}likeImage(t){console.log("diste click"),this.imageX.findIndex(f=>f.id===t.id);const u=this.imageX[this.currentIndex];u.likedByImage.push(1),console.log({likedCount:u.likedByImage})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ki),o.Y36(XP),o.Y36(rg),o.Y36(ps),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-perfil"]],decls:3,vars:2,consts:[[1,"container",2,"user-select","none"],[4,"ngIf"],[2,"padding","6px","position","absolute","right","0","text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"user-info"],[1,"img-container"],["alt","",2,"width","100%","position","absolute","z-index","-1",3,"src"],[2,"padding","5px"],["alt","Foto de perfil","width","auto","height","70",2,"cursor","pointer","user-select","none",3,"src","click"],[1,"lap","user"],[1,"lap"],[1,"acciones"],[2,"cursor","pointer",3,"click"],["style","\n        display: flex;\n        padding: 20px;\n        flex-wrap: wrap;\n        justify-content: center;\n      ",4,"ngIf"],["class","contenedor-img",4,"ngIf"],["routerLink","/perfil-editar",1,"edit-perfil"],[1,"edit-perfil",3,"click"],[2,"display","flex","padding","20px","flex-wrap","wrap","justify-content","center"],[1,"container-img-g"],[1,"bf"],["routerLink","/main","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2FScreen%20Shot%202024-05-06%20at%2011.43.48%20AM.png?alt=media&token=c0c71fed-4aff-4923-8663-9d91d1f9f4df","alt","",2,"cursor","pointer"],[1,"bf","bf2"],["routerLink","/main-activate","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Factivate-logo.jpeg?alt=media&token=28baeec7-81b9-42a8-845d-3e226031f3ba","alt","",2,"cursor","pointer"],[1,"contenedor-img"],[1,"subir"],[3,"click"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","modalcom",4,"ngIf"],[1,"gallery-img"],["width","130","alt","",1,"zoomable-image",3,"src","click"],[1,"modalcom"],[1,"modal-con"],[1,"fas","fa-times","lax",2,"color","white","font-size","48px",3,"click"],[1,"anterior"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev"],[1,"siguiente"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next"],[2,"text-align","center"],["alt","imagen",2,"transform","none","width","100%",3,"src"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,$H,24,9,"ng-container",1),o.YNc(2,HH,3,0,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",r.usuario),o.xp6(1),o.Q6J("ngIf",!r.usuario))},dependencies:[ji,_n,_u],styles:[".img-container[_ngcontent-%COMP%]{gap:1rem;border-radius:12px;display:flex;height:25vh;align-items:flex-end;box-shadow:0 0 12px #000}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:13px}.lap[_ngcontent-%COMP%]{border-radius:7px;background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;text-align:center;margin:3px}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.acciones[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;border-radius:17px;padding:6px 27px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.container-img-g[_ngcontent-%COMP%]{gap:2rem;display:flex;text-align:center;width:135px;justify-content:center}.bf[_ngcontent-%COMP%]{border-radius:7px;padding:7px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.bf[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.user[_ngcontent-%COMP%]{color:#fff;margin:0;font-weight:600}.edit-perfil[_ngcontent-%COMP%]{border-radius:22px;padding:5px 22px;background-color:#fff;color:#000;cursor:pointer}.edit-perfil[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.contenedor-img[_ngcontent-%COMP%]{display:flex;flex-direction:column}.subir[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:12px}.subir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;width:129px;padding:5px 9px;border-radius:13px}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.gallery-lightbox-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:3px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-top:3px;box-shadow:0 1px 5px #00000036}.anterior[_ngcontent-%COMP%]{position:absolute;left:0;top:50%}.siguiente[_ngcontent-%COMP%]{position:absolute;right:0;top:50%}.btn-prev[_ngcontent-%COMP%]{border:none;background-color:transparent;border-radius:50%;font-size:48px}.btn-prev[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fefefe7a}.btn-prev[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#00a2ff}.btn-next[_ngcontent-%COMP%]{border:none;background-color:transparent;border-radius:50%;font-size:48px}.btn-next[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fefefe7a}.btn-next[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#00a2ff}@media (max-width: 500px){.bf2[_ngcontent-%COMP%]{position:relative;top:3rem}}"]}),n})();function qH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"label"),o._uU(4,"Nombre de usuario:"),o.qZA(),o.TgZ(5,"input",4),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.displayNameValue=i)}),o.qZA()(),o.TgZ(6,"div",3)(7,"label"),o._uU(8,"Lugar actual:"),o.qZA(),o.TgZ(9,"input",4),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.ciudad=i)}),o.qZA()(),o.TgZ(10,"div",3)(11,"label"),o._uU(12,"Email:"),o.qZA(),o.TgZ(13,"input",5),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.usuario.email=i)}),o.qZA()(),o.TgZ(14,"div",3)(15,"label"),o._uU(16,"Tel\xe9fono:"),o.qZA(),o.TgZ(17,"input",6),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.phoneNumberValue=i)}),o.qZA()(),o.TgZ(18,"div",3)(19,"label"),o._uU(20,"G\xe9nero:"),o.qZA(),o.TgZ(21,"select",7),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.genderValue=i)}),o.TgZ(22,"option",8),o._uU(23,"Hombre"),o.qZA(),o.TgZ(24,"option",9),o._uU(25,"Mujer"),o.qZA(),o.TgZ(26,"option",10),o._uU(27,"No definido"),o.qZA()()(),o.TgZ(28,"div",3)(29,"label"),o._uU(30,"Estado:"),o.qZA(),o.TgZ(31,"select",11),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.estado=i)}),o.TgZ(32,"option",12),o._uU(33,"Soltero(a)"),o.qZA(),o.TgZ(34,"option",13),o._uU(35,"En una relacion"),o.qZA(),o.TgZ(36,"option",14),o._uU(37,"Comprometido(a)"),o.qZA(),o.TgZ(38,"option",15),o._uU(39,"Casado(a)"),o.qZA(),o.TgZ(40,"option",16),o._uU(41,"Pareja de hecho"),o.qZA(),o.TgZ(42,"option",17),o._uU(43,"Relacion abierta"),o.qZA(),o.TgZ(44,"option",18),o._uU(45,"Es complicado"),o.qZA(),o.TgZ(46,"option",19),o._uU(47,"Separado(a)"),o.qZA(),o.TgZ(48,"option",20),o._uU(49,"Divorciado(a)"),o.qZA(),o.TgZ(50,"option",21),o._uU(51,"Viudo(a)"),o.qZA()()(),o.TgZ(52,"div",22)(53,"label"),o._uU(54,"Fecha de cumplea\xf1os:"),o.qZA(),o.TgZ(55,"input",23),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.birthdayValue=i)}),o.qZA()(),o.TgZ(56,"div",3)(57,"label"),o._uU(58,"Sobre m\xed (m\xe1ximo 50 caracteres):"),o.qZA(),o.TgZ(59,"textarea",24),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.aboutMeValue=i)}),o.qZA()(),o.TgZ(60,"div",25)(61,"button",26),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.actualizarPerfil())}),o._uU(62," Guardar cambios "),o.qZA(),o.TgZ(63,"button",27),o._uU(64,"Volver"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.displayNameValue),o.xp6(4),o.Q6J("ngModel",t.ciudad),o.xp6(4),o.Q6J("disabled",!0)("ngModel",t.usuario.email),o.xp6(4),o.Q6J("ngModel",t.phoneNumberValue),o.xp6(4),o.Q6J("ngModel",t.genderValue),o.xp6(10),o.Q6J("ngModel",t.estado),o.xp6(24),o.Q6J("ngModel",t.birthdayValue),o.xp6(4),o.Q6J("ngModel",t.aboutMeValue)}}let zH=(()=>{class n{constructor(t,r,i,u){this.afAuth=t,this.toastr=r,this.router=i,this._user=u,this.usuariosInfo=[],this.comprobar=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t,this.displayNameValue=t?.displayName,this.getUsers()})}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],t.forEach(r=>{const i={id:r.payload.doc.id,...r.payload.doc.data()};this.usuariosInfo.push(i);const u=this.usuariosInfo.find(f=>f.idUser===this.usuario.uid),c=this.usuariosInfo.find(f=>f.idUser===this.usuario.uid)?.id;this.id=c,null==c&&(this.comprobar=!0),this.phoneNumberValue=u.telefono,this.genderValue=u.Genero,this.birthdayValue=u.cumpleanos,this.aboutMeValue=u.about,this.ciudad=u.ciudad,this.estado=u.estado})})}actualizarPerfil(){this.usuario?this.afAuth.currentUser.then(t=>{const r=t?.uid,i=t?.email,u=t?.photoURL;if(this.comprobar?this._user.addIUserInfo({idUser:r,usuario:this.displayNameValue,email:i,foto:u,telefono:this.phoneNumberValue,Genero:this.genderValue,cumpleanos:this.birthdayValue,about:this.aboutMeValue,ciudad:this.ciudad,estado:this.estado}).then(()=>{}):this._user.updateUser({idUser:r,usuario:this.displayNameValue,email:i,foto:u,telefono:this.phoneNumberValue,Genero:this.genderValue,cumpleanos:this.birthdayValue,about:this.aboutMeValue,ciudad:this.ciudad,estado:this.estado},this.id).then(()=>{}),t)return t.updateProfile({displayName:this.displayNameValue});throw new Error("Usuario no autenticado")}).then(()=>{this.router.navigate(["/perfil"]),this.toastr.info("Perfil actualizado.")}).catch(t=>{console.error("Error al actualizar el perfil:",t)}):console.error("Usuario no encontrado")}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ki),o.Y36(ps),o.Y36(fn),o.Y36(rg))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-perfil-editar"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"per-con"],[1,"form-group"],["required","","name","displayName","type","text",1,"form-control",3,"ngModel","ngModelChange"],["required","","name","email","type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"],["name","phoneNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","gender",1,"form-control","slc",3,"ngModel","ngModelChange"],["value","hombre"],["value","mujer"],["value","no_definido"],["name","estado",1,"form-control","slc",3,"ngModel","ngModelChange"],["value","soltero(a)"],["value","en una relacion"],["value","comprometido(a)"],["value","casado(a)"],["value","pareja de hecho"],["value","relacion abierta"],["value","es complicado"],["value","separado(a)"],["value","divorciado(a)"],["value","viudo(a)"],[1,"form-group","brt"],["name","birthday","type","date",1,"form-control","dent",3,"ngModel","ngModelChange"],["name","aboutMe","maxlength","50",1,"form-control",3,"ngModel","ngModelChange"],[1,"but"],[1,"btn","btn-primary",3,"click"],["routerLink","/perfil",1,"btn","btn-secondary"]],template:function(t,r){1&t&&o.YNc(0,qH,65,9,"div",0),2&t&&o.Q6J("ngIf",r.usuario)},dependencies:[_n,_u,$w,Hw,zi,Ig,Ag,Ai,xi,Qw,da],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{padding:10px 20px;margin-right:10px;border:none;border-radius:5px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.per-con[_ngcontent-%COMP%]{width:98%}.slc[_ngcontent-%COMP%]{width:102%}.brt[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dent[_ngcontent-%COMP%]{width:100.3%;padding:8px;border:1px solid #bcb0b0;border-radius:4px}.but[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 500px){.per-con[_ngcontent-%COMP%]{width:94%}.slc[_ngcontent-%COMP%]{width:106%}}"]}),n})();function ZH(n,e){if(1&n&&(o.TgZ(0,"div",17)(1,"p",18),o._uU(2),o.qZA(),o.TgZ(3,"p",18),o._uU(4),o.qZA(),o.TgZ(5,"p",18),o._uU(6),o.qZA(),o.TgZ(7,"p",18),o._uU(8),o.qZA(),o.TgZ(9,"p",18),o._uU(10),o.qZA()()),2&n){const t=o.oxw(2);o.xp6(2),o.hij("Vive en: ",t.info.ciudad,""),o.xp6(2),o.hij("Genero: ",t.info.Genero,""),o.xp6(2),o.hij("Cumplea\xf1os: ",t.info.cumpleanos,""),o.xp6(2),o.hij("Estado: ",t.info.estado,""),o.xp6(2),o.hij("Celular: ",t.info.telefono,"")}}function WH(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"span",2),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.logout())}),o._uU(2,"Salir"),o.qZA(),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"div",6),o._UZ(7,"img",7),o.TgZ(8,"p",8),o._uU(9),o.qZA()(),o.TgZ(10,"div")(11,"p",9),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.toggleInfo())}),o._uU(12,"Ver mas"),o.qZA(),o.YNc(13,ZH,11,5,"div",10),o.qZA()(),o.TgZ(14,"p",11),o._uU(15),o.qZA()(),o.TgZ(16,"div",12)(17,"p"),o._uU(18,"Grupos"),o.qZA(),o.TgZ(19,"p"),o._uU(20,"Imagenes"),o.qZA(),o.TgZ(21,"p"),o._uU(22,"Videos"),o.qZA()(),o.TgZ(23,"div",13)(24,"div",14)(25,"div",15),o._UZ(26,"img",16),o.qZA(),o.TgZ(27,"span"),o._uU(28,"Asi somos asi bailamos"),o.qZA()()(),o.BQk()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("src",t.info.portada||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Starsinthesky.jpg/1024px-Starsinthesky.jpg",o.LSH),o.xp6(2),o.Q6J("src",t.info.foto?t.info.foto:"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario.displayName),o.xp6(4),o.Q6J("ngIf",t.showMoreInfo),o.xp6(2),o.Oqu(t.info.about)}}function KH(n,e){1&n&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2,"No se ha iniciado sesi\xf3n."),o.qZA(),o.BQk())}let YH=(()=>{class n{constructor(t,r,i,u,c,f){this.route=t,this._user=r,this.afAuth=i,this.location=u,this.toastr=c,this.router=f,this.usuariosInfo=[],this.showMoreInfo=!1,this.ver="Ver mas..."}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t}),this.route.paramMap.subscribe(t=>{this.id=t.get("id"),console.log(this.id)}),this.getUsers()}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],t.forEach(r=>{const i={id:r.payload.doc.id,...r.payload.doc.data()};this.usuariosInfo.push(i);const u=this.usuariosInfo.find(c=>c.idUser===this.id);this.info=u})})}goBack(){this.location.back()}toggleInfo(){this.showMoreInfo=!this.showMoreInfo,this.ver=this.showMoreInfo?"Ver menos":"Ver mas..."}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wl),o.Y36(rg),o.Y36(ki),o.Y36(xe),o.Y36(ps),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-ver-usuario"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[2,"padding","6px","position","absolute","right","0","text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"user-info"],[1,"img-container"],["alt","",2,"width","100%","position","absolute","z-index","-1",3,"src"],[2,"padding","5px"],["alt","Foto de perfil","width","70","height","70",2,"cursor","pointer","user-select","none",3,"src"],[1,"lap","user"],[1,"edit-perfil",3,"click"],["style","display: flex; flex-direction: column; align-items: center",4,"ngIf"],[1,"lap"],[1,"acciones"],[2,"padding","20px"],[1,"container-img-g"],[1,"bf"],["routerLink","/main","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Ffondo%20asi%20somos.png?alt=media&token=023a7ed4-800e-465e-b616-20ce4df7c7ba","alt","",2,"cursor","pointer"],[2,"display","flex","flex-direction","column","align-items","center"],[1,"lap","email"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,WH,29,5,"ng-container",1),o.YNc(2,KH,3,0,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",r.usuario),o.xp6(1),o.Q6J("ngIf",!r.usuario))},dependencies:[_n,_u],styles:[".img-container[_ngcontent-%COMP%]{gap:1rem;border-radius:12px;display:flex;height:18vh;align-items:flex-end;box-shadow:0 0 12px #000}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:13px}.lap[_ngcontent-%COMP%]{border-radius:7px;background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;text-align:center;margin:3px}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.acciones[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;border-radius:17px;padding:6px 27px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.container-img-g[_ngcontent-%COMP%]{text-align:center;width:135px}.bf[_ngcontent-%COMP%]{border-radius:7px;padding:7px;background-color:bisque}.user[_ngcontent-%COMP%]{color:#fff;margin:0;font-weight:600}.edit-perfil[_ngcontent-%COMP%]{border-radius:22px;padding:5px 22px;background-color:#fff;color:#000;cursor:pointer}.edit-perfil[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}"]}),n})();function QH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",9)(1,"div",10)(2,"span",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",12)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",13),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",14),o._uU(10,"Registrate"),o.qZA()()()()()}}let tk=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.esInvitado=!1,this.modal=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}verPerfil(){this.router.navigate(["/perfil"])}close(){this.modal=!1}salir(){this.logout()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ki),o.Y36(fn),o.Y36(ps))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-navbar-activate"]],decls:16,vars:2,consts:[[2,"user-select","none"],[1,"log"],[1,"verperfil",2,"text-shadow","3px 1px 2px #1669c1","cursor","pointer","color","white",3,"click"],[2,"text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"caja"],["routerLink","/main-activate",1,"nav-link"],["routerLink","/galeria-activate",1,"nav-link"],["routerLink","/videos-activate",1,"nav-link"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"span",2),o.NdJ("click",function(){return r.verPerfil()}),o._uU(4),o.qZA(),o.TgZ(5,"span",3),o.NdJ("click",function(){return r.logout()}),o._uU(6,"Salir"),o.qZA()()(),o.TgZ(7,"div",4)(8,"a",5),o._uU(9,"INICIO"),o.qZA(),o.TgZ(10,"a",6),o._uU(11,"IMAGENES"),o.qZA(),o.TgZ(12,"a",7),o._uU(13,"VIDEOS"),o.qZA()()(),o.TgZ(14,"div"),o.YNc(15,QH,11,0,"div",8),o.qZA()),2&t&&(o.xp6(4),o.hij("Hola ",r.usuarioActual,""),o.xp6(11),o.Q6J("ngIf",r.modal))},dependencies:[_n,Cl],styles:[".log[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.verperfil[_ngcontent-%COMP%]{cursor:pointer}.verperfil[_ngcontent-%COMP%]:hover{color:red}.caja[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,rgba(196,214,1,.6039215686),rgba(254,254,255,.4588235294));display:flex;justify-content:space-around;padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center;margin-top:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 900px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),JH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main-activate"]],decls:10,vars:0,consts:[[1,"contenedor",2,"color","white"],[2,"text-align","center"],["src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Factivate-logo.jpeg?alt=media&token=28baeec7-81b9-42a8-845d-3e226031f3ba","alt","",1,"img-fondo"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"app-navbar-activate"),o.TgZ(2,"div")(3,"div",1)(4,"h2"),o._uU(5,"Bienvenidos a Activate"),o.qZA(),o.TgZ(6,"span"),o._uU(7,"Sesi\xf3n de Actividad F\xedsica Musicalizada"),o.qZA()(),o.TgZ(8,"div"),o._UZ(9,"img",2),o.qZA()()())},dependencies:[tk],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;padding:20px;height:100vh}.img-fondo[_ngcontent-%COMP%]{position:relative;top:5rem;width:100%;z-index:1}"]}),n})(),XH=(()=>{class n{constructor(t){this.firestore=t}getim(){return this.firestore.collection("img-activate").snapshotChanges()}updateImgAc(t,r){return this.firestore.collection("img-activate").doc(t).update(r)}addImagenInfo(t){return this.firestore.collection("img-activate").add(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ng))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function eG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11)(1,"img",12),o.NdJ("mouseenter",function(){const u=o.CHM(t).index,c=o.oxw();return o.KtG(c.onMouseEnter(u))})("mouseleave",function(){const u=o.CHM(t).index,c=o.oxw();return o.KtG(c.onMouseLeave(u))})("click",function(){const u=o.CHM(t).index,c=o.oxw();return o.KtG(c.onPreviewImage(u))}),o.qZA(),o.TgZ(2,"div",13)(3,"div")(4,"i",14),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.abrirCom(u))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",15),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.likeImage(u))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(1),o.Q6J("src",t.url,o.LSH),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByImage.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountImage)}}function tG(n,e){if(1&n&&(o.TgZ(0,"span",22),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function nG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",23),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.onClosePreview())}),o._UZ(1,"i",24),o.qZA()}}function rG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.prev())}),o._UZ(1,"i",26),o.qZA()}}function iG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.next())}),o._UZ(1,"i",28),o.qZA()}}function sG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",29),o._UZ(1,"img",30),o.TgZ(2,"div",31)(3,"div")(4,"i",14),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.abrirCom(i.currentLightboxImage))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",15),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.likeImage(i.currentLightboxImage))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=o.oxw(2);o.xp6(1),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage.url,o.LSH),o.xp6(5),o.Oqu(t.currentLightboxImage.commentsVideo.length),o.xp6(2),o.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),o.xp6(2),o.Oqu(t.currentLightboxImage.likesCountImage)}}const oG=function(n){return{active:n}};function aG(n,e){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,tG,2,2,"span",17),o.YNc(2,nG,2,0,"button",18),o.YNc(3,rG,2,0,"button",19),o.YNc(4,iG,2,0,"button",20),o.YNc(5,sG,11,7,"div",21),o.qZA()),2&n){const t=o.oxw();o.Q6J("ngClass",o.VKq(6,oG,t.previewImage)),o.xp6(1),o.Q6J("ngIf",t.showCount),o.xp6(1),o.Q6J("ngIf",t.previewImage),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.previewImage)}}function uG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",44),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function lG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",45)(1,"div",46)(2,"img",47),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.ir(u.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",48)(6,"p",49),o._uU(7),o.qZA(),o.TgZ(8,"div",50)(9,"div")(10,"i",15),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.likeComment(u))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",51),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.abrirEditar(u))}),o.qZA(),o.TgZ(14,"i",52),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.deleteModal(u))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function cG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",32)(1,"div",33),o.YNc(2,uG,1,0,"span",34),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",35)(6,"div",36),o.YNc(7,lG,15,6,"div",37),o.qZA()(),o.TgZ(8,"div",38)(9,"form",39,40),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",41),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",42),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",43),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function dG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",53)(1,"div",54)(2,"div",55)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",56)(6,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function hG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",58)(1,"div",54)(2,"div",55)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",59),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",60)(7,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",57),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}let fG=(()=>{class n{constructor(t,r,i,u,c,f,m){this.el=t,this.afAuth=r,this._image=i,this.toastr=u,this.router=c,this._user=f,this.storagex=m,this.images=[],this.showCount=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.images[0],this.currentIndex=0,this.controls=!0,this.totalImageCount=0,this.reset=0,this.adm=!1,this.esInvitado=!1,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[]}ngOnInit(){this.getImages(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getImages(){this._image.getim().subscribe(t=>{this.images=[],t.forEach(r=>{const i=r.payload.doc.data();this.images.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]})})})}subirArchivo(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const u=new Image,c=new FileReader;c.onload=f=>{u.onload=()=>{const m=document.createElement("canvas");let A=u.width,L=u.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),m.width=A,m.height=L;const j=m.getContext("2d");j?(j.drawImage(u,0,0,A,L),m.toBlob(z=>{if(z){const ee=`images/${i.name}`,oe=this.storagex.ref(ee);this.storagex.upload(ee,z,{contentType:z.type}).snapshotChanges().pipe(Hc(()=>{oe.getDownloadURL().subscribe(ze=>{this._image.addImagenInfo({url:ze}).then(()=>{console.log("actualizando"),this.toastr.info("Actualizando lista de Imagenes")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},u.src=f.target.result},c.readAsDataURL(i)}}),t.click()}likeImage(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const u=i.uid,c=i.displayName,f=i.email,m=t.likedByImage.indexOf(u);-1!==m?(t.likedByImage.splice(m,1),t.userImageLikes.splice(m,1),t.likesCountImage--):(t.likedByImage.push(u),t.likesCountImage++,t.userImageLikes.push({usuario:c,correo:f}));const v=t.id,D={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._image.updateImgAc(v,D)}else r.modal=!0})()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.images[t],this.totalImageCount=this.images.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.images.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.images[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.currentLightboxImage=this.images[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const u=r.dataVideoId,c=r.dataVideoId.id;u.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const A={commentsVideo:u.commentsVideo};yield r._image.updateImgAc(c,A),r.comentario=""}})()}abrirCom(t){var r=this;return(0,ae.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._image.updateImgAc(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(u=>{console.error("Error al eliminar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._image.updateImgAc(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const u=i.uid,c=t.likedByComment.indexOf(u);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(u),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._image.updateImgAc(f,v)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}ir(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(ki),o.Y36(XH),o.Y36(ps),o.Y36(fn),o.Y36(rg),o.Y36(XP))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-galeria-activate"]],decls:15,vars:5,consts:[[1,"contenedor"],[1,"box"],[1,"con-input"],[3,"click"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[2,"display","inline-flex","gap","4rem"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar-activate"),o.TgZ(3,"div",2)(4,"p",3),o.NdJ("click",function(){return r.subirArchivo()}),o._uU(5,"+ Agregar imagen"),o.qZA()(),o.TgZ(6,"div",4)(7,"div",5),o.YNc(8,eG,11,5,"div",6),o.qZA(),o.YNc(9,aG,6,8,"div",7),o.qZA()()(),o._UZ(10,"div"),o.YNc(11,cG,18,4,"div",8),o.TgZ(12,"div"),o.YNc(13,dG,10,0,"div",9),o.qZA(),o.YNc(14,hG,11,1,"div",10)),2&t&&(o.xp6(8),o.Q6J("ngForOf",r.images),o.xp6(1),o.Q6J("ngIf",r.showMask),o.xp6(2),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar))},dependencies:[an,ji,_n,Ms,zi,Ai,wr,xi,da,Do,tk],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:0}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:30px;margin-top:56px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.con-input[_ngcontent-%COMP%]{padding:15px 0 20px}.file-label[_ngcontent-%COMP%]{padding:4px;font-size:14px}}@media (max-width: 500px){.caja[_ngcontent-%COMP%]{font-size:12px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:1}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:20%}}"]}),n})(),pG=(()=>{class n{constructor(t){this.firestore=t}getactvid(){return this.firestore.collection("videos-activate",t=>t.orderBy("nombre","asc")).snapshotChanges()}updateActVideo(t,r){return this.firestore.collection("videos-activate").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ng))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gG=(()=>{class n{constructor(t){this.sanitizer=t}transform(t,r=""){let i=t;return r&&t.includes("youtube.com")&&(i+=(t.includes("?")?"&":"?")+r),this.sanitizer.bypassSecurityTrustResourceUrl(i)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ja,16))},n.\u0275pipe=o.Yjl({name:"safeUrl",type:n,pure:!0}),n})();function mG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",8),o._UZ(1,"iframe",9),o.ALo(2,"safeUrl"),o.TgZ(3,"div",10)(4,"div",11)(5,"p",12),o._uU(6),o.qZA()(),o.TgZ(7,"div",13)(8,"div",14)(9,"i",15),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.abrirCom(u))}),o.qZA(),o.TgZ(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",16)(13,"i",17),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw();return o.KtG(c.likeVideo(u))}),o.qZA(),o.TgZ(14,"span"),o._uU(15),o.qZA()()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(1),o.Q6J("src",o.xi3(2,6,t.url,"autoplay=0"),o.uOi),o.xp6(5),o.hij(" ",t.nombre," "),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByVideo.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountVideo)}}function _G(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",30),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function yG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",31)(1,"div",32)(2,"img",33),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.ir(u.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",34)(6,"p",35),o._uU(7),o.qZA(),o.TgZ(8,"div",36)(9,"div")(10,"i",17),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.likeComment(u))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",37),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.abrirEditar(u))}),o.qZA(),o.TgZ(14,"i",38),o.NdJ("click",function(){const u=o.CHM(t).$implicit,c=o.oxw(2);return o.KtG(c.deleteModal(u))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function vG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",18)(1,"div",19),o.YNc(2,_G,1,0,"span",20),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",21)(6,"div",22),o.YNc(7,yG,15,6,"div",23),o.qZA()(),o.TgZ(8,"div",24)(9,"form",25,26),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",27),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",28),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",29),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function wG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",39)(1,"div",40)(2,"div",41)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",42)(6,"button",43),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",43),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function CG(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",44)(1,"div",40)(2,"div",41)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",45),o.NdJ("ngModelChange",function(i){o.CHM(t);const u=o.oxw();return o.KtG(u.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",46)(7,"button",43),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",43),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}const bG=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:mH},{path:"registrar",component:EH},{path:"recuperar",component:xH},{path:"main",component:sI,canActivate:[Eu]},{path:"main-activate",component:JH,canActivate:[Eu]},{path:"galeria-activate",component:fG,canActivate:[Eu]},{path:"videos-activate",component:(()=>{class n{constructor(t,r,i,u,c){this.afAuth=t,this._videosService=r,this.afs=i,this._users=u,this.router=c,this.videos=[],this.esInvitado=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.ocultarx=!0,this.adm=!1}ngOnInit(){this.getVideos(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getVideos(){this._videosService.getactvid().subscribe(t=>{this.videos=[],t.forEach(r=>{const i=r.payload.doc.data();this.videos.push({id:r.payload.doc.id,...i,likesCountVideo:i.likesCountVideo||0,likedByVideo:i.likedByVideo||[],userVideoLikes:i.userVideoLikes||[],commentsVideo:i.commentsVideo||[]}),console.log(this.videos)})})}likeVideo(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const u=i.uid,c=i.displayName,f=i.email,m=t.likedByVideo.indexOf(u);-1!==m?(t.likedByVideo.splice(m,1),t.userVideoLikes.splice(m,1),t.likesCountVideo--):(t.likedByVideo.push(u),t.likesCountVideo++,t.userVideoLikes.push({usuario:c,correo:f}));const v=t.id,D={likesCountVideo:t.likesCountVideo,likedByVideo:t.likedByVideo,userVideoLikes:t.userVideoLikes};yield r._videosService.updateActVideo(v,D)}else r.modal=!0})()}abrirCom(t){var r=this;return(0,ae.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}close(){this.modal=!1,this.modalcom=!1}ir(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}likeComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const u=i.uid,c=t.likedByComment.indexOf(u);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(u),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._videosService.updateActVideo(f,v),console.log(v)}}else r.modal=!0})()}abrirEditar(t){var r=this;return(0,ae.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email||"jeestrada377@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,ae.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const u=r.dataVideoId,c=r.dataVideoId.id;u.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const A={commentsVideo:u.commentsVideo};yield r._videosService.updateActVideo(c,A),r.comentario=""}})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._videosService.updateActVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(u=>{console.error("Error al eliminar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._videosService.updateActVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ki),o.Y36(pG),o.Y36(ng),o.Y36(rg),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-videos-activate"]],decls:10,vars:4,consts:[[1,"contenedor"],[1,"box"],[1,"video-container"],[1,"video"],["class","gallery-video",4,"ngFor","ngForOf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"gallery-video"],["width","320","height","240","frameborder","0","allowfullscreen","",3,"src"],[1,"section"],[1,"title"],[2,"margin","0"],[1,"bocadillos"],[1,"comment"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"likes"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modalcom"],[1,"modal-com"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar-activate"),o.TgZ(3,"div",2)(4,"div",3),o.YNc(5,mG,16,9,"div",4),o.qZA()()()(),o.YNc(6,vG,18,4,"div",5),o.TgZ(7,"div"),o.YNc(8,wG,10,0,"div",6),o.qZA(),o.YNc(9,CG,11,1,"div",7)),2&t&&(o.xp6(5),o.Q6J("ngForOf",r.videos),o.xp6(1),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar))},dependencies:[ji,_n,Ms,zi,Ai,wr,xi,da,Do,tk,gG],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}.bocadillos[_ngcontent-%COMP%]{display:flex;gap:1rem}.video-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;padding-bottom:56.25%}.video-wrapper[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;padding:20px;width:100%}.section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.video-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;padding:25px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);column-gap:30px;row-gap:30px}.gallery-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:.35rem;margin-bottom:17px;box-shadow:0 1px 5px #00000036}@media screen and (max-width: 900px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width: 580px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]}),n})(),canActivate:[Eu]},{path:"galeria",component:X$,canActivate:[Eu]},{path:"videos",component:uH,canActivate:[Eu]},{path:"nuevo-video",component:MH,canActivate:[Eu]},{path:"musica",component:cH,canActivate:[Eu]},{path:"perfil",component:GH,canActivate:[Eu]},{path:"perfil-editar",component:zH,canActivate:[Eu]},{path:"usuario/:id",component:YH,canActivate:[Eu]},{path:"**",redirectTo:"/",pathMatch:"full"}];let EG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[EE.forRoot(bG),EE]}),n})(),IG=(()=>{class n{constructor(){this.title="asi-somos-asi-bailamos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[av]}),n})();const nk_firebase={apiKey:"AIzaSyC-xnNzaTCFveAr77Iqf1CQ-wRct6kCBkQ",authDomain:"fitpal-horario.firebaseapp.com",projectId:"fitpal-horario",storageBucket:"fitpal-horario.appspot.com",messagingSenderId:"240368209776",appId:"1:240368209776:web:7b2960966943d391e049b5"};let TG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[IG]}),n.\u0275inj=o.cJS({imports:[Ya,EG,hD,Xw,sA,Yi.hO.initializeApp(nk_firebase),SE(()=>Cx(nk_firebase)),GU(()=>zU()),$m,n0.forRoot({timeOut:4e3,positionClass:"toast-bottom-right",preventDuplicates:!0})]}),n})();(0,o.G48)(),hc().bootstrapModule(TG).catch(n=>console.error(n))},9751:(bt,Ne,U)=>{U.d(Ne,{y:()=>ve});var o=U(2961),$=U(727),R=U(8822),ie=U(9635),de=U(2416),_e=U(576),pe=U(2806);let ve=(()=>{class J{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const De=new J;return De.source=this,De.operator=Oe,De}subscribe(Oe,De,it){const Ce=function q(J){return J&&J instanceof o.Lv||function Z(J){return J&&(0,_e.m)(J.next)&&(0,_e.m)(J.error)&&(0,_e.m)(J.complete)}(J)&&(0,$.Nn)(J)}(Oe)?Oe:new o.Hp(Oe,De,it);return(0,pe.x)(()=>{const{operator:ye,source:yt}=this;Ce.add(ye?ye.call(Ce,yt):yt?this._subscribe(Ce):this._trySubscribe(Ce))}),Ce}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(De){Oe.error(De)}}forEach(Oe,De){return new(De=we(De))((it,Ce)=>{const ye=new o.Hp({next:yt=>{try{Oe(yt)}catch(pt){Ce(pt),ye.unsubscribe()}},error:Ce,complete:it});this.subscribe(ye)})}_subscribe(Oe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Oe)}[R.L](){return this}pipe(...Oe){return(0,ie.U)(Oe)(this)}toPromise(Oe){return new(Oe=we(Oe))((De,it)=>{let Ce;this.subscribe(ye=>Ce=ye,ye=>it(ye),()=>De(Ce))})}}return J.create=He=>new J(He),J})();function we(J){var He;return null!==(He=J??de.v.Promise)&&void 0!==He?He:Promise}},7579:(bt,Ne,U)=>{U.d(Ne,{x:()=>pe});var o=U(9751),$=U(727);const ie=(0,U(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=U(8737),_e=U(2806);let pe=(()=>{class we extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const J=new ve(this,this);return J.operator=q,J}_throwIfClosed(){if(this.closed)throw new ie}next(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(q)}})}error(q){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:J}=this;for(;J.length;)J.shift().error(q)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:J,isStopped:He,observers:Oe}=this;return J||He?$.Lc:(this.currentObservers=null,Oe.push(q),new $.w0(()=>{this.currentObservers=null,(0,de.P)(Oe,q)}))}_checkFinalizedStatuses(q){const{hasError:J,thrownError:He,isStopped:Oe}=this;J?q.error(He):Oe&&q.complete()}asObservable(){const q=new o.y;return q.source=this,q}}return we.create=(Z,q)=>new ve(Z,q),we})();class ve extends pe{constructor(Z,q){super(),this.destination=Z,this.source=q}next(Z){var q,J;null===(J=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===J||J.call(q,Z)}error(Z){var q,J;null===(J=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===J||J.call(q,Z)}complete(){var Z,q;null===(q=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===q||q.call(Z)}_subscribe(Z){var q,J;return null!==(J=null===(q=this.source)||void 0===q?void 0:q.subscribe(Z))&&void 0!==J?J:$.Lc}}},2961:(bt,Ne,U)=>{U.d(Ne,{Hp:()=>it,Lv:()=>J});var o=U(576),$=U(727),R=U(2416),ie=U(7849);function de(){}const _e=we("C",void 0,void 0);function we(xe,Ie,Se){return{kind:xe,value:Ie,error:Se}}var Z=U(3410),q=U(2806);class J extends $.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,$.Nn)(Ie)&&Ie.add(this)):this.destination=pt}static create(Ie,Se,qe){return new it(Ie,Se,qe)}next(Ie){this.isStopped?yt(function ve(xe){return we("N",xe,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?yt(function pe(xe){return we("E",void 0,xe)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?yt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Oe(xe,Ie){return He.call(xe,Ie)}class De{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Ie)}catch(qe){Ce(qe)}}error(Ie){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Ie)}catch(qe){Ce(qe)}else Ce(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(Se){Ce(Se)}}}class it extends J{constructor(Ie,Se,qe){let Ze;if(super(),(0,o.m)(Ie)||!Ie)Ze={next:Ie??void 0,error:Se??void 0,complete:qe??void 0};else{let ce;this&&R.v.useDeprecatedNextContext?(ce=Object.create(Ie),ce.unsubscribe=()=>this.unsubscribe(),Ze={next:Ie.next&&Oe(Ie.next,ce),error:Ie.error&&Oe(Ie.error,ce),complete:Ie.complete&&Oe(Ie.complete,ce)}):Ze=Ie}this.destination=new De(Ze)}}function Ce(xe){R.v.useDeprecatedSynchronousErrorHandling?(0,q.O)(xe):(0,ie.h)(xe)}function yt(xe,Ie){const{onStoppedNotification:Se}=R.v;Se&&Z.z.setTimeout(()=>Se(xe,Ie))}const pt={closed:!0,next:de,error:function ye(xe){throw xe},complete:de}},727:(bt,Ne,U)=>{U.d(Ne,{Lc:()=>_e,w0:()=>de,Nn:()=>pe});var o=U(576);const R=(0,U(3888).d)(we=>function(q){we(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((J,He)=>`${He+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var ie=U(8737);class de{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const Oe of q)Oe.remove(this);else q.remove(this);const{initialTeardown:J}=this;if((0,o.m)(J))try{J()}catch(Oe){Z=Oe instanceof R?Oe.errors:[Oe]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Oe of He)try{ve(Oe)}catch(De){Z=Z??[],De instanceof R?Z=[...Z,...De.errors]:Z.push(De)}}if(Z)throw new R(Z)}}add(Z){var q;if(Z&&Z!==this)if(this.closed)ve(Z);else{if(Z instanceof de){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(Z)}}_hasParent(Z){const{_parentage:q}=this;return q===Z||Array.isArray(q)&&q.includes(Z)}_addParent(Z){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(Z),q):q?[q,Z]:Z}_removeParent(Z){const{_parentage:q}=this;q===Z?this._parentage=null:Array.isArray(q)&&(0,ie.P)(q,Z)}remove(Z){const{_finalizers:q}=this;q&&(0,ie.P)(q,Z),Z instanceof de&&Z._removeParent(this)}}de.EMPTY=(()=>{const we=new de;return we.closed=!0,we})();const _e=de.EMPTY;function pe(we){return we instanceof de||we&&"closed"in we&&(0,o.m)(we.remove)&&(0,o.m)(we.add)&&(0,o.m)(we.unsubscribe)}function ve(we){(0,o.m)(we)?we():we.unsubscribe()}},2416:(bt,Ne,U)=>{U.d(Ne,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Ne,U)=>{U.d(Ne,{E:()=>$});const $=new(U(9751).y)(de=>de.complete())},8996:(bt,Ne,U)=>{U.d(Ne,{D:()=>Ie});var o=U(8421),$=U(5363),R=U(9468),_e=U(9751),ve=U(2202),we=U(576),Z=U(9672);function J(Se,qe){if(!Se)throw new Error("Iterable cannot be null");return new _e.y(Ze=>{(0,Z.f)(Ze,qe,()=>{const ce=Se[Symbol.asyncIterator]();(0,Z.f)(Ze,qe,()=>{ce.next().then(Qe=>{Qe.done?Ze.complete():Ze.next(Qe.value)})},0,!0)})})}var He=U(3670),Oe=U(8239),De=U(1144),it=U(6495),Ce=U(2206),ye=U(4532),yt=U(3260);function Ie(Se,qe){return qe?function xe(Se,qe){if(null!=Se){if((0,He.c)(Se))return function ie(Se,qe){return(0,o.Xf)(Se).pipe((0,R.R)(qe),(0,$.Q)(qe))}(Se,qe);if((0,De.z)(Se))return function pe(Se,qe){return new _e.y(Ze=>{let ce=0;return qe.schedule(function(){ce===Se.length?Ze.complete():(Ze.next(Se[ce++]),Ze.closed||this.schedule())})})}(Se,qe);if((0,Oe.t)(Se))return function de(Se,qe){return(0,o.Xf)(Se).pipe((0,R.R)(qe),(0,$.Q)(qe))}(Se,qe);if((0,Ce.D)(Se))return J(Se,qe);if((0,it.T)(Se))return function q(Se,qe){return new _e.y(Ze=>{let ce;return(0,Z.f)(Ze,qe,()=>{ce=Se[ve.h](),(0,Z.f)(Ze,qe,()=>{let Qe,xt;try{({value:Qe,done:xt}=ce.next())}catch(gt){return void Ze.error(gt)}xt?Ze.complete():Ze.next(Qe)},0,!0)}),()=>(0,we.m)(ce?.return)&&ce.return()})}(Se,qe);if((0,yt.L)(Se))return function pt(Se,qe){return J((0,yt.Q)(Se),qe)}(Se,qe)}throw(0,ye.z)(Se)}(Se,qe):(0,o.Xf)(Se)}},8421:(bt,Ne,U)=>{U.d(Ne,{Xf:()=>He});var o=U(7582),$=U(1144),R=U(8239),ie=U(9751),de=U(3670),_e=U(2206),pe=U(4532),ve=U(6495),we=U(3260),Z=U(576),q=U(7849),J=U(8822);function He(xe){if(xe instanceof ie.y)return xe;if(null!=xe){if((0,de.c)(xe))return function Oe(xe){return new ie.y(Ie=>{const Se=xe[J.L]();if((0,Z.m)(Se.subscribe))return Se.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,$.z)(xe))return function De(xe){return new ie.y(Ie=>{for(let Se=0;Se<xe.length&&!Ie.closed;Se++)Ie.next(xe[Se]);Ie.complete()})}(xe);if((0,R.t)(xe))return function it(xe){return new ie.y(Ie=>{xe.then(Se=>{Ie.closed||(Ie.next(Se),Ie.complete())},Se=>Ie.error(Se)).then(null,q.h)})}(xe);if((0,_e.D)(xe))return ye(xe);if((0,ve.T)(xe))return function Ce(xe){return new ie.y(Ie=>{for(const Se of xe)if(Ie.next(Se),Ie.closed)return;Ie.complete()})}(xe);if((0,we.L)(xe))return function yt(xe){return ye((0,we.Q)(xe))}(xe)}throw(0,pe.z)(xe)}function ye(xe){return new ie.y(Ie=>{(function pt(xe,Ie){var Se,qe,Ze,ce;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Se=(0,o.KL)(xe);!(qe=yield Se.next()).done;)if(Ie.next(qe.value),Ie.closed)return}catch(Qe){Ze={error:Qe}}finally{try{qe&&!qe.done&&(ce=Se.return)&&(yield ce.call(Se))}finally{if(Ze)throw Ze.error}}Ie.complete()})})(xe,Ie).catch(Se=>Ie.error(Se))})}},6451:(bt,Ne,U)=>{U.d(Ne,{T:()=>_e});var o=U(8189),$=U(8421),R=U(515),ie=U(7669),de=U(8996);function _e(...pe){const ve=(0,ie.yG)(pe),we=(0,ie._6)(pe,1/0),Z=pe;return Z.length?1===Z.length?(0,$.Xf)(Z[0]):(0,o.J)(we)((0,de.D)(Z,ve)):R.E}},5403:(bt,Ne,U)=>{U.d(Ne,{x:()=>$});var o=U(2961);function $(ie,de,_e,pe,ve){return new R(ie,de,_e,pe,ve)}class R extends o.Lv{constructor(de,_e,pe,ve,we,Z){super(de),this.onFinalize=we,this.shouldUnsubscribe=Z,this._next=_e?function(q){try{_e(q)}catch(J){de.error(J)}}:super._next,this._error=ve?function(q){try{ve(q)}catch(J){de.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(q){de.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(bt,Ne,U)=>{U.d(Ne,{U:()=>R});var o=U(4482),$=U(5403);function R(ie,de){return(0,o.e)((_e,pe)=>{let ve=0;_e.subscribe((0,$.x)(pe,we=>{pe.next(ie.call(de,we,ve++))}))})}},8189:(bt,Ne,U)=>{U.d(Ne,{J:()=>R});var o=U(5577),$=U(4671);function R(ie=1/0){return(0,o.z)($.y,ie)}},5577:(bt,Ne,U)=>{U.d(Ne,{z:()=>ve});var o=U(4004),$=U(8421),R=U(4482),ie=U(9672),de=U(5403),pe=U(576);function ve(we,Z,q=1/0){return(0,pe.m)(Z)?ve((J,He)=>(0,o.U)((Oe,De)=>Z(J,Oe,He,De))((0,$.Xf)(we(J,He))),q):("number"==typeof Z&&(q=Z),(0,R.e)((J,He)=>function _e(we,Z,q,J,He,Oe,De,it){const Ce=[];let ye=0,yt=0,pt=!1;const xe=()=>{pt&&!Ce.length&&!ye&&Z.complete()},Ie=qe=>ye<J?Se(qe):Ce.push(qe),Se=qe=>{Oe&&Z.next(qe),ye++;let Ze=!1;(0,$.Xf)(q(qe,yt++)).subscribe((0,de.x)(Z,ce=>{He?.(ce),Oe?Ie(ce):Z.next(ce)},()=>{Ze=!0},void 0,()=>{if(Ze)try{for(ye--;Ce.length&&ye<J;){const ce=Ce.shift();De?(0,ie.f)(Z,De,()=>Se(ce)):Se(ce)}xe()}catch(ce){Z.error(ce)}}))};return we.subscribe((0,de.x)(Z,Ie,()=>{pt=!0,xe()})),()=>{it?.()}}(J,He,we,q)))}},5363:(bt,Ne,U)=>{U.d(Ne,{Q:()=>ie});var o=U(9672),$=U(4482),R=U(5403);function ie(de,_e=0){return(0,$.e)((pe,ve)=>{pe.subscribe((0,R.x)(ve,we=>(0,o.f)(ve,de,()=>ve.next(we),_e),()=>(0,o.f)(ve,de,()=>ve.complete(),_e),we=>(0,o.f)(ve,de,()=>ve.error(we),_e)))})}},3099:(bt,Ne,U)=>{U.d(Ne,{B:()=>de});var o=U(8421),$=U(7579),R=U(2961),ie=U(4482);function de(pe={}){const{connector:ve=(()=>new $.x),resetOnError:we=!0,resetOnComplete:Z=!0,resetOnRefCountZero:q=!0}=pe;return J=>{let He,Oe,De,it=0,Ce=!1,ye=!1;const yt=()=>{Oe?.unsubscribe(),Oe=void 0},pt=()=>{yt(),He=De=void 0,Ce=ye=!1},xe=()=>{const Ie=He;pt(),Ie?.unsubscribe()};return(0,ie.e)((Ie,Se)=>{it++,!ye&&!Ce&&yt();const qe=De=De??ve();Se.add(()=>{it--,0===it&&!ye&&!Ce&&(Oe=_e(xe,q))}),qe.subscribe(Se),!He&&it>0&&(He=new R.Hp({next:Ze=>qe.next(Ze),error:Ze=>{ye=!0,yt(),Oe=_e(pt,we,Ze),qe.error(Ze)},complete:()=>{Ce=!0,yt(),Oe=_e(pt,Z),qe.complete()}}),(0,o.Xf)(Ie).subscribe(He))})(J)}}function _e(pe,ve,...we){if(!0===ve)return void pe();if(!1===ve)return;const Z=new R.Hp({next:()=>{Z.unsubscribe(),pe()}});return ve(...we).subscribe(Z)}},9468:(bt,Ne,U)=>{U.d(Ne,{R:()=>$});var o=U(4482);function $(R,ie=0){return(0,o.e)((de,_e)=>{_e.add(R.schedule(()=>de.subscribe(_e),ie))})}},8505:(bt,Ne,U)=>{U.d(Ne,{b:()=>de});var o=U(576),$=U(4482),R=U(5403),ie=U(4671);function de(_e,pe,ve){const we=(0,o.m)(_e)||pe||ve?{next:_e,error:pe,complete:ve}:_e;return we?(0,$.e)((Z,q)=>{var J;null===(J=we.subscribe)||void 0===J||J.call(we);let He=!0;Z.subscribe((0,R.x)(q,Oe=>{var De;null===(De=we.next)||void 0===De||De.call(we,Oe),q.next(Oe)},()=>{var Oe;He=!1,null===(Oe=we.complete)||void 0===Oe||Oe.call(we),q.complete()},Oe=>{var De;He=!1,null===(De=we.error)||void 0===De||De.call(we,Oe),q.error(Oe)},()=>{var Oe,De;He&&(null===(Oe=we.unsubscribe)||void 0===Oe||Oe.call(we)),null===(De=we.finalize)||void 0===De||De.call(we)}))}):ie.y}},4408:(bt,Ne,U)=>{U.d(Ne,{o:()=>de});var o=U(727);class $ extends o.w0{constructor(pe,ve){super()}schedule(pe,ve=0){return this}}const R={setInterval(_e,pe,...ve){const{delegate:we}=R;return we?.setInterval?we.setInterval(_e,pe,...ve):setInterval(_e,pe,...ve)},clearInterval(_e){const{delegate:pe}=R;return(pe?.clearInterval||clearInterval)(_e)},delegate:void 0};var ie=U(8737);class de extends ${constructor(pe,ve){super(pe,ve),this.scheduler=pe,this.work=ve,this.pending=!1}schedule(pe,ve=0){var we;if(this.closed)return this;this.state=pe;const Z=this.id,q=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(q,Z,ve)),this.pending=!0,this.delay=ve,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(q,this.id,ve),this}requestAsyncId(pe,ve,we=0){return R.setInterval(pe.flush.bind(pe,this),we)}recycleAsyncId(pe,ve,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ve;null!=ve&&R.clearInterval(ve)}execute(pe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(pe,ve);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ve){let Z,we=!1;try{this.work(pe)}catch(q){we=!0,Z=q||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ve}=this,{actions:we}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(we,this),null!=pe&&(this.id=this.recycleAsyncId(ve,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Ne,U)=>{U.d(Ne,{v:()=>R});var o=U(6063);class ${constructor(de,_e=$.now){this.schedulerActionCtor=de,this.now=_e}schedule(de,_e=0,pe){return new this.schedulerActionCtor(this,de).schedule(pe,_e)}}$.now=o.l.now;class R extends ${constructor(de,_e=$.now){super(de,_e),this.actions=[],this._active=!1}flush(de){const{actions:_e}=this;if(this._active)return void _e.push(de);let pe;this._active=!0;do{if(pe=de.execute(de.state,de.delay))break}while(de=_e.shift());if(this._active=!1,pe){for(;de=_e.shift();)de.unsubscribe();throw pe}}}},4986:(bt,Ne,U)=>{U.d(Ne,{z:()=>R});var o=U(4408);const R=new(U(7565).v)(o.o)},6063:(bt,Ne,U)=>{U.d(Ne,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(bt,Ne,U)=>{U.d(Ne,{z:()=>o});const o={setTimeout($,R,...ie){const{delegate:de}=o;return de?.setTimeout?de.setTimeout($,R,...ie):setTimeout($,R,...ie)},clearTimeout($){const{delegate:R}=o;return(R?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(bt,Ne,U)=>{U.d(Ne,{h:()=>$});const $=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Ne,U)=>{U.d(Ne,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Ne,U)=>{U.d(Ne,{_6:()=>_e,jO:()=>ie,yG:()=>de});var o=U(576);function R(pe){return pe[pe.length-1]}function ie(pe){return(0,o.m)(R(pe))?pe.pop():void 0}function de(pe){return function $(pe){return pe&&(0,o.m)(pe.schedule)}(R(pe))?pe.pop():void 0}function _e(pe,ve){return"number"==typeof R(pe)?pe.pop():ve}},8737:(bt,Ne,U)=>{function o($,R){if($){const ie=$.indexOf(R);0<=ie&&$.splice(ie,1)}}U.d(Ne,{P:()=>o})},3888:(bt,Ne,U)=>{function o($){const ie=$(de=>{Error.call(de),de.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}U.d(Ne,{d:()=>o})},2806:(bt,Ne,U)=>{U.d(Ne,{O:()=>ie,x:()=>R});var o=U(2416);let $=null;function R(de){if(o.v.useDeprecatedSynchronousErrorHandling){const _e=!$;if(_e&&($={errorThrown:!1,error:null}),de(),_e){const{errorThrown:pe,error:ve}=$;if($=null,pe)throw ve}}else de()}function ie(de){o.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=de)}},9672:(bt,Ne,U)=>{function o($,R,ie,de=0,_e=!1){const pe=R.schedule(function(){ie(),_e?$.add(this.schedule(null,de)):this.unsubscribe()},de);if($.add(pe),!_e)return pe}U.d(Ne,{f:()=>o})},4671:(bt,Ne,U)=>{function o($){return $}U.d(Ne,{y:()=>o})},1144:(bt,Ne,U)=>{U.d(Ne,{z:()=>o});const o=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(bt,Ne,U)=>{U.d(Ne,{D:()=>$});var o=U(576);function $(R){return Symbol.asyncIterator&&(0,o.m)(R?.[Symbol.asyncIterator])}},576:(bt,Ne,U)=>{function o($){return"function"==typeof $}U.d(Ne,{m:()=>o})},3670:(bt,Ne,U)=>{U.d(Ne,{c:()=>R});var o=U(8822),$=U(576);function R(ie){return(0,$.m)(ie[o.L])}},6495:(bt,Ne,U)=>{U.d(Ne,{T:()=>R});var o=U(2202),$=U(576);function R(ie){return(0,$.m)(ie?.[o.h])}},8239:(bt,Ne,U)=>{U.d(Ne,{t:()=>$});var o=U(576);function $(R){return(0,o.m)(R?.then)}},3260:(bt,Ne,U)=>{U.d(Ne,{L:()=>ie,Q:()=>R});var o=U(7582),$=U(576);function R(de){return(0,o.FC)(this,arguments,function*(){const pe=de.getReader();try{for(;;){const{value:ve,done:we}=yield(0,o.qq)(pe.read());if(we)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(ve)}}finally{pe.releaseLock()}})}function ie(de){return(0,$.m)(de?.getReader)}},4482:(bt,Ne,U)=>{U.d(Ne,{A:()=>$,e:()=>R});var o=U(576);function $(ie){return(0,o.m)(ie?.lift)}function R(ie){return de=>{if($(de))return de.lift(function(_e){try{return ie(_e,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(bt,Ne,U)=>{U.d(Ne,{U:()=>R,z:()=>$});var o=U(4671);function $(...ie){return R(ie)}function R(ie){return 0===ie.length?o.y:1===ie.length?ie[0]:function(_e){return ie.reduce((pe,ve)=>ve(pe),_e)}}},7849:(bt,Ne,U)=>{U.d(Ne,{h:()=>R});var o=U(2416),$=U(3410);function R(ie){$.z.setTimeout(()=>{const{onUnhandledError:de}=o.v;if(!de)throw ie;de(ie)})}},4532:(bt,Ne,U)=>{function o($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ne,{z:()=>o})},4650:(bt,Ne,U)=>{U.d(Ne,{$8M:()=>Ud,$Z:()=>OC,AFp:()=>QE,ALo:()=>RE,AaK:()=>ve,AsE:()=>ip,BQk:()=>yl,CHM:()=>Xl,CRH:()=>Vm,CZH:()=>Hm,CqO:()=>Zc,D6c:()=>NS,EJc:()=>iS,EiD:()=>ty,EpF:()=>Qy,F4k:()=>Jy,FYo:()=>OD,FiY:()=>As,G48:()=>CO,GfV:()=>Ng,Gpc:()=>q,JOm:()=>wr,JVY:()=>Q_,KtG:()=>Nu,L6k:()=>Hw,LAX:()=>qw,LFG:()=>ar,LSH:()=>ny,Lbi:()=>tS,Lck:()=>px,MAs:()=>Xf,MMx:()=>cn,NdJ:()=>Xy,OlP:()=>yn,Oqu:()=>Bb,PXZ:()=>gO,Q6J:()=>Zy,QGY:()=>lm,QP$:()=>be,QbO:()=>nS,Qsj:()=>ND,R0b:()=>Fo,RDi:()=>sD,Rgc:()=>mp,SBq:()=>Pf,Sil:()=>oS,Suo:()=>$v,TTD:()=>Gl,TgZ:()=>Ky,Tol:()=>pm,Udp:()=>vh,VKq:()=>td,X6Q:()=>wO,XFs:()=>lt,Xpm:()=>On,Xts:()=>sC,Y36:()=>hu,YKP:()=>AE,YNc:()=>gb,Yjl:()=>F,Yz7:()=>Me,Z0I:()=>Pt,ZZ4:()=>p0,_Bn:()=>DE,_UZ:()=>Yy,_Vd:()=>Mf,_c5:()=>mI,_uU:()=>TA,aQg:()=>Wm,c2e:()=>rS,cJS:()=>Dt,cg1:()=>lp,d8E:()=>cv,dDg:()=>hO,dqk:()=>tn,eBb:()=>Gw,eFA:()=>gS,ekj:()=>fm,eoX:()=>zm,f3M:()=>yc,g9A:()=>XE,h0i:()=>yu,hGG:()=>OS,hij:()=>uv,iGM:()=>bp,ifc:()=>It,ip1:()=>YE,jDz:()=>bl,kL8:()=>vm,lG2:()=>H,lqb:()=>Lc,lri:()=>qm,mCW:()=>xg,n5z:()=>Wa,oAB:()=>yr,oJD:()=>pD,oxw:()=>vb,pB0:()=>Rc,q3G:()=>Fr,q4F:()=>au,qLn:()=>gi,qOj:()=>io,qZA:()=>um,qzn:()=>rh,rWj:()=>s0,sBO:()=>bO,sIi:()=>Yf,s_b:()=>Rm,soG:()=>e0,tb:()=>eI,tp0:()=>ea,uIk:()=>Hy,uOi:()=>Ao,vHH:()=>De,vpe:()=>va,wAp:()=>Ut,xi3:()=>gp,xp6:()=>lu,ynx:()=>_l,z2F:()=>u0,z3N:()=>ha,zSh:()=>iy,zs3:()=>Uc});var o=U(7579),$=U(727),R=U(9751),ie=U(6451),de=U(3099);function _e(s){for(let a in s)if(s[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function pe(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function we(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Z=_e({__forward_ref__:_e});function q(s){return s.__forward_ref__=q,s.toString=function(){return ve(this())},s}function J(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===q}class De extends Error{constructor(a,l){super(function it(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function Ce(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s,a){throw new De(-201,!1)}function se(s,a){null==s&&function te(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function Me(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Dt(s){return{providers:s.providers||[],imports:s.imports||[]}}function en(s){return rn(s,Sn)||rn(s,gr)}function Pt(s){return null!==en(s)}function rn(s,a){return s.hasOwnProperty(a)?s[a]:null}function Qn(s){return s&&(s.hasOwnProperty(Bn)||s.hasOwnProperty(wi))?s[Bn]:null}const Sn=_e({\u0275prov:_e}),Bn=_e({\u0275inj:_e}),gr=_e({ngInjectableDef:_e}),wi=_e({ngInjectorDef:_e});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let mr;function zn(s){const a=mr;return mr=s,a}function Ui(s,a,l){const d=en(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&lt.Optional?null:void 0!==a?a:void Ie(ve(s))}function Nn(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),It=(()=>{return(s=It||(It={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",It;var s})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),rr={},St=[],Zn=_e({\u0275cmp:_e}),Zt=_e({\u0275dir:_e}),os=_e({\u0275pipe:_e}),sn=_e({\u0275mod:_e}),jn=_e({\u0275fac:_e}),En=_e({__NG_ELEMENT_ID__:_e});let Xn=0;function On(s){return Nn(()=>{const l=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||It.Emulated,id:"c"+Xn++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,y=s.features;return h.inputs=G(s.inputs,d),h.outputs=G(s.outputs),y&&y.forEach(E=>E(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(er).filter(Ci):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(Y).filter(Ci):null,h})}function er(s){return N(s)||k(s)}function Ci(s){return null!==s}function yr(s){return Nn(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function G(s,a){if(null==s)return rr;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=d,a&&(a[h]=g)}return l}const H=On;function F(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function N(s){return s[Zn]||null}function k(s){return s[Zt]||null}function Y(s){return s[os]||null}function be(s){const a=N(s)||k(s)||Y(s);return null!==a&&a.standalone}function Ke(s,a){const l=s[sn]||null;if(!l&&!0===a)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return l}function Tr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Gr(s){return Array.isArray(s)&&!0===s[1]}function xa(s){return 0!=(8&s.flags)}function bs(s){return 2==(2&s.flags)}function Sa(s){return 1==(1&s.flags)}function bi(s){return null!==s.template}function Ma(s){return 0!=(256&s[2])}function po(s,a){return s.hasOwnProperty(jn)?s[jn]:null}class as{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Gl(){return xu}function xu(s){return s.type.prototype.ngOnChanges&&(s.setInput=ka),ql}function ql(){const s=zl(this),a=s?.current;if(a){const l=s.previous;if(l===rr)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function ka(s,a,l,d){const h=zl(s)||function Td(s,a){return s[Id]=a}(s,{previous:rr,current:null}),g=h.current||(h.current={}),y=h.previous,E=this.declaredInputs[l],I=y[E];g[E]=new as(I&&I.currentValue,a,y===rr),s[d]=a}Gl.ngInherit=!0;const Id="__ngSimpleChanges__";function zl(s){return s[Id]||null}function Dn(s){for(;Array.isArray(s);)s=s[0];return s}function go(s,a){return Dn(a[s])}function oi(s,a){return Dn(a[s.index])}function Kl(s,a){return s.data[a]}function $i(s,a){return s[a]}function Pr(s,a){const l=a[s];return Tr(l)?l:l[0]}function Mu(s){return 64==(64&s[2])}function Ei(s,a){return null==a?null:s[a]}function Dr(s){s[18]=0}function Ho(s,a){s[5]+=a;let l=s,d=s[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const kt={lFrame:Ua(null),bindingsEnabled:!0};function ku(){return kt.bindingsEnabled}function Pe(){return kt.lFrame.lView}function Xt(){return kt.lFrame.tView}function Xl(s){return kt.lFrame.contextLView=s,s[8]}function Nu(s){return kt.lFrame.contextLView=null,s}function Kn(){let s=Na();for(;null!==s&&64===s.type;)s=s.parent;return s}function Na(){return kt.lFrame.currentTNode}function Ii(s,a){const l=kt.lFrame;l.currentTNode=s,l.isParent=a}function Ra(){return kt.lFrame.isParent}function Ru(){kt.lFrame.isParent=!1}function ai(){const s=kt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function mo(){return kt.lFrame.bindingIndex++}function li(s){const a=kt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}function Md(s,a){const l=kt.lFrame;l.bindingIndex=l.bindingRootIndex=s,La(a)}function La(s){kt.lFrame.currentDirectiveIndex=s}function tc(s){const a=kt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Go(){return kt.lFrame.currentQueryIndex}function Xr(s){kt.lFrame.currentQueryIndex=s}function Lu(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function nc(s,a,l){if(l&lt.SkipSelf){let h=a,g=s;for(;!(h=h.parent,null!==h||l&lt.Host||(h=Lu(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;a=h,s=g}const d=kt.lFrame=Va();return d.currentTNode=a,d.lView=s,!0}function _o(s){const a=Va(),l=s[1];kt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Va(){const s=kt.lFrame,a=null===s?null:s.child;return null===a?Ua(s):a}function Ua(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function rc(){const s=kt.lFrame;return kt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Pd=rc;function Gs(){const s=rc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dn(){return kt.lFrame.selectedIndex}function yo(s){kt.lFrame.selectedIndex=s}function xn(){const s=kt.lFrame;return Kl(s.tView,s.selectedIndex)}function ja(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:P}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),x&&((s.viewHooks||(s.viewHooks=[])).push(l,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,x)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(l,P)}}function vo(s,a,l){ic(s,a,3,l)}function Bu(s,a,l,d){(3&s[2])===l&&ic(s,a,l,d)}function ju(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function ic(s,a,l,d){const g=d??-1,y=a.length-1;let E=0;for(let I=void 0!==d?65535&s[18]:0;I<y;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(s[18]+=65536),(E<g||-1==g)&&(af(s,l,a,I),s[18]=(4294901760&s[18])+I+2),I++}function af(s,a,l,d){const h=l[d]<0,g=l[d+1],E=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class qo{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function oc(s,a,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const g=l[d++],y=l[d++],E=l[d++];s.setAttribute(a,y,E,g)}else{const g=h,y=l[++d];Ld(g)?s.setProperty(a,g,y):s.setAttribute(a,g,y),d++}}return d}function Hu(s){return 3===s||4===s||6===s}function Ld(s){return 64===s.charCodeAt(0)}function Zo(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?l=h:0===l||lf(s,l,h,null,-1===l||2===l?a[++d]:null)}}return s}function lf(s,a,l,d,h){let g=0,y=s.length;if(-1===a)y=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===a){y=-1;break}if(E>a){y=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,a),g=y+1),s.splice(g++,0,l),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}function ac(s){return-1!==s}function $a(s){return 32767&s}function ls(s,a){let l=function cf(s){return s>>16}(s),d=a;for(;l>0;)d=d[15],l--;return d}let qs=!0;function ci(s){const a=qs;return qs=s,a}let Ha=0;const Gi={};function Wo(s,a){const l=Co(s,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,Ga(d.data,s),Ga(a,null),Ga(d.blueprint,null));const h=qa(s,a),g=s.injectorIndex;if(ac(h)){const y=$a(h),E=ls(h,a),I=E[1].data;for(let x=0;x<8;x++)a[g+x]=E[y+x]|I[y+x]}return a[g+8]=h,g}function Ga(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Co(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function qa(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=a;for(;null!==h;){if(d=dc(h),null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Zs(s,a,l){!function qu(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(En)&&(d=l[En]),null==d&&(d=l[En]=Ha++);const h=255&d;a.data[s+(h>>5)]|=1<<h}(s,a,l)}function lc(s,a,l){if(l&lt.Optional||void 0!==s)return s;Ie()}function df(s,a,l,d){if(l&lt.Optional&&void 0===d&&(d=null),0==(l&(lt.Self|lt.Host))){const h=s[9],g=zn(void 0);try{return h?h.get(a,d,l&lt.Optional):Ui(a,d,l&lt.Optional)}finally{zn(g)}}return lc(d,0,l)}function Ko(s,a,l,d=lt.Default,h){if(null!==s){if(1024&a[2]){const y=function cc(s,a,l,d,h){let g=s,y=a;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=Za(g,y,l,d|lt.Self,Gi);if(E!==Gi)return E;let I=g.parent;if(!I){const x=y[21];if(x){const P=x.get(l,Gi,d);if(P!==Gi)return P}I=dc(y),y=y[15]}g=I}return h}(s,a,l,d,Gi);if(y!==Gi)return y}const g=Za(s,a,l,d,Gi);if(g!==Gi)return g}return df(a,l,d,h)}function Za(s,a,l,d,h){const g=function dg(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(En)?s[En]:void 0;return"number"==typeof a?a>=0?255&a:ir:a}(l);if("function"==typeof g){if(!nc(a,s,d))return d&lt.Host?lc(h,0,d):df(a,l,d,h);try{const y=g(d);if(null!=y||d&lt.Optional)return y;Ie()}finally{Pd()}}else if("number"==typeof g){let y=null,E=Co(s,a),I=-1,x=d&lt.Host?a[16][6]:null;for((-1===E||d&lt.SkipSelf)&&(I=-1===E?qa(s,a):a[E+8],-1!==I&&Ks(d,!1)?(y=a[1],E=$a(I),a=ls(I,a)):E=-1);-1!==E;){const P=a[1];if(hf(g,E,P.data)){const B=Vd(E,a,l,y,d,x);if(B!==Gi)return B}I=a[E+8],-1!==I&&Ks(d,a[1].data[E+8]===x)&&hf(g,E,a)?(y=P,E=$a(I),a=ls(I,a)):E=-1}}return h}function Vd(s,a,l,d,h,g){const y=a[1],E=y.data[s+8],P=Yo(E,y,l,null==d?bs(E)&&qs:d!=y&&0!=(3&E.type),h&lt.Host&&g===E);return null!==P?Ws(a,y,P,E):Gi}function Yo(s,a,l,d,h){const g=s.providerIndexes,y=a.data,E=1048575&g,I=s.directiveStart,P=g>>20,K=h?E+P:s.directiveEnd;for(let ne=d?E:E+P;ne<K;ne++){const Te=y[ne];if(ne<I&&l===Te||ne>=I&&Te.type===l)return ne}if(h){const ne=y[I];if(ne&&bi(ne)&&ne.type===l)return I}return null}function Ws(s,a,l,d){let h=s[l];const g=a.data;if(function Nd(s){return s instanceof qo}(h)){const y=h;y.resolving&&function yt(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ce(s)}(g[l]));const E=ci(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?zn(y.injectImpl):null;nc(s,d,lt.Default);try{h=s[l]=y.factory(void 0,g,s,d),a.firstCreatePass&&l>=d.directiveStart&&function Ba(s,a,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(d){const y=xu(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],a)}finally{null!==I&&zn(I),ci(E),y.resolving=!1,Pd()}}return h}function hf(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function Ks(s,a){return!(s&lt.Self||s&lt.Host&&a)}class Qo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return Ko(this._tNode,this._lView,a,d,l)}}function ir(){return new Qo(Kn(),Pe())}function Wa(s){return Nn(()=>{const a=s.prototype.constructor,l=a[jn]||Ka(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[jn]||Ka(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Ka(s){return He(s)?()=>{const a=Ka(J(s));return a&&a()}:po(s)}function dc(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function Ud(s){return function za(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const g=l[h];if(Hu(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(g===a)return l[h+1];h+=2}}}return null}(Kn(),s)}const Fn="__parameters__";function Ti(s,a,l){return Nn(()=>{const d=function zu(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(a);function h(...g){if(this instanceof h)return d.apply(this,g),this;const y=new h(...g);return E.annotation=y,E;function E(I,x,P){const B=I.hasOwnProperty(Fn)?I[Fn]:Object.defineProperty(I,Fn,{value:[]})[Fn];for(;B.length<=P;)B.push(null);return(B[P]=B[P]||[]).push(y),I}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class yn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Me({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ar(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(a===s&&(a=s.slice(0,l)),Ar(d,a)):a!==s&&a.push(d)}return a}function qi(s,a){s.forEach(l=>Array.isArray(l)?qi(l,a):a(l))}function fc(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function Qa(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function di(s,a,l){let d=bo(s,a);return d>=0?s[1|d]=l:(d=~d,function pg(s,a,l,d){let h=s.length;if(h==a)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function Ju(s,a){const l=bo(s,a);if(l>=0)return s[1|l]}function bo(s,a){return function gc(s,a,l){let d=0,h=s.length>>l;for(;h!==d;){const g=d+(h-d>>1),y=s[g<<l];if(a===y)return g<<l;y>a?h=g:d=g+1}return~(h<<l)}(s,a,1)}const hi={},eu="__NG_DI_FLAG__",fi="ngTempTokenPath",Zd=/\n/gm,Ds="__source";let Gn;function ht(s){const a=Gn;return Gn=s,a}function tu(s,a=lt.Default){if(void 0===Gn)throw new De(-203,!1);return null===Gn?Ui(s,void 0,a):Gn.get(s,a&lt.Optional?null:void 0,a)}function ar(s,a=lt.Default){return(function Jn(){return mr}()||tu)(J(s),a)}function yc(s,a=lt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),ar(s,a)}function Xu(s){const a=[];for(let l=0;l<s.length;l++){const d=J(s[l]);if(Array.isArray(d)){if(0===d.length)throw new De(900,!1);let h,g=lt.Default;for(let y=0;y<d.length;y++){const E=d[y],I=Eo(E);"number"==typeof I?-1===I?h=E.token:g|=I:h=E}a.push(ar(h,g))}else a.push(ar(d))}return a}function Ys(s,a){return s[eu]=a,s.prototype[eu]=a,s}function Eo(s){return s[eu]}const As=Ys(Ti("Optional"),8),ea=Ys(Ti("SkipSelf"),4);var wr=(()=>((wr=wr||{})[wr.Important=1]="Important",wr[wr.DashCase=2]="DashCase",wr))();const S=new Map;let V=0;const Nr="__ngContext__";function hn(s,a){Tr(a)?(s[Nr]=a[20],function X(s){S.set(s[20],s)}(a)):s[Nr]=a}function Qd(s,a){return undefined(s,a)}function Xd(s){const a=s[3];return Gr(a)?a[3]:a}function kc(s){return p(s[13])}function w(s){return p(s[4])}function p(s){for(;null!==s&&!Gr(s);)s=s[4];return s}function b(s,a,l,d,h){if(null!=d){let g,y=!1;Gr(d)?g=d:Tr(d)&&(y=!0,d=d[0]);const E=Dn(d);0===s&&null!==l?null==h?ou(a,l,E):To(a,l,E,h||null,!0):1===s&&null!==l?To(a,l,E,h||null,!0):2===s?function Eg(s,a,l){const d=ul(s,a);d&&function th(s,a,l,d){s.removeChild(a,l,d)}(s,d,a,l)}(a,E,y):3===s&&a.destroyNode(E),null!=g&&function tD(s,a,l,d,h){const g=l[7];g!==Dn(l)&&b(a,s,d,g,h);for(let E=10;E<l.length;E++){const I=l[E];Ms(I[1],I,s,a,d,g)}}(a,s,g,l,h)}}function he(s,a,l){return s.createElement(a,l)}function ol(s,a){const l=s[9],d=l.indexOf(a),h=a[3];512&a[2]&&(a[2]&=-513,Ho(h,-1)),l.splice(d,1)}function Ef(s,a){if(s.length<=10)return;const l=10+a,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&ol(h,d),a>0&&(s[l-1][4]=d[4]);const g=Qa(s,10+a);!function Ge(s,a){Ms(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const y=g[19];null!==y&&y.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function al(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Ms(s,a,l,3,null,null),function un(s){let a=s[13];if(!a)return eh(s[1],s);for(;a;){let l=null;if(Tr(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==s;)Tr(a)&&eh(a[1],a),a=a[3];null===a&&(a=s),Tr(a)&&eh(a[1],a),l=a&&a[4]}a=l}}(a)}}function eh(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Oc(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=a[l[d]];if(!(h instanceof qo)){const g=l[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const E=h[g[y]],I=g[y+1];try{I.call(E)}finally{}}else try{g.call(h)}finally{}}}}(s,a),function If(s,a){const l=s.cleanup,d=a[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const y=l[g+1],E="function"==typeof y?y(a):Dn(a[y]),I=d[h=l[g+2]],x=l[g+3];"boolean"==typeof x?E.removeEventListener(l[g],I,x):x>=0?d[h=x]():d[h=-x].unsubscribe(),g+=2}else{const y=d[h=l[g+1]];l[g].call(y)}if(null!==d){for(let g=h+1;g<d.length;g++)(0,d[g])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&Gr(a[3])){l!==a[3]&&ol(l,a);const d=a[19];null!==d&&d.detachView(s)}!function Je(s){S.delete(s[20])}(a)}}function Tf(s,a,l){return function Cg(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===It.None||h===It.Emulated)return null}return oi(d,l)}(s,a.parent,l)}function To(s,a,l,d,h){s.insertBefore(a,l,d,h)}function ou(s,a,l){s.appendChild(a,l)}function Do(s,a,l,d,h){null!==d?To(s,a,l,d,h):ou(s,a,l)}function ul(s,a){return s.parentNode(a)}let Df,cl,Dg,JT=function $_(s,a,l){return 40&s.type?oi(s,l):null};function H_(s,a,l,d){const h=Tf(s,d,a),g=a[11],E=function Vw(s,a,l){return JT(s,a,l)}(d.parent||a[6],d,a);if(null!=h)if(Array.isArray(l))for(let I=0;I<l.length;I++)Do(g,h,l[I],E,!1);else Do(g,h,l,E,!1)}function bg(s,a){if(null!==a){const l=a.type;if(3&l)return oi(a,s);if(4&l)return q_(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return bg(s,d);{const h=s[a.index];return Gr(h)?q_(-1,h):Dn(h)}}if(32&l)return Qd(a,s)()||Dn(s[a.index]);{const d=G_(s,a);return null!==d?Array.isArray(d)?d[0]:bg(Xd(s[16]),d):bg(s,a.next)}}return null}function G_(s,a){return null!==a?s[16][6].projection[a.projection]:null}function q_(s,a){const l=10+s+1;if(l<a.length){const d=a[l],h=d[1].firstChild;if(null!==h)return bg(d,h)}return a[7]}function da(s,a,l,d,h,g,y){for(;null!=l;){const E=d[l.index],I=l.type;if(y&&0===a&&(E&&hn(Dn(E),d),l.flags|=4),64!=(64&l.flags))if(8&I)da(s,a,l.child,d,h,g,!1),b(a,s,h,E,g);else if(32&I){const x=Qd(l,d);let P;for(;P=x();)b(a,s,h,P,g);b(a,s,h,E,g)}else 16&I?Ig(s,a,d,l,h,g):b(a,s,h,E,g);l=y?l.projectionNext:l.next}}function Ms(s,a,l,d,h,g){da(l,d,s.firstChild,a,h,g,!1)}function Ig(s,a,l,d,h,g){const y=l[16],I=y[6].projection[d.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)b(a,s,h,I[x],g);else da(s,a,I,y[3],h,g,!0)}function z_(s,a,l){s.setAttribute(a,"style",l)}function Z_(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function ll(s){return function W_(){if(void 0===Df&&(Df=null,tn.trustedTypes))try{Df=tn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Df}()?.createHTML(s)||s}function sD(s){cl=s}function Af(){if(void 0===Dg&&(Dg=null,tn.trustedTypes))try{Dg=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Dg}function Y_(s){return Af()?.createHTML(s)||s}function nh(s){return Af()?.createScriptURL(s)||s}class Nc{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jw extends Nc{getTypeName(){return"HTML"}}class oD extends Nc{getTypeName(){return"Style"}}class Ag extends Nc{getTypeName(){return"Script"}}class $w extends Nc{getTypeName(){return"URL"}}class aD extends Nc{getTypeName(){return"ResourceURL"}}function ha(s){return s instanceof Nc?s.changingThisBreaksApplicationSecurity:s}function rh(s,a){const l=function ok(s){return s instanceof Nc&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Q_(s){return new jw(s)}function Hw(s){return new oD(s)}function Gw(s){return new Ag(s)}function qw(s){return new $w(s)}function Rc(s){return new aD(s)}class Zw{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(ll(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class uD{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ll(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=ll(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&a.removeAttribute(y)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const lD=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function xg(s){return(s=String(s)).match(lD)?s:"unsafe:"+s}function xi(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function ih(...s){const a={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const Kw=xi("area,br,col,hr,img,wbr"),J_=xi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Yw=xi("rp,rt"),X_=ih(Kw,ih(J_,xi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ih(Yw,xi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ih(Yw,J_)),Sg=xi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dD=ih(Sg,xi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Jw=xi("script,style,template");class hD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!X_.hasOwnProperty(l))return this.sanitizedSomething=!0,!Jw.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let h=0;h<d.length;h++){const g=d.item(h),y=g.name,E=y.toLowerCase();if(!dD.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let I=g.value;Sg[E]&&(I=xg(I)),this.buf.push(" ",y,'="',fD(I),'"')}return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();X_.hasOwnProperty(l)&&!Kw.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(fD(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const Xw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,eC=/([^\#-~ |!])/g;function fD(s){return s.replace(/&/g,"&amp;").replace(Xw,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(eC,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ey;function ty(s,a){let l=null;try{ey=ey||function zw(s){const a=new uD(s);return function Ww(){try{return!!(new window.DOMParser).parseFromString(ll(""),"text/html")}catch{return!1}}()?new Zw(a):a}(s);let d=a?String(a):"";l=ey.getInertBodyElement(d);let h=5,g=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=g,g=l.innerHTML,l=ey.getInertBodyElement(d)}while(d!==g);return ll((new hD).sanitizeChildren(xf(l)||l))}finally{if(l){const d=xf(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function xf(s){return"content"in s&&function uk(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function pD(s){const a=sh();return a?Y_(a.sanitize(Fr.HTML,s)||""):rh(s,"HTML")?Y_(ha(s)):ty(function Tg(){return void 0!==cl?cl:typeof document<"u"?document:void 0}(),Ce(s))}function ny(s){const a=sh();return a?a.sanitize(Fr.URL,s)||"":rh(s,"URL")?ha(s):xg(Ce(s))}function Ao(s){const a=sh();if(a)return nh(a.sanitize(Fr.RESOURCE_URL,s)||"");if(rh(s,"ResourceURL"))return nh(ha(s));throw new De(904,!1)}function sh(){const s=Pe();return s&&s[12]}const sC=new yn("ENVIRONMENT_INITIALIZER"),mD=new yn("INJECTOR",-1),_D=new yn("INJECTOR_DEF_TYPES");class yD{get(a,l=hi){if(l===hi){const d=new Error(`NullInjectorError: No provider for ${ve(a)}!`);throw d.name="NullInjectorError",d}return l}}function ck(...s){return{\u0275providers:ry(0,s)}}function ry(s,...a){const l=[],d=new Set;let h;return qi(a,g=>{const y=g;Mg(y,l,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&oh(h,l),l}function oh(s,a){for(let l=0;l<s.length;l++){const{providers:h}=s[l];qi(h,g=>{a.push(g)})}}function Mg(s,a,l,d){if(!(s=J(s)))return!1;let h=null,g=Qn(s);const y=!g&&N(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(g=Qn(I),!g)return!1;h=I}const E=d.has(h);if(y){if(E)return!1;if(d.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const x of I)Mg(x,a,l,d)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let x;d.add(h);try{qi(g.imports,P=>{Mg(P,a,l,d)&&(x||(x=[]),x.push(P))})}finally{}void 0!==x&&oh(x,a)}if(!E){const x=po(h)||(()=>new h);a.push({provide:h,useFactory:x,deps:St},{provide:_D,useValue:h,multi:!0},{provide:sC,useValue:()=>ar(h),multi:!0})}const I=g.providers;null==I||E||qi(I,P=>{a.push(P)})}}return h!==s&&void 0!==s.providers}const dk=_e({provide:String,useValue:_e});function Pg(s){return null!==s&&"object"==typeof s&&dk in s}function Fc(s){return"function"==typeof s}const iy=new yn("Set Injector scope."),kg={},wD={};let sy;function Og(){return void 0===sy&&(sy=new yD),sy}class Lc{}class CD extends Lc{constructor(a,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ay(a,y=>this.processProvider(y)),this.records.set(mD,ah(void 0,this)),h.has("environment")&&this.records.set(Lc,ah(void 0,this));const g=this.records.get(iy);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(_D.multi,St,lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=ht(this),d=zn(void 0);try{return a()}finally{ht(l),zn(d)}}get(a,l=hi,d=lt.Default){this.assertNotDestroyed();const h=ht(this),g=zn(void 0);try{if(!(d&lt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function DD(s){return"function"==typeof s||"object"==typeof s&&s instanceof yn}(a)&&en(a);E=I&&this.injectableDefInScope(I)?ah(oy(a),kg):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&lt.Self?Og():this.parent).get(a,l=d&lt.Optional&&l===hi?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[fi]=y[fi]||[]).unshift(ve(a)),h)throw y;return function kr(s,a,l,d){const h=s[fi];throw a[Ds]&&h.unshift(a[Ds]),s.message=function _g(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ve(a);if(Array.isArray(a))h=a.map(ve).join(" -> ");else if("object"==typeof a){let g=[];for(let y in a)if(a.hasOwnProperty(y)){let E=a[y];g.push(y+":"+("string"==typeof E?JSON.stringify(E):ve(E)))}h=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(Zd,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[fi]=null,s}(y,a,"R3InjectorError",this.source)}throw y}finally{zn(g),ht(h)}}resolveInjectorInitializers(){const a=ht(this),l=zn(void 0);try{const d=this.get(sC.multi,St,lt.Self);for(const h of d)h()}finally{ht(a),zn(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(ve(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(a){let l=Fc(a=J(a))?a:J(a&&a.provide);const d=function ED(s){return Pg(s)?ah(void 0,s.useValue):ah(lC(s),kg)}(a);if(Fc(a)||!0!==a.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=ah(void 0,kg,!0),h.factory=()=>Xu(h.multi),this.records.set(l,h)),l=a,h.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===kg&&(l.value=wD,l.value=l.factory()),"object"==typeof l.value&&l.value&&function TD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=J(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function oy(s){const a=en(s),l=null!==a?a.factory:po(s);if(null!==l)return l;if(s instanceof yn)throw new De(204,!1);if(s instanceof Function)return function bD(s){const a=s.length;if(a>0)throw function Qu(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}(a,"?"),new De(204,!1);const l=function kn(s){const a=s&&(s[Sn]||s[gr]);if(a){const l=function pn(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new De(204,!1)}function lC(s,a,l){let d;if(Fc(s)){const h=J(s);return po(h)||oy(h)}if(Pg(s))d=()=>J(s.useValue);else if(function uC(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Xu(s.deps||[]));else if(function aC(s){return!(!s||!s.useExisting)}(s))d=()=>ar(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function ID(s){return!!s.deps}(s))return po(h)||oy(h);d=()=>new h(...Xu(s.deps))}return d}function ah(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function AD(s){return!!s.\u0275providers}function ay(s,a){for(const l of s)Array.isArray(l)?ay(l,a):AD(l)?ay(l.\u0275providers,a):a(l)}class cC{}class MD{resolveComponentFactory(a){throw function SD(s){const a=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let Mf=(()=>{class s{}return s.NULL=new MD,s})();function PD(){return uh(Kn(),Pe())}function uh(s,a){return new Pf(oi(s,a))}let Pf=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=PD,s})();function kD(s){return s instanceof Pf?s.nativeElement:s}class OD{}let ND=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function RD(){const s=Pe(),l=Pr(Kn().index,s);return(Tr(l)?l:s)[11]}(),s})(),FD=(()=>{class s{}return s.\u0275prov=Me({token:s,providedIn:"root",factory:()=>null}),s})();class Ng{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const au=new Ng("14.3.0"),Rg={};function Of(s){return s.ngOriginalError}class gi{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Of(a);for(;l&&Of(l);)l=Of(l);return l||null}}function fa(s){return s instanceof Function?s():s}function hy(s,a,l){let d=s.length;for(;;){const h=s.indexOf(a,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=a.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}l=h+1}}const mC="ng-template";function _C(s,a,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==hy(h.toLowerCase(),a,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function yC(s){return 4===s.type&&s.value!==mC}function fy(s,a,l){return a===(4!==s.type||l?s.value:mC)}function Fg(s,a,l){let d=4;const h=s.attrs||[],g=function uu(s){for(let a=0;a<s.length;a++)if(Hu(s[a]))return a;return s.length}(h);let y=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!y)if(4&d){if(d=2|1&d,""!==I&&!fy(s,I,l)||""===I&&1===a.length){if(fs(d))return!1;y=!0}}else{const x=8&d?I:a[++E];if(8&d&&null!==s.attrs){if(!_C(s.attrs,x,l)){if(fs(d))return!1;y=!0}continue}const B=Lg(8&d?"class":I,h,yC(s),l);if(-1===B){if(fs(d))return!1;y=!0;continue}if(""!==x){let K;K=B>g?"":h[B+1].toLowerCase();const ne=8&d?K:null;if(ne&&-1!==hy(ne,x,0)||2&d&&x!==K){if(fs(d))return!1;y=!0}}}}else{if(!y&&!fs(d)&&!fs(I))return!1;if(y&&fs(I))continue;y=!1,d=I|1&d}}return fs(d)||y}function fs(s){return 0==(1&s)}function Lg(s,a,l,d){if(null===a)return-1;let h=0;if(d||!l){let g=!1;for(;h<a.length;){const y=a[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let E=a[++h];for(;"string"==typeof E;)E=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function my(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function py(s,a,l=!1){for(let d=0;d<a.length;d++)if(Fg(s,a[d],l))return!0;return!1}function vC(s,a){return s?":not("+a.trim()+")":a}function Nf(s){let a=s[0],l=1,d=2,h="",g=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&d){const E=s[++l];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!fs(y)&&(a+=vC(g,h),h=""),d=y,g=g||!fs(d);l++}return""!==h&&(a+=vC(g,h)),a}const Wt={};function lu(s){_y(Xt(),Pe(),dn()+s,!1)}function _y(s,a,l,d){if(!d)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&vo(a,g,l)}else{const g=s.preOrderHooks;null!==g&&Bu(a,g,0,l)}yo(l)}function bC(s,a=null,l=null,d){const h=Bg(s,a,l,d);return h.resolveInjectorInitializers(),h}function Bg(s,a=null,l=null,d,h=new Set){const g=[l||St,ck(s)];return d=d||("object"==typeof s?void 0:ve(s)),new CD(g,a||Og(),d||null,h)}let Uc=(()=>{class s{static create(l,d){if(Array.isArray(l))return bC({name:""},d,l,"");{const h=l.name??"";return bC({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=hi,s.NULL=new yD,s.\u0275prov=Me({token:s,providedIn:"any",factory:()=>ar(mD)}),s.__NG_ELEMENT_ID__=-1,s})();function hu(s,a=lt.Default){const l=Pe();return null===l?ar(s,a):Ko(Kn(),l,J(s),a)}function OC(){throw new Error("invalid")}function Hg(s,a){return s<<17|a<<2}function xo(s){return s>>17&32767}function Ay(s){return 2|s}function eo(s){return(131068&s)>>2}function Lf(s,a){return-131069&s|a<<2}function xy(s){return 1|s}function Ps(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],g=l[d+1];if(-1!==g){const y=s.data[g];Xr(h),y.contentQueries(2,a[g],g)}}}function Zg(s,a,l,d,h,g,y,E,I,x,P){const B=a.blueprint.slice();return B[0]=h,B[2]=76|d,(null!==P||s&&1024&s[2])&&(B[2]|=1024),Dr(B),B[3]=B[15]=s,B[8]=l,B[10]=y||s&&s[10],B[11]=E||s&&s[11],B[12]=I||s&&s[12]||null,B[9]=x||s&&s[9]||null,B[6]=g,B[20]=function W(){return V++}(),B[21]=P,B[16]=2==a.type?s[16]:B,B}function Bc(s,a,l,d,h){let g=s.data[a];if(null===g)g=function Ry(s,a,l,d,h){const g=Na(),y=Ra(),I=s.data[a]=function YC(s,a,l,d,h,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,l,a,d,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,a,l,d,h),function Fa(){return kt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=h;const y=function Hs(){const s=kt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Ii(g,!0),g}function jc(s,a,l,d){if(0===l)return-1;const h=a.length;for(let g=0;g<l;g++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function hh(s,a,l){_o(a);try{const d=s.viewQuery;null!==d&&Cr(1,d,l);const h=s.template;null!==h&&ZC(s,a,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ps(s,a),s.staticViewQueries&&Cr(2,s.viewQuery,l);const g=s.components;null!==g&&function eA(s,a){for(let l=0;l<a.length;l++)qf(s,a[l])}(a,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,Gs()}}function Wg(s,a,l,d){const h=a[2];if(128!=(128&h)){_o(a);try{Dr(a),function ui(s){return kt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&ZC(s,a,l,2,d);const y=3==(3&h);if(y){const x=s.preOrderCheckHooks;null!==x&&vo(a,x,null)}else{const x=s.preOrderHooks;null!==x&&Bu(a,x,0,null),ju(a,0)}if(function rb(s){for(let a=kc(s);null!==a;a=w(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const h=l[d],g=h[3];0==(512&h[2])&&Ho(g,1),h[2]|=512}}}(a),function Uy(s){for(let a=kc(s);null!==a;a=w(a))for(let l=10;l<a.length;l++){const d=a[l],h=d[1];Mu(d)&&Wg(h,d,h.template,d[8])}}(a),null!==s.contentQueries&&Ps(s,a),y){const x=s.contentCheckHooks;null!==x&&vo(a,x)}else{const x=s.contentHooks;null!==x&&Bu(a,x,1),ju(a,1)}!function zC(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)yo(~h);else{const g=h,y=l[++d],E=l[++d];Md(y,g),E(2,a[g])}}}finally{yo(-1)}}(s,a);const E=s.components;null!==E&&function dh(s,a){for(let l=0;l<a.length;l++)uA(s,a[l])}(a,E);const I=s.viewQuery;if(null!==I&&Cr(2,I,d),y){const x=s.viewCheckHooks;null!==x&&vo(a,x)}else{const x=s.viewHooks;null!==x&&Bu(a,x,2),ju(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Ho(a[3],-1))}finally{Gs()}}}function ZC(s,a,l,d,h){const g=dn(),y=2&d;try{yo(-1),y&&a.length>22&&_y(s,a,22,!1),l(d,h)}finally{yo(g)}}function Kg(s,a,l){if(xa(a)){const h=a.directiveEnd;for(let g=a.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,l[g],g)}}}function Fy(s,a,l){!ku()||(function sA(s,a,l,d){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||Wo(l,a),hn(d,a);const y=l.initialInputs;for(let E=h;E<g;E++){const I=s.data[E],x=bi(I);x&&Hf(a,l,I);const P=Ws(a,s,E,l);hn(P,a),null!==y&&aA(0,E-h,P,I,0,y),x&&(Pr(l.index,a)[8]=P)}}(s,a,l,oi(l,a)),128==(128&l.flags)&&function Pk(s,a,l){const d=l.directiveStart,h=l.directiveEnd,g=l.index,y=function Fu(){return kt.lFrame.currentDirectiveIndex}();try{yo(g);for(let E=d;E<h;E++){const I=s.data[E],x=a[E];La(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&oA(I,x)}}finally{yo(-1),La(y)}}(s,a,l))}function Yg(s,a,l=oi){const d=a.localNames;if(null!==d){let h=a.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],E=-1===y?l(a,s):s[y];s[h++]=E}}}function WC(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Ly(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Ly(s,a,l,d,h,g,y,E,I,x){const P=22+d,B=P+h,K=function tA(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Wt);return l}(P,B),ne="function"==typeof x?x():x;return K[1]={type:s,blueprint:K,template:l,queries:null,viewQuery:E,declTNode:a,data:K.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function jf(s,a,l,d){const h=Zf(a);null===l?h.push(d):(h.push(l),s.firstCreatePass&&no(s).push(d,h.length-1))}function QC(s,a,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,h):l[d]=[a,h]}return l}function Vy(s,a){const d=a.directiveEnd,h=s.data,g=a.attrs,y=[];let E=null,I=null;for(let x=a.directiveStart;x<d;x++){const P=h[x],B=P.inputs,K=null===g||yC(a)?null:tb(B,g);y.push(K),E=QC(B,x,E),I=QC(P.outputs,x,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=E,a.outputs=I}function ks(s,a,l,d,h,g,y,E){const I=oi(a,l);let P,x=a.inputs;!E&&null!=x&&(P=x[d])?(nm(s,l,P,d,h),bs(a)&&JC(l,a.index)):3&a.type&&(d=function nA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,a.value||"",d):h,g.setProperty(I,d,h))}function JC(s,a){const l=Pr(a,s);16&l[2]||(l[2]|=32)}function Qg(s,a,l,d){let h=!1;if(ku()){const g=function kk(s,a,l){const d=s.directiveRegistry;let h=null;if(d)for(let g=0;g<d.length;g++){const y=d[g];py(l,y.selectors,!1)&&(h||(h=[]),Zs(Wo(l,a),s,y.type),bi(y)?(Ct(s,l),h.unshift(y)):h.push(y))}return h}(s,a,l),y=null===d?null:{"":-1};if(null!==g){h=!0,eb(l,s.data.length,g.length);for(let P=0;P<g.length;P++){const B=g[P];B.providersResolver&&B.providersResolver(B)}let E=!1,I=!1,x=jc(s,a,g.length,null);for(let P=0;P<g.length;P++){const B=g[P];l.mergedAttrs=Zo(l.mergedAttrs,B.hostAttrs),$f(s,l,a,x,B),Mo(x,B,y),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const K=B.type.prototype;!E&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!I&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),x++}Vy(s,l)}y&&function Si(s,a,l){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const g=l[a[h+1]];if(null==g)throw new De(-301,!1);d.push(a[h],g)}}}(l,d,y)}return l.mergedAttrs=Zo(l.mergedAttrs,l.attrs),h}function Jg(s,a,l,d,h,g){const y=g.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const I=~a.index;(function XC(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(d,h,y)}}function oA(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Ct(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function Mo(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;bi(a)&&(l[""]=s)}}function eb(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function $f(s,a,l,d,h){s.data[d]=h;const g=h.factory||(h.factory=po(h.type)),y=new qo(g,bi(h),hu);s.blueprint[d]=y,l[d]=y,Jg(s,a,0,d,jc(s,l,h.hostVars,Wt),h)}function Hf(s,a,l){const d=oi(a,s),h=WC(l),g=s[10],y=zf(s,Zg(s,h,null,l.onPush?32:16,d,a,g,g.createRenderer(d,l),null,null,null));s[a.index]=y}function ga(s,a,l,d,h,g){const y=oi(s,a);!function Xg(s,a,l,d,h,g,y){if(null==g)s.removeAttribute(a,h,l);else{const E=null==y?Ce(g):y(g,d||"",h);s.setAttribute(a,h,E,l)}}(a[11],y,g,s.value,l,d,h)}function aA(s,a,l,d,h,g){const y=g[a];if(null!==y){const E=d.setInput;for(let I=0;I<y.length;){const x=y[I++],P=y[I++],B=y[I++];null!==E?d.setInput(l,B,x,P):l[P]=B}}}function tb(s,a){let l=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],a[d+1])),d+=2}else d+=2;else d+=4}return l}function nb(s,a,l,d){return new Array(s,!0,!1,a,null,0,d,l,null,null)}function uA(s,a){const l=Pr(a,s);if(Mu(l)){const d=l[1];48&l[2]?Wg(d,l,d.template,l[8]):l[5]>0&&Gf(l)}}function Gf(s){for(let d=kc(s);null!==d;d=w(d))for(let h=10;h<d.length;h++){const g=d[h];if(Mu(g))if(512&g[2]){const y=g[1];Wg(y,g,y.template,g[8])}else g[5]>0&&Gf(g)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=Pr(l[d],s);Mu(h)&&h[5]>0&&Gf(h)}}function qf(s,a){const l=Pr(a,s),d=l[1];(function $c(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(d,l),hh(d,l,l[8])}function zf(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function ti(s){for(;s;){s[2]|=32;const a=Xd(s);if(Ma(s)&&!a)return s;s=a}return null}function fh(s,a,l,d=!0){const h=a[10];h.begin&&h.begin();try{Wg(s,a,s.template,l)}catch(y){throw d&&Wf(a,y),y}finally{h.end&&h.end()}}function Cr(s,a,l){Xr(0),a(s,l)}function Zf(s){return s[7]||(s[7]=[])}function no(s){return s.cleanup||(s.cleanup=[])}function Wf(s,a){const l=s[9],d=l?l.get(gi,null):null;d&&d.handleError(a)}function nm(s,a,l,d,h){for(let g=0;g<l.length;){const y=l[g++],E=l[g++],I=a[y],x=s.data[y];null!==x.setInput?x.setInput(I,h,d,E):I[E]=h}}function fu(s,a,l){const d=go(a,s);!function O(s,a,l){s.setValue(a,l)}(s[11],d,l)}function ro(s,a,l){let d=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==a)for(let y=0;y<a.length;y++){const E=a[y];"number"==typeof E?g=E:1==g?h=we(h,E):2==g&&(d=we(d,E+": "+a[++y]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function ma(s,a,l,d,h=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(Dn(g)),Gr(g))for(let E=10;E<g.length;E++){const I=g[E],x=I[1].firstChild;null!==x&&ma(I[1],I,x,d)}const y=l.type;if(8&y)ma(s,a,l.child,d);else if(32&y){const E=Qd(l,a);let I;for(;I=E();)d.push(I)}else if(16&y){const E=G_(a,l);if(Array.isArray(E))d.push(...E);else{const I=Xd(a[16]);ma(I[1],I,E,d,!0)}}l=h?l.projectionNext:l.next}return d}class Lr{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return ma(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Gr(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(Ef(a,d),Qa(l,d))}this._attachedToViewContainer=!1}al(this._lView[1],this._lView)}onDestroy(a){jf(this._lView[1],this._lView,null,a)}markForCheck(){ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){fh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vt(s,a){Ms(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=a}}class hl extends Lr{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;fh(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class By extends Mf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=N(a);return new Kf(l,this.ngModule)}}function ph(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class ib{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){const h=this.injector.get(a,Rg,d);return h!==Rg||l===Rg?h:this.parentInjector.get(a,l,d)}}class Kf extends cC{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function wC(s){return s.map(Nf).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return ph(this.componentDef.inputs)}get outputs(){return ph(this.componentDef.outputs)}create(a,l,d,h){let g=(h=h||this.ngModule)instanceof Lc?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new ib(a,g):a,E=y.get(OD,null);if(null===E)throw new De(407,!1);const I=y.get(FD,null),x=E.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",B=d?function KC(s,a,l){return s.selectRootElement(a,l===It.ShadowDom)}(x,d,this.componentDef.encapsulation):he(x,P,function jy(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(P)),K=this.componentDef.onPush?288:272,ne=Ly(0,null,null,1,0,null,null,null,null,null),Te=Zg(null,ne,null,K,null,null,E,x,I,y,null);let $e,Xe;_o(Te);try{const _t=function dA(s,a,l,d,h,g){const y=l[1];l[22]=s;const I=Bc(y,22,2,"#host",null),x=I.mergedAttrs=a.hostAttrs;null!==x&&(ro(I,x,!0),null!==s&&(oc(h,s,x),null!==I.classes&&Z_(h,s,I.classes),null!==I.styles&&z_(h,s,I.styles)));const P=d.createRenderer(s,a),B=Zg(l,WC(a),null,a.onPush?32:16,l[22],I,d,P,g||null,null,null);return y.firstCreatePass&&(Zs(Wo(I,l),y,a.type),Ct(y,I),eb(I,l.length,1)),zf(l,B),l[22]=B}(B,this.componentDef,Te,E,x);if(B)if(d)oc(x,B,["ng-version",au.full]);else{const{attrs:Ot,classes:Fe}=function BD(s){const a=[],l=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&a.push(g,s[++d]):8===h&&l.push(g);else{if(!fs(h))break;h=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Ot&&oc(x,B,Ot),Fe&&Fe.length>0&&Z_(x,B,Fe.join(" "))}if(Xe=Kl(ne,22),void 0!==l){const Ot=Xe.projection=[];for(let Fe=0;Fe<this.ngContentSelectors.length;Fe++){const wt=l[Fe];Ot.push(null!=wt?Array.from(wt):null)}}$e=function gh(s,a,l,d){const h=l[1],g=function iA(s,a,l){const d=Kn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),$f(s,d,a,jc(s,a,1,null),l),Vy(s,d));const h=Ws(a,s,d.directiveStart,d);hn(h,a);const g=oi(d,a);return g&&hn(g,a),h}(h,l,a);if(s[8]=l[8]=g,null!==d)for(const E of d)E(g,a);if(a.contentQueries){const E=Kn();a.contentQueries(1,g,E.directiveStart)}const y=Kn();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(yo(y.index),Jg(l[1],y,0,y.directiveStart,y.directiveEnd,a),oA(a,g)),g}(_t,this.componentDef,Te,[hA]),hh(ne,Te,null)}finally{Gs()}return new ln(this.componentType,$e,uh(Xe,Te),Te,Xe)}}class ln extends class xD{}{constructor(a,l,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new hl(h),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){const g=this._rootLView;nm(g[1],g,h,a,l),JC(g,this._tNode.index)}}get injector(){return new Qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function hA(){const s=Kn();ja(Pe()[1],s)}function io(s){let a=function sb(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let h;if(bi(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new De(903,!1);h=a.\u0275dir}if(h){if(l){d.push(h);const y=s;y.inputs=im(s.inputs),y.declaredInputs=im(s.declaredInputs),y.outputs=im(s.outputs);const E=h.hostBindings;E&&mi(s,E);const I=h.viewQuery,x=h.contentQueries;if(I&&ab(s,I),x&&Ok(s,x),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),bi(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const E=g[y];E&&E.ngInherit&&E(s),E===io&&(l=!1)}}a=Object.getPrototypeOf(a)}!function ob(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=Zo(h.hostAttrs,l=Zo(l,h.hostAttrs))}}(d)}function im(s){return s===rr?{}:s===St?[]:s}function ab(s,a){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{a(d,h),l(d,h)}:a}function Ok(s,a){const l=s.contentQueries;s.contentQueries=l?(d,h,g)=>{a(d,h,g),l(d,h,g)}:a}function mi(s,a){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{a(d,h),l(d,h)}:a}let sm=null;function pl(){if(!sm){const s=tn.Symbol;if(s&&s.iterator)sm=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(sm=d)}}}return sm}function Yf(s){return!!om(s)&&(Array.isArray(s)||!(s instanceof Map)&&pl()in s)}function om(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Os(s,a,l){return s[a]=l}function Rt(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function ko(s,a,l,d){const h=Rt(s,a,l);return Rt(s,a+1,d)||h}function Hy(s,a,l,d){const h=Pe();return Rt(h,mo(),a)&&(Xt(),ga(xn(),h,s,a,l,d)),Hy}function mh(s,a,l,d,h,g){const E=ko(s,function qr(){return kt.lFrame.bindingIndex}(),l,h);return li(2),E?a+Ce(l)+d+Ce(h)+g:Wt}function gb(s,a,l,d,h,g,y,E){const I=Pe(),x=Xt(),P=s+22,B=x.firstCreatePass?function _A(s,a,l,d,h,g,y,E,I){const x=a.consts,P=Bc(a,s,4,y||null,Ei(x,E));Qg(a,l,P,Ei(x,I)),ja(a,P);const B=P.tViews=Ly(2,P,d,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,x);return null!==a.queries&&(a.queries.template(a,P),B.queries=a.queries.embeddedTView(P)),P}(P,x,I,a,l,d,h,g,y):x.data[P];Ii(B,!1);const K=I[11].createComment("");H_(x,I,K,B),hn(K,I),zf(I,I[P]=nb(K,I,K,B)),Sa(B)&&Fy(x,I,B),null!=y&&Yg(I,B,E)}function Xf(s){return $i(function Rn(){return kt.lFrame.contextLView}(),22+s)}function Zy(s,a,l){const d=Pe();return Rt(d,mo(),a)&&ks(Xt(),xn(),d,s,a,d[11],l,!1),Zy}function mu(s,a,l,d,h){const y=h?"class":"style";nm(s,l,a.inputs[y],y,d)}function Ky(s,a,l,d){const h=Pe(),g=Xt(),y=22+s,E=h[11],I=h[y]=he(E,a,function Od(){return kt.lFrame.currentNamespace}()),x=g.firstCreatePass?function Wy(s,a,l,d,h,g,y){const E=a.consts,x=Bc(a,s,2,h,Ei(E,g));return Qg(a,l,x,Ei(E,y)),null!==x.attrs&&ro(x,x.attrs,!1),null!==x.mergedAttrs&&ro(x,x.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,x),x}(y,g,h,0,a,l,d):g.data[y];Ii(x,!0);const P=x.mergedAttrs;null!==P&&oc(E,I,P);const B=x.classes;null!==B&&Z_(E,I,B);const K=x.styles;return null!==K&&z_(E,I,K),64!=(64&x.flags)&&H_(g,h,I,x),0===function Jl(){return kt.lFrame.elementDepthCount}()&&hn(I,h),function Ad(){kt.lFrame.elementDepthCount++}(),Sa(x)&&(Fy(g,h,x),Kg(g,x,h)),null!==d&&Yg(h,x),Ky}function um(){let s=Kn();Ra()?Ru():(s=s.parent,Ii(s,!1));const a=s;!function rf(){kt.lFrame.elementDepthCount--}();const l=Xt();return l.firstCreatePass&&(ja(l,s),xa(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Fd(s){return 0!=(16&s.flags)}(a)&&mu(l,a,Pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function uf(s){return 0!=(32&s.flags)}(a)&&mu(l,a,Pe(),a.stylesWithoutHost,!1),um}function Yy(s,a,l,d){return Ky(s,a,l,d),um(),Yy}function _l(s,a,l){const d=Pe(),h=Xt(),g=s+22,y=h.firstCreatePass?function yA(s,a,l,d,h){const g=a.consts,y=Ei(g,d),E=Bc(a,s,8,"ng-container",y);return null!==y&&ro(E,y,!0),Qg(a,l,E,Ei(g,h)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,h,d,a,l):h.data[g];Ii(y,!0);const E=d[g]=d[11].createComment("");return H_(h,d,E,y),hn(E,d),Sa(y)&&(Fy(h,d,y),Kg(h,y,d)),null!=l&&Yg(d,y),_l}function yl(){let s=Kn();const a=Xt();return Ra()?Ru():(s=s.parent,Ii(s,!1)),a.firstCreatePass&&(ja(a,s),xa(s)&&a.queries.elementEnd(s)),yl}function Qy(){return Pe()}function lm(s){return!!s&&"function"==typeof s.then}function Jy(s){return!!s&&"function"==typeof s.subscribe}const Zc=Jy;function Xy(s,a,l,d){const h=Pe(),g=Xt(),y=Kn();return function yb(s,a,l,d,h,g,y,E){const I=Sa(d),P=s.firstCreatePass&&no(s),B=a[8],K=Zf(a);let ne=!0;if(3&d.type||E){const Xe=oi(d,a),_t=E?E(Xe):Xe,Ot=K.length,Fe=E?bn=>E(Dn(bn[d.index])):d.index;let wt=null;if(!E&&I&&(wt=function _b(s,a,l,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===l&&h[g+1]===d){const E=a[7],I=h[g+2];return E.length>I?E[I]:null}"string"==typeof y&&(g+=2)}return null}(s,a,h,d.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=g,wt.__ngLastListenerFn__=g,ne=!1;else{g=yh(d,a,B,g,!1);const bn=l.listen(_t,h,g);K.push(g,bn),P&&P.push(h,Fe,Ot,Ot+1)}}else g=yh(d,a,B,g,!1);const Te=d.outputs;let $e;if(ne&&null!==Te&&($e=Te[h])){const Xe=$e.length;if(Xe)for(let _t=0;_t<Xe;_t+=2){const qn=a[$e[_t]][$e[_t+1]].subscribe(g),Al=K.length;K.push(g,qn),P&&P.push(h,d.index,Al,-(Al+1))}}}(g,h,h[11],y,s,a,0,d),Xy}function cm(s,a,l,d){try{return!1!==l(d)}catch(h){return Wf(s,h),!1}}function yh(s,a,l,d,h){return function g(y){if(y===Function)return d;ti(2&s.flags?Pr(s.index,a):a);let I=cm(a,0,d,y),x=g.__ngNextListenerFn__;for(;x;)I=cm(a,0,x,y)&&I,x=x.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function vb(s=1){return function kd(s){return(kt.lFrame.contextLView=function lg(s,a){for(;s>0;)a=a[15],s--;return a}(s,kt.lFrame.contextLView))[8]}(s)}function Tb(s,a,l,d,h){const g=s[l+1],y=null===a;let E=d?xo(g):eo(g),I=!1;for(;0!==E&&(!1===I||y);){const P=s[E+1];bA(s[E],a)&&(I=!0,s[E+1]=d?xy(P):Ay(P)),E=d?xo(P):eo(P)}I&&(s[l+1]=d?Ay(g):xy(g))}function bA(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&bo(s,a)>=0}const zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Db(s){return s.substring(zr.key,zr.keyEnd)}function rv(s,a){const l=zr.textEnd;return l===a?-1:(a=zr.keyEnd=function xb(s,a,l){for(;a<l&&s.charCodeAt(a)>32;)a++;return a}(s,zr.key=a,l),No(s,a,l))}function No(s,a,l){for(;a<l&&s.charCodeAt(a)<=32;)a++;return a}function vh(s,a,l){return Ro(s,a,l,!1),vh}function fm(s,a){return Ro(s,a,null,!0),fm}function pm(s){!function Ki(s,a,l,d){const h=Xt(),g=li(2);h.firstUpdatePass&&Ob(h,null,g,d);const y=Pe();if(l!==Wt&&Rt(y,g,l)){const E=h.data[dn()];if(IA(E,d)&&!kb(h,g)){let I=d?E.classesWithoutHost:E.stylesWithoutHost;null!==I&&(l=we(I,l||"")),mu(h,E,y,l,d)}else!function av(s,a,l,d,h,g,y,E){h===Wt&&(h=St);let I=0,x=0,P=0<h.length?h[0]:null,B=0<g.length?g[0]:null;for(;null!==P||null!==B;){const K=I<h.length?h[I+1]:void 0,ne=x<g.length?g[x+1]:void 0;let $e,Te=null;P===B?(I+=2,x+=2,K!==ne&&(Te=B,$e=ne)):null===B||null!==P&&P<B?(I+=2,Te=P):(x+=2,Te=B,$e=ne),null!==Te&&Lb(s,a,l,d,Te,$e,y,E),P=I<h.length?h[I]:null,B=x<g.length?g[x]:null}}(h,E,y,y[11],y[g+1],y[g+1]=function np(s,a,l){if(null==l||""===l)return St;const d=[],h=ha(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(d,g,h[g]);else"string"==typeof h&&a(d,h);return d}(s,a,l),d,g)}}(di,oo,s,!0)}function oo(s,a){for(let l=function EA(s){return function ya(s){zr.key=0,zr.keyEnd=0,zr.value=0,zr.valueEnd=0,zr.textEnd=s.length}(s),rv(s,No(s,0,zr.textEnd))}(a);l>=0;l=rv(a,l))di(s,Db(a),!0)}function Ro(s,a,l,d){const h=Pe(),g=Xt(),y=li(2);g.firstUpdatePass&&Ob(g,s,y,d),a!==Wt&&Rt(h,y,a)&&Lb(g,g.data[dn()],h,h[11],s,h[y+1]=function Ub(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ve(ha(s)))),s}(a,l),d,y)}function kb(s,a){return a>=s.expandoStartIndex}function Ob(s,a,l,d){const h=s.data;if(null===h[l+1]){const g=h[dn()],y=kb(s,l);IA(g,d)&&null===a&&!y&&(a=!1),a=function ov(s,a,l,d){const h=tc(s);let g=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(l=tp(l=gm(null,s,a,l,d),a.attrs,d),g=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==h)if(l=gm(h,s,a,l,d),null===g){let I=function Nb(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==eo(d))return s[xo(d)]}(s,a,d);void 0!==I&&Array.isArray(I)&&(I=gm(null,s,a,I[1],d),I=tp(I,a.attrs,d),function Rb(s,a,l,d){s[xo(l?a.classBindings:a.styleBindings)]=d}(s,a,d,I))}else g=function Fb(s,a,l){let d;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)d=tp(d,s[g].hostAttrs,l);return tp(d,a.attrs,l)}(s,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(h,g,a,d),function wA(s,a,l,d,h,g){let y=g?a.classBindings:a.styleBindings,E=xo(y),I=eo(y);s[d]=l;let P,x=!1;if(Array.isArray(l)){const B=l;P=B[1],(null===P||bo(B,P)>0)&&(x=!0)}else P=l;if(h)if(0!==I){const K=xo(s[E+1]);s[d+1]=Hg(K,E),0!==K&&(s[K+1]=Lf(s[K+1],d)),s[E+1]=function Dy(s,a){return 131071&s|a<<17}(s[E+1],d)}else s[d+1]=Hg(E,0),0!==E&&(s[E+1]=Lf(s[E+1],d)),E=d;else s[d+1]=Hg(I,0),0===E?E=d:s[I+1]=Lf(s[I+1],d),I=d;x&&(s[d+1]=Ay(s[d+1])),Tb(s,P,d,!0),Tb(s,P,d,!1),function CA(s,a,l,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&bo(g,a)>=0&&(l[d+1]=xy(l[d+1]))}(a,P,s,d,g),y=Hg(E,I),g?a.classBindings=y:a.styleBindings=y}(h,g,a,l,y,d)}}function gm(s,a,l,d,h){let g=null;const y=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<y&&(g=a[E],d=tp(d,g.hostAttrs,h),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),d}function tp(s,a,l){const d=l?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const y=a[g];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),di(s,y,!!l||a[++g]))}return void 0===s?null:s}function Lb(s,a,l,d,h,g,y,E){if(!(3&a.type))return;const I=s.data,x=I[E+1];wh(function Vf(s){return 1==(1&s)}(x)?Vb(I,a,l,h,eo(x),y):void 0)||(wh(g)||function RC(s){return 2==(2&s)}(x)&&(g=Vb(I,null,l,h,E,y)),function sk(s,a,l,d,h){if(a)h?s.addClass(l,d):s.removeClass(l,d);else{let g=-1===d.indexOf("-")?void 0:wr.DashCase;null==h?s.removeStyle(l,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=wr.Important),s.setStyle(l,d,h,g))}}(d,y,go(dn(),l),h,g))}function Vb(s,a,l,d,h,g){const y=null===a;let E;for(;h>0;){const I=s[h],x=Array.isArray(I),P=x?I[1]:I,B=null===P;let K=l[h+1];K===Wt&&(K=B?St:void 0);let ne=B?Ju(K,d):P===d?K:void 0;if(x&&!wh(ne)&&(ne=Ju(I,d)),wh(ne)&&(E=ne,y))return E;const Te=s[h+1];h=y?xo(Te):eo(Te)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=Ju(I,d))}return E}function wh(s){return void 0!==s}function IA(s,a){return 0!=(s.flags&(a?16:32))}function TA(s,a=""){const l=Pe(),d=Xt(),h=s+22,g=d.firstCreatePass?Bc(d,h,1,a,null):d.data[h],y=l[h]=function M(s,a){return s.createText(a)}(l[11],a);H_(d,l,y,g),Ii(g,!1)}function Bb(s){return uv("",s,""),Bb}function uv(s,a,l){const d=Pe(),h=function gl(s,a,l,d){return Rt(s,mo(),l)?a+Ce(l)+d:Wt}(d,s,a,l);return h!==Wt&&fu(d,dn(),h),uv}function ip(s,a,l,d,h){const g=Pe(),y=mh(g,s,a,l,d,h);return y!==Wt&&fu(g,dn(),y),ip}function cv(s,a,l){const d=Pe();if(Rt(d,mo(),a)){const g=Xt(),y=xn();ks(g,y,d,s,a,function Mi(s,a,l){return(null===s||bi(s))&&(l=function $o(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[a.index])),l[11]}(tc(g.data),y,d),l,!0)}return cv}const Kc=void 0;var BA=["en",[["a","p"],["AM","PM"],Kc],[["AM","PM"],Kc,Kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Kc,"{1} 'at' {0}",Kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function UA(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Yc={};function lp(s){const a=function $A(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=cp(a);if(l)return l;const d=a.split("-")[0];if(l=cp(d),l)return l;if("en"===d)return BA;throw new De(701,!1)}function vm(s){return lp(s)[Ut.PluralCase]}function cp(s){return s in Yc||(Yc[s]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[s]),Yc[s]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const Qc="en-US";let dv=Qc;function yv(s,a,l,d,h){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)yv(s[g],a,l,d,h);else{const g=Xt(),y=Pe();let E=Fc(s)?s:J(s.provide),I=lC(s);const x=Kn(),P=1048575&x.providerIndexes,B=x.directiveStart,K=x.providerIndexes>>20;if(Fc(s)||!s.multi){const ne=new qo(I,h,hu),Te=wv(E,a,h?P:P+K,B);-1===Te?(Zs(Wo(x,y),g,E),vv(g,s,a.length),a.push(E),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(ne),y.push(ne)):(l[Te]=ne,y[Te]=ne)}else{const ne=wv(E,a,P+K,B),Te=wv(E,a,P,P+K),$e=ne>=0&&l[ne],Xe=Te>=0&&l[Te];if(h&&!Xe||!h&&!$e){Zs(Wo(x,y),g,E);const _t=function qk(s,a,l,d,h){const g=new qo(s,l,hu);return g.multi=[],g.index=a,g.componentProviders=0,IE(g,h,d&&!l),g}(h?TE:fx,l.length,h,d,I);!h&&Xe&&(l[Te].providerFactory=_t),vv(g,s,a.length,0),a.push(E),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),l.push(_t),y.push(_t)}else vv(g,s,ne>-1?ne:Te,IE(l[h?Te:ne],I,!h&&d));!h&&d&&Xe&&l[Te].componentProviders++}}}function vv(s,a,l,d){const h=Fc(a),g=function vD(s){return!!s.useClass}(a);if(h||g){const I=(g?J(a.useClass):a).prototype.ngOnDestroy;if(I){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const P=x.indexOf(l);-1===P?x.push(l,[d,I]):x[P+1].push(d,I)}else x.push(l,I)}}}function IE(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function wv(s,a,l,d){for(let h=l;h<d;h++)if(a[h]===s)return h;return-1}function fx(s,a,l,d){return Cv(this.multi,[])}function TE(s,a,l,d){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ws(l,l[1],this.providerFactory.index,d);g=E.slice(0,y),Cv(h,g);for(let I=y;I<E.length;I++)g.push(E[I])}else g=[],Cv(h,g);return g}function Cv(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function DE(s,a=[]){return l=>{l.providersResolver=(d,h)=>function EE(s,a,l){const d=Xt();if(d.firstCreatePass){const h=bi(s);yv(l,d.data,d.blueprint,h,!0),yv(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class yu{}class AE{}function px(s,a){return new bv(s,a??null)}class bv extends yu{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new By(this);const d=Ke(a);this._bootstrapComponents=fa(d.bootstrap),this._r3Injector=Bg(a,l,[{provide:yu,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],ve(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Mm extends AE{constructor(a){super(),this.moduleType=a}create(a){return new bv(this.moduleType,a)}}class Ev extends yu{constructor(a,l,d){super(),this.componentFactoryResolver=new By(this),this.instance=null;const h=new CD([...a,{provide:yu,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],l||Og(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function cn(s,a,l=null){return new Ev(s,a,l).injector}let Yi=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=ry(0,l.type),h=d.length>0?cn([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Me({token:s,providedIn:"environment",factory:()=>new s(ar(Lc))}),s})();function bl(s){s.getStandaloneInjector=a=>a.get(Yi).getOrCreateStandaloneInjector(s)}function td(s,a,l,d){return function PE(s,a,l,d,h,g){const y=a+l;return Rt(s,y,h)?Os(s,y+1,g?d.call(g,h):d(h)):nd(s,y+1)}(Pe(),ai(),s,a,l,d)}function nd(s,a){const l=s[a];return l===Wt?void 0:l}function RE(s,a){const l=Xt();let d;const h=s+22;l.firstCreatePass?(d=function Ix(s,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(s===d.name)return d}}(a,l.pipeRegistry),l.data[h]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(h,d.onDestroy)):d=l.data[h];const g=d.factory||(d.factory=po(d.type)),y=zn(hu);try{const E=ci(!1),I=g();return ci(E),function zy(s,a,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=d}(l,Pe(),h,I),I}finally{zn(y)}}function gp(s,a,l,d){const h=s+22,g=Pe(),y=$i(g,h);return function Tl(s,a){return s[1].data[a].pure}(g,h)?function kE(s,a,l,d,h,g,y){const E=a+l;return ko(s,E,h,g)?Os(s,E+2,y?d.call(y,h,g):d(h,g)):nd(s,E+2)}(g,ai(),a,y.transform,l,d,y):y.transform(l,d)}function Mv(s){return a=>{setTimeout(s,void 0,a)}}const va=class Sv extends o.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let h=a,g=l||(()=>null),y=d;if(a&&"object"==typeof a){const I=a;h=I.next?.bind(I),g=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(g=Mv(g),h&&(h=Mv(h)),y&&(y=Mv(y)));const E=super.subscribe({next:h,error:g,complete:y});return a instanceof $.w0&&a.add(E),E}};function FE(){return this._results[pl()]()}class Pv{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=pl(),d=Pv.prototype;d[l]||(d[l]=FE)}get changes(){return this._changes||(this._changes=new va)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const h=Ar(a);(this._changesDetected=!function Yu(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=a[d];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Nm,s})();const _p=mp,LE=class extends _p{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a,l){const d=this._declarationTContainer.tViews,h=Zg(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),hh(d,h,a),new Lr(h)}};function Nm(){return yp(Kn(),Pe())}function yp(s,a){return 4&s.type?new LE(a,s,uh(s,a)):null}let Rm=(()=>{class s{}return s.__NG_ELEMENT_ID__=Tx,s})();function Tx(){return Ov(Kn(),Pe())}const Dx=Rm,VE=class extends Dx{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return uh(this._hostTNode,this._hostLView)}get injector(){return new Qo(this._hostTNode,this._hostLView)}get parentInjector(){const a=qa(this._hostTNode,this._hostLView);if(ac(a)){const l=ls(a,this._hostLView),d=$a(a);return new Qo(l[1].data[d+8],l)}return new Qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=kv(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const y=a.createEmbeddedView(l||{},g);return this.insert(y,h),y}createComponent(a,l,d,h,g){const y=a&&!function Di(s){return"function"==typeof s}(a);let E;if(y)E=l;else{const B=l||{};E=B.index,d=B.injector,h=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const I=y?a:new Kf(N(a)),x=d||this.parentInjector;if(!g&&null==I.ngModule){const K=(y?x:this.parentInjector).get(Lc,null);K&&(g=K)}const P=I.create(x,h,void 0,g);return this.insert(P.hostView,E),P}insert(a,l){const d=a._lView,h=d[1];if(function Oa(s){return Gr(s[3])}(d)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const B=d[3],K=new VE(B,B[6],B[3]);K.detach(K.indexOf(a))}}const g=this._adjustIndex(l),y=this._lContainer;!function Zi(s,a,l,d){const h=10+d,g=l.length;d>0&&(l[h-1][4]=a),d<g-10?(a[4]=l[h],fc(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const y=a[17];null!==y&&l!==y&&function ca(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(y,a);const E=a[19];null!==E&&E.insertView(s),a[2]|=64}(h,d,y,g);const E=q_(g,y),I=d[11],x=ul(I,y[7]);return null!==x&&function nt(s,a,l,d,h,g){d[0]=h,d[6]=a,Ms(s,d,l,1,h,g)}(h,y[6],I,d,x,E),a.attachToViewContainerRef(),fc(vp(y),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=kv(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=Ef(this._lContainer,l);d&&(Qa(vp(this._lContainer),l),al(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=Ef(this._lContainer,l);return d&&null!=Qa(vp(this._lContainer),l)?new Lr(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function kv(s){return s[8]}function vp(s){return s[8]||(s[8]=[])}function Ov(s,a){let l;const d=a[s.index];if(Gr(d))l=d;else{let h;if(8&s.type)h=Dn(d);else{const g=a[11];h=g.createComment("");const y=oi(s,a);To(g,ul(g,y),h,function ik(s,a){return s.nextSibling(a)}(g,y),!1)}a[s.index]=l=nb(d,a,h,s),zf(a,l)}return new VE(l,s,a)}class Rv{constructor(a){this.queryList=a,this.matches=null}clone(){return new Rv(this.queryList)}setDirty(){this.queryList.setDirty()}}class wp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,h=[];for(let g=0;g<d;g++){const y=l.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new wp(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==qv(a,l).matches&&this.queries[l].setDirty()}}class Lm{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class Fv{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,h);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new Fv(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Cp{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new Cp(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(a,l,Lv(l,g)),this.matchTNodeWithReadOption(a,l,Yo(l,a,g,!1,!1))}else d===mp?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,Yo(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Pf||h===Rm||h===mp&&4&l.type)this.addMatch(l.index,-2);else{const g=Yo(l,a,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function Lv(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function Uv(s,a,l,d){return-1===l?function Vv(s,a){return 11&s.type?uh(s,a):4&s.type?yp(s,a):null}(a,s):-2===l?function Ax(s,a,l){return l===Pf?uh(a,s):l===mp?yp(a,s):l===Rm?Ov(a,s):void 0}(s,a,d):Ws(s,s[1],l,a)}function BE(s,a,l,d){const h=a[19].queries[d];if(null===h.matches){const g=s.data,y=l.matches,E=[];for(let I=0;I<y.length;I+=2){const x=y[I];E.push(x<0?null:Uv(a,g[x],y[I+1],l.metadata.read))}h.matches=E}return h.matches}function Bv(s,a,l,d){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const y=BE(s,a,h,l);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)d.push(y[E/2]);else{const x=g[E+1],P=a[-I];for(let B=10;B<P.length;B++){const K=P[B];K[17]===K[3]&&Bv(K[1],K,x,d)}if(null!==P[9]){const B=P[9];for(let K=0;K<B.length;K++){const ne=B[K];Bv(ne[1],ne,x,d)}}}}}return d}function bp(s){const a=Pe(),l=Xt(),d=Go();Xr(d+1);const h=qv(l,d);if(s.dirty&&function Yl(s){return 4==(4&s[2])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Bv(l,a,d,[]):BE(l,a,h,d);s.reset(g,kD),s.notifyOnChanges()}return!0}return!1}function $v(s,a,l,d){const h=Xt();if(h.firstCreatePass){const g=Kn();(function Gv(s,a,l){null===s.queries&&(s.queries=new Fv),s.queries.track(new Cp(a,l))})(h,new Lm(a,l,d),g.index),function xx(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function Um(s,a,l){const d=new Pv(4==(4&l));jf(s,a,d,d.destroy),null===a[19]&&(a[19]=new wp),a[19].queries.push(new Rv(d))}(h,Pe(),l)}function Vm(){return function Hv(s,a){return s[19].queries[a].queryList}(Pe(),Go())}function qv(s,a){return s.queries.getByIndex(a)}function $m(...s){}const YE=new yn("Application Initializer");let Hm=(()=>{class s{constructor(l){this.appInits=l,this.resolve=$m,this.reject=$m,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(lm(g))l.push(g);else if(Zc(g)){const y=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});l.push(y)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ar(YE,8))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const QE=new yn("AppId",{providedIn:"root",factory:function JE(){return`${Xv()}${Xv()}${Xv()}`}});function Xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const XE=new yn("Platform Initializer"),tS=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eI=new yn("appBootstrapListener"),nS=new yn("AnimationModuleType");let rS=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const e0=new yn("LocaleId",{providedIn:"root",factory:()=>yc(e0,lt.Optional|lt.SkipSelf)||function aO(){return typeof $localize<"u"&&$localize.locale||Qc}()}),iS=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class tI{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let oS=(()=>{class s{compileModuleSync(l){return new Mm(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=fa(Ke(l).declarations).reduce((y,E)=>{const I=N(E);return I&&y.push(new Kf(I)),y},[]);return new tI(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const lS=(()=>Promise.resolve(0))();function n0(s){typeof Zone>"u"?lS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Fo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new va(!1),this.onMicrotaskEmpty=new va(!1),this.onStable=new va(!1),this.onError=new va(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function cO(){let s=tn.requestAnimationFrame,a=tn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Gm(s){const a=()=>{!function cS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(tn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,r0(s),s.isCheckStableRunning=!0,iI(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),r0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,g,y,E)=>{try{return sI(s),l.invokeTask(h,g,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),dS(s)}},onInvoke:(l,d,h,g,y,E,I)=>{try{return sI(s),l.invoke(h,g,y,E,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),dS(s)}},onHasTask:(l,d,h,g)=>{l.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,r0(s),iI(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fo.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Fo.isInAngularZone())throw new De(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,a,dO,$m,$m);try{return g.runTask(y,l,d)}finally{g.cancelTask(y)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const dO={};function iI(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function r0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function dS(s){s._nesting--,iI(s)}class oI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new va,this.onMicrotaskEmpty=new va,this.onStable=new va,this.onError=new va}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,h){return a.apply(l,d)}}const qm=new yn(""),s0=new yn("");let o0,hO=(()=>{class s{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,o0||(function hS(s){o0=s}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fo.assertNotInAngularZone(),n0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())n0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ar(Fo),ar(zm),ar(s0))},s.\u0275prov=Me({token:s,factory:s.\u0275fac}),s})(),zm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return o0?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),rd=null;const fS=new yn("AllowMultipleToken"),a0=new yn("PlatformDestroyListeners");class gO{constructor(a,l){this.name=a,this.token=l}}function gS(s,a,l=[]){const d=`Platform: ${a}`,h=new yn(d);return(g=[])=>{let y=aI();if(!y||y.injector.get(fS,!1)){const E=[...l,...g,{provide:h,useValue:!0}];s?s(E):function mO(s){if(rd&&!rd.get(fS,!1))throw new De(400,!1);rd=s;const a=s.get(_S);(function pS(s){const a=s.get(XE,null);a&&a.forEach(l=>l())})(s)}(function mS(s=[],a){return Uc.create({name:a,providers:[{provide:iy,useValue:"platform"},{provide:a0,useValue:new Set([()=>rd=null])},...s]})}(E,d))}return function yO(s){const a=aI();if(!a)throw new De(401,!1);return a}()}}function aI(){return rd?.get(_S)??null}let _S=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function vS(s,a){let l;return l="noop"===s?new oI:("zone.js"===s?void 0:s)||new Fo(a),l}(d?.ngZone,function yS(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Fo,useValue:h}];return h.run(()=>{const y=Uc.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(y),I=E.injector.get(gi,null);if(!I)throw new De(402,!1);return h.runOutsideAngular(()=>{const x=h.onError.subscribe({next:P=>{I.handleError(P)}});E.onDestroy(()=>{l0(this._modules,E),x.unsubscribe()})}),function wS(s,a,l){try{const d=l();return lm(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(I,h,()=>{const x=E.injector.get(Hm);return x.runInitializers(),x.donePromise.then(()=>(function Jb(s){se(s,"Expected localeId to be defined"),"string"==typeof s&&(dv=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(e0,Qc)||Qc),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,d=[]){const h=CS({},d);return function fO(s,a,l){const d=new Mm(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const d=l.injector.get(u0);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new De(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(a0,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ar(Uc))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function CS(s,a){return Array.isArray(a)?a.reduce(CS,s):{...s,...a}}let u0=(()=>{class s{constructor(l,d,h){this._zone=l,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new R.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new R.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Fo.assertNotInAngularZone(),n0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{Fo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ie.T)(g,y.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof cC;if(!this._injector.get(Hm).done)throw!h&&be(l),new De(405,false);let y;y=h?l:this._injector.get(Mf).resolveComponentFactory(l),this.componentTypes.push(y.componentType);const E=function pO(s){return s.isBoundToModule}(y)?void 0:this._injector.get(yu),x=y.create(Uc.NULL,[],d||y.selector,E),P=x.location.nativeElement,B=x.injector.get(qm,null);return B?.registerApplication(P),x.onDestroy(()=>{this.detachView(x.hostView),l0(this.components,x),B?.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;l0(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(eI,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>l0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new De(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(ar(Fo),ar(Lc),ar(gi))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function l0(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let ES=!0,IS=!1;function wO(){return IS=!0,ES}function CO(){if(IS)throw new Error("Cannot enable prod mode after platform setup.");ES=!1}let bO=(()=>{class s{}return s.__NG_ELEMENT_ID__=EO,s})();function EO(s){return function IO(s,a,l){if(bs(s)&&!l){const d=Pr(s.index,a);return new Lr(d,d)}return 47&s.type?new Lr(a[16],a):null}(Kn(),Pe(),16==(16&s))}class h0{constructor(){}supports(a){return Yf(a)}create(a){return new xS(a)}}const hI=(s,a)=>a;class xS{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||hI}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,h=0,g=null;for(;l||d;){const y=!d||l&&l.currentIndex<Ln(d,h,g)?l:d,E=Ln(y,h,g),I=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{g||(g=[]);const x=E-h,P=I-h;if(x!=P){for(let K=0;K<x;K++){const ne=K<g.length?g[K]:g[K]=0,Te=ne+K;P<=Te&&Te<x&&(g[K]=ne+1)}g[y.previousIndex]=P-x}}E!==I&&a(y,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Yf(a))throw new De(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,y,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],y=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,g,y,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,y,E),d=!0),l=l._next}else h=0,function gA(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[pl()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{y=this._trackByFn(h,E),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,E,y,h)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,y,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,h)):a=this._addAfter(new SS(l,d),g,h),a}_verifyReinsertion(a,l,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const h=null===l?this._itHead:l._next;return a._next=h,a._prev=l,null===h?this._itTail=a:h._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new tr),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tr),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class SS{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MS{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class tr{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new MS,this.map.set(l,d)),d.add(a)}get(a,l){const h=this.map.get(a);return h?h.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ln(s,a,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+a+h}class Zm{constructor(){}supports(a){return a instanceof Map||om(a)}create(){return new f0}}class f0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||om(a)))throw new De(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,l);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const d=new PS(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class PS{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fI(){return new p0([new h0])}let p0=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||fI()),deps:[[s,new ea,new As]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new De(901,!1)}}return s.\u0275prov=Me({token:s,providedIn:"root",factory:fI}),s})();function pI(){return new Wm([new Zm])}let Wm=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||pI()),deps:[[s,new ea,new As]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new De(901,!1)}}return s.\u0275prov=Me({token:s,providedIn:"root",factory:pI}),s})();const mI=gS(null,"core",[]);let OS=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ar(u0))},s.\u0275mod=yr({type:s}),s.\u0275inj=Dt({}),s})();function NS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(bt,Ne,U)=>{U.d(Ne,{Z:()=>De});var o=U(2090),$=U(4859),R=U(6881),ie=U(1877);class de{constructor(Ce,ye){this._delegate=Ce,this.firebase=ye,(0,R._addComponent)(Ce,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ce.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this._delegate.automaticDataCollectionEnabled=Ce}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ce=>{this._delegate.checkDestroyed(),Ce()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(Ce,ye=R._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ce);return!pt.isInitialized()&&"EXPLICIT"===(null===(yt=pt.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:ye})}_removeServiceInstance(Ce,ye=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ce).clearInstance(ye)}_addComponent(Ce){(0,R._addComponent)(this._delegate,Ce)}_addOrOverwriteComponent(Ce){(0,R._addOrOverwriteComponent)(this._delegate,Ce)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function we(){const it=function ve(it){const Ce={},ye={__esModule:!0,initializeApp:function xe(Ze,ce={}){const Qe=R.initializeApp(Ze,ce);if((0,o.r3)(Ce,Qe.name))return Ce[Qe.name];const xt=new it(Qe,ye);return Ce[Qe.name]=xt,xt},app:pt,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Se(Ze){const ce=Ze.name,Qe=ce.replace("-compat","");if(R._registerComponent(Ze)&&"PUBLIC"===Ze.type){const xt=(gt=pt())=>{if("function"!=typeof gt[Qe])throw pe.create("invalid-app-argument",{appName:ce});return gt[Qe]()};void 0!==Ze.serviceProps&&(0,o.ZB)(xt,Ze.serviceProps),ye[Qe]=xt,it.prototype[Qe]=function(...gt){return this._getService.bind(this,ce).apply(this,Ze.multipleInstances?gt:[])}}return"PUBLIC"===Ze.type?ye[Qe]:null},removeApp:function yt(Ze){delete Ce[Ze]},useAsService:function qe(Ze,ce){return"serverAuth"===ce?null:ce},modularAPIs:R}};function pt(Ze){if(!(0,o.r3)(Ce,Ze=Ze||R._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Ze});return Ce[Ze]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Ie(){return Object.keys(Ce).map(Ze=>Ce[Ze])}}),pt.App=it,ye}(de);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ce(ye){(0,o.ZB)(it,ye)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),it}(),q=new ie.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=Z;!function Oe(it){(0,R.registerVersion)("@firebase/app-compat","0.2.13",it)}()},6881:(bt,Ne,U)=>{U.r(Ne),U.d(Ne,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>os,_DEFAULT_ENTRY_NAME:()=>Yr,_addComponent:()=>dt,_addOrOverwriteComponent:()=>It,_apps:()=>Mn,_clearComponents:()=>rr,_components:()=>zt,_getProvider:()=>Qr,_registerComponent:()=>tn,_removeServiceInstance:()=>_r,deleteApp:()=>Xn,getApp:()=>jn,getApps:()=>En,initializeApp:()=>sn,onLog:()=>er,registerVersion:()=>Jr,setLogLevel:()=>Ci});var o=U(5861),$=U(4859),R=U(1877),ie=U(2090);let _e,pe;const Z=new WeakMap,q=new WeakMap,J=new WeakMap,He=new WeakMap,Oe=new WeakMap;let Ce={get(ue,re,Le){if(ue instanceof IDBTransaction){if("done"===re)return q.get(ue);if("objectStoreNames"===re)return ue.objectStoreNames||J.get(ue);if("store"===re)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return xe(ue[re])},set:(ue,re,Le)=>(ue[re]=Le,!0),has:(ue,re)=>ue instanceof IDBTransaction&&("done"===re||"store"===re)||re in ue};function pt(ue){return"function"==typeof ue?function yt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...re){return ue.apply(Ie(this),re),xe(Z.get(this))}:function(...re){return xe(ue.apply(Ie(this),re))}:function(re,...Le){const Ve=ue.call(Ie(this),re,...Le);return J.set(Ve,re.sort?re.sort():[re]),xe(Ve)}}(ue):(ue instanceof IDBTransaction&&function it(ue){if(q.has(ue))return;const re=new Promise((Le,Ve)=>{const Mt=()=>{ue.removeEventListener("complete",$t),ue.removeEventListener("error",gn),ue.removeEventListener("abort",gn)},$t=()=>{Le(),Mt()},gn=()=>{Ve(ue.error||new DOMException("AbortError","AbortError")),Mt()};ue.addEventListener("complete",$t),ue.addEventListener("error",gn),ue.addEventListener("abort",gn)});q.set(ue,re)}(ue),((ue,re)=>re.some(Le=>ue instanceof Le))(ue,function ve(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,Ce):ue)}function xe(ue){if(ue instanceof IDBRequest)return function De(ue){const re=new Promise((Le,Ve)=>{const Mt=()=>{ue.removeEventListener("success",$t),ue.removeEventListener("error",gn)},$t=()=>{Le(xe(ue.result)),Mt()},gn=()=>{Ve(ue.error),Mt()};ue.addEventListener("success",$t),ue.addEventListener("error",gn)});return re.then(Le=>{Le instanceof IDBCursor&&Z.set(Le,ue)}).catch(()=>{}),Oe.set(re,ue),re}(ue);if(He.has(ue))return He.get(ue);const re=pt(ue);return re!==ue&&(He.set(ue,re),Oe.set(re,ue)),re}const Ie=ue=>Oe.get(ue),Ze=["get","getKey","getAll","getAllKeys","count"],ce=["put","add","delete","clear"],Qe=new Map;function xt(ue,re){if(!(ue instanceof IDBDatabase)||re in ue||"string"!=typeof re)return;if(Qe.get(re))return Qe.get(re);const Le=re.replace(/FromIndex$/,""),Ve=re!==Le,Mt=ce.includes(Le);if(!(Le in(Ve?IDBIndex:IDBObjectStore).prototype)||!Mt&&!Ze.includes(Le))return;const $t=function(){var gn=(0,o.Z)(function*($n,...Jt){const Hr=this.transaction($n,Mt?"readwrite":"readonly");let Bi=Hr.store;return Ve&&(Bi=Bi.index(Jt.shift())),(yield Promise.all([Bi[Le](...Jt),Mt&&Hr.done]))[0]});return function(Jt){return gn.apply(this,arguments)}}();return Qe.set(re,$t),$t}!function ye(ue){Ce=ue(Ce)}(ue=>({...ue,get:(re,Le,Ve)=>xt(re,Le)||ue.get(re,Le,Ve),has:(re,Le)=>!!xt(re,Le)||ue.has(re,Le)}));class gt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function qt(ue){return"VERSION"===ue.getComponent()?.type}(Le)){const Ve=Le.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(Le=>Le).join(" ")}}const ct="@firebase/app",pr=new R.Yd("@firebase/app"),Yr="[DEFAULT]",Nn={[ct]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Mn=new Map,zt=new Map;function dt(ue,re){try{ue.container.addComponent(re)}catch(Le){pr.debug(`Component ${re.name} failed to register with FirebaseApp ${ue.name}`,Le)}}function It(ue,re){ue.container.addOrOverwriteComponent(re)}function tn(ue){const re=ue.name;if(zt.has(re))return pr.debug(`There were multiple attempts to register component ${re}.`),!1;zt.set(re,ue);for(const Le of Mn.values())dt(Le,ue);return!0}function Qr(ue,re){const Le=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),ue.container.getProvider(re)}function _r(ue,re,Le=Yr){Qr(ue,re).clearInstance(Le)}function rr(){zt.clear()}const Zn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zt{constructor(re,Le,Ve){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}const os="9.23.0";function sn(ue,re={}){let Le=ue;"object"!=typeof re&&(re={name:re});const Ve=Object.assign({name:Yr,automaticDataCollectionEnabled:!1},re),Mt=Ve.name;if("string"!=typeof Mt||!Mt)throw Zn.create("bad-app-name",{appName:String(Mt)});if(Le||(Le=(0,ie.aH)()),!Le)throw Zn.create("no-options");const $t=Mn.get(Mt);if($t){if((0,ie.vZ)(Le,$t.options)&&(0,ie.vZ)(Ve,$t.config))return $t;throw Zn.create("duplicate-app",{appName:Mt})}const gn=new $.H0(Mt);for(const Jt of zt.values())gn.addComponent(Jt);const $n=new Zt(Le,Ve,gn);return Mn.set(Mt,$n),$n}function jn(ue=Yr){const re=Mn.get(ue);if(!re&&ue===Yr&&(0,ie.aH)())return sn();if(!re)throw Zn.create("no-app",{appName:ue});return re}function En(){return Array.from(Mn.values())}function Xn(ue){return On.apply(this,arguments)}function On(){return(On=(0,o.Z)(function*(ue){const re=ue.name;Mn.has(re)&&(Mn.delete(re),yield Promise.all(ue.container.getProviders().map(Le=>Le.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function Jr(ue,re,Le){var Ve;let Mt=null!==(Ve=Nn[ue])&&void 0!==Ve?Ve:ue;Le&&(Mt+=`-${Le}`);const $t=Mt.match(/\s|\//),gn=re.match(/\s|\//);if($t||gn){const $n=[`Unable to register library "${Mt}" with version "${re}":`];return $t&&$n.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),$t&&gn&&$n.push("and"),gn&&$n.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void pr.warn($n.join(" "))}tn(new $.wA(`${Mt}-version`,()=>({library:Mt,version:re}),"VERSION"))}function er(ue,re){if(null!==ue&&"function"!=typeof ue)throw Zn.create("invalid-log-argument");(0,R.Am)(ue,re)}function Ci(ue){(0,R.Ub)(ue)}const G="firebase-heartbeat-store";let H=null;function F(){return H||(H=function Se(ue,re,{blocked:Le,upgrade:Ve,blocking:Mt,terminated:$t}={}){const gn=indexedDB.open(ue,re),$n=xe(gn);return Ve&&gn.addEventListener("upgradeneeded",Jt=>{Ve(xe(gn.result),Jt.oldVersion,Jt.newVersion,xe(gn.transaction),Jt)}),Le&&gn.addEventListener("blocked",Jt=>Le(Jt.oldVersion,Jt.newVersion,Jt)),$n.then(Jt=>{$t&&Jt.addEventListener("close",()=>$t()),Mt&&Jt.addEventListener("versionchange",Hr=>Mt(Hr.oldVersion,Hr.newVersion,Hr))}).catch(()=>{}),$n}("firebase-heartbeat-database",1,{upgrade:(ue,re)=>{0===re&&ue.createObjectStore(G)}}).catch(ue=>{throw Zn.create("idb-open",{originalErrorMessage:ue.message})})),H}function k(){return(k=(0,o.Z)(function*(ue){try{return yield(yield F()).transaction(G).objectStore(G).get(Ke(ue))}catch(re){if(re instanceof ie.ZR)pr.warn(re.message);else{const Le=Zn.create("idb-get",{originalErrorMessage:re?.message});pr.warn(Le.message)}}})).apply(this,arguments)}function Y(ue,re){return be.apply(this,arguments)}function be(){return(be=(0,o.Z)(function*(ue,re){try{const Ve=(yield F()).transaction(G,"readwrite");yield Ve.objectStore(G).put(re,Ke(ue)),yield Ve.done}catch(Le){if(Le instanceof ie.ZR)pr.warn(Le.message);else{const Ve=Zn.create("idb-set",{originalErrorMessage:Le?.message});pr.warn(Ve.message)}}})).apply(this,arguments)}function Ke(ue){return`${ue.name}!${ue.options.appId}`}class tt{constructor(re){this.container=re,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Lt(Le),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var re=this;return(0,o.Z)(function*(){const Ve=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=at();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!re._heartbeatsCache.heartbeats.some($t=>$t.date===Mt))return re._heartbeatsCache.heartbeats.push({date:Mt,agent:Ve}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter($t=>{const gn=new Date($t.date).valueOf();return Date.now()-gn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,o.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Le=at(),{heartbeatsToSend:Ve,unsentEntries:Mt}=function Qt(ue,re=1024){const Le=[];let Ve=ue.slice();for(const Mt of ue){const $t=Le.find(gn=>gn.agent===Mt.agent);if($t){if($t.dates.push(Mt.date),on(Le)>re){$t.dates.pop();break}}else if(Le.push({agent:Mt.agent,dates:[Mt.date]}),on(Le)>re){Le.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:Le,unsentEntries:Ve}}(re._heartbeatsCache.heartbeats),$t=(0,ie.L)(JSON.stringify({version:2,heartbeats:Ve}));return re._heartbeatsCache.lastSentHeartbeatDate=Le,Mt.length>0?(re._heartbeatsCache.heartbeats=Mt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),$t})()}}function at(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,o.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function N(ue){return k.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Le=this;return(0,o.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const $t=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=re.lastSentHeartbeatDate)&&void 0!==Ve?Ve:$t.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Le=this;return(0,o.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const $t=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=re.lastSentHeartbeatDate)&&void 0!==Ve?Ve:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...re.heartbeats]})}})()}}function on(ue){return(0,ie.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function $r(ue){tn(new $.wA("platform-logger",re=>new gt(re),"PRIVATE")),tn(new $.wA("heartbeat",re=>new tt(re),"PRIVATE")),Jr(ct,"0.9.13",ue),Jr(ct,"0.9.13","esm2017"),Jr("fire-js","")}("")},4859:(bt,Ne,U)=>{U.d(Ne,{H0:()=>ve,wA:()=>R});var o=U(5861),$=U(2090);class R{constructor(Z,q,J){this.name=Z,this.instanceFactory=q,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ie="[DEFAULT]";class de{constructor(Z,q){this.name=Z,this.container=q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const q=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(q)){const J=new $.BH;if(this.instancesDeferred.set(q,J),this.isInitialized(q)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:q});He&&J.resolve(He)}catch{}}return this.instancesDeferred.get(q).promise}getImmediate(Z){var q;const J=this.normalizeInstanceIdentifier(Z?.identifier),He=null!==(q=Z?.optional)&&void 0!==q&&q;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Oe){if(He)return null;throw Oe}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function pe(we){return"EAGER"===we.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[q,J]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(q);try{const Oe=this.getOrInitializeService({instanceIdentifier:He});J.resolve(Oe)}catch{}}}}clearInstance(Z=ie){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,o.Z)(function*(){const q=Array.from(Z.instances.values());yield Promise.all([...q.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...q.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ie){return this.instances.has(Z)}getOptions(Z=ie){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:q={}}=Z,J=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:J,options:q});for(const[Oe,De]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Oe)&&De.resolve(He);return He}onInit(Z,q){var J;const He=this.normalizeInstanceIdentifier(q),Oe=null!==(J=this.onInitCallbacks.get(He))&&void 0!==J?J:new Set;Oe.add(Z),this.onInitCallbacks.set(He,Oe);const De=this.instances.get(He);return De&&Z(De,He),()=>{Oe.delete(Z)}}invokeOnInitCallbacks(Z,q){const J=this.onInitCallbacks.get(q);if(J)for(const He of J)try{He(Z,q)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:q={}}){let J=this.instances.get(Z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(we=Z,we===ie?void 0:we),options:q}),this.instances.set(Z,J),this.instancesOptions.set(Z,q),this.invokeOnInitCallbacks(J,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,J)}catch{}var we;return J||null}normalizeInstanceIdentifier(Z=ie){return this.component?this.component.multipleInstances?Z:ie:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const q=this.getProvider(Z.name);if(q.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);q.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const q=new de(Z,this);return this.providers.set(Z,q),q}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Ne,U)=>{U.d(Ne,{Am:()=>we,Ub:()=>ve,Yd:()=>pe,in:()=>$});const o=[];var $=(()=>{return(Z=$||($={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",$;var Z})();const R={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ie=$.INFO,de={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},_e=(Z,q,...J)=>{if(q<Z.logLevel)return;const He=(new Date).toISOString(),Oe=de[q];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${q})`);console[Oe](`[${He}]  ${Z.name}:`,...J)};class pe{constructor(q){this.name=q,this._logLevel=ie,this._logHandler=_e,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(q){if(!(q in $))throw new TypeError(`Invalid value "${q}" assigned to \`logLevel\``);this._logLevel=q}setLogLevel(q){this._logLevel="string"==typeof q?R[q]:q}get logHandler(){return this._logHandler}set logHandler(q){if("function"!=typeof q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=q}get userLogHandler(){return this._userLogHandler}set userLogHandler(q){this._userLogHandler=q}debug(...q){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...q),this._logHandler(this,$.DEBUG,...q)}log(...q){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...q),this._logHandler(this,$.VERBOSE,...q)}info(...q){this._userLogHandler&&this._userLogHandler(this,$.INFO,...q),this._logHandler(this,$.INFO,...q)}warn(...q){this._userLogHandler&&this._userLogHandler(this,$.WARN,...q),this._logHandler(this,$.WARN,...q)}error(...q){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...q),this._logHandler(this,$.ERROR,...q)}}function ve(Z){o.forEach(q=>{q.setLogLevel(Z)})}function we(Z,q){for(const J of o){let He=null;q&&q.level&&(He=R[q.level]),J.userLogHandler=null===Z?null:(Oe,De,...it)=>{const Ce=it.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");De>=(He??Oe.logLevel)&&Z({level:$[De].toLowerCase(),message:Ce,args:it,type:Oe.name})}}}},259:(bt,Ne,U)=>{U.d(Ne,{C6:()=>o.getApps,KN:()=>o.registerVersion,Mq:()=>o.getApp,ZF:()=>o.initializeApp});var o=U(6881);(0,o.registerVersion)("firebase","9.23.0","app")},9260:(bt,Ne,U)=>{U.d(Ne,{Z:()=>o.Z});var o=U(3942);o.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(bt,Ne,U)=>{U.r(Ne);var o=U(5861),$=U(3942),R=U(1389),ie=U(2090),pe=(U(6881),U(1877),U(4859));function ve(){return window}function q(){return(q=(0,o.Z)(function*(F,N,k){var Y;const{BuildInfo:be}=ve();(0,R.as)(N.sessionId,"AuthEvent did not contain a session ID");const Ke=yield ye(N.sessionId),mt={};return(0,R.at)()?mt.ibi=be.packageName:(0,R.au)()?mt.apn=be.packageName:(0,R.av)(F,"operation-not-supported-in-this-environment"),be.displayName&&(mt.appDisplayName=be.displayName),mt.sessionId=Ke,(0,R.aw)(F,k,N.type,void 0,null!==(Y=N.eventId)&&void 0!==Y?Y:void 0,mt)})).apply(this,arguments)}function He(){return(He=(0,o.Z)(function*(F){const{BuildInfo:N}=ve(),k={};(0,R.at)()?k.iosBundleId=N.packageName:(0,R.au)()?k.androidPackageName=N.packageName:(0,R.av)(F,"operation-not-supported-in-this-environment"),yield(0,R.ax)(F,k)})).apply(this,arguments)}function it(){return(it=(0,o.Z)(function*(F,N,k){const{cordova:Y}=ve();let be=()=>{};try{yield new Promise((Ke,mt)=>{let Ee=null;function tt(){var Lt;Ke();const on=null===(Lt=Y.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof on&&on(),"function"==typeof k?.close&&k.close()}function at(){Ee||(Ee=window.setTimeout(()=>{mt((0,R.az)(F,"redirect-cancelled-by-user"))},2e3))}function Qt(){"visible"===document?.visibilityState&&at()}N.addPassiveListener(tt),document.addEventListener("resume",at,!1),(0,R.au)()&&document.addEventListener("visibilitychange",Qt,!1),be=()=>{N.removePassiveListener(tt),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Qt,!1),Ee&&window.clearTimeout(Ee)}})}finally{be()}})).apply(this,arguments)}function ye(F){return yt.apply(this,arguments)}function yt(){return(yt=(0,o.Z)(function*(F){const N=pt(F),k=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(k)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pt(F){if((0,R.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const N=new ArrayBuffer(F.length),k=new Uint8Array(N);for(let Y=0;Y<F.length;Y++)k[Y]=F.charCodeAt(Y);return k}class Ie extends R.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(k=>k(N)),super.onEvent(N)}initialized(){var N=this;return(0,o.Z)(function*(){yield N.initPromise})()}}function Ze(F){return ce.apply(this,arguments)}function ce(){return(ce=(0,o.Z)(function*(F){const N=yield gt()._get(qt(F));return N&&(yield gt()._remove(qt(F))),N})).apply(this,arguments)}function xt(){const F=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let k=0;k<20;k++){const Y=Math.floor(Math.random()*N.length);F.push(N.charAt(Y))}return F.join("")}function gt(){return(0,R.aC)(R.b)}function qt(F){return(0,R.aD)("authEvent",F.config.apiKey,F.name)}function pr(F){if(!F?.includes("?"))return{};const[N,...k]=F.split("?");return(0,ie.zd)(k.join("?"))}function te(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.az)("no-auth-event")}}function ut(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function en(F=(0,ie.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){try{const F=self.localStorage,N=R.aL();if(F)return F.setItem(N,"1"),F.removeItem(N),!function pn(F=(0,ie.z$)()){return function rn(){return(0,ie.w1)()&&11===document?.documentMode}()||function kn(F=(0,ie.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,ie.hl)()}catch{return Sn()&&(0,ie.hl)()}return!1}function Sn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Dt(){return"http:"===ut()||"https:"===ut()}()||(0,ie.ru)()||en())&&!function Pt(){return(0,ie.b$)()||(0,ie.UG)()}()&&Qn()&&!Sn()}function gr(){return en()&&typeof document<"u"}function lt(){return(lt=(0,o.Z)(function*(){return!!gr()&&new Promise(F=>{const N=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),F(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},zn=R.aA,Ui="persistence";function Nn(F){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,o.Z)(function*(F){yield F._initializationPromise;const N=dt(),k=R.aD(Ui,F.config.apiKey,F.name);N&&N.setItem(k,F._getPersistence())})).apply(this,arguments)}function dt(){var F;try{return(null===(F=function mr(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const It=R.aA;class tn{constructor(){this.browserResolver=R.aC(R.k),this.cordovaResolver=R.aC(class ss{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(N){var k=this;return(0,o.Z)(function*(){const Y=N._key();let be=k.eventManagers.get(Y);return be||(be=new Ie(N),k.eventManagers.set(Y,be),k.attachCallbackListeners(N,be)),be})()}_openPopup(N){(0,R.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,k,Y,be){var Ke=this;return(0,o.Z)(function*(){!function Ce(F){var N,k,Y,be,Ke,mt,Ee,tt,at,Qt;const Lt=ve();(0,R.aA)("function"==typeof(null===(N=Lt?.universalLinks)||void 0===N?void 0:N.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aA)(typeof(null===(k=Lt?.BuildInfo)||void 0===k?void 0:k.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aA)("function"==typeof(null===(Ke=null===(be=null===(Y=Lt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===be?void 0:be.browsertab)||void 0===Ke?void 0:Ke.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(tt=null===(Ee=null===(mt=Lt?.cordova)||void 0===mt?void 0:mt.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===tt?void 0:tt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(Qt=null===(at=Lt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Qt?void 0:Qt.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const mt=yield Ke._initialize(N);yield mt.initialized(),mt.resetRedirect(),(0,R.aG)(),yield Ke._originValidation(N);const Ee=function Se(F,N,k=null){return{type:N,eventId:k,urlResponse:null,sessionId:xt(),postBody:null,tenantId:F.tenantId,error:(0,R.az)(F,"no-auth-event")}}(N,Y,be);yield function qe(F,N){return gt()._set(qt(F),N)}(N,Ee);const tt=yield function Z(F,N,k){return q.apply(this,arguments)}(N,Ee,k),at=yield function Oe(F){const{cordova:N}=ve();return new Promise(k=>{N.plugins.browsertab.isAvailable(Y=>{let be=null;Y?N.plugins.browsertab.openUrl(F):be=N.InAppBrowser.open(F,(0,R.ay)()?"_blank":"_system","location=yes"),k(be)})})}(tt);return function De(F,N,k){return it.apply(this,arguments)}(N,mt,at)})()}_isIframeWebStorageSupported(N,k){throw new Error("Method not implemented.")}_originValidation(N){const k=N._key();return this.originValidationPromises[k]||(this.originValidationPromises[k]=function J(F){return He.apply(this,arguments)}(N)),this.originValidationPromises[k]}attachCallbackListeners(N,k){const{universalLinks:Y,handleOpenURL:be,BuildInfo:Ke}=ve(),mt=setTimeout((0,o.Z)(function*(){yield Ze(N),k.onEvent(te())}),500),Ee=function(){var Qt=(0,o.Z)(function*(Lt){clearTimeout(mt);const on=yield Ze(N);let $r=null;on&&Lt?.url&&($r=function Qe(F,N){var k,Y;const be=function is(F){const N=pr(F),k=N.link?decodeURIComponent(N.link):void 0,Y=pr(k).link,be=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return pr(be).link||be||Y||k||F}(N);if(be.includes("/__/auth/callback")){const Ke=pr(be),mt=Ke.firebaseError?function ct(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(Ke.firebaseError)):null,Ee=null===(Y=null===(k=mt?.code)||void 0===k?void 0:k.split("auth/"))||void 0===Y?void 0:Y[1],tt=Ee?(0,R.az)(Ee):null;return tt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:be,postBody:null}}return null}(on,Lt.url)),k.onEvent($r||te())});return function(on){return Qt.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,Ee);const tt=be,at=`${Ke.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var Qt=(0,o.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(at)&&Ee({url:Lt}),"function"==typeof tt)try{tt(Lt)}catch(on){console.error(on)}});return function(Lt){return Qt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(N){var k=this;return(0,o.Z)(function*(){return yield k.selectUnderlyingResolver(),k.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,k,Y,be){var Ke=this;return(0,o.Z)(function*(){return yield Ke.selectUnderlyingResolver(),Ke.assertedUnderlyingResolver._openPopup(N,k,Y,be)})()}_openRedirect(N,k,Y,be){var Ke=this;return(0,o.Z)(function*(){return yield Ke.selectUnderlyingResolver(),Ke.assertedUnderlyingResolver._openRedirect(N,k,Y,be)})()}_isIframeWebStorageSupported(N,k){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,k)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,o.Z)(function*(){if(N.underlyingResolver)return;const k=yield function wi(){return lt.apply(this,arguments)}();N.underlyingResolver=k?N.cordovaResolver:N.browserResolver})()}}function Qr(F){return F.unwrap()}function rr(F){return Zn(F)}function Zn(F){const{_tokenResponse:N}=F instanceof ie.ZR?F.customData:F;if(!N)return null;if(!(F instanceof ie.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return R.P.credentialFromResult(F);const k=N.providerId;if(!k||k===R.p.PASSWORD)return null;let Y;switch(k){case R.p.GOOGLE:Y=R.V;break;case R.p.FACEBOOK:Y=R.U;break;case R.p.GITHUB:Y=R.W;break;case R.p.TWITTER:Y=R.Z;break;default:const{oauthIdToken:be,oauthAccessToken:Ke,oauthTokenSecret:mt,pendingToken:Ee,nonce:tt}=N;return Ke||mt||be||Ee?Ee?k.startsWith("saml.")?R.aO._create(k,Ee):R.L._fromParams({providerId:k,signInMethod:k,pendingToken:Ee,idToken:be,accessToken:Ke}):new R.X(k).credential({idToken:be,accessToken:Ke,rawNonce:tt}):null}return F instanceof ie.ZR?Y.credentialFromError(F):Y.credentialFromResult(F)}function Zt(F,N){return N.catch(k=>{throw k instanceof ie.ZR&&function St(F,N){var k;const Y=null===(k=N.customData)||void 0===k?void 0:k._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new jn(F,R.aq(F,N));else if(Y){const be=Zn(N),Ke=N;be&&(Ke.credential=be,Ke.tenantId=Y.tenantId||void 0,Ke.email=Y.email||void 0,Ke.phoneNumber=Y.phoneNumber||void 0)}}(F,k),k}).then(k=>{const be=k.user;return{operationType:k.operationType,credential:rr(k),additionalUserInfo:R.ao(k),user:En.getOrCreate(be)}})}function os(F,N){return sn.apply(this,arguments)}function sn(){return(sn=(0,o.Z)(function*(F,N){const k=yield N;return{verificationId:k.verificationId,confirm:Y=>Zt(F,k.confirm(Y))}})).apply(this,arguments)}class jn{constructor(N,k){this.resolver=k,this.auth=function _r(F){return F.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Zt(Qr(this.auth),this.resolver.resolveSignIn(N))}}class En{constructor(N){this._delegate=N,this.multiFactor=R.ar(N)}static getOrCreate(N){return En.USER_MAP.has(N)||En.USER_MAP.set(N,new En(N)),En.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var k=this;return(0,o.Z)(function*(){return Zt(k.auth,R.a0(k._delegate,N))})()}linkWithPhoneNumber(N,k){var Y=this;return(0,o.Z)(function*(){return os(Y.auth,R.l(Y._delegate,N,k))})()}linkWithPopup(N){var k=this;return(0,o.Z)(function*(){return Zt(k.auth,R.d(k._delegate,N,tn))})()}linkWithRedirect(N){var k=this;return(0,o.Z)(function*(){return yield Nn(R.aH(k.auth)),R.g(k._delegate,N,tn)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var k=this;return(0,o.Z)(function*(){return Zt(k.auth,R.a1(k._delegate,N))})()}reauthenticateWithPhoneNumber(N,k){return os(this.auth,R.r(this._delegate,N,k))}reauthenticateWithPopup(N){return Zt(this.auth,R.e(this._delegate,N,tn))}reauthenticateWithRedirect(N){var k=this;return(0,o.Z)(function*(){return yield Nn(R.aH(k.auth)),R.h(k._delegate,N,tn)})()}sendEmailVerification(N){return R.ae(this._delegate,N)}unlink(N){var k=this;return(0,o.Z)(function*(){return yield R.an(k._delegate,N),k})()}updateEmail(N){return R.aj(this._delegate,N)}updatePassword(N){return R.ak(this._delegate,N)}updatePhoneNumber(N){return R.u(this._delegate,N)}updateProfile(N){return R.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,k){return R.af(this._delegate,N,k)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}En.USER_MAP=new WeakMap;const Xn=R.aA;let On=(()=>{class F{constructor(k,Y){if(this.app=k,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=k.options;Xn(be,"invalid-api-key",{appName:k.name}),Xn(be,"invalid-api-key",{appName:k.name});const Ke=typeof window<"u"?tn:void 0;this._delegate=Y.initialize({options:{persistence:er(be,k.name),popupRedirectResolver:Ke}}),this._delegate._updateErrorMap(R.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?En.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(k){this._delegate.languageCode=k}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(k){this._delegate.tenantId=k}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(k,Y){R.I(this._delegate,k,Y)}applyActionCode(k){return R.a5(this._delegate,k)}checkActionCode(k){return R.a6(this._delegate,k)}confirmPasswordReset(k,Y){return R.a4(this._delegate,k,Y)}createUserWithEmailAndPassword(k,Y){var be=this;return(0,o.Z)(function*(){return Zt(be._delegate,R.a8(be._delegate,k,Y))})()}fetchProvidersForEmail(k){return this.fetchSignInMethodsForEmail(k)}fetchSignInMethodsForEmail(k){return R.ad(this._delegate,k)}isSignInWithEmailLink(k){return R.ab(this._delegate,k)}getRedirectResult(){var k=this;return(0,o.Z)(function*(){Xn(Bn(),k._delegate,"operation-not-supported-in-this-environment");const Y=yield R.j(k._delegate,tn);return Y?Zt(k._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(k){!function Ae(F,N){(0,R.aH)(F)._logFramework(N)}(this._delegate,k)}onAuthStateChanged(k,Y,be){const{next:Ke,error:mt,complete:Ee}=Jr(k,Y,be);return this._delegate.onAuthStateChanged(Ke,mt,Ee)}onIdTokenChanged(k,Y,be){const{next:Ke,error:mt,complete:Ee}=Jr(k,Y,be);return this._delegate.onIdTokenChanged(Ke,mt,Ee)}sendSignInLinkToEmail(k,Y){return R.aa(this._delegate,k,Y)}sendPasswordResetEmail(k,Y){return R.a3(this._delegate,k,Y||void 0)}setPersistence(k){var Y=this;return(0,o.Z)(function*(){let be;switch(function Yr(F,N){zn(Object.values(Jn).includes(N),F,"invalid-persistence-type"),(0,ie.b$)()?zn(N!==Jn.SESSION,F,"unsupported-persistence-type"):(0,ie.UG)()?zn(N===Jn.NONE,F,"unsupported-persistence-type"):Sn()?zn(N===Jn.NONE||N===Jn.LOCAL&&(0,ie.hl)(),F,"unsupported-persistence-type"):zn(N===Jn.NONE||Qn(),F,"unsupported-persistence-type")}(Y._delegate,k),k){case Jn.SESSION:be=R.a;break;case Jn.LOCAL:be=(yield R.aC(R.i)._isAvailable())?R.i:R.b;break;case Jn.NONE:be=R.N;break;default:return R.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(k){return this.signInWithCredential(k)}signInAnonymously(){return Zt(this._delegate,R._(this._delegate))}signInWithCredential(k){return Zt(this._delegate,R.$(this._delegate,k))}signInWithCustomToken(k){return Zt(this._delegate,R.a2(this._delegate,k))}signInWithEmailAndPassword(k,Y){return Zt(this._delegate,R.a9(this._delegate,k,Y))}signInWithEmailLink(k,Y){return Zt(this._delegate,R.ac(this._delegate,k,Y))}signInWithPhoneNumber(k,Y){return os(this._delegate,R.s(this._delegate,k,Y))}signInWithPopup(k){var Y=this;return(0,o.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),Zt(Y._delegate,R.c(Y._delegate,k,tn))})()}signInWithRedirect(k){var Y=this;return(0,o.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),yield Nn(Y._delegate),R.f(Y._delegate,k,tn)})()}updateCurrentUser(k){return this._delegate.updateCurrentUser(k)}verifyPasswordResetCode(k){return R.a7(this._delegate,k)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Jn,F})();function Jr(F,N,k){let Y=F;"function"!=typeof F&&({next:Y,error:N,complete:k}=F);const be=Y;return{next:mt=>be(mt&&En.getOrCreate(mt)),error:N,complete:k}}function er(F,N){const k=function zt(F,N){const k=dt();if(!k)return[];const Y=R.aD(Ui,F,N);switch(k.getItem(Y)){case Jn.NONE:return[R.N];case Jn.LOCAL:return[R.i,R.a];case Jn.SESSION:return[R.a];default:return[]}}(F,N);if(typeof self<"u"&&!k.includes(R.i)&&k.push(R.i),typeof window<"u")for(const Y of[R.b,R.a])k.includes(Y)||k.push(Y);return k.includes(R.N)||k.push(R.N),k}class Ci{constructor(){this.providerId="phone",this._delegate=new R.P(Qr($.Z.auth()))}static credential(N,k){return R.P.credential(N,k)}verifyPhoneNumber(N,k){return this._delegate.verifyPhoneNumber(N,k)}unwrap(){return this._delegate}}Ci.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,Ci.PROVIDER_ID=R.P.PROVIDER_ID;const yr=R.aA;class jr{constructor(N,k,Y=$.Z.app()){var be;yr(null===(be=Y.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new R.R(N,k,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(F){F.INTERNAL.registerComponent(new pe.wA("auth-compat",N=>{const k=N.getProvider("app-compat").getImmediate(),Y=N.getProvider("auth");return new On(k,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.Q,FacebookAuthProvider:R.U,GithubAuthProvider:R.W,GoogleAuthProvider:R.V,OAuthProvider:R.X,SAMLAuthProvider:R.Y,PhoneAuthProvider:Ci,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:jr,TwitterAuthProvider:R.Z,Auth:On,AuthCredential:R.J,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(bt,Ne,U)=>{function o(R,ie,de,_e,pe,ve,we){try{var Z=R[ve](we),q=Z.value}catch(J){return void de(J)}Z.done?ie(q):Promise.resolve(q).then(_e,pe)}function $(R){return function(){var ie=this,de=arguments;return new Promise(function(_e,pe){var ve=R.apply(ie,de);function we(q){o(ve,_e,pe,we,Z,"next",q)}function Z(q){o(ve,_e,pe,we,Z,"throw",q)}we(void 0)})}}U.d(Ne,{Z:()=>$})},7582:(bt,Ne,U)=>{function ie(se,te){var Ae={};for(var fe in se)Object.prototype.hasOwnProperty.call(se,fe)&&te.indexOf(fe)<0&&(Ae[fe]=se[fe]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var ke=0;for(fe=Object.getOwnPropertySymbols(se);ke<fe.length;ke++)te.indexOf(fe[ke])<0&&Object.prototype.propertyIsEnumerable.call(se,fe[ke])&&(Ae[fe[ke]]=se[fe[ke]])}return Ae}function J(se,te,Ae,fe){return new(Ae||(Ae=Promise))(function(Me,ut){function Dt(rn){try{Pt(fe.next(rn))}catch(kn){ut(kn)}}function en(rn){try{Pt(fe.throw(rn))}catch(kn){ut(kn)}}function Pt(rn){rn.done?Me(rn.value):function ke(Me){return Me instanceof Ae?Me:new Ae(function(ut){ut(Me)})}(rn.value).then(Dt,en)}Pt((fe=fe.apply(se,te||[])).next())})}function xe(se){return this instanceof xe?(this.v=se,this):new xe(se)}function Ie(se,te,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ke,fe=Ae.apply(se,te||[]),Me=[];return ke={},ut("next"),ut("throw"),ut("return"),ke[Symbol.asyncIterator]=function(){return this},ke;function ut(pn){fe[pn]&&(ke[pn]=function(Qn){return new Promise(function(Sn,Bn){Me.push([pn,Qn,Sn,Bn])>1||Dt(pn,Qn)})})}function Dt(pn,Qn){try{!function en(pn){pn.value instanceof xe?Promise.resolve(pn.value.v).then(Pt,rn):kn(Me[0][2],pn)}(fe[pn](Qn))}catch(Sn){kn(Me[0][3],Sn)}}function Pt(pn){Dt("next",pn)}function rn(pn){Dt("throw",pn)}function kn(pn,Qn){pn(Qn),Me.shift(),Me.length&&Dt(Me[0][0],Me[0][1])}}function qe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,te=se[Symbol.asyncIterator];return te?te.call(se):(se=function it(se){var te="function"==typeof Symbol&&Symbol.iterator,Ae=te&&se[te],fe=0;if(Ae)return Ae.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&fe>=se.length&&(se=void 0),{value:se&&se[fe++],done:!se}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),Ae={},fe("next"),fe("throw"),fe("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function fe(Me){Ae[Me]=se[Me]&&function(ut){return new Promise(function(Dt,en){!function ke(Me,ut,Dt,en){Promise.resolve(en).then(function(Pt){Me({value:Pt,done:Dt})},ut)}(Dt,en,(ut=se[Me](ut)).done,ut.value)})}}}U.d(Ne,{FC:()=>Ie,KL:()=>qe,_T:()=>ie,mG:()=>J,qq:()=>xe}),"function"==typeof SuppressedError&&SuppressedError}},bt=>{bt(bt.s=5935)}]);