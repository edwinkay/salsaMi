"use strict";(self.webpackChunkasi_somos_asi_bailamos=self.webpackChunkasi_somos_asi_bailamos||[]).push([[179],{2011:(bt,Ne,U)=>{U.d(Ne,{Dh:()=>ve,GT:()=>_e,cc:()=>Oe,hO:()=>$e,on:()=>z,pX:()=>de,xv:()=>Ce});var o=U(4650),H=U(9260),R=U(4976);bt=U.hmd(bt);const oe=["ngOnDestroy"],de=(ye,yt,pt,Ae={})=>new Proxy(ye,{get:(Ee,Se)=>pt.runOutsideAngular(()=>{var qe;if(ye[Se])return!(null===(qe=Ae?.spy)||void 0===qe)&&qe.get&&Ae.spy.get(Se,ye[Se]),ye[Se];if(oe.indexOf(Se)>-1)return()=>{};const ze=yt.toPromise().then(ue=>{const Qe=ue&&ue[Se];return"function"==typeof Qe?Qe.bind(ue):Qe&&Qe.then?Qe.then(At=>pt.run(()=>At)):pt.run(()=>Qe)});return new Proxy(()=>{},{get:(ue,Qe)=>ze[Qe],apply:(ue,Qe,At)=>ze.then(gt=>{var Gt;const ut=gt&&gt(...At);return!(null===(Gt=Ae?.spy)||void 0===Gt)&&Gt.apply&&Ae.spy.apply(Se,At,ut),ut})})})}),_e=(ye,yt)=>{yt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(Ae=>{Object.defineProperty(ye.prototype,Ae,Object.getOwnPropertyDescriptor(pt.prototype||pt,Ae))})})};class pe{constructor(yt){return yt}}const ve=new o.OlP("angularfire2.app.options"),Ce=new o.OlP("angularfire2.app.name");function z(ye,yt,pt){const Ee="object"==typeof pt&&pt||{};Ee.name=Ee.name||"string"==typeof pt&&pt||"[DEFAULT]";const qe=H.Z.apps.filter(ze=>ze&&ze.name===Ee.name)[0]||yt.runOutsideAngular(()=>H.Z.initializeApp(ye,Ee));try{JSON.stringify(ye)!==JSON.stringify(qe.options)&&G("error",`${qe.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(qe)}const G=(ye,...yt)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ye](...yt)},J={provide:pe,useFactory:z,deps:[ve,o.R0b,[new o.FiY,Ce]]};let $e=(()=>{class ye{constructor(pt){H.Z.registerVersion("angularfire",R.q4.full,"core"),H.Z.registerVersion("angularfire",R.q4.full,"app-compat"),H.Z.registerVersion("angular",o.q4F.full,pt.toString())}static initializeApp(pt,Ae){return{ngModule:ye,providers:[{provide:ve,useValue:pt},{provide:Ce,useValue:Ae}]}}}return ye.\u0275fac=function(pt){return new(pt||ye)(o.LFG(o.Lbi))},ye.\u0275mod=o.oAB({type:ye}),ye.\u0275inj=o.cJS({providers:[J]}),ye})();function Oe(ye,yt,pt,Ae,Ee){const[,Se,qe]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===ye)||[];if(Se)return function xe(ye,yt){try{return ye.toString()===yt.toString()}catch{return ye===yt}}(Ee,qe)||(we("error",`${yt} was already initialized on the ${pt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Ee,was:qe})),Se;{const ze=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ye,ze,Ee]),ze}}const it=!!bt.hot,we=(ye,...yt)=>{(0,o.X6Q)()&&typeof console<"u"&&console[ye](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(bt,Ne,U)=>{U.d(Ne,{q4:()=>ol,iC:()=>ei,fc:()=>wf,HU:()=>oc,vb:()=>Kd,JM:()=>aa,u3:()=>la});var o=U(4650),H=U(259),R=U(5861),oe=U(6881),de=U(2090),_e=U(4859),pe=U(1877);let Ce,z;const $e=new WeakMap,Oe=new WeakMap,xe=new WeakMap,it=new WeakMap,we=new WeakMap;let pt={get(w,T,S){if(w instanceof IDBTransaction){if("done"===T)return Oe.get(w);if("objectStoreNames"===T)return w.objectStoreNames||xe.get(w);if("store"===T)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return qe(w[T])},set:(w,T,S)=>(w[T]=S,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function Se(w){return"function"==typeof w?function Ee(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(ze(this),T),qe($e.get(this))}:function(...T){return qe(w.apply(ze(this),T))}:function(T,...S){const V=w.call(ze(this),T,...S);return xe.set(V,T.sort?T.sort():[T]),qe(V)}}(w):(w instanceof IDBTransaction&&function yt(w){if(Oe.has(w))return;const T=new Promise((S,V)=>{const W=()=>{w.removeEventListener("complete",X),w.removeEventListener("error",me),w.removeEventListener("abort",me)},X=()=>{S(),W()},me=()=>{V(w.error||new DOMException("AbortError","AbortError")),W()};w.addEventListener("complete",X),w.addEventListener("error",me),w.addEventListener("abort",me)});Oe.set(w,T)}(w),((w,T)=>T.some(S=>w instanceof S))(w,function G(){return Ce||(Ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,pt):w)}function qe(w){if(w instanceof IDBRequest)return function ye(w){const T=new Promise((S,V)=>{const W=()=>{w.removeEventListener("success",X),w.removeEventListener("error",me)},X=()=>{S(qe(w.result)),W()},me=()=>{V(w.error),W()};w.addEventListener("success",X),w.addEventListener("error",me)});return T.then(S=>{S instanceof IDBCursor&&$e.set(S,w)}).catch(()=>{}),we.set(T,w),T}(w);if(it.has(w))return it.get(w);const T=Se(w);return T!==w&&(it.set(w,T),we.set(T,w)),T}const ze=w=>we.get(w),At=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],Gt=new Map;function ut(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Gt.get(T))return Gt.get(T);const S=T.replace(/FromIndex$/,""),V=T!==S,W=gt.includes(S);if(!(S in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!At.includes(S))return;const X=function(){var me=(0,R.Z)(function*(Je,...We){const et=this.transaction(Je,W?"readwrite":"readonly");let Lt=et.store;return V&&(Lt=Lt.index(We.shift())),(yield Promise.all([Lt[S](...We),W&&et.done]))[0]});return function(We){return me.apply(this,arguments)}}();return Gt.set(T,X),X}!function Ae(w){pt=w(pt)}(w=>({...w,get:(T,S,V)=>ut(T,S)||w.get(T,S,V),has:(T,S)=>!!ut(T,S)||w.has(T,S)}));const oo="@firebase/installations",so="w:0.6.4",se="FIS_v2",lt=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function xt(w){return w instanceof de.ZR&&w.code.includes("request-failed")}function en({projectId:w}){return`https://firebaseinstallations.googleapis.com/v1/projects/${w}/installations`}function kt(w){return{token:w.token,requestStatus:2,expiresIn:mr(w.expiresIn),creationTime:Date.now()}}function on(w,T){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,R.Z)(function*(w,T){const V=(yield T.json()).error;return lt.create("request-failed",{requestName:w,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function pn({apiKey:w}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w})}function Qn(w,{refreshToken:T}){const S=pn(w);return S.append("Authorization",function Ii(w){return`${se} ${w}`}(T)),S}function Sn(w){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,R.Z)(function*(w){const T=yield w();return T.status>=500&&T.status<600?w():T})).apply(this,arguments)}function mr(w){return Number(w.replace("s","000"))}function ct(w,T){return _r.apply(this,arguments)}function _r(){return(_r=(0,R.Z)(function*({appConfig:w,heartbeatServiceProvider:T},{fid:S}){const V=en(w),W=pn(w),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Je={method:"POST",headers:W,body:JSON.stringify({fid:S,authVersion:se,appId:w.appId,sdkVersion:so})},We=yield Sn(()=>fetch(V,Je));if(We.ok){const et=yield We.json();return{fid:et.fid||S,registrationStatus:2,refreshToken:et.refreshToken,authToken:kt(et.authToken)}}throw yield on("Create Installation",We)})).apply(this,arguments)}function Jn(w){return new Promise(T=>{setTimeout(T,w)})}const ji=/^[cdef][\w-]{21}$/;function Nn(){try{const w=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(w),w[0]=112+w[0]%16;const S=function Mn(w){return function qn(w){return btoa(String.fromCharCode(...w)).replace(/\+/g,"-").replace(/\//g,"_")}(w).substr(0,22)}(w);return ji.test(S)?S:""}catch{return""}}function qt(w){return`${w.appName}!${w.appId}`}const dt=new Map;function Et(w,T){const S=qt(w);yr(S,T),function ir(w,T){const S=function zn(){return!St&&"BroadcastChannel"in self&&(St=new BroadcastChannel("[Firebase] FID Change"),St.onmessage=w=>{yr(w.data.key,w.data.fid)}),St}();S&&S.postMessage({key:w,fid:T}),function zt(){0===dt.size&&St&&(St.close(),St=null)}()}(S,T)}function yr(w,T){const S=dt.get(w);if(S)for(const V of S)V(T)}let St=null;const jn="firebase-installations-store";let In=null;function Xn(){return In||(In=function ue(w,T,{blocked:S,upgrade:V,blocking:W,terminated:X}={}){const me=indexedDB.open(w,T),Je=qe(me);return V&&me.addEventListener("upgradeneeded",We=>{V(qe(me.result),We.oldVersion,We.newVersion,qe(me.transaction))}),S&&me.addEventListener("blocked",()=>S()),Je.then(We=>{X&&We.addEventListener("close",()=>X()),W&&We.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}("firebase-installations-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(jn)}})),In}function On(w,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,R.Z)(function*(w,T){const S=qt(w),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(S);return yield X.put(T,S),yield W.done,(!me||me.fid!==T.fid)&&Et(w,T.fid),T})).apply(this,arguments)}function er(w){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,R.Z)(function*(w){const T=qt(w),V=(yield Xn()).transaction(jn,"readwrite");yield V.objectStore(jn).delete(T),yield V.done})).apply(this,arguments)}function vr(w,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,R.Z)(function*(w,T){const S=qt(w),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(S),Je=T(me);return void 0===Je?yield X.delete(S):yield X.put(Je,S),yield W.done,Je&&(!me||me.fid!==Je.fid)&&Et(w,Je.fid),Je})).apply(this,arguments)}function Z(w){return $.apply(this,arguments)}function $(){return($=(0,R.Z)(function*(w){let T;const S=yield vr(w.appConfig,V=>{const W=F(V),X=N(w,W);return T=X.registrationPromise,X.installationEntry});return""===S.fid?{installationEntry:yield T}:{installationEntry:S,registrationPromise:T}})).apply(this,arguments)}function F(w){return Ie(w||{fid:Nn(),registrationStatus:0})}function N(w,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(lt.create("app-offline"))};const S={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function P(w,T){return Y.apply(this,arguments)}(w,S);return{installationEntry:S,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:be(w)}:{installationEntry:T}}function Y(){return(Y=(0,R.Z)(function*(w,T){try{const S=yield ct(w,T);return On(w.appConfig,S)}catch(S){throw xt(S)&&409===S.customData.serverCode?yield er(w.appConfig):yield On(w.appConfig,{fid:T.fid,registrationStatus:0}),S}})).apply(this,arguments)}function be(w){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,R.Z)(function*(w){let T=yield mt(w.appConfig);for(;1===T.registrationStatus;)yield Jn(100),T=yield mt(w.appConfig);if(0===T.registrationStatus){const{installationEntry:S,registrationPromise:V}=yield Z(w);return V||S}return T})).apply(this,arguments)}function mt(w){return vr(w,T=>{if(!T)throw lt.create("installation-not-found");return Ie(T)})}function Ie(w){return function tt(w){return 1===w.registrationStatus&&w.registrationTime+1e4<Date.now()}(w)?{fid:w.fid,registrationStatus:0}:w}function at(w,T){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,R.Z)(function*({appConfig:w,heartbeatServiceProvider:T},S){const V=Ft(w,S),W=Qn(w,S),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Je={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:so,appId:w.appId}})},We=yield Sn(()=>fetch(V,Je));if(We.ok)return kt(yield We.json());throw yield on("Generate Auth Token",We)})).apply(this,arguments)}function Ft(w,{fid:T}){return`${en(w)}/${T}/authTokens:generate`}function an(w){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,R.Z)(function*(w,T=!1){let S;const V=yield vr(w.appConfig,X=>{if(!Ht(X))throw lt.create("not-registered");const me=X.authToken;if(!T&&gn(me))return X;if(1===me.requestStatus)return S=le(w,T),X;{if(!navigator.onLine)throw lt.create("app-offline");const Je=Jt(X);return S=Ve(w,Je),Je}});return S?yield S:V.authToken})).apply(this,arguments)}function le(w,T){return ie.apply(this,arguments)}function ie(){return(ie=(0,R.Z)(function*(w,T){let S=yield Le(w.appConfig);for(;1===S.authToken.requestStatus;)yield Jn(100),S=yield Le(w.appConfig);const V=S.authToken;return 0===V.requestStatus?an(w,T):V})).apply(this,arguments)}function Le(w){return vr(w,T=>{if(!Ht(T))throw lt.create("not-registered");return function $r(w){return 1===w.requestStatus&&w.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ve(w,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,R.Z)(function*(w,T){try{const S=yield at(w,T),V=Object.assign(Object.assign({},T),{authToken:S});return yield On(w.appConfig,V),S}catch(S){if(!xt(S)||401!==S.customData.serverCode&&404!==S.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield On(w.appConfig,V)}else yield er(w.appConfig);throw S}})).apply(this,arguments)}function Ht(w){return void 0!==w&&2===w.registrationStatus}function gn(w){return 2===w.requestStatus&&!function Hn(w){const T=Date.now();return T<w.creationTime||w.creationTime+w.expiresIn<T+36e5}(w)}function Jt(w){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},w),{authToken:T})}function ai(){return(ai=(0,R.Z)(function*(w){const T=w,{installationEntry:S,registrationPromise:V}=yield Z(T);return V?V.catch(console.error):an(T).catch(console.error),S.fid})).apply(this,arguments)}function Da(){return(Da=(0,R.Z)(function*(w,T=!1){const S=w;return yield tn(S),(yield an(S,T)).token})).apply(this,arguments)}function tn(w){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,R.Z)(function*(w){const{registrationPromise:T}=yield Z(w);T&&(yield T)})).apply(this,arguments)}function Tr(w){return lt.create("missing-app-config-values",{valueName:w})}const Zr="installations",Eo=w=>{const T=w.getProvider("app").getImmediate(),S=function _d(w){if(!w||!w.options)throw Tr("App Configuration");if(!w.name)throw Tr("App Name");const T=["projectId","apiKey","appId"];for(const S of T)if(!w.options[S])throw Tr(S);return{appName:w.name,projectId:w.options.projectId,apiKey:w.options.apiKey,appId:w.options.appId}}(T);return{app:T,appConfig:S,heartbeatServiceProvider:(0,oe._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Ma=w=>{const T=w.getProvider("app").getImmediate(),S=(0,oe._getProvider)(T,Zr).getImmediate();return{getId:()=>function Hi(w){return ai.apply(this,arguments)}(S),getToken:W=>function xa(w){return Da.apply(this,arguments)}(S,W)}};(function xi(){(0,oe._registerComponent)(new _e.wA(Zr,Eo,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("installations-internal",Ma,"PRIVATE"))})(),(0,oe.registerVersion)(oo,"0.6.4"),(0,oe.registerVersion)(oo,"0.6.4","esm2017");const ka="@firebase/remote-config",kn=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Zc{constructor(T,S,V,W){this.client=T,this.storage=S,this.storageCache=V,this.logger=W}isCachedDataFresh(T,S){if(!S)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-S,W=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var S=this;return(0,R.Z)(function*(){const[V,W]=yield Promise.all([S.storage.getLastSuccessfulFetchTimestampMillis(),S.storage.getLastSuccessfulFetchResponse()]);if(W&&S.isCachedDataFresh(T.cacheMaxAgeMillis,V))return W;T.eTag=W&&W.eTag;const X=yield S.client.fetch(T),me=[S.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&me.push(S.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(me),X})()}}function Al(w=navigator){return w.languages&&w.languages[0]||w.language}class Gc{constructor(T,S,V,W,X,me){this.firebaseInstallations=T,this.sdkVersion=S,this.namespace=V,this.projectId=W,this.apiKey=X,this.appId=me}fetch(T){var S=this;return(0,R.Z)(function*(){const[V,W]=yield Promise.all([S.firebaseInstallations.getId(),S.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${S.projectId}/namespaces/${S.namespace}:fetch?key=${S.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},We={sdk_version:S.sdkVersion,app_instance_id:V,app_instance_id_token:W,app_id:S.appId,language_code:Al()},et={method:"POST",headers:Je,body:JSON.stringify(We)},Lt=fetch(me,et),Nt=new Promise((ti,Rr)=>{T.signal.addEventListener(()=>{const ua=new Error("The operation was aborted.");ua.name="AbortError",Rr(ua)})});let Nr;try{yield Promise.race([Lt,Nt]),Nr=yield Lt}catch(ti){let Rr="fetch-client-network";throw"AbortError"===ti?.name&&(Rr="fetch-timeout"),kn.create(Rr,{originalErrorMessage:ti?.message})}let hn=Nr.status;const fo=Nr.headers.get("ETag")||void 0;let ca,po;if(200===Nr.status){let ti;try{ti=yield Nr.json()}catch(Rr){throw kn.create("fetch-client-parse",{originalErrorMessage:Rr?.message})}ca=ti.entries,po=ti.state}if("INSTANCE_STATE_UNSPECIFIED"===po?hn=500:"NO_CHANGE"===po?hn=304:("NO_TEMPLATE"===po||"EMPTY_CONFIG"===po)&&(ca={}),304!==hn&&200!==hn)throw kn.create("fetch-status",{httpStatus:hn});return{status:hn,eTag:fo,config:ca}})()}}class qc{constructor(T,S){this.client=T,this.storage=S}fetch(T){var S=this;return(0,R.Z)(function*(){const V=(yield S.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return S.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:S,backoffCount:V}){var W=this;return(0,R.Z)(function*(){yield function Oa(w,T){return new Promise((S,V)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(S,W);w.addEventListener(()=>{clearTimeout(X),V(kn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,S);try{const X=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function Ed(w){if(!(w instanceof de.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const me={throttleEndTimeMillis:Date.now()+(0,de.$s)(V),backoffCount:V+1};return yield W.storage.setThrottleMetadata(me),W.attemptFetch(T,me)}})()}}class zc{constructor(T,S,V,W,X){this.app=T,this._client=S,this._storageCache=V,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wn(w,T){const S=w.target.error||void 0;return kn.create(T,{originalErrorMessage:S&&S?.message})}const To="app_namespace_store";class rf{constructor(T,S,V,W=function L_(){return new Promise((w,T)=>{try{const S=indexedDB.open("firebase_remote_config",1);S.onerror=V=>{T(Wn(V,"storage-open"))},S.onsuccess=V=>{w(V.target.result)},S.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(To,{keyPath:"compositeKey"})}}catch(S){T(kn.create("storage-open",{originalErrorMessage:S?.message}))}})}()){this.appId=T,this.appName=S,this.namespace=V,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var S=this;return(0,R.Z)(function*(){const V=yield S.openDbPromise;return new Promise((W,X)=>{const Je=V.transaction([To],"readonly").objectStore(To),We=S.createCompositeKey(T);try{const et=Je.get(We);et.onerror=Lt=>{X(Wn(Lt,"storage-get"))},et.onsuccess=Lt=>{const Nt=Lt.target.result;W(Nt?Nt.value:void 0)}}catch(et){X(kn.create("storage-get",{originalErrorMessage:et?.message}))}})})()}set(T,S){var V=this;return(0,R.Z)(function*(){const W=yield V.openDbPromise;return new Promise((X,me)=>{const We=W.transaction([To],"readwrite").objectStore(To),et=V.createCompositeKey(T);try{const Lt=We.put({compositeKey:et,value:S});Lt.onerror=Nt=>{me(Wn(Nt,"storage-set"))},Lt.onsuccess=()=>{X()}}catch(Lt){me(kn.create("storage-set",{originalErrorMessage:Lt?.message}))}})})()}delete(T){var S=this;return(0,R.Z)(function*(){const V=yield S.openDbPromise;return new Promise((W,X)=>{const Je=V.transaction([To],"readwrite").objectStore(To),We=S.createCompositeKey(T);try{const et=Je.delete(We);et.onerror=Lt=>{X(Wn(Lt,"storage-delete"))},et.onsuccess=()=>{W()}}catch(et){X(kn.create("storage-delete",{originalErrorMessage:et?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class xn{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,R.Z)(function*(){const S=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),X=yield S;X&&(T.lastFetchStatus=X);const me=yield V;me&&(T.lastSuccessfulFetchTimestampMillis=me);const Je=yield W;Je&&(T.activeConfig=Je)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function li(){return xd.apply(this,arguments)}function xd(){return(xd=(0,R.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}let $i,kr;!function $s(){(0,oe._registerComponent)(new _e.wA("remote-config",function w(T,{instanceIdentifier:S}){const V=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw kn.create("registration-window");if(!(0,de.hl)())throw kn.create("indexed-db-unavailable");const{projectId:X,apiKey:me,appId:Je}=V.options;if(!X)throw kn.create("registration-project-id");if(!me)throw kn.create("registration-api-key");if(!Je)throw kn.create("registration-app-id");const We=new rf(Je,V.name,S=S||"firebase"),et=new xn(We),Lt=new pe.Yd(ka);Lt.logLevel=pe.in.ERROR;const Nt=new Gc(W,oe.SDK_VERSION,S,X,me,Je),Nr=new qc(Nt,We),hn=new Zc(Nr,We,et,Lt),fo=new zc(V,hn,et,We,Lt);return function Id(w){const T=(0,de.m9)(w);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(fo),fo},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(ka,"0.4.4"),(0,oe.registerVersion)(ka,"0.4.4","esm2017")}();const Na=new WeakMap,Di=new WeakMap,xr=new WeakMap,Zs=new WeakMap,Pt=new WeakMap;let Jc={get(w,T,S){if(w instanceof IDBTransaction){if("done"===T)return Di.get(w);if("objectStoreNames"===T)return w.objectStoreNames||xr.get(w);if("store"===T)return S.objectStoreNames[1]?void 0:S.objectStore(S.objectStoreNames[0])}return Zi(w[T])},set:(w,T,S)=>(w[T]=S,!0),has:(w,T)=>w instanceof IDBTransaction&&("done"===T||"store"===T)||T in w};function Pl(w){return"function"==typeof w?function sf(w){return w!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ml(){return kr||(kr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(w)?function(...T){return w.apply(Ol(this),T),Zi(Na.get(this))}:function(...T){return Zi(w.apply(Ol(this),T))}:function(T,...S){const V=w.call(Ol(this),T,...S);return xr.set(V,T.sort?T.sort():[T]),Zi(V)}}(w):(w instanceof IDBTransaction&&function Qc(w){if(Di.has(w))return;const T=new Promise((S,V)=>{const W=()=>{w.removeEventListener("complete",X),w.removeEventListener("error",me),w.removeEventListener("abort",me)},X=()=>{S(),W()},me=()=>{V(w.error||new DOMException("AbortError","AbortError")),W()};w.addEventListener("complete",X),w.addEventListener("error",me),w.addEventListener("abort",me)});Di.set(w,T)}(w),((w,T)=>T.some(S=>w instanceof S))(w,function Yc(){return $i||($i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(w,Jc):w)}function Zi(w){if(w instanceof IDBRequest)return function kl(w){const T=new Promise((S,V)=>{const W=()=>{w.removeEventListener("success",X),w.removeEventListener("error",me)},X=()=>{S(Zi(w.result)),W()},me=()=>{V(w.error),W()};w.addEventListener("success",X),w.addEventListener("error",me)});return T.then(S=>{S instanceof IDBCursor&&Na.set(S,w)}).catch(()=>{}),Pt.set(T,w),T}(w);if(Zs.has(w))return Zs.get(w);const T=Pl(w);return T!==w&&(Zs.set(w,T),Pt.set(T,w)),T}const Ol=w=>Pt.get(w);function ke(w,T,{blocked:S,upgrade:V,blocking:W,terminated:X}={}){const me=indexedDB.open(w,T),Je=Zi(me);return V&&me.addEventListener("upgradeneeded",We=>{V(Zi(me.result),We.oldVersion,We.newVersion,Zi(me.transaction))}),S&&me.addEventListener("blocked",()=>S()),Je.then(We=>{X&&We.addEventListener("close",()=>X()),W&&We.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}function Xt(w,{blocked:T}={}){const S=indexedDB.deleteDatabase(w);return T&&S.addEventListener("blocked",()=>T()),Zi(S).then(()=>{})}const Xc=["get","getKey","getAll","getAllKeys","count"],Nl=["put","add","delete","clear"],Kn=new Map;function Ra(w,T){if(!(w instanceof IDBDatabase)||T in w||"string"!=typeof T)return;if(Kn.get(T))return Kn.get(T);const S=T.replace(/FromIndex$/,""),V=T!==S,W=Nl.includes(S);if(!(S in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!Xc.includes(S))return;const X=function(){var me=(0,R.Z)(function*(Je,...We){const et=this.transaction(Je,W?"readwrite":"readonly");let Lt=et.store;return V&&(Lt=Lt.index(We.shift())),(yield Promise.all([Lt[S](...We),W&&et.done]))[0]});return function(We){return me.apply(this,arguments)}}();return Kn.set(T,X),X}!function Dd(w){Jc=w(Jc)}(w=>({...w,get:(T,S,V)=>Ra(T,S)||w.get(T,S,V),has:(T,S)=>!!Ra(T,S)||w.has(T,S)}));const Go="/firebase-messaging-sw.js",Ai="/firebase-cloud-messaging-push-scope",Fa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ad="google.c.a.c_id",Rn="google.c.a.c_l",V_="google.c.a.ts",eu="google.c.a.e";var Gr=(()=>{return(w=Gr||(Gr={})).PUSH_RECEIVED="push-received",w.NOTIFICATION_CLICKED="notification-clicked",Gr;var w})();function ui(w){const T=new Uint8Array(w);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ys(w){const S=(w+"=".repeat((4-w.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(S),W=new Uint8Array(V.length);for(let X=0;X<V.length;++X)W[X]=V.charCodeAt(X);return W}const di="fcm_token_details_db",Sd="fcm_token_object_Store";function Md(w){return Fl.apply(this,arguments)}function Fl(){return Fl=(0,R.Z)(function*(w){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(di))return null;let T=null;return(yield ke(di,5,{upgrade:(V=(0,R.Z)(function*(W,X,me,Je){var We;if(X<2||!W.objectStoreNames.contains(Sd))return;const et=Je.objectStore(Sd),Lt=yield et.index("fcmSenderId").get(w);if(yield et.clear(),Lt)if(2===X){const Nt=Lt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;T={token:Nt.fcmToken,createTime:null!==(We=Nt.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:ui(Nt.vapidKey)}}}else if(3===X){const Nt=Lt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ui(Nt.auth),p256dh:ui(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ui(Nt.vapidKey)}}}else if(4===X){const Nt=Lt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ui(Nt.auth),p256dh:ui(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ui(Nt.vapidKey)}}}}),function(X,me,Je,We){return V.apply(this,arguments)})})).close(),yield Xt(di),yield Xt("fcm_vapid_details_db"),yield Xt("undefined"),Va(T)?T:null;var V}),Fl.apply(this,arguments)}function Va(w){if(!w||!w.subscriptionOptions)return!1;const{subscriptionOptions:T}=w;return"number"==typeof w.createTime&&w.createTime>0&&"string"==typeof w.token&&w.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Xr="firebase-messaging-store";let Ll=null;function nu(){return Ll||(Ll=ke("firebase-messaging-database",1,{upgrade:(w,T)=>{0===T&&w.createObjectStore(Xr)}})),Ll}function vs(w){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,R.Z)(function*(w){const T=Pd(w),V=yield(yield nu()).transaction(Xr).objectStore(Xr).get(T);if(V)return V;{const W=yield Md(w.appConfig.senderId);if(W)return yield Ba(w,W),W}})).apply(this,arguments)}function Ba(w,T){return ru.apply(this,arguments)}function ru(){return(ru=(0,R.Z)(function*(w,T){const S=Pd(w),W=(yield nu()).transaction(Xr,"readwrite");return yield W.objectStore(Xr).put(T,S),yield W.done,T})).apply(this,arguments)}function kd(w){return qo.apply(this,arguments)}function qo(){return(qo=(0,R.Z)(function*(w){const T=Pd(w),V=(yield nu()).transaction(Xr,"readwrite");yield V.objectStore(Xr).delete(T),yield V.done})).apply(this,arguments)}function Pd({appConfig:w}){return w.appId}const dn=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cs(w,T){return An.apply(this,arguments)}function An(){return(An=(0,R.Z)(function*(w,T){const S=yield ja(w),V=ws(T),W={method:"POST",headers:S,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(Od(w.appConfig),W)).json()}catch(me){throw dn.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(X.error)throw dn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function cg(w,T){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,R.Z)(function*(w,T){const S=yield ja(w),V=ws(T.subscriptionOptions),W={method:"PATCH",headers:S,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(`${Od(w.appConfig)}/${T.token}`,W)).json()}catch(me){throw dn.create("token-update-failed",{errorInfo:me?.toString()})}if(X.error)throw dn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-update-no-token");return X.token})).apply(this,arguments)}function af(w,T){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,R.Z)(function*(w,T){const V={method:"DELETE",headers:yield ja(w)};try{const X=yield(yield fetch(`${Od(w.appConfig)}/${T}`,V)).json();if(X.error)throw dn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw dn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Od({projectId:w}){return`https://fcmregistrations.googleapis.com/v1/projects/${w}/registrations`}function ja(w){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,R.Z)(function*({appConfig:w,installations:T}){const S=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":w.apiKey,"x-goog-firebase-installations-auth":`FIS ${S}`})})).apply(this,arguments)}function ws({p256dh:w,auth:T,endpoint:S,vapidKey:V}){const W={web:{endpoint:S,auth:T,p256dh:w}};return V!==Fa&&(W.web.applicationPubKey=V),W}const Bl=6048e5;function jl(w){return iu.apply(this,arguments)}function iu(){return(iu=(0,R.Z)(function*(w){const T=yield Rd(w.swRegistration,w.vapidKey),S={vapidKey:w.vapidKey,swScope:w.swRegistration.scope,endpoint:T.endpoint,auth:ui(T.getKey("auth")),p256dh:ui(T.getKey("p256dh"))},V=yield vs(w.firebaseDependencies);if(V){if(cf(V.subscriptionOptions,S))return Date.now()>=V.createTime+Bl?qs(w,{token:V.token,createTime:Date.now(),subscriptionOptions:S}):V.token;try{yield af(w.firebaseDependencies,V.token)}catch(W){console.warn(W)}return zs(w.firebaseDependencies,S)}return zs(w.firebaseDependencies,S)})).apply(this,arguments)}function lf(w){return co.apply(this,arguments)}function co(){return(co=(0,R.Z)(function*(w){const T=yield vs(w.firebaseDependencies);T&&(yield af(w.firebaseDependencies,T.token),yield kd(w.firebaseDependencies));const S=yield w.swRegistration.pushManager.getSubscription();return!S||S.unsubscribe()})).apply(this,arguments)}function qs(w,T){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,R.Z)(function*(w,T){try{const S=yield cg(w.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:S,createTime:Date.now()});return yield Ba(w.firebaseDependencies,V),S}catch(S){throw yield lf(w),S}})).apply(this,arguments)}function zs(w,T){return bs.apply(this,arguments)}function bs(){return(bs=(0,R.Z)(function*(w,T){const V={token:yield Cs(w,T),createTime:Date.now(),subscriptionOptions:T};return yield Ba(w,V),V.token})).apply(this,arguments)}function Rd(w,T){return Fd.apply(this,arguments)}function Fd(){return(Fd=(0,R.Z)(function*(w,T){return(yield w.pushManager.getSubscription())||w.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ys(T)})})).apply(this,arguments)}function cf(w,T){return T.vapidKey===w.vapidKey&&T.endpoint===w.endpoint&&T.auth===w.auth&&T.p256dh===w.p256dh}function ou(w){const T={from:w.from,collapseKey:w.collapse_key,messageId:w.fcmMessageId};return function Hl(w,T){if(!T.notification)return;w.notification={};const S=T.notification.title;S&&(w.notification.title=S);const V=T.notification.body;V&&(w.notification.body=V);const W=T.notification.image;W&&(w.notification.image=W);const X=T.notification.icon;X&&(w.notification.icon=X)}(T,w),function su(w,T){!T.data||(w.data=T.data)}(T,w),function $l(w,T){var S,V,W,X,me;if(!(T.fcmOptions||null!==(S=T.notification)&&void 0!==S&&S.click_action))return;w.fcmOptions={};const Je=null!==(W=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==W?W:null===(X=T.notification)||void 0===X?void 0:X.click_action;Je&&(w.fcmOptions.link=Je);const We=null===(me=T.fcmOptions)||void 0===me?void 0:me.analytics_label;We&&(w.fcmOptions.analyticsLabel=We)}(T,w),T}function Ld(w){return"object"==typeof w&&!!w&&Ad in w}function Ws(w,T){const S=[];for(let V=0;V<w.length;V++)S.push(w.charAt(V)),V<T.length&&S.push(T.charAt(V));return S.join("")}function au(w){return dn.create("missing-app-config-values",{valueName:w})}Ws("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ws("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class $a{constructor(T,S,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function uf(w){if(!w||!w.options)throw au("App Configuration Object");if(!w.name)throw au("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:S}=w;for(const V of T)if(!S[V])throw au(V);return{appName:w.name,projectId:S.projectId,apiKey:S.apiKey,appId:S.appId,senderId:S.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:S,analyticsProvider:V}}_delete(){return Promise.resolve()}}function df(w){return uo.apply(this,arguments)}function uo(){return(uo=(0,R.Z)(function*(w){try{w.swRegistration=yield navigator.serviceWorker.register(Go,{scope:Ai}),w.swRegistration.update().catch(()=>{})}catch(T){throw dn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function zo(w,T){return hi.apply(this,arguments)}function hi(){return(hi=(0,R.Z)(function*(w,T){if(!T&&!w.swRegistration&&(yield df(w)),T||!w.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");w.swRegistration=T}})).apply(this,arguments)}function lu(w,T){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,R.Z)(function*(w,T){T?w.vapidKey=T:w.vapidKey||(w.vapidKey=Fa)})).apply(this,arguments)}function Za(){return(Za=(0,R.Z)(function*(w,T){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield lu(w,T?.vapidKey),yield zo(w,T?.serviceWorkerRegistration),jl(w)})).apply(this,arguments)}function Gi(w,T,S){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,R.Z)(function*(w,T,S){const V=Ks(T);(yield w.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:S[Ad],message_name:S[Rn],message_time:S[V_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ks(w){switch(w){case Gr.NOTIFICATION_CLICKED:return"notification_open";case Gr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Is(){return(Is=(0,R.Z)(function*(w,T){const S=T.data;if(!S.isFirebaseMessaging)return;w.onMessageHandler&&S.messageType===Gr.PUSH_RECEIVED&&("function"==typeof w.onMessageHandler?w.onMessageHandler(ou(S)):w.onMessageHandler.next(ou(S)));const V=S.data;Ld(V)&&"1"===V[eu]&&(yield Gi(w,S.messageType,V))})).apply(this,arguments)}const qa="@firebase/messaging",za=w=>{const T=new $a(w.getProvider("app").getImmediate(),w.getProvider("installations-internal").getImmediate(),w.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",S=>function Ga(w,T){return Is.apply(this,arguments)}(T,S)),T},cu=w=>{const T=w.getProvider("messaging").getImmediate();return{getToken:V=>function Zl(w,T){return Za.apply(this,arguments)}(T,V)}};function Ys(){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,R.Z)(function*(){try{yield(0,de.eu)()}catch{return!1}return typeof window<"u"&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hf(){(0,oe._registerComponent)(new _e.wA("messaging",za,"PUBLIC")),(0,oe._registerComponent)(new _e.wA("messaging-internal",cu,"PRIVATE")),(0,oe.registerVersion)(qa,"0.12.4"),(0,oe.registerVersion)(qa,"0.12.4","esm2017")}();const Ka="analytics",Ya="firebase_id",Ud="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xo="https://www.googletagmanager.com/gtag/js",Fn=new pe.Yd("@firebase/analytics"),sr=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ql(w){if(!w.startsWith(xo)){const T=sr.create("invalid-gtag-resource",{gtagURL:w});return Fn.warn(T.message),""}return w}function Si(w){return Promise.all(w.map(T=>T.catch(S=>S)))}function Bd(w,T){const S=function hu(w,T){let S;return window.trustedTypes&&(S=window.trustedTypes.createPolicy(w,T)),S}("firebase-js-sdk-policy",{createScriptURL:ql}),V=document.createElement("script"),W=`${xo}?l=${w}&id=${T}`;V.src=S?S?.createScriptURL(W):W,V.async=!0,document.head.appendChild(V)}function jd(w,T,S,V,W,X){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,R.Z)(function*(w,T,S,V,W,X){const me=V[W];try{if(me)yield T[me];else{const We=(yield Si(S)).find(et=>et.measurementId===W);We&&(yield T[We.appId])}}catch(Je){Fn.error(Je)}w("config",W,X)})).apply(this,arguments)}function U_(w,T,S,V,W){return zl.apply(this,arguments)}function zl(){return(zl=(0,R.Z)(function*(w,T,S,V,W){try{let X=[];if(W&&W.send_to){let me=W.send_to;Array.isArray(me)||(me=[me]);const Je=yield Si(S);for(const We of me){const et=Je.find(Nt=>Nt.measurementId===We),Lt=et&&T[et.appId];if(!Lt){X=[];break}X.push(Lt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),w("event",V,W||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function pf(w){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(xo)&&S.src.includes(w))return S;return null}const ar=new class B_{constructor(T={},S=1e3){this.throttleMetadata=T,this.intervalMillis=S}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,S){this.throttleMetadata[T]=S}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Kl(w){return new Headers({Accept:"application/json","x-goog-api-key":w})}function Mi(w){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,R.Z)(function*(w){var T;const{appId:S,apiKey:V}=w,W={method:"GET",headers:Kl(V)},X=Ud.replace("{app-id}",S),me=yield fetch(X,W);if(200!==me.status&&304!==me.status){let Je="";try{const We=yield me.json();null!==(T=We.error)&&void 0!==T&&T.message&&(Je=We.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Je})}return me.json()})).apply(this,arguments)}function Yl(w){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,R.Z)(function*(w,T=ar,S){const{appId:V,apiKey:W,measurementId:X}=w.options;if(!V)throw sr.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:V};throw sr.create("no-api-key")}const me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new $d;return setTimeout((0,R.Z)(function*(){Je.abort()}),void 0!==S?S:6e4),qi({appId:V,apiKey:W,measurementId:X},me,Je,T)})).apply(this,arguments)}function qi(w,T,S){return fu.apply(this,arguments)}function fu(){return(fu=(0,R.Z)(function*(w,{throttleEndTimeMillis:T,backoffCount:S},V,W=ar){var X;const{appId:me,measurementId:Je}=w;try{yield Ja(V,T)}catch(We){if(Je)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:me,measurementId:Je};throw We}try{const We=yield Mi(w);return W.deleteThrottleMetadata(me),We}catch(We){const et=We;if(!Ql(et)){if(W.deleteThrottleMetadata(me),Je)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${et?.message}]`),{appId:me,measurementId:Je};throw We}const Lt=503===Number(null===(X=et?.customData)||void 0===X?void 0:X.httpStatus)?(0,de.$s)(S,W.intervalMillis,30):(0,de.$s)(S,W.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Lt,backoffCount:S+1};return W.setThrottleMetadata(me,Nt),Fn.debug(`Calling attemptFetch again in ${Lt} millis`),qi(w,Nt,V,W)}})).apply(this,arguments)}function Ja(w,T){return new Promise((S,V)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(S,W);w.addEventListener(()=>{clearTimeout(X),V(sr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ql(w){if(!(w instanceof de.ZR&&w.customData))return!1;const T=Number(w.customData.httpStatus);return 429===T||500===T||503===T||504===T}class $d{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Zd,Xa;function mf(){return(mf=(0,R.Z)(function*(w,T,S,V,W){if(W&&W.global)w("event",S,V);else{const X=yield T;w("event",S,Object.assign(Object.assign({},V),{send_to:X}))}})).apply(this,arguments)}function ea(w){Xa=w}function mu(w){Zd=w}function mn(){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,R.Z)(function*(){if(!(0,de.hl)())return Fn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(w){return Fn.warn(sr.create("indexeddb-unavailable",{errorInfo:w?.toString()}).message),!1}return!0})).apply(this,arguments)}function pi(){return(pi=(0,R.Z)(function*(w,T,S,V,W,X,me){var Je;const We=Yl(w);We.then(hn=>{S[hn.measurementId]=hn.appId,w.options.measurementId&&hn.measurementId!==w.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${w.options.measurementId}) does not match the measurement ID fetched from the server (${hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hn=>Fn.error(hn)),T.push(We);const et=mn().then(hn=>{if(hn)return V.getId()}),[Lt,Nt]=yield Promise.all([We,et]);pf(X)||Bd(X,Lt.measurementId),Xa&&(W("consent","default",Xa),ea(void 0)),W("js",new Date);const Nr=null!==(Je=me?.config)&&void 0!==Je?Je:{};return Nr.origin="firebase",Nr.update=!0,null!=Nt&&(Nr[Ya]=Nt),W("config",Lt.measurementId,Nr),Zd&&(W("set",Zd),mu(void 0)),Lt.measurementId})).apply(this,arguments)}class el{constructor(T){this.app=T}_delete(){return delete gi[this.app.options.appId],Promise.resolve()}}let gi={},_u=[];const zd={};let Zn,ht,Do="dataLayer",tl=!1;function yu(w,T,S){!function nl(){const w=[];if((0,de.ru)()&&w.push("This is a browser extension environment."),(0,de.zI)()||w.push("Cookies are not available."),w.length>0){const T=w.map((V,W)=>`(${W+1}) ${V}`).join(" "),S=sr.create("invalid-analytics-context",{errorInfo:T});Fn.warn(S.message)}}();const V=w.options.appId;if(!V)throw sr.create("no-app-id");if(!w.options.apiKey){if(!w.options.measurementId)throw sr.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${w.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=gi[V])throw sr.create("already-exists",{id:V});if(!tl){!function yn(w){let T=[];Array.isArray(window[w])?T=window[w]:window[w]=T}(Do);const{wrappedGtag:X,gtagCore:me}=function hg(w,T,S,V,W){let X=function(...me){window[V].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function dg(w,T,S,V){function X(){return(X=(0,R.Z)(function*(me,...Je){try{if("event"===me){const[We,et]=Je;yield U_(w,T,S,We,et)}else if("config"===me){const[We,et]=Je;yield jd(w,T,S,V,We,et)}else if("consent"===me){const[We]=Je;w("consent","update",We)}else if("get"===me){const[We,et,Lt]=Je;w("get",We,et,Lt)}else if("set"===me){const[We]=Je;w("set",We)}else w(me,...Je)}catch(We){Fn.error(We)}})).apply(this,arguments)}return function W(me){return X.apply(this,arguments)}}(X,w,T,S),{gtagCore:X,wrappedGtag:window[W]}}(gi,_u,zd,Do,"gtag");ht=X,Zn=me,tl=!0}return gi[V]=function gg(w,T,S,V,W,X,me){return pi.apply(this,arguments)}(w,_u,zd,T,Zn,Do,S),new el(w)}function Ts(){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,R.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch{return!1}})).apply(this,arguments)}const Cr="@firebase/analytics";!function wu(){(0,oe._registerComponent)(new _e.wA(Ka,(T,{options:S})=>yu(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),S),"PUBLIC")),(0,oe._registerComponent)(new _e.wA("analytics-internal",function w(T){try{const S=T.getProvider(Ka).getImmediate();return{logEvent:(V,W,X)=>function _i(w,T,S,V){w=(0,de.m9)(w),function fg(w,T,S,V,W){return mf.apply(this,arguments)}(ht,gi[w.app.options.appId],T,S,V).catch(W=>Fn.error(W))}(S,V,W,X)}}catch(S){throw sr.create("interop-component-reg-failed",{reason:S})}},"PRIVATE")),(0,oe.registerVersion)(Cr,"0.10.0"),(0,oe.registerVersion)(Cr,"0.10.0","esm2017")}();var Or=U(4408),tc=U(7565);const bu=new class yf extends tc.v{}(class na extends Or.o{constructor(T,S){super(T,S),this.scheduler=T,this.work=S}schedule(T,S=0){return S>0?super.schedule(T,S):(this.delay=S,this.state=T,this.scheduler.flush(this),this)}execute(T,S){return S>0||this.closed?super.execute(T,S):this._execute(T,S)}requestAsyncId(T,S,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,S,V):(T.flush(this),0)}});var vf=U(4986),il=U(9751),nc=U(8505),Xo=U(5363),xs=U(9468);const ol=new o.GfV("7.6.1"),rc="__angularfire_symbol__analyticsIsSupportedValue",ra="__angularfire_symbol__analyticsIsSupported",Eu="__angularfire_symbol__remoteConfigIsSupportedValue",ia="__angularfire_symbol__remoteConfigIsSupported",Tu="__angularfire_symbol__messagingIsSupportedValue",oa="__angularfire_symbol__messagingIsSupported";function aa(w,T,S){if(T){if(1===T.length)return T[0];const X=T.filter(me=>me.app===S);if(1===X.length)return X[0]}return S.container.getProvider(w).getImmediate({optional:!0})}globalThis[ra]||(globalThis[ra]=Ts().then(w=>globalThis[rc]=w).catch(()=>globalThis[rc]=!1)),globalThis[oa]||(globalThis[oa]=Ys().then(w=>globalThis[Tu]=w).catch(()=>globalThis[Tu]=!1)),globalThis[ia]||(globalThis[ia]=li().then(w=>globalThis[Eu]=w).catch(()=>globalThis[Eu]=!1));const Kd=(w,T)=>{const S=T?[T]:(0,H.C6)(),V=[];return S.forEach(W=>{W.container.getProvider(w).instances.forEach(me=>{V.includes(me)||V.push(me)})}),V};function es(){}class xu{constructor(T,S=bu){this.zone=T,this.delegate=S}now(){return this.delegate.now()}schedule(T,S,V){const W=this.zone;return this.delegate.schedule(function(me){W.runGuarded(()=>{T.apply(this,[me])})},S,V)}}class Cf{constructor(T){this.zone=T,this.task=null}call(T,S){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",es,{},es,es)),S.pipe((0,nc.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let oc=(()=>{class w{constructor(S){this.ngZone=S,this.outsideAngular=S.runOutsideAngular(()=>new xu(Zone.current)),this.insideAngular=S.run(()=>new xu(Zone.current,vf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return w.\u0275fac=function(S){return new(S||w)(o.LFG(o.R0b))},w.\u0275prov=o.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})();function Yn(){const w=globalThis.\u0275AngularFireScheduler;if(!w)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return w}function ko(w){return Yn().ngZone.runOutsideAngular(()=>w())}function ho(w){return Yn().ngZone.run(()=>w())}function wf(w){return w.pipe((0,Xo.Q)(Yn().outsideAngular))}function ei(w){return Yn(),function tr(w){return function(S){return(S=S.lift(new Cf(w.ngZone))).pipe((0,xs.R)(w.outsideAngular),(0,Xo.Q)(w.insideAngular))}}(Yn())(w)}const Du=(w,T)=>function(){const V=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),ho(()=>w.apply(void 0,V))},la=(w,T)=>function(){let S;const V=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof V[X]&&(T&&(S||(S=ho(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",es,{},es,es)))),V[X]=Du(V[X],S));const W=ko(()=>w.apply(this,V));if(!T){if(W instanceof il.y){const X=Yn();return W.pipe((0,xs.R)(X.outsideAngular),(0,Xo.Q)(X.insideAngular))}return ho(()=>W)}return W instanceof il.y?W.pipe(ei):W instanceof Promise?ho(()=>new Promise((X,me)=>W.then(Je=>ho(()=>X(Je)),Je=>ho(()=>me(Je))))):"function"==typeof W&&S?function(){return setTimeout(()=>{S&&"scheduled"===S.state&&S.invoke()},10),W.apply(this,arguments)}:ho(()=>W)}},1389:(bt,Ne,U)=>{U.d(Ne,{$:()=>Go,A:()=>G,D:()=>Oe,I:()=>_n,J:()=>Eo,L:()=>lo,N:()=>vr,P:()=>gg,Q:()=>rf,R:()=>fi,U:()=>_s,V:()=>li,W:()=>xd,X:()=>Wc,Y:()=>Yc,Z:()=>Ml,_:()=>Pt,a:()=>Yo,a0:()=>Fa,a1:()=>Ad,a2:()=>ci,a3:()=>Sd,a4:()=>Fl,a5:()=>tu,a6:()=>Xr,a7:()=>nu,a8:()=>Ua,a9:()=>ru,aA:()=>ue,aB:()=>ra,aC:()=>er,aD:()=>jr,aE:()=>nc,aF:()=>Wd,aG:()=>mi,aH:()=>$n,aL:()=>Qo,aO:()=>$i,aa:()=>kd,ab:()=>Pd,ac:()=>lg,ad:()=>cg,ae:()=>af,af:()=>Od,ai:()=>Bl,aj:()=>iu,ak:()=>lf,an:()=>sf,ao:()=>Hl,aq:()=>Wo,ar:()=>qa,as:()=>At,at:()=>Ie,au:()=>be,av:()=>Ae,aw:()=>Nt,ax:()=>oa,ay:()=>tt,az:()=>Ee,b:()=>Vd,c:()=>ht,d:()=>yu,e:()=>lr,f:()=>Cr,g:()=>yf,h:()=>Or,i:()=>gf,j:()=>vf,k:()=>po,l:()=>Gd,m:()=>ua,p:()=>ve,r:()=>Xl,s:()=>_f,u:()=>mn});var o=U(5861),H=U(2090),R=U(6881),oe=U(7582),de=U(1877),_e=U(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},xe=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new de.Yd("@firebase/auth");function pt(C,...p){ye.logLevel<=de.in.ERROR&&ye.error(`Auth (${R.SDK_VERSION}): ${C}`,...p)}function Ae(C,...p){throw ze(C,...p)}function Ee(C,...p){return ze(C,...p)}function Se(C,p,_){const b=Object.assign(Object.assign({},xe()),{[p]:_});return new H.LL("auth","Firebase",b).create(p,{appName:C.name})}function qe(C,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Ae(C,"argument-error"),Se(C,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(C,...p){if("string"!=typeof C){const _=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=C.name),C._errorFactory.create(_,...b)}return it.create(C,...p)}function ue(C,p,..._){if(!C)throw ze(p,..._)}function Qe(C){const p="INTERNAL ASSERTION FAILED: "+C;throw pt(p),new Error(p)}function At(C,p){C||Qe(p)}function gt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Gt(){return"http:"===ut()||"https:"===ut()}function ut(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class si{constructor(p,_){this.shortDelay=p,this.longDelay=_,At(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function oo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function so(C,p){At(C.emulator,"Emulator should always be set here");const{url:_}=C.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class se{static initialize(p,_,b){this.fetchImpl=p,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},De=new si(3e4,6e4);function fe(C,p){return C.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:C.tenantId}):p}function Pe(C,p,_,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,o.Z)(function*(C,p,_,b,M={}){return lt(C,M,(0,o.Z)(function*(){let O={},Q={};b&&("GET"===p?Q=b:O={body:JSON.stringify(b)});const he=(0,H.xO)(Object.assign({key:C.config.apiKey},Q)).slice(1),Ze=yield C._getAdditionalHeaders();return Ze["Content-Type"]="application/json",C.languageCode&&(Ze["X-Firebase-Locale"]=C.languageCode),se.fetch()(on(C,C.config.apiHost,_,he),Object.assign({method:p,headers:Ze,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function lt(C,p,_){return xt.apply(this,arguments)}function xt(){return(xt=(0,o.Z)(function*(C,p,_){C._canInitEmulator=!1;const b=Object.assign(Object.assign({},ne),p);try{const M=new Pn(C),O=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw pn(C,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const he=O.ok?Q.errorMessage:Q.error.message,[Ze,nt]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw pn(C,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ze)throw pn(C,"email-already-in-use",Q);if("USER_DISABLED"===Ze)throw pn(C,"user-disabled",Q);const vt=b[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw Se(C,vt,nt);Ae(C,vt)}}catch(M){if(M instanceof H.ZR)throw M;Ae(C,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function en(C,p,_,b){return kt.apply(this,arguments)}function kt(){return(kt=(0,o.Z)(function*(C,p,_,b,M={}){const O=yield Pe(C,p,_,b,M);return"mfaPendingCredential"in O&&Ae(C,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function on(C,p,_,b){const M=`${p}${_}?${b}`;return C.config.emulator?so(C.config,M):`${C.config.apiScheme}://${M}`}class Pn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(Ee(this.auth,"network-request-failed")),De.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pn(C,p,_){const b={appName:C.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const M=Ee(C,p,b);return M.customData._tokenResponse=_,M}function Sn(){return(Sn=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Bn(C,p){return mr.apply(this,arguments)}function mr(){return(mr=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ii(C,p){return ct.apply(this,arguments)}function ct(){return(ct=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _r(C){if(C)try{const p=new Date(Number(C));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function ji(){return(ji=(0,o.Z)(function*(C,p=!1){const _=(0,H.m9)(C),b=yield _.getIdToken(p),M=Nn(b);ue(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const O="object"==typeof M.firebase?M.firebase:void 0,Q=O?.sign_in_provider;return{claims:M,token:b,authTime:_r(Yr(M.auth_time)),issuedAtTime:_r(Yr(M.iat)),expirationTime:_r(Yr(M.exp)),signInProvider:Q||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function Yr(C){return 1e3*Number(C)}function Nn(C){const[p,_,b]=C.split(".");if(void 0===p||void 0===_||void 0===b)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,H.tV)(_);return M?JSON.parse(M):(pt("Failed to decode base64 JWT payload"),null)}catch(M){return pt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function qt(C,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,o.Z)(function*(C,p,_=!1){if(_)return p;try{return yield p}catch(b){throw b instanceof H.ZR&&Et(b)&&C.auth.currentUser===C&&(yield C.auth.signOut()),b}})).apply(this,arguments)}function Et({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class nn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),b)}iteration(){var p=this;return(0,o.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&p.schedule(!0))}p.schedule()})()}}class Qr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function yr(C){return ir.apply(this,arguments)}function ir(){return(ir=(0,o.Z)(function*(C){var p;const _=C.auth,b=yield C.getIdToken(),M=yield qt(C,Ii(_,{idToken:b}));ue(M?.users.length,_,"internal-error");const O=M.users[0];C._notifyReloadListener(O);const Q=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?ao(O.providerUserInfo):[],he=zt(C.providerData,Q),vt=!!C.isAnonymous&&!(C.email&&O.passwordHash||he?.length),ln={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new Qr(O.createdAt,O.lastLoginAt),isAnonymous:vt};Object.assign(C,ln)})).apply(this,arguments)}function zn(){return(zn=(0,o.Z)(function*(C){const p=(0,H.m9)(C);yield yr(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function zt(C,p){return[...C.filter(b=>!p.some(M=>M.providerId===b.providerId)),...p]}function ao(C){return C.map(p=>{var{providerId:_}=p,b=(0,oe._T)(p,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function jn(){return(jn=(0,o.Z)(function*(C,p){const _=yield lt(C,{},(0,o.Z)(function*(){const b=(0,H.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:O}=C.config,Q=on(C,M,"/v1/token",`key=${O}`),he=yield C._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(Q,{method:"POST",headers:he,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class In{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ue(p.idToken,"internal-error"),ue(typeof p.idToken<"u","internal-error"),ue(typeof p.refreshToken<"u","internal-error");const _="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Mn(C){const p=Nn(C);return ue(p,"internal-error"),ue(typeof p.exp<"u","internal-error"),ue(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var b=this;return(0,o.Z)(function*(){return ue(!b.accessToken||b.refreshToken,p,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var b=this;return(0,o.Z)(function*(){const{accessToken:M,refreshToken:O,expiresIn:Q}=yield function sn(C,p){return jn.apply(this,arguments)}(p,_);b.updateTokensAndExpiration(M,O,Number(Q))})()}updateTokensAndExpiration(p,_,b){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,_){const{refreshToken:b,accessToken:M,expirationTime:O}=_,Q=new In;return b&&(ue("string"==typeof b,"internal-error",{appName:p}),Q.refreshToken=b),M&&(ue("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),O&&(ue("number"==typeof O,"internal-error",{appName:p}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new In,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Xn(C,p){ue("string"==typeof C||typeof C>"u","internal-error",{appName:p})}class On{constructor(p){var{uid:_,auth:b,stsTokenManager:M}=p,O=(0,oe._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Qr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,o.Z)(function*(){const b=yield qt(_,_.stsTokenManager.getToken(_.auth,p));return ue(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(p){return function qn(C){return ji.apply(this,arguments)}(this,p)}reload(){return function St(C){return zn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ue(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const _=new On(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(p){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var b=this;return(0,o.Z)(function*(){let M=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),M=!0),_&&(yield yr(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,o.Z)(function*(){const _=yield p.getIdToken();return yield qt(p,function Qn(C,p){return Sn.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var b,M,O,Q,he,Ze,nt,vt;const ln=null!==(b=_.displayName)&&void 0!==b?b:void 0,zi=null!==(M=_.email)&&void 0!==M?M:void 0,da=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,ac=null!==(Q=_.photoURL)&&void 0!==Q?Q:void 0,Ef=null!==(he=_.tenantId)&&void 0!==he?he:void 0,lc=null!==(Ze=_._redirectEventId)&&void 0!==Ze?Ze:void 0,eh=null!==(nt=_.createdAt)&&void 0!==nt?nt:void 0,Tf=null!==(vt=_.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Ou,emailVerified:xf,isAnonymous:Cg,providerData:Ds,stsTokenManager:sl}=_;ue(Ou&&sl,p,"internal-error");const Po=In.fromJSON(this.name,sl);ue("string"==typeof Ou,p,"internal-error"),Xn(ln,p.name),Xn(zi,p.name),ue("boolean"==typeof xf,p,"internal-error"),ue("boolean"==typeof Cg,p,"internal-error"),Xn(da,p.name),Xn(ac,p.name),Xn(Ef,p.name),Xn(lc,p.name),Xn(eh,p.name),Xn(Tf,p.name);const th=new On({uid:Ou,auth:p,email:zi,emailVerified:xf,displayName:ln,isAnonymous:Cg,photoURL:ac,phoneNumber:da,tenantId:Ef,stsTokenManager:Po,createdAt:eh,lastLoginAt:Tf});return Ds&&Array.isArray(Ds)&&(th.providerData=Ds.map(j_=>Object.assign({},j_))),lc&&(th._redirectEventId=lc),th}static _fromIdTokenResponse(p,_,b=!1){return(0,o.Z)(function*(){const M=new In;M.updateFromServerResponse(_);const O=new On({uid:_.localId,auth:p,stsTokenManager:M,isAnonymous:b});return yield yr(O),O})()}}const Jr=new Map;function er(C){At(C instanceof Function,"Expected a class definition");let p=Jr.get(C);return p?(At(p instanceof C,"Instance stored in cache mismatched with class"),p):(p=new C,Jr.set(C,p),p)}const vr=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,b){var M=this;return(0,o.Z)(function*(){M.storage[_]=b})()}_get(_){var b=this;return(0,o.Z)(function*(){const M=b.storage[_];return void 0===M?null:M})()}_remove(_){var b=this;return(0,o.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return C.type="NONE",C})();function jr(C,p,_){return`firebase:${C}:${p}:${_}`}class Z{constructor(p,_,b){this.persistence=p,this.auth=_,this.userKey=b;const{config:M,name:O}=this.auth;this.fullUserKey=jr(this.userKey,M.apiKey,O),this.fullPersistenceKey=jr("persistence",M.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,o.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?On._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,o.Z)(function*(){if(_.persistence===p)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,b="authUser"){return(0,o.Z)(function*(){if(!_.length)return new Z(er(vr),p,b);const M=(yield Promise.all(_.map(function(){var nt=(0,o.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let O=M[0]||er(vr);const Q=jr(b,p.config.apiKey,p.name);let he=null;for(const nt of _)try{const vt=yield nt._get(Q);if(vt){const ln=On._fromJSON(p,vt);nt!==O&&(he=ln),O=nt;break}}catch{}const Ze=M.filter(nt=>nt._shouldAllowMigration);return O._shouldAllowMigration&&Ze.length?(O=Ze[0],he&&(yield O._set(Q,he.toJSON())),yield Promise.all(_.map(function(){var nt=(0,o.Z)(function*(vt){if(vt!==O)try{yield vt._remove(Q)}catch{}});return function(vt){return nt.apply(this,arguments)}}())),new Z(O,p,b)):new Z(O,p,b)})()}}function $(C){const p=C.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Y(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(F(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ye(p))return"Blackberry";if(mt(p))return"Webos";if(N(p))return"Safari";if((p.includes("chrome/")||P(p))&&!p.includes("edge/"))return"Chrome";if(be(p))return"Android";{const b=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function F(C=(0,H.z$)()){return/firefox\//i.test(C)}function N(C=(0,H.z$)()){const p=C.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function P(C=(0,H.z$)()){return/crios\//i.test(C)}function Y(C=(0,H.z$)()){return/iemobile/i.test(C)}function be(C=(0,H.z$)()){return/android/i.test(C)}function Ye(C=(0,H.z$)()){return/blackberry/i.test(C)}function mt(C=(0,H.z$)()){return/webos/i.test(C)}function Ie(C=(0,H.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function tt(C=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}function Ft(C=(0,H.z$)()){return Ie(C)||be(C)||mt(C)||Ye(C)||/windows phone/i.test(C)||Y(C)}function Hr(C,p=[]){let _;switch(C){case"Browser":_=$((0,H.z$)());break;case"Worker":_=`${$((0,H.z$)())}-${C}`;break;default:_=C}const b=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${R.SDK_VERSION}/${b}`}function ie(){return(ie=(0,o.Z)(function*(C){return(yield Pe(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(C,p){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,o.Z)(function*(C,p){return Pe(C,"GET","/v2/recaptchaConfig",fe(C,p))})).apply(this,arguments)}function Mt(C){return void 0!==C&&void 0!==C.getResponse}function Ht(C){return void 0!==C&&void 0!==C.enterprise}class gn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(_=>"EMAIL_PASSWORD_PROVIDER"===_.provider&&"OFF"!==_.enforcementState)}}function Jt(C){return new Promise((p,_)=>{const b=document.createElement("script");b.setAttribute("src",C),b.onload=p,b.onerror=M=>{const O=Ee("internal-error");O.customData=M,_(O)},b.type="text/javascript",b.charset="UTF-8",function Hn(){var C,p;return null!==(p=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==p?p:document}().appendChild(b)})}function $r(C){return`__${C}${Math.floor(1e6*Math.random())}`}class Da{constructor(p){this.type="recaptcha-enterprise",this.auth=$n(p)}verify(p="verify",_=!1){var b=this;return(0,o.Z)(function*(){function O(){return O=(0,o.Z)(function*(he){if(!_){if(null==he.tenantId&&null!=he._agentRecaptchaConfig)return he._agentRecaptchaConfig.siteKey;if(null!=he.tenantId&&void 0!==he._tenantRecaptchaConfigs[he.tenantId])return he._tenantRecaptchaConfigs[he.tenantId].siteKey}return new Promise(function(){var Ze=(0,o.Z)(function*(nt,vt){Le(he,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ln=>{if(void 0!==ln.recaptchaKey){const zi=new gn(ln);return null==he.tenantId?he._agentRecaptchaConfig=zi:he._tenantRecaptchaConfigs[he.tenantId]=zi,nt(zi.siteKey)}vt(new Error("recaptcha Enterprise site key undefined"))}).catch(ln=>{vt(ln)})});return function(nt,vt){return Ze.apply(this,arguments)}}())}),O.apply(this,arguments)}function Q(he,Ze,nt){const vt=window.grecaptcha;Ht(vt)?vt.enterprise.ready(()=>{vt.enterprise.execute(he,{action:p}).then(ln=>{Ze(ln)}).catch(()=>{Ze("NO_RECAPTCHA")})}):nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((he,Ze)=>{(function M(he){return O.apply(this,arguments)})(b.auth).then(nt=>{if(!_&&Ht(window.grecaptcha))Q(nt,he,Ze);else{if(typeof window>"u")return void Ze(new Error("RecaptchaVerifier is only supported in browser"));Jt("https://www.google.com/recaptcha/enterprise.js?render="+nt).then(()=>{Q(nt,he,Ze)}).catch(vt=>{Ze(vt)})}}).catch(nt=>{Ze(nt)})})})()}}function tn(C,p,_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,o.Z)(function*(C,p,_,b=!1){const M=new Da(C);let O;try{O=yield M.verify(_)}catch{O=yield M.verify(_,!0)}const Q=Object.assign({},p);return Object.assign(Q,b?{captchaResp:O}:{captchaResponse:O}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class md{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const b=O=>new Promise((Q,he)=>{try{Q(p(O))}catch(Ze){he(Ze)}});b.onAbort=_,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===p)return;const b=[];try{for(const M of _.queue)yield M(p),M.onAbort&&b.push(M.onAbort)}catch(M){b.reverse();for(const O of b)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class fs{constructor(p,_,b,M){this.app=p,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ti(this),this.idTokenSubscription=new Ti(this),this.beforeStateQueue=new md(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,_){var b=this;return _&&(this._popupRedirectResolver=er(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var M,O;if(!b._deleted&&(b.persistenceManager=yield Z.create(b,p),!b._deleted)){if(null!==(M=b._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(O=b.currentUser)||void 0===O?void 0:O.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,o.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,o.Z)(function*(){var b;const M=yield _.assertedPersistence.getCurrentUser();let O=M,Q=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const he=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,Ze=O?._redirectEventId,nt=yield _.tryRedirectSignIn(p);(!he||he===Ze)&&nt?.user&&(O=nt.user,Q=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield _.beforeStateQueue.runMiddleware(O)}catch(he){O=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(he))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return ue(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var _=this;return(0,o.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch{yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,o.Z)(function*(){try{yield yr(p)}catch(b){if("auth/network-request-failed"!==b?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function gr(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var p=this;return(0,o.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,o.Z)(function*(){const b=p?(0,H.m9)(p):null;return b&&ue(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(p,_=!1){var b=this;return(0,o.Z)(function*(){if(!b._deleted)return p&&ue(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,o.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,o.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(er(p))}))}initializeRecaptchaConfig(){var p=this;return(0,o.Z)(function*(){const _=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new gn(_);null==p.tenantId?p._agentRecaptchaConfig=b:p._tenantRecaptchaConfigs[p.tenantId]=b,b.emailPasswordEnabled&&new Da(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new H.LL("auth","Firebase",p())}onAuthStateChanged(p,_,b){return this.registerStateListener(this.authStateSubscription,p,_,b)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,b){return this.registerStateListener(this.idTokenSubscription,p,_,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var b=this;return(0,o.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(_);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const b=p&&er(p)||_._popupRedirectResolver;ue(b,_,"argument-error"),_.redirectPersistenceManager=yield Z.create(_,[er(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,o.Z)(function*(){var b,M;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===p?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,o.Z)(function*(){if(p===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,b,M){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof _?p.addObserver(_,b,M):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Hr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,o.Z)(function*(){var _;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();M&&(b["X-Firebase-Client"]=M);const O=yield p._getAppCheckToken();return O&&(b["X-Firebase-AppCheck"]=O),b})()}_getAppCheckToken(){var p=this;return(0,o.Z)(function*(){var _;const b=yield null===(_=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return b?.error&&function yt(C,...p){ye.logLevel<=de.in.WARN&&ye.warn(`Auth (${R.SDK_VERSION}): ${C}`,...p)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function $n(C){return(0,H.m9)(C)}class Ti{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,H.ne)(_=>this.observer=_)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function _n(C,p,_){const b=$n(C);ue(b._canInitEmulator,b,"emulator-config-failed"),ue(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const M=!!_?.disableWarnings,O=_d(p),{host:Q,port:he}=function Tr(C){const p=_d(C),_=/(\/\/)?([^?#/]+)/.exec(C.substr(p.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const O=M[1];return{host:O,port:Zr(b.substr(O.length+1))}}{const[O,Q]=b.split(":");return{host:O,port:Zr(Q)}}}(p);b.config.emulator={url:`${O}//${Q}${null===he?"":`:${he}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Sa(){function C(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}function _d(C){const p=C.indexOf(":");return p<0?"":C.substr(0,p+1)}function Zr(C){if(!C)return null;const p=Number(C);return isNaN(p)?null:p}class Eo{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Qe("not implemented")}_getIdTokenResponse(p){return Qe("not implemented")}_linkToIdToken(p,_){return Qe("not implemented")}_getReauthenticationResolver(p){return Qe("not implemented")}}function Ma(C,p){return xi.apply(this,arguments)}function xi(){return(xi=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:resetPassword",fe(C,p))})).apply(this,arguments)}function ka(C,p){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function yd(C,p){return El.apply(this,arguments)}function El(){return(El=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:update",fe(C,p))})).apply(this,arguments)}function ef(C,p){return kn.apply(this,arguments)}function kn(){return(kn=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithPassword",fe(C,p))})).apply(this,arguments)}function jc(C,p){return vd.apply(this,arguments)}function vd(){return(vd=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:sendOobCode",fe(C,p))})).apply(this,arguments)}function og(C,p){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,o.Z)(function*(C,p){return jc(C,p)})).apply(this,arguments)}function Cd(C,p){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,o.Z)(function*(C,p){return jc(C,p)})).apply(this,arguments)}function tf(C,p){return wd.apply(this,arguments)}function wd(){return(wd=(0,o.Z)(function*(C,p){return jc(C,p)})).apply(this,arguments)}function bd(C,p){return Id.apply(this,arguments)}function Id(){return(Id=(0,o.Z)(function*(C,p){return jc(C,p)})).apply(this,arguments)}function xl(){return(xl=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithEmailLink",fe(C,p))})).apply(this,arguments)}function Dl(){return(Dl=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithEmailLink",fe(C,p))})).apply(this,arguments)}class $c extends Eo{constructor(p,_,b,M=null){super("password",b),this._email=p,this._password=_,this._tenantId=M}static _fromEmailAndPassword(p,_){return new $c(p,_,"password")}static _fromEmailAndCode(p,_,b=null){return new $c(p,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,o.Z)(function*(){var b;switch(_.signInMethod){case"password":const M={returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const O=yield tn(p,M,"signInWithPassword");return ef(p,O)}return ef(p,M).catch(function(){var O=(0,o.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const he=yield tn(p,M,"signInWithPassword");return ef(p,he)}return Promise.reject(Q)});return function(Q){return O.apply(this,arguments)}}());case"emailLink":return function sg(C,p){return xl.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Ae(p,"internal-error")}})()}_linkToIdToken(p,_){var b=this;return(0,o.Z)(function*(){switch(b.signInMethod){case"password":return ka(p,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function nf(C,p){return Dl.apply(this,arguments)}(p,{idToken:_,email:b._email,oobCode:b._password});default:Ae(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function gs(C,p){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithIdp",fe(C,p))})).apply(this,arguments)}class lo extends Eo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new lo(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Ae("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M}=_,O=(0,oe._T)(_,["providerId","signInMethod"]);if(!b||!M)return null;const Q=new lo(b,M);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(p){return gs(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,gs(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,gs(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,H.xO)(_)}return p}}function Zc(C,p){return Al.apply(this,arguments)}function Al(){return(Al=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:sendVerificationCode",fe(C,p))})).apply(this,arguments)}function Oa(){return(Oa=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithPhoneNumber",fe(C,p))})).apply(this,arguments)}function qc(){return(qc=(0,o.Z)(function*(C,p){const _=yield en(C,"POST","/v1/accounts:signInWithPhoneNumber",fe(C,p));if(_.temporaryProof)throw pn(C,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Td={USER_NOT_FOUND:"user-not-found"};function zc(){return(zc=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithPhoneNumber",fe(C,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Td)})).apply(this,arguments)}class Wn extends Eo{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Wn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Wn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Gc(C,p){return Oa.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function Ed(C,p){return qc.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Sl(C,p){return zc.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:b,verificationCode:M}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:b,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:b,phoneNumber:M,temporaryProof:O}=p;return b||_||M||O?new Wn({verificationId:_,verificationCode:b,phoneNumber:M,temporaryProof:O}):null}}class Zo{constructor(p){var _,b,M,O,Q,he;const Ze=(0,H.zd)((0,H.pd)(p)),nt=null!==(_=Ze.apiKey)&&void 0!==_?_:null,vt=null!==(b=Ze.oobCode)&&void 0!==b?b:null,ln=function To(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ze.mode)&&void 0!==M?M:null);ue(nt&&vt&&ln,"argument-error"),this.apiKey=nt,this.operation=ln,this.code=vt,this.continueUrl=null!==(O=Ze.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=Ze.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(he=Ze.tenantId)&&void 0!==he?he:null}static parseLink(p){const _=function ag(C){const p=(0,H.zd)((0,H.pd)(C)).link,_=p?(0,H.zd)((0,H.pd)(p)).deep_link_id:null,b=(0,H.zd)((0,H.pd)(C)).deep_link_id;return(b?(0,H.zd)((0,H.pd)(b)).link:null)||b||_||p||C}(p);try{return new Zo(_)}catch{return null}}}let rf=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(_,b){return $c._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const M=Zo.parseLink(b);return ue(M,"argument-error"),$c._fromEmailAndCode(_,M.code,M.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class xn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class $s extends xn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Wc extends $s{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ue("providerId"in _&&"signInMethod"in _,"argument-error"),lo._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ue(p.idToken||p.accessToken,"argument-error"),lo._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Wc.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Wc.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:O,nonce:Q,providerId:he}=p;if(!b&&!M&&!_&&!O||!he)return null;try{return new Wc(he)._credential({idToken:_,accessToken:b,nonce:Q,pendingToken:O})}catch{return null}}}let _s=(()=>{class C extends $s{constructor(){super("facebook.com")}static credential(_){return lo._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),li=(()=>{class C extends $s{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return lo._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:M}=_;if(!b&&!M)return null;try{return C.credential(b,M)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),xd=(()=>{class C extends $s{constructor(){super("github.com")}static credential(_){return lo._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return C.credential(_.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class $i extends Eo{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return gs(p,this.buildRequest())}_linkToIdToken(p,_){const b=this.buildRequest();return b.idToken=_,gs(p,b)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,gs(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M,pendingToken:O}=_;return b&&M&&O&&b===M?new $i(b,O):null}static _create(p,_){return new $i(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yc extends xn{constructor(p){ue(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Yc.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Yc.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=$i.fromJSON(p);return ue(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:b}=p;if(!_||!b)return null;try{return $i._create(b,_)}catch{return null}}}let Ml=(()=>{class C extends $s{constructor(){super("twitter.com")}static credential(_,b){return lo._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=_;if(!b||!M)return null;try{return C.credential(b,M)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Na(C,p){return Di.apply(this,arguments)}function Di(){return(Di=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signUp",fe(C,p))})).apply(this,arguments)}class xr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,b,M=!1){return(0,o.Z)(function*(){const O=yield On._fromIdTokenResponse(p,b,M),Q=Zs(b);return new xr({user:O,providerId:Q,_tokenResponse:b,operationType:_})})()}static _forOperation(p,_,b){return(0,o.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const M=Zs(b);return new xr({user:p,providerId:M,_tokenResponse:b,operationType:_})})()}}function Zs(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Pt(C){return kl.apply(this,arguments)}function kl(){return(kl=(0,o.Z)(function*(C){var p;const _=$n(C);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new xr({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Na(_,{returnSecureToken:!0}),M=yield xr._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Qc extends H.ZR{constructor(p,_,b,M){var O;super(_.code,_.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,Qc.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,_,b,M){return new Qc(p,_,b,M)}}function Jc(C,p,_,b){return("reauthenticate"===p?_._getReauthenticationResolver(C):_._getIdTokenResponse(C)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Qc._fromErrorAndOperation(C,O,p,b):O})}function Dd(C){return new Set(C.map(({providerId:p})=>p).filter(p=>!!p))}function sf(C,p){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,o.Z)(function*(C,p){const _=(0,H.m9)(C);yield ke(!0,_,p);const{providerUserInfo:b}=yield Bn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),M=Dd(b||[]);return _.providerData=_.providerData.filter(O=>M.has(O.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Zi(C,p){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,o.Z)(function*(C,p,_=!1){const b=yield qt(C,p._linkToIdToken(C.auth,yield C.getIdToken()),_);return xr._forOperation(C,"link",b)})).apply(this,arguments)}function ke(C,p,_){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,o.Z)(function*(C,p,_){yield yr(p);const M=!1===C?"provider-already-linked":"no-such-provider";ue(Dd(p.providerData).has(_)===C,p.auth,M)})).apply(this,arguments)}function Xc(C,p){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,o.Z)(function*(C,p,_=!1){const{auth:b}=C,M="reauthenticate";try{const O=yield qt(C,Jc(b,M,p,C),_);ue(O.idToken,b,"internal-error");const Q=Nn(O.idToken);ue(Q,b,"internal-error");const{sub:he}=Q;return ue(C.uid===he,b,"user-mismatch"),xr._forOperation(C,M,O)}catch(O){throw"auth/user-not-found"===O?.code&&Ae(b,"user-mismatch"),O}})).apply(this,arguments)}function Kn(C,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,o.Z)(function*(C,p,_=!1){const b="signIn",M=yield Jc(C,b,p),O=yield xr._fromIdTokenResponse(C,b,M);return _||(yield C._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Go(C,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,o.Z)(function*(C,p){return Kn($n(C),p)})).apply(this,arguments)}function Fa(C,p){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,o.Z)(function*(C,p){const _=(0,H.m9)(C);return yield ke(!1,_,p.providerId),Zi(_,p)})).apply(this,arguments)}function Ad(C,p){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,o.Z)(function*(C,p){return Xc((0,H.m9)(C),p)})).apply(this,arguments)}function V_(C,p){return eu.apply(this,arguments)}function eu(){return(eu=(0,o.Z)(function*(C,p){return en(C,"POST","/v1/accounts:signInWithCustomToken",fe(C,p))})).apply(this,arguments)}function ci(C,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,o.Z)(function*(C,p){const _=$n(C),b=yield V_(_,{token:p,returnSecureToken:!0}),M=yield xr._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class ui{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?ys._fromServerResponse(p,_):"totpInfo"in _?di._fromServerResponse(p,_):Ae(p,"internal-error")}}class ys extends ui{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new ys(_)}}class di extends ui{constructor(p){super("totp",p)}static _fromServerResponse(p,_){return new di(_)}}function La(C,p,_){var b;ue((null===(b=_.url)||void 0===b?void 0:b.length)>0,C,"invalid-continue-uri"),ue(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ue(_.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ue(_.android.packageName.length>0,C,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Sd(C,p,_){return Md.apply(this,arguments)}function Md(){return Md=(0,o.Z)(function*(C,p,_){var b;const M=$n(C),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Q=yield tn(M,O,"getOobCode",!0);_&&La(M,Q,_),yield Cd(M,Q)}else _&&La(M,O,_),yield Cd(M,O).catch(function(){var Q=(0,o.Z)(function*(he){if("auth/missing-recaptcha-token"!==he.code)return Promise.reject(he);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ze=yield tn(M,O,"getOobCode",!0);_&&La(M,Ze,_),yield Cd(M,Ze)}});return function(he){return Q.apply(this,arguments)}}())}),Md.apply(this,arguments)}function Fl(C,p,_){return Va.apply(this,arguments)}function Va(){return(Va=(0,o.Z)(function*(C,p,_){yield Ma((0,H.m9)(C),{oobCode:p,newPassword:_})})).apply(this,arguments)}function tu(C,p){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,o.Z)(function*(C,p){yield yd((0,H.m9)(C),{oobCode:p})})).apply(this,arguments)}function Xr(C,p){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,o.Z)(function*(C,p){const _=(0,H.m9)(C),b=yield Ma(_,{oobCode:p}),M=b.requestType;switch(ue(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(b.mfaInfo,_,"internal-error");default:ue(b.email,_,"internal-error")}let O=null;return b.mfaInfo&&(O=ui._fromServerResponse($n(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:O},operation:M}})).apply(this,arguments)}function nu(C,p){return vs.apply(this,arguments)}function vs(){return(vs=(0,o.Z)(function*(C,p){const{data:_}=yield Xr((0,H.m9)(C),p);return _.email})).apply(this,arguments)}function Ua(C,p,_){return Ba.apply(this,arguments)}function Ba(){return Ba=(0,o.Z)(function*(C,p,_){var b;const M=$n(C),O={returnSecureToken:!0,email:p,password:_,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const nt=yield tn(M,O,"signUpPassword");Q=Na(M,nt)}else Q=Na(M,O).catch(function(){var nt=(0,o.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ln=yield tn(M,O,"signUpPassword");return Na(M,ln)}return Promise.reject(vt)});return function(vt){return nt.apply(this,arguments)}}());const he=yield Q.catch(nt=>Promise.reject(nt)),Ze=yield xr._fromIdTokenResponse(M,"signIn",he);return yield M._updateCurrentUser(Ze.user),Ze}),Ba.apply(this,arguments)}function ru(C,p,_){return Go((0,H.m9)(C),rf.credential(p,_))}function kd(C,p,_){return qo.apply(this,arguments)}function qo(){return qo=(0,o.Z)(function*(C,p,_){var b;const M=$n(C),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(he,Ze){ue(Ze.handleCodeInApp,M,"argument-error"),Ze&&La(M,he,Ze)}if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const he=yield tn(M,O,"getOobCode",!0);Q(he,_),yield tf(M,he)}else Q(O,_),yield tf(M,O).catch(function(){var he=(0,o.Z)(function*(Ze){if("auth/missing-recaptcha-token"!==Ze.code)return Promise.reject(Ze);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const nt=yield tn(M,O,"getOobCode",!0);Q(nt,_),yield tf(M,nt)}});return function(Ze){return he.apply(this,arguments)}}())}),qo.apply(this,arguments)}function Pd(C,p){return"EMAIL_SIGNIN"===Zo.parseLink(p)?.operation}function lg(C,p,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C),M=rf.credentialWithLink(p,_||gt());return ue(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Go(b,M)})).apply(this,arguments)}function Cs(C,p){return An.apply(this,arguments)}function An(){return(An=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:createAuthUri",fe(C,p))})).apply(this,arguments)}function cg(C,p){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,o.Z)(function*(C,p){const b={identifier:p,continueUri:Gt()?gt():"http://localhost"},{signinMethods:M}=yield Cs((0,H.m9)(C),b);return M||[]})).apply(this,arguments)}function af(C,p){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,o.Z)(function*(C,p){const _=(0,H.m9)(C),M={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};p&&La(_.auth,M,p);const{email:O}=yield og(_.auth,M);O!==C.email&&(yield C.reload())})).apply(this,arguments)}function Od(C,p,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:p};_&&La(b.auth,O,_);const{email:Q}=yield bd(b.auth,O);Q!==C.email&&(yield C.reload())})).apply(this,arguments)}function Ha(C,p){return ws.apply(this,arguments)}function ws(){return(ws=(0,o.Z)(function*(C,p){return Pe(C,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Bl(C,p){return jl.apply(this,arguments)}function jl(){return(jl=(0,o.Z)(function*(C,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const b=(0,H.m9)(C),O={idToken:yield b.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},Q=yield qt(b,Ha(b.auth,O));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const he=b.providerData.find(({providerId:Ze})=>"password"===Ze);he&&(he.displayName=b.displayName,he.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function iu(C,p){return co((0,H.m9)(C),p,null)}function lf(C,p){return co((0,H.m9)(C),null,p)}function co(C,p,_){return qs.apply(this,arguments)}function qs(){return(qs=(0,o.Z)(function*(C,p,_){const{auth:b}=C,O={idToken:yield C.getIdToken(),returnSecureToken:!0};p&&(O.email=p),_&&(O.password=_);const Q=yield qt(C,ka(b,O));yield C._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class zs{constructor(p,_,b={}){this.isNewUser=p,this.providerId=_,this.profile=b}}class bs extends zs{constructor(p,_,b,M){super(p,_,b),this.username=M}}class Rd extends zs{constructor(p,_){super(p,"facebook.com",_)}}class Fd extends bs{constructor(p,_){super(p,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class cf extends zs{constructor(p,_){super(p,"google.com",_)}}class ou extends bs{constructor(p,_,b){super(p,"twitter.com",_,b)}}function Hl(C){const{user:p,_tokenResponse:_}=C;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Nd(C){var p,_;if(!C)return null;const{providerId:b}=C,M=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},O=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!b&&C?.idToken){const Q=null===(_=null===(p=Nn(C.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(Q)return new zs(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new Rd(O,M);case"github.com":return new Fd(O,M);case"google.com":return new cf(O,M);case"twitter.com":return new ou(O,M,C.screenName||null);case"custom":case"anonymous":return new zs(O,null);default:return new zs(O,b,M)}}(_)}class hi{constructor(p,_,b){this.type=p,this.credential=_,this.auth=b}static _fromIdtoken(p,_){return new hi("enroll",p,_)}static _fromMfaPendingCredential(p){return new hi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,b;if(p?.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return hi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return hi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class lu{constructor(p,_,b){this.session=p,this.hints=_,this.signInResolver=b}static _fromError(p,_){const b=$n(p),M=_.customData._serverResponse,O=(M.mfaInfo||[]).map(he=>ui._fromServerResponse(b,he));ue(M.mfaPendingCredential,b,"internal-error");const Q=hi._fromMfaPendingCredential(M.mfaPendingCredential);return new lu(Q,O,function(){var he=(0,o.Z)(function*(Ze){const nt=yield Ze._process(b,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const vt=Object.assign(Object.assign({},M),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(_.operationType){case"signIn":const ln=yield xr._fromIdTokenResponse(b,_.operationType,vt);return yield b._updateCurrentUser(ln.user),ln;case"reauthenticate":return ue(_.user,b,"internal-error"),xr._forOperation(_.user,_.operationType,vt);default:Ae(b,"internal-error")}});return function(Ze){return he.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,o.Z)(function*(){return _.signInResolver(p)})()}}function Wo(C,p){var _;const b=(0,H.m9)(C),M=p;return ue(p.customData.operationType,b,"argument-error"),ue(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),lu._fromError(b,M)}function Zl(C,p){return Pe(C,"POST","/v2/accounts/mfaEnrollment:start",fe(C,p))}class Ga{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>ui._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new Ga(p)}getSession(){var p=this;return(0,o.Z)(function*(){return hi._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var b=this;return(0,o.Z)(function*(){const M=p,O=yield b.getSession(),Q=yield qt(b.user,M._process(b.user.auth,O,_));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(p){var _=this;return(0,o.Z)(function*(){const b="string"==typeof p?p:p.uid,M=yield _.user.getIdToken();try{const O=yield qt(_.user,function Ks(C,p){return Pe(C,"POST","/v2/accounts/mfaEnrollment:withdraw",fe(C,p))}(_.user.auth,{idToken:M,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Q})=>Q!==b),yield _.user._updateTokensIfNecessary(O),yield _.user.reload()}catch(O){throw O}})()}}const Is=new WeakMap;function qa(C){const p=(0,H.m9)(C);return Is.has(p)||Is.set(p,Ga._fromUser(p)),Is.get(p)}const Ko="__sak";class za{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Ko,"1"),this.storage.removeItem(Ko),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vd=(()=>{class C extends za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cu(){const C=(0,H.z$)();return N(C)||Ie(C)}()&&function an(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ft(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),O=this.localCache[b];M!==O&&_(b,O,M)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((he,Ze,nt)=>{this.notifyListeners(he,nt)});const M=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(M);if(_.newValue!==he)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!b)return}const O=()=>{const he=this.storage.getItem(M);!b&&this.localCache[M]===he||this.notifyListeners(M,he)},Q=this.storage.getItem(M);!function Qt(){return(0,H.w1)()&&10===document.documentMode}()||Q===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,b){this.localCache[_]=b;const M=this.listeners[_];if(M)for(const O of Array.from(M))O(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var M=()=>super._set,O=this;return(0,o.Z)(function*(){yield M().call(O,_,b),O.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,M=this;return(0,o.Z)(function*(){const O=yield b().call(M,_);return M.localCache[_]=JSON.stringify(O),O})()}_remove(_){var b=()=>super._remove,M=this;return(0,o.Z)(function*(){yield b().call(M,_),delete M.localCache[_]})()}}return C.type="LOCAL",C})(),Yo=(()=>{class C extends za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return C.type="SESSION",C})();let ff=(()=>{class C{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(O=>O.isListeningto(_));if(b)return b;const M=new C(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,o.Z)(function*(){const M=_,{eventId:O,eventType:Q,data:he}=M.data,Ze=b.handlersMap[Q];if(!Ze?.size)return;M.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const nt=Array.from(Ze).map(function(){var ln=(0,o.Z)(function*(zi){return zi(M.origin,he)});return function(zi){return ln.apply(this,arguments)}}()),vt=yield function ug(C){return Promise.all(C.map(function(){var p=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return p.apply(this,arguments)}}()))}(nt);M.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:vt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function Qo(C="",p=10){let _="";for(let b=0;b<p;b++)_+=Math.floor(10*Math.random());return C+_}class Js{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,b=50){var M=this;return(0,o.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,he;return new Promise((Ze,nt)=>{const vt=Qo("",20);O.port1.start();const ln=setTimeout(()=>{nt(new Error("unsupported_event"))},b);he={messageChannel:O,onMessage(zi){const da=zi;if(da.data.eventId===vt)switch(da.data.status){case"ack":clearTimeout(ln),Q=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ze(da.data.response);break;default:clearTimeout(ln),clearTimeout(Q),nt(new Error("invalid_response"))}}},M.handlers.add(he),O.port1.addEventListener("message",he.onMessage),M.target.postMessage({eventType:p,eventId:vt,data:_},[O.port2])}).finally(()=>{he&&M.removeMessageHandler(he)})})()}}function or(){return window}function Ya(){return typeof or().WorkerGlobalScope<"u"&&"function"==typeof or().importScripts}function du(){return(du=(0,o.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fn="firebaseLocalStorageDb",sr="firebaseLocalStorage",ql="fbase_key";class Si{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function hu(C,p){return C.transaction([sr],p?"readwrite":"readonly").objectStore(sr)}function yn(){const C=indexedDB.open(Fn,1);return new Promise((p,_)=>{C.addEventListener("error",()=>{_(C.error)}),C.addEventListener("upgradeneeded",()=>{const b=C.result;try{b.createObjectStore(sr,{keyPath:ql})}catch(M){_(M)}}),C.addEventListener("success",(0,o.Z)(function*(){const b=C.result;b.objectStoreNames.contains(sr)?p(b):(b.close(),yield function Bd(){const C=indexedDB.deleteDatabase(Fn);return new Si(C).toPromise()}(),p(yield yn()))}))})}function jd(C,p,_){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,o.Z)(function*(C,p,_){const b=hu(C,!0).put({[ql]:p,value:_});return new Si(b).toPromise()})).apply(this,arguments)}function zl(){return(zl=(0,o.Z)(function*(C,p){const _=hu(C,!1).get(p),b=yield new Si(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function dg(C,p){const _=hu(C,!0).delete(p);return new Si(_).toPromise()}const gf=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield yn()),_.db})()}_withRetries(_){var b=this;return(0,o.Z)(function*(){let M=0;for(;;)try{const O=yield b._openDb();return yield _(O)}catch(O){if(M++>3)throw O;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return Ya()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=ff._getInstance(function xo(){return Ya()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,o.Z)(function*(M,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(M,O){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,o.Z)(function*(M,O){return["keyChanged"]});return function(M,O){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var b,M;if(_.activeServiceWorker=yield function uu(){return du.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Js(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(b=O[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=O[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,o.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Ud(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield yn();return yield jd(_,Ko,"1"),yield dg(_,Ko),!0}catch{}return!1})()}_withPendingWrite(_){var b=this;return(0,o.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var M=this;return(0,o.Z)(function*(){return M._withPendingWrite((0,o.Z)(function*(){return yield M._withRetries(O=>jd(O,_,b)),M.localCache[_]=b,M.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,o.Z)(function*(){const M=yield b._withRetries(O=>function U_(C,p){return zl.apply(this,arguments)}(O,_));return b.localCache[_]=M,M})()}_remove(_){var b=this;return(0,o.Z)(function*(){return b._withPendingWrite((0,o.Z)(function*(){return yield b._withRetries(M=>dg(M,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const b=yield _._withRetries(Q=>{const he=hu(Q,!1).getAll();return new Si(he).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const M=[],O=new Set;for(const{fbase_key:Q,value:he}of b)O.add(Q),JSON.stringify(_.localCache[Q])!==JSON.stringify(he)&&(_.notifyListeners(Q,he),M.push(Q));for(const Q of Object.keys(_.localCache))_.localCache[Q]&&!O.has(Q)&&(_.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(_,b){this.localCache[_]=b;const M=this.listeners[_];if(M)for(const O of Array.from(M))O(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function B_(C,p){return Pe(C,"POST","/v2/accounts/mfaSignIn:start",fe(C,p))}const Yl=1e12;class Dr{constructor(p){this.auth=p,this.counter=Yl,this._widgets=new Map}render(p,_){const b=this.counter;return this._widgets.set(b,new qi(p,this.auth.name,_||{})),this.counter++,b}reset(p){var _;const b=p||Yl;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Yl))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,o.Z)(function*(){var b;return null===(b=_._widgets.get(p||Yl))||void 0===b||b.execute(),""})()}}class qi{constructor(p,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;ue(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fu(C){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<C;b++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ja=$r("rcb"),Ql=new si(3e4,6e4);class Zd{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=or().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ue(function fg(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(_),p,"argument-error"),this.shouldResolveImmediately(_)&&Mt(or().grecaptcha)?Promise.resolve(or().grecaptcha):new Promise((b,M)=>{const O=or().setTimeout(()=>{M(Ee(p,"network-request-failed"))},Ql.get());or()[Ja]=()=>{or().clearTimeout(O),delete or()[Ja];const he=or().grecaptcha;if(!he||!Mt(he))return void M(Ee(p,"internal-error"));const Ze=he.render;he.render=(nt,vt)=>{const ln=Ze(nt,vt);return this.counter++,ln},this.hostLanguage=_,b(he)},Jt(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:Ja,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),M(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=or().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mf{load(p){return(0,o.Z)(function*(){return new Dr(p)})()}clearedOneInstance(){}}const pg="recaptcha",pu={theme:"light",type:"image"};class fi{constructor(p,_=Object.assign({},pu),b){this.parameters=_,this.type=pg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$n(b),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;ue(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mf:new Zd,this.validateStartingState()}verify(){var p=this;return(0,o.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(_)||new Promise(O=>{const Q=he=>{!he||(p.tokenChangeListeners.delete(Q),O(he))};p.tokenChangeListeners.add(Q),p.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof p)p(_);else if("string"==typeof p){const b=or()[p];"function"==typeof b&&b(_)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,o.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,o.Z)(function*(){ue(Gt()&&!Ya(),p.auth,"internal-error"),yield function Jl(){let C=null;return new Promise(p=>{"complete"!==document.readyState?(C=()=>p(),window.addEventListener("load",C)):p()}).catch(p=>{throw C&&window.removeEventListener("load",C),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function le(C){return ie.apply(this,arguments)}(p.auth);ue(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Es{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Wn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function _f(C,p,_){return gu.apply(this,arguments)}function gu(){return(gu=(0,o.Z)(function*(C,p,_){const b=$n(C),M=yield ea(b,p,(0,H.m9)(_));return new Es(M,O=>Go(b,O))})).apply(this,arguments)}function Gd(C,p,_){return qd.apply(this,arguments)}function qd(){return(qd=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C);yield ke(!1,b,"phone");const M=yield ea(b.auth,p,(0,H.m9)(_));return new Es(M,O=>Fa(b,O))})).apply(this,arguments)}function Xl(C,p,_){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C),M=yield ea(b.auth,p,(0,H.m9)(_));return new Es(M,O=>Ad(b,O))})).apply(this,arguments)}function ea(C,p,_){return mu.apply(this,arguments)}function mu(){return(mu=(0,o.Z)(function*(C,p,_){var b;const M=yield _.verify();try{let O;if(ue("string"==typeof M,C,"argument-error"),ue(_.type===pg,C,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const Q=O.session;if("phoneNumber"in O)return ue("enroll"===Q.type,C,"internal-error"),(yield Zl(C,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{ue("signin"===Q.type,C,"internal-error");const he=(null===(b=O.multiFactorHint)||void 0===b?void 0:b.uid)||O.multiFactorUid;return ue(he,C,"missing-multi-factor-info"),(yield B_(C,{mfaPendingCredential:Q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield Zc(C,{phoneNumber:O.phoneNumber,recaptchaToken:M});return Q}}finally{_._reset()}})).apply(this,arguments)}function mn(C,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,o.Z)(function*(C,p){yield Zi((0,H.m9)(C),p)})).apply(this,arguments)}let gg=(()=>{class C{constructor(_){this.providerId=C.PROVIDER_ID,this.auth=$n(_)}verifyPhoneNumber(_,b){return ea(this.auth,_,(0,H.m9)(b))}static credential(_,b){return Wn._fromVerification(_,b)}static credentialFromResult(_){return C.credentialFromTaggedObject(_)}static credentialFromError(_){return C.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:M}=_;return b&&M?Wn._fromTokenResponse(b,M):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function pi(C,p){return p?er(p):(ue(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class el extends Eo{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return gs(p,this._buildIdpRequest())}_linkToIdToken(p,_){return gs(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return gs(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function gi(C){return Kn(C.auth,new el(C),C.bypassAuthState)}function _u(C){const{auth:p,user:_}=C;return ue(_,p,"internal-error"),Xc(_,new el(C),C.bypassAuthState)}function zd(C){return Do.apply(this,arguments)}function Do(){return(Do=(0,o.Z)(function*(C){const{auth:p,user:_}=C;return ue(_,p,"internal-error"),Zi(_,new el(C),C.bypassAuthState)})).apply(this,arguments)}class Ao{constructor(p,_,b,M,O=!1){this.auth=p,this.resolver=b,this.user=M,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,o.Z)(function*(b,M){p.pendingPromise={resolve:b,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(b,M){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,o.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:O,tenantId:Q,error:he,type:Ze}=p;if(he)return void _.reject(he);const nt={auth:_.auth,requestUri:b,sessionId:M,tenantId:Q||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ze)(nt))}catch(vt){_.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return gi;case"linkViaPopup":case"linkViaRedirect":return zd;case"reauthViaPopup":case"reauthViaRedirect":return _u;default:Ae(this.auth,"internal-error")}}resolve(p){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){At(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zn=new si(2e3,1e4);function ht(C,p,_){return tl.apply(this,arguments)}function tl(){return(tl=(0,o.Z)(function*(C,p,_){const b=$n(C);qe(C,p,xn);const M=pi(b,_);return new Jo(b,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function lr(C,p,_){return nl.apply(this,arguments)}function nl(){return(nl=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C);qe(b.auth,p,xn);const M=pi(b.auth,_);return new Jo(b.auth,"reauthViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}function yu(C,p,_){return ec.apply(this,arguments)}function ec(){return(ec=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C);qe(b.auth,p,xn);const M=pi(b.auth,_);return new Jo(b.auth,"linkViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}let Jo=(()=>{class C extends Ao{constructor(_,b,M,O,Q){super(_,b,O,Q),this.provider=M,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const b=yield _.execute();return ue(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,o.Z)(function*(){At(1===_.filter.length,"Popup operations only handle one event");const b=Qo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(Ee(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,M;this.pollId=null!==(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Zn.get())};_()}}return C.currentPopupAction=null,C})();const Pr=new Map;class mg extends Ao{constructor(p,_,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,o.Z)(function*(){let b=Pr.get(_.auth._key());if(!b){try{const O=(yield function vu(C,p){return So.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;b=()=>Promise.resolve(O)}catch(M){b=()=>Promise.reject(M)}Pr.set(_.auth._key(),b)}return _.bypassAuthState||Pr.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,b=this;return(0,o.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(b,p);if("unknown"!==p.type){if(p.eventId){const M=yield b.auth._redirectUserForId(p.eventId);if(M)return b.user=M,_().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function So(){return(So=(0,o.Z)(function*(C,p){const _=rl(p),b=_i(C);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(_));return yield b._remove(_),M})).apply(this,arguments)}function Cu(C,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,o.Z)(function*(C,p){return _i(C)._set(rl(p),"true")})).apply(this,arguments)}function mi(){Pr.clear()}function Wd(C,p){Pr.set(C._key(),p)}function _i(C){return er(C._redirectPersistence)}function rl(C){return jr("pendingRedirect",C.config.apiKey,C.name)}function Cr(C,p,_){return function Mo(C,p,_){return wu.apply(this,arguments)}(C,p,_)}function wu(){return(wu=(0,o.Z)(function*(C,p,_){const b=$n(C);qe(C,p,xn),yield b._initializationPromise;const M=pi(b,_);return yield Cu(M,b),M._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Or(C,p,_){return function na(C,p,_){return tc.apply(this,arguments)}(C,p,_)}function tc(){return(tc=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C);qe(b.auth,p,xn),yield b.auth._initializationPromise;const M=pi(b.auth,_);yield Cu(M,b.auth);const O=yield xs(b);return M._openRedirect(b.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function yf(C,p,_){return function bu(C,p,_){return Iu.apply(this,arguments)}(C,p,_)}function Iu(){return(Iu=(0,o.Z)(function*(C,p,_){const b=(0,H.m9)(C);qe(b.auth,p,xn),yield b.auth._initializationPromise;const M=pi(b.auth,_);yield ke(!1,b,p.providerId),yield Cu(M,b.auth);const O=yield xs(b);return M._openRedirect(b.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function vf(C,p){return il.apply(this,arguments)}function il(){return(il=(0,o.Z)(function*(C,p){return yield $n(C)._initializationPromise,nc(C,p,!1)})).apply(this,arguments)}function nc(C,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,o.Z)(function*(C,p,_=!1){const b=$n(C),M=pi(b,p),Q=yield new mg(b,M,_).execute();return Q&&!_&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,p)),Q})).apply(this,arguments)}function xs(C){return ol.apply(this,arguments)}function ol(){return(ol=(0,o.Z)(function*(C){const p=Qo(`${C.uid}:::`);return C._redirectEventId=p,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),p})).apply(this,arguments)}class ra{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(_=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Tu(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ia(C);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var b;if(p.error&&!ia(p)){const M=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(Ee(this.auth,M))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const b=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eu(p))}saveEventToCache(p){this.cachedEventUids.add(Eu(p)),this.lastProcessedEventTime=Date.now()}}function Eu(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(p=>p).join("-")}function ia({type:C,error:p}){return"unknown"===C&&"auth/no-auth-event"===p?.code}function oa(C){return sa.apply(this,arguments)}function sa(){return(sa=(0,o.Z)(function*(C,p={}){return Pe(C,"GET","/v1/projects",p)})).apply(this,arguments)}const ic=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_g=/^https?/;function aa(){return(aa=(0,o.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:p}=yield oa(C);for(const _ of p)try{if(Kd(_))return}catch{}Ae(C,"unauthorized-domain")})).apply(this,arguments)}function Kd(C){const p=gt(),{protocol:_,hostname:b}=new URL(p);if(C.startsWith("chrome-extension://")){const Q=new URL(C);return""===Q.hostname&&""===b?"chrome-extension:"===_&&C.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&Q.hostname===b}if(!_g.test(_))return!1;if(ic.test(C))return b===C;const M=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const es=new si(3e4,6e4);function xu(){const C=or().___jsl;if(C?.H)for(const p of Object.keys(C.H))if(C.H[p].r=C.H[p].r||[],C.H[p].L=C.H[p].L||[],C.H[p].r=[...C.H[p].L],C.CP)for(let _=0;_<C.CP.length;_++)C.CP[_]=null}let oc=null;function Yn(C){return oc=oc||function Cf(C){return new Promise((p,_)=>{var b,M,O;function Q(){xu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{xu(),_(Ee(C,"network-request-failed"))},timeout:es.get()})}if(null!==(M=null===(b=or().gapi)||void 0===b?void 0:b.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(O=or().gapi)||void 0===O||!O.load){const he=$r("iframefcb");return or()[he]=()=>{gapi.load?Q():_(Ee(C,"network-request-failed"))},Jt(`https://apis.google.com/js/api.js?onload=${he}`).catch(Ze=>_(Ze))}Q()}}).catch(p=>{throw oc=null,p})}(C),oc}const ko=new si(5e3,15e3),vg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ei=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tr(C){const p=C.config;ue(p.authDomain,C,"auth-domain-config-required");const _=p.emulator?so(p,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:C.name,v:R.SDK_VERSION},M=ei.get(C.config.apiHost);M&&(b.eid=M);const O=C._getFrameworks();return O.length&&(b.fw=O.join(",")),`${_}?${(0,H.xO)(b).slice(1)}`}function la(){return la=(0,o.Z)(function*(C){const p=yield Yn(C),_=or().gapi;return ue(_,C,"internal-error"),p.open({where:document.body,url:tr(C),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vg,dontclear:!0},b=>new Promise(function(){var M=(0,o.Z)(function*(O,Q){yield b.restyle({setHideOnLeave:!1});const he=Ee(C,"network-request-failed"),Ze=or().setTimeout(()=>{Q(he)},ko.get());function nt(){or().clearTimeout(Ze),O(b)}b.ping(nt).then(nt,()=>{Q(he)})});return function(O,Q){return M.apply(this,arguments)}}()))}),la.apply(this,arguments)}const w={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class X{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Lt=encodeURIComponent("fac");function Nt(C,p,_,b,M,O){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,o.Z)(function*(C,p,_,b,M,O){ue(C.config.authDomain,C,"auth-domain-config-required"),ue(C.config.apiKey,C,"invalid-api-key");const Q={apiKey:C.config.apiKey,appName:C.name,authType:_,redirectUrl:b,v:R.SDK_VERSION,eventId:M};if(p instanceof xn){p.setDefaultLanguage(C.languageCode),Q.providerId=p.providerId||"",(0,H.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[vt,ln]of Object.entries(O||{}))Q[vt]=ln}if(p instanceof $s){const vt=p.getScopes().filter(ln=>""!==ln);vt.length>0&&(Q.scopes=vt.join(","))}C.tenantId&&(Q.tid=C.tenantId);const he=Q;for(const vt of Object.keys(he))void 0===he[vt]&&delete he[vt];const Ze=yield C._getAppCheckToken(),nt=Ze?`#${Lt}=${encodeURIComponent(Ze)}`:"";return`${hn(C)}?${(0,H.xO)(he).slice(1)}${nt}`})).apply(this,arguments)}function hn({config:C}){return C.emulator?so(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}const fo="webStorageSupport",po=class ca{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yo,this._completeRedirectFn=nc,this._overrideRedirectResult=Wd}_openPopup(p,_,b,M){var O=this;return(0,o.Z)(function*(){var Q;At(null===(Q=O.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const he=yield Nt(p,_,b,gt(),M);return function me(C,p,_,b=500,M=600){const O=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let he="";const Ze=Object.assign(Object.assign({},w),{width:b.toString(),height:M.toString(),top:O,left:Q}),nt=(0,H.z$)().toLowerCase();_&&(he=P(nt)?"_blank":_),F(nt)&&(p=p||"http://localhost",Ze.scrollbars="yes");const vt=Object.entries(Ze).reduce((zi,[da,ac])=>`${zi}${da}=${ac},`,"");if(function at(C=(0,H.z$)()){var p;return Ie(C)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(nt)&&"_self"!==he)return function Je(C,p){const _=document.createElement("a");_.href=C,_.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(p||"",he),new X(null);const ln=window.open(p||"",he,vt);ue(ln,C,"popup-blocked");try{ln.focus()}catch{}return new X(ln)}(p,he,Qo())})()}_openRedirect(p,_,b,M){var O=this;return(0,o.Z)(function*(){return yield O._originValidation(p),function Ka(C){or().location.href=C}(yield Nt(p,_,b,gt(),M)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:M,promise:O}=this.eventManagers[_];return M?Promise.resolve(M):(At(O,"If manager is not set, promise should be"),O)}const b=this.initAndGetManager(p);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(p){var _=this;return(0,o.Z)(function*(){const b=yield function Du(C){return la.apply(this,arguments)}(p),M=new ra(p);return b.register("authEvent",O=>(ue(O?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:M},_.iframes[p._key()]=b,M})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(fo,{type:fo},M=>{var O;const Q=null===(O=M?.[0])||void 0===O?void 0:O[fo];void 0!==Q&&_(!!Q),Ae(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function yg(C){return aa.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ft()||N()||Ie()}};class Rr extends class ti{constructor(p){this.factorId=p}_process(p,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,b);case"signin":return this._finalizeSignIn(p,_.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Rr(p)}_finalizeEnroll(p,_,b){return function Za(C,p){return Pe(C,"POST","/v2/accounts/mfaEnrollment:finalize",fe(C,p))}(p,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function ar(C,p){return Pe(C,"POST","/v2/accounts/mfaSignIn:finalize",fe(C,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ua=(()=>{class C{constructor(){}static assertion(_){return Rr._fromCredential(_)}}return C.FACTOR_ID="phone",C})();var Mu="@firebase/auth";class Qd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(b=>{p(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,H.Pz)("authIdTokenMaxAge"),function sc(C){(0,R._registerComponent)(new _e.wA("auth",(p,{options:_})=>{const b=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:he}=b.options;ue(Q&&!Q.includes(":"),"invalid-api-key",{appName:b.name});const Ze={apiKey:Q,authDomain:he,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hr(C)},nt=new fs(b,M,O,Ze);return function Hs(C,p){const _=p?.persistence||[],b=(Array.isArray(_)?_:[_]).map(er);p?.errorMap&&C._updateErrorMap(p.errorMap),C._initializeWithPersistence(b,p?.popupRedirectResolver)}(nt,_),nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,b)=>{p.getProvider("auth-internal").initialize()})),(0,R._registerComponent)(new _e.wA("auth-internal",p=>{const _=$n(p.getProvider("auth").getImmediate());return new Qd(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,R.registerVersion)(Mu,"0.23.2",function Jd(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,R.registerVersion)(Mu,"0.23.2","esm2017")}("Browser")},2090:(bt,Ne,U)=>{U.d(Ne,{$s:()=>er,BH:()=>Se,G6:()=>so,L:()=>Ce,LL:()=>Me,P0:()=>pt,Pz:()=>Ee,Sg:()=>qe,UG:()=>Qe,US:()=>_e,ZB:()=>J,ZR:()=>Pe,aH:()=>Ae,b$:()=>Gt,eu:()=>ne,hl:()=>se,jU:()=>At,m9:()=>jr,ne:()=>qt,pd:()=>Nn,r3:()=>Bn,ru:()=>gt,tV:()=>z,uI:()=>ue,vZ:()=>_r,w1:()=>oo,xO:()=>ji,xb:()=>Ii,z$:()=>ze,zI:()=>De,zd:()=>Yr});const oe=function(Z){const $=[];let F=0;for(let N=0;N<Z.length;N++){let P=Z.charCodeAt(N);P<128?$[F++]=P:P<2048?($[F++]=P>>6|192,$[F++]=63&P|128):55296==(64512&P)&&N+1<Z.length&&56320==(64512&Z.charCodeAt(N+1))?(P=65536+((1023&P)<<10)+(1023&Z.charCodeAt(++N)),$[F++]=P>>18|240,$[F++]=P>>12&63|128,$[F++]=P>>6&63|128,$[F++]=63&P|128):($[F++]=P>>12|224,$[F++]=P>>6&63|128,$[F++]=63&P|128)}return $},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,$){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let P=0;P<Z.length;P+=3){const Y=Z[P],be=P+1<Z.length,Ye=be?Z[P+1]:0,mt=P+2<Z.length,Ie=mt?Z[P+2]:0;let Qt=(15&Ye)<<2|Ie>>6,Ft=63&Ie;mt||(Ft=64,be||(Qt=64)),N.push(F[Y>>2],F[(3&Y)<<4|Ye>>4],F[Qt],F[Ft])}return N.join("")},encodeString(Z,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(Z):this.encodeByteArray(oe(Z),$)},decodeString(Z,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(Z):function(Z){const $=[];let F=0,N=0;for(;F<Z.length;){const P=Z[F++];if(P<128)$[N++]=String.fromCharCode(P);else if(P>191&&P<224){const Y=Z[F++];$[N++]=String.fromCharCode((31&P)<<6|63&Y)}else if(P>239&&P<365){const mt=((7&P)<<18|(63&Z[F++])<<12|(63&Z[F++])<<6|63&Z[F++])-65536;$[N++]=String.fromCharCode(55296+(mt>>10)),$[N++]=String.fromCharCode(56320+(1023&mt))}else{const Y=Z[F++],be=Z[F++];$[N++]=String.fromCharCode((15&P)<<12|(63&Y)<<6|63&be)}}return $.join("")}(this.decodeStringToByteArray(Z,$))},decodeStringToByteArray(Z,$){this.init_();const F=$?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let P=0;P<Z.length;){const Y=F[Z.charAt(P++)],Ye=P<Z.length?F[Z.charAt(P)]:0;++P;const Ie=P<Z.length?F[Z.charAt(P)]:64;++P;const at=P<Z.length?F[Z.charAt(P)]:64;if(++P,null==Y||null==Ye||null==Ie||null==at)throw new pe;N.push(Y<<2|Ye>>4),64!==Ie&&(N.push(Ye<<4&240|Ie>>2),64!==at&&N.push(Ie<<6&192|at))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ce=function(Z){return function(Z){const $=oe(Z);return _e.encodeByteArray($,!0)}(Z).replace(/\./g,"")},z=function(Z){try{return _e.decodeString(Z,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function J(Z,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return $}for(const F in $)!$.hasOwnProperty(F)||!$e(F)||(Z[F]=J(Z[F],$[F]));return Z}function $e(Z){return"__proto__"!==Z}const ye=()=>{try{return function Oe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const Z=process.env.__FIREBASE_DEFAULTS__;return Z?JSON.parse(Z):void 0})()||(()=>{if(typeof document>"u")return;let Z;try{Z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=Z&&z(Z[1]);return $&&JSON.parse($)})()}catch(Z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Z}`)}},pt=Z=>{const $=(Z=>{var $,F;return null===(F=null===($=ye())||void 0===$?void 0:$.emulatorHosts)||void 0===F?void 0:F[Z]})(Z);if(!$)return;const F=$.lastIndexOf(":");if(F<=0||F+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const N=parseInt($.substring(F+1),10);return"["===$[0]?[$.substring(1,F-1),N]:[$.substring(0,F),N]},Ae=()=>{var Z;return null===(Z=ye())||void 0===Z?void 0:Z.config},Ee=Z=>{var $;return null===($=ye())||void 0===$?void 0:$[`_${Z}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,F)=>{this.resolve=$,this.reject=F})}wrapCallback($){return(F,N)=>{F?this.reject(F):this.resolve(N),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(F):$(F,N))}}}function qe(Z,$){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=$||"demo-project",P=Z.iat||0,Y=Z.sub||Z.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:P,exp:P+3600,auth_time:P,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[Ce(JSON.stringify({alg:"none",type:"JWT"})),Ce(JSON.stringify(be)),""].join(".")}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ue(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Qe(){var Z;const $=null===(Z=ye())||void 0===Z?void 0:Z.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function At(){return"object"==typeof self&&self.self===self}function gt(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function Gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function oo(){const Z=ze();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function so(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){try{return"object"==typeof indexedDB}catch{return!1}}function ne(){return new Promise((Z,$)=>{try{let F=!0;const N="validate-browser-context-for-indexeddb-analytics-module",P=self.indexedDB.open(N);P.onsuccess=()=>{P.result.close(),F||self.indexedDB.deleteDatabase(N),Z(!0)},P.onupgradeneeded=()=>{F=!1},P.onerror=()=>{var Y;$((null===(Y=P.error)||void 0===Y?void 0:Y.message)||"")}}catch(F){$(F)}})}function De(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Pe extends Error{constructor($,F,N){super(F),this.code=$,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor($,F,N){this.service=$,this.serviceName=F,this.errors=N}create($,...F){const N=F[0]||{},P=`${this.service}/${$}`,Y=this.errors[$],be=Y?function lt(Z,$){return Z.replace(xt,(F,N)=>{const P=$[N];return null!=P?String(P):`<${N}?>`})}(Y,N):"Error";return new Pe(P,`${this.serviceName}: ${be} (${P}).`,N)}}const xt=/\{\$([^}]+)}/g;function Bn(Z,$){return Object.prototype.hasOwnProperty.call(Z,$)}function Ii(Z){for(const $ in Z)if(Object.prototype.hasOwnProperty.call(Z,$))return!1;return!0}function _r(Z,$){if(Z===$)return!0;const F=Object.keys(Z),N=Object.keys($);for(const P of F){if(!N.includes(P))return!1;const Y=Z[P],be=$[P];if(Jn(Y)&&Jn(be)){if(!_r(Y,be))return!1}else if(Y!==be)return!1}for(const P of N)if(!F.includes(P))return!1;return!0}function Jn(Z){return null!==Z&&"object"==typeof Z}function ji(Z){const $=[];for(const[F,N]of Object.entries(Z))Array.isArray(N)?N.forEach(P=>{$.push(encodeURIComponent(F)+"="+encodeURIComponent(P))}):$.push(encodeURIComponent(F)+"="+encodeURIComponent(N));return $.length?"&"+$.join("&"):""}function Yr(Z){const $={};return Z.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[P,Y]=N.split("=");$[decodeURIComponent(P)]=decodeURIComponent(Y)}}),$}function Nn(Z){const $=Z.indexOf("?");if(!$)return"";const F=Z.indexOf("#",$);return Z.substring($,F>0?F:void 0)}function qt(Z,$){const F=new dt(Z,$);return F.subscribe.bind(F)}class dt{constructor($,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{$(this)}).catch(N=>{this.error(N)})}next($){this.forEachObserver(F=>{F.next($)})}error($){this.forEachObserver(F=>{F.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,F,N){let P;if(void 0===$&&void 0===F&&void 0===N)throw new Error("Missing Observer.");P=function nn(Z,$){if("object"!=typeof Z||null===Z)return!1;for(const F of $)if(F in Z&&"function"==typeof Z[F])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:F,complete:N},void 0===P.next&&(P.next=Qr),void 0===P.error&&(P.error=Qr),void 0===P.complete&&(P.complete=Qr);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?P.error(this.finalError):P.complete()}catch{}}),this.observers.push(P),Y}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,$)}sendOne($,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{F(this.observers[$])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function er(Z,$=1e3,F=2){const N=$*Math.pow(F,Z),P=Math.round(.5*N*(Math.random()-.5)*2);return Math.min(144e5,N+P)}function jr(Z){return Z&&Z._delegate?Z._delegate:Z}},8134:(bt,Ne,U)=>{var o=U(4650);let H=null;function R(){return H}const pe=new o.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ce(){return(0,o.LFG)(G)}()},providedIn:"platform"}),n})();const z=new o.OlP("Location Initialized");let G=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return R().getBaseHref(this._doc)}onPopState(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=R().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function $e(){return new G((0,o.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let we=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(yt)},providedIn:"root"}),n})();const ye=new o.OlP("appBaseHref");let yt=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,o.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,l){const u=this.prepareExternalUrl(i+it(l));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){const u=this.prepareExternalUrl(i+it(l));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ve),o.LFG(ye,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends we{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,l){let u=this.prepareExternalUrl(i+it(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,l){let u=this.prepareExternalUrl(i+it(l));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(ve),o.LFG(ye,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new o.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=xe(qe(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function Se(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,qe(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=Oe,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(o.LFG(we))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ee(){return new Ae((0,o.LFG)(we))}()},providedIn:"root"}),n})();function qe(n){return n.replace(/\/index.html$/,"")}let tn=(()=>{class n{constructor(t,r,i,l){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=l,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class $n{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ti=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,l,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new $n(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===l?void 0:l);else if(null!==l){const f=r.get(l);r.move(f,u),ps(f,i)}});for(let i=0,l=r.length;i<l;i++){const f=r.get(i).context;f.index=i,f.count=l,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ps(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ps(n,e){n.context.$implicit=e.item}let _n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new _d,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Tr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Tr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class _d{constructor(){this.$implicit=null,this.ngIf=null}}function Tr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(e)}'.`)}let yd=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,l]=t.split("."),u=-1===i.indexOf("-")?void 0:o.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,l?`${r}${l}`:r,u):this._renderer.removeStyle(this._ngEl.nativeElement,i,u)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Td=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function Zo(n){return"server"===n}let $s=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Wc((0,o.LFG)(pe),window)}),n})();class Wc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function li(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const l=i.shadowRoot;if(l){const u=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],i-l[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_s(this.window.history)||_s(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _s(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ou extends class cf extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function de(n){H||(H=n)}(new ou)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function su(){return Hl=Hl||document.querySelector("base"),Hl?Hl.getAttribute("href"):null}();return null==t?null:function Ld(n){$l=$l||document.createElement("a"),$l.setAttribute("href",n);const e=$l.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Da(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let $l,Hl=null;const Ws=new o.OlP("TRANSITION_ID"),au=[{provide:o.ip1,useFactory:function uf(n,e,t){return()=>{t.get(o.CZH).donePromise.then(()=>{const r=R(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<i.length;l++)r.remove(i[l])})}},deps:[Ws,pe,o.zs3],multi:!0}];let df=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const uo=new o.OlP("EventManagerPlugins");let zo=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let l=0;l<i.length;l++){const u=i[l];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(uo),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class hi{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=R().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let lu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Wo=(()=>{class n extends lu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(l=>{const u=this._doc.createElement("style");u.textContent=l,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zl))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Zl(n){R().remove(n)}const Za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Gi=/%COMP%/g;function za(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?za(n,i,t):(i=i.replace(Gi,n),t.push(i))}return t}function cu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ys=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Wa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case o.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ug(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case o.ifc.ShadowDom:return new ff(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=za(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(zo),o.LFG(Wo),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Wa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Za[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Yo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Yo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const l=Za[i];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Za[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(o.JOm.DashCase|o.JOm.Important)?e.style.setProperty(t,r,i&o.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&o.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,cu(r)):this.eventManager.addEventListener(e,t,cu(r))}}function Yo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ug extends Wa{constructor(e,t,r,i){super(e),this.component=r;const l=za(i+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr=function qa(n){return"_ngcontent-%COMP%".replace(Gi,n)}(i+"-"+r.id),this.hostAttr=function Ko(n){return"_nghost-%COMP%".replace(Gi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ff extends Wa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=za(i.id,i.styles,[]);for(let u=0;u<l.length;u++){const f=document.createElement("style");f.textContent=l[u],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Qo=(()=>{class n extends hi{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Js=["alt","control","meta","shift"],or={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ka={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ya=(()=>{class n extends hi{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const l=n.parseEventName(r),u=n.eventCallback(l.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>R().onAndCancel(t,l.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const l=n._normalizeKey(r.pop());let u="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),u="code."),Js.forEach(v=>{const x=r.indexOf(v);x>-1&&(r.splice(x,1),u+=v+".")}),u+=l,0!=r.length||0===l.length)return null;const m={};return m.domEventName=i,m.fullKey=u,m}static matchEventFullKeyCode(t,r){let i=or[t.key]||t.key,l="";return r.indexOf("code.")>-1&&(i=t.code,l="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Js.forEach(u=>{u!==i&&(0,Ka[u])(t)&&(l+=u+".")}),l+=i,l===r)}static eventCallback(t,r,i){return l=>{n.matchEventFullKeyCode(l,t)&&i.runGuarded(()=>r(l))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const hu=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:"browser"},{provide:o.g9A,useValue:function Xs(){ou.makeCurrent()},multi:!0},{provide:pe,useFactory:function ql(){return(0,o.RDi)(document),document},deps:[]}]),Bd=new o.OlP(""),yn=[{provide:o.rWj,useClass:class $a{addToWindow(e){o.dqk.getAngularTestability=(r,i=!0)=>{const l=e.findTestabilityInTree(r,i);if(null==l)throw new Error("Could not find testability for element.");return l},o.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(r=>{const i=o.dqk.getAllAngularTestabilities();let l=i.length,u=!1;const f=function(m){u=u||m,l--,0==l&&r(u)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?R().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:o.lri,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b,o.eoX,o.rWj]}],jd=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function sr(){return new o.qLn},deps:[]},{provide:uo,useClass:Qo,multi:!0,deps:[pe,o.R0b,o.Lbi]},{provide:uo,useClass:Ya,multi:!0,deps:[pe]},{provide:Ys,useClass:Ys,deps:[zo,Wo,o.AFp]},{provide:o.FYo,useExisting:Ys},{provide:lu,useExisting:Wo},{provide:Wo,useClass:Wo,deps:[pe]},{provide:zo,useClass:zo,deps:[uo,o.R0b]},{provide:class Kc{},useClass:df,deps:[]},[]];let Qa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:o.AFp,useValue:t.appId},{provide:Ws,useExisting:o.AFp},au]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Bd,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[...jd,...yn],imports:[Td,o.hGG]}),n})(),pf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function hg(){return new pf((0,o.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Xl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):o.LFG(ea),r},providedIn:"root"}),n})(),ea=(()=>{class n extends Xl{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case o.q3G.NONE:return r;case o.q3G.HTML:return(0,o.qzn)(r,"HTML")?(0,o.z3N)(r):(0,o.EiD)(this._doc,String(r)).toString();case o.q3G.STYLE:return(0,o.qzn)(r,"Style")?(0,o.z3N)(r):r;case o.q3G.SCRIPT:if((0,o.qzn)(r,"Script"))return(0,o.z3N)(r);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.qzn)(r,"URL")?(0,o.z3N)(r):(0,o.mCW)(String(r));case o.q3G.RESOURCE_URL:if((0,o.qzn)(r,"ResourceURL"))return(0,o.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,o.JVY)(t)}bypassSecurityTrustStyle(t){return(0,o.L6k)(t)}bypassSecurityTrustScript(t){return(0,o.eBb)(t)}bypassSecurityTrustUrl(t){return(0,o.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,o.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Xa(n){return new ea(n.get(pe))}(o.LFG(o.zs3)),r},providedIn:"root"}),n})();var mn=U(8996),Ar=U(9751);const{isArray:gg}=Array,{getPrototypeOf:pi,prototype:el,keys:gi}=Object;function _u(n){if(1===n.length){const e=n[0];if(gg(e))return{args:e,keys:null};if(function zd(n){return n&&"object"==typeof n&&pi(n)===el}(e)){const t=gi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Do=U(8421),Ao=U(7669),Zn=U(5403),ht=U(4004);const{isArray:tl}=Array;function nl(n){return(0,ht.U)(e=>function lr(n,e){return tl(e)?n(...e):n(e)}(n,e))}function yu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Jo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Ts=(()=>{class n extends Jo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Pr=new o.OlP("NgValueAccessor"),So={provide:Pr,useExisting:(0,o.Gpc)(()=>mi),multi:!0},ta=new o.OlP("CompositionEventMode");let mi=(()=>{class n extends Jo{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Cu(){const n=R()?R().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(ta,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[o._Bn([So]),o.qOj]}),n})();function _i(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function rl(n){return null!=n&&"number"==typeof n.length}const Cr=new o.OlP("NgValidators"),Mo=new o.OlP("NgAsyncValidators"),wu=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Or{static min(e){return function na(n){return e=>{if(_i(e.value)||_i(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function tc(n){return e=>{if(_i(e.value)||_i(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return yf(e)}static requiredTrue(e){return function bu(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Iu(n){return _i(n.value)||wu.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function vf(n){return e=>_i(e.value)||!rl(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return il(e)}static pattern(e){return function nc(n){if(!n)return Xo;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(_i(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Tu(e)}static composeAsync(e){return sa(e)}}function yf(n){return _i(n.value)?{required:!0}:null}function il(n){return e=>rl(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Xo(n){return null}function xs(n){return null!=n}function ol(n){return(0,o.QGY)(n)?(0,mn.D)(n):n}function rc(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ra(n,e){return e.map(t=>t(n))}function ia(n){return n.map(e=>function Eu(n){return!n.validate}(e)?e:t=>e.validate(t))}function Tu(n){if(!n)return null;const e=n.filter(xs);return 0==e.length?null:function(t){return rc(ra(t,e))}}function oa(n){return null!=n?Tu(ia(n)):null}function sa(n){if(!n)return null;const e=n.filter(xs);return 0==e.length?null:function(t){return function ec(...n){const e=(0,Ao.jO)(n),{args:t,keys:r}=_u(n),i=new Ar.y(l=>{const{length:u}=t;if(!u)return void l.complete();const f=new Array(u);let m=u,v=u;for(let x=0;x<u;x++){let D=!1;(0,Do.Xf)(t[x]).subscribe((0,Zn.x)(l,L=>{D||(D=!0,v--),f[x]=L},()=>m--,void 0,()=>{(!m||!D)&&(v||l.next(r?yu(r,f):f),l.complete())}))}});return e?i.pipe(nl(e)):i}(ra(t,e).map(ol)).pipe((0,ht.U)(rc))}}function ic(n){return null!=n?sa(ia(n)):null}function _g(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yg(n){return n._rawValidators}function aa(n){return n._rawAsyncValidators}function Kd(n){return n?Array.isArray(n)?n:[n]:[]}function es(n,e){return Array.isArray(n)?n.includes(e):n===e}function xu(n,e){const t=Kd(e);return Kd(n).forEach(i=>{es(t,i)||t.push(i)}),t}function Cf(n,e){return Kd(e).filter(t=>!es(n,t))}class oc{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=oa(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ic(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yn extends oc{get formDirective(){return null}get path(){return null}}class ko extends oc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ho{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let ei=(()=>{class n extends ho{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(ko,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[o.qOj]}),n})(),tr=(()=>{class n extends ho{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Yn,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&o.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[o.qOj]}),n})();const po="VALID",ti="INVALID",Rr="PENDING",ua="DISABLED";function bf(n){return(Mu(n)?n.validators:n)||null}function Yd(n){return Array.isArray(n)?oa(n):n||null}function Au(n,e){return(Mu(e)?e.asyncValidators:n)||null}function Su(n){return Array.isArray(n)?ic(n):n||null}function Mu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function ku(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new o.vHH(1e3,"");if(!r[t])throw new o.vHH(1001,"")}function Qd(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new o.vHH(1002,"")})}class Jd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Yd(this._rawValidators),this._composedAsyncValidatorFn=Su(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===po}get invalid(){return this.status===ti}get pending(){return this.status==Rr}get disabled(){return this.status===ua}get enabled(){return this.status!==ua}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Yd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Su(e)}addValidators(e){this.setValidators(xu(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(xu(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Cf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Cf(e,this._rawAsyncValidators))}hasValidator(e){return es(this._rawValidators,e)}hasAsyncValidator(e){return es(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Rr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ua,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=po,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===po||this.status===Rr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ua:po}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Rr,this._hasOwnPendingAsyncValidator=!0;const t=ol(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?ua:this.errors?ti:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rr)?Rr:this._anyControlsHaveStatus(ti)?ti:po}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class sc extends Jd{constructor(e,t,r){super(bf(t),Au(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Qd(this,0,e),Object.keys(e).forEach(r=>{ku(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,l)=>{r=t(r,i,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class If extends sc{}function Pu(n,e){return[...e.path,n]}function C(n,e){M(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Q(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ze(n,e)})}(n,e),function nt(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function he(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ze(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function b(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function p(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),O(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function M(n,e){const t=yg(n);null!==e.validator?n.setValidators(_g(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=aa(n);null!==e.asyncValidator?n.setAsyncValidators(_g(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();_(e._rawValidators,i),_(e._rawAsyncValidators,i)}function O(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=yg(n);if(Array.isArray(i)&&i.length>0){const l=i.filter(u=>u!==e.validator);l.length!==i.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const i=aa(n);if(Array.isArray(i)&&i.length>0){const l=i.filter(u=>u!==e.asyncValidator);l.length!==i.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return _(e._rawValidators,r),_(e._rawAsyncValidators,r),t}function Ze(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vt(n,e){M(n,e)}function lc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Tf(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Ou(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(l=>{l.constructor===mi?t=l:function eh(n){return Object.getPrototypeOf(n.constructor)===Ts}(l)?r=l:i=l}),i||r||t||null}const Ds={provide:Yn,useExisting:(0,o.Gpc)(()=>Po)},sl=(()=>Promise.resolve())();let Po=(()=>{class n extends Yn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new sc({},oa(t),ic(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sl.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),C(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){sl.then(()=>{const r=this._findContainer(t.path),i=new sc({});vt(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sl.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Tf(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Cr,10),o.Y36(Mo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([Ds]),o.qOj]}),n})();function th(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function j_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const cc=class extends Jd{constructor(e=null,t,r){super(bf(t),Au(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=j_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){th(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){th(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){j_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},G_={provide:ko,useExisting:(0,o.Gpc)(()=>ts)},bg=(()=>Promise.resolve())();let ts=(()=>{class n extends ko{constructor(t,r,i,l,u){super(),this._changeDetectorRef=u,this.control=new cc,this._registered=!1,this.update=new o.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ou(0,l)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),lc(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){C(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,o.D6c)(r);bg.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Pu(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Yn,9),o.Y36(Cr,10),o.Y36(Mo,10),o.Y36(Pr,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([G_]),o.qOj,o.TTD]}),n})(),Wi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const XT={provide:Pr,useExisting:(0,o.Gpc)(()=>Ig),multi:!0};let Ig=(()=>{class n extends Ts{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[o._Bn([XT]),o.qOj]}),n})(),q_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const K_=new o.OlP("NgModelWithFormControlWarning"),rx={provide:Yn,useExisting:(0,o.Gpc)(()=>dc)};let dc=(()=>{class n extends Yn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(O(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return C(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){p(t.control||null,t,!1),function xf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Tf(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(p(r||null,t),(n=>n instanceof cc)(i)&&(C(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);vt(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ln(n,e){return O(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){M(this.form,this),this._oldForm&&O(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Cr,10),o.Y36(Mo,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&o.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([rx]),o.qOj,o.TTD]}),n})();const BC={provide:ko,useExisting:(0,o.Gpc)(()=>nh)};let nh=(()=>{class n extends ko{constructor(t,r,i,l,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Ou(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),lc(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Pu(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(o.Y36(Yn,13),o.Y36(Cr,10),o.Y36(Mo,10),o.Y36(Pr,10),o.Y36(K_,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([BC]),o.qOj,o.TTD]}),n})();const Nu={provide:Pr,useExisting:(0,o.Gpc)(()=>xg),multi:!0};function jC(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let xg=(()=>{class n extends Ts{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=jC(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function ox(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&o.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([Nu]),o.qOj]}),n})(),HC=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(jC(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(xg,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const sx={provide:Pr,useExisting:(0,o.Gpc)(()=>Q_),multi:!0};function ha(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Q_=(()=>{class n extends Ts{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(l=>this._getOptionId(l));r=(l,u)=>{l._setSelected(i.indexOf(u.toString())>-1)}}else r=(i,l)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],l=r.selectedOptions;if(void 0!==l){const u=l;for(let f=0;f<u.length;f++){const v=this._getOptionValue(u[f].value);i.push(v)}}else{const u=r.options;for(let f=0;f<u.length;f++){const m=u[f];if(m.selected){const v=this._getOptionValue(m.value);i.push(v)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function rh(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&o.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([sx]),o.qOj]}),n})(),$C=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(ha(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ha(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Q_,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let Ru=(()=>{class n{constructor(){this._validator=Xo}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Xo,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const lx={provide:Cr,useExisting:(0,o.Gpc)(()=>ni),multi:!0};let ni=(()=>{class n extends Ru{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=o.D6c,this.createValidator=t=>yf}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[o._Bn([lx]),o.qOj]}),n})();const aP={provide:Cr,useExisting:(0,o.Gpc)(()=>QC),multi:!0};let QC=(()=>{class n extends Ru{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function ZC(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>il(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=o.n5z(n)))(r||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&o.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([aP]),o.qOj]}),n})(),JC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[q_]}),n})(),dx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[JC]}),n})(),XC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:K_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[JC]}),n})();class ew extends Jd{constructor(e,t,r){super(bf(t),Au(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Qd(this,0,e),e.forEach((r,i)=>{ku(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function ty(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Sf=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let l={};return ty(r)?l=r:null!==r&&(l.validators=r.validator,l.asyncValidators=r.asyncValidator),new sc(i,l)}record(t,r=null){const i=this._reduceControls(t);return new If(i,r)}control(t,r,i){let l={};return this.useNonNullable?(ty(r)?l=r:(l.validators=r,l.asyncValidators=i),new cc(t,{...l,nonNullable:!0})):new cc(t,r,i)}array(t,r,i){const l=t.map(u=>this._createControl(u));return new ew(l,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof cc||t instanceof Jd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:XC}),n})();class tw{}const fa="*";function px(n,e){return{type:7,name:n,definitions:e,options:{}}}function nw(n,e=null){return{type:4,styles:e,timings:n}}function rw(n,e=null){return{type:2,steps:n,options:e}}function Mf(n){return{type:6,styles:n,offset:null}}function iw(n,e,t){return{type:0,name:n,styles:e,options:t}}function oh(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function ry(n){Promise.resolve().then(n)}class sh{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ry(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Sg{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const l=this.players.length;0==l?ry(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==l&&this._onFinish()}),u.onDestroy(()=>{++r==l&&this._onDestroy()}),u.onStart(()=>{++i==l&&this._onStart()})}),this.totalTime=this.players.reduce((u,f)=>Math.max(u,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Mg(n){return new o.vHH(3e3,!1)}function Rx(){return typeof window<"u"&&typeof window.document<"u"}function Og(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function al(n){switch(n.length){case 0:return new sh;case 1:return n[0];default:return new Sg(n)}}function Ng(n,e,t,r,i=new Map,l=new Map){const u=[],f=[];let m=-1,v=null;if(r.forEach(x=>{const D=x.get("offset"),L=D==m,j=L&&v||new Map;x.forEach((q,ee)=>{let ae=ee,Ue=q;if("offset"!==ee)switch(ae=e.normalizePropertyName(ae,u),Ue){case"!":Ue=i.get(ee);break;case fa:Ue=l.get(ee);break;default:Ue=e.normalizeStyleValue(ee,ae,Ue,u)}j.set(ae,Ue)}),L||f.push(j),v=j,m=D}),u.length)throw function Ax(n){return new o.vHH(3502,!1)}();return f}function Of(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ly(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ly(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ly(t,"destroy",n)))}}function ly(n,e,t){const l=Nf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(l._data=u),l}function Nf(n,e,t,r,i="",l=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:l,disabled:!!u}}function yi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function hw(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let cy=(n,e)=>!1,fw=(n,e,t)=>[],pw=null;function uy(n){const e=n.parentNode||n.host;return e===pw?null:e}(Og()||typeof Element<"u")&&(Rx()?(pw=(()=>document.documentElement)(),cy=(n,e)=>{for(;e;){if(e===n)return!0;e=uy(e)}return!1}):cy=(n,e)=>n.contains(e),fw=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let ns=null,pa=!1;const Vx=cy,dy=fw;let hy=(()=>{class n{validateStyleProperty(t){return function Lx(n){ns||(ns=function mP(){return typeof document<"u"?document.body:null}()||{},pa=!!ns.style&&"WebkitAppearance"in ns.style);let e=!0;return ns.style&&!function Fx(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ns.style,!e&&pa&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in ns.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return Vx(t,r)}getParentElement(t){return uy(t)}query(t,r,i){return dy(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,l,u,f=[],m){return new sh(i,l)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),gw=(()=>{class n{}return n.NOOP=new hy,n})();const fy="ng-enter",Rg="ng-leave",go="ng-trigger",Fg=".ng-trigger",py="ng-animating",gy=".ng-animating";function ll(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:my(parseFloat(e[1]),e[2])}function my(n,e){return"s"===e?1e3*n:n}function Lg(n,e,t){return n.hasOwnProperty("duration")?n:function vw(n,e,t){let i,l=0,u="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(Mg()),{duration:0,delay:0,easing:""};i=my(parseFloat(f[1]),f[2]);const m=f[3];null!=m&&(l=my(parseFloat(m),f[4]));const v=f[5];v&&(u=v)}else i=n;if(!t){let f=!1,m=e.length;i<0&&(e.push(function aw(){return new o.vHH(3100,!1)}()),f=!0),l<0&&(e.push(function lw(){return new o.vHH(3101,!1)}()),f=!0),f&&e.splice(m,0,Mg())}return{duration:i,delay:l,easing:u}}(n,e,t)}function Rf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Cw(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function cl(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function _y(n,e,t){return t?e+":"+t+";":""}function yy(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=_y(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=_y(0,Uu(t),n.style[t]));n.setAttribute("style",e)}function ga(n,e,t){n.style&&(e.forEach((r,i)=>{const l=Ug(i);t&&!t.has(i)&&t.set(i,n.style[l]),n.style[l]=r}),Og()&&yy(n))}function Vu(n,e){n.style&&(e.forEach((t,r)=>{const i=Ug(r);n.style[i]=""}),Og()&&yy(n))}function ch(n){return Array.isArray(n)?1==n.length?n[0]:rw(n):n}const Vg=new RegExp("{{\\s*(.+?)\\s*}}","g");function ww(n){let e=[];if("string"==typeof n){let t;for(;t=Vg.exec(n);)e.push(t[1]);Vg.lastIndex=0}return e}function Ff(n,e,t){const r=n.toString(),i=r.replace(Vg,(l,u)=>{let f=e[u];return null==f&&(t.push(function yx(n){return new o.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function vy(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const bw=/-+([a-z0-9])/g;function Ug(n){return n.replace(bw,(...e)=>e[1].toUpperCase())}function Uu(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ki(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function iy(n){return new o.vHH(3004,!1)}()}}function Iw(n,e){return window.getComputedStyle(n)[e]}function $x(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Tw(n,e,t){if(":"==n[0]){const m=function Bg(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function xx(n){return new o.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Tx(n){return new o.vHH(3015,!1)}()),e;const i=r[1],l=r[2],u=r[3];e.push(xw(i,u));"<"==l[0]&&!("*"==i&&"*"==u)&&e.push(xw(u,i))}(r,t,e)):t.push(n),t}const jg=new Set(["true","1"]),Lf=new Set(["false","0"]);function xw(n,e){const t=jg.has(n)||Lf.has(n),r=jg.has(e)||Lf.has(e);return(i,l)=>{let u="*"==n||n==i,f="*"==e||e==l;return!u&&t&&"boolean"==typeof i&&(u=i?jg.has(n):Lf.has(n)),!f&&r&&"boolean"==typeof l&&(f=l?jg.has(e):Lf.has(e)),u&&f}}const Zx=new RegExp("s*:selfs*,?","g");function Iy(n,e,t,r){return new Sw(n).build(e,t,r)}class Sw{constructor(e){this._driver=e}build(e,t,r){const i=new kw(t);return this._resetContextStyleTimingState(i),Ki(this,ch(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const l=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function vx(){return new o.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const m=f,v=m.name;v.toString().split(/\s*,\s*/).forEach(x=>{m.name=x,l.push(this.visitState(m,t))}),m.name=v}else if(1==f.type){const m=this.visitTransition(f,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push(function oy(){return new o.vHH(3007,!1)}())}),{type:7,name:e.name,states:l,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const l=new Set,u=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(m=>{ww(m).forEach(v=>{u.hasOwnProperty(v)||l.add(v)})})}),l.size&&(vy(l.values()),t.errors.push(function Pg(n,e){return new o.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ki(this,ch(e.animation),t);return{type:1,matchers:$x(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:dl(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ki(this,r,t)),options:dl(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const l=e.steps.map(u=>{t.currentTime=r;const f=Ki(this,u,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:l,options:dl(e.options)}}visitAnimate(e,t){const r=function vP(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Ty(Lg(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(l=>"{"==l.charAt(0)&&"{"==l.charAt(1))){const l=Ty(0,0,"");return l.dynamic=!0,l.strValue=t,l}const i=Lg(t,e);return Ty(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,l=e.styles?e.styles:Mf({});if(5==l.type)i=this.visitKeyframes(l,t);else{let u=e.styles,f=!1;if(!u){f=!0;const v={};r.easing&&(v.easing=r.easing),u=Mf(v)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=f,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===fa?r.push(f):t.errors.push(new o.vHH(3002,!1)):r.push(Cw(f));let l=!1,u=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(u=f.get("easing"),f.delete("easing")),!l))for(let m of f.values())if(m.toString().indexOf("{{")>=0){l=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:l,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,l=t.currentTime;r&&l>0&&(l-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((f,m)=>{const v=t.collectedStyles.get(t.currentQuerySelector),x=v.get(m);let D=!0;x&&(l!=i&&l>=x.startTime&&i<=x.endTime&&(t.errors.push(function sy(n,e,t,r,i){return new o.vHH(3010,!1)}()),D=!1),l=x.startTime),D&&v.set(m,{startTime:l,endTime:i}),t.options&&function Bx(n,e,t){const r=e.params||{},i=ww(n);i.length&&i.forEach(l=>{r.hasOwnProperty(l)||t.push(function Fu(n){return new o.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function wx(){return new o.vHH(3011,!1)}()),r;let l=0;const u=[];let f=!1,m=!1,v=0;const x=e.steps.map(Ue=>{const Ge=this._makeStyleAst(Ue,t);let je=null!=Ge.offset?Ge.offset:function Ey(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ge.styles),Ke=0;return null!=je&&(l++,Ke=Ge.offset=je),m=m||Ke<0||Ke>1,f=f||Ke<v,v=Ke,u.push(Ke),Ge});m&&t.errors.push(function bx(){return new o.vHH(3012,!1)}()),f&&t.errors.push(function cw(){return new o.vHH(3200,!1)}());const D=e.steps.length;let L=0;l>0&&l<D?t.errors.push(function ah(){return new o.vHH(3202,!1)}()):0==l&&(L=1/(D-1));const j=D-1,q=t.currentTime,ee=t.currentAnimateTimings,ae=ee.duration;return x.forEach((Ue,Ge)=>{const je=L>0?Ge==j?1:L*Ge:u[Ge],Ke=je*ae;t.currentTime=q+ee.delay+Ke,ee.duration=Ke,this._validateStyleAst(Ue,t),Ue.offset=je,r.styles.push(Ue)}),r}visitReference(e,t){return{type:8,animation:Ki(this,ch(e.animation),t),options:dl(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:dl(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:dl(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[l,u]=function Gx(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Zx,"")),n=n.replace(/@\*/g,Fg).replace(/@\w+/g,t=>Fg+"-"+t.slice(1)).replace(/:animating/g,gy),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+l:l,yi(t.collectedStyles,t.currentQuerySelector,new Map);const f=Ki(this,ch(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:l,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:f,originalSelector:e.selector,options:dl(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Ix(){return new o.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Lg(e.timings,t.errors,!0);return{type:12,animation:Ki(this,ch(e.animation),t),timings:r,options:null}}}class kw{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function dl(n){return n?(n=Rf(n)).params&&(n.params=function Mw(n){return n?Rf(n):null}(n.params)):n={},n}function Ty(n,e,t){return{duration:n,delay:e,easing:t}}function Pw(n,e,t,r,i,l,u=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:l,totalTime:i+l,easing:u,subTimeline:f}}class hl{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Hg=new RegExp(":enter","g"),Rw=new RegExp(":leave","g");function xy(n,e,t,r,i,l=new Map,u=new Map,f,m,v=[]){return(new Dy).buildKeyframes(n,e,t,r,i,l,u,f,m,v)}class Dy{buildKeyframes(e,t,r,i,l,u,f,m,v,x=[]){v=v||new hl;const D=new Vf(e,t,v,i,l,x,[]);D.options=m;const L=m.delay?ll(m.delay):0;D.currentTimeline.delayNextStep(L),D.currentTimeline.setStyles([u],null,D.errors,m),Ki(this,r,D);const j=D.timelines.filter(q=>q.containsAnimation());if(j.length&&f.size){let q;for(let ee=j.length-1;ee>=0;ee--){const ae=j[ee];if(ae.element===t){q=ae;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([f],null,D.errors,m)}return j.length?j.map(q=>q.buildKeyframes()):[Pw(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),l=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);l!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const l=i?.delay;if(l){const u="number"==typeof l?l:ll(Ff(l,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let l=t.currentTimeline.currentTime;const u=null!=r.duration?ll(r.duration):null,f=null!=r.delay?ll(r.delay):null;return 0!==u&&e.forEach(m=>{const v=t.appendInstructionToTimeline(m,u,f);l=Math.max(l,v.duration+v.delay)}),l}visitReference(e,t){t.updateOptions(e.options,!0),Ki(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const l=e.options;if(l&&(l.params||l.delay)&&(i=t.createSubContext(l),i.transformIntoNewTimeline(),null!=l.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rs);const u=ll(l.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ki(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const l=e.options&&e.options.delay?ll(e.options.delay):0;e.steps.forEach(u=>{const f=t.createSubContext(e.options);l&&f.delayNextStep(l),Ki(this,u,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Lg(t.params?Ff(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const l=e.style;5==l.type?this.visitKeyframes(l,t):(t.incrementTime(r.duration),this.visitStyle(l,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const l=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(l):r.setStyles(e.styles,l,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,l=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(m=>{f.forwardTime((m.offset||0)*l),f.setStyles(m.styles,m.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+l),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},l=i.delay?ll(i.delay):0;l&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rs);let u=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let m=null;f.forEach((v,x)=>{t.currentQueryIndex=x;const D=t.createSubContext(e.options,v);l&&D.delayNextStep(l),v===t.element&&(m=D.currentTimeline),Ki(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,l=e.timings,u=Math.abs(l.duration),f=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(l.duration<0?"reverse":l.easing){case"reverse":m=f-m;break;case"full":m=r.currentStaggerTime}const x=t.currentTimeline;m&&x.delayNextStep(m);const D=x.currentTime;Ki(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const rs={};class Vf{constructor(e,t,r,i,l,u,f,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=l,this.errors=u,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rs,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new Uf(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ll(r.duration)),null!=r.delay&&(i.delay=ll(r.delay));const l=r.params;if(l){let u=i.params;u||(u=this.options.params={}),Object.keys(l).forEach(f=>{(!t||!u.hasOwnProperty(f))&&(u[f]=Ff(l[f],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,l=new Vf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return l.previousNode=this.previousNode,l.currentAnimateTimings=this.currentAnimateTimings,l.options=this._copyOptions(),l.updateOptions(e),l.currentQueryIndex=this.currentQueryIndex,l.currentQueryTotal=this.currentQueryTotal,l.parentContext=this,this.subContextCount++,l}transformIntoNewTimeline(e){return this.previousNode=rs,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},l=new Ay(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(l),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,l,u){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(Hg,"."+this._enterClassName)).replace(Rw,"."+this._leaveClassName);let v=this._driver.query(this.element,e,1!=r);0!==r&&(v=r<0?v.slice(v.length+r,v.length):v.slice(0,r)),f.push(...v)}return!l&&0==f.length&&u.push(function Ex(n){return new o.vHH(3014,!1)}()),f}}class Uf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Uf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||fa),this._currentKeyframe.set(t,fa);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const l=i&&i.params||{},u=function Fw(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let l of r)t.set(l,fa)}else cl(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,m]of u){const v=Ff(m,l,r);this._pendingStyles.set(f,v),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??fa),this._updateStyle(f,v)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,m)=>{const v=cl(f,new Map,this._backFill);v.forEach((x,D)=>{"!"===x?e.add(D):x===fa&&t.add(D)}),r||v.set("offset",m/this.duration),i.push(v)});const l=e.size?vy(e.values()):[],u=t.size?vy(t.values()):[];if(r){const f=i[0],m=new Map(f);f.set("offset",0),m.set("offset",1),i=[f,m]}return Pw(this.element,i,l,u,this.duration,this.startTime,this.easing,!1)}}class Ay extends Uf{constructor(e,t,r,i,l,u,f=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=l,this._stretchStartingKeyframe=f,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const l=[],u=r+t,f=t/u,m=cl(e[0]);m.set("offset",0),l.push(m);const v=cl(e[0]);v.set("offset",qx(f)),l.push(v);const x=e.length-1;for(let D=1;D<=x;D++){let L=cl(e[D]);const j=L.get("offset");L.set("offset",qx((t+j*r)/u)),l.push(L)}r=u,t=0,i="",e=l}return Pw(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function qx(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class uh{}const My=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ky extends uh{normalizePropertyName(e,t){return Ug(e)}normalizeStyleValue(e,t,r,i){let l="";const u=r.toString().trim();if(My.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)l="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function kg(n,e){return new o.vHH(3005,!1)}())}return u+l}}function $g(n,e,t,r,i,l,u,f,m,v,x,D,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:l,toState:r,toStyles:u,timelines:f,queriedElements:m,preStyleProps:v,postStyleProps:x,totalTime:D,errors:L}}const Lw={};class Vw{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function zx(n,e,t,r,i){return n.some(l=>l(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,l,u,f,m,v,x){const D=[],L=this.ast.options&&this.ast.options.params||Lw,q=this.buildStyles(r,f&&f.params||Lw,D),ee=m&&m.params||Lw,ae=this.buildStyles(i,ee,D),Ue=new Set,Ge=new Map,je=new Map,Ke="void"===i,Ut={params:Wx(ee,L),delay:this.ast.options?.delay},Bt=x?[]:xy(e,t,this.ast.animation,l,u,q,ae,Ut,v,D);let wn=0;if(Bt.forEach(bo=>{wn=Math.max(bo.duration+bo.delay,wn)}),D.length)return $g(t,this._triggerName,r,i,Ke,q,ae,[],[],Ge,je,wn,D);Bt.forEach(bo=>{const gd=bo.element,mV=yi(Ge,gd,new Set);bo.preStyleProps.forEach(rg=>mV.add(rg));const RC=yi(je,gd,new Set);bo.postStyleProps.forEach(rg=>RC.add(rg)),gd!==t&&Ue.add(gd)});const Sr=vy(Ue.values());return $g(t,this._triggerName,r,i,Ke,q,ae,Bt,Sr,Ge,je,wn)}}function Wx(n,e){const t=Rf(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class Uw{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Rf(this.defaultParams);return Object.keys(e).forEach(l=>{const u=e[l];null!==u&&(i[l]=u)}),this.styles.styles.forEach(l=>{"string"!=typeof l&&l.forEach((u,f)=>{u&&(u=Ff(u,i,t));const m=this.normalizer.normalizePropertyName(f,t);u=this.normalizer.normalizeStyleValue(f,m,u,t),r.set(m,u)})}),r}}class Kx{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new Uw(i.style,i.options&&i.options.params||{},r))}),Py(this.states,"true","1"),Py(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Vw(e,i,this.states))}),this.fallbackTransition=function bP(n,e,t){return new Vw(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function Py(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Bw=new hl;class Yx{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],l=Iy(this._driver,t,r,[]);if(r.length)throw function dw(n){return new o.vHH(3503,!1)}();this._animations.set(e,l)}_buildPlayer(e,t,r){const i=e.element,l=Ng(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,l,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],l=this._animations.get(e);let u;const f=new Map;if(l?(u=xy(this._driver,t,l,fy,Rg,new Map,new Map,r,Bw,i),u.forEach(x=>{const D=yi(f,x.element,new Map);x.postStyleProps.forEach(L=>D.set(L,null))})):(i.push(function hP(){return new o.vHH(3300,!1)}()),u=[]),i.length)throw function Sx(n){return new o.vHH(3504,!1)}();f.forEach((x,D)=>{x.forEach((L,j)=>{x.set(j,this._driver.computeStyle(D,j,fa))})});const v=al(u.map(x=>{const D=f.get(x.element);return this._buildPlayer(x,new Map,D)}));return this._playersById.set(e,v),v.onDestroy(()=>this.destroy(e)),this.players.push(v),v}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function kf(n){return new o.vHH(3301,!1)}();return t}listen(e,t,r,i){const l=Nf(t,"","","");return Of(this._getPlayer(e),r,l,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const l=this._getPlayer(e);switch(r){case"play":l.play();break;case"pause":l.pause();break;case"reset":l.reset();break;case"restart":l.restart();break;case"finish":l.finish();break;case"init":l.init();break;case"setPosition":l.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Zg="ng-animate-queued",jw="ng-animate-disabled",DP=[],Qx={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},AP={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ss="__ng_removed";class Hw{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Oy(n){return n??null}(r?e.value:e),r){const l=Rf(e);delete l.value,this.options=l}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const is="void",Bf=new Hw(is);class Jx{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Oo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Mx(n,e){return new o.vHH(3302,!1)}();if(null==r||0==r.length)throw function lh(n){return new o.vHH(3303,!1)}();if(!function hc(n){return"start"==n||"done"==n}(r))throw function Pf(n,e){return new o.vHH(3400,!1)}();const l=yi(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};l.push(u);const f=yi(this._engine.statesByElement,e,new Map);return f.has(t)||(Oo(e,go),Oo(e,go+"-"+t),f.set(t,Bf)),()=>{this._engine.afterFlush(()=>{const m=l.indexOf(u);m>=0&&l.splice(m,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function kx(n){return new o.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const l=this._getTrigger(t),u=new jf(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Oo(e,go),Oo(e,go+"-"+t),this._engine.statesByElement.set(e,f=new Map));let m=f.get(t);const v=new Hw(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&v.absorbOptions(m.options),f.set(t,v),m||(m=Bf),v.value!==is&&m.value===v.value){if(!function Ry(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const l=t[i];if(!e.hasOwnProperty(l)||n[l]!==e[l])return!1}return!0}(m.params,v.params)){const ee=[],ae=l.matchStyles(m.value,m.params,ee),Ue=l.matchStyles(v.value,v.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Vu(e,ae),ga(e,Ue)})}return}const L=yi(this._engine.playersByElement,e,[]);L.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let j=l.matchTransition(m.value,v.value,e,v.params),q=!1;if(!j){if(!i)return;j=l.fallbackTransition,q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:j,fromState:m,toState:v,player:u,isFallbackTransition:q}),q||(Oo(e,Zg),u.onStart(()=>{dh(e,Zg)})),u.onDone(()=>{let ee=this.players.indexOf(u);ee>=0&&this.players.splice(ee,1);const ae=this._engine.playersByElement.get(e);if(ae){let Ue=ae.indexOf(u);Ue>=0&&ae.splice(Ue,1)}}),this.players.push(u),L.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Fg,!0);r.forEach(i=>{if(i[Ss])return;const l=this._engine.fetchNamespacesByElement(i);l.size?l.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const l=this._engine.statesByElement.get(e),u=new Map;if(l){const f=[];if(l.forEach((m,v)=>{if(u.set(v,m.value),this._triggers.has(v)){const x=this.trigger(e,v,is,i);x&&f.push(x)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&al(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(l=>{const u=l.name;if(i.has(u))return;i.add(u);const m=this._triggers.get(u).fallbackTransition,v=r.get(u)||Bf,x=new Hw(is),D=new jf(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:v,toState:x,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const l=r.players.length?r.playersByQueriedElement.get(e):[];if(l&&l.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const l=e[Ss];(!l||l===Qx)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Oo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const l=r.element,u=this._elementListeners.get(l);u&&u.forEach(f=>{if(f.name==r.triggerName){const m=Nf(l,r.triggerName,r.fromState.value,r.toState.value);m._data=e,Of(r.player,f.phase,m,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const l=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==l||0==u?l-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class $w{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,l)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new Jx(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,f=this.driver.getParentElement(t);for(;f;){const m=i.get(f);if(m){const v=r.indexOf(m);r.splice(v+1,0,e),u=!0;break}f=this.driver.getParentElement(f)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const l=this._fetchNamespace(i.namespaceId);l&&t.add(l)}return t}trigger(e,t,r,i){if(Gg(t)){const l=this._fetchNamespace(e);if(l)return l.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Gg(t))return;const l=t[Ss];if(l&&l.setForRemoval){l.setForRemoval=!1,l.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Oo(e,jw)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),dh(e,jw))}removeNode(e,t,r,i){if(Gg(t)){const l=e?this._fetchNamespace(e):null;if(l?l.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,l){this.collectedLeaveElements.push(t),t[Ss]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:l}}listen(e,t,r,i,l){return Gg(t)?this._fetchNamespace(e).listen(t,r,i,l):()=>{}}_buildInstruction(e,t,r,i,l){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,l)}destroyInnerAnimations(e){let t=this.driver.query(e,Fg,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,gy,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return al(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ss];if(t&&t.setForRemoval){if(e[Ss]=Qx,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(jw)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Oo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?al(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function fP(n){return new o.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new hl,i=[],l=new Map,u=[],f=new Map,m=new Map,v=new Map,x=new Set;this.disabledNodes.forEach(It=>{x.add(It);const jt=this.driver.query(It,".ng-animate-queued",!0);for(let $t=0;$t<jt.length;$t++)x.add(jt[$t])});const D=this.bodyNode,L=Array.from(this.statesByElement.keys()),j=qw(L,this.collectedEnterElements),q=new Map;let ee=0;j.forEach((It,jt)=>{const $t=fy+ee++;q.set(jt,$t),It.forEach(Dn=>Oo(Dn,$t))});const ae=[],Ue=new Set,Ge=new Set;for(let It=0;It<this.collectedLeaveElements.length;It++){const jt=this.collectedLeaveElements[It],$t=jt[Ss];$t&&$t.setForRemoval&&(ae.push(jt),Ue.add(jt),$t.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(Dn=>Ue.add(Dn)):Ge.add(jt))}const je=new Map,Ke=qw(L,Array.from(Ue));Ke.forEach((It,jt)=>{const $t=Rg+ee++;je.set(jt,$t),It.forEach(Dn=>Oo(Dn,$t))}),e.push(()=>{j.forEach((It,jt)=>{const $t=q.get(jt);It.forEach(Dn=>dh(Dn,$t))}),Ke.forEach((It,jt)=>{const $t=je.get(jt);It.forEach(Dn=>dh(Dn,$t))}),ae.forEach(It=>{this.processLeaveNode(It)})});const Ut=[],Bt=[];for(let It=this._namespaceList.length-1;It>=0;It--)this._namespaceList[It].drainQueuedTransitions(t).forEach($t=>{const Dn=$t.player,Bi=$t.element;if(Ut.push(Dn),this.collectedEnterElements.length){const Io=Bi[Ss];if(Io&&Io.setForMove){if(Io.previousTriggersValues&&Io.previousTriggersValues.has($t.triggerName)){const ig=Io.previousTriggersValues.get($t.triggerName),Ta=this.statesByElement.get($t.element);if(Ta&&Ta.has($t.triggerName)){const YT=Ta.get($t.triggerName);YT.value=ig,Ta.set($t.triggerName,YT)}}return void Dn.destroy()}}const Uc=!D||!this.driver.containsElement(D,Bi),js=je.get(Bi),Xh=q.get(Bi),Mr=this._buildInstruction($t,r,Xh,js,Uc);if(Mr.errors&&Mr.errors.length)return void Bt.push(Mr);if(Uc)return Dn.onStart(()=>Vu(Bi,Mr.fromStyles)),Dn.onDestroy(()=>ga(Bi,Mr.toStyles)),void i.push(Dn);if($t.isFallbackTransition)return Dn.onStart(()=>Vu(Bi,Mr.fromStyles)),Dn.onDestroy(()=>ga(Bi,Mr.toStyles)),void i.push(Dn);const vV=[];Mr.timelines.forEach(Io=>{Io.stretchStartingKeyframe=!0,this.disabledNodes.has(Io.element)||vV.push(Io)}),Mr.timelines=vV,r.append(Bi,Mr.timelines),u.push({instruction:Mr,player:Dn,element:Bi}),Mr.queriedElements.forEach(Io=>yi(f,Io,[]).push(Dn)),Mr.preStyleProps.forEach((Io,ig)=>{if(Io.size){let Ta=m.get(ig);Ta||m.set(ig,Ta=new Set),Io.forEach((YT,rP)=>Ta.add(rP))}}),Mr.postStyleProps.forEach((Io,ig)=>{let Ta=v.get(ig);Ta||v.set(ig,Ta=new Set),Io.forEach((YT,rP)=>Ta.add(rP))})});if(Bt.length){const It=[];Bt.forEach(jt=>{It.push(function Ox(n,e){return new o.vHH(3505,!1)}())}),Ut.forEach(jt=>jt.destroy()),this.reportError(It)}const wn=new Map,Sr=new Map;u.forEach(It=>{const jt=It.element;r.has(jt)&&(Sr.set(jt,jt),this._beforeAnimationBuild(It.player.namespaceId,It.instruction,wn))}),i.forEach(It=>{const jt=It.element;this._getPreviousPlayers(jt,!1,It.namespaceId,It.triggerName,null).forEach(Dn=>{yi(wn,jt,[]).push(Dn),Dn.destroy()})});const bo=ae.filter(It=>ju(It,m,v)),gd=new Map;Gw(gd,this.driver,Ge,v,fa).forEach(It=>{ju(It,m,v)&&bo.push(It)});const RC=new Map;j.forEach((It,jt)=>{Gw(RC,this.driver,new Set(It),m,"!")}),bo.forEach(It=>{const jt=gd.get(It),$t=RC.get(It);gd.set(It,new Map([...Array.from(jt?.entries()??[]),...Array.from($t?.entries()??[])]))});const rg=[],_V=[],yV={};u.forEach(It=>{const{element:jt,player:$t,instruction:Dn}=It;if(r.has(jt)){if(x.has(jt))return $t.onDestroy(()=>ga(jt,Dn.toStyles)),$t.disabled=!0,$t.overrideTotalTime(Dn.totalTime),void i.push($t);let Bi=yV;if(Sr.size>1){let js=jt;const Xh=[];for(;js=js.parentNode;){const Mr=Sr.get(js);if(Mr){Bi=Mr;break}Xh.push(js)}Xh.forEach(Mr=>Sr.set(Mr,Bi))}const Uc=this._buildAnimation($t.namespaceId,Dn,wn,l,RC,gd);if($t.setRealPlayer(Uc),Bi===yV)rg.push($t);else{const js=this.playersByElement.get(Bi);js&&js.length&&($t.parentPlayer=al(js)),i.push($t)}}else Vu(jt,Dn.fromStyles),$t.onDestroy(()=>ga(jt,Dn.toStyles)),_V.push($t),x.has(jt)&&i.push($t)}),_V.forEach(It=>{const jt=l.get(It.element);if(jt&&jt.length){const $t=al(jt);It.setRealPlayer($t)}}),i.forEach(It=>{It.parentPlayer?It.syncPlayerEvents(It.parentPlayer):It.destroy()});for(let It=0;It<ae.length;It++){const jt=ae[It],$t=jt[Ss];if(dh(jt,Rg),$t&&$t.hasAnimation)continue;let Dn=[];if(f.size){let Uc=f.get(jt);Uc&&Uc.length&&Dn.push(...Uc);let js=this.driver.query(jt,gy,!0);for(let Xh=0;Xh<js.length;Xh++){let Mr=f.get(js[Xh]);Mr&&Mr.length&&Dn.push(...Mr)}}const Bi=Dn.filter(Uc=>!Uc.destroyed);Bi.length?Xx(this,jt,Bi):this.processLeaveNode(jt)}return ae.length=0,rg.forEach(It=>{this.players.push(It),It.onDone(()=>{It.destroy();const jt=this.players.indexOf(It);this.players.splice(jt,1)}),It.play()}),rg}elementContainsData(e,t){let r=!1;const i=t[Ss];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,l){let u=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(u=f)}else{const f=this.playersByElement.get(e);if(f){const m=!l||l==is;f.forEach(v=>{v.queued||!m&&v.triggerName!=i||u.push(v)})}}return(r||i)&&(u=u.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),u}_beforeAnimationBuild(e,t,r){const l=t.element,u=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const v=m.element,x=v!==l,D=yi(r,v,[]);this._getPreviousPlayers(v,x,u,f,t.toState).forEach(j=>{const q=j.getRealPlayer();q.beforeDestroy&&q.beforeDestroy(),j.destroy(),D.push(j)})}Vu(l,t.fromStyles)}_buildAnimation(e,t,r,i,l,u){const f=t.triggerName,m=t.element,v=[],x=new Set,D=new Set,L=t.timelines.map(q=>{const ee=q.element;x.add(ee);const ae=ee[Ss];if(ae&&ae.removedBeforeQueried)return new sh(q.duration,q.delay);const Ue=ee!==m,Ge=function qg(n){const e=[];return Bu(n,e),e}((r.get(ee)||DP).map(wn=>wn.getRealPlayer())).filter(wn=>!!wn.element&&wn.element===ee),je=l.get(ee),Ke=u.get(ee),Ut=Ng(0,this._normalizer,0,q.keyframes,je,Ke),Bt=this._buildPlayer(q,Ut,Ge);if(q.subTimeline&&i&&D.add(ee),Ue){const wn=new jf(e,f,ee);wn.setRealPlayer(Bt),v.push(wn)}return Bt});v.forEach(q=>{yi(this.playersByQueriedElement,q.element,[]).push(q),q.onDone(()=>function Zw(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,q.element,q))}),x.forEach(q=>Oo(q,py));const j=al(L);return j.onDestroy(()=>{x.forEach(q=>dh(q,py)),ga(m,t.toStyles)}),D.forEach(q=>{yi(i,q,[]).push(j)}),j}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new sh(e.duration,e.delay)}}class jf{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new sh,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Of(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){yi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Gg(n){return n&&1===n.nodeType}function Ny(n,e){const t=n.style.display;return n.style.display=e??"none",t}function Gw(n,e,t,r,i){const l=[];t.forEach(m=>l.push(Ny(m)));const u=[];r.forEach((m,v)=>{const x=new Map;m.forEach(D=>{const L=e.computeStyle(v,D,i);x.set(D,L),(!L||0==L.length)&&(v[Ss]=AP,u.push(v))}),n.set(v,x)});let f=0;return t.forEach(m=>Ny(m,l[f++])),u}function qw(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),l=new Map;function u(f){if(!f)return 1;let m=l.get(f);if(m)return m;const v=f.parentNode;return m=t.has(v)?v:i.has(v)?1:u(v),l.set(f,m),m}return e.forEach(f=>{const m=u(f);1!==m&&t.get(m).push(f)}),t}function Oo(n,e){n.classList?.add(e)}function dh(n,e){n.classList?.remove(e)}function Xx(n,e,t){al(t).onDone(()=>n.processLeaveNode(e))}function Bu(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Sg?Bu(r.players,e):e.push(r)}}function ju(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(l=>i.add(l)):e.set(n,r),t.delete(n),!0}class hh{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,l)=>{},this._transitionEngine=new $w(e,t,r),this._timelineEngine=new Yx(e,t,r),this._transitionEngine.onRemovalComplete=(i,l)=>this.onRemovalComplete(i,l)}registerTrigger(e,t,r,i,l){const u=e+"-"+i;let f=this._triggerCache[u];if(!f){const m=[],x=Iy(this._driver,l,m,[]);if(m.length)throw function uw(n,e){return new o.vHH(3404,!1)}();f=function wP(n,e,t){return new Kx(n,e,t)}(i,x,this._normalizer),this._triggerCache[u]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[l,u]=hw(r);this._timelineEngine.command(l,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,l){if("@"==r.charAt(0)){const[u,f]=hw(r);return this._timelineEngine.listen(u,t,f,l)}return this._transitionEngine.listen(e,t,r,i,l)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let zw=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let l=n.initialStylesByElement.get(t);l||n.initialStylesByElement.set(t,l=new Map),this._initialStyles=l}start(){this._state<1&&(this._startStyles&&ga(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ga(this._element,this._initialStyles),this._endStyles&&(ga(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vu(this._element,this._endStyles),this._endStyles=null),ga(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Wg(n){let e=null;return n.forEach((t,r)=>{(function Fy(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Kg{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:Iw(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ww{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return Vx(e,t)}getParentElement(e){return uy(e)}query(e,t,r){return dy(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,l,u=[]){const m={duration:r,delay:i,fill:0==i?"both":"forwards"};l&&(m.easing=l);const v=new Map,x=u.filter(j=>j instanceof Kg);(function jx(n,e){return 0===n||0===e})(r,i)&&x.forEach(j=>{j.currentSnapshot.forEach((q,ee)=>v.set(ee,q))});let D=function Ux(n){return n.length?n[0]instanceof Map?n:n.map(e=>Cw(e)):[]}(t).map(j=>cl(j));D=function Cy(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((l,u)=>{r.has(u)||i.push(u),r.set(u,l)}),i.length)for(let l=1;l<e.length;l++){let u=e[l];i.forEach(f=>u.set(f,Iw(n,f)))}}return e}(e,D,v);const L=function zg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Wg(e[0]),e.length>1&&(r=Wg(e[e.length-1]))):e instanceof Map&&(t=Wg(e)),t||r?new zw(n,t,r):null}(e,D);return new Kg(e,D,m,L)}}let Ly=(()=>{class n extends tw{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?rw(t):t;return Kw(this._renderer,null,r,"register",[i]),new eD(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class eD extends class ny{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new SP(this._id,e,t||{},this._renderer)}}class SP{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Kw(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Kw(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Yw="@.disabled";let Qw=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(l,u)=>{const f=u?.parentNode(l);f&&u.removeChild(f,l)}}createRenderer(t,r){const l=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let x=this._rendererCache.get(l);return x||(x=new Vy("",l,this.engine,()=>this._rendererCache.delete(l)),this._rendererCache.set(l,x)),x}const u=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const m=x=>{Array.isArray(x)?x.forEach(m):this.engine.registerTrigger(u,f,t,x.name,x)};return r.data.animation.forEach(m),new tD(this,f,l,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(l=>{const[u,f]=l;u(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.FYo),o.LFG(hh),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Vy{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?l=>t.destroyNode(l):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Yw?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tD extends Vy{constructor(e,t,r,i,l){super(t,r,i,l),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Yw?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function No(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let l=t.slice(1),u="";return"@"!=l.charAt(0)&&([l,u]=function Jw(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(l)),this.engine.listen(this.namespaceId,i,l,u,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let nD=(()=>{class n extends hh{constructor(t,r,i,l){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe),o.LFG(gw),o.LFG(uh),o.LFG(o.z2F))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Yg=[{provide:tw,useClass:Ly},{provide:uh,useFactory:function MP(){return new ky}},{provide:hh,useClass:nD},{provide:o.FYo,useFactory:function rD(n,e,t){return new Qw(n,e,t)},deps:[Ys,hh,o.R0b]}],Qg=[{provide:gw,useFactory:()=>new Ww},{provide:o.QbO,useValue:"BrowserAnimations"},...Yg],Xw=[{provide:gw,useClass:hy},{provide:o.QbO,useValue:"NoopAnimations"},...Yg];let iD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Xw:Qg}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:Qg,imports:[Qa]}),n})();function wt(...n){const e=(0,Ao.yG)(n);return(0,mn.D)(n,e)}var ki=U(7579);class Ms extends ki.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const $f=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Zf=U(4671),ma=U(9672);function Jg(...n){const e=(0,Ao.yG)(n),t=(0,Ao.jO)(n),{args:r,keys:i}=_u(n);if(0===r.length)return(0,mn.D)([],e);const l=new Ar.y(function sD(n,e,t=Zf.y){return r=>{tb(e,()=>{const{length:i}=n,l=new Array(i);let u=i,f=i;for(let m=0;m<i;m++)tb(e,()=>{const v=(0,mn.D)(n[m],e);let x=!1;v.subscribe((0,Zn.x)(r,D=>{l[m]=D,x||(x=!0,f--),f||r.next(t(l.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>yu(i,u):Zf.y));return t?l.pipe(nl(t)):l}function tb(n,e,t){n?(0,ma.f)(t,n,e):e()}var Xg=U(8189);function Uy(...n){return function nb(){return(0,Xg.J)(1)}()((0,mn.D)(n,(0,Ao.yG)(n)))}function rb(n){return new Ar.y(e=>{(0,Do.Xf)(n()).subscribe(e)})}var aD=U(9635),Gf=U(576);function qf(n,e){const t=(0,Gf.m)(n)?n:()=>n,r=i=>i.error(t());return new Ar.y(e?i=>e.schedule(r,0,i):r)}var Hu=U(515),zf=U(727),ri=U(4482);function fh(){return(0,ri.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Zn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,l=t;t=null,i&&(!l||i===l)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class lD extends Ar.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ri.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Zn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zf.w0.EMPTY)}return e}refCount(){return fh()(this)}}function wr(n,e){return(0,ri.e)((t,r)=>{let i=null,l=0,u=!1;const f=()=>u&&!i&&r.complete();t.subscribe((0,Zn.x)(r,m=>{i?.unsubscribe();let v=0;const x=l++;(0,Do.Xf)(n(m,x)).subscribe(i=(0,Zn.x)(r,D=>r.next(e?e(m,D,x,v++):D),()=>{i=null,f()}))},()=>{u=!0,f()}))})}function em(n){return n<=0?()=>Hu.E:(0,ri.e)((e,t)=>{let r=0;e.subscribe((0,Zn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wf(...n){const e=(0,Ao.yG)(n);return(0,ri.e)((t,r)=>{(e?Uy(n,t,e):Uy(n,t)).subscribe(r)})}function os(n,e){return(0,ri.e)((t,r)=>{let i=0;t.subscribe((0,Zn.x)(r,l=>n.call(e,l,i++)&&r.next(l)))})}var Pi=U(5577);function Kf(n){return(0,ri.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function tm(n=fl){return(0,ri.e)((e,t)=>{let r=!1;e.subscribe((0,Zn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function fl(){return new $f}function ss(n,e){const t=arguments.length>=2;return r=>r.pipe(n?os((i,l)=>n(i,l,r)):Zf.y,em(1),t?Kf(e):tm(()=>new $f))}function _a(n,e){return(0,Gf.m)(e)?(0,Pi.z)(n,e,1):(0,Pi.z)(n,1)}var Lr=U(8505);function fc(n){return(0,ri.e)((e,t)=>{let l,r=null,i=!1;r=e.subscribe((0,Zn.x)(t,void 0,void 0,u=>{l=(0,Do.Xf)(n(u,fc(n)(e))),r?(r.unsubscribe(),r=null,l.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,l.subscribe(t))})}function By(n,e,t,r,i){return(l,u)=>{let f=t,m=e,v=0;l.subscribe((0,Zn.x)(u,x=>{const D=v++;m=f?n(m,x,D):(f=!0,x),r&&u.next(m)},i&&(()=>{f&&u.next(m),u.complete()})))}}function ph(n,e){return(0,ri.e)(By(n,e,arguments.length>=2,!0))}function jy(n){return n<=0?()=>Hu.E:(0,ri.e)((e,t)=>{let r=[];e.subscribe((0,Zn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ib(n,e){const t=arguments.length>=2;return r=>r.pipe(n?os((i,l)=>n(i,l,r)):Zf.y,jy(1),t?Kf(e):tm(()=>new $f))}function $u(n){return(0,ri.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const cn="primary",nm=Symbol("RouteTitle");class uD{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function gh(n){return new uD(n)}function dD(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let l=0;l<r.length;l++){const u=r[l],f=n[l];if(u.startsWith(":"))i[u.substring(1)]=f;else if(u!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function as(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let l=0;l<t.length;l++)if(i=t[l],!sb(n[i],e[i]))return!1;return!0}function sb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,l)=>r[l]===i)}return n===e}function rm(n){return Array.prototype.concat.apply([],n)}function ab(n){return n.length>0?n[n.length-1]:null}function vi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pc(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,mn.D)(Promise.resolve(n)):wt(n)}const im={exact:function lb(n,e,t){if(!ii(n.segments,e.segments)||!Ro(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!lb(n.children[r],e.children[r],t))return!1;return!0},subset:om},gc={exact:function Qf(n,e){return as(n,e)},subset:function pD(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sb(n[t],e[t]))},ignored:()=>!0};function fD(n,e,t){return im[t.paths](n.root,e.root,t.matrixParams)&&gc[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function om(n,e,t){return cb(n,e,e.segments,t)}function cb(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ii(i,t)||e.hasChildren()||!Ro(i,t,r))}if(n.segments.length===t.length){if(!ii(n.segments,t)||!Ro(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!om(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(ii(n.segments,i)&&Ro(n.segments,i,r)&&n.children[cn])&&cb(n.children[cn],e,l,r)}}function Ro(n,e,t){return e.every((r,i)=>gc[t](n[i].parameters,r.parameters))}class ks{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gh(this.queryParams)),this._queryParamMap}toString(){return mh.serialize(this)}}class Rt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,vi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pl(this)}}class Ps{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=gh(this.parameters)),this._parameterMap}toString(){return Gy(this)}}function ii(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return new mc},providedIn:"root"}),n})();class mc{parse(e){const t=new gb(e);return new ks(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ya(e.root,!0)}`,r=function db(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gl(t)}=${gl(i)}`).join("&"):`${gl(t)}=${gl(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function _h(n){return encodeURI(n)}(e.fragment)}`:""}`}}const mh=new mc;function pl(n){return n.segments.map(e=>Gy(e)).join("/")}function ya(n,e){if(!n.hasChildren())return pl(n);if(e){const t=n.children[cn]?ya(n.children[cn],!1):"",r=[];return vi(n.children,(i,l)=>{l!==cn&&r.push(`${l}:${ya(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $y(n,e){let t=[];return vi(n.children,(r,i)=>{i===cn&&(t=t.concat(e(r,i)))}),vi(n.children,(r,i)=>{i!==cn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===cn?[ya(n.children[cn],!1)]:[`${i}:${ya(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[cn]?`${pl(n)}/${t[0]}`:`${pl(n)}/(${t.join("//")})`}}function Gu(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gl(n){return Gu(n).replace(/%3B/gi,";")}function _c(n){return Gu(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jf(n){return decodeURIComponent(n)}function Zy(n){return Jf(n.replace(/\+/g,"%20"))}function Gy(n){return`${_c(n.path)}${function ub(n){return Object.keys(n).map(e=>`;${_c(e)}=${_c(n[e])}`).join("")}(n.parameters)}`}const hb=/^[^\/()?;=#]+/;function Xf(n){const e=n.match(hb);return e?e[0]:""}const fb=/^[^=?&#]+/,gD=/^[^&#]+/;class gb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Rt([],{}):new Rt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[cn]=new Rt(e,t)),r}parseSegment(){const e=Xf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new o.vHH(4009,!1);return this.capture(e),new Ps(Jf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Xf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Xf(this.remaining);i&&(r=i,this.capture(r))}e[Jf(t)]=Jf(r)}parseQueryParam(e){const t=function pb(n){const e=n.match(fb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function mD(n){const e=n.match(gD);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Zy(t),l=Zy(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(l)}else e[i]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Xf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new o.vHH(4010,!1);let l;r.indexOf(":")>-1?(l=r.slice(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=cn);const u=this.parseChildren();t[l]=1===Object.keys(u).length?u[cn]:new Rt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new o.vHH(4011,!1)}}function qy(n){return n.segments.length>0?new Rt([],{[cn]:n}):n}function ep(n){const e={};for(const r of Object.keys(n.children)){const l=ep(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function zy(n){if(1===n.numberOfChildren&&n.children[cn]){const e=n.children[cn];return new Rt(n.segments.concat(e.segments),e.children)}return n}(new Rt(n.segments,e))}function ml(n){return n instanceof ks}function _D(n,e,t,r,i){if(0===t.length)return qu(e.root,e.root,e.root,r,i);const l=function Jy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new lm(!0,0,n);let e=0,t=!1;const r=n.reduce((i,l,u)=>{if("object"==typeof l&&null!=l){if(l.outlets){const f={};return vi(l.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(l.segmentPath)return[...i,l.segmentPath]}return"string"!=typeof l?[...i,l]:0===u?(l.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,l]},[]);return new lm(t,e,r)}(t);return l.toRoot()?qu(e.root,e.root,new Rt([],{}),r,i):function u(m){const v=function mb(n,e,t,r){if(n.isAbsolute)return new zu(e.root,!0,0);if(-1===r)return new zu(t,t===e.root,0);return function _b(n,e,t){let r=n,i=e,l=t;for(;l>i;){if(l-=i,r=r.parent,!r)throw new o.vHH(4005,!1);i=r.segments.length}return new zu(r,!1,i-l)}(t,r+(yc(n.commands[0])?0:1),n.numberOfDoubleDots)}(l,e,n.snapshot?._urlSegment,m),x=v.processChildren?yh(v.segmentGroup,v.index,l.commands):cm(v.segmentGroup,v.index,l.commands);return qu(e.root,v.segmentGroup,x,r,i)}(n.snapshot?._lastPathIndex)}function yc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vc(n){return"object"==typeof n&&null!=n&&n.outlets}function qu(n,e,t,r,i){let u,l={};r&&vi(r,(m,v)=>{l[v]=Array.isArray(m)?m.map(x=>`${x}`):`${m}`}),u=n===e?t:Qy(n,e,t);const f=qy(ep(u));return new ks(f,l,i)}function Qy(n,e,t){const r={};return vi(n.children,(i,l)=>{r[l]=i===e?t:Qy(i,e,t)}),new Rt(n.segments,r)}class lm{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yc(r[0]))throw new o.vHH(4003,!1);const i=r.find(vc);if(i&&i!==ab(r))throw new o.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function cm(n,e,t){if(n||(n=new Rt([],{})),0===n.segments.length&&n.hasChildren())return yh(n,e,t);const r=function vb(n,e,t){let r=0,i=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return l;const u=n.segments[i],f=t[r];if(vc(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!tv(m,v,u))return l;r+=2}else{if(!tv(m,{},u))return l;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Rt(n.segments.slice(0,r.pathIndex),{});return l.children[cn]=new Rt(n.segments.slice(r.pathIndex),n.children),yh(l,0,i)}return r.match&&0===i.length?new Rt(n.segments,{}):r.match&&!n.hasChildren()?ev(n,e,t):r.match?yh(n,0,i):ev(n,e,t)}function yh(n,e,t){if(0===t.length)return new Rt(n.segments,{});{const r=function yb(n){return vc(n[0])?n[0].outlets:{[cn]:n}}(t),i={};return vi(r,(l,u)=>{"string"==typeof l&&(l=[l]),null!==l&&(i[u]=cm(n.children[u],e,l))}),vi(n.children,(l,u)=>{void 0===r[u]&&(i[u]=l)}),new Rt(n.segments,i)}}function ev(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const l=t[i];if(vc(l)){const m=yD(l.outlets);return new Rt(r,m)}if(0===i&&yc(t[0])){r.push(new Ps(n.segments[e].path,Cb(t[0]))),i++;continue}const u=vc(l)?l.outlets[cn]:`${l}`,f=i<t.length-1?t[i+1]:null;u&&f&&yc(f)?(r.push(new Ps(u,Cb(f))),i+=2):(r.push(new Ps(u,{})),i++)}return new Rt(r,{})}function yD(n){const e={};return vi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ev(new Rt([],{}),0,t))}),e}function Cb(n){const e={};return vi(n,(t,r)=>e[r]=`${t}`),e}function tv(n,e,t){return n==t.path&&as(e,t.parameters)}class Os{constructor(e,t){this.id=e,this.url=t}}class um extends Os{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cc extends Os{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tp extends Os{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class nv extends Os{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wb extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bb extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ib extends Os{constructor(e,t,r,i,l){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=l,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Eb extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NP extends Os{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vD{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class CD{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xb{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Db{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class rv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=iv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=iv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=dm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dm(e,this._root).map(t=>t.value)}}function iv(n,e){if(n===e.value)return e;for(const t of e.children){const r=iv(n,t);if(r)return r}return null}function dm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=dm(n,t);if(r.length)return r.unshift(e),r}return[]}class va{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ns(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ab extends rv{constructor(e,t){super(e),this.snapshot=t,ls(this,e)}toString(){return this.snapshot.toString()}}function Sb(n,e){const t=function Mb(n,e){const u=new vh([],{},{},"",{},cn,e,null,n.root,-1,{});return new hm("",new va(u,[]))}(n,e),r=new Ms([new Ps("",{})]),i=new Ms({}),l=new Ms({}),u=new Ms({}),f=new Ms(""),m=new wc(r,i,u,f,l,cn,e,t.root);return m.snapshot=t.root,new Ab(new va(m,[]),t)}class wc{constructor(e,t,r,i,l,u,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this.title=this.data?.pipe((0,ht.U)(v=>v[nm]))??wt(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>gh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>gh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ov(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],l=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(l.component)break;r--}}return function RP(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vh{constructor(e,t,r,i,l,u,f,m,v,x,D,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=l,this.outlet=u,this.component=f,this.title=this.data?.[nm],this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=x,this._correctedLastPathIndex=L??x,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class hm extends rv{constructor(e,t){super(t),this.url=e,ls(this,t)}toString(){return kb(this._root)}}function ls(n,e){e.value._routerState=n,e.children.forEach(t=>ls(n,t))}function kb(n){const e=n.children.length>0?` { ${n.children.map(kb).join(", ")} } `:"";return`${n.value}${e}`}function fm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,as(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),as(e.params,t.params)||n.params.next(t.params),function ob(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!as(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),as(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function cs(n,e){const t=as(n.params,e.params)&&function sm(n,e){return ii(n,e)&&n.every((t,r)=>as(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||cs(n.parent,e.parent))}function Yi(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Pb(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Yi(n,r,i);return Yi(n,r)})}(n,e,t);return new va(r,i)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const u=l.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(f=>Yi(n,f)),u}}const r=function Ob(n){return new wc(new Ms(n.url),new Ms(n.params),new Ms(n.queryParams),new Ms(n.fragment),new Ms(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(l=>Yi(n,l));return new va(r,i)}}const sv="ngNavigationCancelingError";function Nb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ml(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Rb(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Rb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[sv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Fb(n){return pm(n)&&ml(n.url)}function pm(n){return n&&n[sv]}class np{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new rp,this.attachRef=null}}let rp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new np,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const ip=!1;let av=(()=>{class n{constructor(t,r,i,l,u){this.parentContexts=t,this.location=r,this.changeDetector=l,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=i||cn,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new o.vHH(4012,ip);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new o.vHH(4012,ip);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new o.vHH(4012,ip);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new o.vHH(4013,ip);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new Lb(t,f,i.injector);if(r&&function Vb(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(u);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(u,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(rp),o.Y36(o.s_b),o.$8M("name"),o.Y36(o.sBO),o.Y36(o.lqb))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Lb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===wc?this.route:e===rp?this.childContexts:this.parent.get(e,t)}}let Ch=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[o.jDz],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[av],encapsulation:2}),n})();function Ub(n,e){return n.providers&&!n._injector&&(n._injector=(0,o.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gm(n){const e=n.children&&n.children.map(gm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==cn&&(t.component=Ch),t}function Fo(n){return n.outlet||cn}function cv(n,e){const t=n.filter(r=>Fo(r)===e);return t.push(...n.filter(r=>Fo(r)!==e)),t}function wh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class xD{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),fm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ns(t);e.children.forEach(l=>{const u=l.value.outlet;this.deactivateRoutes(l,i[u],r),delete i[u]}),vi(i,(l,u)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(i===l)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=Ns(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);if(r&&r.outlet){const u=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,l=Ns(e);for(const u of Object.keys(l))this.deactivateRouteAndItsChildren(l[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ns(t);e.children.forEach(l=>{this.activateRoutes(l,i[l.value.outlet],r),this.forwardEvent(new xb(l.value.snapshot))}),e.children.length&&this.forwardEvent(new wD(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,l=t?t.value:null;if(fm(i),i===l)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(f.contexts),u.attachRef=f.componentRef,u.route=f.route.value,u.outlet&&u.outlet.attach(f.componentRef,f.route.value),fm(f.route.value),this.activateChildRoutes(e,null,u.children)}else{const f=wh(i.snapshot),m=f?.get(o._Vd)??null;u.attachRef=null,u.route=i,u.resolver=m,u.injector=f,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Zb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class mm{constructor(e,t){this.component=e,this.route=t}}function DD(n,e,t){const r=n._root;return sp(r,e?e._root:null,t,[r.value])}function bh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,o.Z0I)(n)?e.get(n):n:r}function sp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=Ns(e);return n.children.forEach(u=>{(function SD(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,u=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(u&&l.routeConfig===u.routeConfig){const m=function MD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ii(n.url,e.url)||!as(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!cs(n,e)||!as(n.queryParams,e.queryParams);default:return!cs(n,e)}}(u,l,l.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Zb(r)):(l.data=u.data,l._resolvedData=u._resolvedData),sp(n,e,l.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new mm(f.outlet.component,u))}else u&&ap(e,f,i),i.canActivateChecks.push(new Zb(r)),sp(n,null,l.component?f?f.children:null:t,r,i)})(u,l[u.value.outlet],t,r.concat([u.value]),i),delete l[u.value.outlet]}),vi(l,(u,f)=>ap(u,t.getContext(f),i)),i}function ap(n,e,t){const r=Ns(n),i=n.value;vi(r,(l,u)=>{ap(l,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new mm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function lp(n){return"function"==typeof n}function _m(n){return n instanceof $f||"EmptyError"===n?.name}const cp=Symbol("INITIAL_VALUE");function Wu(){return wr(n=>Jg(n.map(e=>e.pipe(em(1),Wf(cp)))).pipe((0,ht.U)(e=>{for(const t of e)if(!0!==t){if(t===cp)return cp;if(!1===t||t instanceof ks)return t}return!0}),os(e=>e!==cp),em(1)))}function Yu(n){return(0,aD.z)((0,Lr.b)(e=>{if(ml(e))throw Nb(0,e)}),(0,ht.U)(e=>!0===e))}const up={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BD(n,e,t,r,i){const l=ym(n,e,t);return l.matched?function FP(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?wt(i.map(u=>{const f=bh(u,n);return pc(function FD(n){return n&&lp(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(Wu(),Yu()):wt(!0)}(r=Ub(e,r),e,t).pipe((0,ht.U)(u=>!0===u?l:{...up})):wt(l)}function ym(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...up}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dD)(t,n,e);if(!i)return{...up};const l={};vi(i.posParams,(f,m)=>{l[m]=f.path});const u=i.consumed.length>0?{...l,...i.consumed[i.consumed.length-1].parameters}:l;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function dp(n,e,t,r,i="corrected"){if(t.length>0&&function jD(n,e,t){return t.some(r=>vm(n,e,r)&&Fo(r)!==cn)}(n,t,r)){const u=new Rt(e,function Vt(n,e,t,r){const i={};i[cn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Fo(l)!==cn){const u=new Rt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Fo(l)]=u}return i}(n,e,r,new Rt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function HD(n,e,t){return t.some(r=>vm(n,e,r))}(n,t,r)){const u=new Rt(n.segments,function LP(n,e,t,r,i,l){const u={};for(const f of r)if(vm(n,t,f)&&!i[Fo(f)]){const m=new Rt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===l?n.segments.length:e.length,u[Fo(f)]=m}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const l=new Rt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function vm(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Qu(n,e,t,r){return!!(Fo(n)===r||r!==cn&&vm(e,t,n))&&("**"===n.path||ym(e,n,t).matched)}function Qb(n,e,t){return 0===e.length&&!n.children[t]}const Ju=!1;class Xu{constructor(e){this.segmentGroup=e||null}}class cr{constructor(e){this.urlTree=e}}function Cm(n){return qf(new Xu(n))}function dv(n){return qf(new cr(n))}class eI{constructor(e,t,r,i,l){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=l,this.allowRedirects=!0}apply(){const e=dp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Rt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,cn).pipe((0,ht.U)(l=>this.createUrlTree(ep(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(fc(l=>{if(l instanceof cr)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof Xu?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,cn).pipe((0,ht.U)(i=>this.createUrlTree(ep(i),e.queryParams,e.fragment))).pipe(fc(i=>{throw i instanceof Xu?this.noMatchError(i):i}))}noMatchError(e){return new o.vHH(4002,Ju)}createUrlTree(e,t,r){const i=qy(e);return new ks(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(l=>new Rt([],l))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const l of Object.keys(r.children))"primary"===l?i.unshift(l):i.push(l);return(0,mn.D)(i).pipe(_a(l=>{const u=r.children[l],f=cv(t,l);return this.expandSegmentGroup(e,f,u,l).pipe((0,ht.U)(m=>({segment:m,outlet:l})))}),ph((l,u)=>(l[u.outlet]=u.segment,l),{}),ib())}expandSegment(e,t,r,i,l,u){return(0,mn.D)(r).pipe(_a(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,l,u).pipe(fc(v=>{if(v instanceof Xu)return wt(null);throw v}))),ss(f=>!!f),fc((f,m)=>{if(_m(f))return Qb(t,i,l)?wt(new Rt([],{})):Cm(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,l,u,f){return Qu(i,t,l,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,l,u):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u):Cm(t):Cm(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dv(l):this.lineralizeSegments(r,l).pipe((0,Pi.z)(u=>{const f=new Rt(u,{});return this.expandSegment(e,f,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,l,u){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:x}=ym(t,i,l);if(!f)return Cm(t);const D=this.applyRedirectCommands(m,i.redirectTo,x);return i.redirectTo.startsWith("/")?dv(D):this.lineralizeSegments(i,D).pipe((0,Pi.z)(L=>this.expandSegment(e,t,r,L.concat(v),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,l){return"**"===r.path?(e=Ub(r,e),r.loadChildren?(r._loadedRoutes?wt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ht.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Rt(i,{})))):wt(new Rt(i,{}))):BD(t,r,i,e).pipe(wr(({matched:u,consumedSegments:f,remainingSegments:m})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Pi.z)(x=>{const D=x.injector??e,L=x.routes,{segmentGroup:j,slicedSegments:q}=dp(t,f,m,L),ee=new Rt(j.segments,j.children);if(0===q.length&&ee.hasChildren())return this.expandChildren(D,L,ee).pipe((0,ht.U)(je=>new Rt(f,je)));if(0===L.length&&0===q.length)return wt(new Rt(f,{}));const ae=Fo(r)===l;return this.expandSegment(D,ee,L,q,ae?cn:l,!0).pipe((0,ht.U)(Ge=>new Rt(f.concat(Ge.segments),Ge.children)))})):Cm(t)))}getChildConfig(e,t,r){return t.children?wt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?wt({routes:t._loadedRoutes,injector:t._loadedInjector}):function UD(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?wt(!0):wt(i.map(u=>{const f=bh(u,n);return pc(function PD(n){return n&&lp(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(Wu(),Yu())}(e,t,r).pipe((0,Pi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Lr.b)(l=>{t._loadedRoutes=l.routes,t._loadedInjector=l.injector})):function $D(n){return qf(Rb(Ju,3))}())):wt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return wt(r);if(i.numberOfChildren>1||!i.children[cn])return qf(new o.vHH(4e3,Ju));i=i.children[cn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const l=this.createSegmentGroup(e,t.root,r,i);return new ks(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return vi(e,(i,l)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[l]=t[f]}else r[l]=i}),r}createSegmentGroup(e,t,r,i){const l=this.createSegments(e,t.segments,r,i);let u={};return vi(t.children,(f,m)=>{u[m]=this.createSegmentGroup(e,f,r,i)}),new Rt(l,u)}createSegments(e,t,r,i){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,i):this.findOrReturn(l,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new o.vHH(4001,Ju);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ZD{}class fp{constructor(e,t,r,i,l,u,f,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=l,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=f,this.urlSerializer=m}recognize(){const e=dp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,cn).pipe((0,ht.U)(t=>{if(null===t)return null;const r=new vh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},cn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new va(r,t),l=new hm(this.url,i);return this.inheritParamsAndData(l._root),l}))}inheritParamsAndData(e){const t=e.value,r=ov(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,mn.D)(Object.keys(r.children)).pipe(_a(i=>{const l=r.children[i],u=cv(t,i);return this.processSegmentGroup(e,u,l,i)}),ph((i,l)=>i&&l?(i.push(...l),i):null),function Yf(n,e=!1){return(0,ri.e)((t,r)=>{let i=0;t.subscribe((0,Zn.x)(r,l=>{const u=n(l,i++);(u||e)&&r.next(l),!u&&r.complete()}))})}(i=>null!==i),Kf(null),ib(),(0,ht.U)(i=>{if(null===i)return null;const l=pp(i);return function zD(n){n.sort((e,t)=>e.value.outlet===cn?-1:t.value.outlet===cn?1:e.value.outlet.localeCompare(t.value.outlet))}(l),l}))}processSegment(e,t,r,i,l){return(0,mn.D)(t).pipe(_a(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,l)),ss(u=>!!u),fc(u=>{if(_m(u))return Qb(r,i,l)?wt([]):wt(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,l){if(t.redirectTo||!Qu(t,r,i,l))return wt(null);let u;if("**"===t.path){const f=i.length>0?ab(i).parameters:{},m=fv(r)+i.length;u=wt({snapshot:new vh(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ih(t),Fo(t),t.component??t._loadedComponent??null,t,hv(r),m,Eh(t),m),consumedSegments:[],remainingSegments:[]})}else u=BD(r,t,i,e).pipe((0,ht.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:x})=>{if(!f)return null;const D=fv(r)+m.length;return{snapshot:new vh(m,x,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ih(t),Fo(t),t.component??t._loadedComponent??null,t,hv(r),D,Eh(t),D),consumedSegments:m,remainingSegments:v}}));return u.pipe(wr(f=>{if(null===f)return wt(null);const{snapshot:m,consumedSegments:v,remainingSegments:x}=f;e=t._injector??e;const D=t._loadedInjector??e,L=function WD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:q}=dp(r,v,x,L.filter(ae=>void 0===ae.redirectTo),this.relativeLinkResolution);if(0===q.length&&j.hasChildren())return this.processChildren(D,L,j).pipe((0,ht.U)(ae=>null===ae?null:[new va(m,ae)]));if(0===L.length&&0===q.length)return wt([new va(m,[])]);const ee=Fo(t)===l;return this.processSegment(D,L,j,q,ee?cn:l).pipe((0,ht.U)(ae=>null===ae?null:[new va(m,ae)]))}))}}function KD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pp(n){const e=[],t=new Set;for(const r of n){if(!KD(r)){e.push(r);continue}const i=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=pp(r.children);e.push(new va(r.value,i))}return e.filter(r=>!t.has(r))}function hv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fv(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ih(n){return n.data||{}}function Eh(n){return n.resolve||{}}function aI(n){return"string"==typeof n.title||null===n.title}function wm(n){return wr(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,ht.U)(()=>e)):wt(e)})}let lI=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(l=>l.outlet===cn);return r}getResolvedTitleForRoute(t){return t.data[nm]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return(0,o.f3M)(cI)},providedIn:"root"}),n})(),cI=(()=>{class n extends lI{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pf))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class VP{}class BP extends class UP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ed=new o.OlP("",{providedIn:"root",factory:()=>({})}),pv=new o.OlP("ROUTES");let bm=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return wt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=pc(t.loadComponent()).pipe((0,Lr.b)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=l}),$u(()=>{this.componentLoaders.delete(t)})),i=new lD(r,()=>new ki.x).pipe(fh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return wt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const l=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ht.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,x=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=rm(m.get(pv,[],o.XFs.Self|o.XFs.Optional)));return{routes:v.map(gm),injector:m}}),$u(()=>{this.childrenLoaders.delete(r)})),u=new lD(l,()=>new ki.x).pipe(fh());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return pc(t()).pipe((0,Pi.z)(r=>r instanceof o.YKP||Array.isArray(r)?wt(r):(0,mn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.zs3),o.LFG(o.Sil))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gp{}class XD{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function eA(n){throw n}function tA(n,e,t){return e.parse("/")}const nA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hI={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function fI(){const n=(0,o.f3M)(Zu),e=(0,o.f3M)(rp),t=(0,o.f3M)(Ae),r=(0,o.f3M)(o.zs3),i=(0,o.f3M)(o.Sil),l=(0,o.f3M)(pv,{optional:!0})??[],u=(0,o.f3M)(ed,{optional:!0})??{},f=(0,o.f3M)(cI),m=(0,o.f3M)(lI,{optional:!0}),v=(0,o.f3M)(gp,{optional:!0}),x=(0,o.f3M)(VP,{optional:!0}),D=new fn(null,n,e,t,r,i,rm(l));return v&&(D.urlHandlingStrategy=v),x&&(D.routeReuseStrategy=x),D.titleStrategy=m??f,function rA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,D),D}let fn=(()=>{class n{constructor(t,r,i,l,u,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=l,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ki.x,this.errorHandler=eA,this.malformedUriErrorHandler=tA,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>wt(void 0),this.urlHandlingStrategy=new XD,this.routeReuseStrategy=new BP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(bm),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new CD(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new vD(L)),this.ngModule=u.get(o.h0i),this.console=u.get(o.c2e);const D=u.get(o.R0b);this.isNgZoneEnabled=D instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function hD(){return new ks(new Rt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sb(this.currentUrlTree,this.rootComponentType),this.transitions=new Ms({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(os(i=>0!==i.id),(0,ht.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),wr(i=>{let l=!1,u=!1;return wt(i).pipe((0,Lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),wr(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return gv(f.source)&&(this.browserUrlTree=f.extractedUrl),wt(f).pipe(wr(D=>{const L=this.transitions.getValue();return r.next(new um(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),L!==this.transitions.getValue()?Hu.E:Promise.resolve(D)}),function tI(n,e,t,r){return wr(i=>function Xb(n,e,t,r,i){return new eI(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(l=>({...i,urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Lr.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},i.urlAfterRedirects=D.urlAfterRedirects}),function YD(n,e,t,r,i,l){return(0,Pi.z)(u=>function qD(n,e,t,r,i,l,u="emptyOnly",f="legacy"){return new fp(n,e,t,r,i,u,f,l).recognize().pipe(wr(m=>null===m?function GD(n){return new Ar.y(e=>e.error(n))}(new ZD):wt(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,l).pipe((0,ht.U)(f=>({...u,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Lr.b)(D=>{if(i.targetSnapshot=D.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(j,D)}this.browserUrlTree=D.urlAfterRedirects}const L=new wb(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(L)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:j,source:q,restoredState:ee,extras:ae}=f,Ue=new um(L,this.serializeUrl(j),q,ee);r.next(Ue);const Ge=Sb(j,this.rootComponentType).snapshot;return wt(i={...f,targetSnapshot:Ge,urlAfterRedirects:j,extras:{...ae,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),Hu.E}),(0,Lr.b)(f=>{const m=new bb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,ht.U)(f=>i={...f,guards:DD(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function qb(n,e){return(0,Pi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:l,canDeactivateChecks:u}}=t;return 0===u.length&&0===l.length?wt({...t,guardsResult:!0}):function zb(n,e,t,r){return(0,mn.D)(n).pipe((0,Pi.z)(i=>function VD(n,e,t,r,i){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return l&&0!==l.length?wt(l.map(f=>{const m=wh(e)??i,v=bh(f,m);return pc(function RD(n){return n&&lp(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(ss())})).pipe(Wu()):wt(!0)}(i.component,i.route,t,e,r)),ss(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Pi.z)(f=>f&&function kD(n){return"boolean"==typeof n}(f)?function Wb(n,e,t,r){return(0,mn.D)(e).pipe(_a(i=>Uy(function Yb(n,e){return null!==n&&e&&e(new Tb(n)),wt(!0)}(i.route.parent,r),function Kb(n,e){return null!==n&&e&&e(new qr(n)),wt(!0)}(i.route,r),function Ku(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(u=>function AD(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>rb(()=>wt(u.guards.map(m=>{const v=wh(u.node)??t,x=bh(m,v);return pc(function ND(n){return n&&lp(n.canActivateChild)}(x)?x.canActivateChild(r,n):v.runInContext(()=>x(r,n))).pipe(ss())})).pipe(Wu())));return wt(l).pipe(Wu())}(n,i.path,t),function uv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return wt(!0);const i=r.map(l=>rb(()=>{const u=wh(e)??t,f=bh(l,u);return pc(function OD(n){return n&&lp(n.canActivate)}(f)?f.canActivate(e,n):u.runInContext(()=>f(e,n))).pipe(ss())}));return wt(i).pipe(Wu())}(n,i.route,t))),ss(i=>!0!==i,!0))}(r,l,n,e):wt(f)),(0,ht.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Lr.b)(f=>{if(i.guardsResult=f.guardsResult,ml(f.guardsResult))throw Nb(0,f.guardsResult);const m=new Ib(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),os(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),wm(f=>{if(f.guards.canActivateChecks.length)return wt(f).pipe((0,Lr.b)(m=>{const v=new Eb(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),wr(m=>{let v=!1;return wt(m).pipe(function QD(n,e){return(0,Pi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return wt(t);let l=0;return(0,mn.D)(i).pipe(_a(u=>function JD(n,e,t,r){const i=n.routeConfig,l=n._resolve;return void 0!==i?.title&&!aI(i)&&(l[nm]=i.title),function iI(n,e,t,r){const i=function oI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return wt({});const l={};return(0,mn.D)(i).pipe((0,Pi.z)(u=>function sI(n,e,t,r){const i=wh(e)??r,l=bh(n,i);return pc(l.resolve?l.resolve(e,t):i.runInContext(()=>l(e,t)))}(n[u],e,t,r).pipe(ss(),(0,Lr.b)(f=>{l[u]=f}))),jy(1),function cD(n){return(0,ht.U)(()=>n)}(l),fc(u=>_m(u)?Hu.E:qf(u)))}(l,n,e,r).pipe((0,ht.U)(u=>(n._resolvedData=u,n.data=ov(n,t).resolve,i&&aI(i)&&(n.data[nm]=i.title),null)))}(u.route,r,n,e)),(0,Lr.b)(()=>l++),jy(1),(0,Pi.z)(u=>l===i.length?wt(t):Hu.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Lr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Lr.b)(m=>{const v=new NP(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),wm(f=>{const m=v=>{const x=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&x.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Lr.b)(D=>{v.component=D}),(0,ht.U)(()=>{})));for(const D of v.children)x.push(...m(D));return x};return Jg(m(f.targetSnapshot.root)).pipe(Kf(),em(1))}),wm(()=>this.afterPreactivation()),(0,ht.U)(f=>{const m=function Rs(n,e,t){const r=Yi(n,e._root,t?t._root:void 0);return new Ab(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:m}}),(0,Lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new xD(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Lr.b)({next(){l=!0},complete(){l=!0}}),$u(()=>{l||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),fc(f=>{if(u=!0,pm(f)){Fb(f)||(this.navigated=!0,this.restoreHistory(i,!0));const m=new tp(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(m),Fb(f)){const v=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),x={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||gv(i.source)};this.scheduleNavigation(v,"imperative",null,x,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new nv(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return Hu.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},l=t.state?.navigationId?t.state:null;if(l){const f={...l};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,l,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(gm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:l,fragment:u,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,x=m?this.currentUrlTree.fragment:u;let D=null;switch(f){case"merge":D={...this.currentUrlTree.queryParams,...l};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=l||null}return null!==D&&(D=this.removeEmptyProps(D)),_D(v,this.currentUrlTree,t,D,x??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ml(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function iA(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new o.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...nA}:!1===r?{...hI}:r,ml(t))return fD(this.currentUrlTree,t,i);const l=this.parseUrl(t);return fD(this.currentUrlTree,l,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const l=t[i];return null!=l&&(r[i]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Cc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,l,u){if(this.disposed)return Promise.resolve(!1);let f,m,v;u?(f=u.resolve,m=u.reject,v=u.promise):v=new Promise((L,j)=>{f=L,m=j});const x=++this.navigationId;let D;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),D=i&&i.\u0275routerPageId?i.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):D=0,this.setTransition({id:x,targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),l={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",l):this.location.go(i,"",l)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const l=new tp(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(l),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:function(){return fI()},providedIn:"root"}),n})();function gv(n){return"imperative"!==n}let _l=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=l,this.el=u,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new ki.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,o.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,o.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,o.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(fn),o.Y36(wc),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&o.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})(),Fs=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ki.x,this.subscription=t.events.subscribe(l=>{l instanceof Cc&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,o.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,o.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,o.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,l,u){return!!(0!==t||r||i||l||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(fn),o.Y36(wc),o.Y36(we))},n.\u0275dir=o.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&o.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&o.uIk("target",r.target)("href",r.href,o.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[o.TTD]}),n})();class gI{}let _I=(()=>{class n{constructor(t,r,i,l,u){this.router=t,this.injector=i,this.preloadingStrategy=l,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(os(t=>t instanceof Cc),_a(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const l of r){l.providers&&!l._injector&&(l._injector=(0,o.MMx)(l.providers,t,`Route: ${l.path}`));const u=l._injector??t,f=l._loadedInjector??u;l.loadChildren&&!l._loadedRoutes&&void 0===l.canLoad||l.loadComponent&&!l._loadedComponent?i.push(this.preloadConfig(u,l)):(l.children||l._loadedRoutes)&&i.push(this.processRoutes(f,l.children??l._loadedRoutes))}return(0,mn.D)(i).pipe((0,Xg.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):wt(null);const l=i.pipe((0,Pi.z)(u=>null===u?wt(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,mn.D)([l,u]).pipe((0,Xg.J)())}return l})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(fn),o.LFG(o.Sil),o.LFG(o.lqb),o.LFG(gI),o.LFG(bm))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Em=new o.OlP("");let yI=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof um?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Cc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Db&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Db(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Th(n,e){return{\u0275kind:n,\u0275providers:e}}function Dm(n){return[{provide:pv,multi:!0,useValue:n}]}function vI(){const n=(0,o.f3M)(o.zs3);return e=>{const t=n.get(o.z2F);if(e!==t.components[0])return;const r=n.get(fn),i=n.get(CI);1===n.get(mv)&&r.initialNavigation(),n.get(wI,null,o.XFs.Optional)?.setUpPreloading(),n.get(Em,null,o.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const CI=new o.OlP("",{factory:()=>new ki.x}),mv=new o.OlP("",{providedIn:"root",factory:()=>1});const wI=new o.OlP("");function bI(n){return Th(0,[{provide:wI,useExisting:_I},{provide:gI,useExisting:n}])}const _v=new o.OlP("ROUTER_FORROOT_GUARD"),uA=[Ae,{provide:Zu,useClass:mc},{provide:fn,useFactory:fI},rp,{provide:wc,useFactory:function xm(n){return n.routerState.root},deps:[fn]},bm];function dA(){return new o.PXZ("Router",fn)}let II=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[uA,[],Dm(t),{provide:_v,useFactory:Cv,deps:[[fn,new o.FiY,new o.tp0]]},{provide:ed,useValue:r||{}},r?.useHash?{provide:we,useClass:pt}:{provide:we,useClass:yt},{provide:Em,useFactory:()=>{const n=(0,o.f3M)(fn),e=(0,o.f3M)($s),t=(0,o.f3M)(ed);return t.scrollOffset&&e.setOffset(t.scrollOffset),new yI(n,e,t)}},r?.preloadingStrategy?bI(r.preloadingStrategy).\u0275providers:[],{provide:o.PXZ,multi:!0,useFactory:dA},r?.initialNavigation?hA(r):[],[{provide:TI,useFactory:vI},{provide:o.tb,multi:!0,useExisting:TI}]]}}static forChild(t){return{ngModule:n,providers:[Dm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(_v,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ch]}),n})();function Cv(n){return"guarded"}function hA(n){return["disabled"===n.initialNavigation?Th(3,[{provide:o.ip1,multi:!0,useFactory:()=>{const e=(0,o.f3M)(fn);return()=>{e.setUpLocationChangeListener()}}},{provide:mv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Th(2,[{provide:mv,useValue:0},{provide:o.ip1,multi:!0,deps:[o.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(l=>{const u=e.get(fn),f=e.get(CI);(function i(l){e.get(fn).events.pipe(os(f=>f instanceof Cc||f instanceof tp||f instanceof nv),(0,ht.U)(f=>f instanceof Cc||f instanceof tp&&(0===f.code||1===f.code)&&null),os(f=>null!==f),em(1)).subscribe(()=>{l()})})(()=>{l(!0),r=!0}),u.afterPreactivation=()=>(l(!0),r||f.closed?wt(void 0):f),u.initialNavigation()}))}}]).\u0275providers:[]]}const TI=new o.OlP("");var xI=U(6451),yl=U(5363),DI=U(6063);class fA extends ki.x{constructor(e=1/0,t=1/0,r=DI.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:l,_windowTime:u}=this;t||(r.push(e),!i&&r.push(l.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,l=i.slice();for(let u=0;u<l.length&&!e.closed;u+=r?1:2)e.next(l[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,l=(i?1:2)*e;if(e<1/0&&l<r.length&&r.splice(0,r.length-l),!i){const u=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)f=m;f&&r.splice(0,f+1)}}}var qP=U(3099);function bv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,qP.B)({connector:()=>new fA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Sm(n,e){return(0,Gf.m)(e)?wr(()=>n,e):wr(()=>n)}var Iv=U(9468),un=U(4976),Qi=U(2011),bc=U(259);class Ic{constructor(e){return e}}class Ev{constructor(){return(0,bc.C6)()}}const Mm=new o.OlP("angularfire2._apps"),gA={provide:Ic,useFactory:function AI(n){return n&&1===n.length?n[0]:new Ic((0,bc.Mq)())},deps:[[new o.FiY,Mm]]},mA={provide:Ev,deps:[[new o.FiY,Mm]]};function _A(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Ic(r)}}let yA=(()=>{class n{constructor(t){(0,bc.KN)("angularfire",un.q4.full,"core"),(0,bc.KN)("angularfire",un.q4.full,"app"),(0,bc.KN)("angular",o.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.Lbi))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[gA,mA]}),n})();function SI(n,...e){return{ngModule:yA,providers:[{provide:Mm,useFactory:_A(n),multi:!0,deps:[o.R0b,o.zs3,un.HU,...e]}]}}const CA=(0,un.u3)(bc.ZF,!0);var te=U(5861),Lo=U(6881),td=U(4859),Zt=U(2090),Ec=U(1877);const Tv=new Map,MI={activated:!1,tokenObservers:[]},wA={initialized:!1,enabled:!1};function br(n){return Tv.get(n)||Object.assign({},MI)}function km(){return wA}class IA{constructor(e,t,r,i,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=i,i>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,te.Z)(function*(){t.stop();try{t.pending=new Zt.BH,yield function EA(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Zt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ci=new Zt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Dv(n){if(!br(n).activated)throw Ci.create("use-before-activation",{appName:n.name})}function Tc(n,e){return Sv.apply(this,arguments)}function Sv(){return(Sv=(0,te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const l={method:"POST",body:JSON.stringify(e),headers:r};let u,f;try{u=yield fetch(n,l)}catch(D){throw Ci.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==u.status)throw Ci.create("fetch-status-error",{httpStatus:u.status});try{f=yield u.json()}catch(D){throw Ci.create("fetch-parse-error",{originalErrorMessage:D?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ci.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),x=Date.now();return{token:f.token,expireTimeMillis:x+v,issuedAtTimeMillis:x}})).apply(this,arguments)}function RI(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const _p="firebase-app-check-store";let Nm=null;function yp(){return Nm||(Nm=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ci.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(_p,{keyPath:"compositeKey"})}}catch(t){e(Ci.create("storage-open",{originalErrorMessage:t?.message}))}}),Nm)}function vp(){return(vp=(0,te.Z)(function*(n,e){const r=(yield yp()).transaction(_p,"readwrite"),l=r.objectStore(_p).put({compositeKey:n,value:e});return new Promise((u,f)=>{l.onsuccess=m=>{u()},r.onerror=m=>{var v;f(Ci.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})})).apply(this,arguments)}const Fm=new Ec.Yd("@firebase/app-check");function Lm(n,e){return(0,Zt.hl)()?function TA(n,e){return function Pv(n,e){return vp.apply(this,arguments)}(function VI(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Fm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Lv(){return km().enabled}function Vv(){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,te.Z)(function*(){const n=km();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const UI={error:"UNKNOWN_ERROR"};function Bv(n){return Zt.US.encodeString(JSON.stringify(n),!1)}function bp(n){return jv.apply(this,arguments)}function jv(){return(jv=(0,te.Z)(function*(n,e=!1){const t=n.app;Dv(t);const r=br(t);let l,i=r.token;if(i&&!xh(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(xh(m)?i=m:yield Lm(t,void 0))}if(!e&&i&&xh(i))return{token:i.token};let f,u=!1;if(Lv()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Tc(RI(t,yield Vv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const m=yield r.exchangeTokenPromise;return yield Lm(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield br(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Fm.warn(m.message):Fm.error(m),l=m}return i?l?f=xh(i)?{token:i.token,internalError:l}:Oi(l):(f={token:i.token},r.token=i,yield Lm(t,i)):f=Oi(l),u&&Gv(t,f),f})).apply(this,arguments)}function Vm(){return(Vm=(0,te.Z)(function*(n){const e=n.app;Dv(e);const{provider:t}=br(e);if(Lv()){const r=yield Vv(),{token:i}=yield Tc(RI(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Um(n,e){const t=br(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function Zv(n){const{app:e}=n,t=br(e);let r=t.tokenRefresher;r||(r=function AA(n){const{app:e}=n;return new IA((0,te.Z)(function*(){let r;if(r=br(e).token?yield bp(n,!0):yield bp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=br(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Gv(n,e){const t=br(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function xh(n){return n.expireTimeMillis-Date.now()>0}function Oi(n){return{token:Bv(UI),error:n}}class Dh{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=br(this.app);for(const t of e)Um(this.app,t.next);return Promise.resolve()}}const ZI="app-check-internal";!function XP(){(0,Lo._registerComponent)(new td.wA("app-check",n=>function SA(n,e){return new Dh(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(ZI).initialize()})),(0,Lo._registerComponent)(new td.wA(ZI,n=>function MA(n){return{getToken:e=>bp(n,e),getLimitedUseToken:()=>function Hv(n){return Vm.apply(this,arguments)}(n),addTokenListener:e=>function $v(n,e,t,r){const{app:i}=n,l=br(i);if(l.tokenObservers=[...l.tokenObservers,{next:t,error:r,type:e}],l.token&&xh(l.token)){const f=l.token;Promise.resolve().then(()=>{t({token:f.token}),Zv(n)}).catch(()=>{})}l.cachedTokenPromise.then(()=>Zv(n))}(n,"INTERNAL",e),removeTokenListener:e=>Um(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Lo.registerVersion)("@firebase/app-check","0.8.0")}();class xp{constructor(){return(0,un.vb)("app-check")}}typeof window<"u"&&window;var iO=U(9260);const zA=new o.OlP("angularfire2.auth.use-emulator"),WA=new o.OlP("angularfire2.auth.settings"),KA=new o.OlP("angularfire2.auth.tenant-id"),YA=new o.OlP("angularfire2.auth.langugage-code"),QA=new o.OlP("angularfire2.auth.use-device-language"),JA=new o.OlP("angularfire.auth.persistence"),XA=(n,e,t,r,i,l,u,f)=>(0,Qi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,l&&m.useDeviceLanguage(),u)for(const[v,x]of Object.entries(u))m.settings[v]=x;return f&&m.setPersistence(f),m},[t,r,i,l,u,f]);let Ni=(()=>{class n{constructor(t,r,i,l,u,f,m,v,x,D,L,j){const q=new ki.x,ee=wt(void 0).pipe((0,yl.Q)(u.outsideAngular),wr(()=>l.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,ht.U)(()=>(0,Qi.on)(t,l,r)),(0,ht.U)(ae=>XA(ae,l,f,v,x,D,m,L)),bv({bufferSize:1,refCount:!1}));if(Zo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=wt(null);else{ee.pipe(ss()).subscribe();const Ue=ee.pipe(wr(Ke=>Ke.getRedirectResult().then(Ut=>Ut,()=>null)),un.iC,bv({bufferSize:1,refCount:!1})),Ge=ee.pipe(wr(Ke=>new Ar.y(Ut=>({unsubscribe:l.runOutsideAngular(()=>Ke.onAuthStateChanged(Bt=>Ut.next(Bt),Bt=>Ut.error(Bt),()=>Ut.complete()))})))),je=ee.pipe(wr(Ke=>new Ar.y(Ut=>({unsubscribe:l.runOutsideAngular(()=>Ke.onIdTokenChanged(Bt=>Ut.next(Bt),Bt=>Ut.error(Bt),()=>Ut.complete()))}))));this.authState=Ue.pipe(Sm(Ge),(0,Iv.R)(u.outsideAngular),(0,yl.Q)(u.insideAngular)),this.user=Ue.pipe(Sm(je),(0,Iv.R)(u.outsideAngular),(0,yl.Q)(u.insideAngular)),this.idToken=this.user.pipe(wr(Ke=>Ke?(0,mn.D)(Ke.getIdToken()):wt(null))),this.idTokenResult=this.user.pipe(wr(Ke=>Ke?(0,mn.D)(Ke.getIdTokenResult()):wt(null))),this.credential=(0,xI.T)(Ue,q,this.authState.pipe(os(Ke=>!Ke))).pipe((0,ht.U)(Ke=>Ke?.user?Ke:null),(0,Iv.R)(u.outsideAngular),(0,yl.Q)(u.insideAngular))}return(0,Qi.pX)(this,ee,l,{spy:{apply:(ae,Ue,Ge)=>{(ae.startsWith("signIn")||ae.startsWith("createUser"))&&Ge.then(je=>q.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Qi.Dh),o.LFG(Qi.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(un.HU),o.LFG(zA,8),o.LFG(WA,8),o.LFG(KA,8),o.LFG(YA,8),o.LFG(QA,8),o.LFG(JA,8),o.LFG(xp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Hm=(()=>{class n{constructor(){iO.Z.registerVersion("angularfire",un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Ni]}),n})();const e1=["toast-component",""];function KI(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",5),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.remove())}),o.TgZ(1,"span",6),o._uU(2,"\xd7"),o.qZA()()}}function $m(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij("[",t.duplicatesCount+1,"]")}}function YI(n,e){if(1&n&&(o.TgZ(0,"div"),o._uU(1),o.YNc(2,$m,2,1,"ng-container",4),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.titleClass),o.uIk("aria-label",t.title),o.xp6(1),o.hij(" ",t.title," "),o.xp6(1),o.Q6J("ngIf",t.duplicatesCount)}}function QI(n,e){if(1&n&&o._UZ(0,"div",7),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.Q6J("innerHTML",t.message,o.oJD)}}function oO(n,e){if(1&n&&(o.TgZ(0,"div",8),o._uU(1),o.qZA()),2&n){const t=o.oxw();o.Tol(t.options.messageClass),o.uIk("aria-label",t.message),o.xp6(1),o.hij(" ",t.message," ")}}function Xv(n,e){if(1&n&&(o.TgZ(0,"div"),o._UZ(1,"div",9),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Udp("width",t.width+"%")}}class i1{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class t0{constructor(e,t,r,i,l,u){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=l,this.toastRef=u,this._onTap=new ki.x,this._onAction=new ki.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const eE=new o.OlP("ToastConfig");class s1{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new ki.x,this._activate=new ki.x,this._manualClose=new ki.x,this._resetTimeout=new ki.x,this._countDuplicate=new ki.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class a1{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===t0?this._toastPackage:this._parentInjector.get(e,t,r)}}class cO extends class lO{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class l1{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let tE=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nE=(()=>{class n{constructor(t,r,i,l){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=l,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new cO(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new l1(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(tE),o.LFG(o._Vd),o.LFG(o.z2F),o.LFG(pe))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mo=(()=>{class n{constructor(t,r,i,l,u){this.overlay=r,this._injector=i,this.sanitizer=l,this.ngZone=u,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},l=""){return this._preBuildNotification(l,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,l){const{includeTitleDuplicates:u}=this.toastrConfig;for(const f of this.toasts){const m=u&&f.title===t;if((!u||m)&&f.message===r)return f.toastRef.onDuplicate(i,l),f}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,l){return l.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,l)):this._buildNotification(t,r,i,l)}_buildNotification(t,r,i,l){if(!l.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&l.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const m=this.overlay.create(l.positionClass,this.overlayContainer);this.index=this.index+1;let v=r;r&&l.enableHtml&&(v=this.sanitizer.sanitize(o.q3G.HTML,r));const x=new s1(m),D=new t0(this.index,l,v,i,t,x),L=new a1(D,this._injector),j=new i1(l.toastComponent,L),q=m.attach(j,this.toastrConfig.newestOnTop);x.componentInstance=q.instance;const ee={toastId:this.index,title:i||"",message:r||"",toastRef:x,onShown:x.afterActivate(),onHidden:x.afterClosed(),onTap:D.onTap(),onAction:D.onAction(),portal:q};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ee.toastRef.activate()})),this.toasts.push(ee),ee}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(eE),o.LFG(nE),o.LFG(o.zs3),o.LFG(Xl),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const c1={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(l=>{this.duplicatesCount=l})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(mo),o.Y36(t0),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&o.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(o.d8E("@flyInOut",r.state),o.Tol(r.toastClasses),o.Udp("display",r.displayStyle))},attrs:e1,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(o.YNc(0,KI,3,0,"button",0),o.YNc(1,YI,3,5,"div",1),o.YNc(2,QI,1,3,"div",2),o.YNc(3,oO,2,4,"div",3),o.YNc(4,Xv,2,2,"div",4)),2&t&&(o.Q6J("ngIf",r.options.closeButton),o.xp6(1),o.Q6J("ngIf",r.title),o.xp6(1),o.Q6J("ngIf",r.message&&r.options.enableHtml),o.xp6(1),o.Q6J("ngIf",r.message&&!r.options.enableHtml),o.xp6(1),o.Q6J("ngIf",r.options.progressBar))},dependencies:[_n],encapsulation:2,data:{animation:[px("flyInOut",[iw("inactive",Mf({opacity:0})),iw("active",Mf({opacity:1})),iw("removed",Mf({opacity:0})),oh("inactive => active",nw("{{ easeTime }}ms {{ easing }}")),oh("active => removed",nw("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let n0=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:eE,useValue:{default:c1,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Td]]}),n})();function u1(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",10)(1,"div",11)(2,"span",12),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",13)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",14),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",15),o._uU(10,"Registrate"),o.qZA()()()()()}}let Zm=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.esInvitado=!1,this.modal=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}verPerfil(){this.router.navigate(["/perfil"])}close(){this.modal=!1}salir(){this.logout()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ni),o.Y36(fn),o.Y36(mo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-navbar"]],decls:18,vars:2,consts:[[2,"user-select","none"],[1,"log"],[1,"verperfil",2,"text-shadow","3px 1px 2px #1669c1","cursor","pointer","color","white",3,"click"],[2,"text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"caja"],["routerLink","/main",1,"nav-link"],["routerLink","/galeria",1,"nav-link"],["routerLink","/videos",1,"nav-link"],["routerLink","/musica",1,"nav-link"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"span",2),o.NdJ("click",function(){return r.verPerfil()}),o._uU(4),o.qZA(),o.TgZ(5,"span",3),o.NdJ("click",function(){return r.logout()}),o._uU(6,"Salir"),o.qZA()()(),o.TgZ(7,"div",4)(8,"a",5),o._uU(9,"INICIO"),o.qZA(),o.TgZ(10,"a",6),o._uU(11,"IMAGENES"),o.qZA(),o.TgZ(12,"a",7),o._uU(13,"VIDEOS"),o.qZA(),o.TgZ(14,"a",8),o._uU(15,"MUSICA"),o.qZA()()(),o.TgZ(16,"div"),o.YNc(17,u1,11,0,"div",9),o.qZA()),2&t&&(o.xp6(4),o.hij("Hola ",r.usuarioActual,""),o.xp6(13),o.Q6J("ngIf",r.modal))},dependencies:[_n,Fs],styles:[".log[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.verperfil[_ngcontent-%COMP%]{cursor:pointer}.verperfil[_ngcontent-%COMP%]:hover{color:red}.caja[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,rgba(76,175,80,.3294117647),rgba(33,150,243,.5490196078));display:flex;justify-content:space-around;padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center;margin-top:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 900px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})();const r0=function(n){return{"background-image":n,"background-blend-mode":"soft-light","background-size":"cover","background-position":"center"}};let iE=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.imagenesFondo=["https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto1.jpg?alt=media&token=144909e5-fa88-4785-a196-a9e829d644ee","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp30.jpg?alt=media&token=8835ef58-75a7-46ed-8d66-182c8b12a5b9","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp37.jpg?alt=media&token=1b507c45-18ad-44ab-9080-fcb944188969","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp45.jpg?alt=media&token=805448f0-c5f8-4c9d-b163-7de9487ea921","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp46.jpg?alt=media&token=52922013-1f5c-413d-8008-5bb74a93bad0","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp62.jpg?alt=media&token=96809e52-9a26-42fb-a0d1-608b0ec80cc4","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10500411_10201454213716073_6332111602942763551_n_10201454213716073.jpg?alt=media&token=6e7caa54-9319-4551-83bf-53cb96bbf047","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10580144_10201454209915978_1885626682807728120_n_10201454209915978.jpg?alt=media&token=eb7ef51f-afe5-490a-b17d-864642c1136a","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F164789_1372685215984_2451351_n_1372685215984.jpg?alt=media&token=46c640a2-1a32-458f-ab07-a6dbb2370cc4"],this.indiceImagen=0}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t&&t.displayName?t.displayName:"Invitad@"}),this.cambiarImagenFondo(),setInterval(()=>this.cambiarImagenFondo(),15e3)}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}cambiarImagenFondo(){const t=Math.floor(Math.random()*this.imagenesFondo.length);this.backgroundImage=this.imagenesFondo[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ni),o.Y36(fn),o.Y36(mo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main"]],decls:15,vars:3,consts:[[1,"contenedor",2,"user-select","none"],[1,"box",3,"ngStyle"],[1,"titulo"],[1,"align"],[1,"msj"],[1,"pie"],["href","https://www.facebook.com/profile.php?id=100013672369598",1,"foo"],[1,"fab","fa-facebook-square"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.TgZ(3,"h1",2),o._uU(4,"Asi somos asi Bailamos Corinto"),o.qZA(),o.TgZ(5,"div")(6,"p",3),o._uU(7," Sum\xe9rgete en el coraz\xf3n de Corinto, Cauca, a trav\xe9s de esta conmovedora recopilaci\xf3n de ensayos, presentaciones, eventos, im\xe1genes y m\xfasica, protagonizados por nuestros queridos j\xf3venes. Cada momento capturado refleja la dedicaci\xf3n, el talento y la pasi\xf3n de nuestros muchachos, quienes con su esfuerzo y creatividad han dejado una huella imborrable en nuestra comunidad. "),o.qZA()(),o.TgZ(8,"div",4),o._uU(9,"Gracias a todos espero lo disfruten tanto como yo!!."),o.qZA(),o.TgZ(10,"aside")(11,"footer",5)(12,"a",6),o._UZ(13,"i",7),o._uU(14," by Edwin 2022"),o.qZA()()()()()),2&t&&(o.xp6(1),o.Q6J("ngStyle",o.VKq(1,r0,"url("+r.backgroundImage+")")))},dependencies:[yd,Zm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;padding:0;overflow:hidden}.log[_ngcontent-%COMP%]{display:flex;justify-content:space-between;animation:moveText .8s ease-in;white-space:nowrap;overflow:hidden}.logout[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.box[_ngcontent-%COMP%]{background-color:#3144c169;display:flex;flex-direction:column;justify-content:space-around;height:90%;width:85%;color:#fff;font-size:20px;padding:20px;border:1px solid white;border-radius:15px;outline:solid #ffffff;background-repeat:no-repeat;background-position:right;background-size:contain;animation:apearText 2s linear}.titulo[_ngcontent-%COMP%]{padding:10px;font-size:30px;text-align:center;background-color:#09ffb340;border-radius:8px;animation:moveText .5s linear}.align[_ngcontent-%COMP%]{padding:12px;text-align:center;border-radius:12px;border:1px solid white;color:#fff;margin-bottom:15px;font-size:17px;animation:moveText 1s linear;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:3px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0ff}.msj[_ngcontent-%COMP%]{color:#fff;margin-bottom:9px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{animation:apearText 2.3s linear;position:relative}.foo[_ngcontent-%COMP%]{color:#fff;text-decoration:none}@media (max-width: 767px){.titulo[_ngcontent-%COMP%]{font-size:22px}.welcome[_ngcontent-%COMP%]{font-size:20px;padding:0;margin:0}.t1[_ngcontent-%COMP%]{animation:moveText 1.2s linear;white-space:nowrap;overflow:hidden}.t2[_ngcontent-%COMP%]{animation:moveText 1.4s linear;white-space:nowrap;overflow:hidden}.t3[_ngcontent-%COMP%]{animation:moveText 1.6s linear;white-space:nowrap;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:7px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}.msj[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2.3s linear}}@media (max-width: 433px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}.msj[_ngcontent-%COMP%]{font-size:13px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:16px;animation:apearText 2.3s linear}}@media (max-width: 348px){.titulo[_ngcontent-%COMP%]{font-size:16px}.align[_ngcontent-%COMP%]{padding:4px}}@keyframes moveText{0%{opacity:0;transform:translate(100%)}50%{opacity:.5}to{opacity:1;transform:translate(0)}}@keyframes apearText{0%{opacity:0}50%{opacity:.5}to{opacity:1}}"]}),n})();U(1389);class o0{constructor(){return(0,un.vb)("auth")}}const h0="firebasestorage.googleapis.com",dE="storageBucket";class nr extends Zt.ZR{constructor(e,t,r=0){super(zm(e),`Firebase Storage: ${t} (${zm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ln=(()=>{return(n=Ln||(Ln={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ln;var n})();function zm(n){return"storage/"+n}function f0(){return new nr(Ln.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Wm(){return new nr(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pE(){return new nr(Ln.CANCELED,"User canceled the upload/download.")}function gE(){return new nr(Ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Dp(n){return new nr(Ln.INVALID_ARGUMENT,n)}function R1(){return new nr(Ln.APP_DELETED,"The Firebase app was deleted.")}function F1(n){return new nr(Ln.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Km(n,e){return new nr(Ln.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ap(n){throw new nr(Ln.INTERNAL_ERROR,"Internal error: "+n)}class Ji{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ji.makeFromUrl(e,t)}catch{return new Ji(e,"")}if(""===r.path)return r;throw function MO(n){return new nr(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(Ke){Ke.path_=decodeURIComponent(Ke.path)}const D=t.replace(/[.]/g,"\\."),je=[{regex:f,indices:{bucket:1,path:3},postModify:function l(Ke){"/"===Ke.path.charAt(Ke.path.length-1)&&(Ke.path_=Ke.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===h0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let Ke=0;Ke<je.length;Ke++){const Ut=je[Ke],Bt=Ut.regex.exec(e);if(Bt){let Sr=Bt[Ut.indices.path];Sr||(Sr=""),r=new Ji(Bt[Ut.indices.bucket],Sr),Ut.postModify(r);break}}if(null==r)throw function P1(n){return new nr(Ln.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class OO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function a(n){return"string"==typeof n||n instanceof String}function c(n){return d()&&n instanceof Blob}function d(){return typeof Blob<"u"&&!(0,Zt.UG)()}function h(n,e,t,r){if(r<e)throw Dp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dp(`Invalid value for '${n}'. Expected ${t} or less.`)}function g(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function y(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var I=(()=>{return(n=I||(I={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",I;var n})();function E(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),l=-1!==e.indexOf(n);return t||i||l}class A{constructor(e,t,r,i,l,u,f,m,v,x,D,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=x,this.connectionFactory_=D,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,q)=>{this.resolve_=j,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const l=this.resolve_,u=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function FO(n){return void 0!==n}(m)?l():l(m)}catch(m){u(m)}else if(null!==f){const m=f0();m.serverResponse=f.getErrorText(),u(this.errorCallback_?this.errorCallback_(f,m):m)}else u(i.canceled?this.appDelete_?R1():pE():Wm())};this.canceled_?t(0,new k(!1,null,!0)):this.backoffId_=function NO(n,e,t){let r=1,i=null,l=null,u=!1,f=0;function m(){return 2===f}let v=!1;function x(...ae){v||(v=!0,e.apply(null,ae))}function D(ae){i=setTimeout(()=>{i=null,n(j,m())},ae)}function L(){l&&clearTimeout(l)}function j(ae,...Ue){if(v)return void L();if(ae)return L(),void x.call(null,ae,...Ue);if(m()||u)return L(),void x.call(null,ae,...Ue);let je;r<64&&(r*=2),1===f?(f=2,je=0):je=1e3*(r+Math.random()),D(je)}let q=!1;function ee(ae){q||(q=!0,L(),!v&&(null!==i?(ae||(f=2),clearTimeout(i),D(0)):ae||(f=1)))}return D(0),l=setTimeout(()=>{u=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new k(!1,null,!0));const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===I.NO_ERROR,m=l.getStatus();if(!f||E(m,this.additionalRetryCodes_)&&this.retry){const x=l.getErrorCode()===I.ABORT;return void r(!1,new k(!1,null,x))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new k(v,l))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function RO(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class k{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _t(...n){const e=function Xe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(d())return new Blob(n);throw new nr(Ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Ct={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bn{constructor(e,t){this.data=e,this.contentType=t||null}}function Gn(n,e){switch(n){case Ct.RAW:return new bn(Dc(e));case Ct.BASE64:case Ct.BASE64URL:return new bn(Ym(n,e));case Ct.DATA_URL:return new bn(function m0(n){const e=new Qm(n);return e.base64?Ym(Ct.BASE64,e.rest):function g0(n){let e;try{e=decodeURIComponent(n)}catch{throw Km(Ct.DATA_URL,"Malformed data URL.")}return Dc(e)}(e.rest)}(e),function _0(n){return new Qm(n).contentType}(e))}throw f0()}function Dc(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ym(n,e){switch(n){case Ct.BASE64:{const i=-1!==e.indexOf("-"),l=-1!==e.indexOf("_");if(i||l)throw Km(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ct.BASE64URL:{const i=-1!==e.indexOf("+"),l=-1!==e.indexOf("/");if(i||l)throw Km(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Fe(n){if(typeof atob>"u")throw function PO(n){return new nr(Ln.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Km(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Qm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Km(Ct.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function y0(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class us{constructor(e,t){let r=0,i="";c(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(c(this.data_)){const i=function Ot(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new us(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new us(r,!0)}}static getBlob(...e){if(d()){const t=e.map(r=>r instanceof us?r.data_:r);return new us(_t.apply(null,t))}{const t=e.map(u=>a(u)?Gn(Ct.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)i[l++]=u[f]}),new us(i,!0)}}uploadData(){return this.data_}}function Sp(n){let e;try{e=JSON.parse(n)}catch{return null}return function s(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function VO(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function GV(n,e){return e}class Vo{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||GV}}let mE=null;function C0(){if(mE)return mE;const n=[];n.push(new Vo("bucket")),n.push(new Vo("generation")),n.push(new Vo("metageneration")),n.push(new Vo("name","fullPath",!0));const t=new Vo("name");t.xform=function e(l,u){return function qV(n){return!a(n)||n.length<2?n:VO(n)}(u)},n.push(t);const i=new Vo("size");return i.xform=function r(l,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Vo("timeCreated")),n.push(new Vo("updated")),n.push(new Vo("md5Hash",null,!0)),n.push(new Vo("cacheControl",null,!0)),n.push(new Vo("contentDisposition",null,!0)),n.push(new Vo("contentEncoding",null,!0)),n.push(new Vo("contentLanguage",null,!0)),n.push(new Vo("contentType",null,!0)),n.push(new Vo("metadata","customMetadata",!0)),mE=n,mE}function UO(n,e,t){const r=Sp(e);return null===r?null:function WV(n,e,t){const r={type:"file"},i=t.length;for(let l=0;l<i;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return function zV(n,e){Object.defineProperty(n,"ref",{get:function t(){const l=new Ji(n.bucket,n.fullPath);return e._makeStorageReference(l)}})}(r,n),r}(n,r,t)}function L1(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const l=e[i];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}const BO="prefixes";class Ac{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Sc(n){if(!n)throw f0()}function _E(n,e){return function t(r,i){const l=UO(n,i,e);return Sc(null!==l),l}}function Jm(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function SO(){return new nr(Ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function p0(){return new nr(Ln.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function hE(n){return new nr(Ln.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function fE(n){return new nr(Ln.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function w0(n){const e=Jm(n);return function t(r,i){let l=e(r,i);return 404===r.getStatus()&&(l=function k1(n){return new nr(Ln.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),l.serverResponse=i.serverResponse,l}}function HO(n,e,t){const i=g(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Ac(i,"GET",_E(n,t),u);return f.errorHandler=w0(e),f}function eU(n,e,t,r,i){const l={};l.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(l.delimiter=t),r&&(l.pageToken=r),i&&(l.maxResults=i);const f=g(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,x=new Ac(f,"GET",function JV(n,e){return function t(r,i){const l=function QV(n,e,t){const r=Sp(t);return null===r?null:function YV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[BO])for(const i of t[BO]){const l=i.replace(/\/$/,""),u=n._makeStorageReference(new Ji(e,l));r.prefixes.push(u)}if(t.items)for(const i of t.items){const l=n._makeStorageReference(new Ji(e,i.name));r.items.push(l)}return r}(n,e,r)}(n,e,i);return Sc(null!==l),l}}(n,e.bucket),v);return x.urlParams=l,x.errorHandler=Jm(e),x}function ZO(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function GO(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let je="";for(let Ke=0;Ke<2;Ke++)je+=Math.random().toString().slice(2);return je}();u["Content-Type"]="multipart/related; boundary="+m;const v=ZO(e,r,i),x=L1(v,t),j=us.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+x+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===j)throw gE();const q={name:v.fullPath},ee=g(l,n.host,n._protocol),Ue=n.maxUploadRetryTime,Ge=new Ac(ee,"POST",_E(n,t),Ue);return Ge.urlParams=q,Ge.headers=u,Ge.body=j.uploadData(),Ge.errorHandler=Jm(e),Ge}class yE{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function V1(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Sc(!1)}return Sc(!!t&&-1!==(e||["active"]).indexOf(t)),t}const lU={STATE_CHANGED:"state_changed"},Uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function U1(n){switch(n){case"running":case"pausing":case"canceling":return Uo.RUNNING;case"paused":return Uo.PAUSED;case"success":return Uo.SUCCESS;case"canceled":return Uo.CANCELED;default:return Uo.ERROR}}class cU{constructor(e,t,r){if(function LO(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}function Xm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class dU extends class uU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=I.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=I.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=I.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ap("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const l in i)i.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,i[l].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ap("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ap("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ap("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ap("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function vl(){return new dU}class WO{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=C0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ln.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(E(i.status,[])){if(!l)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=Wm()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ln.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,l)=>{this._resolve=i,this._reject=l,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function oU(n,e,t,r,i){const l=e.bucketOnlyServerUrl(),u=ZO(e,r,i),f={name:u.fullPath},m=g(l,n.host,n._protocol),x={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=L1(u,t),q=new Ac(m,"POST",function j(ee){let ae;V1(ee);try{ae=ee.getResponseHeader("X-Goog-Upload-URL")}catch{Sc(!1)}return Sc(a(ae)),ae},n.maxUploadRetryTime);return q.urlParams=f,q.headers=x,q.body=D,q.errorHandler=Jm(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vl,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function sU(n,e,t,r){const m=new Ac(t,"POST",function l(v){const x=V1(v,["active","final"]);let D=null;try{D=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sc(!1)}D||Sc(!1);const L=Number(D);return Sc(!isNaN(L)),new yE(L,r.size(),"final"===x)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Jm(e),m}(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(i,vl,t,r);this._request=l,l.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new yE(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,l)=>{let u;try{u=function aU(n,e,t,r,i,l,u,f){const m=new yE(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function O1(){return new nr(Ln.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let x=v;i>0&&(x=Math.min(x,i));const D=m.current;let j="";j=0===x?"finalize":v===x?"upload, finalize":"upload";const q={"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":`${m.current}`},ee=r.slice(D,D+x);if(null===ee)throw gE();const je=new Ac(t,"POST",function ae(Ke,Ut){const Bt=V1(Ke,["active","final"]),wn=m.current+x,Sr=r.size();let bo;return bo="final"===Bt?_E(e,l)(Ke,Ut):null,new yE(wn,Sr,"final"===Bt,bo)},e.maxUploadRetryTime);return je.headers=q,je.body=ee.uploadData(),je.progressCallback=f||null,je.errorHandler=Jm(n),je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(u,vl,i,l,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=HO(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vl,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=GO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vl,e,t);this._request=i,i.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=pE(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=U1(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const l=new cU(t||void 0,r||void 0,i||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(U1(this._state)){case Uo.SUCCESS:Xm(this._resolve.bind(null,this.snapshot))();break;case Uo.CANCELED:case Uo.ERROR:Xm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(U1(this._state)){case Uo.RUNNING:case Uo.PAUSED:e.next&&Xm(e.next.bind(e,this.snapshot))();break;case Uo.SUCCESS:e.complete&&Xm(e.complete.bind(e))();break;default:e.error&&Xm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Mp{constructor(e,t){this._service=e,this._location=t instanceof Ji?t:Ji.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Mp(e,t)}get root(){const e=new Ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VO(this._location.path)}get storage(){return this._service}get parent(){const e=function v0(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ji(this._location.bucket,e);return new Mp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw F1(e)}}function YO(n,e,t){return B1.apply(this,arguments)}function B1(){return(B1=(0,te.Z)(function*(n,e,t){const i=yield QO(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield YO(n,e,i.nextPageToken))})).apply(this,arguments)}function QO(n,e){null!=e&&"number"==typeof e.maxResults&&h("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eU(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,vl)}function IU(n){n._throwIfRoot("getDownloadURL");const e=function tU(n,e,t){const i=g(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,f=new Ac(i,"GET",function XV(n,e){return function t(r,i){const l=UO(n,i,e);return Sc(null!==l),function KV(n,e,t,r){const i=Sp(e);if(null===i||!a(i.downloadTokens))return null;const l=i.downloadTokens;if(0===l.length)return null;const u=encodeURIComponent;return l.split(",").map(v=>{const D=n.fullPath;return g("/b/"+u(n.bucket)+"/o/"+u(D),t,r)+y({alt:"media",token:v})})[0]}(l,i,n.host,n._protocol)}}(n,t),u);return f.errorHandler=w0(e),f}(n.storage,n._location,C0());return n.storage.makeRequestWithTokens(e,vl).then(t=>{if(null===t)throw function N1(){return new nr(Ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function JO(n,e){const t=function ZV(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ji(n._location.bucket,t);return new Mp(n.storage,r)}function XO(n,e){if(n instanceof j1){const t=n;if(null==t._bucket)throw function kO(){return new nr(Ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+dE+"' property when initializing the app?")}();const r=new Mp(t,t._bucket);return null!=e?XO(r,e):r}return void 0!==e?JO(n,e):n}function DU(n,e){if(e&&function TU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof j1)return function xU(n,e){return new Mp(n,e)}(n,e);throw Dp("To use ref(service, url), the first argument must be a Storage instance.")}return XO(n,e)}function eN(n,e){const t=e?.[dE];return null==t?null:Ji.makeFromBucketSpec(t,n)}class j1{constructor(e,t,r,i,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=l,this._bucket=null,this._host=h0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ji.makeFromBucketSpec(i,this._host):eN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ji.makeFromBucketSpec(this._url,e):eN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){h("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){h("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mp(this,e)}_makeRequest(e,t,r,i,l=!0){if(this._deleted)return new OO(R1());{const u=function He(n,e,t,r,i,l,u=!0){const f=y(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function re(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function B(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function K(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,l),function Te(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new A(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,te.Z)(function*(){const[i,l]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,l).getPromise()})()}}const tN="@firebase/storage",rN="storage";function SU(n,e,t){return function KO(n,e,t){n._throwIfRoot("uploadBytes");const r=GO(n.storage,n._location,C0(),new us(e,!0),t);return n.storage.makeRequestWithTokens(r,vl).then(i=>({metadata:i,ref:n}))}(n=(0,Zt.m9)(n),e,t)}function iN(n){return function CU(n){const e={prefixes:[],items:[]};return YO(n,e).then(()=>e)}(n=(0,Zt.m9)(n))}function oN(n){return IU(n=(0,Zt.m9)(n))}function H1(n,e){return DU(n=(0,Zt.m9)(n),e)}function FU(n=(0,Lo.getApp)(),e){n=(0,Zt.m9)(n);const r=(0,Lo._getProvider)(n,rN).getImmediate({identifier:e}),i=(0,Zt.P0)("storage");return i&&sN(r,...i),r}function sN(n,e,t,r={}){!function AU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Zt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function LU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new j1(t,r,i,e,Lo.SDK_VERSION)}!function VU(){(0,Lo._registerComponent)(new td.wA(rN,LU,"PUBLIC").setMultipleInstances(!0)),(0,Lo.registerVersion)(tN,"0.11.2",""),(0,Lo.registerVersion)(tN,"0.11.2","esm2017")}();class e_{constructor(e){return e}}const aN="storage",$1=new o.OlP("angularfire2.storage-instances");function jU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new e_(r)}}const HU={provide:class UU{constructor(){return(0,un.vb)(aN)}},deps:[[new o.FiY,$1]]},$U={provide:e_,useFactory:function BU(n,e){const t=(0,un.JM)(aN,n,e);return t&&new e_(t)},deps:[[new o.FiY,$1],Ic]};let ZU=(()=>{class n{constructor(){(0,bc.KN)("angularfire",un.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[$U,HU]}),n})();function GU(n,...e){return{ngModule:ZU,providers:[{provide:$1,useFactory:jU(n),multi:!0,deps:[o.R0b,o.zs3,un.HU,Ev,[new o.FiY,o0],[new o.FiY,xp],...e]}]}}const qU=(0,un.u3)(oN,!0),zU=(0,un.u3)(FU,!0),WU=(0,un.u3)(iN,!0),lN=(0,un.u3)(H1,!0),KU=(0,un.u3)(SU,!0);var cN=U(4986);function Z1(){return(0,ri.e)((n,e)=>{let t,r=!1;n.subscribe((0,Zn.x)(e,i=>{const l=t;t=i,r&&e.next([l,i]),r=!0}))})}function QU(n,e){return n===e}U(9568);var st,uN=U(3942),JU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cl={},G1=G1||{},Yt=JU||self;function vE(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function b0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var q1="closure_uid_"+(1e9*Math.random()>>>0),e3=0;function t3(n,e,t){return n.call.apply(n.bind,arguments)}function n3(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function _o(n,e,t){return(_o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t3:n3).apply(null,arguments)}function CE(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ri(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,l){for(var u=Array(arguments.length-2),f=2;f<arguments.length;f++)u[f-2]=arguments[f];return e.prototype[i].apply(r,u)}}function Mh(){this.s=this.s,this.o=this.o}Mh.prototype.s=!1,Mh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function XU(n){Object.prototype.hasOwnProperty.call(n,q1)&&n[q1]||(n[q1]=++e3)}(this)},Mh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const dN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function z1(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hN(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(vE(r)){const i=n.length||0,l=r.length||0;n.length=i+l;for(let u=0;u<l;u++)n[i+u]=r[u]}else n.push(r)}}function yo(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yo.prototype.h=function(){this.defaultPrevented=!0};var i3=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",()=>{},e),Yt.removeEventListener("test",()=>{},e)}catch{}return n}();function I0(n){return/^[\s\xa0]*$/.test(n)}function wE(){var n=Yt.navigator;return n&&(n=n.userAgent)?n:""}function Mc(n){return-1!=wE().indexOf(n)}function W1(n){return W1[" "](n),n}W1[" "]=function(){};var Y1,n,s3=Mc("Opera"),t_=Mc("Trident")||Mc("MSIE"),fN=Mc("Edge"),K1=fN||t_,pN=Mc("Gecko")&&!(-1!=wE().toLowerCase().indexOf("webkit")&&!Mc("Edge"))&&!(Mc("Trident")||Mc("MSIE"))&&!Mc("Edge"),a3=-1!=wE().toLowerCase().indexOf("webkit")&&!Mc("Edge");function gN(){var n=Yt.document;return n?n.documentMode:void 0}e:{var Q1="",J1=(n=wE(),pN?/rv:([^\);]+)(\)|;)/.exec(n):fN?/Edge\/([\d\.]+)/.exec(n):t_?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):a3?/WebKit\/(\S+)/.exec(n):s3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(J1&&(Q1=J1?J1[1]:""),t_){var X1=gN();if(null!=X1&&X1>parseFloat(Q1)){Y1=String(X1);break e}}Y1=Q1}var l3=Yt.document&&t_&&(gN()||parseInt(Y1,10))||void 0;function E0(n,e){if(yo.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(pN){e:{try{W1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:c3[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&E0.$.h.call(this)}}Ri(E0,yo);var c3={2:"touch",3:"pen",4:"mouse"};E0.prototype.h=function(){E0.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var T0="closure_listenable_"+(1e6*Math.random()|0),u3=0;function d3(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++u3,this.fa=this.ia=!1}function bE(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function tS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function _N(n){const e={};for(const t in n)e[t]=n[t];return e}const yN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vN(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let l=0;l<yN.length;l++)t=yN[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function IE(n){this.src=n,this.g={},this.h=0}function nS(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],i=dN(r,e);(l=0<=i)&&Array.prototype.splice.call(r,i,1),l&&(bE(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function rS(n,e,t,r){for(var i=0;i<n.length;++i){var l=n[i];if(!l.fa&&l.listener==e&&l.capture==!!t&&l.la==r)return i}return-1}IE.prototype.add=function(n,e,t,r,i){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var u=rS(n,e,r,i);return-1<u?(e=n[u],t||(e.ia=!1)):((e=new d3(e,this.src,l,!!r,i)).ia=t,n.push(e)),e};var iS="closure_lm_"+(1e6*Math.random()|0),oS={};function CN(n,e,t,r,i){if(r&&r.once)return bN(n,e,t,r,i);if(Array.isArray(e)){for(var l=0;l<e.length;l++)CN(n,e[l],t,r,i);return null}return t=cS(t),n&&n[T0]?n.O(e,t,b0(r)?!!r.capture:!!r,i):wN(n,e,t,!1,r,i)}function wN(n,e,t,r,i,l){if(!e)throw Error("Invalid event type");var u=b0(i)?!!i.capture:!!i,f=aS(n);if(f||(n[iS]=f=new IE(n)),(t=f.add(e,t,r,u,l)).proxy)return t;if(r=function f3(){const e=p3;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)i3||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(EN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function bN(n,e,t,r,i){if(Array.isArray(e)){for(var l=0;l<e.length;l++)bN(n,e[l],t,r,i);return null}return t=cS(t),n&&n[T0]?n.P(e,t,b0(r)?!!r.capture:!!r,i):wN(n,e,t,!0,r,i)}function IN(n,e,t,r,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)IN(n,e[l],t,r,i);else r=b0(r)?!!r.capture:!!r,t=cS(t),n&&n[T0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=rS(l=n.g[e],t,r,i))&&(bE(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=aS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=rS(e,t,r,i)),(t=-1<n?e[n]:null)&&sS(t))}function sS(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[T0])nS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(EN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=aS(e))?(nS(t,n),0==t.h&&(t.src=null,e[iS]=null)):bE(n)}}}function EN(n){return n in oS?oS[n]:oS[n]="on"+n}function p3(n,e){if(n.fa)n=!0;else{e=new E0(e,this);var t=n.listener,r=n.la||n.src;n.ia&&sS(n),n=t.call(r,e)}return n}function aS(n){return(n=n[iS])instanceof IE?n:null}var lS="__closure_events_fn_"+(1e9*Math.random()>>>0);function cS(n){return"function"==typeof n?n:(n[lS]||(n[lS]=function(e){return n.handleEvent(e)}),n[lS])}function Fi(){Mh.call(this),this.i=new IE(this),this.S=this,this.J=null}function Xi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new yo(e,n);else if(e instanceof yo)e.target=e.target||n;else{var i=e;vN(e=new yo(r,n),i)}if(i=!0,t)for(var l=t.length-1;0<=l;l--){var u=e.g=t[l];i=EE(u,r,!0,e)&&i}if(i=EE(u=e.g=n,r,!0,e)&&i,i=EE(u,r,!1,e)&&i,t)for(l=0;l<t.length;l++)i=EE(u=e.g=t[l],r,!1,e)&&i}function EE(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,l=0;l<e.length;++l){var u=e[l];if(u&&!u.fa&&u.capture==t){var f=u.listener,m=u.la||u.src;u.ia&&nS(n.i,u),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}Ri(Fi,Mh),Fi.prototype[T0]=!0,Fi.prototype.removeEventListener=function(n,e,t,r){IN(this,n,e,t,r)},Fi.prototype.N=function(){if(Fi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)bE(t[r]);delete n.g[e],n.h--}}this.J=null},Fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Fi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var uS=Yt.JSON.stringify;function m3(){var n=dS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var TN=new class g3{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y3,n=>n.reset());class y3{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function v3(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function C3(n){Yt.setTimeout(()=>{throw n},0)}let x0,D0=!1,dS=new class _3{constructor(){this.h=this.g=null}add(e,t){const r=TN.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},xN=()=>{const n=Yt.Promise.resolve(void 0);x0=()=>{n.then(w3)}};var w3=()=>{for(var n;n=m3();){try{n.h.call(n.g)}catch(t){C3(t)}var e=TN;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}D0=!1};function TE(n,e){Fi.call(this),this.h=n||1,this.g=e||Yt,this.j=_o(this.qb,this),this.l=Date.now()}function hS(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function fS(n,e,t){if("function"==typeof n)t&&(n=_o(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=_o(n.handleEvent,n)}return 2147483647<Number(e)?-1:Yt.setTimeout(n,e||0)}function DN(n){n.g=fS(()=>{n.g=null,n.i&&(n.i=!1,DN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ri(TE,Fi),(st=TE.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Xi(this,"tick"),this.ga&&(hS(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){TE.$.N.call(this),hS(this),delete this.g};class b3 extends Mh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:DN(this)}N(){super.N(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function A0(n){Mh.call(this),this.h=n,this.g={}}Ri(A0,Mh);var AN=[];function SN(n,e,t,r){Array.isArray(t)||(t&&(AN[0]=t.toString()),t=AN);for(var i=0;i<t.length;i++){var l=CN(e,t[i],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function MN(n){tS(n.g,function(e,t){this.g.hasOwnProperty(t)&&sS(e)},n),n.g={}}function xE(){this.g=!0}function n_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function x3(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var l=i[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var u=1;u<i.length;u++)i[u]=""}}}return uS(t)}catch{return e}}(n,t)+(r?" "+r:"")})}A0.prototype.N=function(){A0.$.N.call(this),MN(this)},A0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xE.prototype.Ea=function(){this.g=!1},xE.prototype.info=function(){};var kp={},kN=null;function DE(){return kN=kN||new Fi}function PN(n){yo.call(this,kp.Ta,n)}function S0(n){const e=DE();Xi(e,new PN(e))}function ON(n,e){yo.call(this,kp.STAT_EVENT,n),this.stat=e}function Bo(n){const e=DE();Xi(e,new ON(e,n))}function NN(n,e){yo.call(this,kp.Ua,n),this.size=e}function M0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},e)}kp.Ta="serverreachability",Ri(PN,yo),kp.STAT_EVENT="statevent",Ri(ON,yo),kp.Ua="timingevent",Ri(NN,yo);var AE={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pS(){}function LN(){}pS.prototype.h=null;var _S,k0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gS(){yo.call(this,"d")}function mS(){yo.call(this,"c")}function SE(){}function P0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new A0(this),this.P=D3,this.V=new TE(n=K1?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new VN}function VN(){this.i=null,this.g="",this.h=!1}Ri(gS,yo),Ri(mS,yo),Ri(SE,pS),SE.prototype.g=function(){return new XMLHttpRequest},SE.prototype.i=function(){return{}},_S=new SE;var D3=45e3,yS={},ME={};function vS(n,e,t){n.L=1,n.v=NE(id(e)),n.s=t,n.S=!0,UN(n,null)}function UN(n,e){n.G=Date.now(),O0(n),n.A=id(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),KN(t.i,"t",r),n.C=0,t=n.l.J,n.h=new VN,n.g=vR(n.l,t?e:null,!n.s),0<n.O&&(n.M=new b3(_o(n.Pa,n,n.g),n.O)),SN(n.U,n.g,"readystatechange",n.nb),e=n.I?_N(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),S0(),function I3(n,e,t,r,i,l){n.info(function(){if(n.g)if(l)for(var u="",f=l.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var x=v[0];v=v[1];var D=x.split("_");u=2<=D.length&&"type"==D[1]?u+(x+"=")+v+"&":u+(x+"=redacted&")}}else u=null;else u=l;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.W,n.s)}function BN(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function jN(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=A3(n,t),i==ME){4==e&&(n.o=4,Bo(14),r=!1),n_(n.j,n.m,null,"[Incomplete Response]");break}if(i==yS){n.o=4,Bo(15),n_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}n_(n.j,n.m,i,null),CS(n,i)}BN(n)&&i!=ME&&i!=yS&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Bo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),DS(e),e.M=!0,Bo(11))):(n_(n.j,n.m,t,"[Invalid Chunked Response]"),Pp(n),N0(n))}function A3(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ME:(t=Number(e.substring(t,r)),isNaN(t)?yS:(r+=1)+t>e.length?ME:(e=e.slice(r,r+t),n.C=r+t,e))}function O0(n){n.Y=Date.now()+n.P,HN(n,n.P)}function HN(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=M0(_o(n.lb,n),e)}function kE(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function N0(n){0==n.l.H||n.J||gR(n.l,n)}function Pp(n){kE(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,hS(n.V),MN(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function CS(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||wS(t.i,n)))if(!n.K&&wS(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;BE(t),VE(t)}xS(t),Bo(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=M0(_o(t.ib,t),6e3));if(1>=JN(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Np(t,11)}else if((n.K||t.g==n)&&BE(t),!I0(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.V=v[0],v=v[1],2==t.H)if("c"==v[0]){t.K=v[1],t.pa=v[2];const x=v[3];null!=x&&(t.ra=x,t.l.info("VER="+t.ra));const D=v[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const L=v[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const q=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var l=r.i;l.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(l.j=l.l,l.g=new Set,l.h&&(bS(l,l.h),l.h=null))}if(r.F){const ee=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.Da=ee,ur(r.I,r.F,ee))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var u=n;if((r=t).wa=yR(r,r.J?r.pa:null,r.Y),u.K){XN(r.i,u);var f=u,m=r.L;m&&f.setTimeout(m),f.B&&(kE(f),O0(f)),r.g=u}else fR(r);0<t.j.length&&UE(t)}else"stop"!=v[0]&&"close"!=v[0]||Np(t,7);else 3==t.H&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Np(t,7):TS(t):"noop"!=v[0]&&t.h&&t.h.Aa(v),t.A=0)}S0()}catch{}}function $N(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(vE(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function M3(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(vE(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function S3(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(vE(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,l=0;l<i;l++)e.call(void 0,r[l],t&&t[l],n)}(st=P0.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==kc(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const x=kc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>x)&&(3!=x||K1||this.g&&(this.h.h||this.g.ja()||aR(this.g)))){this.J||4!=x||7==e||S0(),kE(this);var t=this.g.da();this.ca=t;t:if(BN(this)){var r=aR(this.g);n="";var i=r.length,l=4==kc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pp(this),N0(this);var u="";break t}this.h.i=new Yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==t,function E3(n,e,t,r,i,l,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+l+" "+u})}(this.j,this.u,this.A,this.m,this.W,x,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I0(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Bo(12),Pp(this),N0(this);break e}n_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,CS(this,t)}this.S?(jN(this,x,u),K1&&this.i&&3==x&&(SN(this.U,this.V,"tick",this.mb),this.V.start())):(n_(this.j,this.m,u,null),CS(this,u)),4==x&&Pp(this),this.i&&!this.J&&(4==x?gR(this.l,this):(this.i=!1,O0(this)))}else(function W3(n){const e={};n=(n.g&&2<=kc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(I0(n[r]))continue;var t=v3(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const l=e[i]||[];e[i]=l,l.push(t)}!function h3(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Bo(12)):(this.o=0,Bo(13)),Pp(this),N0(this)}}}catch{}},st.mb=function(){if(this.g){var n=kc(this.g),e=this.g.ja();this.C<e.length&&(kE(this),jN(this,n,e),this.i&&4!=n&&O0(this))}},st.cancel=function(){this.J=!0,Pp(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function T3(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(S0(),Bo(17)),Pp(this),this.o=2,N0(this)):HN(this,this.Y-n)};var ZN=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Op(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Op){this.h=n.h,PE(this,n.j),this.s=n.s,this.g=n.g,OE(this,n.m),this.l=n.l;var e=n.i,t=new L0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),GN(this,t),this.o=n.o}else n&&(e=String(n).match(ZN))?(this.h=!1,PE(this,e[1]||"",!0),this.s=R0(e[2]||""),this.g=R0(e[3]||"",!0),OE(this,e[4]),this.l=R0(e[5]||"",!0),GN(this,e[6]||"",!0),this.o=R0(e[7]||"")):(this.h=!1,this.i=new L0(null,this.h))}function id(n){return new Op(n)}function PE(n,e,t){n.j=t?R0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function OE(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function GN(n,e,t){e instanceof L0?(n.i=e,function L3(n,e){e&&!n.j&&(kh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zN(this,r),KN(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=F0(e,R3)),n.i=new L0(e,n.h))}function ur(n,e,t){n.i.set(e,t)}function NE(n){return ur(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function R0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function F0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,P3),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function P3(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Op.prototype.toString=function(){var n=[],e=this.j;e&&n.push(F0(e,qN,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(F0(e,qN,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(F0(t,"/"==t.charAt(0)?N3:O3,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",F0(t,F3)),n.join("")};var qN=/[#\/\?@]/g,O3=/[#\?:]/g,N3=/[#\?]/g,R3=/[#\?@]/g,F3=/#/g;function L0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function kh(n){n.g||(n.g=new Map,n.h=0,n.i&&function k3(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var l=n[t].substring(0,r);i=n[t].substring(r+1)}else l=n[t];e(l,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zN(n,e){kh(n),e=r_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function WN(n,e){return kh(n),e=r_(n,e),n.g.has(e)}function KN(n,e,t){zN(n,e),0<t.length&&(n.i=null,n.g.set(r_(n,e),z1(t)),n.h+=t.length)}function r_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function YN(n){this.l=n||U3,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ka&&Yt.g.Ka()&&Yt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=L0.prototype).add=function(n,e){kh(this),this.i=null,n=r_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){kh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.ta=function(){kh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let l=0;l<i.length;l++)t.push(e[r])}return t},st.Z=function(n){kh(this);let e=[];if("string"==typeof n)WN(this,n)&&(e=e.concat(this.g.get(r_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return kh(this),this.i=null,WN(this,n=r_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const l=encodeURIComponent(String(r)),u=this.Z(r);for(r=0;r<u.length;r++){var i=l;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var U3=10;function QN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function JN(n){return n.h?1:n.g?n.g.size:0}function wS(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function bS(n,e){n.g?n.g.add(e):n.h=e}function XN(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function eR(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return z1(n.i)}function j3(){this.g=new class{stringify(n){return Yt.JSON.stringify(n,void 0)}parse(n){return Yt.JSON.parse(n,void 0)}}}function H3(n,e,t){const r=t||"";try{$N(n,function(i,l){let u=i;b0(i)&&(u=uS(i)),e.push(r+l+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function RE(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function V0(n){this.l=n.fc||null,this.j=n.ob||!1}function FE(n,e){Fi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=IS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}YN.prototype.cancel=function(){if(this.i=eR(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Ri(V0,pS),V0.prototype.g=function(){return new FE(this.l,this.j)},V0.prototype.i=function(n){return function(){return n}}({}),Ri(FE,Fi);var IS=0;function tR(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function U0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,B0(n)}function B0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=FE.prototype).open=function(n,e){if(this.readyState!=IS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,B0(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,U0(this)),this.readyState=IS},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,B0(this)),this.g&&(this.readyState=3,B0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tR(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?U0(this):B0(this),3==this.readyState&&tR(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,U0(this))},st.Ya=function(n){this.g&&(this.response=n,U0(this))},st.ka=function(){this.g&&U0(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(FE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Z3=Yt.JSON.parse;function Vr(n){Fi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=nR,this.L=this.M=!1}Ri(Vr,Fi);var nR="",G3=/^https?$/i,q3=["POST","PUT"];function rR(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,iR(n),LE(n)}function iR(n){n.F||(n.F=!0,Xi(n,"complete"),Xi(n,"error"))}function oR(n){if(n.h&&typeof G1<"u"&&(!n.C[1]||4!=kc(n)||2!=n.da()))if(n.v&&4==kc(n))fS(n.La,0,n);else if(Xi(n,"readystatechange"),4==kc(n)){n.h=!1;try{const u=n.da();e:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===u){var i=String(n.I).match(ZN)[1]||null;!i&&Yt.self&&Yt.self.location&&(i=Yt.self.location.protocol.slice(0,-1)),r=!G3.test(i?i.toLowerCase():"")}t=r}if(t)Xi(n,"complete"),Xi(n,"success");else{n.m=6;try{var l=2<kc(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",iR(n)}}finally{LE(n)}}}function LE(n,e){if(n.g){sR(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Xi(n,"ready");try{t.onreadystatechange=r}catch{}}}function sR(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function kc(n){return n.g?n.g.readyState:0}function aR(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case nR:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function lR(n){let e="";return tS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function ES(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=lR(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ur(n,e,t))}function j0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cR(n){this.Ga=0,this.j=[],this.l=new xE,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=j0("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=j0("baseRetryDelayMs",5e3,n),this.hb=j0("retryDelaySeedMs",1e4,n),this.eb=j0("forwardChannelMaxRetries",2,n),this.xa=j0("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new YN(n&&n.concurrentRequestLimit),this.Ja=new j3,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function TS(n){if(uR(n),3==n.H){var e=n.W++,t=id(n.I);if(ur(t,"SID",n.K),ur(t,"RID",e),ur(t,"TYPE","terminate"),H0(n,t),(e=new P0(n,n.l,e)).L=2,e.v=NE(id(t)),t=!1,Yt.navigator&&Yt.navigator.sendBeacon)try{t=Yt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vR(e.l,null),e.g.ha(e.v)),e.G=Date.now(),O0(e)}_R(n)}function VE(n){n.g&&(DS(n),n.g.cancel(),n.g=null)}function uR(n){VE(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),BE(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function UE(n){if(!QN(n.i)&&!n.m){n.m=!0;var e=n.Na;x0||xN(),D0||(x0(),D0=!0),dS.add(e,n),n.C=0}}function dR(n,e){var t;t=e?e.m:n.W++;const r=id(n.I);ur(r,"SID",n.K),ur(r,"RID",t),ur(r,"AID",n.V),H0(n,r),n.o&&n.s&&ES(r,n.o,n.s),t=new P0(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=hR(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),bS(n.i,t),vS(t,r,e)}function H0(n,e){n.na&&tS(n.na,function(t,r){ur(e,r,t)}),n.h&&$N({},function(t,r){ur(e,r,t)})}function hR(n,e,t){t=Math.min(n.j.length,t);var r=n.h?_o(n.h.Va,n.h,n):null;e:{var i=n.j;let l=-1;for(;;){const u=["count="+t];-1==l?0<t?(l=i[0].g,u.push("ofs="+l)):l=0:u.push("ofs="+l);let f=!0;for(let m=0;m<t;m++){let v=i[m].g;const x=i[m].map;if(v-=l,0>v)l=Math.max(0,i[m].g-100),f=!1;else try{H3(x,u,"req"+v+"_")}catch{r&&r(x)}}if(f){r=u.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function fR(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;x0||xN(),D0||(x0(),D0=!0),dS.add(e,n),n.A=0}}function xS(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=M0(_o(n.Ma,n),mR(n,n.A)),n.A++,0))}function DS(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function pR(n){n.g=new P0(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=id(n.wa);ur(e,"RID","rpc"),ur(e,"SID",n.K),ur(e,"AID",n.V),ur(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&ur(e,"TO",n.qa),ur(e,"TYPE","xmlhttp"),H0(n,e),n.o&&n.s&&ES(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=NE(id(e)),t.s=null,t.S=!0,UN(t,n)}function BE(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function gR(n,e){var t=null;if(n.g==e){BE(n),DS(n),n.g=null;var r=2}else{if(!wS(n.i,e))return;t=e.F,XN(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Xi(r=DE(),new NN(r,t)),UE(n)}else fR(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function K3(n,e){return!(JN(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=M0(_o(n.Na,n,e),mR(n,n.C)),n.C++,0)))}(n,e)||2==r&&xS(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Np(n,5);break;case 4:Np(n,10);break;case 3:Np(n,6);break;default:Np(n,2)}}function mR(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Np(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=_o(n.pb,n);t||(t=new Op("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||PE(t,"https"),NE(t)),function $3(n,e){const t=new xE;if(Yt.Image){const r=new Image;r.onload=CE(RE,t,r,"TestLoadImage: loaded",!0,e),r.onerror=CE(RE,t,r,"TestLoadImage: error",!1,e),r.onabort=CE(RE,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=CE(RE,t,r,"TestLoadImage: timeout",!1,e),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Bo(2);n.H=0,n.h&&n.h.za(e),_R(n),uR(n)}function _R(n){if(n.H=0,n.ma=[],n.h){const e=eR(n.i);(0!=e.length||0!=n.j.length)&&(hN(n.ma,e),hN(n.ma,n.j),n.i.i.length=0,z1(n.j),n.j.length=0),n.h.ya()}}function yR(n,e,t){var r=t instanceof Op?id(t):new Op(t);if(""!=r.g)e&&(r.g=e+"."+r.g),OE(r,r.m);else{var i=Yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var l=new Op(null);r&&PE(l,r),e&&(l.g=e),i&&OE(l,i),t&&(l.l=t),r=l}return e=n.Da,(t=n.F)&&e&&ur(r,t,e),ur(r,"VER",n.ra),H0(n,r),r}function vR(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t&&n.Ha&&!n.va?new V0({ob:!0}):n.va)).Oa(n.J),e}function CR(){}function jE(){if(t_&&!(10<=Number(l3)))throw Error("Environmental error: no available transport.")}function Vs(n,e){Fi.call(this),this.g=new cR(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!I0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!I0(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new i_(this)}function wR(n){gS.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function bR(){mS.call(this),this.status=1}function i_(n){this.g=n}function wl(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function AS(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var l=n.g[3],u=(e=n.g[0])+(l^(t=n.g[1])&((i=n.g[2])^l))+r[0]+3614090360&4294967295;u=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=(t=(i=(l=(e=t+(u<<7&4294967295|u>>>25))+((u=l+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^l&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(l^e))+r[3]+3250441966&4294967295)<<22&4294967295|u>>>10))+((u=e+(l^t&(i^l))+r[4]+4118548399&4294967295)<<7&4294967295|u>>>25))+((u=l+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^l&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(l^e))+r[7]+4249261313&4294967295)<<22&4294967295|u>>>10))+((u=e+(l^t&(i^l))+r[8]+1770035416&4294967295)<<7&4294967295|u>>>25))+((u=l+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^l&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(l^e))+r[11]+2304563134&4294967295)<<22&4294967295|u>>>10))+((u=e+(l^t&(i^l))+r[12]+1804603682&4294967295)<<7&4294967295|u>>>25))+((u=l+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|u>>>20))+((u=i+(t^l&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|u>>>15))+((u=t+(e^i&(l^e))+r[15]+1236535329&4294967295)<<22&4294967295|u>>>10))+((u=e+(i^l&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|u>>>27))+((u=l+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(l^e))+r[11]+643717713&4294967295)<<14&4294967295|u>>>18))+((u=t+(l^e&(i^l))+r[0]+3921069994&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^l&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|u>>>27))+((u=l+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(l^e))+r[15]+3634488961&4294967295)<<14&4294967295|u>>>18))+((u=t+(l^e&(i^l))+r[4]+3889429448&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^l&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|u>>>27))+((u=l+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(l^e))+r[3]+4107603335&4294967295)<<14&4294967295|u>>>18))+((u=t+(l^e&(i^l))+r[8]+1163531501&4294967295)<<20&4294967295|u>>>12))+((u=e+(i^l&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|u>>>27))+((u=l+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|u>>>23))+((u=i+(e^t&(l^e))+r[7]+1735328473&4294967295)<<14&4294967295|u>>>18))+((u=t+(l^e&(i^l))+r[12]+2368359562&4294967295)<<20&4294967295|u>>>12))+((u=e+(t^i^l)+r[5]+4294588738&4294967295)<<4&4294967295|u>>>28))+((u=l+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|u>>>21))+((u=i+(l^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^l^e)+r[14]+4259657740&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^l)+r[1]+2763975236&4294967295)<<4&4294967295|u>>>28))+((u=l+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|u>>>21))+((u=i+(l^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^l^e)+r[10]+3200236656&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^l)+r[13]+681279174&4294967295)<<4&4294967295|u>>>28))+((u=l+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|u>>>21))+((u=i+(l^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^l^e)+r[6]+76029189&4294967295)<<23&4294967295|u>>>9))+((u=e+(t^i^l)+r[9]+3654602809&4294967295)<<4&4294967295|u>>>28))+((u=l+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|u>>>21))+((u=i+(l^e^t)+r[15]+530742520&4294967295)<<16&4294967295|u>>>16))+((u=t+(i^l^e)+r[2]+3299628645&4294967295)<<23&4294967295|u>>>9))+((u=e+(i^(t|~l))+r[0]+4096336452&4294967295)<<6&4294967295|u>>>26))+((u=l+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(l|~t))+r[14]+2878612391&4294967295)<<15&4294967295|u>>>17))+((u=t+(l^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~l))+r[12]+1700485571&4294967295)<<6&4294967295|u>>>26))+((u=l+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(l|~t))+r[10]+4293915773&4294967295)<<15&4294967295|u>>>17))+((u=t+(l^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|u>>>11))+((u=e+(i^(t|~l))+r[8]+1873313359&4294967295)<<6&4294967295|u>>>26))+((u=l+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|u>>>22))+((u=i+(e^(l|~t))+r[6]+2734768916&4294967295)<<15&4294967295|u>>>17))+((u=t+(l^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|u>>>11))+((l=(e=t+((u=e+(i^(t|~l))+r[4]+4149444226&4294967295)<<6&4294967295|u>>>26))+((u=l+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|u>>>22))^((i=l+((u=i+(e^(l|~t))+r[2]+718787259&4294967295)<<15&4294967295|u>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(u<<21&4294967295|u>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+l&4294967295}function Vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var l=0|n[i];r&&l==e||(t[i]=l,r=!1)}this.g=t}(st=Vr.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_S.g(),this.C=function FN(n){return n.h||(n.h=n.i())}(this.u?this.u:_S),this.g.onreadystatechange=_o(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(l){return void rR(this,l)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const l of r.keys())t.set(l,r.get(l))}r=Array.from(t.keys()).find(l=>"content-type"==l.toLowerCase()),i=Yt.FormData&&n instanceof Yt.FormData,!(0<=dN(q3,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[l,u]of t)this.g.setRequestHeader(l,u);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{sR(this),0<this.B&&((this.L=function z3(n){return t_&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_o(this.ua,this)):this.A=fS(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){rR(this,l)}},st.ua=function(){typeof G1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Xi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Xi(this,"complete"),Xi(this,"abort"),LE(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),LE(this,!0)),Vr.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?oR(this):this.kb())},st.kb=function(){oR(this)},st.isActive=function(){return!!this.g},st.da=function(){try{return 2<kc(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Z3(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=cR.prototype).ra=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new P0(this,this.l,n);let l=this.s;if(this.U&&(l?(l=_N(l),vN(l,this.U)):l=this.U),null!==this.o||this.O||(i.I=l,l=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=hR(this,i,e),ur(t=id(this.I),"RID",n),ur(t,"CVER",22),this.F&&ur(t,"X-HTTP-Session-Id",this.F),H0(this,t),l&&(this.O?e="headers="+encodeURIComponent(String(lR(l)))+"&"+e:this.o&&ES(t,this.o,l)),bS(this.i,i),this.bb&&ur(t,"TYPE","init"),this.P?(ur(t,"$req",e),ur(t,"SID","null"),i.aa=!0,vS(i,t,null)):vS(i,t,e),this.H=2}}else 3==this.H&&(n?dR(this,n):0==this.j.length||QN(this.i)||dR(this))},st.Ma=function(){if(this.u=null,pR(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=M0(_o(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Bo(10),VE(this),pR(this))},st.ib=function(){null!=this.v&&(this.v=null,VE(this),xS(this),Bo(19))},st.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Bo(2)):(this.l.info("Failed to ping google.com"),Bo(1))},st.isActive=function(){return!!this.h&&this.h.isActive(this)},(st=CR.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.isActive=function(){return!0},st.Va=function(){},jE.prototype.g=function(n,e){return new Vs(n,e)},Ri(Vs,Fi),Vs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Bo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=yR(n,null,n.Y),UE(n)},Vs.prototype.close=function(){TS(this.g)},Vs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=uS(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&UE(e)},Vs.prototype.N=function(){this.g.h=null,delete this.j,TS(this.g),delete this.g,Vs.$.N.call(this)},Ri(wR,gS),Ri(bR,mS),Ri(i_,CR),i_.prototype.Ba=function(){Xi(this.g,"a")},i_.prototype.Aa=function(n){Xi(this.g,new wR(n))},i_.prototype.za=function(n){Xi(this.g,new bR)},i_.prototype.ya=function(){Xi(this.g,"b")},Ri(wl,function Y3(){this.blockSize=-1}),wl.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},wl.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,l=0;l<e;){if(0==i)for(;l<=t;)AS(this,n,l),l+=this.blockSize;if("string"==typeof n){for(;l<e;)if(r[i++]=n.charCodeAt(l++),i==this.blockSize){AS(this,r),i=0;break}}else for(;l<e;)if(r[i++]=n[l++],i==this.blockSize){AS(this,r),i=0;break}}this.h=i,this.i+=e},wl.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Q3={};function SS(n){return-128<=n&&128>n?function o3(n,e){var t=Q3;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Vn([0|e],0>e?-1:0)}):new Vn([0|n],0>n?-1:0)}function Pc(n){if(isNaN(n)||!isFinite(n))return o_;if(0>n)return eo(Pc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=MS;return new Vn(e,0)}var MS=4294967296,o_=SS(0),kS=SS(1),ER=SS(16777216);function od(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function ba(n){return-1==n.h}function eo(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Vn(t,~n.h).add(kS)}function HE(n,e){return n.add(eo(e))}function $E(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function $0(n,e){this.g=n,this.h=e}function ZE(n,e){if(od(e))throw Error("division by zero");if(od(n))return new $0(o_,o_);if(ba(n))return e=ZE(eo(n),e),new $0(eo(e.g),eo(e.h));if(ba(e))return e=ZE(n,eo(e)),new $0(eo(e.g),e.h);if(30<n.g.length){if(ba(n)||ba(e))throw Error("slowDivide_ only works with positive integers.");for(var t=kS,r=e;0>=r.X(n);)t=TR(t),r=TR(r);var i=s_(t,1),l=s_(r,1);for(r=s_(r,2),t=s_(t,2);!od(r);){var u=l.add(r);0>=u.X(n)&&(i=i.add(t),l=u),r=s_(r,1),t=s_(t,1)}return e=HE(n,i.R(e)),new $0(i,e)}for(i=o_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),u=(l=Pc(t)).R(e);ba(u)||0<u.X(n);)u=(l=Pc(t-=r)).R(e);od(l)&&(l=kS),i=i.add(l),n=HE(n,u)}return new $0(i,n)}function TR(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Vn(t,n.h)}function s_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],l=0;l<r;l++)i[l]=0<e?n.D(l+t)>>>e|n.D(l+t+1)<<32-e:n.D(l+t);return new Vn(i,n.h)}(st=Vn.prototype).ea=function(){if(ba(this))return-eo(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:MS+r)*e,e*=MS}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(od(this))return"0";if(ba(this))return"-"+eo(this).toString(n);for(var e=Pc(Math.pow(n,6)),t=this,r="";;){var i=ZE(t,e).g,l=((0<(t=HE(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(od(t=i))return l+r;for(;6>l.length;)l="0"+l;r=l+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return ba(n=HE(this,n))?-1:od(n)?0:1},st.abs=function(){return ba(this)?eo(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var l=r+(65535&this.D(i))+(65535&n.D(i)),u=(l>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=u>>>16,t[i]=(u&=65535)<<16|(l&=65535)}return new Vn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(od(this)||od(n))return o_;if(ba(this))return ba(n)?eo(this).R(eo(n)):eo(eo(this).R(n));if(ba(n))return eo(this.R(eo(n)));if(0>this.X(ER)&&0>n.X(ER))return Pc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var l=this.D(r)>>>16,u=65535&this.D(r),f=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=u*m,$E(t,2*r+2*i),t[2*r+2*i+1]+=l*m,$E(t,2*r+2*i+1),t[2*r+2*i+1]+=u*f,$E(t,2*r+2*i+1),t[2*r+2*i+2]+=l*f,$E(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Vn(t,0)},st.gb=function(n){return ZE(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Vn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Vn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Vn(t,this.h^n.h)},jE.prototype.createWebChannel=jE.prototype.g,Vs.prototype.send=Vs.prototype.u,Vs.prototype.open=Vs.prototype.m,Vs.prototype.close=Vs.prototype.close,AE.NO_ERROR=0,AE.TIMEOUT=8,AE.HTTP_ERROR=6,RN.COMPLETE="complete",LN.EventType=k0,k0.OPEN="a",k0.CLOSE="b",k0.ERROR="c",k0.MESSAGE="d",Fi.prototype.listen=Fi.prototype.O,Vr.prototype.listenOnce=Vr.prototype.P,Vr.prototype.getLastError=Vr.prototype.Sa,Vr.prototype.getLastErrorCode=Vr.prototype.Ia,Vr.prototype.getStatus=Vr.prototype.da,Vr.prototype.getResponseJson=Vr.prototype.Wa,Vr.prototype.getResponseText=Vr.prototype.ja,Vr.prototype.send=Vr.prototype.ha,Vr.prototype.setWithCredentials=Vr.prototype.Oa,wl.prototype.digest=wl.prototype.l,wl.prototype.reset=wl.prototype.reset,wl.prototype.update=wl.prototype.j,Vn.prototype.add=Vn.prototype.add,Vn.prototype.multiply=Vn.prototype.R,Vn.prototype.modulo=Vn.prototype.gb,Vn.prototype.compare=Vn.prototype.X,Vn.prototype.toNumber=Vn.prototype.ea,Vn.prototype.toString=Vn.prototype.toString,Vn.prototype.getBits=Vn.prototype.D,Vn.fromNumber=Pc,Vn.fromString=function IR(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return eo(IR(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Pc(Math.pow(e,8)),r=o_,i=0;i<n.length;i+=8){var l=Math.min(8,n.length-i),u=parseInt(n.substring(i,i+l),e);8>l?(l=Pc(Math.pow(e,l)),r=r.R(l).add(Pc(u))):r=(r=r.R(t)).add(Pc(u))}return r};var J3=Cl.createWebChannelTransport=function(){return new jE},X3=Cl.getStatEventTarget=function(){return DE()},PS=Cl.ErrorCode=AE,e6=Cl.EventType=RN,t6=Cl.Event=kp,xR=Cl.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},n6=Cl.FetchXmlHttpFactory=V0,GE=Cl.WebChannel=LN,r6=Cl.XhrIo=Vr,i6=Cl.Md5=wl,a_=Cl.Integer=Vn;const DR="@firebase/firestore";class Li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Li.UNAUTHENTICATED=new Li(null),Li.GOOGLE_CREDENTIALS=new Li("google-credentials-uid"),Li.FIRST_PARTY=new Li("first-party-uid"),Li.MOCK_USER=new Li("mock-user");let l_="9.23.0";const Ph=new Ec.Yd("@firebase/firestore");function OS(){return Ph.logLevel}function Be(n,...e){if(Ph.logLevel<=Ec.in.DEBUG){const t=e.map(NS);Ph.debug(`Firestore (${l_}): ${n}`,...t)}}function zr(n,...e){if(Ph.logLevel<=Ec.in.ERROR){const t=e.map(NS);Ph.error(`Firestore (${l_}): ${n}`,...t)}}function Ia(n,...e){if(Ph.logLevel<=Ec.in.WARN){const t=e.map(NS);Ph.warn(`Firestore (${l_}): ${n}`,...t)}}function NS(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${l_}) INTERNAL ASSERTION FAILED: `+n;throw zr(e),new Error(e)}function Tt(n,e){n||ft()}function ot(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends Zt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class AR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Li.UNAUTHENTICATED))}shutdown(){}}class l6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c6{constructor(e){this.t=e,this.currentUser=Li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const l=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let u=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new wi,e.enqueueRetryable(()=>l(this.currentUser))};const f=()=>{const v=u;e.enqueueRetryable((0,te.Z)(function*(){yield v.promise,yield l(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new wi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new AR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Li(e)}}class u6{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Li.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class d6{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new u6(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h6{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=l=>{null!=l.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.T;return this.T=l.token,Be("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const i=l=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.appCheck.addTokenListener(this.o)};this.I.onInit(l=>i(l)),setTimeout(()=>{if(!this.appCheck){const l=this.I.getImmediate({optional:!0});l?i(l):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.T=t.token,new SR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function f6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class MR{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=f6(40);for(let l=0;l<i.length;++l)r.length<20&&i[l]<t&&(r+=e.charAt(i[l]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function c_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function kR(n){return n+"\0"}class Ir{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ir.fromMillis(Date.now())}static fromDate(e){return Ir.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ir(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new Ir(0,0))}static max(){return new Dt(new Ir(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Z0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Z0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Z0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const l=e.get(i),u=t.get(i);if(l<u)return-1;if(l>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends Z0{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const p6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends Z0{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return p6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const l=()=>{if(0===r.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Re(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Re(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(u=!u,i++):"."!==f||u?(r+=f,i++):(l(),i++)}if(l(),u)throw new Re(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(En.fromString(e))}static fromName(e){return new rt(En.fromString(e).popFirst(5))}static empty(){return new rt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new En(e.slice()))}}class qE{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function RS(n){return n.fields.find(e=>2===e.kind)}function Rp(n){return n.fields.filter(e=>2!==e.kind)}qE.UNKNOWN_ID=-1;class zE{constructor(e,t){this.fieldPath=e,this.kind=t}}class G0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new G0(0,Us.min())}}function PR(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new Ir(t+1,0):new Ir(t,r));return new Us(i,rt.empty(),e)}function OR(n){return new Us(n.readTime,n.key,-1)}class Us{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Us(Dt.min(),rt.empty(),-1)}static max(){return new Us(Dt.max(),rt.empty(),-1)}}function FS(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const NR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Oh(n){return LS.apply(this,arguments)}function LS(){return LS=(0,te.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==NR)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),LS.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,l=0,u=!1;e.forEach(f=>{++i,f.next(()=>{++l,u&&l===i&&t()},m=>r(m))}),u=!0,l===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,l)=>{r.push(t.call(this,i,l))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const v=m;t(e[v]).next(x=>{u[v]=x,++f,f===l&&r(u)},x=>i(x))}})}static doWhile(e,t){return new ce((r,i)=>{const l=()=>{!0===e()?t().next(()=>{l()},i):r()};l()})}}class WE{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new wi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new q0(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=VS(r.target.error);this.v.reject(new q0(e,i))}}static open(e,t,r,i){try{return new WE(t,e.transaction(i,r))}catch(l){throw new q0(t,l)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y6(t)}}class bl{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===bl.S((0,Zt.z$)())&&zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Fp(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Zt.hl)())return!1;if(bl.C())return!0;const e=(0,Zt.z$)(),t=bl.S(e),r=0<t&&t<10,i=bl.N(e),l=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,te.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=u=>{r(u.target.result)},l.onblocked=()=>{i(new q0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=u=>{const f=u.target.error;i("VersionError"===f.name?new Re(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Re(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new q0(e,f))},l.onupgradeneeded=u=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.V.O(u.target.result,l.transaction,u.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var l=this;return(0,te.Z)(function*(){const u="readonly"===t;let f=0;for(;;){++f;try{l.db=yield l.$(e);const m=WE.open(l.db,e,u?"readonly":"readwrite",r),v=i(m).next(x=>(m.P(),x)).catch(x=>(m.abort(x),ce.reject(x))).toPromise();return v.catch(()=>{}),yield m.R,v}catch(m){const v=m,x="FirebaseError"!==v.name&&f<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",x),l.close(),!x)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _6{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Fp(this.L.delete())}}class q0 extends Re{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nh(n){return"IndexedDbTransactionError"===n.name}class y6{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Fp(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Fp(this.store.add(e))}get(e){return Fp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Fp(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Fp(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),l=[];return this.W(i,(u,f)=>{l.push(f)}).next(()=>l)}{const i=this.store.getAll(r.range);return new ce((l,u)=>{i.onerror=f=>{u(f.target.error)},i.onsuccess=f=>{l(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(l,u,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=l=>{const u=VS(l.target.error);i(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next(f=>{f?u.continue():r()}):r()}})}W(e,t){const r=[];return new ce((i,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void i();const m=new _6(f),v=t(f.primaryKey,f.value,m);if(v instanceof ce){const x=v.catch(D=>(m.done(),ce.reject(D)));r.push(x)}m.isDone?i():null===m.K?f.continue():f.continue(m.K)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Fp(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=VS(r.target.error);t(i)}})}let FR=!1;function VS(n){const e=bl.S((0,Zt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return FR||(FR=!0,setTimeout(()=>{throw r},0)),r}}return n}class v6{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,te.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Nh(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Oh(r)}yield t.et(6e4)}))}}class C6{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,l=!0;return ce.doWhile(()=>!0===l&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return Be("IndexBackiller",`Processing collection: ${u}`),this.it(e,u,i).next(f=>{i-=f,r.add(u)});l=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.rt(i,l)).next(f=>(Be("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>u.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,l)=>{const u=OR(l);FS(u,r)>0&&(r=u)}),new Us(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Bs=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function z0(n){return null==n}function W0(n){return 0===n&&1/n==-1/0}function LR(n){return"number"==typeof n&&Number.isInteger(n)&&!W0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function vo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=VR(e)),e=w6(n.get(t),e);return VR(e)}function w6(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const l=n.charAt(i);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function VR(n){return n+"\x01\x01"}function Oc(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let l=0;l<e;){const u=n.indexOf("\x01",l);switch((u<0||u>t)&&ft(),n.charAt(u+1)){case"\x01":const f=n.substring(l,u);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(l,u),i+="\0";break;case"\x11":i+=n.substring(l,u+1);break;default:ft()}l=u+2}return new En(r)}const UR=["userId","batchId"];function KE(n,e){return[n,vo(e)]}function BR(n,e,t){return[n,vo(e),t]}const b6={},I6=["prefixPath","collectionGroup","readTime","documentId"],E6=["prefixPath","collectionGroup","documentId"],T6=["collectionGroup","readTime","prefixPath","documentId"],x6=["canonicalId","targetId"],D6=["targetId","path"],A6=["path","targetId"],S6=["collectionId","parent"],M6=["indexId","uid"],k6=["uid","sequenceNumber"],P6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],O6=["indexId","uid","orderedDocumentKey"],N6=["userId","collectionPath","documentId"],R6=["userId","collectionPath","largestBatchId"],F6=["userId","collectionGroup","largestBatchId"],jR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],L6=[...jR,"documentOverlays"],HR=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$R=HR,V6=[...$R,"indexConfiguration","indexState","indexEntries"];class US extends RR{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Vi(n,e){const t=ot(n);return bl.M(t.ht,e)}function ZR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class rr{constructor(e,t){this.comparator=e,this.root=t||to.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,to.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,to.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new YE(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new YE(this.root,e,this.comparator,!1)}getReverseIterator(){return new YE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new YE(this.root,e,this.comparator,!0)}}class YE{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class to{constructor(e,t,r,i,l){this.key=e,this.value=t,this.color=r??to.RED,this.left=i??to.EMPTY,this.right=l??to.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,l){return new to(e??this.key,t??this.value,r??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const l=r(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===l?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return to.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return to.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,to.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,to.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}to.EMPTY=null,to.RED=!0,to.BLACK=!1,to.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new to(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qR(this.data.getIterator())}getIteratorFrom(e){return new qR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(i,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dr(this.comparator);return t.data=e,t}}class qR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function u_(n){return n.hasNext()?n.getNext():void 0}class ds{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new ds([])}unionWith(e){let t=new dr(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ds(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return c_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zR("Invalid base64 string: "+i):i}}(e);return new bi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let l=0;l<r.length;++l)i+=String.fromCharCode(r[l]);return i}(e);return new bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bi.EMPTY_BYTE_STRING=new bi("");const B6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fh(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=B6.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function sd(n){return"string"==typeof n?bi.fromBase64String(n):bi.fromUint8Array(n)}function QE(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function JE(n){const e=n.mapValue.fields.__previous_value__;return QE(e)?JE(e):e}function K0(n){const e=Fh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ir(e.seconds,e.nanos)}class j6{constructor(e,t,r,i,l,u,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=v}}class Lh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lh&&e.projectId===this.projectId&&e.database===this.database}}const Vh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},XE={nullValue:"NULL_VALUE"};function Uh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?QE(n)?4:QR(n)?9007199254740991:10:ft()}function Nc(n,e){if(n===e)return!0;const t=Uh(n);if(t!==Uh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return K0(n).isEqual(K0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const l=Fh(r.timestampValue),u=Fh(i.timestampValue);return l.seconds===u.seconds&&l.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,sd(n.bytesValue).isEqual(sd(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const l=Br(r.doubleValue),u=Br(i.doubleValue);return l===u?W0(l)===W0(u):isNaN(l)&&isNaN(u)}return!1}(n,e);case 9:return c_(n.arrayValue.values||[],e.arrayValue.values||[],Nc);case 10:return function(r,i){const l=r.mapValue.fields||{},u=i.mapValue.fields||{};if(ZR(l)!==ZR(u))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(void 0===u[f]||!Nc(l[f],u[f])))return!1;return!0}(n,e);default:return ft()}var i}function Y0(n,e){return void 0!==(n.values||[]).find(t=>Nc(t,e))}function Bh(n,e){if(n===e)return 0;const t=Uh(n),r=Uh(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,l){const u=Br(i.integerValue||i.doubleValue),f=Br(l.integerValue||l.doubleValue);return u<f?-1:u>f?1:u===f?0:isNaN(u)?isNaN(f)?0:-1:1}(n,e);case 3:return WR(n.timestampValue,e.timestampValue);case 4:return WR(K0(n),K0(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,l){const u=sd(i),f=sd(l);return u.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,l){const u=i.split("/"),f=l.split("/");for(let m=0;m<u.length&&m<f.length;m++){const v=Kt(u[m],f[m]);if(0!==v)return v}return Kt(u.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,l){const u=Kt(Br(i.latitude),Br(l.latitude));return 0!==u?u:Kt(Br(i.longitude),Br(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,l){const u=i.values||[],f=l.values||[];for(let m=0;m<u.length&&m<f.length;++m){const v=Bh(u[m],f[m]);if(v)return v}return Kt(u.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,l){if(i===Vh.mapValue&&l===Vh.mapValue)return 0;if(i===Vh.mapValue)return 1;if(l===Vh.mapValue)return-1;const u=i.fields||{},f=Object.keys(u),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let x=0;x<f.length&&x<v.length;++x){const D=Kt(f[x],v[x]);if(0!==D)return D;const L=Bh(u[f[x]],m[v[x]]);if(0!==L)return L}return Kt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw ft()}}function WR(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Fh(n),r=Fh(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function d_(n){return BS(n)}function BS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Fh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?sd(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",l=!0;for(const u of r.values||[])l?l=!1:i+=",",i+=BS(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let l="{",u=!0;for(const f of i)u?u=!1:l+=",",l+=`${f}:${BS(r.fields[f])}`;return l+"}"}(n.mapValue):ft();var e}function Lp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function jS(n){return!!n&&"integerValue"in n}function Q0(n){return!!n&&"arrayValue"in n}function KR(n){return!!n&&"nullValue"in n}function YR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tT(n){return!!n&&"mapValue"in n}function J0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=J0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=J0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function QR(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function H6(n){return"nullValue"in n?XE:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Lp(Lh.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function $6(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Lp(Lh.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Vh:ft()}function JR(n,e){const t=Bh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XR(n,e){const t=Bh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class no{constructor(e){this.value=e}static empty(){return new no({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=J0(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}u?r[f.lastSegment()]=J0(u):i.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,i)}delete(e){const t=this.field(e.popLast());tT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Rh(t,(i,l)=>e[i]=l);for(const i of r)delete e[i]}clone(){return new no(J0(this.value))}}function eF(n){const e=[];return Rh(n.fields,(t,r)=>{const i=new Ur([t]);if(tT(r)){const l=eF(r.mapValue).fields;if(0===l.length)e.push(i);else for(const u of l)e.push(i.child(u))}else e.push(i)}),new ds(e)}class hr{constructor(e,t,r,i,l,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new hr(e,0,Dt.min(),Dt.min(),Dt.min(),no.empty(),0)}static newFoundDocument(e,t,r,i){return new hr(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new hr(e,2,t,Dt.min(),Dt.min(),no.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,Dt.min(),Dt.min(),no.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=no.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=no.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jh{constructor(e,t){this.position=e,this.inclusive=t}}function tF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const l=e[i],u=n.position[i];if(r=l.field.isKeyField()?rt.comparator(rt.fromName(u.referenceValue),t.key):Bh(u,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return r}function nF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nc(n.position[t],e.position[t]))return!1;return!0}class h_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Z6(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class rF{}class vn extends rF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new G6(e,t,r):"array-contains"===t?new W6(e,r):"in"===t?new cF(e,r):"not-in"===t?new K6(e,r):"array-contains-any"===t?new Y6(e,r):new vn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new q6(e,r):new z6(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bh(t,this.value)):null!==t&&Uh(this.value)===Uh(t)&&this.matchesComparison(Bh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Un extends rF{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Un(e,t)}matches(e){return f_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function f_(n){return"and"===n.op}function HS(n){return"or"===n.op}function $S(n){return iF(n)&&f_(n)}function iF(n){for(const e of n.filters)if(e instanceof Un)return!1;return!0}function ZS(n){if(n instanceof vn)return n.field.canonicalString()+n.op.toString()+d_(n.value);if($S(n))return n.filters.map(e=>ZS(e)).join(",");{const e=n.filters.map(t=>ZS(t)).join(",");return`${n.op}(${e})`}}function oF(n,e){return n instanceof vn?(t=n,(r=e)instanceof vn&&t.op===r.op&&t.field.isEqual(r.field)&&Nc(t.value,r.value)):n instanceof Un?function(t,r){return r instanceof Un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,l,u)=>i&&oF(l,r.filters[u]),!0)}(n,e):void ft();var t,r}function sF(n,e){const t=n.filters.concat(e);return Un.create(t,n.op)}function aF(n){return n instanceof vn?`${(e=n).field.canonicalString()} ${e.op} ${d_(e.value)}`:n instanceof Un?function(e){return e.op.toString()+" {"+e.getFilters().map(aF).join(" ,")+"}"}(n):"Filter";var e}class G6 extends vn{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class q6 extends vn{constructor(e,t){super(e,"in",t),this.keys=lF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z6 extends vn{constructor(e,t){super(e,"not-in",t),this.keys=lF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class W6 extends vn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Q0(t)&&Y0(t.arrayValue,this.value)}}class cF extends vn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Y0(this.value.arrayValue,t)}}class K6 extends vn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Y0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Y0(this.value.arrayValue,t)}}class Y6 extends vn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Q0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Y0(this.value.arrayValue,r))}}class Q6{constructor(e,t=null,r=[],i=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=l,this.startAt=u,this.endAt=f,this.dt=null}}function GS(n,e=null,t=[],r=[],i=null,l=null,u=null){return new Q6(n,e,t,r,i,l,u)}function Vp(n){const e=ot(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>ZS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),z0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>d_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>d_(r)).join(",")),e.dt=t}return e.dt}function X0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Z6(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nF(n.startAt,e.startAt)&&nF(n.endAt,e.endAt)}function nT(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function rT(n,e){return n.filters.filter(t=>t instanceof vn&&t.field.isEqual(e))}function uF(n,e,t){let r=XE,i=!0;for(const l of rT(n,e)){let u=XE,f=!0;switch(l.op){case"<":case"<=":u=H6(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=XE}JR({value:r,inclusive:i},{value:u,inclusive:f})<0&&(r=u,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];JR({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function dF(n,e,t){let r=Vh,i=!0;for(const l of rT(n,e)){let u=Vh,f=!0;switch(l.op){case">=":case">":u=$6(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=Vh}XR({value:r,inclusive:i},{value:u,inclusive:f})>0&&(r=u,i=f)}if(null!==t)for(let l=0;l<n.orderBy.length;++l)if(n.orderBy[l].field.isEqual(e)){const u=t.position[l];XR({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class ad{constructor(e,t=null,r=[],i=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.wt=null,this._t=null}}function hF(n,e,t,r,i,l,u,f){return new ad(n,e,t,r,i,l,u,f)}function p_(n){return new ad(n)}function fF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qS(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function iT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function zS(n){return null!==n.collectionGroup}function Up(n){const e=ot(n);if(null===e.wt){e.wt=[];const t=iT(e),r=qS(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new h_(t)),e.wt.push(new h_(Ur.keyField(),"asc"));else{let i=!1;for(const l of e.explicitOrderBy)e.wt.push(l),l.field.isKeyField()&&(i=!0);if(!i){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new h_(Ur.keyField(),l))}}}return e.wt}function jo(n){const e=ot(n);if(!e._t)if("F"===e.limitType)e._t=GS(e.path,e.collectionGroup,Up(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Up(e))t.push(new h_(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new jh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new jh(e.startAt.position,e.startAt.inclusive):null;e._t=GS(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function WS(n,e){e.getFirstInequalityField(),iT(n);const t=n.filters.concat([e]);return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function oT(n,e,t){return new ad(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function eC(n,e){return X0(jo(n),jo(e))&&n.limitType===e.limitType}function pF(n){return`${Vp(jo(n))}|lt:${n.limitType}`}function KS(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>aF(r)).join(", ")}]`),z0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>d_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>d_(r)).join(",")),`Target(${t})`}(jo(n))}; limitType=${n.limitType})`}function tC(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Up(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,l,u){const f=tF(i,l,u);return i.inclusive?f<=0:f<0}(t.startAt,Up(t),r)||t.endAt&&!function(i,l,u){const f=tF(i,l,u);return i.inclusive?f>=0:f>0}(t.endAt,Up(t),r)));var t,r}function gF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mF(n){return(e,t)=>{let r=!1;for(const i of Up(n)){const l=J6(i,e,t);if(0!==l)return l;r=r||i.field.isKeyField()}return 0}}function J6(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,l,u){const f=l.data.field(i),m=u.data.field(i);return null!==f&&null!==m?Bh(f,m):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,l]of r)if(this.equalsFn(i,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rh(this.inner,(t,r)=>{for(const[i,l]of r)e(i,l)})}isEmpty(){return GR(this.inner)}size(){return this.innerSize}}const X6=new rr(rt.comparator);function hs(){return X6}const _F=new rr(rt.comparator);function nC(...n){let e=_F;for(const t of n)e=e.insert(t.key,t);return e}function yF(n){let e=_F;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Rc(){return rC()}function vF(){return rC()}function rC(){return new ld(n=>n.toString(),(n,e)=>n.isEqual(e))}const eB=new rr(rt.comparator),tB=new dr(rt.comparator);function rn(...n){let e=tB;for(const t of n)e=e.add(t);return e}const nB=new dr(Kt);function YS(){return nB}function CF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:W0(e)?"-0":e}}function wF(n){return{integerValue:""+n}}function bF(n,e){return LR(e)?wF(e):CF(n,e)}class sT{constructor(){this._=void 0}}function rB(n,e,t){return n instanceof g_?function(r,i){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&QE(i)&&(i=JE(i)),i&&(l.fields.__previous_value__=i),{mapValue:l}}(t,e):n instanceof Bp?EF(n,e):n instanceof jp?TF(n,e):function(r,i){const l=IF(r,i),u=xF(l)+xF(r.gt);return jS(l)&&jS(r.gt)?wF(u):CF(r.serializer,u)}(n,e)}function iB(n,e,t){return n instanceof Bp?EF(n,e):n instanceof jp?TF(n,e):t}function IF(n,e){return n instanceof m_?jS(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class g_ extends sT{}class Bp extends sT{constructor(e){super(),this.elements=e}}function EF(n,e){const t=DF(e);for(const r of n.elements)t.some(i=>Nc(i,r))||t.push(r);return{arrayValue:{values:t}}}class jp extends sT{constructor(e){super(),this.elements=e}}function TF(n,e){let t=DF(e);for(const r of n.elements)t=t.filter(i=>!Nc(i,r));return{arrayValue:{values:t}}}class m_ extends sT{constructor(e,t){super(),this.serializer=e,this.gt=t}}function xF(n){return Br(n.integerValue||n.doubleValue)}function DF(n){return Q0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class iC{constructor(e,t){this.field=e,this.transform=t}}class sB{constructor(e,t){this.version=e,this.transformResults=t}}class Er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Er}static exists(e){return new Er(void 0,e)}static updateTime(e){return new Er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lT{}function AF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new y_(n.key,Er.none()):new __(n.key,n.data,Er.none());{const t=n.data,r=no.empty();let i=new dr(Ur.comparator);for(let l of e.fields)if(!i.has(l)){let u=t.field(l);null===u&&l.length>1&&(l=l.popLast(),u=t.field(l)),null===u?r.delete(l):r.set(l,u),i=i.add(l)}return new cd(n.key,r,new ds(i.toArray()),Er.none())}}function aB(n,e,t){n instanceof __?function(r,i,l){const u=r.value.clone(),f=kF(r.fieldTransforms,i,l.transformResults);u.setAll(f),i.convertToFoundDocument(l.version,u).setHasCommittedMutations()}(n,e,t):n instanceof cd?function(r,i,l){if(!aT(r.precondition,i))return void i.convertToUnknownDocument(l.version);const u=kF(r.fieldTransforms,i,l.transformResults),f=i.data;f.setAll(MF(r)),f.setAll(u),i.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function oC(n,e,t,r){return n instanceof __?function(i,l,u,f){if(!aT(i.precondition,l))return u;const m=i.value.clone(),v=PF(i.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof cd?function(i,l,u,f){if(!aT(i.precondition,l))return u;const m=PF(i.fieldTransforms,f,l),v=l.data;return v.setAll(MF(i)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(x=>x.field))}(n,e,t,r):(u=t,aT(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):u);var l,u}function lB(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),l=IF(r.transform,i||null);null!=l&&(null===t&&(t=no.empty()),t.set(r.field,l))}return t||null}function SF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&c_(t,r,(i,l)=>function oB(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bp&&r instanceof Bp||t instanceof jp&&r instanceof jp?c_(t.elements,r.elements,Nc):t instanceof m_&&r instanceof m_?Nc(t.gt,r.gt):t instanceof g_&&r instanceof g_);var t,r}(i,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class __ extends lT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class cd extends lT{constructor(e,t,r,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function MF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kF(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const l=n[i],u=l.transform,f=e.data.field(l.field);r.set(l.field,iB(u,f,t[i]))}return r}function PF(n,e,t){const r=new Map;for(const i of n){const l=i.transform,u=t.data.field(i.field);r.set(i.field,rB(l,u,e))}return r}class y_ extends lT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QS extends lT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class JS{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&aB(l,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=oC(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=oC(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=vF();return this.mutations.forEach(i=>{const l=e.get(i.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(i.key)?null:f;const m=AF(u,f);null!==m&&r.set(i.key,m),u.isValidDocument()||u.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&c_(this.mutations,e.mutations,(t,r)=>SF(t,r))&&c_(this.baseMutations,e.baseMutations,(t,r)=>SF(t,r))}}class XS{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=eB;const l=e.mutations;for(let u=0;u<l.length;u++)i=i.insert(l[u].key,r[u].version);return new XS(e,t,r,i)}}class eM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uB{constructor(e,t){this.count=e,this.unchangedNames=t}}var oi,Tn;function OF(n){switch(n){default:return ft();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function NF(n){if(void 0===n)return zr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case oi.OK:return ge.OK;case oi.CANCELLED:return ge.CANCELLED;case oi.UNKNOWN:return ge.UNKNOWN;case oi.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case oi.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case oi.INTERNAL:return ge.INTERNAL;case oi.UNAVAILABLE:return ge.UNAVAILABLE;case oi.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case oi.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case oi.NOT_FOUND:return ge.NOT_FOUND;case oi.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case oi.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case oi.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case oi.ABORTED:return ge.ABORTED;case oi.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case oi.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case oi.DATA_LOSS:return ge.DATA_LOSS;default:return ft()}}(Tn=oi||(oi={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";class tM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return cT}static getOrCreateInstance(){return null===cT&&(cT=new tM),cT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let cT=null;function RF(){return new TextEncoder}const dB=new a_([4294967295,4294967295],0);function FF(n){const e=RF().encode(n),t=new i6;return t.update(e),new Uint8Array(t.digest())}function LF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new a_([t,r],0),new a_([i,l],0)]}class nM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new sC(`Invalid padding: ${t}`);if(r<0)throw new sC(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new sC(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new sC(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=a_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(a_.fromNumber(r)));return 1===i.compare(dB)&&(i=new a_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=FF(e),[r,i]=LF(t);for(let l=0;l<this.hashCount;l++){const u=this.Et(r,i,l);if(!this.At(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new nM(l,i,t);return r.forEach(f=>u.insert(f)),u}insert(e){if(0===this.It)return;const t=FF(e),[r,i]=LF(t);for(let l=0;l<this.hashCount;l++){const u=this.Et(r,i,l);this.Rt(u)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class sC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class aC{constructor(e,t,r,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,lC.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new aC(Dt.min(),i,new rr(Kt),hs(),rn())}}class lC{constructor(e,t,r,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new lC(r,t,rn(),rn(),rn())}}class uT{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class VF{constructor(e,t){this.targetId=e,this.Vt=t}}class UF{constructor(e,t,r=bi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class BF{constructor(){this.St=0,this.Dt=HF(),this.Ct=bi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=rn(),t=rn(),r=rn();return this.Dt.forEach((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new lC(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=HF()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class hB{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=hs(),this.zt=jF(),this.Wt=new rr(Kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,l=this.se(r);if(l){const u=l.target;if(nT(u))if(0===i){const f=new rt(u.path);this.Yt(r,f,hr.newNoDocument(f,Dt.min()))}else Tt(1===i);else{const f=this.ie(r);if(f!==i){const m=this.re(e,f);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=tM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(v,x,D){var L,j,q,ee,ae,Ue;const Ge={localCacheCount:x,existenceFilterCount:D.count},je=D.unchangedNames;return je&&(Ge.bloomFilter={applied:0===v,hashCount:null!==(L=je?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ee=null===(q=null===(j=je?.bits)||void 0===j?void 0:j.bitmap)||void 0===q?void 0:q.length)&&void 0!==ee?ee:0,padding:null!==(Ue=null===(ae=je?.bits)||void 0===ae?void 0:ae.padding)&&void 0!==Ue?Ue:0}),Ge}(m,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:l="",padding:u=0},hashCount:f=0}=r;let m,v;try{m=sd(l).toUint8Array()}catch(x){if(x instanceof zR)return Ia("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw x}try{v=new nM(m,u,f)}catch(x){return Ia(x instanceof sC?"BloomFilter error: ":"Applying bloom filter failed: ",x),1}return 0===v.It?1:i!==t-this.oe(e.targetId,v)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(l=>{const u=this.Gt.ue(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;t.vt(f)||(this.Yt(e,l,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((l,u)=>{const f=this.se(u);if(f){if(l.current&&nT(f.target)){const m=new rt(f.target.path);null!==this.jt.get(m)||this.ae(u,m)||this.Yt(u,m,hr.newNoDocument(m,e))}l.Mt&&(t.set(u,l.Ot()),l.Ft())}});let r=rn();this.zt.forEach((l,u)=>{let f=!0;u.forEachWhile(m=>{const v=this.se(m);return!v||"TargetPurposeLimboResolution"===v.purpose||(f=!1,!1)}),f&&(r=r.add(l))}),this.jt.forEach((l,u)=>u.setReadTime(e));const i=new aC(e,t,this.Wt,this.jt,r);return this.jt=hs(),this.zt=jF(),this.Wt=new rr(Kt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new BF,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new dr(Kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new BF),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function jF(){return new rr(rt.comparator)}function HF(){return new rr(rt.comparator)}const fB={asc:"ASCENDING",desc:"DESCENDING"},pB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gB={and:"AND",or:"OR"};class mB{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rM(n,e){return n.useProto3Json||z0(e)?e:{value:e}}function v_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $F(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _B(n,e){return v_(n,e.toTimestamp())}function Wr(n){return Tt(!!n),Dt.fromTimestamp(function(e){const t=Fh(e);return new Ir(t.seconds,t.nanos)}(n))}function iM(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZF(n){const e=En.fromString(n);return Tt(XF(e)),e}function cC(n,e){return iM(n.databaseId,e.path)}function Fc(n,e){const t=ZF(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(qF(t))}function oM(n,e){return iM(n.databaseId,e)}function GF(n){const e=ZF(n);return 4===e.length?En.emptyPath():qF(e)}function uC(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qF(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zF(n,e,t){return{name:cC(n,e),fields:t.value.mapValue.fields}}function WF(n,e,t){const r=Fc(n,e.name),i=Wr(e.updateTime),l=e.createTime?Wr(e.createTime):Dt.min(),u=new no({mapValue:{fields:e.fields}}),f=hr.newFoundDocument(r,i,l,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function dC(n,e){let t;if(e instanceof __)t={update:zF(n,e.key,e.value)};else if(e instanceof y_)t={delete:cC(n,e.key)};else if(e instanceof cd)t={update:zF(n,e.key,e.data),updateMask:TB(e.fieldMask)};else{if(!(e instanceof QS))return ft();t={verify:cC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,l){const u=l.transform;if(u instanceof g_)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Bp)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof jp)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof m_)return{fieldPath:l.field.canonicalString(),increment:u.gt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:_B(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function sM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Er.updateTime(Wr(i.updateTime)):void 0!==i.exists?Er.exists(i.exists):Er.none():Er.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,u){let f=null;"setToServerValue"in u?(Tt("REQUEST_TIME"===u.setToServerValue),f=new g_):"appendMissingElements"in u?f=new Bp(u.appendMissingElements.values||[]):"removeAllFromArray"in u?f=new jp(u.removeAllFromArray.values||[]):"increment"in u?f=new m_(l,u.increment):ft();const m=Ur.fromServerFormat(u.fieldPath);return new iC(m,f)}(n,i)):[];var i;if(e.update){const i=Fc(n,e.update.name),l=new no({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new ds((e.updateMask.fieldPaths||[]).map(v=>Ur.fromServerFormat(v)));return new cd(i,l,u,t,r)}return new __(i,l,t,r)}if(e.delete){const i=Fc(n,e.delete);return new y_(i,t)}if(e.verify){const i=Fc(n,e.verify);return new QS(i,t)}return ft()}function KF(n,e){return{documents:[oM(n,e.path)]}}function aM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return JF(Un.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const l=function(m){if(0!==m.length)return m.map(v=>{return{field:Hh((x=v).field),direction:bB(x.dir)};var x})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const u=rM(n,e.limit);var f,m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function YF(n){let e=GF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const x=t.from[0];x.allDescendants?i=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=function(x){const D=QF(x);return D instanceof Un&&$S(D)?D.getFilters():[D]}(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(x=>{return new h_(C_((D=x).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let f=null;t.limit&&(f=function(x){let D;return D="object"==typeof x?x.value:x,z0(D)?null:D}(t.limit));let m=null;var x;t.startAt&&(m=new jh((x=t.startAt).values||[],!!x.before));let v=null;return t.endAt&&(v=function(x){return new jh(x.values||[],!x.before)}(t.endAt)),hF(e,i,u,l,f,"F",m,v)}function QF(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=C_(e.unaryFilter.field);return vn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=C_(e.unaryFilter.field);return vn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=C_(e.unaryFilter.field);return vn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=C_(e.unaryFilter.field);return vn.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(n):void 0!==n.fieldFilter?vn.create(C_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Un.create(e.compositeFilter.filters.map(t=>QF(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(n):ft();var e}function bB(n){return fB[n]}function IB(n){return pB[n]}function EB(n){return gB[n]}function Hh(n){return{fieldPath:n.canonicalString()}}function C_(n){return Ur.fromServerFormat(n.fieldPath)}function JF(n){return n instanceof vn?function(e){if("=="===e.op){if(YR(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NAN"}};if(KR(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(YR(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NOT_NAN"}};if(KR(e.value))return{unaryFilter:{field:Hh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hh(e.field),op:IB(e.op),value:e.value}}}(n):n instanceof Un?function(e){const t=e.getFilters().map(r=>JF(r));return 1===t.length?t[0]:{compositeFilter:{op:EB(e.op),filters:t}}}(n):ft()}function TB(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function XF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ud{constructor(e,t,r,i,l=Dt.min(),u=Dt.min(),f=bi.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new ud(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ud(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class e2{constructor(e){this.fe=e}}function t2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:cC(i=n.fe,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:v_(i,l.version.toTimestamp()),createTime:v_(i,l.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Hp(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:Hp(e.version)}}var i,l;return r}function dT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Hp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $p(n){const e=new Ir(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Zp(n,e){const t=(e.baseMutations||[]).map(l=>sM(n.fe,l));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(u.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>sM(n.fe,l)),i=Ir.fromMillis(e.localWriteTimeMs);return new JS(e.batchId,i,t,r)}function hC(n){const e=$p(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$p(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=jo(p_(GF(i.documents[0])))):r=jo(YF(n.query)),new ud(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,bi.fromBase64String(n.resumeToken))}function n2(n,e){const t=Hp(e.snapshotVersion),r=Hp(e.lastLimboFreeSnapshotVersion);let i;i=nT(e.target)?KF(n.fe,e.target):aM(n.fe,e.target);const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vp(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lM(n){const e=YF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?oT(e,e.limit,"L"):e}function cM(n,e){return new eM(e.largestBatchId,sM(n.fe,e.overlayMutation))}function r2(n,e){const t=e.path.lastSegment();return[n,vo(e.path.popLast()),t]}function i2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Hp(r.readTime),documentKey:vo(r.documentKey.path),largestBatchId:r.largestBatchId}}class DB{getBundleMetadata(e,t){return o2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$p(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return o2(e).put({bundleId:(r=t).id,createTime:Hp(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return s2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:lM(i.bundledQuery),readTime:$p(i.readTime)};var i})}saveNamedQuery(e,t){return s2(e).put({name:(r=t).name,readTime:Hp(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function o2(n){return Vi(n,"bundles")}function s2(n){return Vi(n,"namedQueries")}class hT{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new hT(e,t.uid||"")}getOverlay(e,t){return fC(e).get(r2(this.userId,t)).next(r=>r?cM(this.serializer,r):null)}getOverlays(e,t){const r=Rc();return ce.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((l,u)=>{const f=new eM(t,u);i.push(this.we(e,f))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(vo(u.getCollectionPath())));const l=[];return i.forEach(u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(fC(e).J("collectionPathOverlayIndex",f))}),ce.waitFor(l)}getOverlaysForCollection(e,t,r){const i=Rc(),l=vo(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return fC(e).j("collectionPathOverlayIndex",u).next(f=>{for(const m of f){const v=cM(this.serializer,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const l=Rc();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return fC(e).X({index:"collectionGroupOverlayIndex",range:f},(m,v,x)=>{const D=cM(this.serializer,v);l.size()<i||D.largestBatchId===u?(l.set(D.getKey(),D),u=D.largestBatchId):x.done()}).next(()=>l)}we(e,t){return fC(e).put(function(r,i,l){const[u,f,m]=r2(i,l.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:dC(r.fe,l.mutation)}}(this.serializer,this.userId,t))}}function fC(n){return Vi(n,"documentOverlays")}class Gp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),W0(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(sd(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?QR(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ft()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),rt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function AB(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function a2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const l=AB(255&t[i]);if(r+=l,8!==l)break}return r}(n);return Math.ceil(e/8)}Gp.Ve=new Gp;class SB{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=a2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=a2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,i,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MB{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class kB{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class pC{constructor(){this.je=new SB,this.ze=new MB(this.je),this.We=new kB(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class qp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qp(this.indexId,this.documentKey,this.arrayValue,r)}}function $h(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=l2(n.arrayValue,e.arrayValue),0!==t?t:(t=l2(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function l2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PB{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Tt(e.collectionGroup===this.collectionId);const t=RS(e);if(void 0!==t&&!this.en(t))return!1;const r=Rp(e);let i=new Set,l=0,u=0;for(;l<r.length&&this.en(r[l]);++l)i=i.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[l];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[u++],f))return!1}++l}for(;l<r.length;++l){const f=r[l];if(u>=this.Ye.length||!this.sn(this.Ye[u++],f))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function c2(n){var e,t;if(Tt(n instanceof vn||n instanceof Un),n instanceof vn){if(n instanceof cF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(l=>vn.create(n.field,"==",l)))||[];return Un.create(i,"or")}return n}const r=n.filters.map(i=>c2(i));return Un.create(r,n.op)}function OB(n){if(0===n.getFilters().length)return[];const e=hM(c2(n));return Tt(u2(e)),uM(e)||dM(e)?[e]:e.getFilters()}function uM(n){return n instanceof vn}function dM(n){return n instanceof Un&&$S(n)}function u2(n){return uM(n)||dM(n)||function(e){if(e instanceof Un&&HS(e)){for(const t of e.getFilters())if(!uM(t)&&!dM(t))return!1;return!0}return!1}(n)}function hM(n){if(Tt(n instanceof vn||n instanceof Un),n instanceof vn)return n;if(1===n.filters.length)return hM(n.filters[0]);const e=n.filters.map(r=>hM(r));let t=Un.create(e,n.op);return t=fT(t),u2(t)?t:(Tt(t instanceof Un),Tt(f_(t)),Tt(t.filters.length>1),t.filters.reduce((r,i)=>fM(r,i)))}function fM(n,e){let t;return Tt(n instanceof vn||n instanceof Un),Tt(e instanceof vn||e instanceof Un),t=n instanceof vn?e instanceof vn?Un.create([n,e],"and"):d2(n,e):e instanceof vn?d2(e,n):function(r,i){if(Tt(r.filters.length>0&&i.filters.length>0),f_(r)&&f_(i))return sF(r,i.getFilters());const l=HS(r)?r:i,u=HS(r)?i:r,f=l.filters.map(m=>fM(m,u));return Un.create(f,"or")}(n,e),fT(t)}function d2(n,e){if(f_(e))return sF(e,n.getFilters());{const t=e.filters.map(r=>fM(n,r));return Un.create(t,"or")}}function fT(n){if(Tt(n instanceof vn||n instanceof Un),n instanceof vn)return n;const e=n.getFilters();if(1===e.length)return fT(e[0]);if(iF(n))return n;const t=e.map(i=>fT(i)),r=[];return t.forEach(i=>{i instanceof vn?r.push(i):i instanceof Un&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Un.create(r,n.op)}class NB{constructor(){this.rn=new pM}addToCollectionParentIndex(e,t){return this.rn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Us.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class pM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dr(En.comparator),l=!i.has(r);return this.index[t]=i.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(En.comparator)).toArray()}}const pT=new Uint8Array(0);class RB{constructor(e,t){this.user=e,this.databaseId=t,this.on=new pM,this.un=new ld(r=>Vp(r),(r,i)=>X0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const l={collectionId:r,parent:vo(i)};return h2(e).put(l)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[kR(t),""],!1,!0);return h2(e).j(i).next(l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Oc(u.parent))}return r})}addFieldIndex(e,t){const r=gT(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var u;delete i.indexId;const l=r.add(i);if(t.indexState){const u=mC(e);return l.next(f=>{u.put(i2(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return l.next()}deleteFieldIndex(e,t){const r=gT(e),i=mC(e),l=gC(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=gC(e);let i=!0;const l=new Map;return ce.forEach(this.cn(t),u=>this.an(e,u).next(f=>{i&&(i=!!f),l.set(u,f)})).next(()=>{if(i){let u=rn();const f=[];return ce.forEach(l,(m,v)=>{var x;Be("IndexedDbIndexManager",`Using index ${x=m,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Vp(t)}`);const D=function(je,Ke){const Ut=RS(Ke);if(void 0===Ut)return null;for(const Bt of rT(je,Ut.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(v,m),L=function(je,Ke){const Ut=new Map;for(const Bt of Rp(Ke))for(const wn of rT(je,Bt.fieldPath))switch(wn.op){case"==":case"in":Ut.set(Bt.fieldPath.canonicalString(),wn.value);break;case"not-in":case"!=":return Ut.set(Bt.fieldPath.canonicalString(),wn.value),Array.from(Ut.values())}return null}(v,m),j=function(je,Ke){const Ut=[];let Bt=!0;for(const wn of Rp(Ke)){const Sr=0===wn.kind?uF(je,wn.fieldPath,je.startAt):dF(je,wn.fieldPath,je.startAt);Ut.push(Sr.value),Bt&&(Bt=Sr.inclusive)}return new jh(Ut,Bt)}(v,m),q=function(je,Ke){const Ut=[];let Bt=!0;for(const wn of Rp(Ke)){const Sr=0===wn.kind?dF(je,wn.fieldPath,je.endAt):uF(je,wn.fieldPath,je.endAt);Ut.push(Sr.value),Bt&&(Bt=Sr.inclusive)}return new jh(Ut,Bt)}(v,m),ee=this.hn(m,v,j),ae=this.hn(m,v,q),Ue=this.ln(m,v,L),Ge=this.fn(m.indexId,D,ee,j.inclusive,ae,q.inclusive,Ue);return ce.forEach(Ge,je=>r.H(je,t.limit).next(Ke=>{Ke.forEach(Ut=>{const Bt=rt.fromSegments(Ut.documentKey);u.has(Bt)||(u=u.add(Bt),f.push(Bt))})}))}).next(()=>f)}return ce.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:OB(Un.create(e.filters,"and")).map(r=>GS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,l,u,f){const m=(null!=t?t.length:1)*Math.max(r.length,l.length),v=m/(null!=t?t.length:1),x=[];for(let D=0;D<m;++D){const L=t?this.dn(t[D/v]):pT,j=this.wn(e,L,r[D%v],i),q=this._n(e,L,l[D%v],u),ee=f.map(ae=>this.wn(e,L,ae,!0));x.push(...this.createRange(j,q,ee))}return x}wn(e,t,r,i){const l=new qp(e,rt.empty(),t,r);return i?l:l.Je()}_n(e,t,r,i){const l=new qp(e,rt.empty(),t,r);return i?l.Je():l}an(e,t){const r=new PB(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(l=>{let u=null;for(const f of l)r.tn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u})}getIndexType(e,t){let r=2;const i=this.cn(t);return ce.forEach(i,l=>this.an(e,l).next(u=>{u?0!==r&&u.fields.length<function(f){let m=new dr(Ur.comparator),v=!1;for(const x of f.filters)for(const D of x.getFlattenedFilters())D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?v=!0:m=m.add(D.field));for(const x of f.orderBy)x.field.isKeyField()||(m=m.add(x.field));return m.size+(v?1:0)}(l)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new pC;for(const i of Rp(e)){const l=t.data.field(i.fieldPath);if(null==l)return null;const u=r.He(i.kind);Gp.Ve._e(l,u)}return r.Qe()}dn(e){const t=new pC;return Gp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new pC;return Gp.Ve._e(Lp(this.databaseId,t),r.He(function(i){const l=Rp(i);return 0===l.length?0:l[l.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new pC);let l=0;for(const u of Rp(e)){const f=r[l++];for(const m of i)if(this.yn(t,u.fieldPath)&&Q0(f))i=this.pn(i,u,f);else{const v=m.He(u.kind);Gp.Ve._e(f,v)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of i){const m=new pC;m.seed(f.Qe()),Gp.Ve._e(u,m.He(t.kind)),l.push(m)}return l}yn(e,t){return!!e.filters.find(r=>r instanceof vn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gT(e),i=mC(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(l=>{const u=[];return ce.forEach(l,f=>i.get([f.indexId,this.uid]).next(m=>{u.push(function(v,x){const D=x?new G0(x.sequenceNumber,new Us($p(x.readTime),new rt(Oc(x.documentKey)),x.largestBatchId)):G0.empty(),L=v.fields.map(([j,q])=>new zE(Ur.fromServerFormat(j),q));return new qE(v.indexId,v.collectionGroup,L,D)}(f,m))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const l=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==l?l:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=gT(e),l=mC(e);return this.Tn(e).next(u=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ce.forEach(f,m=>l.put(i2(m.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,l)=>{const u=r.get(i.collectionGroup);return(u?ce.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ce.forEach(f,m=>this.En(e,i,m).next(v=>{const x=this.An(l,m);return v.isEqual(x)?ce.resolve():this.vn(e,l,m,v,x)}))))})}Rn(e,t,r,i){return gC(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return gC(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=gC(e);let l=new dr($h);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(u,f)=>{l=l.add(new qp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>l)}An(e,t){let r=new dr($h);const i=this.mn(t,e);if(null==i)return r;const l=RS(t);if(null!=l){const u=e.data.field(l.fieldPath);if(Q0(u))for(const f of u.arrayValue.values||[])r=r.add(new qp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new qp(t.indexId,e.key,pT,i));return r}vn(e,t,r,i,l){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(f,m,v,x,D){const L=f.getIterator(),j=m.getIterator();let q=u_(L),ee=u_(j);for(;q||ee;){let ae=!1,Ue=!1;if(q&&ee){const Ge=v(q,ee);Ge<0?Ue=!0:Ge>0&&(ae=!0)}else null!=q?Ue=!0:ae=!0;ae?(x(ee),ee=u_(j)):Ue?(D(q),q=u_(L)):(q=u_(L),ee=u_(j))}}(i,l,$h,f=>{u.push(this.Rn(e,t,r,f))},f=>{u.push(this.Pn(e,t,r,f))}),ce.waitFor(u)}Tn(e){let t=1;return mC(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,l)=>{l.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,f)=>$h(u,f)).filter((u,f,m)=>!f||0!==$h(u,m[f-1]));const i=[];i.push(e);for(const u of r){const f=$h(u,e),m=$h(u,t);if(0===f)i[0]=e.Je();else if(f>0&&m<0)i.push(u),i.push(u.Je());else if(m>0)break}i.push(t);const l=[];for(let u=0;u<i.length;u+=2){if(this.bn(i[u],i[u+1]))return[];l.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,pT,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,pT,[]]))}return l}bn(e,t){return $h(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(f2)}getMinOffset(e,t){return ce.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ft())).next(f2)}}function h2(n){return Vi(n,"collectionParents")}function gC(n){return Vi(n,"indexEntries")}function gT(n){return Vi(n,"indexConfiguration")}function mC(n){return Vi(n,"indexState")}function f2(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;FS(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Us(e.readTime,e.documentKey,t)}const p2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Co{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Co(e,Co.DEFAULT_COLLECTION_PERCENTILE,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function g2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const m=r.X({range:u},(x,D,L)=>(f++,L.delete()));l.push(m.next(()=>{Tt(1===f)}));const v=[];for(const x of t.mutations){const D=BR(e,x.key.path,t.batchId);l.push(i.delete(D)),v.push(x.key)}return ce.waitFor(l).next(()=>v)}function mT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}Co.DEFAULT_COLLECTION_PERCENTILE=10,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Co.DEFAULT=new Co(41943040,Co.DEFAULT_COLLECTION_PERCENTILE,Co.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Co.DISABLED=new Co(-1,0,0);class _T{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Tt(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new _T(l,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).X({index:"userMutationsIndex",range:r},(i,l,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const l=w_(e),u=Zh(e);return u.add({}).next(f=>{Tt("number"==typeof f);const m=new JS(f,t,r,i),v=function(L,j,q){const ee=q.baseMutations.map(Ue=>dC(L.fe,Ue)),ae=q.mutations.map(Ue=>dC(L.fe,Ue));return{userId:j,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:ee,mutations:ae}}(this.serializer,this.userId,m),x=[];let D=new dr((L,j)=>Kt(L.canonicalString(),j.canonicalString()));for(const L of i){const j=BR(this.userId,L.key.path,f);D=D.add(L.key.path.popLast()),x.push(u.put(v)),x.push(l.put(j,b6))}return D.forEach(L=>{x.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[f]=m.keys()}),ce.waitFor(x).next(()=>m)})}lookupMutationBatch(e,t){return Zh(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Zp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ce.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Zh(e).X({index:"userMutationsIndex",range:i},(u,f,m)=>{f.userId===this.userId&&(Tt(f.batchId>=r),l=Zp(this.serializer,f)),m.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Zh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,l,u)=>{r=l.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Zp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=KE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),l=[];return w_(e).X({range:i},(u,f,m)=>{const[v,x,D]=u,L=Oc(x);if(v===this.userId&&t.path.isEqual(L))return Zh(e).get(D).next(j=>{if(!j)throw ft();Tt(j.userId===this.userId),l.push(Zp(this.serializer,j))});m.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(Kt);const i=[];return t.forEach(l=>{const u=KE(this.userId,l.path),f=IDBKeyRange.lowerBound(u),m=w_(e).X({range:f},(v,x,D)=>{const[L,j,q]=v,ee=Oc(j);L===this.userId&&l.path.isEqual(ee)?r=r.add(q):D.done()});i.push(m)}),ce.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,l=KE(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new dr(Kt);return w_(e).X({range:u},(m,v,x)=>{const[D,L,j]=m,q=Oc(L);D===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(j)):x.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(l=>{i.push(Zh(e).get(l).next(u=>{if(null===u)throw ft();Tt(u.userId===this.userId),r.push(Zp(this.serializer,u))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return g2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return w_(e).X({range:r},(l,u,f)=>{if(l[0]===this.userId){const m=Oc(l[1]);i.push(m)}else f.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return m2(e,this.userId,t)}xn(e){return _2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function m2(n,e,t){const r=KE(e,t.path),i=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return w_(n).X({range:l,Y:!0},(f,m,v)=>{const[x,D,L]=f;x===e&&D===i&&(u=!0),v.done()}).next(()=>u)}function Zh(n){return Vi(n,"mutations")}function w_(n){return Vi(n,"documentMutations")}function _2(n){return Vi(n,"mutationQueues")}class zp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new zp(0)}static Mn(){return new zp(-1)}}class FB{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new zp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new Ir(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>b_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const l=[];return b_(e).X((u,f)=>{const m=hC(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,l.push(this.removeTargetData(e,m)))}).next(()=>ce.waitFor(l)).next(()=>i)}forEachTarget(e,t){return b_(e).X((r,i)=>{const l=hC(i);t(l)})}$n(e){return y2(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}On(e,t){return y2(e).put("targetGlobalKey",t)}Fn(e,t){return b_(e).put(n2(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return b_(e).X({range:i,index:"queryTargetsIndex"},(u,f,m)=>{const v=hC(f);X0(t,v.target)&&(l=v,m.done())}).next(()=>l)}addMatchingKeys(e,t,r){const i=[],l=Gh(e);return t.forEach(u=>{const f=vo(u.path);i.push(l.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,u))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gh(e);return ce.forEach(t,l=>{const u=vo(l.path);return ce.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Gh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gh(e);let l=rn();return i.X({range:r,Y:!0},(u,f,m)=>{const v=Oc(u[1]),x=new rt(v);l=l.add(x)}).next(()=>l)}containsKey(e,t){const r=vo(t.path),i=IDBKeyRange.bound([r],[kR(r)],!1,!0);let l=0;return Gh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([u,f],m,v)=>{0!==u&&(l++,v.done())}).next(()=>l>0)}le(e,t){return b_(e).get(t).next(r=>r?hC(r):null)}}function b_(n){return Vi(n,"targets")}function y2(n){return Vi(n,"targetGlobal")}function Gh(n){return Vi(n,"targetDocuments")}function v2([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class LB{constructor(e){this.Ln=e,this.buffer=new dr(v2),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();v2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class C2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,te.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Nh(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Oh(r)}yield t.Qn(3e5)}))}}class VB{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Bs.ct);const r=new LB(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(p2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),p2):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,l,u,f,m,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,f=Date.now(),this.removeTargets(e,r,t))).next(D=>(l=D,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(v=Date.now(),OS()<=Ec.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-x}ms\n\tDetermined least recently used ${i} in `+(f-u)+`ms\n\tRemoved ${l} targets in `+(m-f)+`ms\n\tRemoved ${D} documents in `+(v-m)+`ms\nTotal Duration: ${v-x}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:D})))}}class UB{constructor(e,t){this.db=e,this.garbageCollector=function w2(n,e){return new VB(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return yT(e,r)}removeReference(e,t,r){return yT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yT(e,t)}Xn(e,t){return function(r,i){let l=!1;return _2(r).Z(u=>m2(r,u,i).next(f=>(f&&(l=!0),ce.resolve(!f)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let l=0;return this.Yn(e,(u,f)=>{if(f<=t){const m=this.Xn(e,u).next(v=>{if(!v)return l++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Dt.min()),Gh(e).delete([0,vo(u.path)])))});i.push(m)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yT(e,t)}Yn(e,t){const r=Gh(e);let i,l=Bs.ct;return r.X({index:"documentTargetsIndex"},([u,f],{path:m,sequenceNumber:v})=>{0===u?(l!==Bs.ct&&t(new rt(Oc(i)),l),l=v,i=m):l=Bs.ct}).next(()=>{l!==Bs.ct&&t(new rt(Oc(i)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yT(n,e){return Gh(n).put((r=n.currentSequenceNumber,{targetId:0,path:vo(e.path),sequenceNumber:r}));var r}class b2{constructor(){this.changes=new ld(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class BB{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Wp(e).put(r)}removeEntry(e,t,r){return Wp(e).delete(function(i,l){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],dT(l),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=hr.newInvalidDocument(t);return Wp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_C(t))},(i,l)=>{r=this.ts(t,l)}).next(()=>r)}es(e,t){let r={size:0,document:hr.newInvalidDocument(t)};return Wp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(_C(t))},(i,l)=>{r={document:this.ts(t,l),size:mT(l)}}).next(()=>r)}getEntries(e,t){let r=hs();return this.ns(e,t,(i,l)=>{const u=this.ts(i,l);r=r.insert(i,u)}).next(()=>r)}ss(e,t){let r=hs(),i=new rr(rt.comparator);return this.ns(e,t,(l,u)=>{const f=this.ts(l,u);r=r.insert(l,f),i=i.insert(l,mT(u))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ce.resolve();let i=new dr(x2);t.forEach(m=>i=i.add(m));const l=IDBKeyRange.bound(_C(i.first()),_C(i.last())),u=i.getIterator();let f=u.getNext();return Wp(e).X({index:"documentKeyIndex",range:l},(m,v,x)=>{const D=rt.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&x2(f,D)<0;)r(f,null),f=u.getNext();f&&f.isEqual(D)&&(r(f,v),f=u.hasNext()?u.getNext():null),f?x.G(_C(f)):x.done()}).next(()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const l=t.path,u=[l.popLast().toArray(),l.lastSegment(),dT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wp(e).j(IDBKeyRange.bound(u,f,!0)).next(m=>{let v=hs();for(const x of m){const D=this.ts(rt.fromSegments(x.prefixPath.concat(x.collectionGroup,x.documentId)),x);D.isFoundDocument()&&(tC(t,D)||i.has(D.key))&&(v=v.insert(D.key,D))}return v})}getAllFromCollectionGroup(e,t,r,i){let l=hs();const u=T2(t,r),f=T2(t,Us.max());return Wp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,f,!0)},(m,v,x)=>{const D=this.ts(rt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);l=l.insert(D.key,D),l.size===i&&x.done()}).next(()=>l)}newChangeBuffer(e){return new jB(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return E2(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Zn(e,t){return E2(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function xB(n,e){let t;if(e.document)t=WF(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=$p(e.noDocument.readTime);t=hr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=rt.fromSegments(e.unknownDocument.path),i=$p(e.unknownDocument.version);t=hr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ir(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return hr.newInvalidDocument(e)}}function I2(n){return new BB(n)}class jB extends b2{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ld(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new dr((l,u)=>Kt(l.canonicalString(),u.canonicalString()));return this.changes.forEach((l,u)=>{const f=this.us.get(l);if(t.push(this.os.removeEntry(e,l,f.readTime)),u.isValidDocument()){const m=t2(this.os.serializer,u);i=i.add(l.path.popLast()),r+=mT(m)-f.size,t.push(this.os.addEntry(e,l,m))}else if(r-=f.size,this.trackRemovals){const m=t2(this.os.serializer,u.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,l,m))}}),i.forEach(l=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,l))}),t.push(this.os.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((l,u)=>{this.us.set(l,{size:u,readTime:r.get(l).readTime})}),r))}}function E2(n){return Vi(n,"remoteDocumentGlobal")}function Wp(n){return Vi(n,"remoteDocumentsV14")}function _C(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function T2(n,e){const t=e.documentKey.path.toArray();return[n,dT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function x2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(i=Kt(t[l],r[l]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class HB{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class D2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&oC(r.mutation,i,ds.empty(),Ir.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,rn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=rn()){const i=Rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(l=>{let u=nC();return l.forEach((f,m)=>{u=u.insert(f,m.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,rn()))}populateOverlays(e,t,r){const i=[];return r.forEach(l=>{t.has(l)||i.push(l)}),this.documentOverlayCache.getOverlays(e,i).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,i){let l=hs();const u=rC(),f=rC();return t.forEach((m,v)=>{const x=r.get(v.key);i.has(v.key)&&(void 0===x||x.mutation instanceof cd)?l=l.insert(v.key,v):void 0!==x?(u.set(v.key,x.mutation.getFieldMask()),oC(x.mutation,v,x.mutation.getFieldMask(),Ir.now())):u.set(v.key,ds.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((v,x)=>u.set(v,x)),t.forEach((v,x)=>{var D;return f.set(v,new HB(x,null!==(D=u.get(v))&&void 0!==D?D:null))}),f))}recalculateAndSaveOverlays(e,t){const r=rC();let i=new rr((u,f)=>u-f),l=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let x=r.get(m)||ds.empty();x=f.applyToLocalView(v,x),r.set(m,x);const D=(i.get(f.batchId)||rn()).add(m);i=i.insert(f.batchId,D)})}).next(()=>{const u=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,x=m.value,D=vF();x.forEach(L=>{if(!l.has(L)){const j=AF(t.get(L),r.get(L));null!==j&&D.set(L,j),l=l.add(L)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,D))}return ce.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):zS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(l=>{const u=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-l.size):ce.resolve(Rc());let f=-1,m=l;return u.next(v=>ce.forEach(v,(x,D)=>(f<D.largestBatchId&&(f=D.largestBatchId),l.get(x)?ce.resolve():this.remoteDocumentCache.getEntry(e,x).next(L=>{m=m.insert(x,L)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,m,v,rn())).next(x=>({batchId:f,changes:yF(x)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=nC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let l=nC();return this.indexManager.getCollectionParents(e,i).next(u=>ce.forEach(u,f=>{const m=(v=t,x=f.child(i),new ad(x,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,x;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((x,D)=>{l=l.insert(x,D)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(i=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(l=>{i.forEach((f,m)=>{const v=m.getKey();null===l.get(v)&&(l=l.insert(v,hr.newInvalidDocument(v)))});let u=nC();return l.forEach((f,m)=>{const v=i.get(f);void 0!==v&&oC(v.mutation,m,ds.empty(),Ir.now()),tC(t,m)&&(u=u.insert(f,m))}),u})}}class $B{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ce.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:lM(r.bundledQuery),readTime:Wr(r.readTime)}),ce.resolve();var r}}class ZB{constructor(){this.overlays=new rr(rt.comparator),this.ls=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Rc();return ce.forEach(t,i=>this.getOverlay(e,i).next(l=>{null!==l&&r.set(i,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,l)=>{this.we(e,t,l)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(l=>this.overlays=this.overlays.remove(l)),this.ls.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=Rc(),l=t.length+1,u=new rt(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let l=new rr((v,x)=>v-x);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let x=l.get(v.largestBatchId);null===x&&(x=Rc(),l=l.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const f=Rc(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,x)=>f.set(v,x)),!(f.size()>=i)););return ce.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new eM(t,r));let l=this.ls.get(t);void 0===l&&(l=rn(),this.ls.set(t,l)),this.ls.set(t,l.add(r.key))}}class gM{constructor(){this.fs=new dr(Ui.ds),this.ws=new dr(Ui._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ui(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new rt(new En([])),r=new Ui(t,e),i=new Ui(t,e+1),l=[];return this.ws.forEachInRange([r,i],u=>{this.ys(u),l.push(u.key)}),l}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rt(new En([])),r=new Ui(t,e),i=new Ui(t,e+1);let l=rn();return this.ws.forEachInRange([r,i],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Ui(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rt.comparator(e.key,t.key)||Kt(e.As,t.As)}static _s(e,t){return Kt(e.As,t.As)||rt.comparator(e.key,t.key)}}class GB{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new dr(Ui.ds)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const l=this.vs;this.vs++;const u=new JS(l,t,r,i);this.mutationQueue.push(u);for(const f of i)this.Rs=this.Rs.add(new Ui(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ce.resolve(u)}lookupMutationBatch(e,t){return ce.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),l=i<0?0:i;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),l=[];return this.Rs.forEachInRange([r,i],u=>{const f=this.Ps(u.As);l.push(f)}),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(Kt);return t.forEach(i=>{const l=new Ui(i,0),u=new Ui(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([l,u],f=>{r=r.add(f.As)})}),ce.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let l=r;rt.isDocumentKey(l)||(l=l.child(""));const u=new Ui(new rt(l),0);let f=new dr(Kt);return this.Rs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.As)),!0)},u),ce.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ce.forEach(t.mutations,i=>{const l=new Ui(i.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ui(t,0),i=this.Rs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class qB{constructor(e){this.Ds=e,this.docs=new rr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),l=i?i.size:0,u=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():hr.newInvalidDocument(t))}getEntries(e,t){let r=hs();return t.forEach(i=>{const l=this.docs.get(i);r=r.insert(i,l?l.document.mutableCopy():hr.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let l=hs();const u=t.path,f=new rt(u.child("")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:v,value:{document:x}}=m.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||FS(OR(x),r)<=0||(i.has(x.key)||tC(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,t,r,i){ft()}Cs(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zB(this)}getSize(e){return ce.resolve(this.size)}}class zB extends b2{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class WB{constructor(e){this.persistence=e,this.xs=new ld(t=>Vp(t),X0),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new gM,this.targetCount=0,this.Ms=zp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ce.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new zp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Fn(t),ce.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const l=[];return this.xs.forEach((u,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ce.waitFor(l).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach(u=>{l.push(i.markPotentiallyOrphaned(e,u))}),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.ks.containsKey(t))}}class mM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Bs(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new WB(this),this.indexManager=new NB,this.remoteDocumentCache=new qB(r=>this.referenceDelegate.Ls(r)),this.serializer=new e2(t),this.qs=new $B(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZB,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new GB(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new KB(this.Os.next());return this.referenceDelegate.Us(),r(i).next(l=>this.referenceDelegate.Ks(i).next(()=>l)).toPromise().then(l=>(i.raiseOnCommittedEvent(),l))}Gs(e,t){return ce.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class KB extends RR{constructor(e){super(),this.currentSequenceNumber=e}}class vT{constructor(e){this.persistence=e,this.Qs=new gM,this.js=null}static zs(e){return new vT(e)}get Ws(){if(this.js)return this.js;throw ft()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(l=>this.Ws.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ws,r=>{const i=rt.fromPath(r);return this.Hs(e,i).next(l=>{l||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ce.or([()=>ce.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class YB{constructor(e){this.serializer=e}O(e,t,r,i){const l=new WE("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UR,{unique:!0}),f.createObjectStore("documentMutations"),A2(e),function(f){f.createObjectStore("remoteDocuments")}(e));let u=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),A2(e)),u=u.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(l))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(f,m){return m.store("mutations").j().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UR,{unique:!0});const x=m.store("mutations"),D=v.map(L=>x.put(L));return ce.waitFor(D)})}(e,l))),u=u.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ys(l))),r<6&&i>=6&&(u=u.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(l)))),r<7&&i>=7&&(u=u.next(()=>this.Zs(l))),r<8&&i>=8&&(u=u.next(()=>this.ti(e,l))),r<9&&i>=9&&(u=u.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.ei(l))),r<11&&i>=11&&(u=u.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:N6});m.createIndex("collectionPathOverlayIndex",R6,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",F6,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:I6});m.createIndex("documentKeyIndex",E6),m.createIndex("collectionGroupIndex",T6)}(e)).next(()=>this.ni(e,l)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.si(e,l))),r<15&&i>=15&&(u=u.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:M6}).createIndex("sequenceNumberIndex",k6,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:P6}).createIndex("documentKeyIndex",O6,{unique:!1})}(e))),u}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=mT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ce.forEach(i,l=>{const u=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",u).next(f=>ce.forEach(f,m=>{Tt(m.userId===l.userId);const v=Zp(this.serializer,m);return g2(e,l.userId,v).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const l=[];return r.X((u,f)=>{const m=new En(u),v=[0,vo(m)];l.push(t.get(v).next(x=>x?ce.resolve():t.put({targetId:0,path:vo(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(l))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:S6});const r=t.store("collectionParents"),i=new pM,l=u=>{if(i.add(u)){const f=u.lastSegment(),m=u.popLast();return r.put({collectionId:f,parent:vo(m)})}};return t.store("remoteDocuments").X({Y:!0},(u,f)=>{const m=new En(u);return l(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([u,f,m],v)=>{const x=Oc(f);return l(x.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const l=hC(i),u=n2(this.serializer,l);return t.put(u)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((l,u)=>{const f=t.store("remoteDocumentsV14"),m=(v=u,v.document?new rt(En.fromString(v.document.name).popFirst(5)):v.noDocument?rt.fromSegments(v.noDocument.path):v.unknownDocument?rt.fromSegments(v.unknownDocument.path):ft()).path.toArray();var v;const x={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(f.put(x))}).next(()=>ce.waitFor(i))}si(e,t){const r=t.store("mutations"),i=I2(this.serializer),l=new mM(vT.zs,this.serializer.fe);return r.j().next(u=>{const f=new Map;return u.forEach(m=>{var v;let x=null!==(v=f.get(m.userId))&&void 0!==v?v:rn();Zp(this.serializer,m).keys().forEach(D=>x=x.add(D)),f.set(m.userId,x)}),ce.forEach(f,(m,v)=>{const x=new Li(v),D=hT.de(this.serializer,x),L=l.getIndexManager(x),j=_T.de(x,this.serializer,L,l.referenceDelegate);return new D2(i,j,D,L).recalculateAndSaveOverlaysForDocumentKeys(new US(t,Bs.ct),m).next()})})}}function A2(n){n.createObjectStore("targetDocuments",{keyPath:D6}).createIndex("documentTargetsIndex",A6,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",x6,{unique:!0}),n.createObjectStore("targetGlobal")}const _M="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yM{constructor(e,t,r,i,l,u,f,m,v,x,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=l,this.window=u,this.document=f,this.ri=v,this.oi=x,this.ui=D,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!yM.D())throw new Re(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UB(this,i),this.di=t+"main",this.serializer=new e2(m),this.wi=new bl(this.di,this.ui,new YB(this.serializer)),this.Bs=new FB(this.referenceDelegate,this.serializer),this.remoteDocumentCache=I2(this.serializer),this.qs=new DB,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===x&&zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,_M);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Bs(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,te.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Nh(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return yC(e).get("owner").next(t=>ce.resolve(this.Ri(t)))}Pi(e){return wT(e).delete(this.clientId)}bi(){var e=this;return(0,te.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Vi(r,"clientMetadata");return i.j().next(l=>{const u=e.Si(l,18e5),f=l.filter(m=>-1===u.indexOf(m));return ce.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ce.resolve(!0):yC(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ge.FAILED_PRECONDITION,_M);return!1}}return!(!this.networkEnabled||!this.inForeground)||wT(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,te.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new US(t,Bs.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>wT(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return _T.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RB(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return hT.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",l=15===(u=this.ui)?V6:14===u?$R:13===u?HR:12===u?L6:11===u?jR:void ft();var u;let f;return this.wi.runTransaction(e,i,l,m=>(f=new US(m,this.Os?this.Os.next():Bs.ct),"readwrite-primary"===t?this.Ti(f).next(v=>!!v||this.Ei(f)).next(v=>{if(!v)throw zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ge.FAILED_PRECONDITION,NR);return r(f)}).next(v=>this.vi(f).next(()=>v)):this.Oi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Oi(e){return yC(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ge.FAILED_PRECONDITION,_M)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return yC(e).put("owner",t)}static D(){return bl.D()}Ai(e){const t=yC(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Zt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){zr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function yC(n){return Vi(n,"owner")}function wT(n){return Vi(n,"clientMetadata")}function vM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class CM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=rn(),i=rn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new CM(e,t.fromCache,r,i)}}class S2{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(l=>l||this.Gi(e,t,i,r)).next(l=>l||this.Qi(e,t))}Ki(e,t){if(fF(t))return ce.resolve(null);let r=jo(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=oT(t,null,"F"),r=jo(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=rn(...l);return this.Ui.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.ji(t,f);return this.zi(t,v,u,m.readTime)?this.Ki(e,oT(t,null,"F")):this.Wi(e,v,t,m)}))})))}Gi(e,t,r,i){return fF(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(l=>{const u=this.ji(t,l);return this.zi(t,u,r,i)?this.Qi(e,t):(OS()<=Ec.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),KS(t)),this.Wi(e,u,t,PR(i,-1)))})}ji(e,t){let r=new dr(mF(e));return t.forEach((i,l)=>{tC(e,l)&&(r=r.add(l))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const l="F"===e.limitType?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Qi(e,t){return OS()<=Ec.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",KS(t)),this.Ui.getDocumentsMatchingQuery(e,t,Us.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}class QB{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new rr(Kt),this.Yi=new ld(l=>Vp(l),X0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new D2(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function M2(n,e,t,r){return new QB(n,e,t,r)}function k2(n,e){return wM.apply(this,arguments)}function wM(){return wM=(0,te.Z)(function*(n,e){const t=ot(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(l=>(i=l,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],f=[];let m=rn();for(const v of i){u.push(v.batchId);for(const x of v.mutations)m=m.add(x.key)}for(const v of l){f.push(v.batchId);for(const x of v.mutations)m=m.add(x.key)}return t.localDocuments.getDocuments(r,m).next(v=>({er:v,removedBatchIds:u,addedBatchIds:f}))})})}),wM.apply(this,arguments)}function JB(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),l=t.Zi.newChangeBuffer({trackRemovals:!0});return function(u,f,m,v){const x=m.batch,D=x.keys();let L=ce.resolve();return D.forEach(j=>{L=L.next(()=>v.getEntry(f,j)).next(q=>{const ee=m.docVersions.get(j);Tt(null!==ee),q.version.compareTo(ee)<0&&(x.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),v.addEntry(q)))})}),L.next(()=>u.mutationQueue.removeMutationBatch(f,x))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let f=rn();for(let m=0;m<u.mutationResults.length;++m)u.mutationResults[m].transformResults.length>0&&(f=f.add(u.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function P2(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function XB(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((x,D)=>{const L=i.get(D);if(!L)return;f.push(t.Bs.removeMatchingKeys(l,x.removedDocuments,D).next(()=>t.Bs.addMatchingKeys(l,x.addedDocuments,D)));let j=L.withSequenceNumber(l.currentSequenceNumber);var q,ee,ae;null!==e.targetMismatches.get(D)?j=j.withResumeToken(bi.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):x.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(x.resumeToken,r)),i=i.insert(D,j),ee=j,ae=x,(0===(q=L).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||ae.addedDocuments.size+ae.modifiedDocuments.size+ae.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(l,j))});let m=hs(),v=rn();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))}),f.push(O2(l,u,e.documentUpdates).next(x=>{m=x.nr,v=x.sr})),!r.isEqual(Dt.min())){const x=t.Bs.getLastRemoteSnapshotVersion(l).next(D=>t.Bs.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(x)}return ce.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,m,v)).next(()=>m)}).then(l=>(t.Ji=i,l))}function O2(n,e,t){let r=rn(),i=rn();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=hs();return t.forEach((f,m)=>{const v=l.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Dt.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):Be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{nr:u,sr:i}})}function e4(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function I_(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(l=>l?(i=l,ce.resolve(i)):t.Bs.allocateTargetId(r).next(u=>(i=new ud(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function E_(n,e,t){return bM.apply(this,arguments)}function bM(){return bM=(0,te.Z)(function*(n,e,t){const r=ot(n),i=r.Ji.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!Nh(u))throw u;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),bM.apply(this,arguments)}function bT(n,e,t){const r=ot(n);let i=Dt.min(),l=rn();return r.persistence.runTransaction("Execute query","readonly",u=>function(f,m,v){const x=ot(f),D=x.Yi.get(v);return void 0!==D?ce.resolve(x.Ji.get(D)):x.Bs.getTargetData(m,v)}(r,u,jo(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(u,f.targetId).next(m=>{l=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(u,e,t?i:Dt.min(),t?l:rn())).next(f=>(F2(r,gF(e),f),{documents:f,ir:l})))}function N2(n,e){const t=ot(n),r=ot(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",l=>r.le(l,e).next(u=>u?u.target:null))}function R2(n,e){const t=ot(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,PR(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(F2(t,e,i),i))}function F2(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Xi.set(e,r)}function IM(){return IM=(0,te.Z)(function*(n,e,t,r){const i=ot(n);let l=rn(),u=hs();for(const v of t){const x=e.rr(v.metadata.name);v.document&&(l=l.add(x));const D=e.ur(v);D.setReadTime(e.cr(v.metadata.readTime)),u=u.insert(x,D)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield I_(i,(v=r,jo(p_(En.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>O2(v,f,u).next(x=>(f.apply(v),x)).next(x=>i.Bs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Bs.addMatchingKeys(v,l,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,x.nr,x.sr)).next(()=>x.nr)))}),IM.apply(this,arguments)}function n4(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,te.Z)(function*(n,e,t=rn()){const r=yield I_(n,jo(lM(e.bundledQuery))),i=ot(n);return i.persistence.runTransaction("Save named query","readwrite",l=>{const u=Wr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.qs.saveNamedQuery(l,e);const f=r.withResumeToken(bi.EMPTY_BYTE_STRING,u);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(l,f).next(()=>i.Bs.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>i.Bs.addMatchingKeys(l,t,r.targetId)).next(()=>i.qs.saveNamedQuery(l,e))})}),EM.apply(this,arguments)}function L2(n,e){return`firestore_clients_${n}_${e}`}function V2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function TM(n,e){return`firestore_targets_${n}_${e}`}class IT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let l,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(l=new Re(i.error.code,i.error.message))),u?new IT(e,t,i.state,l):(zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(i=new Re(r.error.code,r.error.message))),l?new vC(e,r.state,i):(zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ET{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,l=YS();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=LR(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return i?new ET(e,l):(zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xM{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xM(t.clientId,t.onlineState):(zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class DM{constructor(){this.activeTargetIds=YS()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AM{constructor(e,t,r,i,l){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new rr(Kt),this.started=!1,this.yr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.pr=L2(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new DM),this.Tr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,te.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const l=e.getItem(L2(e.persistenceKey,i));if(l){const u=ET.ar(i,l);u&&(e.gr=e.gr.insert(u.clientId,u))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(TM(this.persistenceKey,e));if(r){const i=vC.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TM(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,te.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(l){let u=Bs.ct;if(null!=l)try{const f=JSON.parse(l);Tt("number"==typeof f),u=f}catch(f){zr("SharedClientState","Failed to read sequence number from WebStorage",f)}return u}(r.newValue);i!==Bs.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(l=>t.syncEngine.Qr(l)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new IT(this.currentUser,e,t,r),l=V2(this.persistenceKey,this.currentUser,e);this.setItem(l,i.hr())}Cr(e){const t=V2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=TM(this.persistenceKey,e),l=new vC(e,t,r);this.setItem(i,l.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return ET.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return IT.ar(new Li(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return vC.ar(i,t)}br(e){return xM.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),l=this.Sr(r),u=[],f=[];return l.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{l.has(m)||f.push(m)}),this.syncEngine.Wr(u,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=YS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class U2{constructor(){this.Hr=new DM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new DM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class r4{Yr(e){}shutdown(){}}class B2{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let TT=null;function SM(){return null===TT?TT=268435456+Math.round(2147483648*Math.random()):TT++,"0x"+TT.toString(16)}const i4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class o4{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const wo="WebChannelConnection";class s4 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,l){const u=SM(),f=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${u}:`,f,r);const m={};return this.Eo(m,i,l),this.Ao(e,f,m,r).then(v=>(Be("RestConnection",`Received RPC '${e}' ${u}: `,v),v),v=>{throw Ia("RestConnection",`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v})}vo(e,t,r,i,l,u){return this.Io(e,t,r,i,l)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+l_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,l)=>e[l]=i),r&&r.headers.forEach((i,l)=>e[l]=i)}To(e,t){return`${this.mo}/v1/${t}:${i4[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const l=SM();return new Promise((u,f)=>{const m=new r6;m.setWithCredentials(!0),m.listenOnce(e6.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case PS.NO_ERROR:const x=m.getResponseJson();Be(wo,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(x)),u(x);break;case PS.TIMEOUT:Be(wo,`RPC '${e}' ${l} timed out`),f(new Re(ge.DEADLINE_EXCEEDED,"Request time out"));break;case PS.HTTP_ERROR:const D=m.getStatus();if(Be(wo,`RPC '${e}' ${l} failed with status:`,D,"response text:",m.getResponseText()),D>0){let L=m.getResponseJson();Array.isArray(L)&&(L=L[0]);const j=L?.error;if(j&&j.status&&j.message){const q=function(ee){const ae=ee.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(ae)>=0?ae:ge.UNKNOWN}(j.status);f(new Re(q,j.message))}else f(new Re(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new Re(ge.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Be(wo,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(i);Be(wo,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",v,r,15)})}Ro(e,t,r){const i=SM(),l=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=J3(),f=X3(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;void 0!==v&&(m.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(m.xmlHttpFactory=new n6({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const x=l.join("");Be(wo,`Creating RPC '${e}' stream ${i}: ${x}`,m);const D=u.createWebChannel(x,m);let L=!1,j=!1;const q=new o4({ro:ae=>{j?Be(wo,`Not sending because RPC '${e}' stream ${i} is closed:`,ae):(L||(Be(wo,`Opening RPC '${e}' stream ${i} transport.`),D.open(),L=!0),Be(wo,`RPC '${e}' stream ${i} sending:`,ae),D.send(ae))},oo:()=>D.close()}),ee=(ae,Ue,Ge)=>{ae.listen(Ue,je=>{try{Ge(je)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return ee(D,GE.EventType.OPEN,()=>{j||Be(wo,`RPC '${e}' stream ${i} transport opened.`)}),ee(D,GE.EventType.CLOSE,()=>{j||(j=!0,Be(wo,`RPC '${e}' stream ${i} transport closed`),q.wo())}),ee(D,GE.EventType.ERROR,ae=>{j||(j=!0,Ia(wo,`RPC '${e}' stream ${i} transport errored:`,ae),q.wo(new Re(ge.UNAVAILABLE,"The operation could not be completed")))}),ee(D,GE.EventType.MESSAGE,ae=>{var Ue;if(!j){const Ge=ae.data[0];Tt(!!Ge);const je=Ge,Ke=je.error||(null===(Ue=je[0])||void 0===Ue?void 0:Ue.error);if(Ke){Be(wo,`RPC '${e}' stream ${i} received error:`,Ke);const Ut=Ke.status;let Bt=function(Sr){const bo=oi[Sr];if(void 0!==bo)return NF(bo)}(Ut),wn=Ke.message;void 0===Bt&&(Bt=ge.INTERNAL,wn="Unknown error status: "+Ut+" with message "+Ke.message),j=!0,q.wo(new Re(Bt,wn)),D.close()}else Be(wo,`RPC '${e}' stream ${i} received:`,Ge),q._o(Ge)}}),ee(f,t6.STAT_EVENT,ae=>{ae.stat===xR.PROXY?Be(wo,`RPC '${e}' stream ${i} detected buffering proxy`):ae.stat===xR.NOPROXY&&Be(wo,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function j2(){return typeof window<"u"?window:null}function xT(){return typeof document<"u"?document:null}function CC(n){return new mB(n,!0)}class MM{constructor(e,t,r=1e3,i=1.5,l=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=l,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class H2{constructor(e,t,r,i,l,u,f,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new MM(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,te.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,te.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,te.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Re(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,te.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a4 extends H2{constructor(e,t,r,i,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=l}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function vB(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ft(),i=e.targetChange.targetIds||[],l=function(m,v){return m.useProto3Json?(Tt(void 0===v||"string"==typeof v),bi.fromBase64String(v||"")):(Tt(void 0===v||v instanceof Uint8Array),bi.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(m){const v=void 0===m.code?ge.UNKNOWN:NF(m.code);return new Re(v,m.message||"")}(u);t=new UF(r,i,l,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Fc(n,r.document.name),l=Wr(r.document.updateTime),u=r.document.createTime?Wr(r.document.createTime):Dt.min(),f=new no({mapValue:{fields:r.document.fields}}),m=hr.newFoundDocument(i,l,u,f);t=new uT(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Fc(n,r.document),l=r.readTime?Wr(r.readTime):Dt.min(),u=hr.newNoDocument(i,l);t=new uT([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Fc(n,r.document);t=new uT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,{count:i=0,unchangedNames:l}=r,u=new uB(i,l);t=new VF(r.targetId,u)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const l=i.targetChange;return l.targetIds&&l.targetIds.length?Dt.min():l.readTime?Wr(l.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=uC(this.serializer),t.addTarget=function(i,l){let u;const f=l.target;if(u=nT(f)?{documents:KF(i,f)}:{query:aM(i,f)},u.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){u.resumeToken=$F(i,l.resumeToken);const m=rM(i,l.expectedCount);null!==m&&(u.expectedCount=m)}else if(l.snapshotVersion.compareTo(Dt.min())>0){u.readTime=v_(i,l.snapshotVersion.toTimestamp());const m=rM(i,l.expectedCount);null!==m&&(u.expectedCount=m)}return u}(this.serializer,e);const r=function wB(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=uC(this.serializer),t.removeTarget=e,this.Wo(t)}}class l4 extends H2{constructor(e,t,r,i,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=l,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function CB(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let l=Wr(r.updateTime?r.updateTime:i);return l.isEqual(Dt.min())&&(l=Wr(i)),new sB(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.cu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=uC(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dC(this.serializer,r))};this.Wo(t)}}class c4 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,l])=>this.connection.Io(e,t,r,i,l)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ge.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.vo(e,t,r,l,u,i)).catch(l=>{throw"FirebaseError"===l.name?(l.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Re(ge.UNKNOWN,l.toString())})}terminate(){this.lu=!0}}class d4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(zr(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class h4{constructor(e,t,r,i,l){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=l,this.Pu.Yr(f=>{r.enqueueAndForget((0,te.Z)(function*(){var m;qh(u)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,te.Z)(function*(v){const x=ot(v);x.vu.add(4),yield T_(x),x.bu.set("Unknown"),x.vu.delete(4),yield wC(x)}),function(v){return m.apply(this,arguments)})(u))}))}),this.bu=new d4(r,i)}}function wC(n){return PM.apply(this,arguments)}function PM(){return PM=(0,te.Z)(function*(n){if(qh(n))for(const e of n.Ru)yield e(!0)}),PM.apply(this,arguments)}function T_(n){return OM.apply(this,arguments)}function OM(){return OM=(0,te.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),OM.apply(this,arguments)}function DT(n,e){const t=ot(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),FM(t)?RM(t):D_(t).Ko()&&NM(t,e))}function bC(n,e){const t=ot(n),r=D_(t);t.Au.delete(e),r.Ko()&&$2(t,e),0===t.Au.size&&(r.Ko()?r.jo():qh(t)&&t.bu.set("Unknown"))}function NM(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}D_(n).su(e)}function $2(n,e){n.Vu.qt(e),D_(n).iu(e)}function RM(n){n.Vu=new hB({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),D_(n).start(),n.bu.gu()}function FM(n){return qh(n)&&!D_(n).Uo()&&n.Au.size>0}function qh(n){return 0===ot(n).vu.size}function Z2(n){n.Vu=void 0}function f4(n){return LM.apply(this,arguments)}function LM(){return LM=(0,te.Z)(function*(n){n.Au.forEach((e,t)=>{NM(n,e)})}),LM.apply(this,arguments)}function p4(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,te.Z)(function*(n,e){Z2(n),FM(n)?(n.bu.Iu(e),RM(n)):n.bu.set("Unknown")}),VM.apply(this,arguments)}function g4(n,e,t){return UM.apply(this,arguments)}function UM(){return UM=(0,te.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof UF&&2===e.state&&e.cause)try{yield(r=(0,te.Z)(function*(i,l){const u=l.cause;for(const f of l.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,u),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,l){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield AT(n,r)}else if(e instanceof uT?n.Vu.Ht(e):e instanceof VF?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield P2(n.localStore);t.compareTo(r)>=0&&(yield function(i,l){const u=i.Vu.ce(l);return u.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.Au.get(m);v&&i.Au.set(m,v.withResumeToken(f.resumeToken,l))}}),u.targetMismatches.forEach((f,m)=>{const v=i.Au.get(f);if(!v)return;i.Au.set(f,v.withResumeToken(bi.EMPTY_BYTE_STRING,v.snapshotVersion)),$2(i,f);const x=new ud(v.target,f,m,v.sequenceNumber);NM(i,x)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield AT(n,r)}var r}),UM.apply(this,arguments)}function AT(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,te.Z)(function*(n,e,t){if(!Nh(e))throw e;n.vu.add(1),yield T_(n),n.bu.set("Offline"),t||(t=()=>P2(n.localStore)),n.asyncQueue.enqueueRetryable((0,te.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield wC(n)}))}),BM.apply(this,arguments)}function G2(n,e){return e().catch(t=>AT(n,t,e))}function x_(n){return jM.apply(this,arguments)}function jM(){return jM=(0,te.Z)(function*(n){const e=ot(n),t=zh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;m4(e);)try{const i=yield e4(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,_4(e,i)}catch(i){yield AT(e,i)}q2(e)&&z2(e)}),jM.apply(this,arguments)}function m4(n){return qh(n)&&n.Eu.length<10}function _4(n,e){n.Eu.push(e);const t=zh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function q2(n){return qh(n)&&!zh(n).Uo()&&n.Eu.length>0}function z2(n){zh(n).start()}function y4(n){return HM.apply(this,arguments)}function HM(){return HM=(0,te.Z)(function*(n){zh(n).hu()}),HM.apply(this,arguments)}function v4(n){return $M.apply(this,arguments)}function $M(){return $M=(0,te.Z)(function*(n){const e=zh(n);for(const t of n.Eu)e.uu(t.mutations)}),$M.apply(this,arguments)}function C4(n,e,t){return ZM.apply(this,arguments)}function ZM(){return ZM=(0,te.Z)(function*(n,e,t){const r=n.Eu.shift(),i=XS.from(r,e,t);yield G2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield x_(n)}),ZM.apply(this,arguments)}function w4(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,te.Z)(function*(n,e){var t;e&&zh(n).ou&&(yield(t=(0,te.Z)(function*(r,i){if(OF(l=i.code)&&l!==ge.ABORTED){const u=r.Eu.shift();zh(r).Qo(),yield G2(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield x_(r)}var l}),function(r,i){return t.apply(this,arguments)})(n,e)),q2(n)&&z2(n)}),GM.apply(this,arguments)}function W2(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,te.Z)(function*(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=qh(t);t.vu.add(3),yield T_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield wC(t)}),qM.apply(this,arguments)}function zM(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,te.Z)(function*(n,e){const t=ot(n);e?(t.vu.delete(2),yield wC(t)):e||(t.vu.add(2),yield T_(t),t.bu.set("Unknown"))}),WM.apply(this,arguments)}function D_(n){return n.Su||(n.Su=function(e,t,r){const i=ot(e);return i.fu(),new a4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:f4.bind(null,n),ao:p4.bind(null,n),nu:g4.bind(null,n)}),n.Ru.push(function(){var e=(0,te.Z)(function*(t){t?(n.Su.Qo(),FM(n)?RM(n):n.bu.set("Unknown")):(yield n.Su.stop(),Z2(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function zh(n){return n.Du||(n.Du=function(e,t,r){const i=ot(e);return i.fu(),new l4(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:y4.bind(null,n),ao:w4.bind(null,n),au:v4.bind(null,n),cu:C4.bind(null,n)}),n.Ru.push(function(){var e=(0,te.Z)(function*(t){t?(n.Du.Qo(),yield x_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class KM{constructor(e,t,r,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=l,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,l){const u=Date.now()+r,f=new KM(e,t,u,i,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function A_(n,e){if(zr("AsyncQueue",`${e}: ${n}`),Nh(n))return new Re(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class S_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=nC(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new S_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof S_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=r.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new S_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class K2{constructor(){this.Cu=new rr(rt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ft():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class M_{constructor(e,t,r,i,l,u,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new M_(e,t,S_.emptySet(t),u,r,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eC(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class b4{constructor(){this.Nu=void 0,this.listeners=[]}}class I4{constructor(){this.queries=new ld(e=>pF(e),eC),this.onlineState="Unknown",this.ku=new Set}}function YM(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,te.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1,l=t.queries.get(r);if(l||(i=!0,l=new b4),i)try{l.Nu=yield t.onListen(r)}catch(u){const f=A_(u,`Initialization of query '${KS(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.listeners.push(e),e.Mu(t.onlineState),l.Nu&&e.$u(l.Nu)&&ek(t)}),QM.apply(this,arguments)}function JM(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,te.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1;const l=t.queries.get(r);if(l){const u=l.listeners.indexOf(e);u>=0&&(l.listeners.splice(u,1),i=0===l.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),XM.apply(this,arguments)}function E4(n,e){const t=ot(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const f of u.listeners)f.$u(i)&&(r=!0);u.Nu=i}}r&&ek(t)}function T4(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const l of i.listeners)l.onError(t);r.queries.delete(e)}function ek(n){n.ku.forEach(e=>{e.next()})}class tk{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new M_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=M_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class x4{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Y2{constructor(e){this.serializer=e}rr(e){return Fc(this.serializer,e)}ur(e){return e.metadata.exists?WF(this.serializer,e.document,!1):hr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Wr(e)}}class D4{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Q2(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=En.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Y2(this.serializer);for(const i of e)if(i.metadata.queries){const l=r.rr(i.metadata.name);for(const u of i.metadata.queries){const f=(t.get(u)||rn()).add(l);t.set(u,f)}}return t}complete(){var e=this;return(0,te.Z)(function*(){const t=yield function t4(n,e,t,r){return IM.apply(this,arguments)}(e.localStore,new Y2(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield n4(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Q2(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class J2{constructor(e){this.key=e}}class X2{constructor(e){this.key=e}}class eL{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=rn(),this.mutatedKeys=rn(),this.tc=mF(e),this.ec=new S_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new K2,i=t?t.ec:this.ec;let l=t?t.mutatedKeys:this.mutatedKeys,u=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((x,D)=>{const L=i.get(x),j=tC(this.query,D)?D:null,q=!!L&&this.mutatedKeys.has(L.key),ee=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let ae=!1;L&&j?L.data.isEqual(j.data)?q!==ee&&(r.track({type:3,doc:j}),ae=!0):this.rc(L,j)||(r.track({type:2,doc:j}),ae=!0,(m&&this.tc(j,m)>0||v&&this.tc(j,v)<0)&&(f=!0)):!L&&j?(r.track({type:0,doc:j}),ae=!0):L&&!j&&(r.track({type:1,doc:L}),ae=!0,(m||v)&&(f=!0)),ae&&(j?(u=u.add(j),l=ee?l.add(x):l.delete(x)):(u=u.delete(x),l=l.delete(x)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const x="F"===this.query.limitType?u.last():u.first();u=u.delete(x.key),l=l.delete(x.key),r.track({type:1,doc:x})}return{ec:u,ic:r,zi:f,mutatedKeys:l}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const l=e.ic.xu();l.sort((v,x)=>function(D,L){const j=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return j(D)-j(L)}(v.type,x.type)||this.tc(v.doc,x.doc)),this.oc(r);const u=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,m=f!==this.Xu;return this.Xu=f,0!==l.length||m?{snapshot:new M_(this.query,e.ec,i,l,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:u}:{cc:u}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new K2,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=rn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new X2(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new J2(r))}),t}hc(e){this.Yu=e.ir,this.Zu=rn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return M_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class A4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class S4{constructor(e){this.key=e,this.fc=!1}}class M4{constructor(e,t,r,i,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.dc={},this.wc=new ld(f=>pF(f),eC),this._c=new Map,this.mc=new Set,this.gc=new rr(rt.comparator),this.yc=new Map,this.Ic=new gM,this.Tc={},this.Ec=new Map,this.Ac=zp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function k4(n,e){return nk.apply(this,arguments)}function nk(){return nk=(0,te.Z)(function*(n,e){const t=Tk(n);let r,i;const l=t.wc.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),i=l.view.lc();else{const u=yield I_(t.localStore,jo(e)),f=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield rk(t,e,r,"current"===f,u.resumeToken),t.isPrimaryClient&&DT(t.remoteStore,u)}return i}),nk.apply(this,arguments)}function rk(n,e,t,r,i){return ik.apply(this,arguments)}function ik(){return ik=(0,te.Z)(function*(n,e,t,r,i){n.Rc=(D,L,j)=>{return(q=(0,te.Z)(function*(ee,ae,Ue,Ge){let je=ae.view.sc(Ue);je.zi&&(je=yield bT(ee.localStore,ae.query,!1).then(({documents:Bt})=>ae.view.sc(Bt,je)));const Ke=Ge&&Ge.targetChanges.get(ae.targetId),Ut=ae.view.applyChanges(je,ee.isPrimaryClient,Ke);return pk(ee,ae.targetId,Ut.cc),Ut.snapshot}),function(ee,ae,Ue,Ge){return q.apply(this,arguments)})(n,D,L,j);var q};const l=yield bT(n.localStore,e,!0),u=new eL(e,l.ir),f=u.sc(l.documents),m=lC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=u.applyChanges(f,n.isPrimaryClient,m);pk(n,t,v.cc);const x=new A4(e,t,u);return n.wc.set(e,x),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),v.snapshot}),ik.apply(this,arguments)}function P4(n,e){return ok.apply(this,arguments)}function ok(){return ok=(0,te.Z)(function*(n,e){const t=ot(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(l=>!eC(l,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield E_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),bC(t.remoteStore,r.targetId),k_(t,r.targetId)}).catch(Oh))):(k_(t,r.targetId),yield E_(t.localStore,r.targetId,!0))}),ok.apply(this,arguments)}function sk(){return sk=(0,te.Z)(function*(n,e,t){const r=xk(n);try{const i=yield function(l,u){const f=ot(l),m=Ir.now(),v=u.reduce((L,j)=>L.add(j.key),rn());let x,D;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let j=hs(),q=rn();return f.Zi.getEntries(L,v).next(ee=>{j=ee,j.forEach((ae,Ue)=>{Ue.isValidDocument()||(q=q.add(ae))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,j)).next(ee=>{x=ee;const ae=[];for(const Ue of u){const Ge=lB(Ue,x.get(Ue.key).overlayedDocument);null!=Ge&&ae.push(new cd(Ue.key,Ge,eF(Ge.value.mapValue),Er.exists(!0)))}return f.mutationQueue.addMutationBatch(L,m,ae,u)}).next(ee=>{D=ee;const ae=ee.applyToLocalDocumentSet(x,q);return f.documentOverlayCache.saveOverlays(L,ee.batchId,ae)})}).then(()=>({batchId:D.batchId,changes:yF(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,u,f){let m=l.Tc[l.currentUser.toKey()];m||(m=new rr(Kt)),m=m.insert(u,f),l.Tc[l.currentUser.toKey()]=m}(r,i.batchId,t),yield dd(r,i.changes),yield x_(r.remoteStore)}catch(i){const l=A_(i,"Failed to persist write");t.reject(l)}}),sk.apply(this,arguments)}function tL(n,e){return ak.apply(this,arguments)}function ak(){return ak=(0,te.Z)(function*(n,e){const t=ot(n);try{const r=yield XB(t.localStore,e);e.targetChanges.forEach((i,l)=>{const u=t.yc.get(l);u&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.fc=!0:i.modifiedDocuments.size>0?Tt(u.fc):i.removedDocuments.size>0&&(Tt(u.fc),u.fc=!1))}),yield dd(t,r,e)}catch(r){yield Oh(r)}}),ak.apply(this,arguments)}function nL(n,e,t){const r=ot(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((l,u)=>{const f=u.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(l,u){const f=ot(l);f.onlineState=u;let m=!1;f.queries.forEach((v,x)=>{for(const D of x.listeners)D.Mu(u)&&(m=!0)}),m&&ek(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function N4(n,e,t){return lk.apply(this,arguments)}function lk(){return lk=(0,te.Z)(function*(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),l=i&&i.key;if(l){let u=new rr(rt.comparator);u=u.insert(l,hr.newNoDocument(l,Dt.min()));const f=rn().add(l),m=new aC(Dt.min(),new Map,new rr(Kt),u,f);yield tL(r,m),r.gc=r.gc.remove(l),r.yc.delete(e),gk(r)}else yield E_(r.localStore,e,!1).then(()=>k_(r,e,t)).catch(Oh)}),lk.apply(this,arguments)}function R4(n,e){return ck.apply(this,arguments)}function ck(){return ck=(0,te.Z)(function*(n,e){const t=ot(n),r=e.batch.batchId;try{const i=yield JB(t.localStore,e);fk(t,r,null),hk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dd(t,i)}catch(i){yield Oh(i)}}),ck.apply(this,arguments)}function F4(n,e,t){return uk.apply(this,arguments)}function uk(){return uk=(0,te.Z)(function*(n,e,t){const r=ot(n);try{const i=yield function(l,u){const f=ot(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,u).next(x=>(Tt(null!==x),v=x.keys(),f.mutationQueue.removeMutationBatch(m,x))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,u)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);fk(r,e,t),hk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dd(r,i)}catch(i){yield Oh(i)}}),uk.apply(this,arguments)}function dk(){return dk=(0,te.Z)(function*(n,e){const t=ot(n);qh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const u=ot(l);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>u.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=A_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dk.apply(this,arguments)}function hk(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fk(n,e,t){const r=ot(n);let i=r.Tc[r.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function k_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||rL(n,r)})}function rL(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(bC(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),gk(n))}function pk(n,e,t){for(const r of t)r instanceof J2?(n.Ic.addReference(r.key,e),V4(n,r)):r instanceof X2?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||rL(n,r.key)):ft()}function V4(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),gk(n))}function gk(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new rt(En.fromString(e)),r=n.Ac.next();n.yc.set(r,new S4(t)),n.gc=n.gc.insert(t,r),DT(n.remoteStore,new ud(jo(p_(t.path)),r,"TargetPurposeLimboResolution",Bs.ct))}}function dd(n,e,t){return mk.apply(this,arguments)}function mk(){return mk=(0,te.Z)(function*(n,e,t){const r=ot(n),i=[],l=[],u=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,m)=>{u.push(r.Rc(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const x=CM.Li(m.targetId,v);l.push(x)}}))}),yield Promise.all(u),r.dc.nu(i),yield(f=(0,te.Z)(function*(m,v){const x=ot(m);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>ce.forEach(v,L=>ce.forEach(L.Fi,j=>x.persistence.referenceDelegate.addReference(D,L.targetId,j)).next(()=>ce.forEach(L.Bi,j=>x.persistence.referenceDelegate.removeReference(D,L.targetId,j)))))}catch(D){if(!Nh(D))throw D;Be("LocalStore","Failed to update sequence numbers: "+D)}for(const D of v){const L=D.targetId;if(!D.fromCache){const j=x.Ji.get(L),ee=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);x.Ji=x.Ji.insert(L,ee)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,l))}),mk.apply(this,arguments)}function U4(n,e){return _k.apply(this,arguments)}function _k(){return _k=(0,te.Z)(function*(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield k2(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(u=>{u.forEach(f=>{f.reject(new Re(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dd(t,r.er)}var i}),_k.apply(this,arguments)}function B4(n,e){const t=ot(n),r=t.yc.get(e);if(r&&r.fc)return rn().add(r.key);{let i=rn();const l=t._c.get(e);if(!l)return i;for(const u of l){const f=t.wc.get(u);i=i.unionWith(f.view.nc)}return i}}function j4(n,e){return yk.apply(this,arguments)}function yk(){return yk=(0,te.Z)(function*(n,e){const t=ot(n),r=yield bT(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&pk(t,e.targetId,i.cc),i}),yk.apply(this,arguments)}function H4(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,te.Z)(function*(n,e){const t=ot(n);return R2(t.localStore,e).then(r=>dd(t,r))}),vk.apply(this,arguments)}function $4(n,e,t,r){return Ck.apply(this,arguments)}function Ck(){return Ck=(0,te.Z)(function*(n,e,t,r){const i=ot(n),l=yield function(u,f){const m=ot(u),v=ot(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",x=>v.Sn(x,f).next(D=>D?m.localDocuments.getDocuments(x,D):ce.resolve(null)))}(i.localStore,e);var f;null!==l?("pending"===t?yield x_(i.remoteStore):"acknowledged"===t||"rejected"===t?(fk(i,e,r||null),hk(i,e),f=e,ot(ot(i.localStore).mutationQueue).Cn(f)):ft(),yield dd(i,l)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ck.apply(this,arguments)}function wk(){return wk=(0,te.Z)(function*(n,e){const t=ot(n);if(Tk(t),xk(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield iL(t,r.toArray());t.vc=!0,yield zM(t.remoteStore,!0);for(const l of i)DT(t.remoteStore,l)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(k_(t,u),E_(t.localStore,u,!0))),bC(t.remoteStore,u)}),yield i,yield iL(t,r),function(l){const u=ot(l);u.yc.forEach((f,m)=>{bC(u.remoteStore,m)}),u.Ic.Ts(),u.yc=new Map,u.gc=new rr(rt.comparator)}(t),t.vc=!1,yield zM(t.remoteStore,!1)}}),wk.apply(this,arguments)}function iL(n,e,t){return bk.apply(this,arguments)}function bk(){return bk=(0,te.Z)(function*(n,e,t){const r=ot(n),i=[],l=[];for(const u of e){let f;const m=r._c.get(u);if(m&&0!==m.length){f=yield I_(r.localStore,jo(m[0]));for(const v of m){const x=r.wc.get(v),D=yield j4(r,x);D.snapshot&&l.push(D.snapshot)}}else{const v=yield N2(r.localStore,u);f=yield I_(r.localStore,v),yield rk(r,oL(v),u,!1,f.resumeToken)}i.push(f)}return r.dc.nu(l),i}),bk.apply(this,arguments)}function oL(n){return hF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function G4(n){const e=ot(n);return ot(ot(e.localStore).persistence).$i()}function q4(n,e,t,r){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,te.Z)(function*(n,e,t,r){const i=ot(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const l=i._c.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=yield R2(i.localStore,gF(l[0])),f=aC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,bi.EMPTY_BYTE_STRING);yield dd(i,u,f);break}case"rejected":yield E_(i.localStore,e,!0),k_(i,e,r);break;default:ft()}}),Ik.apply(this,arguments)}function z4(n,e,t){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,te.Z)(function*(n,e,t){const r=Tk(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const l=yield N2(r.localStore,i),u=yield I_(r.localStore,l);yield rk(r,oL(l),u.targetId,!1,u.resumeToken),DT(r.remoteStore,u)}for(const i of t)r._c.has(i)&&(yield E_(r.localStore,i,!1).then(()=>{bC(r.remoteStore,i),k_(r,i)}).catch(Oh))}}),Ek.apply(this,arguments)}function Tk(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N4.bind(null,e),e.dc.nu=E4.bind(null,e.eventManager),e.dc.Pc=T4.bind(null,e.eventManager),e}function xk(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F4.bind(null,e),e}class IC{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,te.Z)(function*(){t.serializer=CC(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return M2(this.persistence,new S2,e.initialUser,this.serializer)}createPersistence(e){return new mM(vT.zs,this.serializer)}createSharedClientState(e){return new U2}terminate(){var e=this;return(0,te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Dk extends IC{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,te.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield xk(r.Vc.syncEngine),yield x_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return M2(this.persistence,new S2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new C2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new C6(t,this.persistence);return new v6(e.asyncQueue,r)}createPersistence(e){const t=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Co.withCacheSize(this.cacheSizeBytes):Co.DEFAULT;return new yM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,j2(),xT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new U2}}class sL extends Dk{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,te.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof AM&&(r.sharedClientState.syncEngine={jr:$4.bind(null,i),zr:q4.bind(null,i),Wr:z4.bind(null,i),$i:G4.bind(null,i),Qr:H4.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var l=(0,te.Z)(function*(u){yield function Z4(n,e){return wk.apply(this,arguments)}(r.Vc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return l.apply(this,arguments)}}())})()}createSharedClientState(e){const t=j2();if(!AM.D(t))throw new Re(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class P_{initialize(e,t){var r=this;return(0,te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>nL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=U4.bind(null,r.syncEngine),yield zM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new I4}createDatastore(e){const t=CC(e.databaseInfo.databaseId),r=new s4(e.databaseInfo);return new c4(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,l=f=>nL(this.syncEngine,f,0),u=B2.D()?new B2:new r4,new h4(t,r,i,l,u);var t,r,i,l,u}createSyncEngine(e,t){return function(r,i,l,u,f,m,v){const x=new M4(r,i,l,u,f,m);return v&&(x.vc=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,te.Z)(function*(t){const r=ot(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield T_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aL(n,e=10240){let t=0;return{read:()=>(0,te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Y4{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new wi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,te.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,te.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,te.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const l=yield e.$c(i);return new x4(JSON.parse(l),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,te.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,te.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Q4{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,te.Z)(function*(l,u){const f=ot(l),m=uC(f.serializer)+"/documents",v={documents:u.map(j=>cC(f.serializer,j))},x=yield f.vo("BatchGetDocuments",m,v,u.length),D=new Map;x.forEach(j=>{const q=function yB(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=Fc(t,r.found.name),l=Wr(r.found.updateTime),u=r.found.createTime?Wr(r.found.createTime):Dt.min(),f=new no({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(i,l,u,f)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=Fc(t,r.missing),l=Wr(r.readTime);return hr.newNoDocument(i,l)}(n,e):ft()}(f.serializer,j);D.set(q.key.toString(),q)});const L=[];return u.forEach(j=>{const q=D.get(j.toString());Tt(!!q),L.push(q)}),L}),function(l,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new y_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const l=rt.fromPath(i);e.mutations.push(new QS(l,e.precondition(l)))}),yield(r=(0,te.Z)(function*(i,l){const u=ot(i),f=uC(u.serializer)+"/documents",m={writes:l.map(v=>dC(u.serializer,v))};yield u.Io("Commit",f,m)}),function(i,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?Er.exists(!1):Er.updateTime(t):Er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Er.updateTime(t)}return Er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class J4{constructor(e,t,r,i,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=l,this.Bc=r.maxAttempts,this.qo=new MM(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,te.Z)(function*(){const t=new Q4(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(l=>{e.Uc(l)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!z0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!OF(t)}return!1}}class X4{constructor(e,t,r,i){var l=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Li.UNAUTHENTICATED,this.clientId=MR.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,te.Z)(function*(f){Be("FirestoreClient","Received user=",f.uid),yield l.authCredentialListener(f),l.user=f});return function(f){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=A_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function MT(n,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,te.Z)(function*(l){r.isEqual(l)||(yield k2(e.localStore,l),r=l)});return function(l){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Ak.apply(this,arguments)}function Sk(n,e){return Mk.apply(this,arguments)}function Mk(){return Mk=(0,te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield kk(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>W2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,l)=>W2(e.remoteStore,l)),n._onlineComponents=e}),Mk.apply(this,arguments)}function lL(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function kk(n){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,te.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield MT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!lL(t))throw t;Ia("Error using user provided cache. Falling back to memory cache: "+t),yield MT(n,new IC)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield MT(n,new IC);return n._offlineComponents}),Pk.apply(this,arguments)}function kT(n){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,te.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield Sk(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield Sk(n,new P_))),n._onlineComponents}),Ok.apply(this,arguments)}function cL(n){return kk(n).then(e=>e.persistence)}function PT(n){return kk(n).then(e=>e.localStore)}function uL(n){return kT(n).then(e=>e.remoteStore)}function Nk(n){return kT(n).then(e=>e.syncEngine)}function O_(n){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,te.Z)(function*(n){const e=yield kT(n),t=e.eventManager;return t.onListen=k4.bind(null,e.syncEngine),t.onUnlisten=P4.bind(null,e.syncEngine),t}),Rk.apply(this,arguments)}function hL(n,e,t={}){const r=new wi;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(i,l,u,f,m){const v=new ST({next:D=>{l.enqueueAndForget(()=>JM(i,x));const L=D.docs.has(u);!L&&D.fromCache?m.reject(new Re(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&D.fromCache&&f&&"server"===f.source?m.reject(new Re(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(D)},error:D=>m.reject(D)}),x=new tk(p_(u.path),v,{includeMetadataChanges:!0,Ku:!0});return YM(i,x)}(yield O_(n),n.asyncQueue,e,t,r)})),r.promise}function fL(n,e,t={}){const r=new wi;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function(i,l,u,f,m){const v=new ST({next:D=>{l.enqueueAndForget(()=>JM(i,x)),D.fromCache&&"server"===f.source?m.reject(new Re(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(D)},error:D=>m.reject(D)}),x=new tk(u,v,{includeMetadataChanges:!0,Ku:!0});return YM(i,x)}(yield O_(n),n.asyncQueue,e,t,r)})),r.promise}function pL(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const gL=new Map;function Fk(n,e,t){if(!t)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function mL(n,e,t,r){if(!0===e&&!0===r)throw new Re(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _L(n){if(!rt.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yL(n){if(rt.isDocumentKey(n))throw new Re(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function OT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=OT(n);throw new Re(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vL(n,e){if(e<=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CL{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=pL(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class EC{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CL({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new a6;switch(t.type){case"firstParty":return new d6(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=gL.get(e);t&&(Be("ComponentProvider","Removing Datastore"),gL.delete(e),t.terminate())}(this),Promise.resolve()}}class fr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fr(this.firestore,e,this._key)}}class ro{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ro(this.firestore,e,this._query)}}class Lc extends ro{constructor(e,t,r){super(e,t,p_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fr(this.firestore,null,new rt(e))}withConverter(e){return new Lc(this.firestore,e,this._path)}}function bL(n,e,...t){if(n=(0,Zt.m9)(n),Fk("collection","path",e),n instanceof EC){const r=En.fromString(e,...t);return yL(r),new Lc(n,null,r)}{if(!(n instanceof fr||n instanceof Lc))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return yL(r),new Lc(n.firestore,null,r)}}function NT(n,e,...t){if(n=(0,Zt.m9)(n),1===arguments.length&&(e=MR.A()),Fk("doc","path",e),n instanceof EC){const r=En.fromString(e,...t);return _L(r),new fr(n,null,new rt(r))}{if(!(n instanceof fr||n instanceof Lc))throw new Re(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return _L(r),new fr(n.firestore,n instanceof Lc?n.converter:null,new rt(r))}}function IL(n,e){return n=(0,Zt.m9)(n),e=(0,Zt.m9)(e),(n instanceof fr||n instanceof Lc)&&(e instanceof fr||e instanceof Lc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Lk(n,e){return n=(0,Zt.m9)(n),e=(0,Zt.m9)(e),n instanceof ro&&e instanceof ro&&n.firestore===e.firestore&&eC(n._query,e._query)&&n.converter===e.converter}class cj{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new MM(this,"async_queue_retry"),this.Xc=()=>{const t=xT();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=xT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=xT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new wi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,te.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Nh(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,zr("INTERNAL UNHANDLED ERROR: ",function(l){let u=l.message||"";return l.stack&&(u=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),u}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=KM.createAndSchedule(this,e,t,r,l=>this.na(l));return this.zc.push(i),i}Zc(){this.Wc&&ft()}verifyOperationInProgress(){}sa(){var e=this;return(0,te.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Vk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class uj{constructor(){this._progressObserver={},this._taskCompletionResolver=new wi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends EC{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new cj,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||EL(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||EL(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function EL(n){var e,t,r;const i=n._freezeSettings(),l=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new j6(n._databaseId,f,n._persistenceKey,(v=i).host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,pL(v.experimentalLongPollingOptions),v.useFetchStreams));var f,v;n._firestoreClient=new X4(n._authCredentials,n._appCheckCredentials,n._queue,l),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function TL(n,e,t){const r=new wi;return n.asyncQueue.enqueue((0,te.Z)(function*(){try{yield MT(n,t),yield Sk(n,e),r.resolve()}catch(i){const l=i;if(!lL(l))throw l;Ia("Error enabling indexeddb cache. Falling back to memory cache: "+l),r.reject(l)}})).then(()=>r.promise)}function xL(n){if(n._initialized||n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vc(bi.fromBase64String(e))}catch(t){throw new Re(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vc(bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._methodName=e}}class RT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const wj=/^__.*__$/;class bj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cd(e,this.data,this.fieldMask,t,this.fieldTransforms):new __(e,this.data,t,this.fieldTransforms)}}class DL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function AL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class FT{constructor(e,t,r,i,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===l&&this.ua(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new FT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return UT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(AL(this.ca)&&wj.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Ij{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||CC(e)}ya(e,t,r,i=!1){return new FT({ca:e,methodName:t,ga:r,path:Ur.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yp(n){const e=n._freezeSettings(),t=CC(n._databaseId);return new Ij(n._databaseId,!!e.ignoreUndefinedProperties,t)}function LT(n,e,t,r,i,l={}){const u=n.ya(l.merge||l.mergeFields?2:0,e,t,i);Hk("Data must be an object, but it was:",u,r);const f=kL(r,u);let m,v;if(l.merge)m=new ds(u.fieldMask),v=u.fieldTransforms;else if(l.mergeFields){const x=[];for(const D of l.mergeFields){const L=DC(e,D,t);if(!u.contains(L))throw new Re(ge.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);OL(x,L)||x.push(L)}m=new ds(x),v=u.fieldTransforms.filter(D=>m.covers(D.field))}else m=null,v=u.fieldTransforms;return new bj(new no(f),m,v)}class xC extends Kp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xC}}function SL(n,e,t){return new FT({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Uk extends Kp{_toFieldTransform(e){return new iC(e.path,new g_)}isEqual(e){return e instanceof Uk}}class Ej extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=SL(this,e,!0),r=this.pa.map(l=>Qp(l,t)),i=new Bp(r);return new iC(e.path,i)}isEqual(e){return this===e}}class Tj extends Kp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=SL(this,e,!0),r=this.pa.map(l=>Qp(l,t)),i=new jp(r);return new iC(e.path,i)}isEqual(e){return this===e}}class xj extends Kp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new m_(e.serializer,bF(e.serializer,this.Ia));return new iC(e.path,t)}isEqual(e){return this===e}}function Bk(n,e,t,r){const i=n.ya(1,e,t);Hk("Data must be an object, but it was:",i,r);const l=[],u=no.empty();Rh(r,(m,v)=>{const x=VT(e,m,t);v=(0,Zt.m9)(v);const D=i.da(x);if(v instanceof xC)l.push(x);else{const L=Qp(v,D);null!=L&&(l.push(x),u.set(x,L))}});const f=new ds(l);return new DL(u,f,i.fieldTransforms)}function jk(n,e,t,r,i,l){const u=n.ya(1,e,t),f=[DC(e,r,t)],m=[i];if(l.length%2!=0)throw new Re(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<l.length;L+=2)f.push(DC(e,l[L])),m.push(l[L+1]);const v=[],x=no.empty();for(let L=f.length-1;L>=0;--L)if(!OL(v,f[L])){const j=f[L];let q=m[L];q=(0,Zt.m9)(q);const ee=u.da(j);if(q instanceof xC)v.push(j);else{const ae=Qp(q,ee);null!=ae&&(v.push(j),x.set(j,ae))}}const D=new ds(v);return new DL(x,D,u.fieldTransforms)}function ML(n,e,t,r=!1){return Qp(t,n.ya(r?4:3,e))}function Qp(n,e){if(PL(n=(0,Zt.m9)(n)))return Hk("Unsupported field value:",e,n),kL(n,e);if(n instanceof Kp)return function(t,r){if(!AL(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let l=0;for(const u of t){let f=Qp(u,r.wa(l));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),l++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Zt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bF(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ir.fromDate(t);return{timestampValue:v_(r.serializer,i)}}if(t instanceof Ir){const i=new Ir(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:v_(r.serializer,i)}}if(t instanceof RT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Vc)return{bytesValue:$F(r.serializer,t._byteString)};if(t instanceof fr){const i=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(i))throw r._a(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${OT(t)}`)}(n,e)}function kL(n,e){const t={};return GR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rh(n,(r,i)=>{const l=Qp(i,e.ha(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function PL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ir||n instanceof RT||n instanceof Vc||n instanceof fr||n instanceof Kp)}function Hk(n,e,t){if(!PL(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=OT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function DC(n,e,t){if((e=(0,Zt.m9)(e))instanceof hd)return e._internalPath;if("string"==typeof e)return VT(n,e);throw UT("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dj=new RegExp("[~\\*/\\[\\]]");function VT(n,e,t){if(e.search(Dj)>=0)throw UT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw UT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function UT(n,e,t,r,i){const l=r&&!r.isEmpty(),u=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new Re(ge.INVALID_ARGUMENT,f+n+m)}function OL(n,e){return n.some(t=>t.isEqual(e))}class AC{constructor(e,t,r,i,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new fr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Aj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(BT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Aj extends AC{data(){return super.data()}}function BT(n,e){return"string"==typeof e?VT(n,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function NL(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $k{}class SC extends $k{}function Wh(n,e,...t){let r=[];e instanceof $k&&r.push(e),r=r.concat(t),function(i){const l=i.filter(f=>f instanceof N_).length,u=i.filter(f=>f instanceof MC).length;if(l>1||l>0&&u>0)throw new Re(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class MC extends SC{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new MC(e,t,r)}_apply(e){const t=this._parse(e);return VL(e._query,t),new ro(e.firestore,e.converter,WS(e._query,t))}_parse(e){const t=Yp(e.firestore);return function(i,l,u,f,m,v,x){let D;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){LL(x,v);const L=[];for(const j of x)L.push(FL(f,i,j));D={arrayValue:{values:L}}}else D=FL(f,i,x)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||LL(x,v),D=ML(u,"where",x,"in"===v||"not-in"===v);return vn.create(m,v,D)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class N_ extends $k{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new N_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let l=r;const u=i.getFlattenedFilters();for(const f of u)VL(l,f),l=WS(l,f)}(e._query,t),new ro(e.firestore,e.converter,WS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zk extends SC{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zk(e,t)}_apply(e){const t=function(r,i,l){if(null!==r.startAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new h_(i,l);return function(f,m){if(null===qS(f)){const v=iT(f);null!==v&&UL(0,v,m.field)}}(r,u),u}(e._query,this._field,this._direction);return new ro(e.firestore,e.converter,function(r,i){const l=r.explicitOrderBy.concat([i]);return new ad(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class jT extends SC{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jT(e,t,r)}_apply(e){return new ro(e.firestore,e.converter,oT(e._query,this._limit,this._limitType))}}class HT extends SC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new HT(e,t,r)}_apply(e){const t=RL(e,this.type,this._docOrFields,this._inclusive);return new ro(e.firestore,e.converter,(i=t,new ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class $T extends SC{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $T(e,t,r)}_apply(e){const t=RL(e,this.type,this._docOrFields,this._inclusive);return new ro(e.firestore,e.converter,(i=t,new ad((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function RL(n,e,t,r){if(t[0]=(0,Zt.m9)(t[0]),t[0]instanceof AC)return function(i,l,u,f,m){if(!f)throw new Re(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const v=[];for(const x of Up(i))if(x.field.isKeyField())v.push(Lp(l,f.key));else{const D=f.data.field(x.field);if(QE(D))throw new Re(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const L=x.field.canonicalString();throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}v.push(D)}return new jh(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Yp(n.firestore);return function(l,u,f,m,v,x){const D=l.explicitOrderBy;if(v.length>D.length)throw new Re(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let j=0;j<v.length;j++){const q=v[j];if(D[j].field.isKeyField()){if("string"!=typeof q)throw new Re(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!zS(l)&&-1!==q.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const ee=l.path.child(En.fromString(q));if(!rt.isDocumentKey(ee))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const ae=new rt(ee);L.push(Lp(u,ae))}else{const ee=ML(f,m,q);L.push(ee)}}return new jh(L,x)}(n._query,n.firestore._databaseId,i,e,t,r)}}function FL(n,e,t){if("string"==typeof(t=(0,Zt.m9)(t))){if(""===t)throw new Re(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zS(e)&&-1!==t.indexOf("/"))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!rt.isDocumentKey(r))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lp(n,new rt(r))}if(t instanceof fr)return Lp(n,t._key);throw new Re(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${OT(t)}.`)}function LL(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VL(n,e){if(e.isInequality()){const r=iT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const l=qS(n);null!==l&&UL(0,i,l)}const t=function(r,i){for(const l of r)for(const u of l.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function UL(n,e,t){if(!t.isEqual(e))throw new Re(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gk{convertValue(e,t="none"){switch(Uh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(sd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Rh(e,(i,l)=>{r[i]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new RT(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=JE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(K0(e));default:return null}}convertTimestamp(e){const t=Fh(e);return new Ir(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Tt(XF(r));const i=new Lh(r.get(1),r.get(3)),l=new rt(r.popFirst(5));return i.isEqual(t)||zr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function ZT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Lj extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}class Jp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fd extends AC{constructor(e,t,r,i,l,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new kC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(BT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class kC extends fd{data(e={}){return super.data(e)}}class Kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Jp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new kC(this._firestore,this._userDataWriter,r.key,r,new Jp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new kC(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const f=new kC(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==u.type&&(m=l.indexOf(u.doc.key),l=l.delete(u.doc.key)),1!==u.type&&(l=l.add(u.doc),v=l.indexOf(u.doc.key)),{type:Uj(u.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Uj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function jL(n,e){return n instanceof fd&&e instanceof fd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Kh&&e instanceof Kh&&n._firestore===e._firestore&&Lk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Yh extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fr(this.firestore,null,t)}}function HL(n,e,t){n=Cn(n,fr);const r=Cn(n.firestore,pr),i=ZT(n.converter,e,t);return R_(r,[LT(Yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Er.none())])}function $L(n,e,t,...r){n=Cn(n,fr);const i=Cn(n.firestore,pr),l=Yp(i);let u;return u="string"==typeof(e=(0,Zt.m9)(e))||e instanceof hd?jk(l,"updateDoc",n._key,e,t,r):Bk(l,"updateDoc",n._key,e),R_(i,[u.toMutation(n._key,Er.exists(!0))])}function ZL(n,...e){var t,r,i;n=(0,Zt.m9)(n);let l={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||Vk(e[u])||(l=e[u],u++);const f={includeMetadataChanges:l.includeMetadataChanges};if(Vk(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let m,v,x;if(n instanceof fr)v=Cn(n.firestore,pr),x=p_(n._key.path),m={next:D=>{e[u]&&e[u](qk(v,n,D))},error:e[u+1],complete:e[u+2]};else{const D=Cn(n,ro);v=Cn(D.firestore,pr),x=D._query;const L=new Yh(v);m={next:j=>{e[u]&&e[u](new Kh(v,L,D,j))},error:e[u+1],complete:e[u+2]},NL(n._query)}return function(D,L,j,q){const ee=new ST(q),ae=new tk(L,ee,j);return D.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return YM(yield O_(D),ae)})),()=>{ee.Dc(),D.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return JM(yield O_(D),ae)}))}}(Kr(v),x,f,m)}function R_(n,e){return function(t,r){const i=new wi;return t.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function O4(n,e,t){return sk.apply(this,arguments)}(yield Nk(t),r,i)})),i.promise}(Kr(n),e)}function qk(n,e,t){const r=t.docs.get(e._key),i=new Yh(n);return new fd(n,i,e._key,r,new Jp(t.hasPendingWrites,t.fromCache),e.converter)}const rH={maxAttempts:5};class GL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yp(e)}set(e,t,r){this._verifyNotCommitted();const i=Qh(e,this._firestore),l=ZT(i.converter,t,r),u=LT(this._dataReader,"WriteBatch.set",i._key,l,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Er.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const l=Qh(e,this._firestore);let u;return u="string"==typeof(t=(0,Zt.m9)(t))||t instanceof hd?jk(this._dataReader,"WriteBatch.update",l._key,t,r,i):Bk(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qh(e,this._firestore);return this._mutations=this._mutations.concat(new y_(t._key,Er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qh(n,e){if((n=(0,Zt.m9)(n)).firestore!==e)throw new Re(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class iH extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yp(e)}get(e){const t=Qh(e,this._firestore),r=new Lj(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const l=i[0];if(l.isFoundDocument())return new AC(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new AC(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Qh(e,this._firestore),l=ZT(i.converter,t,r),u=LT(this._dataReader,"Transaction.set",i._key,l,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const l=Qh(e,this._firestore);let u;return u="string"==typeof(t=(0,Zt.m9)(t))||t instanceof hd?jk(this._dataReader,"Transaction.update",l._key,t,r,i):Bk(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Qh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qh(e,this._firestore),r=new Yh(this._firestore);return super.get(e).then(i=>new fd(this._firestore,r,t._key,i._document,new Jp(!1,!1),t.converter))}}function zk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zL(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function WL(){if(!function U6(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){l_=Lo.SDK_VERSION,(0,Lo._registerComponent)(new td.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const l=t.getProvider("app").getImmediate(),u=new pr(new c6(t.getProvider("auth-internal")),new h6(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Re(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lh(f.options.projectId,m)}(l,r),l);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Lo.registerVersion)(DR,"3.13.0",n),(0,Lo.registerVersion)(DR,"3.13.0","esm2017")}();class PC{constructor(e){this._delegate=e}static fromBase64String(e){return WL(),new PC(Vc.fromBase64String(e))}static fromUint8Array(e){return zL(),new PC(Vc.fromUint8Array(e))}toBase64(){return WL(),this._delegate.toBase64()}toUint8Array(){return zL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Wk(n){return function fH(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class pH{enableIndexedDbPersistence(e,t){return function hj(n,e){xL(n=Cn(n,pr));const t=Kr(n);if(t._uninitializedComponentsProvider)throw new Re(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Ia("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new P_;return TL(t,i,new Dk(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function fj(n){xL(n=Cn(n,pr));const e=Kr(n);if(e._uninitializedComponentsProvider)throw new Re(ge.FAILED_PRECONDITION,"SDK cache is already specified.");Ia("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new P_;return TL(e,r,new sL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function pj(n){if(n._initialized&&!n._terminated)throw new Re(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,te.Z)(function*(){try{yield(t=(0,te.Z)(function*(r){if(!bl.D())return Promise.resolve();const i=r+"main";yield bl.delete(i)}),function(r){return t.apply(this,arguments)})(vM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KL{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Lh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ia("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function wL(n,e,t,r={}){var i;const l=(n=Cn(n,EC))._getSettings(),u=`${e}:${t}`;if("firestore.googleapis.com"!==l.host&&l.host!==u&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:u,ssl:!1})),r.mockUserToken){let f,m;if("string"==typeof r.mockUserToken)f=r.mockUserToken,m=Li.MOCK_USER;else{f=(0,Zt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Re(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Li(v)}n._authCredentials=new l6(new AR(f,m))}}(this._delegate,e,t,r)}enableNetwork(){return function mj(n){return function ej(n){return n.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield cL(n),t=yield uL(n);return e.setNetworkEnabled(!0),function(r){const i=ot(r);return i.vu.delete(0),wC(i)}(t)}))}(Kr(n=Cn(n,pr)))}(this._delegate)}disableNetwork(){return function _j(n){return function tj(n){return n.asyncQueue.enqueue((0,te.Z)(function*(){const e=yield cL(n),t=yield uL(n);return e.setNetworkEnabled(!1),(r=(0,te.Z)(function*(i){const l=ot(i);l.vu.add(0),yield T_(l),l.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=Cn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,mL("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gj(n){return function(e){const t=new wi;return e.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return function L4(n,e){return dk.apply(this,arguments)}(yield Nk(e),t)})),t.promise}(Kr(n=Cn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function Wj(n,e){return function ij(n,e){const t=new ST(e);return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return r=yield O_(n),i=t,ot(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return r=yield O_(n),i=t,void ot(r).ku.delete(i);var r,i}))}}(Kr(n=Cn(n,pr)),Vk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new F_(this,bL(this._delegate,e))}catch(t){throw Ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,NT(this._delegate,e))}catch(t){throw Ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $o(this,function lj(n,e){if(n=Cn(n,EC),Fk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ro(n,null,(t=e,new ad(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function oH(n,e,t){n=Cn(n,pr);const r=Object.assign(Object.assign({},rH),t);return function(i){if(i.maxAttempts<1)throw new Re(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,l,u){const f=new wi;return i.asyncQueue.enqueueAndForget((0,te.Z)(function*(){const m=yield function dL(n){return kT(n).then(e=>e.datastore)}(i);new J4(i.asyncQueue,m,u,l,f).run()})),f.promise}(Kr(n),i=>e(new iH(n,i)),r)}(this._delegate,t=>e(new YL(this,t)))}batch(){return Kr(this._delegate),new QL(new GL(this._delegate,e=>R_(this._delegate,e)))}loadBundle(e){return function yj(n,e){const t=Kr(n=Cn(n,pr)),r=new uj;return function oj(n,e,t,r){const i=function(l,u){let f;return f="string"==typeof l?RF().encode(l):l,m=function(m,v){if(m instanceof Uint8Array)return aL(m,v);if(m instanceof ArrayBuffer)return aL(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new Y4(m,u);var m}(t,CC(e));n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){!function W4(n,e,t){const r=ot(n);var i;(i=(0,te.Z)(function*(l,u,f){try{const m=yield u.getMetadata();if(yield function(L,j){const q=ot(L),ee=Wr(j.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",ae=>q.qs.getBundleMetadata(ae,j.id)).then(ae=>!!ae&&ae.createTime.compareTo(ee)>=0)}(l.localStore,m))return yield u.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=m).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(Q2(m));const v=new D4(m,l.localStore,u.serializer);let x=yield u.bc();for(;x;){const L=yield v.zu(x);L&&f._updateProgress(L),x=yield u.bc()}const D=yield v.complete();return yield dd(l,D.Ju,void 0),yield function(L,j){const q=ot(L);return q.persistence.runTransaction("Save bundle","readwrite",ee=>q.qs.saveBundleMetadata(ee,j))}(l.localStore,m),f._completeWith(D.progress),Promise.resolve(D.Hu)}catch(m){return Ia("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var L}),function(l,u,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Nk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function vj(n,e){return function sj(n,e){return n.asyncQueue.enqueue((0,te.Z)(function*(){return function(t,r){const i=ot(t);return i.persistence.runTransaction("Get named query","readonly",l=>i.qs.getNamedQuery(l,r))}(yield PT(n),e)}))}(Kr(n=Cn(n,pr)),e).then(t=>t?new ro(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $o(this,t):null)}}class GT extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new PC(new Vc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class YL{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GT(e)}get(e){const t=eg(e);return this._delegate.get(t).then(r=>new OC(this._firestore,new fd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=eg(e);return r?(zk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=eg(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}}class QL{constructor(e){this._delegate=e}set(e,t,r){const i=eg(e);return r?(zk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const l=eg(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...i),this}delete(e){const t=eg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Xp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new kC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new NC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Xp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let l=i.get(t);return l||(l=new Xp(e,new GT(e),t),i.set(t,l)),l}}Xp.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new fr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new Ea(t,new fr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new F_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new F_(this.firestore,bL(this._delegate,e))}catch(t){throw Ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Zt.m9)(e))instanceof fr&&IL(this._delegate,e)}set(e,t){t=zk("DocumentReference.set",t);try{return t?HL(this._delegate,e,t):HL(this._delegate,e)}catch(r){throw Ho(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$L(this._delegate,e):$L(this._delegate,e,t,...r)}catch(i){throw Ho(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qj(n){return R_(Cn(n.firestore,pr),[new y_(n._key,Er.none())])}(this._delegate)}onSnapshot(...e){const t=JL(e),r=XL(e,i=>new OC(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return ZL(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function jj(n){n=Cn(n,fr);const e=Cn(n.firestore,pr),t=Kr(e),r=new Yh(e);return function nj(n,e){const t=new wi;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(r=(0,te.Z)(function*(i,l,u){try{const f=yield function(m,v){const x=ot(m);return x.persistence.runTransaction("read document","readonly",D=>x.localDocuments.getDocument(D,v))}(i,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new Re(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=A_(f,`Failed to get document '${l} from cache`);u.reject(m)}}),function(i,l,u){return r.apply(this,arguments)})(yield PT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new fd(e,r,n._key,i,new Jp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Hj(n){n=Cn(n,fr);const e=Cn(n.firestore,pr);return hL(Kr(e),n._key,{source:"server"}).then(t=>qk(e,n,t))}(this._delegate):function Bj(n){n=Cn(n,fr);const e=Cn(n.firestore,pr);return hL(Kr(e),n._key).then(t=>qk(e,n,t))}(this._delegate),t.then(r=>new OC(this.firestore,new fd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function Ho(n,e,t){return n.message=n.message.replace(e,t),n}function JL(n){for(const e of n)if("object"==typeof e&&!Wk(e))return e;return{}}function XL(n,e){var t,r;let i;return i=Wk(n[0])?n[0]:Wk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{i.next&&i.next(e(l))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class OC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jL(this._delegate,e._delegate)}}class NC extends OC{data(e){const t=this._delegate.data(e);return function s6(n,e){n||ft()}(void 0!==t),t}}class $o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GT(e)}where(e,t,r){try{return new $o(this.firestore,Wh(this._delegate,function Sj(n,e,t){const r=e,i=BT("where",n);return MC._create(i,r,t)}(e,t,r)))}catch(i){throw Ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $o(this.firestore,Wh(this._delegate,function Mj(n,e="asc"){const t=e,r=BT("orderBy",n);return Zk._create(r,t)}(e,t)))}catch(r){throw Ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $o(this.firestore,Wh(this._delegate,function kj(n){return vL("limit",n),jT._create("limit",n,"F")}(e)))}catch(t){throw Ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $o(this.firestore,Wh(this._delegate,function Pj(n){return vL("limitToLast",n),jT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $o(this.firestore,Wh(this._delegate,function Oj(...n){return HT._create("startAt",n,!0)}(...e)))}catch(t){throw Ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $o(this.firestore,Wh(this._delegate,function Nj(...n){return HT._create("startAfter",n,!1)}(...e)))}catch(t){throw Ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $o(this.firestore,Wh(this._delegate,function Rj(...n){return $T._create("endBefore",n,!1)}(...e)))}catch(t){throw Ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $o(this.firestore,Wh(this._delegate,function Fj(...n){return $T._create("endAt",n,!0)}(...e)))}catch(t){throw Ho(t,"endAt()","Query.endAt()")}}isEqual(e){return Lk(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Zj(n){n=Cn(n,ro);const e=Cn(n.firestore,pr),t=Kr(e),r=new Yh(e);return function rj(n,e){const t=new wi;return n.asyncQueue.enqueueAndForget((0,te.Z)(function*(){return(r=(0,te.Z)(function*(i,l,u){try{const f=yield bT(i,l,!0),m=new eL(l,f.ir),v=m.sc(f.documents),x=m.applyChanges(v,!1);u.resolve(x.snapshot)}catch(f){const m=A_(f,`Failed to execute query '${l} against cache`);u.reject(m)}}),function(i,l,u){return r.apply(this,arguments)})(yield PT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Kh(e,r,n,i))}(this._delegate):"server"===e?.source?function Gj(n){n=Cn(n,ro);const e=Cn(n.firestore,pr),t=Kr(e),r=new Yh(e);return fL(t,n._query,{source:"server"}).then(i=>new Kh(e,r,n,i))}(this._delegate):function $j(n){n=Cn(n,ro);const e=Cn(n.firestore,pr),t=Kr(e),r=new Yh(e);return NL(n._query),fL(t,n._query).then(i=>new Kh(e,r,n,i))}(this._delegate),t.then(r=>new Kk(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JL(e),r=XL(e,i=>new Kk(this.firestore,new Kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return ZL(this._delegate,t,r)}withConverter(e){return new $o(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}class mH{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new NC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $o(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new NC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new mH(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new NC(this._firestore,r))})}isEqual(e){return jL(this._delegate,e._delegate)}}class F_ extends $o{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?NT(this._delegate):NT(this._delegate,e))}catch(t){throw Ho(t,"doc()","CollectionReference.doc()")}}add(e){return function zj(n,e){const t=Cn(n.firestore,pr),r=NT(n),i=ZT(n.converter,e);return R_(t,[LT(Yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return IL(this._delegate,e._delegate)}withConverter(e){return new F_(this.firestore,this._delegate.withConverter(e?Xp.getInstance(this.firestore,e):null))}}function eg(n){return Cn(n,fr)}class Yk{constructor(...e){this._delegate=new hd(...e)}static documentId(){return new Yk(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,Zt.m9)(e))instanceof hd&&this._delegate._internalPath.isEqual(e._internalPath)}}class tg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function aH(){return new Uk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new tg(e)}static delete(){const e=function sH(){return new xC("deleteField")}();return e._methodName="FieldValue.delete",new tg(e)}static arrayUnion(...e){const t=function lH(...n){return new Ej("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new tg(t)}static arrayRemove(...e){const t=function cH(...n){return new Tj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new tg(t)}static increment(e){const t=function uH(n){return new xj("increment",n)}(e);return t._methodName="FieldValue.increment",new tg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _H={Firestore:KL,GeoPoint:RT,Timestamp:Ir,Blob:PC,Transaction:YL,WriteBatch:QL,DocumentReference:Ea,DocumentSnapshot:OC,Query:$o,QueryDocumentSnapshot:NC,QuerySnapshot:Kk,CollectionReference:F_,FieldPath:Yk,FieldValue:tg,setLogLevel:function gH(n){!function o6(n){Ph.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function eV(n,e){return function CH(n,e=cN.z){return new Ar.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Qk(n,e){return eV(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function qT(n,e){return Qk(n,e).pipe(Wf(void 0),Z1(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),l=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,f)=>{const m=i.find(x=>x.doc.ref.isEqual(u.ref)),v=t?.payload.docs.find(x=>x.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(u.metadata)||l.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:u}})}),l}))}function tV(n,e,t){return qT(n,t).pipe(ph((r,i)=>function bH(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function IH(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Jk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Jk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Jk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(l=>l.payload),e),[]),function YU(n,e=Zf.y){return n=n??QU,(0,ri.e)((t,r)=>{let i,l=!0;t.subscribe((0,Zn.x)(r,u=>{const f=e(u);(l||!n(i,f))&&(l=!1,i=f,r.next(u))}))})}(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Jk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function nV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function vH(n){(function yH(n,e){n.INTERNAL.registerComponent(new td.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_H)))})(n,(e,t)=>new KL(e,t,new pH)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(uN.Z);class rV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=qT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wf(void 0),Z1(),os(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nV(e);return tV(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Qk(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new iV(this.ref.doc(e),this.afs)}}class iV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:l}=oV(r,t);return new rV(i,l,this.afs)}snapshotChanges(){return function wH(n,e){return eV(n,e).pipe(Wf(void 0),Z1(),(0,ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(un.iC)}}class EH{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),os(t=>t.length>0),un.iC):qT(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=nV(e);return tV(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Qk(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),un.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(un.iC)}}const TH=new o.OlP("angularfire2.enableFirestorePersistence"),xH=new o.OlP("angularfire2.firestore.persistenceSettings"),DH=new o.OlP("angularfire2.firestore.settings"),AH=new o.OlP("angularfire2.firestore.use-emulator");function oV(n,e=(t=>t)){return{query:e(n),ref:n}}let Jh=(()=>{class n{constructor(t,r,i,l,u,f,m,v,x,D,L,j,q,ee,ae,Ue,Ge){this.schedulers=m;const je=(0,Qi.on)(t,f,r),Ke=x;D&&XA(je,f,L,q,ee,ae,j,Ue),[this.firestore,this.persistenceEnabled$]=(0,Qi.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const Ut=f.runOutsideAngular(()=>je.firestore());if(l&&Ut.settings(l),Ke&&Ut.useEmulator(...Ke),i&&!Zo(u)){const Bt=()=>{try{return(0,mn.D)(Ut.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(wn){return typeof console<"u"&&console.warn(wn),wt(!1)}};return[Ut,f.runOutsideAngular(Bt)]}return[Ut,wt(!1)]},[l,Ke,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:u}=oV(i,r),f=this.schedulers.ngZone.run(()=>l);return new rV(f,u,this)}collectionGroup(t,r){const i=r||(u=>u),l=this.firestore.collectionGroup(t);return new EH(i(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new iV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Qi.Dh),o.LFG(Qi.xv,8),o.LFG(TH,8),o.LFG(DH,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(un.HU),o.LFG(xH,8),o.LFG(AH,8),o.LFG(Ni,8),o.LFG(zA,8),o.LFG(WA,8),o.LFG(KA,8),o.LFG(YA,8),o.LFG(QA,8),o.LFG(JA,8),o.LFG(xp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),SH=(()=>{class n{constructor(t){this.firestore=t}getImage(){return this.firestore.collection("galeriasi").snapshotChanges()}getImagesById(t){return this.firestore.collection("galeriasi").doc(t).valueChanges()}addImagenInfo(t){return this.firestore.collection("galeriasi").add(t)}updateImage(t,r){return this.firestore.collection("galeriasi").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ng=(()=>{class n{constructor(t){this.firestore=t}getUsers(){return this.firestore.collection("users").snapshotChanges()}getUserById(t){return this.firestore.collection("users").snapshotChanges()}addIUserInfo(t){return this.firestore.collection("users").add(t)}updateUser(t,r){return this.firestore.collection("users").doc(r).update(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class zT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new zT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new zT(r,this,this._ref))},t)}on(e,t,r,i){let l;return t&&(l="function"==typeof t?u=>t(new zT(u,this,this._ref)):{next:t.next?u=>t.next(new zT(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,l,r||void 0,i||void 0)}}class aV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new pd(e,this._service))}get items(){return this._delegate.items.map(e=>new pd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class pd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function RU(n,e){return JO(n,e)}(this._delegate,e);return new pd(t,this.storage)}get root(){return new pd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new pd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sV(function MU(n,e,t){return function yU(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new WO(n,new us(e),t)}(n=(0,Zt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Ct.RAW,r){this._throwIfRoot("putString");const i=Gn(t,e),l=Object.assign({},r);return null==l.contentType&&null!=i.contentType&&(l.contentType=i.contentType),new sV(new WO(this._delegate,new us(i.data,!0),l),this)}listAll(){return iN(this._delegate).then(e=>new aV(e,this.storage))}list(e){return function OU(n,e){return QO(n=(0,Zt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new aV(t,this.storage))}getMetadata(){return function kU(n){return function wU(n){n._throwIfRoot("getMetadata");const e=HO(n.storage,n._location,C0());return n.storage.makeRequestWithTokens(e,vl)}(n=(0,Zt.m9)(n))}(this._delegate)}updateMetadata(e){return function PU(n,e){return function bU(n,e){n._throwIfRoot("updateMetadata");const t=function nU(n,e,t,r){const l=g(e.fullServerUrl(),n.host,n._protocol),f=L1(t,r),v=n.maxOperationRetryTime,x=new Ac(l,"PATCH",_E(n,r),v);return x.headers={"Content-Type":"application/json; charset=utf-8"},x.body=f,x.errorHandler=w0(e),x}(n.storage,n._location,e,C0());return n.storage.makeRequestWithTokens(t,vl)}(n=(0,Zt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return oN(this._delegate)}delete(){return this._throwIfRoot("delete"),function NU(n){return function EU(n){n._throwIfRoot("deleteObject");const e=function rU(n,e){const r=g(e.fullServerUrl(),n.host,n._protocol),f=new Ac(r,"DELETE",function u(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=w0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,vl)}(n=(0,Zt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw F1(e)}}class lV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(cV(e))throw Dp("ref() expected a child path but got a URL, use refFromURL instead.");return new pd(H1(this._delegate,e),this)}refFromURL(e){if(!cV(e))throw Dp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ji.makeFromUrl(e,this._delegate.host)}catch{throw Dp("refFromUrl() expected a valid full URL but got an invalid one.")}return new pd(H1(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){sN(this._delegate,e,t,r)}}function cV(n){return/^[A-Za-z]+:\/\//.test(n)}function NH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new lV(t,r)}function uV(n){const e=function FH(n){return new Ar.y(e=>{const t=u=>e.next(u);t(n.snapshot);const l=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){l()}}).pipe(function MH(n,e=cN.z){return(0,ri.e)((t,r)=>{let i=null,l=null,u=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=l;l=null,r.next(v)}};function m(){const v=u+n,x=e.now();if(x<v)return i=this.schedule(void 0,v-x),void r.add(i);f()}t.subscribe((0,Zn.x)(r,v=>{l=v,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{l=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function WT(n){return{getDownloadURL:()=>wt(void 0).pipe(un.fc,wr(()=>n.getDownloadURL()),un.iC),getMetadata:()=>wt(void 0).pipe(un.fc,wr(()=>n.getMetadata()),un.iC),delete:()=>(0,mn.D)(n.delete()),child:e=>WT(n.child(e)),updateMetadata:e=>(0,mn.D)(n.updateMetadata(e)),put:(e,t)=>uV(n.put(e,t)),putString:(e,t,r)=>uV(n.putString(e,t,r)),list:e=>(0,mn.D)(n.list(e)),listAll:()=>(0,mn.D)(n.listAll())}}!function RH(n){const e={TaskState:Uo,TaskEvent:lU,StringFormat:Ct,Storage:lV,Reference:pd};n.INTERNAL.registerComponent(new td.wA("storage-compat",NH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(uN.Z);const LH=new o.OlP("angularfire2.storageBucket"),VH=new o.OlP("angularfire2.storage.maxUploadRetryTime"),UH=new o.OlP("angularfire2.storage.maxOperationRetryTime"),BH=new o.OlP("angularfire2.storage.use-emulator");let Xk=(()=>{class n{constructor(t,r,i,l,u,f,m,v,x,D){const L=(0,Qi.on)(t,u,r);this.storage=(0,Qi.cc)(`${L.name}.storage.${i}`,"AngularFireStorage",L.name,()=>{const j=u.runOutsideAngular(()=>L.storage(i||void 0)),q=x;return q&&j.useEmulator(...q),m&&j.setMaxUploadRetryTime(m),v&&j.setMaxOperationRetryTime(v),j},[m,v])}ref(t){return WT(this.storage.ref(t))}refFromURL(t){return WT(this.storage.refFromURL(t))}upload(t,r,i){return WT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Qi.Dh),o.LFG(Qi.xv,8),o.LFG(LH,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(un.HU),o.LFG(VH,8),o.LFG(UH,8),o.LFG(BH,8),o.LFG(xp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function jH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11)(1,"p",12),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.subirArchivo())}),o._uU(2,"+ Agregar imagen"),o.qZA()()}}function HH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",13)(1,"img",14),o.NdJ("mouseenter",function(){const l=o.CHM(t).index,u=o.oxw();return o.KtG(u.onMouseEnter(l))})("mouseleave",function(){const l=o.CHM(t).index,u=o.oxw();return o.KtG(u.onMouseLeave(l))})("click",function(){const l=o.CHM(t).index,u=o.oxw();return o.KtG(u.onPreviewImage(l))}),o.qZA(),o.TgZ(2,"div",15)(3,"div")(4,"i",16),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw();return o.KtG(u.abrirCom(l))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",17),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw();return o.KtG(u.likeImage(l))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(1),o.Q6J("src",t.url,o.LSH),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByImage.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountImage)}}function $H(n,e){if(1&n&&(o.TgZ(0,"span",24),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function ZH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",25),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.onClosePreview())}),o._UZ(1,"i",26),o.qZA()}}function GH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.prev())}),o._UZ(1,"i",28),o.qZA()}}function qH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",29),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.next())}),o._UZ(1,"i",30),o.qZA()}}function zH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",31),o._UZ(1,"img",32),o.TgZ(2,"div",33)(3,"div")(4,"i",16),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.abrirCom(i.currentLightboxImage))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",17),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.likeImage(i.currentLightboxImage))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=o.oxw(2);o.xp6(1),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage.url,o.LSH),o.xp6(5),o.Oqu(t.currentLightboxImage.commentsVideo.length),o.xp6(2),o.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),o.xp6(2),o.Oqu(t.currentLightboxImage.likesCountImage)}}const WH=function(n){return{active:n}};function KH(n,e){if(1&n&&(o.TgZ(0,"div",18),o.YNc(1,$H,2,2,"span",19),o.YNc(2,ZH,2,0,"button",20),o.YNc(3,GH,2,0,"button",21),o.YNc(4,qH,2,0,"button",22),o.YNc(5,zH,11,7,"div",23),o.qZA()),2&n){const t=o.oxw();o.Q6J("ngClass",o.VKq(6,WH,t.previewImage)),o.xp6(1),o.Q6J("ngIf",t.showCount),o.xp6(1),o.Q6J("ngIf",t.previewImage),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.previewImage)}}function YH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",46),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function QH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",47)(1,"div",48)(2,"img",49),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.ir(l.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",50)(6,"p",51),o._uU(7),o.qZA(),o.TgZ(8,"div",52)(9,"div")(10,"i",17),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.likeComment(l))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",53),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.abrirEditar(l))}),o.qZA(),o.TgZ(14,"i",54),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.deleteModal(l))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function JH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",34)(1,"div",35),o.YNc(2,YH,1,0,"span",36),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",37)(6,"div",38),o.YNc(7,QH,15,6,"div",39),o.qZA()(),o.TgZ(8,"div",40)(9,"form",41,42),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",43),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",44),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",45),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function XH(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",58)(6,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function e$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",60)(1,"div",56)(2,"div",57)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",61),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",62)(7,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}function t$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",63)(1,"div",56)(2,"span",64),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",57)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",65),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",66),o._uU(10,"Registrate"),o.qZA()()()()()}}let n$=(()=>{class n{constructor(t,r,i,l,u,f,m,v){this.storage=t,this.el=r,this.afAuth=i,this._image=l,this.toastr=u,this.router=f,this._user=m,this.storagex=v,this.images=[],this.showCount=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.images[0],this.currentIndex=0,this.controls=!0,this.totalImageCount=0,this.reset=0,this.adm=!1,this.esInvitado=!1,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[]}ngOnInit(){this.getImages(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getImages(){this._image.getImage().subscribe(t=>{this.images=[],t.forEach(r=>{const i=r.payload.doc.data();this.images.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeImage(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const l=i.uid,u=i.displayName,f=i.email,m=t.likedByImage.indexOf(l);-1!==m?(t.likedByImage.splice(m,1),t.userImageLikes.splice(m,1),t.likesCountImage--):(t.likedByImage.push(l),t.likesCountImage++,t.userImageLikes.push({usuario:u,correo:f}));const v=t.id,x={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._image.updateImage(v,x)}else r.modal=!0})()}subirArchivo(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const l=new Image,u=new FileReader;u.onload=f=>{l.onload=()=>{const m=document.createElement("canvas");let D=l.width,L=l.height;(D>800||L>600)&&(D>L?(L*=800/D,D=800):(D*=600/L,L=600)),m.width=D,m.height=L;const j=m.getContext("2d");j?(j.drawImage(l,0,0,D,L),m.toBlob(q=>{if(q){const ee=`images/${i.name}`,ae=this.storagex.ref(ee);this.storagex.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe($u(()=>{ae.getDownloadURL().subscribe(Ge=>{this._image.addImagenInfo({url:Ge}).then(()=>{console.log("actualizando"),this.toastr.info("Actualizando lista de Imagenes")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},l.src=f.target.result},u.readAsDataURL(i)}}),t.click()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.images[t],this.totalImageCount=this.images.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.images.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.images[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.currentLightboxImage=this.images[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const l=r.dataVideoId,u=r.dataVideoId.id;l.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const D={commentsVideo:l.commentsVideo};yield r._image.updateImage(u,D),r.comentario=""}})()}abrirCom(t){var r=this;return(0,te.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(l=>{console.error("Error al eliminar el comentario:",l)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(u=>{console.error("Error al editar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const l=i.uid,u=t.likedByComment.indexOf(l);-1!==u?(t.likedByComment.splice(u,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(l),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._image.updateImage(f,v)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}ir(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(e_),o.Y36(o.SBq),o.Y36(Ni),o.Y36(SH),o.Y36(mo),o.Y36(fn),o.Y36(ng),o.Y36(Xk))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-galeria"]],decls:15,vars:7,consts:[[1,"contenedor"],[1,"box"],["class","con-input",4,"ngIf"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],["class","modal",4,"ngIf"],[1,"con-input"],[3,"click"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[2,"display","inline-flex","gap","4rem"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev",2,"border-radius","4px","background-color","gray"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next",2,"border-radius","4px","background-color","gray"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"],[1,"modal"],[1,"fas","fa-times","lax",3,"click"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.YNc(3,jH,3,0,"div",2),o.TgZ(4,"div",3)(5,"div",4),o.YNc(6,HH,11,5,"div",5),o.qZA(),o.YNc(7,KH,6,8,"div",6),o.qZA()()(),o._UZ(8,"div"),o.YNc(9,JH,18,4,"div",7),o.TgZ(10,"div"),o.YNc(11,XH,10,0,"div",8),o.qZA(),o.YNc(12,e$,11,1,"div",9),o.TgZ(13,"div"),o.YNc(14,t$,11,0,"div",10),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngIf",r.adm),o.xp6(3),o.Q6J("ngForOf",r.images),o.xp6(1),o.Q6J("ngIf",r.showMask),o.xp6(2),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar),o.xp6(2),o.Q6J("ngIf",r.modal))},dependencies:[tn,Ti,_n,Fs,Wi,mi,ei,tr,ni,ts,Po,Zm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{border-radius:15px;padding:2px 18px;background-color:gray;display:inline-flex;gap:4rem;position:absolute;bottom:0}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:30px;margin-top:56px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{display:flex;margin-top:15px;padding:0;justify-content:flex-end}.con-input[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:7px;border-radius:23px;background-color:#00f;margin:0}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.con-input[_ngcontent-%COMP%]{padding:15px 0 20px}.file-label[_ngcontent-%COMP%]{padding:4px;font-size:14px}}@media (max-width: 500px){.caja[_ngcontent-%COMP%]{font-size:12px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:1}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:20%}}"]}),n})(),dV=(()=>{class n{constructor(t){this.firestore=t}getVideos(){return this.firestore.collection("videos").snapshotChanges()}getVideoById(t){return this.firestore.collection("videos").doc(t).valueChanges()}updateVideo(t,r){return this.firestore.collection("videos").doc(t).update(r)}addImagenInfo(t){return this.firestore.collection("videos").add(t)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function r$(n,e){1&n&&(o.TgZ(0,"div",10)(1,"div",11),o._UZ(2,"button",12),o.TgZ(3,"label",13),o._UZ(4,"i",14),o._uU(5," Agregar nuevo video "),o.qZA()()())}function i$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",15)(1,"video",16),o._UZ(2,"source",17),o.qZA(),o.TgZ(3,"div",18)(4,"div",19)(5,"p",20),o._uU(6),o.qZA()(),o.TgZ(7,"div",21)(8,"div",22)(9,"i",23),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw();return o.KtG(u.abrirCom(l))}),o.qZA(),o.TgZ(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",24)(13,"i",25),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw();return o.KtG(u.likeVideo(l))}),o.qZA(),o.TgZ(14,"span"),o._uU(15),o.qZA()()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(2),o.Q6J("src",t.url,o.LSH),o.xp6(4),o.hij(" ",t.nombre," "),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByVideo.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountVideo)}}function o$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",26)(1,"div",27)(2,"span",28),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",29)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",30),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",31),o._uU(10,"Registrate"),o.qZA()()()()()}}function s$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",44),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function a$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",45)(1,"div",46)(2,"img",47),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.ir(l.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",48)(6,"p",49),o._uU(7),o.qZA(),o.TgZ(8,"div",50)(9,"div")(10,"i",25),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.likeComment(l))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",51),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.abrirEditar(l))}),o.qZA(),o.TgZ(14,"i",52),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.deleteModal(l))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function l$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",32)(1,"div",33),o.YNc(2,s$,1,0,"span",34),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",35)(6,"div",36),o.YNc(7,a$,15,6,"div",37),o.qZA()(),o.TgZ(8,"div",38)(9,"form",39,40),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",41),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",42),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",43),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function c$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",53)(1,"div",27)(2,"div",29)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",54)(6,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function u$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",56)(1,"div",27)(2,"div",29)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",57),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",58)(7,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",55),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}let d$=(()=>{class n{constructor(t,r,i,l,u,f){this.storage=t,this.afAuth=r,this._videosService=i,this.afs=l,this._users=u,this.router=f,this.videos=[],this.esInvitado=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.ocultarx=!0,this.adm=!1}ngOnInit(){this.getVideos(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getVideos(){this._videosService.getVideos().subscribe(t=>{this.videos=[],t.forEach(r=>{const i=r.payload.doc.data();this.videos.push({id:r.payload.doc.id,...i,likesCountVideo:i.likesCountVideo||0,likedByVideo:i.likedByVideo||[],userVideoLikes:i.userVideoLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeVideo(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const l=i.uid,u=i.displayName,f=i.email,m=t.likedByVideo.indexOf(l);-1!==m?(t.likedByVideo.splice(m,1),t.userVideoLikes.splice(m,1),t.likesCountVideo--):(t.likedByVideo.push(l),t.likesCountVideo++,t.userVideoLikes.push({usuario:u,correo:f}));const v=t.id,x={likesCountVideo:t.likesCountVideo,likedByVideo:t.likedByVideo,userVideoLikes:t.userVideoLikes};yield r._videosService.updateVideo(v,x)}else r.modal=!0})()}addComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const l=r.dataVideoId,u=r.dataVideoId.id;l.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const D={commentsVideo:l.commentsVideo};yield r._videosService.updateVideo(u,D),r.comentario=""}})()}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}abrirCom(t){var r=this;return(0,te.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}deleteModal(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(l=>{console.error("Error al eliminar el comentario:",l)})):console.error("\xcdndice de comentario no v\xe1lido")}abrirEditar(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(u=>{console.error("Error al editar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const l=i.uid,u=t.likedByComment.indexOf(l);-1!==u?(t.likedByComment.splice(u,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(l),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._videosService.updateVideo(f,v)}}else r.modal=!0})()}ir(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(e_),o.Y36(Ni),o.Y36(dV),o.Y36(Jh),o.Y36(ng),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-videos"]],decls:13,vars:6,consts:[[1,"contenedor"],[1,"box"],["class","con-input",4,"ngIf"],[1,"video-container"],[1,"video"],["width","320","height","240","class","gallery-video",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"con-input"],[1,"input-file-container"],["routerLink","/nuevo-video","id","file-input"],["for","file-input",1,"file-label"],[1,"fas","fa-plus"],["width","320","height","240",1,"gallery-video"],["controls",""],["type","video/mp4",3,"src"],[1,"section"],[1,"title"],[2,"margin","0"],[1,"bocadillos"],[1,"comment"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"likes"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"],[1,"modalcom"],[1,"modal-com"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.YNc(3,r$,6,0,"div",2),o.TgZ(4,"div",3)(5,"div",4),o.YNc(6,i$,16,6,"div",5),o.qZA()()()(),o.TgZ(7,"div"),o.YNc(8,o$,11,0,"div",6),o.qZA(),o.YNc(9,l$,18,4,"div",7),o.TgZ(10,"div"),o.YNc(11,c$,10,0,"div",8),o.qZA(),o.YNc(12,u$,11,1,"div",9)),2&t&&(o.xp6(3),o.Q6J("ngIf",r.adm),o.xp6(3),o.Q6J("ngForOf",r.videos),o.xp6(2),o.Q6J("ngIf",r.modal),o.xp6(1),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar))},dependencies:[Ti,_n,_l,Fs,Wi,mi,ei,tr,ni,ts,Po,Zm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}.bocadillos[_ngcontent-%COMP%]{display:flex;gap:1rem}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.video-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;padding:25px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);column-gap:30px;row-gap:30px}.gallery-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:.35rem;margin-bottom:17px;box-shadow:0 1px 5px #00000036}@media (max-width: 900px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 580px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]}),n})();function h$(n,e){if(1&n&&(o.TgZ(0,"div",4)(1,"p",5),o._uU(2),o.qZA(),o.TgZ(3,"audio",6),o._UZ(4,"source",7),o.qZA()()),2&n){const t=e.$implicit;o.xp6(2),o.Oqu(t.title),o.xp6(2),o.Q6J("src",t.url,o.LSH)}}let f$=(()=>{class n{constructor(t){this.storage=t,this.musica=[],this.titulos=["Aguanile","Arrepientete","Asi soy yo","Bam bam bidi bim bam bam","Batman y el hombre Ara\xf1a","Caderona","Con la punta del pie","Donde estabas tu","Welcome to party","La negra tiene tumbao","Llora Corazon","Payaso","Cancion 13","Lupita","Paloma","Yo soy el rey","Cancion 17","Sangre son colora","Sangre son colora (editado)","boogalo 1","Cancion 21","Cancion 22","Cancion 23","Todo tiene su final (editado)","Cancion 25","Cancion 26","Cancion 27","Omele","Boogalo 2","Aguazate","Aqui no ha pasado nada","Saraguey santoja","Arranca en fa","Arroyando","Asi soy yo (edit)","Askarakatiski","Ballandel","Bam bam (edit)","Bomba caranbomba","Boogalo 3","Boogalo 4","Boogalo 5","Boogalo 6","Cancion 45","Boogalo 7","Boogalo 8","Boogalo 9","Boogalo 10","Boogalo 11","Boogalo 12","Boogalo 13","Cancion 53","Cachondea","Cancion 54","Camina como chencha","Cancion 56","Carmen","Cancion 57","Cancion 58","Cancion 59","Cancion 60","Cancion 61","Ran kan kan","Echo chi echo no","El malo","Cancion 65","Federico boogalo","Fuego pal 23","Hagan silencio","Indestructible","Lancion 70","cancion 71","La bamba","Cancion 73","La luz del cielo","La pelota","Cancion 76","Mambo rock","Merecumbe","Boogalo 14","Boogalo 15","Mondongo","Oh mayi","Pal 23","Cancion 85","Pruebalo","Quimbara (edit)","Quimbara","Cancion 89","Cancion 90","Cancion 91","Cancion 92","Cancion 93","Fuma el barco","Sonido bestial","Cancion 96","Cancion 97","Cancion 98","Cancion 99","El yoyo","Tremendo rumbon","Tres pata","Tres pata v2","Cancion 104","Cancion 105"]}ngOnInit(){this.getMusica()}subirArchivo(t){const r=t.target.files[0],i=lN(this.storage,`videos/${r.name}`);KU(i,r).then(()=>{this.getMusica()}).catch(l=>console.log(l))}getMusica(){var t=this;return(0,te.Z)(function*(){const r=lN(t.storage,"musica");try{const i=yield WU(r);t.musica=yield Promise.all(i.items.map(function(){var l=(0,te.Z)(function*(u,f){const m=yield qU(u);return{title:t.titulos[f]||`Canci\xf3n ${f+1}`,url:m}});return function(u,f){return l.apply(this,arguments)}}()))}catch(i){console.log(i)}})()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(e_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-musica"]],decls:5,vars:1,consts:[[1,"contenedor"],[1,"box"],[1,"musica-container"],["class","musica",4,"ngFor","ngForOf"],[1,"musica"],[2,"margin-bottom","10px"],["controls",""],["type","audio/mp3",3,"src"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar"),o.TgZ(3,"div",2),o.YNc(4,h$,5,2,"div",3),o.qZA()()()),2&t&&(o.xp6(4),o.Q6J("ngForOf",r.musica))},dependencies:[Ti,Zm],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.musica-container[_ngcontent-%COMP%]{margin-top:25px;display:flex;flex-wrap:wrap;justify-content:space-around}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),hV=(()=>{class n{constructor(t){this.toastr=t}mensaje(t){return"auth/invalid-email"===t?"Por favor, introduce un correo electr\xf3nico v\xe1lido.":""}errorFirebase(t){switch(t){case"auth/user-not-found":case"auth/wrong-password":this.toastr.error("Usuario/Contrase\xf1a invalida","Error");break;case"auth/invalid-email":this.toastr.error("No hay correo valido o llena todos los campos","Error");break;case"auth/invalid-login-credentials":this.toastr.error("El correo o contrase\xf1a no son correctos","Error");break;case"auth/missing-password":this.toastr.error("Digita la contrase\xf1a","Error");break;case"auth/email-already-in-use":this.toastr.error("Usuario ya registrado","Error");break;case"auth/weak-password":this.toastr.error("Contrase\xf1a Debil","Error");break;case"auth/internal-error":this.toastr.error("Correo no valido","Error")}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(mo))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-spinner"]],decls:3,vars:0,consts:[["role","status",1,"spinner"],[1,"visually-hidden"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"span",1),o._uU(2,"Loading..."),o.qZA()())},styles:['@charset "UTF-8";.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}']}),n})();function p$(n,e){1&n&&(o.TgZ(0,"span",19),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es requerido"),o.qZA())}function g$(n,e){1&n&&(o.TgZ(0,"span",19),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es invalido"),o.qZA())}function m$(n,e){1&n&&(o.TgZ(0,"span",19),o._uU(1,"La "),o.TgZ(2,"strong"),o._uU(3,"contrase\xf1a "),o.qZA(),o._uU(4,"debe contener mas de 6 caracteres"),o.qZA())}function _$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",3)(1,"form",4),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.login())}),o.TgZ(2,"div")(3,"h2",5),o._uU(4,"Asi Somos"),o.qZA()(),o.TgZ(5,"h2",6),o._uU(6,"Iniciar sesi\xf3n"),o.qZA(),o.TgZ(7,"div",7)(8,"label",8),o._uU(9,"Correo electr\xf3nico"),o.qZA(),o._UZ(10,"input",9),o.YNc(11,p$,5,0,"span",10),o.YNc(12,g$,5,0,"span",10),o.qZA(),o.TgZ(13,"div",7)(14,"label",11),o._uU(15,"Contrase\xf1a"),o.qZA(),o._UZ(16,"input",12),o.YNc(17,m$,5,0,"span",10),o.qZA(),o.TgZ(18,"div",13)(19,"a",14),o._uU(20,"\xbfOlvidaste tu contrase\xf1a?"),o.qZA(),o.TgZ(21,"a",15),o._uU(22,"Registrarse"),o.qZA()(),o.TgZ(23,"button",16),o._uU(24,"Iniciar sesi\xf3n"),o.qZA(),o.TgZ(25,"div",17)(26,"a",18),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.loginAsGuest())}),o._uU(27,"Iniciar sesi\xf3n como invitado"),o.qZA()()()()}if(2&n){const t=o.oxw();let r,i,l;o.xp6(1),o.Q6J("formGroup",t.loginUsuario),o.xp6(10),o.Q6J("ngIf",(null==(r=t.loginUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.loginUsuario.get("email"))?null:r.touched)),o.xp6(1),o.Q6J("ngIf",(null==(i=t.loginUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.loginUsuario.get("email"))?null:i.touched)),o.xp6(5),o.Q6J("ngIf",(null==(l=t.loginUsuario.get("password"))?null:l.hasError("required"))&&(null==(l=t.loginUsuario.get("password"))?null:l.touched))}}function y$(n,e){1&n&&(o.TgZ(0,"div",20)(1,"h2",21),o._uU(2,"Asi Somos"),o.qZA(),o.TgZ(3,"span",22),o._uU(4,"Iniciando sesion..."),o.qZA(),o._UZ(5,"app-spinner"),o.qZA())}let v$=(()=>{class n{constructor(t,r,i,l,u){this.toastr=t,this.fb=r,this.firebaseError=i,this.afAuth=l,this.router=u,this.loading=!1,this.verificar=!1,this.message="",this.loginUsuario=this.fb.group({email:["",[Or.required,Or.email]],password:["",Or.required]})}ngOnInit(){}login(){const t=this.loginUsuario.value.email,r=this.loginUsuario.value.password;this.loading=!0,this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.router.navigate(["/perfil"]),this.loading=!1}).catch(i=>{this.loading=!1,this.verificar=!0,this.firebaseError.errorFirebase(i.code),this.message=this.firebaseError.mensaje(i.code),setTimeout(()=>{this.message=""},2e3)})}loginAsGuest(){this.loading=!0,this.afAuth.signInWithEmailAndPassword("soyinvitado@gmail.com","123456").then(()=>{this.loading=!1,this.router.navigate(["/perfil"])}).catch(i=>{this.loading=!1,console.error("Error al iniciar sesi\xf3n con invitado:",i)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(mo),o.Y36(Sf),o.Y36(hV),o.Y36(Ni),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login-form"]],decls:3,vars:2,consts:[[2,"display","flex","justify-content","center","height","100vh","background-color","white","user-select","none"],["class","container-login",4,"ngIf"],["style","\n      display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;\n    ",4,"ngIf"],[1,"container-login"],[1,"form-contenedor",3,"formGroup","ngSubmit"],[1,"elH2",2,"user-select","none"],[1,"form-title",2,"user-select","none"],[1,"form-group"],["for","email",2,"user-select","none"],["type","email","name","email","placeholder","correo electronico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],["for","password",2,"user-select","none"],["type","password","id","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],[1,"form-group","form-links"],["routerLink","/recuperar",1,"forgot-password",2,"user-select","none"],["routerLink","/registrar",1,"register-link",2,"user-select","none"],["type","submit",1,"submit-button"],[2,"text-align","center","margin-top","14px"],[1,"register-link",2,"user-select","none","cursor","pointer",3,"click"],[1,"text-danger","errorLabel"],[2,"display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[1,"elH2"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,_$,28,4,"div",1),o.YNc(2,y$,6,0,"div",2),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",!r.loading),o.xp6(1),o.Q6J("ngIf",r.loading))},dependencies:[_n,Fs,Wi,mi,ei,tr,dc,nh,eP],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px;-webkit-user-select:none;user-select:none}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#0040ff;color:#fffefe}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}.container-login[_ngcontent-%COMP%]{margin-top:8%;width:30%}.logo[_ngcontent-%COMP%]{position:absolute}@media screen and (max-width: 600px){.container-login[_ngcontent-%COMP%]{margin-top:19%;width:87%}.logo[_ngcontent-%COMP%]{display:none}}"]}),n})();function C$(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"nombre de usuario"),o.qZA(),o._uU(4," es requerido"),o.qZA())}function w$(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es requerido"),o.qZA())}function b$(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es inv\xe1lido"),o.qZA())}function I$(n,e){1&n&&(o.TgZ(0,"span",20),o._uU(1,"La "),o.TgZ(2,"strong"),o._uU(3,"contrase\xf1a "),o.qZA(),o._uU(4,"debe contener m\xe1s de 6 caracteres"),o.qZA())}function E$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",2)(1,"form",3,4),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.registrar())}),o.TgZ(3,"h2",5),o._uU(4,"Asi Somos"),o.qZA(),o.TgZ(5,"h2",6),o._uU(6,"REGISTRARSE"),o.qZA(),o.TgZ(7,"div",7)(8,"label",8),o._uU(9,"Nombre de Usuario"),o.qZA(),o._UZ(10,"input",9),o.YNc(11,C$,5,0,"span",10),o.qZA(),o.TgZ(12,"div",7)(13,"label",11),o._uU(14,"Correo electr\xf3nico"),o.qZA(),o._UZ(15,"input",12),o.YNc(16,w$,5,0,"span",10),o.YNc(17,b$,5,0,"span",10),o.qZA(),o.TgZ(18,"div",7)(19,"label",13),o._uU(20,"Contrase\xf1a"),o.qZA(),o._UZ(21,"input",14),o.YNc(22,I$,5,0,"span",10),o.qZA(),o.TgZ(23,"div",7)(24,"label",15),o._uU(25,"Repetir Contrase\xf1a"),o.qZA(),o._UZ(26,"input",16),o.qZA(),o.TgZ(27,"div",17)(28,"button",18),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.goBack())}),o._uU(29," Volver "),o.qZA(),o.TgZ(30,"button",19),o._uU(31,"Registrar"),o.qZA()()()()}if(2&n){const t=o.oxw();let r,i,l,u;o.xp6(1),o.Q6J("formGroup",t.registrarUsuario),o.xp6(10),o.Q6J("ngIf",(null==(r=t.registrarUsuario.get("username"))?null:r.hasError("required"))&&(null==(r=t.registrarUsuario.get("username"))?null:r.touched)),o.xp6(5),o.Q6J("ngIf",(null==(i=t.registrarUsuario.get("email"))?null:i.hasError("required"))&&(null==(i=t.registrarUsuario.get("email"))?null:i.touched)),o.xp6(1),o.Q6J("ngIf",(null==(l=t.registrarUsuario.get("email"))?null:l.hasError("email"))&&(null==(l=t.registrarUsuario.get("email"))?null:l.touched)),o.xp6(5),o.Q6J("ngIf",(null==(u=t.registrarUsuario.get("password"))?null:u.hasError("required"))&&(null==(u=t.registrarUsuario.get("password"))?null:u.touched)),o.xp6(8),o.Q6J("disabled",t.registrarUsuario.invalid)}}function T$(n,e){1&n&&(o.TgZ(0,"div",21)(1,"h2",5),o._uU(2,"Asi Somos"),o.qZA(),o.TgZ(3,"span",22),o._uU(4,"Registrando..."),o.qZA(),o._UZ(5,"app-spinner"),o.qZA())}let x$=(()=>{class n{constructor(t,r,i,l,u,f){this.fb=t,this.afAuth=r,this.router=i,this.firebaseError=l,this.toastr=u,this.location=f,this.loading=!1,this.registrarUsuario=this.fb.group({username:["",Or.required],email:["",[Or.required,Or.email]],password:["",[Or.required,Or.minLength(6)]],repetirPassword:["",Or.required]})}ngOnInit(){}registrar(){const t=this.registrarUsuario.value.username,r=this.registrarUsuario.value.email,i=this.registrarUsuario.value.password;i===this.registrarUsuario.value.repetirPassword?(this.loading=!0,this.afAuth.createUserWithEmailAndPassword(r,i).then(u=>u.user?.updateProfile({displayName:t})).then(u=>{this.router.navigate(["/login"]),this.toastr.success("El usuario fue registrado con exito!!","Usuario Registrado")}).catch(u=>{this.loading=!1,console.log(u),this.firebaseError.errorFirebase(u.code)})):this.toastr.error("Las contrase\xf1as no coinciden","Error")}goBack(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Sf),o.Y36(Ni),o.Y36(fn),o.Y36(hV),o.Y36(mo),o.Y36(Ae))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-registrar-usuario"]],decls:2,vars:2,consts:[["class","content",4,"ngIf"],["style"," background-color: white; display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;",4,"ngIf"],[1,"content"],[1,"login-form",3,"formGroup","ngSubmit"],["loginForm","ngForm"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["for","username"],["type","text","name","username","placeholder","Nombre de Usuario","formControlName","username"],["class","text-danger errorLabel",4,"ngIf"],["for","email"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["for","password"],["type","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],["for","repetirPassword"],["type","password","name","password","placeholder","Repetir contrase\xf1a","formControlName","repetirPassword"],[2,"display","flex","gap","2px"],["type","button",1,"submit",2,"background-color","blue",3,"click"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"background-color","white","display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(o.YNc(0,E$,32,6,"div",0),o.YNc(1,T$,6,0,"div",1)),2&t&&(o.Q6J("ngIf",!r.loading),o.xp6(1),o.Q6J("ngIf",r.loading))},dependencies:[_n,Wi,mi,ei,tr,dc,nh,eP],styles:[".login-form[_ngcontent-%COMP%]{margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a;height:94vh}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#e44d42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})();function D$(n,e){1&n&&(o.TgZ(0,"span",12),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es requerido"),o.qZA())}function A$(n,e){1&n&&(o.TgZ(0,"span",12),o._uU(1,"El "),o.TgZ(2,"strong"),o._uU(3,"correo "),o.qZA(),o._uU(4,"es invalido"),o.qZA())}function S$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",2)(1,"form",3),o.NdJ("ngSubmit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.recuperar())}),o.TgZ(2,"h2",4),o._uU(3,"Asi Somos"),o.qZA(),o.TgZ(4,"h2",5),o._uU(5,"RECUPERAR CUENTA"),o.qZA(),o.TgZ(6,"div",6),o._UZ(7,"input",7),o.YNc(8,D$,5,0,"span",8),o.YNc(9,A$,5,0,"span",8),o.qZA(),o.TgZ(10,"div",9)(11,"button",10),o._uU(12," Volver "),o.qZA(),o.TgZ(13,"button",11),o._uU(14,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();let r,i;o.xp6(1),o.Q6J("formGroup",t.recuperarUsuario),o.xp6(7),o.Q6J("ngIf",(null==(r=t.recuperarUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.recuperarUsuario.get("email"))?null:r.touched)),o.xp6(1),o.Q6J("ngIf",(null==(i=t.recuperarUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.recuperarUsuario.get("email"))?null:i.touched)),o.xp6(4),o.Q6J("disabled",t.recuperarUsuario.invalid)}}function M$(n,e){1&n&&(o.TgZ(0,"div",13)(1,"h2",4),o._uU(2,"Asi Somos"),o.qZA(),o.TgZ(3,"span",14),o._uU(4,"Registrando..."),o.qZA(),o._UZ(5,"app-spinner"),o.qZA())}let k$=(()=>{class n{constructor(t,r,i,l){this.fb=t,this.afAuth=r,this.router=i,this.toastr=l,this.loading=!1,this.recuperarUsuario=this.fb.group({email:["",[Or.required,Or.email]]})}ngOnInit(){}recuperar(){const t=this.recuperarUsuario.value.email;this.loading=!0,this.afAuth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/login"]),this.toastr.info("Revisa tu correo para restablecer tu contrase\xf1a","Peticion Aceptada")}).catch(r=>{this.loading=!1,this.firebaseError(r.code)})}firebaseError(t){switch(t){case"auth/user-not-found":this.toastr.error("Este correo no es valido","Error");break;case"auth/missing-email":this.toastr.error("Inserta un correo","Error")}}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Sf),o.Y36(Ni),o.Y36(fn),o.Y36(mo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-recuperar-contrasena"]],decls:3,vars:2,consts:[["style","margin-top: 8%",4,"ngIf"],["style","display: flex;background-color: white;\n    height: 90vh;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;",4,"ngIf"],[2,"margin-top","8%"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],[2,"display","flex","gap","2px"],["type","button","routerLink","/login",1,"submit",2,"background-color","blue"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"display","flex","background-color","white","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(o.TgZ(0,"div"),o.YNc(1,S$,15,4,"div",0),o.YNc(2,M$,6,0,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",!r.loading),o.xp6(1),o.Q6J("ngIf",r.loading))},dependencies:[_n,_l,Wi,mi,ei,tr,dc,nh,eP],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})(),P$=(()=>{class n{constructor(t){this.afAuth=t}isLoggedIn(){return this.afAuth.authState.pipe((0,ht.U)(t=>!!t))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ni))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Il=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn().pipe((0,ht.U)(i=>!!i||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(P$),o.LFG(fn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),O$=(()=>{class n{constructor(t,r,i){this._videosService=t,this.router=r,this.toastr=i,this.subir={nombre:"",url:""}}ngOnInit(){}subirVideo(){console.log(this.subir),this._videosService.addImagenInfo(this.subir).then(()=>{this.router.navigate(["/videos"]),this.toastr.success("Agregando nuevo video")})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(dV),o.Y36(fn),o.Y36(mo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-form-video"]],decls:17,vars:2,consts:[[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["name","nombre","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["name","url","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["type","submit"],["routerLink","/videos",2,"background-color","green"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"form",2),o.NdJ("ngSubmit",function(){return r.subirVideo()}),o.TgZ(3,"div",3)(4,"label"),o._uU(5,"Nombre"),o.qZA(),o.TgZ(6,"input",4),o.NdJ("ngModelChange",function(l){return r.subir.nombre=l}),o.qZA()(),o.TgZ(7,"div",3)(8,"label"),o._uU(9,"Url"),o.qZA(),o.TgZ(10,"input",5),o.NdJ("ngModelChange",function(l){return r.subir.url=l}),o.qZA()(),o.TgZ(11,"div",3)(12,"button",6),o._uU(13,"Agregar Video"),o.qZA()(),o.TgZ(14,"div",3)(15,"button",7),o._uU(16,"Volver"),o.qZA()()()()()),2&t&&(o.xp6(6),o.Q6J("ngModel",r.subir.nombre),o.xp6(4),o.Q6J("ngModel",r.subir.url))},dependencies:[_l,Wi,mi,ei,tr,ts,Po],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{width:80%;max-width:400px;padding:20px;background-color:#f5f5f5;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;cursor:pointer;transition:background-color .3s ease;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]}),n})();const fV={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let KT;const N$=new Uint8Array(16);function R$(){if(!KT&&(KT=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!KT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return KT(N$)}const io=[];for(let n=0;n<256;++n)io.push((n+256).toString(16).slice(1));const L$=function F$(n,e,t){if(fV.randomUUID&&!e&&!n)return fV.randomUUID();const r=(n=n||{}).random||(n.rng||R$)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function pV(n,e=0){return io[n[e+0]]+io[n[e+1]]+io[n[e+2]]+io[n[e+3]]+"-"+io[n[e+4]]+io[n[e+5]]+"-"+io[n[e+6]]+io[n[e+7]]+"-"+io[n[e+8]]+io[n[e+9]]+"-"+io[n[e+10]]+io[n[e+11]]+io[n[e+12]]+io[n[e+13]]+io[n[e+14]]+io[n[e+15]]}(r)};let gV=(()=>{class n{constructor(t){this.firestore=t}getUsuarioImagen(){return this.firestore.collection("imagen-usuario").snapshotChanges()}updateImgUsuario(t,r){return this.firestore.collection("imagen-usuario").doc(t).update(r)}addImagenUsuario(t){return this.firestore.collection("imagen-usuario").add(t)}delete(t){return this.firestore.collection("imagen-usuario").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function V$(n,e){1&n&&(o.TgZ(0,"div")(1,"p",15),o._uU(2,"Editar perfil"),o.qZA()())}function U$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div")(1,"p",16),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.changePortada())}),o._uU(2,"+"),o.qZA()()}}function B$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"p",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.imagenes())}),o._uU(1," Mis fotos "),o.qZA()}}function j$(n,e){1&n&&(o.TgZ(0,"div",17)(1,"div",18)(2,"div",19),o._UZ(3,"img",20),o.TgZ(4,"span"),o._uU(5,"Asi somos"),o.qZA()(),o.TgZ(6,"div",21),o._UZ(7,"img",22),o.TgZ(8,"span"),o._uU(9,"Actividad Fisica"),o.qZA()()()())}function H$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",34)(1,"img",35),o.NdJ("mouseenter",function(){const l=o.CHM(t).index,u=o.oxw(3);return o.KtG(u.onMouseEnter(l))})("mouseleave",function(){const l=o.CHM(t).index,u=o.oxw(3);return o.KtG(u.onMouseLeave(l))})("click",function(){const l=o.CHM(t).index,u=o.oxw(3);return o.KtG(u.onPreviewImage(l))}),o.qZA()()}if(2&n){const t=e.$implicit;o.xp6(1),o.Q6J("src",t.url,o.LSH)}}function $$(n,e){if(1&n&&(o.TgZ(0,"span",42),o._uU(1),o.qZA()),2&n){const t=o.oxw(4);o.xp6(1),o.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function Z$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",43),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.onClosePreview())}),o._UZ(1,"i",44),o.qZA()}}function G$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",45),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.prev())}),o._UZ(1,"i",46),o.qZA()}}function q$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.next())}),o._UZ(1,"i",48),o.qZA()}}function z$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",49),o._UZ(1,"img",50),o.TgZ(2,"div",51)(3,"div")(4,"i",52),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.abrirCom(i.currentLightboxImage))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",53),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.likeImage(i.currentLightboxImage))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()(),o.TgZ(11,"div")(12,"i",54),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.deleteImgModal(i.currentLightboxImage.id))}),o.qZA()()()()}if(2&n){const t=o.oxw(4);o.xp6(1),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage.url,o.LSH),o.xp6(5),o.Oqu(t.currentLightboxImage.commentsVideo.length),o.xp6(2),o.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),o.xp6(2),o.Oqu(t.currentLightboxImage.likesCountImage)}}const W$=function(n){return{active:n}};function K$(n,e){if(1&n&&(o.TgZ(0,"div",36),o.YNc(1,$$,2,2,"span",37),o.YNc(2,Z$,2,0,"button",38),o.YNc(3,G$,2,0,"button",39),o.YNc(4,q$,2,0,"button",40),o.YNc(5,z$,13,7,"div",41),o.qZA()),2&n){const t=o.oxw(3);o.Q6J("ngClass",o.VKq(6,W$,t.previewImage)),o.xp6(1),o.Q6J("ngIf",t.showCount),o.xp6(1),o.Q6J("ngIf",t.previewImage),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.previewImage)}}function Y$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",67),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.close())}),o.qZA()}}function Q$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",68)(1,"div",69)(2,"img",70),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.ir(l.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",71)(6,"p",72),o._uU(7),o.qZA(),o.TgZ(8,"div",73)(9,"div")(10,"i",53),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.likeComment(l))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",74),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.abrirEditar(l))}),o.qZA(),o.TgZ(14,"i",54),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.deleteModal(l))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(4);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.hij(" ",t.comentario," "),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function J$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",55)(1,"div",56),o.YNc(2,Y$,1,0,"span",57),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",58)(6,"div",59),o.YNc(7,Q$,15,6,"div",60),o.qZA()(),o.TgZ(8,"div",61)(9,"form",62,63),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",64),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",65),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw(3);return o.KtG(l.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",66),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw(3);o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function X$(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",75)(1,"div",76)(2,"div",77)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",78)(6,"button",79),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.closeDelete())}),o._uU(7," Cancelar "),o.qZA(),o.TgZ(8,"button",79),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.borrarComentario())}),o._uU(9," Aceptar "),o.qZA()()()()}}function e5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",80)(1,"div",76)(2,"div",77)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",81),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw(3);return o.KtG(l.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",82)(7,"button",79),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",79),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.editarComentario())}),o._uU(10," Aceptar "),o.qZA()()()()}if(2&n){const t=o.oxw(3);o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}function t5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",75)(1,"div",76)(2,"div",77)(3,"p"),o._uU(4,"\xbfEstas seguro de eliminar esta imagen?"),o.qZA()(),o.TgZ(5,"div",78)(6,"button",79),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.closeDelete())}),o._uU(7," Cancelar "),o.qZA(),o.TgZ(8,"button",79),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.eliminarImagen())}),o._uU(9," Aceptar "),o.qZA()()()()}}function n5(n,e){1&n&&(o.TgZ(0,"p"),o._uU(1,"No se han subido fotos aun.."),o.qZA())}function r5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",23)(1,"div",24)(2,"p",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.misImages())}),o._uU(3,"+ Agregar imagen"),o.qZA()(),o.TgZ(4,"div",25)(5,"div",26)(6,"div",27)(7,"div",28),o.YNc(8,H$,2,1,"div",29),o.qZA(),o.YNc(9,K$,6,8,"div",30),o.qZA()()(),o._UZ(10,"div"),o.YNc(11,J$,18,4,"div",31),o.TgZ(12,"div"),o.YNc(13,X$,10,0,"div",32),o.qZA(),o.YNc(14,e5,11,1,"div",33),o.TgZ(15,"div"),o.YNc(16,t5,10,0,"div",32),o.qZA(),o.YNc(17,n5,2,0,"p",1),o.qZA()}if(2&n){const t=o.oxw(2);o.xp6(8),o.Q6J("ngForOf",t.imageX),o.xp6(1),o.Q6J("ngIf",t.showMask),o.xp6(2),o.Q6J("ngIf",t.modalcom),o.xp6(2),o.Q6J("ngIf",t.modalDelete),o.xp6(1),o.Q6J("ngIf",t.modalEditar),o.xp6(2),o.Q6J("ngIf",t.modalDeleteImage),o.xp6(1),o.Q6J("ngIf",0==t.imageX.length)}}function i5(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"span",2),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.logout())}),o._uU(2,"Salir"),o.qZA(),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"div",6)(7,"img",7),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.changeProfilePicture())}),o.qZA(),o.TgZ(8,"p",8),o._uU(9),o.qZA()(),o.YNc(10,V$,3,0,"div",1),o.YNc(11,U$,3,0,"div",1),o.qZA(),o.TgZ(12,"p",9),o._uU(13),o.qZA()(),o.TgZ(14,"div",10)(15,"p",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.grupos())}),o._uU(16,"Grupos"),o.qZA(),o.YNc(17,B$,2,0,"p",12),o.qZA(),o.YNc(18,j$,10,0,"div",13),o.YNc(19,r5,18,7,"div",14),o.BQk()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("src",t.urlPortada||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Starsinthesky.jpg/1024px-Starsinthesky.jpg",o.LSH),o.xp6(2),o.Q6J("src",t.usuario.photoURL||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario.displayName),o.xp6(1),o.Q6J("ngIf",!t.esInvitado),o.xp6(1),o.Q6J("ngIf",!t.esInvitado),o.xp6(2),o.Oqu(t.aboutMeValue),o.xp6(4),o.Q6J("ngIf",!t.esInvitado),o.xp6(1),o.Q6J("ngIf",t.gr),o.xp6(1),o.Q6J("ngIf",t.im)}}function o5(n,e){1&n&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2,"No se ha iniciado sesi\xf3n."),o.qZA(),o.BQk())}let s5=(()=>{class n{constructor(t,r,i,l,u,f,m){this.afAuth=t,this.storage=r,this._user=i,this.toastr=l,this.router=u,this._imageUser=f,this.el=m,this.usuariosInfo=[],this.idInfo=[],this.adm=!1,this.esInvitado=!1,this.imageX=[],this.imageZ=[],this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.imageX[0],this.currentIndex=0,this.showCount=!1,this.controls=!0,this.totalImageCount=0,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.modalDeleteImage=!1,this.idDelete="",this.gr=!0,this.im=!1,this.vd=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t,this.currentUser=t,this.getUsers(),this.usuarioActual=t?.displayName;const r=t?.uid;"Invitad@"==this.usuarioActual&&(this.esInvitado=!0),"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)}),this.getUserImages()}generateUniqueId(){const t=L$();this.idGenerado=t}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],this.idInfo=[],t.forEach(r=>{r.payload.doc.data(),this.usuariosInfo.push({id:r.payload.doc.data(),...r.payload.doc.data()});const l=this.usuariosInfo.find(m=>m.id.idUser===this.usuario.uid);this.objetoUsuario=l;const u={id:r.payload.doc.id,...r.payload.doc.data()};this.idInfo.push(u);const f=this.idInfo.find(m=>m.idUser===this.usuario.uid)?.id;this.id=f,this.phoneNumberValue=l.telefono,this.genderValue=l.Genero,this.birthdayValue=l.cumpleanos,this.aboutMeValue=l.about,this.urlPortada=l.portada})})}getUserImages(){this._imageUser.getUsuarioImagen().subscribe(t=>{this.imageZ=[],this.imageX=[],t.forEach(r=>{const i=r.payload.doc.data();this.imageZ.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]});const l=this.imageZ.filter(u=>u.idUser===this.usuario?.uid);this.imageX=l})})}changeProfilePicture(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const l=new Image,u=new FileReader;u.onload=f=>{l.onload=()=>{const m=document.createElement("canvas");let D=l.width,L=l.height;(D>800||L>600)&&(D>L?(L*=800/D,D=800):(D*=600/L,L=600)),m.width=D,m.height=L;const j=m.getContext("2d");j?(j.drawImage(l,0,0,D,L),m.toBlob(q=>{if(q){const ee=`profilePictures/${this.usuario?.uid}/${i.name}`,ae=this.storage.ref(ee);this.storage.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe($u(()=>{ae.getDownloadURL().subscribe(Ge=>{this.afAuth.currentUser.then(je=>{je?.updateProfile({photoURL:Ge}).then(()=>{this._user.updateUser({foto:Ge},this.id).then(()=>{console.log("perfil actualizado")}),this.toastr.info("Foto de perfil cambiada")}).catch(Ke=>{console.error("Error al actualizar la foto de perfil:",Ke)})})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},l.src=f.target.result},u.readAsDataURL(i)}}),t.click()}}grupos(){this.gr=!0,this.im=!1,this.vd=!1}imagenes(){this.gr=!1,this.im=!0,this.vd=!1}videos(){this.gr=!1,this.im=!1,this.vd=!0}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}changePortada(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const l=new Image,u=new FileReader;u.onload=f=>{l.onload=()=>{const m=document.createElement("canvas");let D=l.width,L=l.height;(D>800||L>600)&&(D>L?(L*=800/D,D=800):(D*=600/L,L=600)),m.width=D,m.height=L;const j=m.getContext("2d");j?(j.drawImage(l,0,0,D,L),m.toBlob(q=>{if(q){const ee=`portada/${this.usuario?.uid}/${i.name}`,ae=this.storage.ref(ee);this.storage.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe($u(()=>{ae.getDownloadURL().subscribe(Ge=>{this._user.updateUser({portada:Ge},this.id).then(()=>{console.log("actualizando"),this.toastr.info("Foto de portada cambiada")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},l.src=f.target.result},u.readAsDataURL(i)}}),t.click()}}misImages(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const l=new Image,u=new FileReader;u.onload=f=>{l.onload=()=>{const m=document.createElement("canvas");let D=l.width,L=l.height;(D>800||L>600)&&(D>L?(L*=800/D,D=800):(D*=600/L,L=600)),m.width=D,m.height=L;const j=m.getContext("2d");j?(j.drawImage(l,0,0,D,L),m.toBlob(q=>{if(q){const ee=`usuarios/${this.usuario?.uid}/${i.name}`,ae=this.storage.ref(ee);this.storage.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe($u(()=>{ae.getDownloadURL().subscribe(Ge=>{const je=this.usuario?.uid;this._imageUser.addImagenUsuario({url:Ge,idUser:je}).then(()=>{console.log("actualizando"),this.toastr.info("Actualizando lista de Imagenes")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},l.src=f.target.result},u.readAsDataURL(i)}}),t.click()}}likeImage(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const l=i.uid,u=i.displayName,f=i.email,m=t.likedByImage.indexOf(l);-1!==m?(t.likedByImage.splice(m,1),t.userImageLikes.splice(m,1),t.likesCountImage--):(t.likedByImage.push(l),t.likesCountImage++,t.userImageLikes.push({usuario:u,correo:f}));const v=t.id,x={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._imageUser.updateImgUsuario(v,x)}else r.modal=!0})()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.imageX[t],this.totalImageCount=this.imageX.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,this.modalDeleteImage=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.imageX.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.imageX[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.imageX.length-1),this.currentLightboxImage=this.imageX[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const l=r.dataVideoId,u=r.dataVideoId.id;l.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const D={commentsVideo:l.commentsVideo};yield r._imageUser.updateImgUsuario(u,D),r.comentario=""}})()}abrirCom(t){var r=this;return(0,te.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._imageUser.updateImgUsuario(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(l=>{console.error("Error al eliminar el comentario:",l)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._imageUser.updateImgUsuario(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(u=>{console.error("Error al editar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const l=i.uid,u=t.likedByComment.indexOf(l);-1!==u?(t.likedByComment.splice(u,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(l),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._imageUser.updateImgUsuario(f,v)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0,this.modalDeleteImage=!1}ir(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}deleteImgModal(t){this.idDelete=t,this.modalDeleteImage=!0,this.ocultarx=!0}eliminarImagen(){this._imageUser.delete(this.idDelete).then(()=>{this.imageX=this.imageX.filter(t=>t.id!==this.idDelete),this.toastr.error("Imagen eliminida"),this.modalDeleteImage=!1,this.previewImage=!1})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ni),o.Y36(Xk),o.Y36(ng),o.Y36(mo),o.Y36(fn),o.Y36(gV),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-perfil"]],decls:3,vars:2,consts:[[1,"container",2,"user-select","none"],[4,"ngIf"],[2,"padding","6px","position","absolute","right","0","text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"user-info"],[1,"img-container"],["alt","",2,"width","100%","position","absolute","z-index","-1",3,"src"],[2,"padding","5px"],["alt","Foto de perfil","width","auto","height","70",2,"cursor","pointer","user-select","none",3,"src","click"],[1,"lap","user"],[1,"lap"],[1,"acciones"],[2,"cursor","pointer",3,"click"],["style","cursor: pointer",3,"click",4,"ngIf"],["style","\n        display: flex;\n        padding: 20px;\n        flex-wrap: wrap;\n        justify-content: center;\n      ",4,"ngIf"],["class","contenedor-img",4,"ngIf"],["routerLink","/perfil-editar",1,"edit-perfil"],[1,"edit-perfil",3,"click"],[2,"display","flex","padding","20px","flex-wrap","wrap","justify-content","center"],[1,"container-img-g"],[1,"bf"],["routerLink","/main","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2FScreen%20Shot%202024-05-06%20at%2011.43.48%20AM.png?alt=media&token=c0c71fed-4aff-4923-8663-9d91d1f9f4df","alt","",2,"cursor","pointer"],[1,"bf","bf2"],["routerLink","/main-activate","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Factivate-logo.jpeg?alt=media&token=28baeec7-81b9-42a8-845d-3e226031f3ba","alt","",2,"cursor","pointer"],[1,"contenedor-img"],[1,"subir"],[1,"contenedor",2,"color","white"],[1,"box"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev",2,"border-radius","4px","background-color","gray"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next",2,"border-radius","4px","background-color","gray"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,i5,20,9,"ng-container",1),o.YNc(2,o5,3,0,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",r.usuario),o.xp6(1),o.Q6J("ngIf",!r.usuario))},dependencies:[tn,Ti,_n,_l,Wi,mi,ei,tr,ni,ts,Po],styles:[".img-container[_ngcontent-%COMP%]{gap:1rem;border-radius:12px;display:flex;height:25vh;align-items:flex-end;box-shadow:0 0 12px #000}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:13px}.lap[_ngcontent-%COMP%]{border-radius:7px;background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;text-align:center;margin:3px}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.acciones[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;border-radius:17px;padding:6px 27px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.container-img-g[_ngcontent-%COMP%]{gap:2rem;display:flex;text-align:center;width:135px;justify-content:center}.bf[_ngcontent-%COMP%]{border-radius:7px;padding:7px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.bf[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.user[_ngcontent-%COMP%]{color:#fff;margin:0;font-weight:600}.edit-perfil[_ngcontent-%COMP%]{border-radius:22px;padding:5px 22px;background-color:#fff;color:#000;cursor:pointer}.edit-perfil[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.contenedor-img[_ngcontent-%COMP%]{display:flex;flex-direction:column}.subir[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:12px}.subir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;width:129px;padding:5px 9px;border-radius:13px}.contenedor[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{border-radius:15px;padding:2px 18px;background-color:gray;display:inline-flex;gap:4rem;position:absolute;bottom:20%}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:2px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:2px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 500px){.bf2[_ngcontent-%COMP%]{position:relative;top:3rem}}"]}),n})();function a5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"label"),o._uU(4,"Nombre de usuario:"),o.qZA(),o.TgZ(5,"input",4),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.displayNameValue=i)}),o.qZA()(),o.TgZ(6,"div",3)(7,"label"),o._uU(8,"Lugar actual:"),o.qZA(),o.TgZ(9,"input",4),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.ciudad=i)}),o.qZA()(),o.TgZ(10,"div",3)(11,"label"),o._uU(12,"Email:"),o.qZA(),o.TgZ(13,"input",5),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.usuario.email=i)}),o.qZA()(),o.TgZ(14,"div",3)(15,"label"),o._uU(16,"Tel\xe9fono:"),o.qZA(),o.TgZ(17,"input",6),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.phoneNumberValue=i)}),o.qZA()(),o.TgZ(18,"div",3)(19,"label"),o._uU(20,"G\xe9nero:"),o.qZA(),o.TgZ(21,"select",7),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.genderValue=i)}),o.TgZ(22,"option",8),o._uU(23,"Hombre"),o.qZA(),o.TgZ(24,"option",9),o._uU(25,"Mujer"),o.qZA(),o.TgZ(26,"option",10),o._uU(27,"No definido"),o.qZA()()(),o.TgZ(28,"div",3)(29,"label"),o._uU(30,"Estado:"),o.qZA(),o.TgZ(31,"select",11),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.estado=i)}),o.TgZ(32,"option",12),o._uU(33,"Soltero(a)"),o.qZA(),o.TgZ(34,"option",13),o._uU(35,"En una relacion"),o.qZA(),o.TgZ(36,"option",14),o._uU(37,"Comprometido(a)"),o.qZA(),o.TgZ(38,"option",15),o._uU(39,"Casado(a)"),o.qZA(),o.TgZ(40,"option",16),o._uU(41,"Pareja de hecho"),o.qZA(),o.TgZ(42,"option",17),o._uU(43,"Relacion abierta"),o.qZA(),o.TgZ(44,"option",18),o._uU(45,"Es complicado"),o.qZA(),o.TgZ(46,"option",19),o._uU(47,"Separado(a)"),o.qZA(),o.TgZ(48,"option",20),o._uU(49,"Divorciado(a)"),o.qZA(),o.TgZ(50,"option",21),o._uU(51,"Viudo(a)"),o.qZA()()(),o.TgZ(52,"div",22)(53,"label"),o._uU(54,"Fecha de cumplea\xf1os:"),o.qZA(),o.TgZ(55,"input",23),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.birthdayValue=i)}),o.qZA()(),o.TgZ(56,"div",3)(57,"label"),o._uU(58,"Sobre m\xed (m\xe1ximo 50 caracteres):"),o.qZA(),o.TgZ(59,"textarea",24),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.aboutMeValue=i)}),o.qZA()(),o.TgZ(60,"div",25)(61,"button",26),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.actualizarPerfil())}),o._uU(62," Guardar cambios "),o.qZA(),o.TgZ(63,"button",27),o._uU(64,"Volver"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.displayNameValue),o.xp6(4),o.Q6J("ngModel",t.ciudad),o.xp6(4),o.Q6J("disabled",!0)("ngModel",t.usuario.email),o.xp6(4),o.Q6J("ngModel",t.phoneNumberValue),o.xp6(4),o.Q6J("ngModel",t.genderValue),o.xp6(10),o.Q6J("ngModel",t.estado),o.xp6(24),o.Q6J("ngModel",t.birthdayValue),o.xp6(4),o.Q6J("ngModel",t.aboutMeValue)}}let l5=(()=>{class n{constructor(t,r,i,l){this.afAuth=t,this.toastr=r,this.router=i,this._user=l,this.usuariosInfo=[],this.comprobar=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t,this.displayNameValue=t?.displayName,this.getUsers()})}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],t.forEach(r=>{const i={id:r.payload.doc.id,...r.payload.doc.data()};this.usuariosInfo.push(i);const l=this.usuariosInfo.find(f=>f.idUser===this.usuario.uid),u=this.usuariosInfo.find(f=>f.idUser===this.usuario.uid)?.id;this.id=u,null==u&&(this.comprobar=!0),this.phoneNumberValue=l.telefono,this.genderValue=l.Genero,this.birthdayValue=l.cumpleanos,this.aboutMeValue=l.about,this.ciudad=l.ciudad,this.estado=l.estado})})}actualizarPerfil(){this.usuario?this.afAuth.currentUser.then(t=>{const r=t?.uid,i=t?.email,l=t?.photoURL;if(this.comprobar?this._user.addIUserInfo({idUser:r,usuario:this.displayNameValue,email:i,foto:l,telefono:this.phoneNumberValue,Genero:this.genderValue,cumpleanos:this.birthdayValue,about:this.aboutMeValue,ciudad:this.ciudad,estado:this.estado}).then(()=>{}):this._user.updateUser({idUser:r,usuario:this.displayNameValue,email:i,foto:l,telefono:this.phoneNumberValue,Genero:this.genderValue,cumpleanos:this.birthdayValue,about:this.aboutMeValue,ciudad:this.ciudad,estado:this.estado},this.id).then(()=>{}),t)return t.updateProfile({displayName:this.displayNameValue});throw new Error("Usuario no autenticado")}).then(()=>{this.router.navigate(["/perfil"]),this.toastr.info("Perfil actualizado.")}).catch(t=>{console.error("Error al actualizar el perfil:",t)}):console.error("Usuario no encontrado")}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ni),o.Y36(mo),o.Y36(fn),o.Y36(ng))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-perfil-editar"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"per-con"],[1,"form-group"],["required","","name","displayName","type","text",1,"form-control",3,"ngModel","ngModelChange"],["required","","name","email","type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"],["name","phoneNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","gender",1,"form-control","slc",3,"ngModel","ngModelChange"],["value","hombre"],["value","mujer"],["value","no_definido"],["name","estado",1,"form-control","slc",3,"ngModel","ngModelChange"],["value","soltero(a)"],["value","en una relacion"],["value","comprometido(a)"],["value","casado(a)"],["value","pareja de hecho"],["value","relacion abierta"],["value","es complicado"],["value","separado(a)"],["value","divorciado(a)"],["value","viudo(a)"],[1,"form-group","brt"],["name","birthday","type","date",1,"form-control","dent",3,"ngModel","ngModelChange"],["name","aboutMe","maxlength","50",1,"form-control",3,"ngModel","ngModelChange"],[1,"but"],[1,"btn","btn-primary",3,"click"],["routerLink","/perfil",1,"btn","btn-secondary"]],template:function(t,r){1&t&&o.YNc(0,a5,65,9,"div",0),2&t&&o.Q6J("ngIf",r.usuario)},dependencies:[_n,_l,HC,$C,mi,Ig,xg,ei,ni,QC,ts],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{padding:10px 20px;margin-right:10px;border:none;border-radius:5px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.per-con[_ngcontent-%COMP%]{width:98%}.slc[_ngcontent-%COMP%]{width:102%}.brt[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dent[_ngcontent-%COMP%]{width:100.3%;padding:8px;border:1px solid #bcb0b0;border-radius:4px}.but[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 500px){.per-con[_ngcontent-%COMP%]{width:94%}.slc[_ngcontent-%COMP%]{width:106%}}"]}),n})();function c5(n,e){if(1&n&&(o.TgZ(0,"div",17)(1,"p",18),o._uU(2),o.qZA(),o.TgZ(3,"p",18),o._uU(4),o.qZA(),o.TgZ(5,"p",18),o._uU(6),o.qZA(),o.TgZ(7,"p",18),o._uU(8),o.qZA(),o.TgZ(9,"p",18),o._uU(10),o.qZA()()),2&n){const t=o.oxw(2);o.xp6(2),o.hij("Vive en: ",t.info.ciudad,""),o.xp6(2),o.hij("Genero: ",t.info.Genero,""),o.xp6(2),o.hij("Cumplea\xf1os: ",t.info.cumpleanos,""),o.xp6(2),o.hij("Estado: ",t.info.estado,""),o.xp6(2),o.hij("Celular: ",t.info.telefono,"")}}function u5(n,e){1&n&&(o.TgZ(0,"div",19)(1,"div",20)(2,"div",21),o._UZ(3,"img",22),o.TgZ(4,"span"),o._uU(5,"Asi somos"),o.qZA()(),o.TgZ(6,"div",23),o._UZ(7,"img",24),o.TgZ(8,"span"),o._uU(9,"Actividad Fisica"),o.qZA()()()())}function d5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",35)(1,"img",36),o.NdJ("mouseenter",function(){const l=o.CHM(t).index,u=o.oxw(3);return o.KtG(u.onMouseEnter(l))})("mouseleave",function(){const l=o.CHM(t).index,u=o.oxw(3);return o.KtG(u.onMouseLeave(l))})("click",function(){const l=o.CHM(t).index,u=o.oxw(3);return o.KtG(u.onPreviewImage(l))}),o.qZA()()}if(2&n){const t=e.$implicit;o.xp6(1),o.Q6J("src",t.url,o.LSH)}}function h5(n,e){if(1&n&&(o.TgZ(0,"span",43),o._uU(1),o.qZA()),2&n){const t=o.oxw(4);o.xp6(1),o.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function f5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",44),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.onClosePreview())}),o._UZ(1,"i",45),o.qZA()}}function p5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",46),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.prev())}),o._UZ(1,"i",47),o.qZA()}}function g5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",48),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.next())}),o._UZ(1,"i",49),o.qZA()}}function m5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",50),o._UZ(1,"img",51),o.TgZ(2,"div",52)(3,"div")(4,"i",53),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.abrirCom(i.currentLightboxImage))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",54),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.likeImage(i.currentLightboxImage))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()()()()}if(2&n){const t=o.oxw(4);o.xp6(1),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage.url,o.LSH),o.xp6(5),o.Oqu(t.currentLightboxImage.commentsVideo.length),o.xp6(2),o.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),o.xp6(2),o.Oqu(t.currentLightboxImage.likesCountImage)}}const _5=function(n){return{active:n}};function y5(n,e){if(1&n&&(o.TgZ(0,"div",37),o.YNc(1,h5,2,2,"span",38),o.YNc(2,f5,2,0,"button",39),o.YNc(3,p5,2,0,"button",40),o.YNc(4,g5,2,0,"button",41),o.YNc(5,m5,11,7,"div",42),o.qZA()),2&n){const t=o.oxw(3);o.Q6J("ngClass",o.VKq(6,_5,t.previewImage)),o.xp6(1),o.Q6J("ngIf",t.showCount),o.xp6(1),o.Q6J("ngIf",t.previewImage),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.previewImage)}}function v5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",67),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(4);return o.KtG(i.close())}),o.qZA()}}function C5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",68)(1,"div",69)(2,"img",70),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.ir(l.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",71)(6,"p",72),o._uU(7),o.qZA(),o.TgZ(8,"div",73)(9,"div")(10,"i",54),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.likeComment(l))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",74),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.abrirEditar(l))}),o.qZA(),o.TgZ(14,"i",75),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(4);return o.KtG(u.deleteModal(l))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(4);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.hij(" ",t.comentario," "),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function w5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",55)(1,"div",56),o.YNc(2,v5,1,0,"span",57),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",58)(6,"div",59),o.YNc(7,C5,15,6,"div",60),o.qZA()(),o.TgZ(8,"div",61)(9,"form",62,63),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",64),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",65),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw(3);return o.KtG(l.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",66),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw(3);o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function b5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",76)(1,"div",77)(2,"div",78)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",79)(6,"button",80),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.closeDelete())}),o._uU(7," Cancelar "),o.qZA(),o.TgZ(8,"button",80),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.borrarComentario())}),o._uU(9," Aceptar "),o.qZA()()()()}}function I5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",81)(1,"div",77)(2,"div",78)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",82),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw(3);return o.KtG(l.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",83)(7,"button",80),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",80),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.editarComentario())}),o._uU(10," Aceptar "),o.qZA()()()()}if(2&n){const t=o.oxw(3);o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}function E5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",76)(1,"div",77)(2,"div",78)(3,"p"),o._uU(4,"\xbfEstas seguro de eliminar esta imagen?"),o.qZA()(),o.TgZ(5,"div",79)(6,"button",80),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.closeDelete())}),o._uU(7," Cancelar "),o.qZA(),o.TgZ(8,"button",80),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.eliminarImagen())}),o._uU(9," Aceptar "),o.qZA()()()()}}function T5(n,e){1&n&&(o.TgZ(0,"p"),o._uU(1,"No se han subido fotos aun.."),o.qZA())}function x5(n,e){if(1&n&&(o.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"div",29),o.YNc(5,d5,2,1,"div",30),o.qZA(),o.YNc(6,y5,6,8,"div",31),o.qZA()()(),o._UZ(7,"div"),o.YNc(8,w5,18,4,"div",32),o.TgZ(9,"div"),o.YNc(10,b5,10,0,"div",33),o.qZA(),o.YNc(11,I5,11,1,"div",34),o.TgZ(12,"div"),o.YNc(13,E5,10,0,"div",33),o.qZA(),o.YNc(14,T5,2,0,"p",1),o.qZA()),2&n){const t=o.oxw(2);o.xp6(5),o.Q6J("ngForOf",t.imageX),o.xp6(1),o.Q6J("ngIf",t.showMask),o.xp6(2),o.Q6J("ngIf",t.modalcom),o.xp6(2),o.Q6J("ngIf",t.modalDelete),o.xp6(1),o.Q6J("ngIf",t.modalEditar),o.xp6(2),o.Q6J("ngIf",t.modalDeleteImage),o.xp6(1),o.Q6J("ngIf",0==t.imageX.length)}}function D5(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"span",2),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.logout())}),o._uU(2,"Salir"),o.qZA(),o.TgZ(3,"div",3)(4,"div",4),o._UZ(5,"img",5),o.TgZ(6,"div",6),o._UZ(7,"img",7),o.TgZ(8,"p",8),o._uU(9),o.qZA()(),o.TgZ(10,"div")(11,"p",9),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.toggleInfo())}),o._uU(12,"Ver mas"),o.qZA(),o.YNc(13,c5,11,5,"div",10),o.qZA()(),o.TgZ(14,"p",11),o._uU(15),o.qZA()(),o.TgZ(16,"div",12)(17,"p",13),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.grupos())}),o._uU(18,"Grupos"),o.qZA(),o.TgZ(19,"p",13),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.imagenes())}),o._uU(20),o.qZA(),o.TgZ(21,"p",14),o._uU(22,"Volver"),o.qZA()(),o.YNc(23,u5,10,0,"div",15),o.YNc(24,x5,15,7,"div",16),o.BQk()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("src",t.urlPortada||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Starsinthesky.jpg/1024px-Starsinthesky.jpg",o.LSH),o.xp6(2),o.Q6J("src",t.info.foto?t.info.foto:"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.info.usuario),o.xp6(4),o.Q6J("ngIf",t.showMoreInfo),o.xp6(2),o.Oqu(t.info.about),o.xp6(5),o.hij(" Fotos de ",t.info.usuario," "),o.xp6(3),o.Q6J("ngIf",t.gr),o.xp6(1),o.Q6J("ngIf",t.im)}}function A5(n,e){1&n&&(o.ynx(0),o.TgZ(1,"p"),o._uU(2,"No se ha iniciado sesi\xf3n."),o.qZA(),o.BQk())}let S5=(()=>{class n{constructor(t,r,i,l,u,f,m,v){this.route=t,this._user=r,this.afAuth=i,this.location=l,this.toastr=u,this._imageUser=f,this.router=m,this.el=v,this.usuariosInfo=[],this.showMoreInfo=!1,this.ver="Ver mas...",this.gr=!0,this.im=!1,this.imageX=[],this.imageZ=[],this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.imageX[0],this.currentIndex=0,this.showCount=!1,this.controls=!0,this.totalImageCount=0,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.modalDeleteImage=!1,this.idDelete="",this.esInvitado=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t}),this.route.paramMap.subscribe(t=>{this.id=t.get("id")}),this.getUsers(),this.getUserImages(),"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],t.forEach(r=>{const i={id:r.payload.doc.id,...r.payload.doc.data()};this.usuariosInfo.push(i);const l=this.usuariosInfo.find(u=>u.idUser===this.id);this.info=l,this.urlPortada=this.info.portada,console.log(this.info.portada)})})}getUserImages(){this._imageUser.getUsuarioImagen().subscribe(t=>{this.imageZ=[],this.imageX=[],t.forEach(r=>{const i=r.payload.doc.data();this.imageZ.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]});const l=this.imageZ.filter(u=>u.idUser===this.id);this.imageX=l})})}goBack(){this.location.back()}toggleInfo(){this.showMoreInfo=!this.showMoreInfo,this.ver=this.showMoreInfo?"Ver menos":"Ver mas..."}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}grupos(){this.gr=!0,this.im=!1}imagenes(){this.gr=!1,this.im=!0}likeImage(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const l=i.uid,u=i.displayName,f=i.email,m=t.likedByImage.indexOf(l);-1!==m?(t.likedByImage.splice(m,1),t.userImageLikes.splice(m,1),t.likesCountImage--):(t.likedByImage.push(l),t.likesCountImage++,t.userImageLikes.push({usuario:u,correo:f}));const v=t.id,x={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._imageUser.updateImgUsuario(v,x)}else r.modal=!0})()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.imageX[t],this.totalImageCount=this.imageX.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,this.modalDeleteImage=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.imageX.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.imageX[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.imageX.length-1),this.currentLightboxImage=this.imageX[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const l=r.dataVideoId,u=r.dataVideoId.id;l.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const D={commentsVideo:l.commentsVideo};yield r._imageUser.updateImgUsuario(u,D),r.comentario=""}})()}abrirCom(t){var r=this;return(0,te.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._imageUser.updateImgUsuario(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(l=>{console.error("Error al eliminar el comentario:",l)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._imageUser.updateImgUsuario(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(u=>{console.error("Error al editar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const l=i.uid,u=t.likedByComment.indexOf(l);-1!==u?(t.likedByComment.splice(u,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(l),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._imageUser.updateImgUsuario(f,v)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0,this.modalDeleteImage=!1}ir(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}deleteImgModal(t){this.idDelete=t,this.modalDeleteImage=!0,this.ocultarx=!0}eliminarImagen(){this._imageUser.delete(this.idDelete).then(()=>{this.imageX=this.imageX.filter(t=>t.id!==this.idDelete),this.toastr.error("Imagen eliminida"),this.modalDeleteImage=!1,this.previewImage=!1})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(wc),o.Y36(ng),o.Y36(Ni),o.Y36(Ae),o.Y36(mo),o.Y36(gV),o.Y36(fn),o.Y36(o.SBq))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-ver-usuario"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[2,"padding","6px","position","absolute","right","0","text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"user-info"],[1,"img-container"],["alt","",2,"width","100%","position","absolute","z-index","-1",3,"src"],[2,"padding","5px"],["alt","Foto de perfil","width","70","height","70",2,"cursor","pointer","user-select","none",3,"src"],[1,"lap","user"],[1,"edit-perfil",3,"click"],["style","display: flex; flex-direction: column; align-items: center",4,"ngIf"],[1,"lap"],[1,"acciones"],[2,"cursor","pointer",3,"click"],["routerLink","/perfil",2,"cursor","pointer"],["style","\n        display: flex;\n        padding: 20px;\n        flex-wrap: wrap;\n        justify-content: center;\n      ",4,"ngIf"],["class","contenedor-img",4,"ngIf"],[2,"display","flex","flex-direction","column","align-items","center"],[1,"lap","email"],[2,"display","flex","padding","20px","flex-wrap","wrap","justify-content","center"],[1,"container-img-g"],[1,"bf"],["routerLink","/main","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2FScreen%20Shot%202024-05-06%20at%2011.43.48%20AM.png?alt=media&token=c0c71fed-4aff-4923-8663-9d91d1f9f4df","alt","",2,"cursor","pointer"],[1,"bf","bf2"],["routerLink","/main-activate","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Factivate-logo.jpeg?alt=media&token=28baeec7-81b9-42a8-845d-3e226031f3ba","alt","",2,"cursor","pointer"],[1,"contenedor-img"],[1,"contenedor",2,"color","white"],[1,"box"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev",2,"border-radius","4px","background-color","gray"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next",2,"border-radius","4px","background-color","gray"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o.YNc(1,D5,25,8,"ng-container",1),o.YNc(2,A5,3,0,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",r.usuario),o.xp6(1),o.Q6J("ngIf",!r.usuario))},dependencies:[tn,Ti,_n,_l,Wi,mi,ei,tr,ni,ts,Po],styles:[".img-container[_ngcontent-%COMP%]{gap:1rem;border-radius:12px;display:flex;height:25vh;align-items:flex-end;box-shadow:0 0 12px #000}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:13px}.lap[_ngcontent-%COMP%]{border-radius:7px;background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;text-align:center;margin:3px}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.acciones[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;border-radius:17px;padding:6px 27px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.container-img-g[_ngcontent-%COMP%]{gap:2rem;display:flex;text-align:center;width:135px;justify-content:center}.bf[_ngcontent-%COMP%]{border-radius:7px;padding:7px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.bf[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.user[_ngcontent-%COMP%]{color:#fff;margin:0;font-weight:600}.edit-perfil[_ngcontent-%COMP%]{border-radius:22px;padding:5px 22px;background-color:#fff;color:#000;cursor:pointer}.edit-perfil[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.contenedor-img[_ngcontent-%COMP%]{display:flex;flex-direction:column}.subir[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:12px}.subir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;width:129px;padding:5px 9px;border-radius:13px}.contenedor[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{border-radius:15px;padding:2px 18px;background-color:gray;display:inline-flex;gap:4rem;position:absolute;bottom:20%}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:2px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:2px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 500px){.bf2[_ngcontent-%COMP%]{position:relative;top:3rem}}"]}),n})();function M5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",9)(1,"div",10)(2,"span",11),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",12)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",13),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",14),o._uU(10,"Registrate"),o.qZA()()()()()}}let tP=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.esInvitado=!1,this.modal=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}verPerfil(){this.router.navigate(["/perfil"])}close(){this.modal=!1}salir(){this.logout()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ni),o.Y36(fn),o.Y36(mo))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-navbar-activate"]],decls:16,vars:2,consts:[[2,"user-select","none"],[1,"log"],[1,"verperfil",2,"text-shadow","3px 1px 2px #1669c1","cursor","pointer","color","white",3,"click"],[2,"text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"caja"],["routerLink","/main-activate",1,"nav-link"],["routerLink","/galeria-activate",1,"nav-link"],["routerLink","/videos-activate",1,"nav-link"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"span",2),o.NdJ("click",function(){return r.verPerfil()}),o._uU(4),o.qZA(),o.TgZ(5,"span",3),o.NdJ("click",function(){return r.logout()}),o._uU(6,"Salir"),o.qZA()()(),o.TgZ(7,"div",4)(8,"a",5),o._uU(9,"INICIO"),o.qZA(),o.TgZ(10,"a",6),o._uU(11,"IMAGENES"),o.qZA(),o.TgZ(12,"a",7),o._uU(13,"VIDEOS"),o.qZA()()(),o.TgZ(14,"div"),o.YNc(15,M5,11,0,"div",8),o.qZA()),2&t&&(o.xp6(4),o.hij("Hola ",r.usuarioActual,""),o.xp6(11),o.Q6J("ngIf",r.modal))},dependencies:[_n,Fs],styles:[".log[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.verperfil[_ngcontent-%COMP%]{cursor:pointer}.verperfil[_ngcontent-%COMP%]:hover{color:red}.caja[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,rgba(196,214,1,.6039215686),rgba(254,254,255,.4588235294));display:flex;justify-content:space-around;padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center;margin-top:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 900px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),k5=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-main-activate"]],decls:13,vars:0,consts:[[1,"contenedor",2,"color","white","text-decoration","none"],[2,"text-align","center"],[1,"move"],[1,"move2"],["src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Factivate-logo.jpeg?alt=media&token=28baeec7-81b9-42a8-845d-3e226031f3ba","alt","",1,"img-fondo"],["href","https://www.facebook.com/profile.php?id=100061274895674",2,"user-select","none","cursor","pointer","position","absolute","bottom","3%","color","black","text-decoration","none"],[1,"fab","fa-facebook-square"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"app-navbar-activate"),o.TgZ(2,"div")(3,"div",1)(4,"h2",2),o._uU(5,"Bienvenidos a Activate"),o.qZA(),o.TgZ(6,"span",3),o._uU(7,"Sesi\xf3n de Actividad F\xedsica Musicalizada"),o.qZA()(),o.TgZ(8,"div"),o._UZ(9,"img",4),o.qZA(),o.TgZ(10,"a",5),o._UZ(11,"i",6),o._uU(12," Unete a nuestro grupo de Facebook. "),o.qZA()()())},dependencies:[tP],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;padding:20px;animation:apearText 2s linear}.img-fondo[_ngcontent-%COMP%]{position:relative;top:1rem;width:100%;z-index:1;height:60vh}.move[_ngcontent-%COMP%]{animation:moveText .5s linear}.move2[_ngcontent-%COMP%]{animation:moveText 1s linear}@media (max-width: 500px){.img-fondo[_ngcontent-%COMP%]{height:44vh;top:5rem}}@keyframes moveText{0%{opacity:0;transform:translate(100%)}50%{opacity:.5}to{opacity:1;transform:translate(0)}}@keyframes apearText{0%{opacity:0}50%{opacity:.5}to{opacity:1}}"]}),n})(),P5=(()=>{class n{constructor(t){this.firestore=t}getim(){return this.firestore.collection("img-activate").snapshotChanges()}updateImgAc(t,r){return this.firestore.collection("img-activate").doc(t).update(r)}addImagenInfo(t){return this.firestore.collection("img-activate").add(t)}delete(t){return this.firestore.collection("img-activate").doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11)(1,"p",12),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.subirArchivo())}),o._uU(2,"+ Agregar imagen"),o.qZA()()}}function N5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",13)(1,"img",14),o.NdJ("mouseenter",function(){const l=o.CHM(t).index,u=o.oxw();return o.KtG(u.onMouseEnter(l))})("mouseleave",function(){const l=o.CHM(t).index,u=o.oxw();return o.KtG(u.onMouseLeave(l))})("click",function(){const l=o.CHM(t).index,u=o.oxw();return o.KtG(u.onPreviewImage(l))}),o.qZA()()}if(2&n){const t=e.$implicit;o.xp6(1),o.Q6J("src",t.url,o.LSH)}}function R5(n,e){if(1&n&&(o.TgZ(0,"span",21),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function F5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.onClosePreview())}),o._UZ(1,"i",23),o.qZA()}}function L5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",24),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.prev())}),o._UZ(1,"i",25),o.qZA()}}function V5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",26),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.next())}),o._UZ(1,"i",27),o.qZA()}}function U5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div")(1,"i",34),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(3);return o.KtG(i.deleteImgModal(i.currentLightboxImage.id))}),o.qZA()()}}function B5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",28),o._UZ(1,"img",29),o.TgZ(2,"div",30)(3,"div")(4,"i",31),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.abrirCom(i.currentLightboxImage))}),o.qZA(),o.TgZ(5,"span"),o._uU(6),o.qZA()(),o.TgZ(7,"div")(8,"i",32),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.likeImage(i.currentLightboxImage))}),o.qZA(),o.TgZ(9,"span"),o._uU(10),o.qZA()(),o.YNc(11,U5,2,0,"div",33),o.qZA()()}if(2&n){const t=o.oxw(2);o.xp6(1),o.ekj("zoom-in",t.previewImage),o.Q6J("src",t.currentLightboxImage.url,o.LSH),o.xp6(5),o.Oqu(t.currentLightboxImage.commentsVideo.length),o.xp6(2),o.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),o.xp6(2),o.Oqu(t.currentLightboxImage.likesCountImage),o.xp6(1),o.Q6J("ngIf",t.adm)}}const j5=function(n){return{active:n}};function H5(n,e){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,R5,2,2,"span",16),o.YNc(2,F5,2,0,"button",17),o.YNc(3,L5,2,0,"button",18),o.YNc(4,V5,2,0,"button",19),o.YNc(5,B5,12,8,"div",20),o.qZA()),2&n){const t=o.oxw();o.Q6J("ngClass",o.VKq(6,j5,t.previewImage)),o.xp6(1),o.Q6J("ngIf",t.showCount),o.xp6(1),o.Q6J("ngIf",t.previewImage),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.controls),o.xp6(1),o.Q6J("ngIf",t.previewImage)}}function $5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function Z5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",48)(1,"div",49)(2,"img",50),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.ir(l.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",51)(6,"p",52),o._uU(7),o.qZA(),o.TgZ(8,"div",53)(9,"div")(10,"i",32),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.likeComment(l))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",54),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.abrirEditar(l))}),o.qZA(),o.TgZ(14,"i",34),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.deleteModal(l))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function G5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",35)(1,"div",36),o.YNc(2,$5,1,0,"span",37),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",38)(6,"div",39),o.YNc(7,Z5,15,6,"div",40),o.qZA()(),o.TgZ(8,"div",41)(9,"form",42,43),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",44),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",45),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",46),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function q5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",58)(6,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function z5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",60)(1,"div",56)(2,"div",57)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",61),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",62)(7,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}function W5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",63)(1,"div",56)(2,"span",64),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",57)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",65),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",66),o._uU(10,"Registrate"),o.qZA()()()()()}}function K5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",55)(1,"div",56)(2,"div",57)(3,"p"),o._uU(4,"\xbfEstas seguro de eliminar esta imagen?"),o.qZA()(),o.TgZ(5,"div",58)(6,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",59),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.eliminarImagen())}),o._uU(9,"Aceptar"),o.qZA()()()()}}let Y5=(()=>{class n{constructor(t,r,i,l,u,f,m){this.el=t,this.afAuth=r,this._image=i,this.toastr=l,this.router=u,this._user=f,this.storagex=m,this.images=[],this.showCount=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.images[0],this.currentIndex=0,this.controls=!0,this.totalImageCount=0,this.reset=0,this.adm=!1,this.esInvitado=!1,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.modalDeleteImage=!1,this.idDelete=""}ngOnInit(){this.getImages(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),("QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r||"AO7bYMNMPuSUMl5vH8tOqzavTrt2"==r)&&(this.adm=!0)})}getImages(){this._image.getim().subscribe(t=>{this.images=[],t.forEach(r=>{const i=r.payload.doc.data();this.images.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]})})})}subirArchivo(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const l=new Image,u=new FileReader;u.onload=f=>{l.onload=()=>{const m=document.createElement("canvas");let D=l.width,L=l.height;(D>800||L>600)&&(D>L?(L*=800/D,D=800):(D*=600/L,L=600)),m.width=D,m.height=L;const j=m.getContext("2d");j?(j.drawImage(l,0,0,D,L),m.toBlob(q=>{if(q){const ee=`images/${i.name}`,ae=this.storagex.ref(ee);this.storagex.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe($u(()=>{ae.getDownloadURL().subscribe(Ge=>{this._image.addImagenInfo({url:Ge}).then(()=>{console.log("actualizando"),this.toastr.info("Actualizando lista de Imagenes")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},l.src=f.target.result},u.readAsDataURL(i)}}),t.click()}likeImage(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const l=i.uid,u=i.displayName,f=i.email,m=t.likedByImage.indexOf(l);-1!==m?(t.likedByImage.splice(m,1),t.userImageLikes.splice(m,1),t.likesCountImage--):(t.likedByImage.push(l),t.likesCountImage++,t.userImageLikes.push({usuario:u,correo:f}));const v=t.id,x={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._image.updateImgAc(v,x)}else r.modal=!0})()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.images[t],this.totalImageCount=this.images.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,this.modalDeleteImage=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.images.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.images[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.currentLightboxImage=this.images[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email||"jeestrada377@gmail.com"==i?.email)&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email||"jeestrada377@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const l=r.dataVideoId,u=r.dataVideoId.id;l.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const D={commentsVideo:l.commentsVideo};yield r._image.updateImgAc(u,D),r.comentario=""}})()}abrirCom(t){var r=this;return(0,te.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._image.updateImgAc(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(l=>{console.error("Error al eliminar el comentario:",l)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._image.updateImgAc(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(u=>{console.error("Error al editar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const l=i.uid,u=t.likedByComment.indexOf(l);-1!==u?(t.likedByComment.splice(u,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(l),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._image.updateImgAc(f,v)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0,this.modalDeleteImage=!1}ir(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}deleteImgModal(t){this.idDelete=t,this.modalDeleteImage=!0,this.ocultarx=!0}eliminarImagen(){this._image.delete(this.idDelete).then(()=>{this.images=this.images.filter(t=>t.id!==this.idDelete),this.toastr.error("Imagen eliminida"),this.modalDeleteImage=!1,this.previewImage=!1})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(Ni),o.Y36(P5),o.Y36(mo),o.Y36(fn),o.Y36(ng),o.Y36(Xk))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-galeria-activate"]],decls:17,vars:8,consts:[[1,"contenedor"],[1,"box"],["class","subir",4,"ngIf"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],["class","modal",4,"ngIf"],[1,"subir"],[2,"cursor","pointer",3,"click"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev",2,"border-radius","4px","background-color","gray"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next",2,"border-radius","4px","background-color","gray"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[4,"ngIf"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"],[1,"modal"],[1,"fas","fa-times","lax",3,"click"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar-activate"),o.YNc(3,O5,3,0,"div",2),o.TgZ(4,"div",3)(5,"div",4),o.YNc(6,N5,2,1,"div",5),o.qZA(),o.YNc(7,H5,6,8,"div",6),o.qZA()()(),o._UZ(8,"div"),o.YNc(9,G5,18,4,"div",7),o.TgZ(10,"div"),o.YNc(11,q5,10,0,"div",8),o.qZA(),o.YNc(12,z5,11,1,"div",9),o.TgZ(13,"div"),o.YNc(14,W5,11,0,"div",10),o.qZA(),o.TgZ(15,"div"),o.YNc(16,K5,10,0,"div",8),o.qZA()),2&t&&(o.xp6(3),o.Q6J("ngIf",r.adm),o.xp6(3),o.Q6J("ngForOf",r.images),o.xp6(1),o.Q6J("ngIf",r.showMask),o.xp6(2),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar),o.xp6(2),o.Q6J("ngIf",r.modal),o.xp6(2),o.Q6J("ngIf",r.modalDeleteImage))},dependencies:[tn,Ti,_n,Fs,Wi,mi,ei,tr,ni,ts,Po,tP],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.subir[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:12px}.subir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,rgba(196,214,1,.6039215686),rgba(254,254,255,.4588235294));color:#fff;width:129px;padding:5px 9px;border-radius:13px}.box[_ngcontent-%COMP%]{color:#fff;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{border-radius:15px;padding:2px 18px;background-color:gray;display:inline-flex;gap:4rem;position:absolute;bottom:20%}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block;margin-top:10px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:2px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:2px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}"]}),n})(),Q5=(()=>{class n{constructor(t){this.firestore=t}getactvid(){return this.firestore.collection("videos-activate",t=>t.orderBy("nombre","asc")).snapshotChanges()}updateActVideo(t,r){return this.firestore.collection("videos-activate").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Jh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function J5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11)(1,"video",12),o._UZ(2,"source",13),o.qZA(),o.TgZ(3,"div",14)(4,"div",15)(5,"p",16),o._uU(6),o.qZA()(),o.TgZ(7,"div",17)(8,"div",18)(9,"i",19),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw();return o.KtG(u.abrirCom(l))}),o.qZA(),o.TgZ(10,"span"),o._uU(11),o.qZA()(),o.TgZ(12,"div",20)(13,"i",21),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw();return o.KtG(u.likeVideo(l))}),o.qZA(),o.TgZ(14,"span"),o._uU(15),o.qZA()()()()()}if(2&n){const t=e.$implicit,r=o.oxw();o.xp6(2),o.Q6J("src",t.url,o.LSH),o.xp6(4),o.hij(" ",t.nombre," "),o.xp6(5),o.Oqu(t.commentsVideo.length),o.xp6(2),o.ekj("liked",t.likedByVideo.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountVideo)}}function X5(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",34),o.NdJ("click",function(){o.CHM(t);const i=o.oxw(2);return o.KtG(i.close())}),o.qZA()}}function eZ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",35)(1,"div",36)(2,"img",37),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.ir(l.idUser))}),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.qZA()(),o.TgZ(5,"div",38)(6,"p",39),o._uU(7),o.qZA(),o.TgZ(8,"div",40)(9,"div")(10,"i",21),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.likeComment(l))}),o.qZA(),o.TgZ(11,"span"),o._uU(12),o.qZA()(),o.TgZ(13,"i",41),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.abrirEditar(l))}),o.qZA(),o.TgZ(14,"i",42),o.NdJ("click",function(){const l=o.CHM(t).$implicit,u=o.oxw(2);return o.KtG(u.deleteModal(l))}),o.qZA()()()()}if(2&n){const t=e.$implicit,r=o.oxw(2);o.xp6(2),o.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",o.LSH),o.xp6(2),o.Oqu(t.usuario),o.xp6(3),o.Oqu(t.comentario),o.xp6(3),o.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),o.xp6(2),o.Oqu(t.likesCountComment)}}function tZ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",22)(1,"div",23),o.YNc(2,X5,1,0,"span",24),o.TgZ(3,"h3"),o._uU(4,"Comentarios:"),o.qZA(),o.TgZ(5,"div",25)(6,"div",26),o.YNc(7,eZ,15,6,"div",27),o.qZA()(),o.TgZ(8,"div",28)(9,"form",29,30),o.NdJ("submit",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.addComment(i.comentario))}),o.TgZ(11,"label",31),o._uU(12,"Agregar comentario:"),o.qZA(),o._UZ(13,"br"),o.TgZ(14,"textarea",32),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.comentario=i)}),o.qZA(),o._UZ(15,"br"),o.TgZ(16,"button",33),o._uU(17," Comentar "),o.qZA()()()()()}if(2&n){const t=o.MAs(10),r=o.oxw();o.xp6(2),o.Q6J("ngIf",r.ocultarx),o.xp6(5),o.Q6J("ngForOf",r.dataVideoId.commentsVideo),o.xp6(7),o.Q6J("ngModel",r.comentario),o.xp6(2),o.Q6J("disabled",!t.valid)}}function nZ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",43)(1,"div",44)(2,"div",45)(3,"p"),o._uU(4,"\xbfDeseas eliminar este Comentario?"),o.qZA()(),o.TgZ(5,"div",46)(6,"button",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(7,"Cancelar"),o.qZA(),o.TgZ(8,"button",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.borrarComentario())}),o._uU(9,"Aceptar"),o.qZA()()()()}}function rZ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",48)(1,"div",44)(2,"div",45)(3,"p"),o._uU(4,"Editar comentario:"),o.qZA(),o.TgZ(5,"textarea",49),o.NdJ("ngModelChange",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.esteComentario=i)}),o.qZA()(),o.TgZ(6,"div",50)(7,"button",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.closeDelete())}),o._uU(8,"Cancelar"),o.qZA(),o.TgZ(9,"button",47),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.editarComentario())}),o._uU(10,"Aceptar"),o.qZA()()()()}if(2&n){const t=o.oxw();o.xp6(5),o.Q6J("ngModel",t.esteComentario)}}function iZ(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",51)(1,"div",44)(2,"span",52),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.close())}),o.qZA(),o.TgZ(3,"div",45)(4,"p"),o._uU(5," Primero debes "),o.TgZ(6,"a",53),o.NdJ("click",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.salir())}),o._uU(7,"Iniciar Sesion"),o.qZA(),o._uU(8," o "),o.TgZ(9,"a",54),o._uU(10,"Registrate"),o.qZA()()()()()}}const oZ=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:v$},{path:"registrar",component:x$},{path:"recuperar",component:k$},{path:"main",component:iE,canActivate:[Il]},{path:"main-activate",component:k5,canActivate:[Il]},{path:"galeria-activate",component:Y5,canActivate:[Il]},{path:"videos-activate",component:(()=>{class n{constructor(t,r,i,l,u){this.afAuth=t,this._videosService=r,this.afs=i,this._users=l,this.router=u,this.videos=[],this.esInvitado=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.ocultarx=!0,this.adm=!1,this.filteredVideos=[],this.searchTerm=""}ngOnInit(){this.getVideos(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getVideos(){this._videosService.getactvid().subscribe(t=>{this.videos=[],t.forEach(r=>{const i=r.payload.doc.data();this.videos.push({id:r.payload.doc.id,...i,likesCountVideo:i.likesCountVideo||0,likedByVideo:i.likedByVideo||[],userVideoLikes:i.userVideoLikes||[],commentsVideo:i.commentsVideo||[]})}),this.filteredVideos=this.videos})}likeVideo(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const l=i.uid,u=i.displayName,f=i.email,m=t.likedByVideo.indexOf(l);-1!==m?(t.likedByVideo.splice(m,1),t.userVideoLikes.splice(m,1),t.likesCountVideo--):(t.likedByVideo.push(l),t.likesCountVideo++,t.userVideoLikes.push({usuario:u,correo:f}));const v=t.id,x={likesCountVideo:t.likesCountVideo,likedByVideo:t.likedByVideo,userVideoLikes:t.userVideoLikes};yield r._videosService.updateActVideo(v,x)}else r.modal=!0})()}abrirCom(t){var r=this;return(0,te.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}close(){this.modal=!1,this.modalcom=!1}ir(t){var r=this;return(0,te.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}likeComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const l=i.uid,u=t.likedByComment.indexOf(l);-1!==u?(t.likedByComment.splice(u,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(l),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(v=>v===t)){const v={commentsVideo:r.dataVideoId.commentsVideo};yield r._videosService.updateActVideo(f,v),console.log(v)}}else r.modal=!0})()}abrirEditar(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email||"jeestrada377@gmail.com"==i?.email)&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email||"jeestrada377@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,te.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const l=r.dataVideoId,u=r.dataVideoId.id;l.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const D={commentsVideo:l.commentsVideo};yield r._videosService.updateActVideo(u,D),r.comentario=""}})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._videosService.updateActVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(l=>{console.error("Error al eliminar el comentario:",l)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._videosService.updateActVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(u=>{console.error("Error al editar el comentario:",u)})):console.error("\xcdndice de comentario no v\xe1lido")}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}filterVideos(){this.filteredVideos=this.videos.filter(t=>t.nombre.toLowerCase().includes(this.searchTerm.toLowerCase()))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ni),o.Y36(Q5),o.Y36(Jh),o.Y36(ng),o.Y36(fn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-videos-activate"]],decls:14,vars:6,consts:[[1,"contenedor"],[1,"box"],[2,"margin-top","15px","display","flex","justify-content","flex-end"],["type","text","placeholder","Buscar videos...",2,"width","50%","padding","8px","border-radius","5px",3,"ngModel","ngModelChange","keyup"],[1,"video-container"],[1,"video"],["class","gallery-video",4,"ngFor","ngForOf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],["class","modal",4,"ngIf"],[1,"gallery-video"],["controls",""],["type","video/mp4",3,"src"],[1,"section"],[1,"title"],[2,"margin","0"],[1,"bocadillos"],[1,"comment"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"likes"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modalcom"],[1,"modal-com"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"],[1,"modal"],[1,"fas","fa-times","lax",3,"click"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"app-navbar-activate"),o.TgZ(3,"div",2)(4,"input",3),o.NdJ("ngModelChange",function(l){return r.searchTerm=l})("keyup",function(){return r.filterVideos()}),o.qZA()(),o.TgZ(5,"div",4)(6,"div",5),o.YNc(7,J5,16,6,"div",6),o.qZA()()()(),o.YNc(8,tZ,18,4,"div",7),o.TgZ(9,"div"),o.YNc(10,nZ,10,0,"div",8),o.qZA(),o.YNc(11,rZ,11,1,"div",9),o.TgZ(12,"div"),o.YNc(13,iZ,11,0,"div",10),o.qZA()),2&t&&(o.xp6(4),o.Q6J("ngModel",r.searchTerm),o.xp6(3),o.Q6J("ngForOf",r.filteredVideos),o.xp6(1),o.Q6J("ngIf",r.modalcom),o.xp6(2),o.Q6J("ngIf",r.modalDelete),o.xp6(1),o.Q6J("ngIf",r.modalEditar),o.xp6(2),o.Q6J("ngIf",r.modal))},dependencies:[Ti,_n,Fs,Wi,mi,ei,tr,ni,ts,Po,tP],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#000;display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}.bocadillos[_ngcontent-%COMP%]{display:flex;gap:1rem}.video-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;padding-bottom:56.25%}.video-wrapper[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;padding:20px;width:100%}.section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.video-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;padding:25px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);column-gap:30px;row-gap:30px}.gallery-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:.35rem;margin-bottom:17px;box-shadow:0 1px 5px #00000036}@media screen and (max-width: 900px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width: 580px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]}),n})(),canActivate:[Il]},{path:"galeria",component:n$,canActivate:[Il]},{path:"videos",component:d$,canActivate:[Il]},{path:"nuevo-video",component:O$,canActivate:[Il]},{path:"musica",component:f$,canActivate:[Il]},{path:"perfil",component:s5,canActivate:[Il]},{path:"perfil-editar",component:l5,canActivate:[Il]},{path:"usuario/:id",component:S5,canActivate:[Il]},{path:"**",redirectTo:"/",pathMatch:"full"}];let sZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[II.forRoot(oZ),II]}),n})(),aZ=(()=>{class n{constructor(){this.title="asi-somos-asi-bailamos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&o._UZ(0,"router-outlet")},dependencies:[av]}),n})();const nP_firebase={apiKey:"AIzaSyC-xnNzaTCFveAr77Iqf1CQ-wRct6kCBkQ",authDomain:"fitpal-horario.firebaseapp.com",projectId:"fitpal-horario",storageBucket:"fitpal-horario.appspot.com",messagingSenderId:"240368209776",appId:"1:240368209776:web:7b2960966943d391e049b5"};let lZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[aZ]}),n.\u0275inj=o.cJS({imports:[Qa,sZ,dx,XC,iD,Qi.hO.initializeApp(nP_firebase),SI(()=>CA(nP_firebase)),GU(()=>zU()),Hm,n0.forRoot({timeOut:4e3,positionClass:"toast-bottom-right",preventDuplicates:!0})]}),n})();(0,o.G48)(),hu().bootstrapModule(lZ).catch(n=>console.error(n))},9751:(bt,Ne,U)=>{U.d(Ne,{y:()=>ve});var o=U(2961),H=U(727),R=U(8822),oe=U(9635),de=U(2416),_e=U(576),pe=U(2806);let ve=(()=>{class J{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const xe=new J;return xe.source=this,xe.operator=Oe,xe}subscribe(Oe,xe,it){const we=function G(J){return J&&J instanceof o.Lv||function z(J){return J&&(0,_e.m)(J.next)&&(0,_e.m)(J.error)&&(0,_e.m)(J.complete)}(J)&&(0,H.Nn)(J)}(Oe)?Oe:new o.Hp(Oe,xe,it);return(0,pe.x)(()=>{const{operator:ye,source:yt}=this;we.add(ye?ye.call(we,yt):yt?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(xe){Oe.error(xe)}}forEach(Oe,xe){return new(xe=Ce(xe))((it,we)=>{const ye=new o.Hp({next:yt=>{try{Oe(yt)}catch(pt){we(pt),ye.unsubscribe()}},error:we,complete:it});this.subscribe(ye)})}_subscribe(Oe){var xe;return null===(xe=this.source)||void 0===xe?void 0:xe.subscribe(Oe)}[R.L](){return this}pipe(...Oe){return(0,oe.U)(Oe)(this)}toPromise(Oe){return new(Oe=Ce(Oe))((xe,it)=>{let we;this.subscribe(ye=>we=ye,ye=>it(ye),()=>xe(we))})}}return J.create=$e=>new J($e),J})();function Ce(J){var $e;return null!==($e=J??de.v.Promise)&&void 0!==$e?$e:Promise}},7579:(bt,Ne,U)=>{U.d(Ne,{x:()=>pe});var o=U(9751),H=U(727);const oe=(0,U(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=U(8737),_e=U(2806);let pe=(()=>{class Ce extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const J=new ve(this,this);return J.operator=G,J}_throwIfClosed(){if(this.closed)throw new oe}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:J}=this;for(;J.length;)J.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:J,isStopped:$e,observers:Oe}=this;return J||$e?H.Lc:(this.currentObservers=null,Oe.push(G),new H.w0(()=>{this.currentObservers=null,(0,de.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:J,thrownError:$e,isStopped:Oe}=this;J?G.error($e):Oe&&G.complete()}asObservable(){const G=new o.y;return G.source=this,G}}return Ce.create=(z,G)=>new ve(z,G),Ce})();class ve extends pe{constructor(z,G){super(),this.destination=z,this.source=G}next(z){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===J||J.call(G,z)}error(z){var G,J;null===(J=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===J||J.call(G,z)}complete(){var z,G;null===(G=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===G||G.call(z)}_subscribe(z){var G,J;return null!==(J=null===(G=this.source)||void 0===G?void 0:G.subscribe(z))&&void 0!==J?J:H.Lc}}},2961:(bt,Ne,U)=>{U.d(Ne,{Hp:()=>it,Lv:()=>J});var o=U(576),H=U(727),R=U(2416),oe=U(7849);function de(){}const _e=Ce("C",void 0,void 0);function Ce(Ae,Ee,Se){return{kind:Ae,value:Ee,error:Se}}var z=U(3410),G=U(2806);class J extends H.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,H.Nn)(Ee)&&Ee.add(this)):this.destination=pt}static create(Ee,Se,qe){return new it(Ee,Se,qe)}next(Ee){this.isStopped?yt(function ve(Ae){return Ce("N",Ae,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?yt(function pe(Ae){return Ce("E",void 0,Ae)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?yt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Oe(Ae,Ee){return $e.call(Ae,Ee)}class xe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Ee)}catch(qe){we(qe)}}error(Ee){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Ee)}catch(qe){we(qe)}else we(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Se){we(Se)}}}class it extends J{constructor(Ee,Se,qe){let ze;if(super(),(0,o.m)(Ee)||!Ee)ze={next:Ee??void 0,error:Se??void 0,complete:qe??void 0};else{let ue;this&&R.v.useDeprecatedNextContext?(ue=Object.create(Ee),ue.unsubscribe=()=>this.unsubscribe(),ze={next:Ee.next&&Oe(Ee.next,ue),error:Ee.error&&Oe(Ee.error,ue),complete:Ee.complete&&Oe(Ee.complete,ue)}):ze=Ee}this.destination=new xe(ze)}}function we(Ae){R.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Ae):(0,oe.h)(Ae)}function yt(Ae,Ee){const{onStoppedNotification:Se}=R.v;Se&&z.z.setTimeout(()=>Se(Ae,Ee))}const pt={closed:!0,next:de,error:function ye(Ae){throw Ae},complete:de}},727:(bt,Ne,U)=>{U.d(Ne,{Lc:()=>_e,w0:()=>de,Nn:()=>pe});var o=U(576);const R=(0,U(3888).d)(Ce=>function(G){Ce(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((J,$e)=>`${$e+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var oe=U(8737);class de{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:J}=this;if((0,o.m)(J))try{J()}catch(Oe){z=Oe instanceof R?Oe.errors:[Oe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Oe of $e)try{ve(Oe)}catch(xe){z=z??[],xe instanceof R?z=[...z,...xe.errors]:z.push(xe)}}if(z)throw new R(z)}}add(z){var G;if(z&&z!==this)if(this.closed)ve(z);else{if(z instanceof de){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(z)}}_hasParent(z){const{_parentage:G}=this;return G===z||Array.isArray(G)&&G.includes(z)}_addParent(z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(z),G):G?[G,z]:z}_removeParent(z){const{_parentage:G}=this;G===z?this._parentage=null:Array.isArray(G)&&(0,oe.P)(G,z)}remove(z){const{_finalizers:G}=this;G&&(0,oe.P)(G,z),z instanceof de&&z._removeParent(this)}}de.EMPTY=(()=>{const Ce=new de;return Ce.closed=!0,Ce})();const _e=de.EMPTY;function pe(Ce){return Ce instanceof de||Ce&&"closed"in Ce&&(0,o.m)(Ce.remove)&&(0,o.m)(Ce.add)&&(0,o.m)(Ce.unsubscribe)}function ve(Ce){(0,o.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(bt,Ne,U)=>{U.d(Ne,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Ne,U)=>{U.d(Ne,{E:()=>H});const H=new(U(9751).y)(de=>de.complete())},8996:(bt,Ne,U)=>{U.d(Ne,{D:()=>Ee});var o=U(8421),H=U(5363),R=U(9468),_e=U(9751),ve=U(2202),Ce=U(576),z=U(9672);function J(Se,qe){if(!Se)throw new Error("Iterable cannot be null");return new _e.y(ze=>{(0,z.f)(ze,qe,()=>{const ue=Se[Symbol.asyncIterator]();(0,z.f)(ze,qe,()=>{ue.next().then(Qe=>{Qe.done?ze.complete():ze.next(Qe.value)})},0,!0)})})}var $e=U(3670),Oe=U(8239),xe=U(1144),it=U(6495),we=U(2206),ye=U(4532),yt=U(3260);function Ee(Se,qe){return qe?function Ae(Se,qe){if(null!=Se){if((0,$e.c)(Se))return function oe(Se,qe){return(0,o.Xf)(Se).pipe((0,R.R)(qe),(0,H.Q)(qe))}(Se,qe);if((0,xe.z)(Se))return function pe(Se,qe){return new _e.y(ze=>{let ue=0;return qe.schedule(function(){ue===Se.length?ze.complete():(ze.next(Se[ue++]),ze.closed||this.schedule())})})}(Se,qe);if((0,Oe.t)(Se))return function de(Se,qe){return(0,o.Xf)(Se).pipe((0,R.R)(qe),(0,H.Q)(qe))}(Se,qe);if((0,we.D)(Se))return J(Se,qe);if((0,it.T)(Se))return function G(Se,qe){return new _e.y(ze=>{let ue;return(0,z.f)(ze,qe,()=>{ue=Se[ve.h](),(0,z.f)(ze,qe,()=>{let Qe,At;try{({value:Qe,done:At}=ue.next())}catch(gt){return void ze.error(gt)}At?ze.complete():ze.next(Qe)},0,!0)}),()=>(0,Ce.m)(ue?.return)&&ue.return()})}(Se,qe);if((0,yt.L)(Se))return function pt(Se,qe){return J((0,yt.Q)(Se),qe)}(Se,qe)}throw(0,ye.z)(Se)}(Se,qe):(0,o.Xf)(Se)}},8421:(bt,Ne,U)=>{U.d(Ne,{Xf:()=>$e});var o=U(7582),H=U(1144),R=U(8239),oe=U(9751),de=U(3670),_e=U(2206),pe=U(4532),ve=U(6495),Ce=U(3260),z=U(576),G=U(7849),J=U(8822);function $e(Ae){if(Ae instanceof oe.y)return Ae;if(null!=Ae){if((0,de.c)(Ae))return function Oe(Ae){return new oe.y(Ee=>{const Se=Ae[J.L]();if((0,z.m)(Se.subscribe))return Se.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,H.z)(Ae))return function xe(Ae){return new oe.y(Ee=>{for(let Se=0;Se<Ae.length&&!Ee.closed;Se++)Ee.next(Ae[Se]);Ee.complete()})}(Ae);if((0,R.t)(Ae))return function it(Ae){return new oe.y(Ee=>{Ae.then(Se=>{Ee.closed||(Ee.next(Se),Ee.complete())},Se=>Ee.error(Se)).then(null,G.h)})}(Ae);if((0,_e.D)(Ae))return ye(Ae);if((0,ve.T)(Ae))return function we(Ae){return new oe.y(Ee=>{for(const Se of Ae)if(Ee.next(Se),Ee.closed)return;Ee.complete()})}(Ae);if((0,Ce.L)(Ae))return function yt(Ae){return ye((0,Ce.Q)(Ae))}(Ae)}throw(0,pe.z)(Ae)}function ye(Ae){return new oe.y(Ee=>{(function pt(Ae,Ee){var Se,qe,ze,ue;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Se=(0,o.KL)(Ae);!(qe=yield Se.next()).done;)if(Ee.next(qe.value),Ee.closed)return}catch(Qe){ze={error:Qe}}finally{try{qe&&!qe.done&&(ue=Se.return)&&(yield ue.call(Se))}finally{if(ze)throw ze.error}}Ee.complete()})})(Ae,Ee).catch(Se=>Ee.error(Se))})}},6451:(bt,Ne,U)=>{U.d(Ne,{T:()=>_e});var o=U(8189),H=U(8421),R=U(515),oe=U(7669),de=U(8996);function _e(...pe){const ve=(0,oe.yG)(pe),Ce=(0,oe._6)(pe,1/0),z=pe;return z.length?1===z.length?(0,H.Xf)(z[0]):(0,o.J)(Ce)((0,de.D)(z,ve)):R.E}},5403:(bt,Ne,U)=>{U.d(Ne,{x:()=>H});var o=U(2961);function H(oe,de,_e,pe,ve){return new R(oe,de,_e,pe,ve)}class R extends o.Lv{constructor(de,_e,pe,ve,Ce,z){super(de),this.onFinalize=Ce,this.shouldUnsubscribe=z,this._next=_e?function(G){try{_e(G)}catch(J){de.error(J)}}:super._next,this._error=ve?function(G){try{ve(G)}catch(J){de.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(G){de.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},4004:(bt,Ne,U)=>{U.d(Ne,{U:()=>R});var o=U(4482),H=U(5403);function R(oe,de){return(0,o.e)((_e,pe)=>{let ve=0;_e.subscribe((0,H.x)(pe,Ce=>{pe.next(oe.call(de,Ce,ve++))}))})}},8189:(bt,Ne,U)=>{U.d(Ne,{J:()=>R});var o=U(5577),H=U(4671);function R(oe=1/0){return(0,o.z)(H.y,oe)}},5577:(bt,Ne,U)=>{U.d(Ne,{z:()=>ve});var o=U(4004),H=U(8421),R=U(4482),oe=U(9672),de=U(5403),pe=U(576);function ve(Ce,z,G=1/0){return(0,pe.m)(z)?ve((J,$e)=>(0,o.U)((Oe,xe)=>z(J,Oe,$e,xe))((0,H.Xf)(Ce(J,$e))),G):("number"==typeof z&&(G=z),(0,R.e)((J,$e)=>function _e(Ce,z,G,J,$e,Oe,xe,it){const we=[];let ye=0,yt=0,pt=!1;const Ae=()=>{pt&&!we.length&&!ye&&z.complete()},Ee=qe=>ye<J?Se(qe):we.push(qe),Se=qe=>{Oe&&z.next(qe),ye++;let ze=!1;(0,H.Xf)(G(qe,yt++)).subscribe((0,de.x)(z,ue=>{$e?.(ue),Oe?Ee(ue):z.next(ue)},()=>{ze=!0},void 0,()=>{if(ze)try{for(ye--;we.length&&ye<J;){const ue=we.shift();xe?(0,oe.f)(z,xe,()=>Se(ue)):Se(ue)}Ae()}catch(ue){z.error(ue)}}))};return Ce.subscribe((0,de.x)(z,Ee,()=>{pt=!0,Ae()})),()=>{it?.()}}(J,$e,Ce,G)))}},5363:(bt,Ne,U)=>{U.d(Ne,{Q:()=>oe});var o=U(9672),H=U(4482),R=U(5403);function oe(de,_e=0){return(0,H.e)((pe,ve)=>{pe.subscribe((0,R.x)(ve,Ce=>(0,o.f)(ve,de,()=>ve.next(Ce),_e),()=>(0,o.f)(ve,de,()=>ve.complete(),_e),Ce=>(0,o.f)(ve,de,()=>ve.error(Ce),_e)))})}},3099:(bt,Ne,U)=>{U.d(Ne,{B:()=>de});var o=U(8421),H=U(7579),R=U(2961),oe=U(4482);function de(pe={}){const{connector:ve=(()=>new H.x),resetOnError:Ce=!0,resetOnComplete:z=!0,resetOnRefCountZero:G=!0}=pe;return J=>{let $e,Oe,xe,it=0,we=!1,ye=!1;const yt=()=>{Oe?.unsubscribe(),Oe=void 0},pt=()=>{yt(),$e=xe=void 0,we=ye=!1},Ae=()=>{const Ee=$e;pt(),Ee?.unsubscribe()};return(0,oe.e)((Ee,Se)=>{it++,!ye&&!we&&yt();const qe=xe=xe??ve();Se.add(()=>{it--,0===it&&!ye&&!we&&(Oe=_e(Ae,G))}),qe.subscribe(Se),!$e&&it>0&&($e=new R.Hp({next:ze=>qe.next(ze),error:ze=>{ye=!0,yt(),Oe=_e(pt,Ce,ze),qe.error(ze)},complete:()=>{we=!0,yt(),Oe=_e(pt,z),qe.complete()}}),(0,o.Xf)(Ee).subscribe($e))})(J)}}function _e(pe,ve,...Ce){if(!0===ve)return void pe();if(!1===ve)return;const z=new R.Hp({next:()=>{z.unsubscribe(),pe()}});return ve(...Ce).subscribe(z)}},9468:(bt,Ne,U)=>{U.d(Ne,{R:()=>H});var o=U(4482);function H(R,oe=0){return(0,o.e)((de,_e)=>{_e.add(R.schedule(()=>de.subscribe(_e),oe))})}},8505:(bt,Ne,U)=>{U.d(Ne,{b:()=>de});var o=U(576),H=U(4482),R=U(5403),oe=U(4671);function de(_e,pe,ve){const Ce=(0,o.m)(_e)||pe||ve?{next:_e,error:pe,complete:ve}:_e;return Ce?(0,H.e)((z,G)=>{var J;null===(J=Ce.subscribe)||void 0===J||J.call(Ce);let $e=!0;z.subscribe((0,R.x)(G,Oe=>{var xe;null===(xe=Ce.next)||void 0===xe||xe.call(Ce,Oe),G.next(Oe)},()=>{var Oe;$e=!1,null===(Oe=Ce.complete)||void 0===Oe||Oe.call(Ce),G.complete()},Oe=>{var xe;$e=!1,null===(xe=Ce.error)||void 0===xe||xe.call(Ce,Oe),G.error(Oe)},()=>{var Oe,xe;$e&&(null===(Oe=Ce.unsubscribe)||void 0===Oe||Oe.call(Ce)),null===(xe=Ce.finalize)||void 0===xe||xe.call(Ce)}))}):oe.y}},4408:(bt,Ne,U)=>{U.d(Ne,{o:()=>de});var o=U(727);class H extends o.w0{constructor(pe,ve){super()}schedule(pe,ve=0){return this}}const R={setInterval(_e,pe,...ve){const{delegate:Ce}=R;return Ce?.setInterval?Ce.setInterval(_e,pe,...ve):setInterval(_e,pe,...ve)},clearInterval(_e){const{delegate:pe}=R;return(pe?.clearInterval||clearInterval)(_e)},delegate:void 0};var oe=U(8737);class de extends H{constructor(pe,ve){super(pe,ve),this.scheduler=pe,this.work=ve,this.pending=!1}schedule(pe,ve=0){var Ce;if(this.closed)return this;this.state=pe;const z=this.id,G=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(G,z,ve)),this.pending=!0,this.delay=ve,this.id=null!==(Ce=this.id)&&void 0!==Ce?Ce:this.requestAsyncId(G,this.id,ve),this}requestAsyncId(pe,ve,Ce=0){return R.setInterval(pe.flush.bind(pe,this),Ce)}recycleAsyncId(pe,ve,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return ve;null!=ve&&R.clearInterval(ve)}execute(pe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(pe,ve);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ve){let z,Ce=!1;try{this.work(pe)}catch(G){Ce=!0,z=G||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ve}=this,{actions:Ce}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(Ce,this),null!=pe&&(this.id=this.recycleAsyncId(ve,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Ne,U)=>{U.d(Ne,{v:()=>R});var o=U(6063);class H{constructor(de,_e=H.now){this.schedulerActionCtor=de,this.now=_e}schedule(de,_e=0,pe){return new this.schedulerActionCtor(this,de).schedule(pe,_e)}}H.now=o.l.now;class R extends H{constructor(de,_e=H.now){super(de,_e),this.actions=[],this._active=!1}flush(de){const{actions:_e}=this;if(this._active)return void _e.push(de);let pe;this._active=!0;do{if(pe=de.execute(de.state,de.delay))break}while(de=_e.shift());if(this._active=!1,pe){for(;de=_e.shift();)de.unsubscribe();throw pe}}}},4986:(bt,Ne,U)=>{U.d(Ne,{z:()=>R});var o=U(4408);const R=new(U(7565).v)(o.o)},6063:(bt,Ne,U)=>{U.d(Ne,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(bt,Ne,U)=>{U.d(Ne,{z:()=>o});const o={setTimeout(H,R,...oe){const{delegate:de}=o;return de?.setTimeout?de.setTimeout(H,R,...oe):setTimeout(H,R,...oe)},clearTimeout(H){const{delegate:R}=o;return(R?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(bt,Ne,U)=>{U.d(Ne,{h:()=>H});const H=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Ne,U)=>{U.d(Ne,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Ne,U)=>{U.d(Ne,{_6:()=>_e,jO:()=>oe,yG:()=>de});var o=U(576);function R(pe){return pe[pe.length-1]}function oe(pe){return(0,o.m)(R(pe))?pe.pop():void 0}function de(pe){return function H(pe){return pe&&(0,o.m)(pe.schedule)}(R(pe))?pe.pop():void 0}function _e(pe,ve){return"number"==typeof R(pe)?pe.pop():ve}},8737:(bt,Ne,U)=>{function o(H,R){if(H){const oe=H.indexOf(R);0<=oe&&H.splice(oe,1)}}U.d(Ne,{P:()=>o})},3888:(bt,Ne,U)=>{function o(H){const oe=H(de=>{Error.call(de),de.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}U.d(Ne,{d:()=>o})},2806:(bt,Ne,U)=>{U.d(Ne,{O:()=>oe,x:()=>R});var o=U(2416);let H=null;function R(de){if(o.v.useDeprecatedSynchronousErrorHandling){const _e=!H;if(_e&&(H={errorThrown:!1,error:null}),de(),_e){const{errorThrown:pe,error:ve}=H;if(H=null,pe)throw ve}}else de()}function oe(de){o.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=de)}},9672:(bt,Ne,U)=>{function o(H,R,oe,de=0,_e=!1){const pe=R.schedule(function(){oe(),_e?H.add(this.schedule(null,de)):this.unsubscribe()},de);if(H.add(pe),!_e)return pe}U.d(Ne,{f:()=>o})},4671:(bt,Ne,U)=>{function o(H){return H}U.d(Ne,{y:()=>o})},1144:(bt,Ne,U)=>{U.d(Ne,{z:()=>o});const o=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(bt,Ne,U)=>{U.d(Ne,{D:()=>H});var o=U(576);function H(R){return Symbol.asyncIterator&&(0,o.m)(R?.[Symbol.asyncIterator])}},576:(bt,Ne,U)=>{function o(H){return"function"==typeof H}U.d(Ne,{m:()=>o})},3670:(bt,Ne,U)=>{U.d(Ne,{c:()=>R});var o=U(8822),H=U(576);function R(oe){return(0,H.m)(oe[o.L])}},6495:(bt,Ne,U)=>{U.d(Ne,{T:()=>R});var o=U(2202),H=U(576);function R(oe){return(0,H.m)(oe?.[o.h])}},8239:(bt,Ne,U)=>{U.d(Ne,{t:()=>H});var o=U(576);function H(R){return(0,o.m)(R?.then)}},3260:(bt,Ne,U)=>{U.d(Ne,{L:()=>oe,Q:()=>R});var o=U(7582),H=U(576);function R(de){return(0,o.FC)(this,arguments,function*(){const pe=de.getReader();try{for(;;){const{value:ve,done:Ce}=yield(0,o.qq)(pe.read());if(Ce)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(ve)}}finally{pe.releaseLock()}})}function oe(de){return(0,H.m)(de?.getReader)}},4482:(bt,Ne,U)=>{U.d(Ne,{A:()=>H,e:()=>R});var o=U(576);function H(oe){return(0,o.m)(oe?.lift)}function R(oe){return de=>{if(H(de))return de.lift(function(_e){try{return oe(_e,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(bt,Ne,U)=>{U.d(Ne,{U:()=>R,z:()=>H});var o=U(4671);function H(...oe){return R(oe)}function R(oe){return 0===oe.length?o.y:1===oe.length?oe[0]:function(_e){return oe.reduce((pe,ve)=>ve(pe),_e)}}},7849:(bt,Ne,U)=>{U.d(Ne,{h:()=>R});var o=U(2416),H=U(3410);function R(oe){H.z.setTimeout(()=>{const{onUnhandledError:de}=o.v;if(!de)throw oe;de(oe)})}},4532:(bt,Ne,U)=>{function o(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ne,{z:()=>o})},4650:(bt,Ne,U)=>{U.d(Ne,{$8M:()=>Ud,$Z:()=>Ow,AFp:()=>YI,AaK:()=>ve,AsE:()=>op,BQk:()=>vc,CHM:()=>Xc,CRH:()=>Vm,CZH:()=>$m,CqO:()=>zu,D6c:()=>N1,EJc:()=>i1,EiD:()=>ty,EpF:()=>Qy,F4k:()=>Jy,FYo:()=>Px,FiY:()=>So,G48:()=>wO,GfV:()=>Og,Gpc:()=>G,JOm:()=>tr,JVY:()=>Q_,KtG:()=>Nl,L6k:()=>$C,LAX:()=>GC,LFG:()=>lr,LSH:()=>ny,Lbi:()=>t1,Lck:()=>fA,MAs:()=>ep,MMx:()=>un,NdJ:()=>Xy,OlP:()=>yn,Oqu:()=>Bb,PXZ:()=>gO,Q6J:()=>zy,QGY:()=>lm,QP$:()=>be,QbO:()=>n1,Qsj:()=>Ox,R0b:()=>Ls,RDi:()=>ix,Rgc:()=>mp,SBq:()=>Pf,Sil:()=>s1,Suo:()=>Hv,TTD:()=>Zc,TgZ:()=>Ky,Tol:()=>fm,Udp:()=>vh,VKq:()=>td,X6Q:()=>CO,XFs:()=>ct,Xpm:()=>On,Xts:()=>ow,Y36:()=>hl,YKP:()=>DI,YNc:()=>gb,Yjl:()=>F,Yz7:()=>Me,Z0I:()=>kt,ZZ4:()=>p0,_Bn:()=>xI,_UZ:()=>Yy,_Vd:()=>kf,_c5:()=>gE,_uU:()=>ED,aQg:()=>Wm,c2e:()=>r1,cJS:()=>xt,cg1:()=>up,d8E:()=>uv,dDg:()=>hO,dqk:()=>nn,eBb:()=>ZC,eFA:()=>g1,ekj:()=>hm,eoX:()=>qm,f3M:()=>yu,g9A:()=>JI,h0i:()=>yl,hGG:()=>O1,hij:()=>lv,iGM:()=>bp,ifc:()=>Et,ip1:()=>KI,jDz:()=>bc,kL8:()=>ym,lG2:()=>$,lqb:()=>Lu,lri:()=>Gm,mCW:()=>Dg,n5z:()=>Ka,oAB:()=>vr,oJD:()=>fx,oxw:()=>vb,pB0:()=>Ru,q3G:()=>Fr,q4F:()=>al,qLn:()=>yi,qOj:()=>as,qZA:()=>am,qzn:()=>rh,rWj:()=>o0,sBO:()=>bO,sIi:()=>Qf,s_b:()=>Rm,soG:()=>e0,tb:()=>XI,tp0:()=>ta,uIk:()=>$y,vHH:()=>xe,vpe:()=>Ca,wAp:()=>Vt,xp6:()=>cl,ynx:()=>yc,z2F:()=>l0,z3N:()=>ha,zSh:()=>iy,zs3:()=>Uu});var o=U(7579),H=U(727),R=U(9751),oe=U(6451),de=U(3099);function _e(s){for(let a in s)if(s[a]===_e)return a;throw Error("Could not find renamed property on target object.")}function pe(s,a){for(const c in a)a.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&(s[c]=a[c])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function Ce(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const z=_e({__forward_ref__:_e});function G(s){return s.__forward_ref__=G,s.toString=function(){return ve(this())},s}function J(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===G}class xe extends Error{constructor(a,c){super(function it(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,c)),this.code=a}}function we(s){return"string"==typeof s?s:null==s?"":String(s)}function Ee(s,a){throw new xe(-201,!1)}function se(s,a){null==s&&function ne(s,a,c,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function Me(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function xt(s){return{providers:s.providers||[],imports:s.imports||[]}}function en(s){return on(s,Sn)||on(s,mr)}function kt(s){return null!==en(s)}function on(s,a){return s.hasOwnProperty(a)?s[a]:null}function Qn(s){return s&&(s.hasOwnProperty(Bn)||s.hasOwnProperty(Ii))?s[Bn]:null}const Sn=_e({\u0275prov:_e}),Bn=_e({\u0275inj:_e}),mr=_e({ngInjectableDef:_e}),Ii=_e({ngInjectorDef:_e});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let _r;function qn(s){const a=_r;return _r=s,a}function ji(s,a,c){const d=en(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&ct.Optional?null:void 0!==a?a:void Ee(ve(s))}function Nn(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),Et=(()=>{return(s=Et||(Et={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Et;var s})();const nn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ir={},St=[],zn=_e({\u0275cmp:_e}),zt=_e({\u0275dir:_e}),ao=_e({\u0275pipe:_e}),sn=_e({\u0275mod:_e}),jn=_e({\u0275fac:_e}),In=_e({__NG_ELEMENT_ID__:_e});let Xn=0;function On(s){return Nn(()=>{const c=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:c,dependencies:c&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||St,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Et.Emulated,id:"c"+Xn++,styles:s.styles||St,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,y=s.features;return h.inputs=Z(s.inputs,d),h.outputs=Z(s.outputs),y&&y.forEach(I=>I(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(er).filter(Ei):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(Y).filter(Ei):null,h})}function er(s){return N(s)||P(s)}function Ei(s){return null!==s}function vr(s){return Nn(()=>({type:s.type,bootstrap:s.bootstrap||St,declarations:s.declarations||St,imports:s.imports||St,exports:s.exports||St,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Z(s,a){if(null==s)return ir;const c={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),c[h]=d,a&&(a[h]=g)}return c}const $=On;function F(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function N(s){return s[zn]||null}function P(s){return s[zt]||null}function Y(s){return s[ao]||null}function be(s){const a=N(s)||P(s)||Y(s);return null!==a&&a.standalone}function Ye(s,a){const c=s[sn]||null;if(!c&&!0===a)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return c}function Tr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Zr(s){return Array.isArray(s)&&!0===s[1]}function Sa(s){return 0!=(8&s.flags)}function Eo(s){return 2==(2&s.flags)}function Ma(s){return 1==(1&s.flags)}function xi(s){return null!==s.template}function ka(s){return 0!=(256&s[2])}function ms(s,a){return s.hasOwnProperty(jn)?s[jn]:null}class lo{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Zc(){return Al}function Al(s){return s.type.prototype.ngOnChanges&&(s.setInput=Oa),Gc}function Gc(){const s=qc(this),a=s?.current;if(a){const c=s.previous;if(c===ir)s.previous=a;else for(let d in a)c[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Oa(s,a,c,d){const h=qc(s)||function Td(s,a){return s[Ed]=a}(s,{previous:ir,current:null}),g=h.current||(h.current={}),y=h.previous,I=this.declaredInputs[c],E=y[I];g[I]=new lo(E&&E.currentValue,a,y===ir),s[d]=a}Zc.ngInherit=!0;const Ed="__ngSimpleChanges__";function qc(s){return s[Ed]||null}function xn(s){for(;Array.isArray(s);)s=s[0];return s}function _s(s,a){return xn(a[s])}function li(s,a){return xn(a[s.index])}function Kc(s,a){return s.data[a]}function kr(s,a){const c=a[s];return Tr(c)?c:c[0]}function Ml(s){return 64==(64&s[2])}function Di(s,a){return null==a?null:s[a]}function xr(s){s[18]=0}function Zs(s,a){s[5]+=a;let c=s,d=s[3];for(;null!==d&&(1===a&&1===c[5]||-1===a&&0===c[5]);)d[5]+=a,c=d,d=d[3]}const Pt={lFrame:Ba(null),bindingsEnabled:!0};function Pl(){return Pt.bindingsEnabled}function ke(){return Pt.lFrame.lView}function Xt(){return Pt.lFrame.tView}function Xc(s){return Pt.lFrame.contextLView=s,s[8]}function Nl(s){return Pt.lFrame.contextLView=null,s}function Kn(){let s=Ra();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ra(){return Pt.lFrame.currentTNode}function Ai(s,a){const c=Pt.lFrame;c.currentTNode=s,c.isParent=a}function Fa(){return Pt.lFrame.isParent}function Rl(){Pt.lFrame.isParent=!1}function ys(){return Pt.lFrame.bindingIndex++}function di(s){const a=Pt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,c}function Md(s,a){const c=Pt.lFrame;c.bindingIndex=c.bindingRootIndex=s,Va(a)}function Va(s){Pt.lFrame.currentDirectiveIndex=s}function tu(s){const a=Pt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Gs(){return Pt.lFrame.currentQueryIndex}function Xr(s){Pt.lFrame.currentQueryIndex=s}function Ll(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function nu(s,a,c){if(c&ct.SkipSelf){let h=a,g=s;for(;!(h=h.parent,null!==h||c&ct.Host||(h=Ll(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;a=h,s=g}const d=Pt.lFrame=Ua();return d.currentTNode=a,d.lView=s,!0}function vs(s){const a=Ua(),c=s[1];Pt.lFrame=a,a.currentTNode=c.firstChild,a.lView=s,a.tView=c,a.contextLView=s,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Ua(){const s=Pt.lFrame,a=null===s?null:s.child;return null===a?Ba(s):a}function Ba(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function ru(){const s=Pt.lFrame;return Pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const kd=ru;function qo(){const s=ru();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dn(){return Pt.lFrame.selectedIndex}function Cs(s){Pt.lFrame.selectedIndex=s}function An(){const s=Pt.lFrame;return Kc(s.tView,s.selectedIndex)}function Ha(s,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const g=s.data[c].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:I,ngAfterViewInit:E,ngAfterViewChecked:A,ngOnDestroy:k}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-c,y),I&&((s.contentHooks||(s.contentHooks=[])).push(c,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(c,I)),E&&(s.viewHooks||(s.viewHooks=[])).push(-c,E),A&&((s.viewHooks||(s.viewHooks=[])).push(c,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(c,A)),null!=k&&(s.destroyHooks||(s.destroyHooks=[])).push(c,k)}}function ws(s,a,c){iu(s,a,3,c)}function Bl(s,a,c,d){(3&s[2])===c&&iu(s,a,c,d)}function jl(s,a){let c=s[2];(3&c)===a&&(c&=2047,c+=1,s[2]=c)}function iu(s,a,c,d){const g=d??-1,y=a.length-1;let I=0;for(let E=void 0!==d?65535&s[18]:0;E<y;E++)if("number"==typeof a[E+1]){if(I=a[E],null!=d&&I>=d)break}else a[E]<0&&(s[18]+=65536),(I<g||-1==g)&&(lf(s,c,a,E),s[18]=(4294901760&s[18])+E+2),E++}function lf(s,a,c,d){const h=c[d]<0,g=c[d+1],I=s[h?-c[d]:c[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(I)}finally{}}}else try{g.call(I)}finally{}}class qs{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function su(s,a,c){let d=0;for(;d<c.length;){const h=c[d];if("number"==typeof h){if(0!==h)break;d++;const g=c[d++],y=c[d++],I=c[d++];s.setAttribute(a,y,I,g)}else{const g=h,y=c[++d];Ld(g)?s.setProperty(a,g,y):s.setAttribute(a,g,y),d++}}return d}function $l(s){return 3===s||4===s||6===s}function Ld(s){return 64===s.charCodeAt(0)}function Ws(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const h=a[d];"number"==typeof h?c=h:0===c||uf(s,c,h,null,-1===c||2===c?a[++d]:null)}}return s}function uf(s,a,c,d,h){let g=0,y=s.length;if(-1===a)y=-1;else for(;g<s.length;){const I=s[g++];if("number"==typeof I){if(I===a){y=-1;break}if(I>a){y=g-1;break}}}for(;g<s.length;){const I=s[g];if("number"==typeof I)break;if(I===c){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,a),g=y+1),s.splice(g++,0,c),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}function au(s){return-1!==s}function $a(s){return 32767&s}function uo(s,a){let c=function df(s){return s>>16}(s),d=a;for(;c>0;)d=d[15],c--;return d}let zo=!0;function hi(s){const a=zo;return zo=s,a}let Za=0;const Gi={};function Ks(s,a){const c=Is(s,a);if(-1!==c)return c;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,Ga(d.data,s),Ga(a,null),Ga(d.blueprint,null));const h=qa(s,a),g=s.injectorIndex;if(au(h)){const y=$a(h),I=uo(h,a),E=I[1].data;for(let A=0;A<8;A++)a[g+A]=I[y+A]|E[y+A]}return a[g+8]=h,g}function Ga(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Is(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function qa(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let c=0,d=null,h=a;for(;null!==h;){if(d=du(h),null===d)return-1;if(c++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return-1}function Ko(s,a,c){!function Gl(s,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(In)&&(d=c[In]),null==d&&(d=c[In]=Za++);const h=255&d;a.data[s+(h>>5)]|=1<<h}(s,a,c)}function cu(s,a,c){if(c&ct.Optional||void 0!==s)return s;Ee()}function hf(s,a,c,d){if(c&ct.Optional&&void 0===d&&(d=null),0==(c&(ct.Self|ct.Host))){const h=s[9],g=qn(void 0);try{return h?h.get(a,d,c&ct.Optional):ji(a,d,c&ct.Optional)}finally{qn(g)}}return cu(d,0,c)}function Ys(s,a,c,d=ct.Default,h){if(null!==s){if(1024&a[2]){const y=function uu(s,a,c,d,h){let g=s,y=a;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const I=Wa(g,y,c,d|ct.Self,Gi);if(I!==Gi)return I;let E=g.parent;if(!E){const A=y[21];if(A){const k=A.get(c,Gi,d);if(k!==Gi)return k}E=du(y),y=y[15]}g=E}return h}(s,a,c,d,Gi);if(y!==Gi)return y}const g=Wa(s,a,c,d,Gi);if(g!==Gi)return g}return hf(a,c,d,h)}function Wa(s,a,c,d,h){const g=function ug(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(In)?s[In]:void 0;return"number"==typeof a?a>=0?255&a:or:a}(c);if("function"==typeof g){if(!nu(a,s,d))return d&ct.Host?cu(h,0,d):hf(a,c,d,h);try{const y=g(d);if(null!=y||d&ct.Optional)return y;Ee()}finally{kd()}}else if("number"==typeof g){let y=null,I=Is(s,a),E=-1,A=d&ct.Host?a[16][6]:null;for((-1===I||d&ct.SkipSelf)&&(E=-1===I?qa(s,a):a[I+8],-1!==E&&Qo(d,!1)?(y=a[1],I=$a(E),a=uo(E,a)):I=-1);-1!==I;){const k=a[1];if(ff(g,I,k.data)){const B=Vd(I,a,c,y,d,A);if(B!==Gi)return B}E=a[I+8],-1!==E&&Qo(d,a[1].data[I+8]===A)&&ff(g,I,a)?(y=k,I=$a(E),a=uo(E,a)):I=-1}}return h}function Vd(s,a,c,d,h,g){const y=a[1],I=y.data[s+8],k=Qs(I,y,c,null==d?Eo(I)&&zo:d!=y&&0!=(3&I.type),h&ct.Host&&g===I);return null!==k?Yo(a,y,k,I):Gi}function Qs(s,a,c,d,h){const g=s.providerIndexes,y=a.data,I=1048575&g,E=s.directiveStart,k=g>>20,K=h?I+k:s.directiveEnd;for(let re=d?I:I+k;re<K;re++){const Te=y[re];if(re<E&&c===Te||re>=E&&Te.type===c)return re}if(h){const re=y[E];if(re&&xi(re)&&re.type===c)return E}return null}function Yo(s,a,c,d){let h=s[c];const g=a.data;if(function Nd(s){return s instanceof qs}(h)){const y=h;y.resolving&&function yt(s,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new xe(-200,`Circular dependency in DI detected for ${s}${c}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():we(s)}(g[c]));const I=hi(y.canSeeViewProviders);y.resolving=!0;const E=y.injectImpl?qn(y.injectImpl):null;nu(s,d,ct.Default);try{h=s[c]=y.factory(void 0,g,s,d),a.firstCreatePass&&c>=d.directiveStart&&function ja(s,a,c){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=a.type.prototype;if(d){const y=Al(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(s,y),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,y)}h&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-s,h),g&&((c.preOrderHooks||(c.preOrderHooks=[])).push(s,g),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(s,g))}(c,g[c],a)}finally{null!==E&&qn(E),hi(I),y.resolving=!1,kd()}}return h}function ff(s,a,c){return!!(c[a+(s>>5)]&1<<s)}function Qo(s,a){return!(s&ct.Self||s&ct.Host&&a)}class Js{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return Ys(this._tNode,this._lView,a,d,c)}}function or(){return new Js(Kn(),ke())}function Ka(s){return Nn(()=>{const a=s.prototype.constructor,c=a[jn]||Ya(a),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[jn]||Ya(h);if(g&&g!==c)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Ya(s){return $e(s)?()=>{const a=Ya(J(s));return a&&a()}:ms(s)}function du(s){const a=s[1],c=a.type;return 2===c?a.declTNode:1===c?s[6]:null}function Ud(s){return function za(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const c=s.attrs;if(c){const d=c.length;let h=0;for(;h<d;){const g=c[h];if($l(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof c[h];)h++;else{if(g===a)return c[h+1];h+=2}}}return null}(Kn(),s)}const Fn="__parameters__";function Si(s,a,c){return Nn(()=>{const d=function ql(s){return function(...c){if(s){const d=s(...c);for(const h in d)this[h]=d[h]}}}(a);function h(...g){if(this instanceof h)return d.apply(this,g),this;const y=new h(...g);return I.annotation=y,I;function I(E,A,k){const B=E.hasOwnProperty(Fn)?E[Fn]:Object.defineProperty(E,Fn,{value:[]})[Fn];for(;B.length<=k;)B.push(null);return(B[k]=B[k]||[]).push(y),E}}return c&&(h.prototype=Object.create(c.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class yn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Me({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Dr(s,a){void 0===a&&(a=s);for(let c=0;c<s.length;c++){let d=s[c];Array.isArray(d)?(a===s&&(a=s.slice(0,c)),Dr(d,a)):a!==s&&a.push(d)}return a}function qi(s,a){s.forEach(c=>Array.isArray(c)?qi(c,a):a(c))}function fu(s,a,c){a>=s.length?s.push(c):s.splice(a,0,c)}function Ja(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function fi(s,a,c){let d=Es(s,a);return d>=0?s[1|d]=c:(d=~d,function fg(s,a,c,d){let h=s.length;if(h==a)s.push(c,d);else if(1===h)s.push(d,s[0]),s[0]=c;else{for(h--,s.push(s[h-1],s[h]);h>a;)s[h]=s[h-2],h--;s[a]=c,s[a+1]=d}}(s,d,a,c)),d}function Jl(s,a){const c=Es(s,a);if(c>=0)return s[1|c]}function Es(s,a){return function gu(s,a,c){let d=0,h=s.length>>c;for(;h!==d;){const g=d+(h-d>>1),y=s[g<<c];if(a===y)return g<<c;y>a?h=g:d=g+1}return~(h<<c)}(s,a,1)}const pi={},el="__NG_DI_FLAG__",gi="ngTempTokenPath",zd=/\n/gm,Ao="__source";let Zn;function ht(s){const a=Zn;return Zn=s,a}function tl(s,a=ct.Default){if(void 0===Zn)throw new xe(-203,!1);return null===Zn?ji(s,void 0,a):Zn.get(s,a&ct.Optional?null:void 0,a)}function lr(s,a=ct.Default){return(function Jn(){return _r}()||tl)(J(s),a)}function yu(s,a=ct.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),lr(s,a)}function ec(s){const a=[];for(let c=0;c<s.length;c++){const d=J(s[c]);if(Array.isArray(d)){if(0===d.length)throw new xe(900,!1);let h,g=ct.Default;for(let y=0;y<d.length;y++){const I=d[y],E=Ts(I);"number"==typeof E?-1===E?h=I.token:g|=E:h=I}a.push(lr(h,g))}else a.push(lr(d))}return a}function Jo(s,a){return s[el]=a,s.prototype[el]=a,s}function Ts(s){return s[el]}const So=Jo(Si("Optional"),8),ta=Jo(Si("SkipSelf"),4);var tr=(()=>((tr=tr||{})[tr.Important=1]="Important",tr[tr.DashCase=2]="DashCase",tr))();const S=new Map;let V=0;const Nr="__ngContext__";function hn(s,a){Tr(a)?(s[Nr]=a[20],function X(s){S.set(s[20],s)}(a)):s[Nr]=a}function Qd(s,a){return undefined(s,a)}function Xd(s){const a=s[3];return Zr(a)?a[3]:a}function Pu(s){return p(s[13])}function C(s){return p(s[4])}function p(s){for(;null!==s&&!Zr(s);)s=s[4];return s}function b(s,a,c,d,h){if(null!=d){let g,y=!1;Zr(d)?g=d:Tr(d)&&(y=!0,d=d[0]);const I=xn(d);0===s&&null!==c?null==h?sl(a,c,I):Ds(a,c,I,h||null,!0):1===s&&null!==c?Ds(a,c,I,h||null,!0):2===s?function bg(s,a,c){const d=cc(s,a);d&&function th(s,a,c,d){s.removeChild(a,c,d)}(s,d,a,c)}(a,I,y):3===s&&a.destroyNode(I),null!=g&&function ex(s,a,c,d,h){const g=c[7];g!==xn(c)&&b(a,s,d,g,h);for(let I=10;I<c.length;I++){const E=c[I];Wi(E[1],E,s,a,d,g)}}(a,s,g,c,h)}}function he(s,a,c){return s.createElement(a,c)}function ac(s,a){const c=s[9],d=c.indexOf(a),h=a[3];512&a[2]&&(a[2]&=-513,Zs(h,-1)),c.splice(d,1)}function Ef(s,a){if(s.length<=10)return;const c=10+a,d=s[c];if(d){const h=d[17];null!==h&&h!==s&&ac(h,d),a>0&&(s[c-1][4]=d[4]);const g=Ja(s,10+a);!function Ze(s,a){Wi(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const y=g[19];null!==y&&y.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function lc(s,a){if(!(128&a[2])){const c=a[11];c.destroyNode&&Wi(s,a,c,3,null,null),function ln(s){let a=s[13];if(!a)return eh(s[1],s);for(;a;){let c=null;if(Tr(a))c=a[13];else{const d=a[10];d&&(c=d)}if(!c){for(;a&&!a[4]&&a!==s;)Tr(a)&&eh(a[1],a),a=a[3];null===a&&(a=s),Tr(a)&&eh(a[1],a),c=a&&a[4]}a=c}}(a)}}function eh(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Ou(s,a){let c;if(null!=s&&null!=(c=s.destroyHooks))for(let d=0;d<c.length;d+=2){const h=a[c[d]];if(!(h instanceof qs)){const g=c[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const I=h[g[y]],E=g[y+1];try{E.call(I)}finally{}}else try{g.call(h)}finally{}}}}(s,a),function Tf(s,a){const c=s.cleanup,d=a[7];let h=-1;if(null!==c)for(let g=0;g<c.length-1;g+=2)if("string"==typeof c[g]){const y=c[g+1],I="function"==typeof y?y(a):xn(a[y]),E=d[h=c[g+2]],A=c[g+3];"boolean"==typeof A?I.removeEventListener(c[g],E,A):A>=0?d[h=A]():d[h=-A].unsubscribe(),g+=2}else{const y=d[h=c[g+1]];c[g].call(y)}if(null!==d){for(let g=h+1;g<d.length;g++)(0,d[g])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const c=a[17];if(null!==c&&Zr(a[3])){c!==a[3]&&ac(c,a);const d=a[19];null!==d&&d.detachView(s)}!function Je(s){S.delete(s[20])}(a)}}function xf(s,a,c){return function Cg(s,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===Et.None||h===Et.Emulated)return null}return li(d,c)}(s,a.parent,c)}function Ds(s,a,c,d,h){s.insertBefore(a,c,d,h)}function sl(s,a,c){s.appendChild(a,c)}function Po(s,a,c,d,h){null!==d?Ds(s,a,c,d,h):sl(s,a,c)}function cc(s,a){return s.parentNode(a)}let Df,dc,Tg,QT=function H_(s,a,c){return 40&s.type?li(s,c):null};function $_(s,a,c,d){const h=xf(s,d,a),g=a[11],I=function VC(s,a,c){return QT(s,a,c)}(d.parent||a[6],d,a);if(null!=h)if(Array.isArray(c))for(let E=0;E<c.length;E++)Po(g,h,c[E],I,!1);else Po(g,h,c,I,!1)}function wg(s,a){if(null!==a){const c=a.type;if(3&c)return li(a,s);if(4&c)return G_(-1,s[a.index]);if(8&c){const d=a.child;if(null!==d)return wg(s,d);{const h=s[a.index];return Zr(h)?G_(-1,h):xn(h)}}if(32&c)return Qd(a,s)()||xn(s[a.index]);{const d=Z_(s,a);return null!==d?Array.isArray(d)?d[0]:wg(Xd(s[16]),d):wg(s,a.next)}}return null}function Z_(s,a){return null!==a?s[16][6].projection[a.projection]:null}function G_(s,a){const c=10+s+1;if(c<a.length){const d=a[c],h=d[1].firstChild;if(null!==h)return wg(d,h)}return a[7]}function ts(s,a,c,d,h,g,y){for(;null!=c;){const I=d[c.index],E=c.type;if(y&&0===a&&(I&&hn(xn(I),d),c.flags|=4),64!=(64&c.flags))if(8&E)ts(s,a,c.child,d,h,g,!1),b(a,s,h,I,g);else if(32&E){const A=Qd(c,d);let k;for(;k=A();)b(a,s,h,k,g);b(a,s,h,I,g)}else 16&E?Ig(s,a,d,c,h,g):b(a,s,h,I,g);c=y?c.projectionNext:c.next}}function Wi(s,a,c,d,h,g){ts(c,d,s.firstChild,a,h,g,!1)}function Ig(s,a,c,d,h,g){const y=c[16],E=y[6].projection[d.projection];if(Array.isArray(E))for(let A=0;A<E.length;A++)b(a,s,h,E[A],g);else ts(s,a,E,y[3],h,g,!0)}function q_(s,a,c){s.setAttribute(a,"style",c)}function z_(s,a,c){""===c?s.removeAttribute(a,"class"):s.setAttribute(a,"class",c)}function uc(s){return function W_(){if(void 0===Df&&(Df=null,nn.trustedTypes))try{Df=nn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Df}()?.createHTML(s)||s}function ix(s){dc=s}function Y_(s){return function Af(){if(void 0===Tg&&(Tg=null,nn.trustedTypes))try{Tg=nn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Tg}()?.createHTML(s)||s}class Nu{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class jC extends Nu{getTypeName(){return"HTML"}}class ox extends Nu{getTypeName(){return"Style"}}class xg extends Nu{getTypeName(){return"Script"}}class HC extends Nu{getTypeName(){return"URL"}}class sx extends Nu{getTypeName(){return"ResourceURL"}}function ha(s){return s instanceof Nu?s.changingThisBreaksApplicationSecurity:s}function rh(s,a){const c=function sP(s){return s instanceof Nu&&s.getTypeName()||null}(s);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}function Q_(s){return new jC(s)}function $C(s){return new ox(s)}function ZC(s){return new xg(s)}function GC(s){return new HC(s)}function Ru(s){return new sx(s)}class zC{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(uc(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class ax{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const c=this.inertDocument.createElement("html");this.inertDocument.appendChild(c);const d=this.inertDocument.createElement("body");c.appendChild(d)}}getInertBodyElement(a){const c=this.inertDocument.createElement("template");if("content"in c)return c.innerHTML=uc(a),c;const d=this.inertDocument.createElement("body");return d.innerHTML=uc(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const c=a.attributes;for(let h=c.length-1;0<h;h--){const y=c.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&a.removeAttribute(y)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const lx=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Dg(s){return(s=String(s)).match(lx)?s:"unsafe:"+s}function ni(s){const a={};for(const c of s.split(","))a[c]=!0;return a}function ih(...s){const a={};for(const c of s)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const KC=ni("area,br,col,hr,img,wbr"),J_=ni("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),YC=ni("rp,rt"),X_=ih(KC,ih(J_,ni("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ih(YC,ni("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ih(YC,J_)),Ag=ni("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),ux=ih(Ag,ni("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ni("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),JC=ni("script,style,template");class dx{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,d=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?d=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,d&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let h=this.checkClobberedElement(c,c.nextSibling);if(h){c=h;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!X_.hasOwnProperty(c))return this.sanitizedSomething=!0,!JC.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const d=a.attributes;for(let h=0;h<d.length;h++){const g=d.item(h),y=g.name,I=y.toLowerCase();if(!ux.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let E=g.value;Ag[I]&&(E=Dg(E)),this.buf.push(" ",y,'="',hx(E),'"')}return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();X_.hasOwnProperty(c)&&!KC.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(hx(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const XC=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ew=/([^\#-~ |!])/g;function hx(s){return s.replace(/&/g,"&amp;").replace(XC,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(ew,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ey;function ty(s,a){let c=null;try{ey=ey||function qC(s){const a=new ax(s);return function WC(){try{return!!(new window.DOMParser).parseFromString(uc(""),"text/html")}catch{return!1}}()?new zC(a):a}(s);let d=a?String(a):"";c=ey.getInertBodyElement(d);let h=5,g=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=g,g=c.innerHTML,c=ey.getInertBodyElement(d)}while(d!==g);return uc((new dx).sanitizeChildren(Sf(c)||c))}finally{if(c){const d=Sf(c)||c;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Sf(s){return"content"in s&&function lP(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function fx(s){const a=oh();return a?Y_(a.sanitize(Fr.HTML,s)||""):rh(s,"HTML")?Y_(ha(s)):ty(function Eg(){return void 0!==dc?dc:typeof document<"u"?document:void 0}(),we(s))}function ny(s){const a=oh();return a?a.sanitize(Fr.URL,s)||"":rh(s,"URL")?ha(s):Dg(we(s))}function oh(){const s=ke();return s&&s[12]}const ow=new yn("ENVIRONMENT_INITIALIZER"),gx=new yn("INJECTOR",-1),mx=new yn("INJECTOR_DEF_TYPES");class _x{get(a,c=pi){if(c===pi){const d=new Error(`NullInjectorError: No provider for ${ve(a)}!`);throw d.name="NullInjectorError",d}return c}}function uP(...s){return{\u0275providers:ry(0,s)}}function ry(s,...a){const c=[],d=new Set;let h;return qi(a,g=>{const y=g;Sg(y,c,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&sh(h,c),c}function sh(s,a){for(let c=0;c<s.length;c++){const{providers:h}=s[c];qi(h,g=>{a.push(g)})}}function Sg(s,a,c,d){if(!(s=J(s)))return!1;let h=null,g=Qn(s);const y=!g&&N(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const E=s.ngModule;if(g=Qn(E),!g)return!1;h=E}const I=d.has(h);if(y){if(I)return!1;if(d.add(h),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of E)Sg(A,a,c,d)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let A;d.add(h);try{qi(g.imports,k=>{Sg(k,a,c,d)&&(A||(A=[]),A.push(k))})}finally{}void 0!==A&&sh(A,a)}if(!I){const A=ms(h)||(()=>new h);a.push({provide:h,useFactory:A,deps:St},{provide:mx,useValue:h,multi:!0},{provide:ow,useValue:()=>lr(h),multi:!0})}const E=g.providers;null==E||I||qi(E,k=>{a.push(k)})}}return h!==s&&void 0!==s.providers}const dP=_e({provide:String,useValue:_e});function Mg(s){return null!==s&&"object"==typeof s&&dP in s}function Fu(s){return"function"==typeof s}const iy=new yn("Set Injector scope."),kg={},vx={};let oy;function Pg(){return void 0===oy&&(oy=new _x),oy}class Lu{}class Cx extends Lu{constructor(a,c,d,h){super(),this.parent=c,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ay(a,y=>this.processProvider(y)),this.records.set(gx,ah(void 0,this)),h.has("environment")&&this.records.set(Lu,ah(void 0,this));const g=this.records.get(iy);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(mx.multi,St,ct.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=ht(this),d=qn(void 0);try{return a()}finally{ht(c),qn(d)}}get(a,c=pi,d=ct.Default){this.assertNotDestroyed();const h=ht(this),g=qn(void 0);try{if(!(d&ct.SkipSelf)){let I=this.records.get(a);if(void 0===I){const E=function Tx(s){return"function"==typeof s||"object"==typeof s&&s instanceof yn}(a)&&en(a);I=E&&this.injectableDefInScope(E)?ah(sy(a),kg):null,this.records.set(a,I)}if(null!=I)return this.hydrate(a,I)}return(d&ct.Self?Pg():this.parent).get(a,c=d&ct.Optional&&c===pi?null:c)}catch(y){if("NullInjectorError"===y.name){if((y[gi]=y[gi]||[]).unshift(ve(a)),h)throw y;return function Pr(s,a,c,d){const h=s[gi];throw a[Ao]&&h.unshift(a[Ao]),s.message=function mg(s,a,c,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ve(a);if(Array.isArray(a))h=a.map(ve).join(" -> ");else if("object"==typeof a){let g=[];for(let y in a)if(a.hasOwnProperty(y)){let I=a[y];g.push(y+":"+("string"==typeof I?JSON.stringify(I):ve(I)))}h=`{${g.join(", ")}}`}return`${c}${d?"("+d+")":""}[${h}]: ${s.replace(zd,"\n  ")}`}("\n"+s.message,h,c,d),s.ngTokenPath=h,s[gi]=null,s}(y,a,"R3InjectorError",this.source)}throw y}finally{qn(g),ht(h)}}resolveInjectorInitializers(){const a=ht(this),c=qn(void 0);try{const d=this.get(ow.multi,St,ct.Self);for(const h of d)h()}finally{ht(a),qn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(ve(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(a){let c=Fu(a=J(a))?a:J(a&&a.provide);const d=function bx(s){return Mg(s)?ah(void 0,s.useValue):ah(cw(s),kg)}(a);if(Fu(a)||!0!==a.multi)this.records.get(c);else{let h=this.records.get(c);h||(h=ah(void 0,kg,!0),h.factory=()=>ec(h.multi),this.records.set(c,h)),c=a,h.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===kg&&(c.value=vx,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Ex(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=J(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function sy(s){const a=en(s),c=null!==a?a.factory:ms(s);if(null!==c)return c;if(s instanceof yn)throw new xe(204,!1);if(s instanceof Function)return function wx(s){const a=s.length;if(a>0)throw function Ql(s,a){const c=[];for(let d=0;d<s;d++)c.push(a);return c}(a,"?"),new xe(204,!1);const c=function Pn(s){const a=s&&(s[Sn]||s[mr]);if(a){const c=function pn(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(s);return null!==c?()=>c.factory(s):()=>new s}(s);throw new xe(204,!1)}function cw(s,a,c){let d;if(Fu(s)){const h=J(s);return ms(h)||sy(h)}if(Mg(s))d=()=>J(s.useValue);else if(function lw(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...ec(s.deps||[]));else if(function aw(s){return!(!s||!s.useExisting)}(s))d=()=>lr(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function Ix(s){return!!s.deps}(s))return ms(h)||sy(h);d=()=>new h(...ec(s.deps))}return d}function ah(s,a,c=!1){return{factory:s,value:a,multi:c?[]:void 0}}function xx(s){return!!s.\u0275providers}function ay(s,a){for(const c of s)Array.isArray(c)?ay(c,a):xx(c)?ay(c.\u0275providers,a):a(c)}class uw{}class Sx{resolveComponentFactory(a){throw function Ax(s){const a=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let kf=(()=>{class s{}return s.NULL=new Sx,s})();function Mx(){return lh(Kn(),ke())}function lh(s,a){return new Pf(li(s,a))}let Pf=(()=>{class s{constructor(c){this.nativeElement=c}}return s.__NG_ELEMENT_ID__=Mx,s})();function kx(s){return s instanceof Pf?s.nativeElement:s}class Px{}let Ox=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Nx(){const s=ke(),c=kr(Kn().index,s);return(Tr(c)?c:s)[11]}(),s})(),Rx=(()=>{class s{}return s.\u0275prov=Me({token:s,providedIn:"root",factory:()=>null}),s})();class Og{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const al=new Og("14.3.0"),Ng={};function Nf(s){return s.ngOriginalError}class yi{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&Nf(a);for(;c&&Nf(c);)c=Nf(c);return c||null}}function pa(s){return s instanceof Function?s():s}function hy(s,a,c){let d=s.length;for(;;){const h=s.indexOf(a,c);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=a.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}c=h+1}}const mw="ng-template";function _w(s,a,c){let d=0;for(;d<s.length;){let h=s[d++];if(c&&"class"===h){if(h=s[d],-1!==hy(h.toLowerCase(),a,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===a)return!0;return!1}}return!1}function yw(s){return 4===s.type&&s.value!==mw}function fy(s,a,c){return a===(4!==s.type||c?s.value:mw)}function Rg(s,a,c){let d=4;const h=s.attrs||[],g=function ll(s){for(let a=0;a<s.length;a++)if($l(s[a]))return a;return s.length}(h);let y=!1;for(let I=0;I<a.length;I++){const E=a[I];if("number"!=typeof E){if(!y)if(4&d){if(d=2|1&d,""!==E&&!fy(s,E,c)||""===E&&1===a.length){if(go(d))return!1;y=!0}}else{const A=8&d?E:a[++I];if(8&d&&null!==s.attrs){if(!_w(s.attrs,A,c)){if(go(d))return!1;y=!0}continue}const B=Fg(8&d?"class":E,h,yw(s),c);if(-1===B){if(go(d))return!1;y=!0;continue}if(""!==A){let K;K=B>g?"":h[B+1].toLowerCase();const re=8&d?K:null;if(re&&-1!==hy(re,A,0)||2&d&&A!==K){if(go(d))return!1;y=!0}}}}else{if(!y&&!go(d)&&!go(E))return!1;if(y&&go(E))continue;y=!1,d=E|1&d}}return go(d)||y}function go(s){return 0==(1&s)}function Fg(s,a,c,d){if(null===a)return-1;let h=0;if(d||!c){let g=!1;for(;h<a.length;){const y=a[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let I=a[++h];for(;"string"==typeof I;)I=a[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function my(s,a){let c=s.indexOf(4);if(c>-1)for(c++;c<s.length;){const d=s[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,s)}function py(s,a,c=!1){for(let d=0;d<a.length;d++)if(Rg(s,a[d],c))return!0;return!1}function vw(s,a){return s?":not("+a.trim()+")":a}function Rf(s){let a=s[0],c=1,d=2,h="",g=!1;for(;c<s.length;){let y=s[c];if("string"==typeof y)if(2&d){const I=s[++c];h+="["+y+(I.length>0?'="'+I+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!go(y)&&(a+=vw(g,h),h=""),d=y,g=g||!go(d);c++}return""!==h&&(a+=vw(g,h)),a}const Wt={};function cl(s){_y(Xt(),ke(),dn()+s,!1)}function _y(s,a,c,d){if(!d)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&ws(a,g,c)}else{const g=s.preOrderHooks;null!==g&&Bl(a,g,0,c)}Cs(c)}function bw(s,a=null,c=null,d){const h=Ug(s,a,c,d);return h.resolveInjectorInitializers(),h}function Ug(s,a=null,c=null,d,h=new Set){const g=[c||St,uP(s)];return d=d||("object"==typeof s?void 0:ve(s)),new Cx(g,a||Pg(),d||null,h)}let Uu=(()=>{class s{static create(c,d){if(Array.isArray(c))return bw({name:""},d,c,"");{const h=c.name??"";return bw({name:h},c.parent,c.providers,h)}}}return s.THROW_IF_NOT_FOUND=pi,s.NULL=new _x,s.\u0275prov=Me({token:s,providedIn:"any",factory:()=>lr(gx)}),s.__NG_ELEMENT_ID__=-1,s})();function hl(s,a=ct.Default){const c=ke();return null===c?lr(s,a):Ys(Kn(),c,J(s),a)}function Ow(){throw new Error("invalid")}function Hg(s,a){return s<<17|a<<2}function As(s){return s>>17&32767}function Dy(s){return 2|s}function rs(s){return(131068&s)>>2}function Vf(s,a){return-131069&s|a<<2}function Ay(s){return 1|s}function Oo(s,a){const c=s.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const h=c[d],g=c[d+1];if(-1!==g){const y=s.data[g];Xr(h),y.contentQueries(2,a[g],g)}}}function qg(s,a,c,d,h,g,y,I,E,A,k){const B=a.blueprint.slice();return B[0]=h,B[2]=76|d,(null!==k||s&&1024&s[2])&&(B[2]|=1024),xr(B),B[3]=B[15]=s,B[8]=c,B[10]=y||s&&s[10],B[11]=I||s&&s[11],B[12]=E||s&&s[12]||null,B[9]=A||s&&s[9]||null,B[6]=g,B[20]=function W(){return V++}(),B[21]=k,B[16]=2==a.type?s[16]:B,B}function Bu(s,a,c,d,h){let g=s.data[a];if(null===g)g=function Ry(s,a,c,d,h){const g=Ra(),y=Fa(),E=s.data[a]=function Yw(s,a,c,d,h,g){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,c,a,d,h);return null===s.firstChild&&(s.firstChild=E),null!==g&&(y?null==g.child&&null!==E.parent&&(g.child=E):null===g.next&&(g.next=E)),E}(s,a,c,d,h),function La(){return Pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=c,g.value=d,g.attrs=h;const y=function Go(){const s=Pt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Ai(g,!0),g}function ju(s,a,c,d){if(0===c)return-1;const h=a.length;for(let g=0;g<c;g++)a.push(d),s.blueprint.push(d),s.data.push(null);return h}function hh(s,a,c){vs(a);try{const d=s.viewQuery;null!==d&&wr(1,d,c);const h=s.template;null!==h&&zw(s,a,h,1,c),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Oo(s,a),s.staticViewQueries&&wr(2,s.viewQuery,c);const g=s.components;null!==g&&function Xx(s,a){for(let c=0;c<a.length;c++)qf(s,a[c])}(a,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,qo()}}function zg(s,a,c,d){const h=a[2];if(128!=(128&h)){vs(a);try{xr(a),function ui(s){return Pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==c&&zw(s,a,c,2,d);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&ws(a,A,null)}else{const A=s.preOrderHooks;null!==A&&Bl(a,A,0,null),jl(a,0)}if(function rb(s){for(let a=Pu(s);null!==a;a=C(a)){if(!a[2])continue;const c=a[9];for(let d=0;d<c.length;d++){const h=c[d],g=h[3];0==(512&h[2])&&Zs(g,1),h[2]|=512}}}(a),function Uy(s){for(let a=Pu(s);null!==a;a=C(a))for(let c=10;c<a.length;c++){const d=a[c],h=d[1];Ml(d)&&zg(h,d,h.template,d[8])}}(a),null!==s.contentQueries&&Oo(s,a),y){const A=s.contentCheckHooks;null!==A&&ws(a,A)}else{const A=s.contentHooks;null!==A&&Bl(a,A,1),jl(a,1)}!function qw(s,a){const c=s.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const h=c[d];if(h<0)Cs(~h);else{const g=h,y=c[++d],I=c[++d];Md(y,g),I(2,a[g])}}}finally{Cs(-1)}}(s,a);const I=s.components;null!==I&&function dh(s,a){for(let c=0;c<a.length;c++)aD(s,a[c])}(a,I);const E=s.viewQuery;if(null!==E&&wr(2,E,d),y){const A=s.viewCheckHooks;null!==A&&ws(a,A)}else{const A=s.viewHooks;null!==A&&Bl(a,A,2),jl(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Zs(a[3],-1))}finally{qo()}}}function zw(s,a,c,d,h){const g=dn(),y=2&d;try{Cs(-1),y&&a.length>22&&_y(s,a,22,!1),c(d,h)}finally{Cs(g)}}function Wg(s,a,c){if(Sa(a)){const h=a.directiveEnd;for(let g=a.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,c[g],g)}}}function Fy(s,a,c){!Pl()||(function iD(s,a,c,d){const h=c.directiveStart,g=c.directiveEnd;s.firstCreatePass||Ks(c,a),hn(d,a);const y=c.initialInputs;for(let I=h;I<g;I++){const E=s.data[I],A=xi(E);A&&Zf(a,c,E);const k=Yo(a,s,I,c);hn(k,a),null!==y&&sD(0,I-h,k,E,0,y),A&&(kr(c.index,a)[8]=k)}}(s,a,c,li(c,a)),128==(128&c.flags)&&function kP(s,a,c){const d=c.directiveStart,h=c.directiveEnd,g=c.index,y=function Fl(){return Pt.lFrame.currentDirectiveIndex}();try{Cs(g);for(let I=d;I<h;I++){const E=s.data[I],A=a[I];Va(I),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&oD(E,A)}}finally{Cs(-1),Va(y)}}(s,a,c))}function Kg(s,a,c=li){const d=a.localNames;if(null!==d){let h=a.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],I=-1===y?c(a,s):s[y];s[h++]=I}}}function Ww(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Ly(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Ly(s,a,c,d,h,g,y,I,E,A){const k=22+d,B=k+h,K=function eD(s,a){const c=[];for(let d=0;d<a;d++)c.push(d<s?null:Wt);return c}(k,B),re="function"==typeof A?A():A;return K[1]={type:s,blueprint:K,template:c,queries:null,viewQuery:I,declTNode:a,data:K.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:re,incompleteFirstPass:!1}}function Hf(s,a,c,d){const h=Wf(a);null===c?h.push(d):(h.push(c),s.firstCreatePass&&os(s).push(d,h.length-1))}function Qw(s,a,c){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(c=null===c?{}:c).hasOwnProperty(d)?c[d].push(a,h):c[d]=[a,h]}return c}function Vy(s,a){const d=a.directiveEnd,h=s.data,g=a.attrs,y=[];let I=null,E=null;for(let A=a.directiveStart;A<d;A++){const k=h[A],B=k.inputs,K=null===g||yw(a)?null:tb(B,g);y.push(K),I=Qw(B,A,I),E=Qw(k.outputs,A,E)}null!==I&&(I.hasOwnProperty("class")&&(a.flags|=16),I.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=y,a.inputs=I,a.outputs=E}function No(s,a,c,d,h,g,y,I){const E=li(a,c);let k,A=a.inputs;!I&&null!=A&&(k=A[d])?(tm(s,c,k,d,h),Eo(a)&&Jw(c,a.index)):3&a.type&&(d=function tD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,a.value||"",d):h,g.setProperty(E,d,h))}function Jw(s,a){const c=kr(a,s);16&c[2]||(c[2]|=32)}function Yg(s,a,c,d){let h=!1;if(Pl()){const g=function PP(s,a,c){const d=s.directiveRegistry;let h=null;if(d)for(let g=0;g<d.length;g++){const y=d[g];py(c,y.selectors,!1)&&(h||(h=[]),Ko(Ks(c,a),s,y.type),xi(y)?(wt(s,c),h.unshift(y)):h.push(y))}return h}(s,a,c),y=null===d?null:{"":-1};if(null!==g){h=!0,eb(c,s.data.length,g.length);for(let k=0;k<g.length;k++){const B=g[k];B.providersResolver&&B.providersResolver(B)}let I=!1,E=!1,A=ju(s,a,g.length,null);for(let k=0;k<g.length;k++){const B=g[k];c.mergedAttrs=Ws(c.mergedAttrs,B.hostAttrs),$f(s,c,a,A,B),Ms(A,B,y),null!==B.contentQueries&&(c.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(c.flags|=128);const K=B.type.prototype;!I&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(c.index),I=!0),!E&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(c.index),E=!0),A++}Vy(s,c)}y&&function ki(s,a,c){if(a){const d=s.localNames=[];for(let h=0;h<a.length;h+=2){const g=c[a[h+1]];if(null==g)throw new xe(-301,!1);d.push(a[h],g)}}}(c,d,y)}return c.mergedAttrs=Ws(c.mergedAttrs,c.attrs),h}function Qg(s,a,c,d,h,g){const y=g.hostBindings;if(y){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const E=~a.index;(function Xw(s){let a=s.length;for(;a>0;){const c=s[--a];if("number"==typeof c&&c<0)return c}return 0})(I)!=E&&I.push(E),I.push(d,h,y)}}function oD(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function wt(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function Ms(s,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=s;xi(a)&&(c[""]=s)}}function eb(s,a,c){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+c,s.providerIndexes=a}function $f(s,a,c,d,h){s.data[d]=h;const g=h.factory||(h.factory=ms(h.type)),y=new qs(g,xi(h),hl);s.blueprint[d]=y,c[d]=y,Qg(s,a,0,d,ju(s,c,h.hostVars,Wt),h)}function Zf(s,a,c){const d=li(a,s),h=Ww(c),g=s[10],y=zf(s,qg(s,h,null,c.onPush?32:16,d,a,g,g.createRenderer(d,c),null,null,null));s[a.index]=y}function ma(s,a,c,d,h,g){const y=li(s,a);!function Jg(s,a,c,d,h,g,y){if(null==g)s.removeAttribute(a,h,c);else{const I=null==y?we(g):y(g,d||"",h);s.setAttribute(a,h,I,c)}}(a[11],y,g,s.value,c,d,h)}function sD(s,a,c,d,h,g){const y=g[a];if(null!==y){const I=d.setInput;for(let E=0;E<y.length;){const A=y[E++],k=y[E++],B=y[E++];null!==I?d.setInput(c,B,A,k):c[k]=B}}}function tb(s,a){let c=null,d=0;for(;d<a.length;){const h=a[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===c&&(c=[]),c.push(h,s[h],a[d+1])),d+=2}else d+=2;else d+=4}return c}function nb(s,a,c,d){return new Array(s,!0,!1,a,null,0,d,c,null,null)}function aD(s,a){const c=kr(a,s);if(Ml(c)){const d=c[1];48&c[2]?zg(d,c,d.template,c[8]):c[5]>0&&Gf(c)}}function Gf(s){for(let d=Pu(s);null!==d;d=C(d))for(let h=10;h<d.length;h++){const g=d[h];if(Ml(g))if(512&g[2]){const y=g[1];zg(y,g,y.template,g[8])}else g[5]>0&&Gf(g)}const c=s[1].components;if(null!==c)for(let d=0;d<c.length;d++){const h=kr(c[d],s);Ml(h)&&h[5]>0&&Gf(h)}}function qf(s,a){const c=kr(a,s),d=c[1];(function Hu(s,a){for(let c=a.length;c<s.blueprint.length;c++)a.push(s.blueprint[c])})(d,c),hh(d,c,c[8])}function zf(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function ri(s){for(;s;){s[2]|=32;const a=Xd(s);if(ka(s)&&!a)return s;s=a}return null}function fh(s,a,c,d=!0){const h=a[10];h.begin&&h.begin();try{zg(s,a,s.template,c)}catch(y){throw d&&Kf(a,y),y}finally{h.end&&h.end()}}function wr(s,a,c){Xr(0),a(s,c)}function Wf(s){return s[7]||(s[7]=[])}function os(s){return s.cleanup||(s.cleanup=[])}function Kf(s,a){const c=s[9],d=c?c.get(yi,null):null;d&&d.handleError(a)}function tm(s,a,c,d,h){for(let g=0;g<c.length;){const y=c[g++],I=c[g++],E=a[y],A=s.data[y];null!==A.setInput?A.setInput(E,h,d,I):E[I]=h}}function fl(s,a,c){const d=_s(a,s);!function O(s,a,c){s.setValue(a,c)}(s[11],d,c)}function ss(s,a,c){let d=c?s.styles:null,h=c?s.classes:null,g=0;if(null!==a)for(let y=0;y<a.length;y++){const I=a[y];"number"==typeof I?g=I:1==g?h=Ce(h,I):2==g&&(d=Ce(d,I+": "+a[++y]+";"))}c?s.styles=d:s.stylesWithoutHost=d,c?s.classes=h:s.classesWithoutHost=h}function _a(s,a,c,d,h=!1){for(;null!==c;){const g=a[c.index];if(null!==g&&d.push(xn(g)),Zr(g))for(let I=10;I<g.length;I++){const E=g[I],A=E[1].firstChild;null!==A&&_a(E[1],E,A,d)}const y=c.type;if(8&y)_a(s,a,c.child,d);else if(32&y){const I=Qd(c,a);let E;for(;E=I();)d.push(E)}else if(16&y){const I=Z_(a,c);if(Array.isArray(I))d.push(...I);else{const E=Xd(a[16]);_a(E[1],E,I,d,!0)}}c=h?c.projectionNext:c.next}return d}class Lr{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return _a(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Zr(a)){const c=a[8],d=c?c.indexOf(this):-1;d>-1&&(Ef(a,d),Ja(c,d))}this._attachedToViewContainer=!1}lc(this._lView[1],this._lView)}onDestroy(a){Hf(this._lView[1],this._lView,null,a)}markForCheck(){ri(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){fh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vt(s,a){Wi(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=a}}class fc extends Lr{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;fh(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class By extends kf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=N(a);return new Yf(c,this.ngModule)}}function ph(s){const a=[];for(let c in s)s.hasOwnProperty(c)&&a.push({propName:s[c],templateName:c});return a}class ib{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){const h=this.injector.get(a,Ng,d);return h!==Ng||c===Ng?h:this.parentInjector.get(a,c,d)}}class Yf extends uw{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function Cw(s){return s.map(Rf).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return ph(this.componentDef.inputs)}get outputs(){return ph(this.componentDef.outputs)}create(a,c,d,h){let g=(h=h||this.ngModule)instanceof Lu?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new ib(a,g):a,I=y.get(Px,null);if(null===I)throw new xe(407,!1);const E=y.get(Rx,null),A=I.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",B=d?function Kw(s,a,c){return s.selectRootElement(a,c===Et.ShadowDom)}(A,d,this.componentDef.encapsulation):he(A,k,function jy(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(k)),K=this.componentDef.onPush?288:272,re=Ly(0,null,null,1,0,null,null,null,null,null),Te=qg(null,re,null,K,null,null,I,A,E,y,null);let He,Xe;vs(Te);try{const _t=function uD(s,a,c,d,h,g){const y=c[1];c[22]=s;const E=Bu(y,22,2,"#host",null),A=E.mergedAttrs=a.hostAttrs;null!==A&&(ss(E,A,!0),null!==s&&(su(h,s,A),null!==E.classes&&z_(h,s,E.classes),null!==E.styles&&q_(h,s,E.styles)));const k=d.createRenderer(s,a),B=qg(c,Ww(a),null,a.onPush?32:16,c[22],E,d,k,g||null,null,null);return y.firstCreatePass&&(Ko(Ks(E,c),y,a.type),wt(y,E),eb(E,c.length,1)),zf(c,B),c[22]=B}(B,this.componentDef,Te,I,A);if(B)if(d)su(A,B,["ng-version",al.full]);else{const{attrs:Ot,classes:Fe}=function Ux(s){const a=[],c=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&a.push(g,s[++d]):8===h&&c.push(g);else{if(!go(h))break;h=g}d++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);Ot&&su(A,B,Ot),Fe&&Fe.length>0&&z_(A,B,Fe.join(" "))}if(Xe=Kc(re,22),void 0!==c){const Ot=Xe.projection=[];for(let Fe=0;Fe<this.ngContentSelectors.length;Fe++){const Ct=c[Fe];Ot.push(null!=Ct?Array.from(Ct):null)}}He=function gh(s,a,c,d){const h=c[1],g=function rD(s,a,c){const d=Kn();s.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),$f(s,d,a,ju(s,a,1,null),c),Vy(s,d));const h=Yo(a,s,d.directiveStart,d);hn(h,a);const g=li(d,a);return g&&hn(g,a),h}(h,c,a);if(s[8]=c[8]=g,null!==d)for(const I of d)I(g,a);if(a.contentQueries){const I=Kn();a.contentQueries(1,g,I.directiveStart)}const y=Kn();return!h.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Cs(y.index),Qg(c[1],y,0,y.directiveStart,y.directiveEnd,a),oD(a,g)),g}(_t,this.componentDef,Te,[dD]),hh(re,Te,null)}finally{qo()}return new cn(this.componentType,He,lh(Xe,Te),Te,Xe)}}class cn extends class Dx{}{constructor(a,c,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=c,this.hostView=this.changeDetectorRef=new fc(h),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[a])){const g=this._rootLView;tm(g[1],g,h,a,c),Jw(g,this._tNode.index)}}get injector(){return new Js(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function dD(){const s=Kn();Ha(ke()[1],s)}function as(s){let a=function ob(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),c=!0;const d=[s];for(;a;){let h;if(xi(s))h=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new xe(903,!1);h=a.\u0275dir}if(h){if(c){d.push(h);const y=s;y.inputs=rm(s.inputs),y.declaredInputs=rm(s.declaredInputs),y.outputs=rm(s.outputs);const I=h.hostBindings;I&&vi(s,I);const E=h.viewQuery,A=h.contentQueries;if(E&&ab(s,E),A&&OP(s,A),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),xi(h)&&h.data.animation){const k=s.data;k.animation=(k.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const I=g[y];I&&I.ngInherit&&I(s),I===as&&(c=!1)}}a=Object.getPrototypeOf(a)}!function sb(s){let a=0,c=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=a+=h.hostVars,h.hostAttrs=Ws(h.hostAttrs,c=Ws(c,h.hostAttrs))}}(d)}function rm(s){return s===ir?{}:s===St?[]:s}function ab(s,a){const c=s.viewQuery;s.viewQuery=c?(d,h)=>{a(d,h),c(d,h)}:a}function OP(s,a){const c=s.contentQueries;s.contentQueries=c?(d,h,g)=>{a(d,h,g),c(d,h,g)}:a}function vi(s,a){const c=s.hostBindings;s.hostBindings=c?(d,h)=>{a(d,h),c(d,h)}:a}let im=null;function gc(){if(!im){const s=nn.Symbol;if(s&&s.iterator)im=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const d=a[c];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(im=d)}}}return im}function Qf(s){return!!om(s)&&(Array.isArray(s)||!(s instanceof Map)&&gc()in s)}function om(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Rt(s,a,c){return!Object.is(s[a],c)&&(s[a]=c,!0)}function $y(s,a,c,d){const h=ke();return Rt(h,ys(),a)&&(Xt(),ma(An(),h,s,a,c,d)),$y}function mh(s,a,c,d,h,g){const I=function Ps(s,a,c,d){const h=Rt(s,a,c);return Rt(s,a+1,d)||h}(s,function Gr(){return Pt.lFrame.bindingIndex}(),c,h);return di(2),I?a+we(c)+d+we(h)+g:Wt}function gb(s,a,c,d,h,g,y,I){const E=ke(),A=Xt(),k=s+22,B=A.firstCreatePass?function mD(s,a,c,d,h,g,y,I,E){const A=a.consts,k=Bu(a,s,4,y||null,Di(A,I));Yg(a,c,k,Di(A,E)),Ha(a,k);const B=k.tViews=Ly(2,k,d,h,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,k),B.queries=a.queries.embeddedTView(k)),k}(k,A,E,a,c,d,h,g,y):A.data[k];Ai(B,!1);const K=E[11].createComment("");$_(A,E,K,B),hn(K,E),zf(E,E[k]=nb(K,E,K,B)),Ma(B)&&Fy(A,E,B),null!=y&&Kg(E,B,I)}function ep(s){return function $i(s,a){return s[a]}(function Rn(){return Pt.lFrame.contextLView}(),22+s)}function zy(s,a,c){const d=ke();return Rt(d,ys(),a)&&No(Xt(),An(),d,s,a,d[11],c,!1),zy}function ml(s,a,c,d,h){const y=h?"class":"style";tm(s,c,a.inputs[y],y,d)}function Ky(s,a,c,d){const h=ke(),g=Xt(),y=22+s,I=h[11],E=h[y]=he(I,a,function Od(){return Pt.lFrame.currentNamespace}()),A=g.firstCreatePass?function Wy(s,a,c,d,h,g,y){const I=a.consts,A=Bu(a,s,2,h,Di(I,g));return Yg(a,c,A,Di(I,y)),null!==A.attrs&&ss(A,A.attrs,!1),null!==A.mergedAttrs&&ss(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(y,g,h,0,a,c,d):g.data[y];Ai(A,!0);const k=A.mergedAttrs;null!==k&&su(I,E,k);const B=A.classes;null!==B&&z_(I,E,B);const K=A.styles;return null!==K&&q_(I,E,K),64!=(64&A.flags)&&$_(g,h,E,A),0===function Jc(){return Pt.lFrame.elementDepthCount}()&&hn(E,h),function Dd(){Pt.lFrame.elementDepthCount++}(),Ma(A)&&(Fy(g,h,A),Wg(g,A,h)),null!==d&&Kg(h,A),Ky}function am(){let s=Kn();Fa()?Rl():(s=s.parent,Ai(s,!1));const a=s;!function sf(){Pt.lFrame.elementDepthCount--}();const c=Xt();return c.firstCreatePass&&(Ha(c,s),Sa(s)&&c.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Fd(s){return 0!=(16&s.flags)}(a)&&ml(c,a,ke(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function cf(s){return 0!=(32&s.flags)}(a)&&ml(c,a,ke(),a.stylesWithoutHost,!1),am}function Yy(s,a,c,d){return Ky(s,a,c,d),am(),Yy}function yc(s,a,c){const d=ke(),h=Xt(),g=s+22,y=h.firstCreatePass?function _D(s,a,c,d,h){const g=a.consts,y=Di(g,d),I=Bu(a,s,8,"ng-container",y);return null!==y&&ss(I,y,!0),Yg(a,c,I,Di(g,h)),null!==a.queries&&a.queries.elementStart(a,I),I}(g,h,d,a,c):h.data[g];Ai(y,!0);const I=d[g]=d[11].createComment("");return $_(h,d,I,y),hn(I,d),Ma(y)&&(Fy(h,d,y),Wg(h,y,d)),null!=c&&Kg(d,y),yc}function vc(){let s=Kn();const a=Xt();return Fa()?Rl():(s=s.parent,Ai(s,!1)),a.firstCreatePass&&(Ha(a,s),Sa(s)&&a.queries.elementEnd(s)),vc}function Qy(){return ke()}function lm(s){return!!s&&"function"==typeof s.then}function Jy(s){return!!s&&"function"==typeof s.subscribe}const zu=Jy;function Xy(s,a,c,d){const h=ke(),g=Xt(),y=Kn();return function yb(s,a,c,d,h,g,y,I){const E=Ma(d),k=s.firstCreatePass&&os(s),B=a[8],K=Wf(a);let re=!0;if(3&d.type||I){const Xe=li(d,a),_t=I?I(Xe):Xe,Ot=K.length,Fe=I?bn=>I(xn(bn[d.index])):d.index;let Ct=null;if(!I&&E&&(Ct=function _b(s,a,c,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===c&&h[g+1]===d){const I=a[7],E=h[g+2];return I.length>E?I[E]:null}"string"==typeof y&&(g+=2)}return null}(s,a,h,d.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=g,Ct.__ngLastListenerFn__=g,re=!1;else{g=yh(d,a,B,g,!1);const bn=c.listen(_t,h,g);K.push(g,bn),k&&k.push(h,Fe,Ot,Ot+1)}}else g=yh(d,a,B,g,!1);const Te=d.outputs;let He;if(re&&null!==Te&&(He=Te[h])){const Xe=He.length;if(Xe)for(let _t=0;_t<Xe;_t+=2){const Gn=a[He[_t]][He[_t+1]].subscribe(g),Dc=K.length;K.push(g,Gn),k&&k.push(h,d.index,Dc,-(Dc+1))}}}(g,h,h[11],y,s,a,0,d),Xy}function cm(s,a,c,d){try{return!1!==c(d)}catch(h){return Kf(s,h),!1}}function yh(s,a,c,d,h){return function g(y){if(y===Function)return d;ri(2&s.flags?kr(s.index,a):a);let E=cm(a,0,d,y),A=g.__ngNextListenerFn__;for(;A;)E=cm(a,0,A,y)&&E,A=A.__ngNextListenerFn__;return h&&!1===E&&(y.preventDefault(),y.returnValue=!1),E}}function vb(s=1){return function Pd(s){return(Pt.lFrame.contextLView=function lg(s,a){for(;s>0;)a=a[15],s--;return a}(s,Pt.lFrame.contextLView))[8]}(s)}function Tb(s,a,c,d,h){const g=s[c+1],y=null===a;let I=d?As(g):rs(g),E=!1;for(;0!==I&&(!1===E||y);){const k=s[I+1];wD(s[I],a)&&(E=!0,s[I+1]=d?Ay(k):Dy(k)),I=d?As(k):rs(k)}E&&(s[c+1]=d?Dy(g):Ay(g))}function wD(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Es(s,a)>=0}const qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xb(s){return s.substring(qr.key,qr.keyEnd)}function rv(s,a){const c=qr.textEnd;return c===a?-1:(a=qr.keyEnd=function Ab(s,a,c){for(;a<c&&s.charCodeAt(a)>32;)a++;return a}(s,qr.key=a,c),Ns(s,a,c))}function Ns(s,a,c){for(;a<c&&s.charCodeAt(a)<=32;)a++;return a}function vh(s,a,c){return Rs(s,a,c,!1),vh}function hm(s,a){return Rs(s,a,null,!0),hm}function fm(s){!function Yi(s,a,c,d){const h=Xt(),g=di(2);h.firstUpdatePass&&Ob(h,null,g,d);const y=ke();if(c!==Wt&&Rt(y,g,c)){const I=h.data[dn()];if(ID(I,d)&&!Pb(h,g)){let E=d?I.classesWithoutHost:I.stylesWithoutHost;null!==E&&(c=Ce(E,c||"")),ml(h,I,y,c,d)}else!function av(s,a,c,d,h,g,y,I){h===Wt&&(h=St);let E=0,A=0,k=0<h.length?h[0]:null,B=0<g.length?g[0]:null;for(;null!==k||null!==B;){const K=E<h.length?h[E+1]:void 0,re=A<g.length?g[A+1]:void 0;let He,Te=null;k===B?(E+=2,A+=2,K!==re&&(Te=B,He=re)):null===B||null!==k&&k<B?(E+=2,Te=k):(A+=2,Te=B,He=re),null!==Te&&Lb(s,a,c,d,Te,He,y,I),k=E<h.length?h[E]:null,B=A<g.length?g[A]:null}}(h,I,y,y[11],y[g+1],y[g+1]=function rp(s,a,c){if(null==c||""===c)return St;const d=[],h=ha(c);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(d,g,h[g]);else"string"==typeof h&&a(d,h);return d}(s,a,c),d,g)}}(fi,cs,s,!0)}function cs(s,a){for(let c=function bD(s){return function va(s){qr.key=0,qr.keyEnd=0,qr.value=0,qr.valueEnd=0,qr.textEnd=s.length}(s),rv(s,Ns(s,0,qr.textEnd))}(a);c>=0;c=rv(a,c))fi(s,xb(a),!0)}function Rs(s,a,c,d){const h=ke(),g=Xt(),y=di(2);g.firstUpdatePass&&Ob(g,s,y,d),a!==Wt&&Rt(h,y,a)&&Lb(g,g.data[dn()],h,h[11],s,h[y+1]=function Ub(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ve(ha(s)))),s}(a,c),d,y)}function Pb(s,a){return a>=s.expandoStartIndex}function Ob(s,a,c,d){const h=s.data;if(null===h[c+1]){const g=h[dn()],y=Pb(s,c);ID(g,d)&&null===a&&!y&&(a=!1),a=function sv(s,a,c,d){const h=tu(s);let g=d?a.residualClasses:a.residualStyles;if(null===h)0===(d?a.classBindings:a.styleBindings)&&(c=np(c=pm(null,s,a,c,d),a.attrs,d),g=null);else{const y=a.directiveStylingLast;if(-1===y||s[y]!==h)if(c=pm(h,s,a,c,d),null===g){let E=function Nb(s,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==rs(d))return s[As(d)]}(s,a,d);void 0!==E&&Array.isArray(E)&&(E=pm(null,s,a,E[1],d),E=np(E,a.attrs,d),function Rb(s,a,c,d){s[As(c?a.classBindings:a.styleBindings)]=d}(s,a,d,E))}else g=function Fb(s,a,c){let d;const h=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<h;g++)d=np(d,s[g].hostAttrs,c);return np(d,a.attrs,c)}(s,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),c}(h,g,a,d),function vD(s,a,c,d,h,g){let y=g?a.classBindings:a.styleBindings,I=As(y),E=rs(y);s[d]=c;let k,A=!1;if(Array.isArray(c)){const B=c;k=B[1],(null===k||Es(B,k)>0)&&(A=!0)}else k=c;if(h)if(0!==E){const K=As(s[I+1]);s[d+1]=Hg(K,I),0!==K&&(s[K+1]=Vf(s[K+1],d)),s[I+1]=function xy(s,a){return 131071&s|a<<17}(s[I+1],d)}else s[d+1]=Hg(I,0),0!==I&&(s[I+1]=Vf(s[I+1],d)),I=d;else s[d+1]=Hg(E,0),0===I?I=d:s[E+1]=Vf(s[E+1],d),E=d;A&&(s[d+1]=Dy(s[d+1])),Tb(s,k,d,!0),Tb(s,k,d,!1),function CD(s,a,c,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&Es(g,a)>=0&&(c[d+1]=Ay(c[d+1]))}(a,k,s,d,g),y=Hg(I,E),g?a.classBindings=y:a.styleBindings=y}(h,g,a,c,y,d)}}function pm(s,a,c,d,h){let g=null;const y=c.directiveEnd;let I=c.directiveStylingLast;for(-1===I?I=c.directiveStart:I++;I<y&&(g=a[I],d=np(d,g.hostAttrs,h),g!==s);)I++;return null!==s&&(c.directiveStylingLast=I),d}function np(s,a,c){const d=c?1:2;let h=-1;if(null!==a)for(let g=0;g<a.length;g++){const y=a[g];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),fi(s,y,!!c||a[++g]))}return void 0===s?null:s}function Lb(s,a,c,d,h,g,y,I){if(!(3&a.type))return;const E=s.data,A=E[I+1];Ch(function Uf(s){return 1==(1&s)}(A)?Vb(E,a,c,h,rs(A),y):void 0)||(Ch(g)||function Rw(s){return 2==(2&s)}(A)&&(g=Vb(E,null,c,h,I,y)),function oP(s,a,c,d,h){if(a)h?s.addClass(c,d):s.removeClass(c,d);else{let g=-1===d.indexOf("-")?void 0:tr.DashCase;null==h?s.removeStyle(c,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=tr.Important),s.setStyle(c,d,h,g))}}(d,y,_s(dn(),c),h,g))}function Vb(s,a,c,d,h,g){const y=null===a;let I;for(;h>0;){const E=s[h],A=Array.isArray(E),k=A?E[1]:E,B=null===k;let K=c[h+1];K===Wt&&(K=B?St:void 0);let re=B?Jl(K,d):k===d?K:void 0;if(A&&!Ch(re)&&(re=Jl(E,d)),Ch(re)&&(I=re,y))return I;const Te=s[h+1];h=y?As(Te):rs(Te)}if(null!==a){let E=g?a.residualClasses:a.residualStyles;null!=E&&(I=Jl(E,d))}return I}function Ch(s){return void 0!==s}function ID(s,a){return 0!=(s.flags&(a?16:32))}function ED(s,a=""){const c=ke(),d=Xt(),h=s+22,g=d.firstCreatePass?Bu(d,h,1,a,null):d.data[h],y=c[h]=function M(s,a){return s.createText(a)}(c[11],a);$_(d,c,y,g),Ai(g,!1)}function Bb(s){return lv("",s,""),Bb}function lv(s,a,c){const d=ke(),h=function mc(s,a,c,d){return Rt(s,ys(),c)?a+we(c)+d:Wt}(d,s,a,c);return h!==Wt&&fl(d,dn(),h),lv}function op(s,a,c,d,h){const g=ke(),y=mh(g,s,a,c,d,h);return y!==Wt&&fl(g,dn(),y),op}function uv(s,a,c){const d=ke();if(Rt(d,ys(),a)){const g=Xt(),y=An();No(g,y,d,s,a,function Pi(s,a,c){return(null===s||xi(s))&&(c=function $s(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(c[a.index])),c[11]}(tu(g.data),y,d),c,!0)}return uv}const Ku=void 0;var UD=["en",[["a","p"],["AM","PM"],Ku],[["AM","PM"],Ku,Ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ku,"{1} 'at' {0}",Ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function VD(s){const c=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let Yu={};function up(s){const a=function jD(s){return s.toLowerCase().replace(/_/g,"-")}(s);let c=dp(a);if(c)return c;const d=a.split("-")[0];if(c=dp(d),c)return c;if("en"===d)return UD;throw new xe(701,!1)}function ym(s){return up(s)[Vt.PluralCase]}function dp(s){return s in Yu||(Yu[s]=nn.ng&&nn.ng.common&&nn.ng.common.locales&&nn.ng.common.locales[s]),Yu[s]}var Vt=(()=>((Vt=Vt||{})[Vt.LocaleId=0]="LocaleId",Vt[Vt.DayPeriodsFormat=1]="DayPeriodsFormat",Vt[Vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Vt[Vt.DaysFormat=3]="DaysFormat",Vt[Vt.DaysStandalone=4]="DaysStandalone",Vt[Vt.MonthsFormat=5]="MonthsFormat",Vt[Vt.MonthsStandalone=6]="MonthsStandalone",Vt[Vt.Eras=7]="Eras",Vt[Vt.FirstDayOfWeek=8]="FirstDayOfWeek",Vt[Vt.WeekendRange=9]="WeekendRange",Vt[Vt.DateFormat=10]="DateFormat",Vt[Vt.TimeFormat=11]="TimeFormat",Vt[Vt.DateTimeFormat=12]="DateTimeFormat",Vt[Vt.NumberSymbols=13]="NumberSymbols",Vt[Vt.NumberFormats=14]="NumberFormats",Vt[Vt.CurrencyCode=15]="CurrencyCode",Vt[Vt.CurrencySymbol=16]="CurrencySymbol",Vt[Vt.CurrencyName=17]="CurrencyName",Vt[Vt.Currencies=18]="Currencies",Vt[Vt.Directionality=19]="Directionality",Vt[Vt.PluralCase=20]="PluralCase",Vt[Vt.ExtraData=21]="ExtraData",Vt))();const Qu="en-US";let dv=Qu;function yv(s,a,c,d,h){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)yv(s[g],a,c,d,h);else{const g=Xt(),y=ke();let I=Fu(s)?s:J(s.provide),E=cw(s);const A=Kn(),k=1048575&A.providerIndexes,B=A.directiveStart,K=A.providerIndexes>>20;if(Fu(s)||!s.multi){const re=new qs(E,h,hl),Te=Cv(I,a,h?k:k+K,B);-1===Te?(Ko(Ks(A,y),g,I),vv(g,s,a.length),a.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),c.push(re),y.push(re)):(c[Te]=re,y[Te]=re)}else{const re=Cv(I,a,k+K,B),Te=Cv(I,a,k,k+K),He=re>=0&&c[re],Xe=Te>=0&&c[Te];if(h&&!Xe||!h&&!He){Ko(Ks(A,y),g,I);const _t=function GP(s,a,c,d,h){const g=new qs(s,c,hl);return g.multi=[],g.index=a,g.componentProviders=0,EI(g,h,d&&!c),g}(h?TI:hA,c.length,h,d,E);!h&&Xe&&(c[Te].providerFactory=_t),vv(g,s,a.length,0),a.push(I),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),c.push(_t),y.push(_t)}else vv(g,s,re>-1?re:Te,EI(c[h?Te:re],E,!h&&d));!h&&d&&Xe&&c[Te].componentProviders++}}}function vv(s,a,c,d){const h=Fu(a),g=function yx(s){return!!s.useClass}(a);if(h||g){const E=(g?J(a.useClass):a).prototype.ngOnDestroy;if(E){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&a.multi){const k=A.indexOf(c);-1===k?A.push(c,[d,E]):A[k+1].push(d,E)}else A.push(c,E)}}}function EI(s,a,c){return c&&s.componentProviders++,s.multi.push(a)-1}function Cv(s,a,c,d){for(let h=c;h<d;h++)if(a[h]===s)return h;return-1}function hA(s,a,c,d){return wv(this.multi,[])}function TI(s,a,c,d){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,I=Yo(c,c[1],this.providerFactory.index,d);g=I.slice(0,y),wv(h,g);for(let E=y;E<I.length;E++)g.push(I[E])}else g=[],wv(h,g);return g}function wv(s,a){for(let c=0;c<s.length;c++)a.push((0,s[c])());return a}function xI(s,a=[]){return c=>{c.providersResolver=(d,h)=>function II(s,a,c){const d=Xt();if(d.firstCreatePass){const h=xi(s);yv(c,d.data,d.blueprint,h,!0),yv(a,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,a)}}class yl{}class DI{}function fA(s,a){return new bv(s,a??null)}class bv extends yl{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new By(this);const d=Ye(a);this._bootstrapComponents=pa(d.bootstrap),this._r3Injector=Ug(a,c,[{provide:yl,useValue:this},{provide:kf,useValue:this.componentFactoryResolver}],ve(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Sm extends DI{constructor(a){super(),this.moduleType=a}create(a){return new bv(this.moduleType,a)}}class Iv extends yl{constructor(a,c,d){super(),this.componentFactoryResolver=new By(this),this.instance=null;const h=new Cx([...a,{provide:yl,useValue:this},{provide:kf,useValue:this.componentFactoryResolver}],c||Pg(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function un(s,a,c=null){return new Iv(s,a,c).injector}let Qi=(()=>{class s{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=ry(0,c.type),h=d.length>0?un([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,h)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Me({token:s,providedIn:"environment",factory:()=>new s(lr(Lu))}),s})();function bc(s){s.getStandaloneInjector=a=>a.get(Qi).getOrCreateStandaloneInjector(s)}function td(s,a,c,d){return function kI(s,a,c,d,h,g){const y=a+c;return Rt(s,y,h)?function Ro(s,a,c){return s[a]=c}(s,y+1,g?d.call(g,h):d(h)):function nd(s,a){const c=s[a];return c===Wt?void 0:c}(s,y+1)}(ke(),function ci(){const s=Pt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}(),s,a,c,d)}function Mv(s){return a=>{setTimeout(s,void 0,a)}}const Ca=class Sv extends o.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let h=a,g=c||(()=>null),y=d;if(a&&"object"==typeof a){const E=a;h=E.next?.bind(E),g=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(g=Mv(g),h&&(h=Mv(h)),y&&(y=Mv(y)));const I=super.subscribe({next:h,error:g,complete:y});return a instanceof H.w0&&a.add(I),I}};function RI(){return this._results[gc()]()}class kv{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=gc(),d=kv.prototype;d[c]||(d[c]=RI)}get changes(){return this._changes||(this._changes=new Ca)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const h=Dr(a);(this._changesDetected=!function Yl(s,a,c){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=a[d];if(c&&(h=c(h),g=c(g)),g!==h)return!1}return!0}(d._results,h,c))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Nm,s})();const _p=mp,FI=class extends _p{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tViews,h=qg(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),hh(d,h,a),new Lr(h)}};function Nm(){return yp(Kn(),ke())}function yp(s,a){return 4&s.type?new FI(a,s,lh(s,a)):null}let Rm=(()=>{class s{}return s.__NG_ELEMENT_ID__=TA,s})();function TA(){return Ov(Kn(),ke())}const xA=Rm,LI=class extends xA{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return lh(this._hostTNode,this._hostLView)}get injector(){return new Js(this._hostTNode,this._hostLView)}get parentInjector(){const a=qa(this._hostTNode,this._hostLView);if(au(a)){const c=uo(a,this._hostLView),d=$a(a);return new Js(c[1].data[d+8],c)}return new Js(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Pv(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const y=a.createEmbeddedView(c||{},g);return this.insert(y,h),y}createComponent(a,c,d,h,g){const y=a&&!function Mi(s){return"function"==typeof s}(a);let I;if(y)I=c;else{const B=c||{};I=B.index,d=B.injector,h=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const E=y?a:new Yf(N(a)),A=d||this.parentInjector;if(!g&&null==E.ngModule){const K=(y?A:this.parentInjector).get(Lu,null);K&&(g=K)}const k=E.create(A,h,void 0,g);return this.insert(k.hostView,I),k}insert(a,c){const d=a._lView,h=d[1];if(function Na(s){return Zr(s[3])}(d)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const B=d[3],K=new LI(B,B[6],B[3]);K.detach(K.indexOf(a))}}const g=this._adjustIndex(c),y=this._lContainer;!function zi(s,a,c,d){const h=10+d,g=c.length;d>0&&(c[h-1][4]=a),d<g-10?(a[4]=c[h],fu(c,10+d,a)):(c.push(a),a[4]=null),a[3]=c;const y=a[17];null!==y&&c!==y&&function da(s,a){const c=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===c?s[9]=[a]:c.push(a)}(y,a);const I=a[19];null!==I&&I.insertView(s),a[2]|=64}(h,d,y,g);const I=G_(g,y),E=d[11],A=cc(E,y[7]);return null!==A&&function nt(s,a,c,d,h,g){d[0]=h,d[6]=a,Wi(s,d,c,1,h,g)}(h,y[6],E,d,A,I),a.attachToViewContainerRef(),fu(vp(y),g,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Pv(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=Ef(this._lContainer,c);d&&(Ja(vp(this._lContainer),c),lc(d[1],d))}detach(a){const c=this._adjustIndex(a,-1),d=Ef(this._lContainer,c);return d&&null!=Ja(vp(this._lContainer),c)?new Lr(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function Pv(s){return s[8]}function vp(s){return s[8]||(s[8]=[])}function Ov(s,a){let c;const d=a[s.index];if(Zr(d))c=d;else{let h;if(8&s.type)h=xn(d);else{const g=a[11];h=g.createComment("");const y=li(s,a);Ds(g,cc(g,y),h,function iP(s,a){return s.nextSibling(a)}(g,y),!1)}a[s.index]=c=nb(d,a,h,s),zf(a,c)}return new LI(c,s,a)}class Rv{constructor(a){this.queryList=a,this.matches=null}clone(){return new Rv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Cp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,h=[];for(let g=0;g<d;g++){const y=c.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new Cp(h)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Gv(a,c).matches&&this.queries[c].setDirty()}}class Lm{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class Fv{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const h=null!==c?c.length:0,g=this.getByIndex(d).embeddedTView(a,h);g&&(g.indexInDeclarationView=d,null!==c?c.push(g):c=[g])}return null!==c?new Fv(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class wp{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new wp(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(a,c,Lv(c,g)),this.matchTNodeWithReadOption(a,c,Qs(c,a,g,!1,!1))}else d===mp?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Qs(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Pf||h===Rm||h===mp&&4&c.type)this.addMatch(c.index,-2);else{const g=Qs(c,a,h,!1,!1);null!==g&&this.addMatch(c.index,g)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function Lv(s,a){const c=s.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function Uv(s,a,c,d){return-1===c?function Vv(s,a){return 11&s.type?lh(s,a):4&s.type?yp(s,a):null}(a,s):-2===c?function DA(s,a,c){return c===Pf?lh(a,s):c===mp?yp(a,s):c===Rm?Ov(a,s):void 0}(s,a,d):Yo(s,s[1],c,a)}function UI(s,a,c,d){const h=a[19].queries[d];if(null===h.matches){const g=s.data,y=c.matches,I=[];for(let E=0;E<y.length;E+=2){const A=y[E];I.push(A<0?null:Uv(a,g[A],y[E+1],c.metadata.read))}h.matches=I}return h.matches}function Bv(s,a,c,d){const h=s.queries.getByIndex(c),g=h.matches;if(null!==g){const y=UI(s,a,h,c);for(let I=0;I<g.length;I+=2){const E=g[I];if(E>0)d.push(y[I/2]);else{const A=g[I+1],k=a[-E];for(let B=10;B<k.length;B++){const K=k[B];K[17]===K[3]&&Bv(K[1],K,A,d)}if(null!==k[9]){const B=k[9];for(let K=0;K<B.length;K++){const re=B[K];Bv(re[1],re,A,d)}}}}}return d}function bp(s){const a=ke(),c=Xt(),d=Gs();Xr(d+1);const h=Gv(c,d);if(s.dirty&&function Yc(s){return 4==(4&s[2])}(a)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Bv(c,a,d,[]):UI(c,a,h,d);s.reset(g,kx),s.notifyOnChanges()}return!0}return!1}function Hv(s,a,c,d){const h=Xt();if(h.firstCreatePass){const g=Kn();(function Zv(s,a,c){null===s.queries&&(s.queries=new Fv),s.queries.track(new wp(a,c))})(h,new Lm(a,c,d),g.index),function AA(s,a){const c=s.contentQueries||(s.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(s.queries.length-1,a)}(h,s),2==(2&c)&&(h.staticContentQueries=!0)}!function Um(s,a,c){const d=new kv(4==(4&c));Hf(s,a,d,d.destroy),null===a[19]&&(a[19]=new Cp),a[19].queries.push(new Rv(d))}(h,ke(),c)}function Vm(){return function $v(s,a){return s[19].queries[a].queryList}(ke(),Gs())}function Gv(s,a){return s.queries.getByIndex(a)}function Hm(...s){}const KI=new yn("Application Initializer");let $m=(()=>{class s{constructor(c){this.appInits=c,this.resolve=Hm,this.reject=Hm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(lm(g))c.push(g);else if(zu(g)){const y=new Promise((I,E)=>{g.subscribe({complete:I,error:E})});c.push(y)}}Promise.all(c).then(()=>{d()}).catch(h=>{this.reject(h)}),0===c.length&&d(),this.initialized=!0}}return s.\u0275fac=function(c){return new(c||s)(lr(KI,8))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const YI=new yn("AppId",{providedIn:"root",factory:function QI(){return`${Xv()}${Xv()}${Xv()}`}});function Xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const JI=new yn("Platform Initializer"),t1=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),XI=new yn("appBootstrapListener"),n1=new yn("AnimationModuleType");let r1=(()=>{class s{log(c){console.log(c)}warn(c){console.warn(c)}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const e0=new yn("LocaleId",{providedIn:"root",factory:()=>yu(e0,ct.Optional|ct.SkipSelf)||function aO(){return typeof $localize<"u"&&$localize.locale||Qu}()}),i1=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class eE{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let s1=(()=>{class s{compileModuleSync(c){return new Sm(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),g=pa(Ye(c).declarations).reduce((y,I)=>{const E=N(I);return E&&y.push(new Yf(E)),y},[]);return new eE(d,g)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const c1=(()=>Promise.resolve(0))();function n0(s){typeof Zone>"u"?c1.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Ls{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ca(!1),this.onMicrotaskEmpty=new Ca(!1),this.onStable=new Ca(!1),this.onError=new Ca(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&c,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function uO(){let s=nn.requestAnimationFrame,a=nn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Zm(s){const a=()=>{!function u1(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(nn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,r0(s),s.isCheckStableRunning=!0,rE(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),r0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,h,g,y,I)=>{try{return iE(s),c.invokeTask(h,g,y,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),d1(s)}},onInvoke:(c,d,h,g,y,I,E)=>{try{return iE(s),c.invoke(h,g,y,I,E)}finally{s.shouldCoalesceRunChangeDetection&&a(),d1(s)}},onHasTask:(c,d,h,g)=>{c.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,r0(s),rE(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(c,d,h,g)=>(c.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ls.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Ls.isInAngularZone())throw new xe(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,a,dO,Hm,Hm);try{return g.runTask(y,c,d)}finally{g.cancelTask(y)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const dO={};function rE(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function r0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function iE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function d1(s){s._nesting--,rE(s)}class oE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ca,this.onMicrotaskEmpty=new Ca,this.onStable=new Ca,this.onError=new Ca}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,h){return a.apply(c,d)}}const Gm=new yn(""),o0=new yn("");let s0,hO=(()=>{class s{constructor(c,d,h){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,s0||(function h1(s){s0=s}(h),h.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ls.assertNotInAngularZone(),n0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())n0(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:g,updateCb:h})}whenStable(c,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,h){return[]}}return s.\u0275fac=function(c){return new(c||s)(lr(Ls),lr(qm),lr(o0))},s.\u0275prov=Me({token:s,factory:s.\u0275fac}),s})(),qm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return s0?.findTestabilityInTree(this,c,d)??null}}return s.\u0275fac=function(c){return new(c||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),rd=null;const f1=new yn("AllowMultipleToken"),a0=new yn("PlatformDestroyListeners");class gO{constructor(a,c){this.name=a,this.token=c}}function g1(s,a,c=[]){const d=`Platform: ${a}`,h=new yn(d);return(g=[])=>{let y=sE();if(!y||y.injector.get(f1,!1)){const I=[...c,...g,{provide:h,useValue:!0}];s?s(I):function mO(s){if(rd&&!rd.get(f1,!1))throw new xe(400,!1);rd=s;const a=s.get(_1);(function p1(s){const a=s.get(JI,null);a&&a.forEach(c=>c())})(s)}(function m1(s=[],a){return Uu.create({name:a,providers:[{provide:iy,useValue:"platform"},{provide:a0,useValue:new Set([()=>rd=null])},...s]})}(I,d))}return function yO(s){const a=sE();if(!a)throw new xe(401,!1);return a}()}}function sE(){return rd?.get(_1)??null}let _1=(()=>{class s{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const h=function v1(s,a){let c;return c="noop"===s?new oE:("zone.js"===s?void 0:s)||new Ls(a),c}(d?.ngZone,function y1(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:Ls,useValue:h}];return h.run(()=>{const y=Uu.create({providers:g,parent:this.injector,name:c.moduleType.name}),I=c.create(y),E=I.injector.get(yi,null);if(!E)throw new xe(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:k=>{E.handleError(k)}});I.onDestroy(()=>{c0(this._modules,I),A.unsubscribe()})}),function C1(s,a,c){try{const d=c();return lm(d)?d.catch(h=>{throw a.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(E,h,()=>{const A=I.injector.get($m);return A.runInitializers(),A.donePromise.then(()=>(function Jb(s){se(s,"Expected localeId to be defined"),"string"==typeof s&&(dv=s.toLowerCase().replace(/_/g,"-"))}(I.injector.get(e0,Qu)||Qu),this._moduleDoBootstrap(I),I))})})}bootstrapModule(c,d=[]){const h=w1({},d);return function fO(s,a,c){const d=new Sm(c);return Promise.resolve(d)}(0,0,c).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(c){const d=c.injector.get(l0);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!c.instance.ngDoBootstrap)throw new xe(403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(a0,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(c){return new(c||s)(lr(Uu))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function w1(s,a){return Array.isArray(a)?a.reduce(w1,s):{...s,...a}}let l0=(()=>{class s{constructor(c,d,h){this._zone=c,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new R.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),y=new R.y(I=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{Ls.assertNotInAngularZone(),n0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{Ls.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{E.unsubscribe(),A.unsubscribe()}});this.isStable=(0,oe.T)(g,y.pipe((0,de.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(c,d){const h=c instanceof uw;if(!this._injector.get($m).done)throw!h&&be(c),new xe(405,false);let y;y=h?c:this._injector.get(kf).resolveComponentFactory(c),this.componentTypes.push(y.componentType);const I=function pO(s){return s.isBoundToModule}(y)?void 0:this._injector.get(yl),A=y.create(Uu.NULL,[],d||y.selector,I),k=A.location.nativeElement,B=A.injector.get(Gm,null);return B?.registerApplication(k),A.onDestroy(()=>{this.detachView(A.hostView),c0(this.components,A),B?.unregisterApplication(k)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;c0(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(XI,[]).concat(this._bootstrapListeners).forEach(h=>h(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>c0(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new xe(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(c){return new(c||s)(lr(Ls),lr(Lu),lr(yi))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function c0(s,a){const c=s.indexOf(a);c>-1&&s.splice(c,1)}let I1=!0,E1=!1;function CO(){return E1=!0,I1}function wO(){if(E1)throw new Error("Cannot enable prod mode after platform setup.");I1=!1}let bO=(()=>{class s{}return s.__NG_ELEMENT_ID__=IO,s})();function IO(s){return function EO(s,a,c){if(Eo(s)&&!c){const d=kr(s.index,a);return new Lr(d,d)}return 47&s.type?new Lr(a[16],a):null}(Kn(),ke(),16==(16&s))}class h0{constructor(){}supports(a){return Qf(a)}create(a){return new A1(a)}}const dE=(s,a)=>a;class A1{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||dE}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,h=0,g=null;for(;c||d;){const y=!d||c&&c.currentIndex<Ln(d,h,g)?c:d,I=Ln(y,h,g),E=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(c=c._next,null==y.previousIndex)h++;else{g||(g=[]);const A=I-h,k=E-h;if(A!=k){for(let K=0;K<A;K++){const re=K<g.length?g[K]:g[K]=0,Te=re+K;k<=Te&&Te<A&&(g[K]=re+1)}g[y.previousIndex]=k-A}}I!==E&&a(y,I,E)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Qf(a))throw new xe(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let h,g,y,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let I=0;I<this.length;I++)g=a[I],y=this._trackByFn(I,g),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,g,y,I)),Object.is(c.item,g)||this._addIdentityChange(c,g)):(c=this._mismatch(c,g,y,I),d=!0),c=c._next}else h=0,function pD(s,a){if(Array.isArray(s))for(let c=0;c<s.length;c++)a(s[c]);else{const c=s[gc()]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,I=>{y=this._trackByFn(h,I),null!==c&&Object.is(c.trackById,y)?(d&&(c=this._verifyReinsertion(c,I,y,h)),Object.is(c.item,I)||this._addIdentityChange(c,I)):(c=this._mismatch(c,I,y,h),d=!0),c=c._next,h++}),this.length=h;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,h){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,g,h)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,g,h)):a=this._addAfter(new S1(c,d),g,h),a}_verifyReinsertion(a,c,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,h):a.currentIndex!=h&&(a.currentIndex=h,this._addToMoves(a,h)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const h=a._prevRemoved,g=a._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const h=null===c?this._itHead:c._next;return a._next=h,a._prev=c,null===h?this._itTail=a:h._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new nr),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new nr),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class S1{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class M1{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class nr{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new M1,this.map.set(c,d)),d.add(a)}get(a,c){const h=this.map.get(a);return h?h.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ln(s,a,c){const d=s.previousIndex;if(null===d)return d;let h=0;return c&&d<c.length&&(h=c[d]),d+a+h}class zm{constructor(){}supports(a){return a instanceof Map||om(a)}create(){return new f0}}class f0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||om(a)))throw new xe(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,h)=>{if(c&&c.key===h)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const g=this._getOrCreateRecordForKey(h,d);c=this._insertBeforeOrAppend(c,g)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const h=this._records.get(a);this._maybeAddToChanges(h,c);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const d=new k1(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class k1{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hE(){return new p0([new h0])}let p0=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(null!=d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||hE()),deps:[[s,new ta,new So]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(null!=d)return d;throw new xe(901,!1)}}return s.\u0275prov=Me({token:s,providedIn:"root",factory:hE}),s})();function fE(){return new Wm([new zm])}let Wm=(()=>{class s{constructor(c){this.factories=c}static create(c,d){if(d){const h=d.factories.slice();c=c.concat(h)}return new s(c)}static extend(c){return{provide:s,useFactory:d=>s.create(c,d||fE()),deps:[[s,new ta,new So]]}}find(c){const d=this.factories.find(h=>h.supports(c));if(d)return d;throw new xe(901,!1)}}return s.\u0275prov=Me({token:s,providedIn:"root",factory:fE}),s})();const gE=g1(null,"core",[]);let O1=(()=>{class s{constructor(c){}}return s.\u0275fac=function(c){return new(c||s)(lr(l0))},s.\u0275mod=vr({type:s}),s.\u0275inj=xt({}),s})();function N1(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(bt,Ne,U)=>{U.d(Ne,{Z:()=>xe});var o=U(2090),H=U(4859),R=U(6881),oe=U(1877);class de{constructor(we,ye){this._delegate=we,this.firebase=ye,(0,R._addComponent)(we,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,R.deleteApp)(this._delegate)))}_getService(we,ye=R._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(we);return!pt.isInitialized()&&"EXPLICIT"===(null===(yt=pt.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:ye})}_removeServiceInstance(we,ye=R._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(ye)}_addComponent(we){(0,R._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,R._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function Ce(){const it=function ve(it){const we={},ye={__esModule:!0,initializeApp:function Ae(ze,ue={}){const Qe=R.initializeApp(ze,ue);if((0,o.r3)(we,Qe.name))return we[Qe.name];const At=new it(Qe,ye);return we[Qe.name]=At,At},app:pt,registerVersion:R.registerVersion,setLogLevel:R.setLogLevel,onLog:R.onLog,apps:null,SDK_VERSION:R.SDK_VERSION,INTERNAL:{registerComponent:function Se(ze){const ue=ze.name,Qe=ue.replace("-compat","");if(R._registerComponent(ze)&&"PUBLIC"===ze.type){const At=(gt=pt())=>{if("function"!=typeof gt[Qe])throw pe.create("invalid-app-argument",{appName:ue});return gt[Qe]()};void 0!==ze.serviceProps&&(0,o.ZB)(At,ze.serviceProps),ye[Qe]=At,it.prototype[Qe]=function(...gt){return this._getService.bind(this,ue).apply(this,ze.multipleInstances?gt:[])}}return"PUBLIC"===ze.type?ye[Qe]:null},removeApp:function yt(ze){delete we[ze]},useAsService:function qe(ze,ue){return"serverAuth"===ue?null:ue},modularAPIs:R}};function pt(ze){if(!(0,o.r3)(we,ze=ze||R._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:ze});return we[ze]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Ee(){return Object.keys(we).map(ze=>we[ze])}}),pt.App=it,ye}(de);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function we(ye){(0,o.ZB)(it,ye)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),it}(),G=new oe.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=z;!function Oe(it){(0,R.registerVersion)("@firebase/app-compat","0.2.13",it)}()},6881:(bt,Ne,U)=>{U.r(Ne),U.d(Ne,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>ao,_DEFAULT_ENTRY_NAME:()=>Yr,_addComponent:()=>dt,_addOrOverwriteComponent:()=>Et,_apps:()=>Mn,_clearComponents:()=>ir,_components:()=>qt,_getProvider:()=>Qr,_registerComponent:()=>nn,_removeServiceInstance:()=>yr,deleteApp:()=>Xn,getApp:()=>jn,getApps:()=>In,initializeApp:()=>sn,onLog:()=>er,registerVersion:()=>Jr,setLogLevel:()=>Ei});var o=U(5861),H=U(4859),R=U(1877),oe=U(2090);let _e,pe;const z=new WeakMap,G=new WeakMap,J=new WeakMap,$e=new WeakMap,Oe=new WeakMap;let we={get(le,ie,Le){if(le instanceof IDBTransaction){if("done"===ie)return G.get(le);if("objectStoreNames"===ie)return le.objectStoreNames||J.get(le);if("store"===ie)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return Ae(le[ie])},set:(le,ie,Le)=>(le[ie]=Le,!0),has:(le,ie)=>le instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in le};function pt(le){return"function"==typeof le?function yt(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ce(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...ie){return le.apply(Ee(this),ie),Ae(z.get(this))}:function(...ie){return Ae(le.apply(Ee(this),ie))}:function(ie,...Le){const Ve=le.call(Ee(this),ie,...Le);return J.set(Ve,ie.sort?ie.sort():[ie]),Ae(Ve)}}(le):(le instanceof IDBTransaction&&function it(le){if(G.has(le))return;const ie=new Promise((Le,Ve)=>{const Mt=()=>{le.removeEventListener("complete",Ht),le.removeEventListener("error",gn),le.removeEventListener("abort",gn)},Ht=()=>{Le(),Mt()},gn=()=>{Ve(le.error||new DOMException("AbortError","AbortError")),Mt()};le.addEventListener("complete",Ht),le.addEventListener("error",gn),le.addEventListener("abort",gn)});G.set(le,ie)}(le),((le,ie)=>ie.some(Le=>le instanceof Le))(le,function ve(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,we):le)}function Ae(le){if(le instanceof IDBRequest)return function xe(le){const ie=new Promise((Le,Ve)=>{const Mt=()=>{le.removeEventListener("success",Ht),le.removeEventListener("error",gn)},Ht=()=>{Le(Ae(le.result)),Mt()},gn=()=>{Ve(le.error),Mt()};le.addEventListener("success",Ht),le.addEventListener("error",gn)});return ie.then(Le=>{Le instanceof IDBCursor&&z.set(Le,le)}).catch(()=>{}),Oe.set(ie,le),ie}(le);if($e.has(le))return $e.get(le);const ie=pt(le);return ie!==le&&($e.set(le,ie),Oe.set(ie,le)),ie}const Ee=le=>Oe.get(le),ze=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Qe=new Map;function At(le,ie){if(!(le instanceof IDBDatabase)||ie in le||"string"!=typeof ie)return;if(Qe.get(ie))return Qe.get(ie);const Le=ie.replace(/FromIndex$/,""),Ve=ie!==Le,Mt=ue.includes(Le);if(!(Le in(Ve?IDBIndex:IDBObjectStore).prototype)||!Mt&&!ze.includes(Le))return;const Ht=function(){var gn=(0,o.Z)(function*(Hn,...Jt){const $r=this.transaction(Hn,Mt?"readwrite":"readonly");let Hi=$r.store;return Ve&&(Hi=Hi.index(Jt.shift())),(yield Promise.all([Hi[Le](...Jt),Mt&&$r.done]))[0]});return function(Jt){return gn.apply(this,arguments)}}();return Qe.set(ie,Ht),Ht}!function ye(le){we=le(we)}(le=>({...le,get:(ie,Le,Ve)=>At(ie,Le)||le.get(ie,Le,Ve),has:(ie,Le)=>!!At(ie,Le)||le.has(ie,Le)}));class gt{constructor(ie){this.container=ie}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function Gt(le){return"VERSION"===le.getComponent()?.type}(Le)){const Ve=Le.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(Le=>Le).join(" ")}}const ut="@firebase/app",gr=new R.Yd("@firebase/app"),Yr="[DEFAULT]",Nn={[ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Mn=new Map,qt=new Map;function dt(le,ie){try{le.container.addComponent(ie)}catch(Le){gr.debug(`Component ${ie.name} failed to register with FirebaseApp ${le.name}`,Le)}}function Et(le,ie){le.container.addOrOverwriteComponent(ie)}function nn(le){const ie=le.name;if(qt.has(ie))return gr.debug(`There were multiple attempts to register component ${ie}.`),!1;qt.set(ie,le);for(const Le of Mn.values())dt(Le,le);return!0}function Qr(le,ie){const Le=le.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),le.container.getProvider(ie)}function yr(le,ie,Le=Yr){Qr(le,ie).clearInstance(Le)}function ir(){qt.clear()}const zn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zt{constructor(ie,Le,Ve){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw zn.create("app-deleted",{appName:this._name})}}const ao="9.23.0";function sn(le,ie={}){let Le=le;"object"!=typeof ie&&(ie={name:ie});const Ve=Object.assign({name:Yr,automaticDataCollectionEnabled:!1},ie),Mt=Ve.name;if("string"!=typeof Mt||!Mt)throw zn.create("bad-app-name",{appName:String(Mt)});if(Le||(Le=(0,oe.aH)()),!Le)throw zn.create("no-options");const Ht=Mn.get(Mt);if(Ht){if((0,oe.vZ)(Le,Ht.options)&&(0,oe.vZ)(Ve,Ht.config))return Ht;throw zn.create("duplicate-app",{appName:Mt})}const gn=new H.H0(Mt);for(const Jt of qt.values())gn.addComponent(Jt);const Hn=new zt(Le,Ve,gn);return Mn.set(Mt,Hn),Hn}function jn(le=Yr){const ie=Mn.get(le);if(!ie&&le===Yr&&(0,oe.aH)())return sn();if(!ie)throw zn.create("no-app",{appName:le});return ie}function In(){return Array.from(Mn.values())}function Xn(le){return On.apply(this,arguments)}function On(){return(On=(0,o.Z)(function*(le){const ie=le.name;Mn.has(ie)&&(Mn.delete(ie),yield Promise.all(le.container.getProviders().map(Le=>Le.delete())),le.isDeleted=!0)})).apply(this,arguments)}function Jr(le,ie,Le){var Ve;let Mt=null!==(Ve=Nn[le])&&void 0!==Ve?Ve:le;Le&&(Mt+=`-${Le}`);const Ht=Mt.match(/\s|\//),gn=ie.match(/\s|\//);if(Ht||gn){const Hn=[`Unable to register library "${Mt}" with version "${ie}":`];return Ht&&Hn.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),Ht&&gn&&Hn.push("and"),gn&&Hn.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void gr.warn(Hn.join(" "))}nn(new H.wA(`${Mt}-version`,()=>({library:Mt,version:ie}),"VERSION"))}function er(le,ie){if(null!==le&&"function"!=typeof le)throw zn.create("invalid-log-argument");(0,R.Am)(le,ie)}function Ei(le){(0,R.Ub)(le)}const Z="firebase-heartbeat-store";let $=null;function F(){return $||($=function Se(le,ie,{blocked:Le,upgrade:Ve,blocking:Mt,terminated:Ht}={}){const gn=indexedDB.open(le,ie),Hn=Ae(gn);return Ve&&gn.addEventListener("upgradeneeded",Jt=>{Ve(Ae(gn.result),Jt.oldVersion,Jt.newVersion,Ae(gn.transaction),Jt)}),Le&&gn.addEventListener("blocked",Jt=>Le(Jt.oldVersion,Jt.newVersion,Jt)),Hn.then(Jt=>{Ht&&Jt.addEventListener("close",()=>Ht()),Mt&&Jt.addEventListener("versionchange",$r=>Mt($r.oldVersion,$r.newVersion,$r))}).catch(()=>{}),Hn}("firebase-heartbeat-database",1,{upgrade:(le,ie)=>{0===ie&&le.createObjectStore(Z)}}).catch(le=>{throw zn.create("idb-open",{originalErrorMessage:le.message})})),$}function P(){return(P=(0,o.Z)(function*(le){try{return yield(yield F()).transaction(Z).objectStore(Z).get(Ye(le))}catch(ie){if(ie instanceof oe.ZR)gr.warn(ie.message);else{const Le=zn.create("idb-get",{originalErrorMessage:ie?.message});gr.warn(Le.message)}}})).apply(this,arguments)}function Y(le,ie){return be.apply(this,arguments)}function be(){return(be=(0,o.Z)(function*(le,ie){try{const Ve=(yield F()).transaction(Z,"readwrite");yield Ve.objectStore(Z).put(ie,Ye(le)),yield Ve.done}catch(Le){if(Le instanceof oe.ZR)gr.warn(Le.message);else{const Ve=zn.create("idb-set",{originalErrorMessage:Le?.message});gr.warn(Ve.message)}}})).apply(this,arguments)}function Ye(le){return`${le.name}!${le.options.appId}`}class tt{constructor(ie){this.container=ie,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Ft(Le),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var ie=this;return(0,o.Z)(function*(){const Ve=ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=at();if(null===ie._heartbeatsCache&&(ie._heartbeatsCache=yield ie._heartbeatsCachePromise),ie._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!ie._heartbeatsCache.heartbeats.some(Ht=>Ht.date===Mt))return ie._heartbeatsCache.heartbeats.push({date:Mt,agent:Ve}),ie._heartbeatsCache.heartbeats=ie._heartbeatsCache.heartbeats.filter(Ht=>{const gn=new Date(Ht.date).valueOf();return Date.now()-gn<=2592e6}),ie._storage.overwrite(ie._heartbeatsCache)})()}getHeartbeatsHeader(){var ie=this;return(0,o.Z)(function*(){if(null===ie._heartbeatsCache&&(yield ie._heartbeatsCachePromise),null===ie._heartbeatsCache||0===ie._heartbeatsCache.heartbeats.length)return"";const Le=at(),{heartbeatsToSend:Ve,unsentEntries:Mt}=function Qt(le,ie=1024){const Le=[];let Ve=le.slice();for(const Mt of le){const Ht=Le.find(gn=>gn.agent===Mt.agent);if(Ht){if(Ht.dates.push(Mt.date),an(Le)>ie){Ht.dates.pop();break}}else if(Le.push({agent:Mt.agent,dates:[Mt.date]}),an(Le)>ie){Le.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:Le,unsentEntries:Ve}}(ie._heartbeatsCache.heartbeats),Ht=(0,oe.L)(JSON.stringify({version:2,heartbeats:Ve}));return ie._heartbeatsCache.lastSentHeartbeatDate=Le,Mt.length>0?(ie._heartbeatsCache.heartbeats=Mt,yield ie._storage.overwrite(ie._heartbeatsCache)):(ie._heartbeatsCache.heartbeats=[],ie._storage.overwrite(ie._heartbeatsCache)),Ht})()}}function at(){return(new Date).toISOString().substring(0,10)}class Ft{constructor(ie){this.app=ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ie=this;return(0,o.Z)(function*(){return(yield ie._canUseIndexedDBPromise)&&(yield function N(le){return P.apply(this,arguments)}(ie.app))||{heartbeats:[]}})()}overwrite(ie){var Le=this;return(0,o.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const Ht=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=ie.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Ht.lastSentHeartbeatDate,heartbeats:ie.heartbeats})}})()}add(ie){var Le=this;return(0,o.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const Ht=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=ie.lastSentHeartbeatDate)&&void 0!==Ve?Ve:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...ie.heartbeats]})}})()}}function an(le){return(0,oe.L)(JSON.stringify({version:2,heartbeats:le})).length}!function Hr(le){nn(new H.wA("platform-logger",ie=>new gt(ie),"PRIVATE")),nn(new H.wA("heartbeat",ie=>new tt(ie),"PRIVATE")),Jr(ut,"0.9.13",le),Jr(ut,"0.9.13","esm2017"),Jr("fire-js","")}("")},4859:(bt,Ne,U)=>{U.d(Ne,{H0:()=>ve,wA:()=>R});var o=U(5861),H=U(2090);class R{constructor(z,G,J){this.name=z,this.instanceFactory=G,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const oe="[DEFAULT]";class de{constructor(z,G){this.name=z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const G=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(G)){const J=new H.BH;if(this.instancesDeferred.set(G,J),this.isInitialized(G)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:G});$e&&J.resolve($e)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(z){var G;const J=this.normalizeInstanceIdentifier(z?.identifier),$e=null!==(G=z?.optional)&&void 0!==G&&G;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(Oe){if($e)return null;throw Oe}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function pe(Ce){return"EAGER"===Ce.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[G,J]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:$e});J.resolve(Oe)}catch{}}}}clearInstance(z=oe){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,o.Z)(function*(){const G=Array.from(z.instances.values());yield Promise.all([...G.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...G.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=oe){return this.instances.has(z)}getOptions(z=oe){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:G={}}=z,J=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:J,options:G});for(const[Oe,xe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(Oe)&&xe.resolve($e);return $e}onInit(z,G){var J;const $e=this.normalizeInstanceIdentifier(G),Oe=null!==(J=this.onInitCallbacks.get($e))&&void 0!==J?J:new Set;Oe.add(z),this.onInitCallbacks.set($e,Oe);const xe=this.instances.get($e);return xe&&z(xe,$e),()=>{Oe.delete(z)}}invokeOnInitCallbacks(z,G){const J=this.onInitCallbacks.get(G);if(J)for(const $e of J)try{$e(z,G)}catch{}}getOrInitializeService({instanceIdentifier:z,options:G={}}){let J=this.instances.get(z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=z,Ce===oe?void 0:Ce),options:G}),this.instances.set(z,J),this.instancesOptions.set(z,G),this.invokeOnInitCallbacks(J,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,J)}catch{}var Ce;return J||null}normalizeInstanceIdentifier(z=oe){return this.component?this.component.multipleInstances?z:oe:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const G=this.getProvider(z.name);if(G.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);G.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const G=new de(z,this);return this.providers.set(z,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Ne,U)=>{U.d(Ne,{Am:()=>Ce,Ub:()=>ve,Yd:()=>pe,in:()=>H});const o=[];var H=(()=>{return(z=H||(H={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",H;var z})();const R={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},oe=H.INFO,de={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},_e=(z,G,...J)=>{if(G<z.logLevel)return;const $e=(new Date).toISOString(),Oe=de[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${$e}]  ${z.name}:`,...J)};class pe{constructor(G){this.name=G,this._logLevel=oe,this._logHandler=_e,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in H))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?R[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...G),this._logHandler(this,H.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...G),this._logHandler(this,H.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,H.INFO,...G),this._logHandler(this,H.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,H.WARN,...G),this._logHandler(this,H.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...G),this._logHandler(this,H.ERROR,...G)}}function ve(z){o.forEach(G=>{G.setLogLevel(z)})}function Ce(z,G){for(const J of o){let $e=null;G&&G.level&&($e=R[G.level]),J.userLogHandler=null===z?null:(Oe,xe,...it)=>{const we=it.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");xe>=($e??Oe.logLevel)&&z({level:H[xe].toLowerCase(),message:we,args:it,type:Oe.name})}}}},259:(bt,Ne,U)=>{U.d(Ne,{C6:()=>o.getApps,KN:()=>o.registerVersion,Mq:()=>o.getApp,ZF:()=>o.initializeApp});var o=U(6881);(0,o.registerVersion)("firebase","9.23.0","app")},9260:(bt,Ne,U)=>{U.d(Ne,{Z:()=>o.Z});var o=U(3942);o.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(bt,Ne,U)=>{U.r(Ne);var o=U(5861),H=U(3942),R=U(1389),oe=U(2090),pe=(U(6881),U(1877),U(4859));function ve(){return window}function G(){return(G=(0,o.Z)(function*(F,N,P){var Y;const{BuildInfo:be}=ve();(0,R.as)(N.sessionId,"AuthEvent did not contain a session ID");const Ye=yield ye(N.sessionId),mt={};return(0,R.at)()?mt.ibi=be.packageName:(0,R.au)()?mt.apn=be.packageName:(0,R.av)(F,"operation-not-supported-in-this-environment"),be.displayName&&(mt.appDisplayName=be.displayName),mt.sessionId=Ye,(0,R.aw)(F,P,N.type,void 0,null!==(Y=N.eventId)&&void 0!==Y?Y:void 0,mt)})).apply(this,arguments)}function $e(){return($e=(0,o.Z)(function*(F){const{BuildInfo:N}=ve(),P={};(0,R.at)()?P.iosBundleId=N.packageName:(0,R.au)()?P.androidPackageName=N.packageName:(0,R.av)(F,"operation-not-supported-in-this-environment"),yield(0,R.ax)(F,P)})).apply(this,arguments)}function it(){return(it=(0,o.Z)(function*(F,N,P){const{cordova:Y}=ve();let be=()=>{};try{yield new Promise((Ye,mt)=>{let Ie=null;function tt(){var Ft;Ye();const an=null===(Ft=Y.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof an&&an(),"function"==typeof P?.close&&P.close()}function at(){Ie||(Ie=window.setTimeout(()=>{mt((0,R.az)(F,"redirect-cancelled-by-user"))},2e3))}function Qt(){"visible"===document?.visibilityState&&at()}N.addPassiveListener(tt),document.addEventListener("resume",at,!1),(0,R.au)()&&document.addEventListener("visibilitychange",Qt,!1),be=()=>{N.removePassiveListener(tt),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Qt,!1),Ie&&window.clearTimeout(Ie)}})}finally{be()}})).apply(this,arguments)}function ye(F){return yt.apply(this,arguments)}function yt(){return(yt=(0,o.Z)(function*(F){const N=pt(F),P=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(P)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pt(F){if((0,R.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const N=new ArrayBuffer(F.length),P=new Uint8Array(N);for(let Y=0;Y<F.length;Y++)P[Y]=F.charCodeAt(Y);return P}class Ee extends R.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(P=>P(N)),super.onEvent(N)}initialized(){var N=this;return(0,o.Z)(function*(){yield N.initPromise})()}}function ze(F){return ue.apply(this,arguments)}function ue(){return(ue=(0,o.Z)(function*(F){const N=yield gt()._get(Gt(F));return N&&(yield gt()._remove(Gt(F))),N})).apply(this,arguments)}function At(){const F=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<20;P++){const Y=Math.floor(Math.random()*N.length);F.push(N.charAt(Y))}return F.join("")}function gt(){return(0,R.aC)(R.b)}function Gt(F){return(0,R.aD)("authEvent",F.config.apiKey,F.name)}function gr(F){if(!F?.includes("?"))return{};const[N,...P]=F.split("?");return(0,oe.zd)(P.join("?"))}function ne(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,R.az)("no-auth-event")}}function lt(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function en(F=(0,oe.z$)()){return!("file:"!==lt()&&"ionic:"!==lt()&&"capacitor:"!==lt()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){try{const F=self.localStorage,N=R.aL();if(F)return F.setItem(N,"1"),F.removeItem(N),!function pn(F=(0,oe.z$)()){return function on(){return(0,oe.w1)()&&11===document?.documentMode}()||function Pn(F=(0,oe.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,oe.hl)()}catch{return Sn()&&(0,oe.hl)()}return!1}function Sn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function xt(){return"http:"===lt()||"https:"===lt()}()||(0,oe.ru)()||en())&&!function kt(){return(0,oe.b$)()||(0,oe.UG)()}()&&Qn()&&!Sn()}function mr(){return en()&&typeof document<"u"}function ct(){return(ct=(0,o.Z)(function*(){return!!mr()&&new Promise(F=>{const N=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),F(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},qn=R.aA,ji="persistence";function Nn(F){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,o.Z)(function*(F){yield F._initializationPromise;const N=dt(),P=R.aD(ji,F.config.apiKey,F.name);N&&N.setItem(P,F._getPersistence())})).apply(this,arguments)}function dt(){var F;try{return(null===(F=function _r(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const Et=R.aA;class nn{constructor(){this.browserResolver=R.aC(R.k),this.cordovaResolver=R.aC(class so{constructor(){this._redirectPersistence=R.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(N){var P=this;return(0,o.Z)(function*(){const Y=N._key();let be=P.eventManagers.get(Y);return be||(be=new Ee(N),P.eventManagers.set(Y,be),P.attachCallbackListeners(N,be)),be})()}_openPopup(N){(0,R.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,P,Y,be){var Ye=this;return(0,o.Z)(function*(){!function we(F){var N,P,Y,be,Ye,mt,Ie,tt,at,Qt;const Ft=ve();(0,R.aA)("function"==typeof(null===(N=Ft?.universalLinks)||void 0===N?void 0:N.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,R.aA)(typeof(null===(P=Ft?.BuildInfo)||void 0===P?void 0:P.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,R.aA)("function"==typeof(null===(Ye=null===(be=null===(Y=Ft?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===be?void 0:be.browsertab)||void 0===Ye?void 0:Ye.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(tt=null===(Ie=null===(mt=Ft?.cordova)||void 0===mt?void 0:mt.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===tt?void 0:tt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,R.aA)("function"==typeof(null===(Qt=null===(at=Ft?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Qt?void 0:Qt.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const mt=yield Ye._initialize(N);yield mt.initialized(),mt.resetRedirect(),(0,R.aG)(),yield Ye._originValidation(N);const Ie=function Se(F,N,P=null){return{type:N,eventId:P,urlResponse:null,sessionId:At(),postBody:null,tenantId:F.tenantId,error:(0,R.az)(F,"no-auth-event")}}(N,Y,be);yield function qe(F,N){return gt()._set(Gt(F),N)}(N,Ie);const tt=yield function z(F,N,P){return G.apply(this,arguments)}(N,Ie,P),at=yield function Oe(F){const{cordova:N}=ve();return new Promise(P=>{N.plugins.browsertab.isAvailable(Y=>{let be=null;Y?N.plugins.browsertab.openUrl(F):be=N.InAppBrowser.open(F,(0,R.ay)()?"_blank":"_system","location=yes"),P(be)})})}(tt);return function xe(F,N,P){return it.apply(this,arguments)}(N,mt,at)})()}_isIframeWebStorageSupported(N,P){throw new Error("Method not implemented.")}_originValidation(N){const P=N._key();return this.originValidationPromises[P]||(this.originValidationPromises[P]=function J(F){return $e.apply(this,arguments)}(N)),this.originValidationPromises[P]}attachCallbackListeners(N,P){const{universalLinks:Y,handleOpenURL:be,BuildInfo:Ye}=ve(),mt=setTimeout((0,o.Z)(function*(){yield ze(N),P.onEvent(ne())}),500),Ie=function(){var Qt=(0,o.Z)(function*(Ft){clearTimeout(mt);const an=yield ze(N);let Hr=null;an&&Ft?.url&&(Hr=function Qe(F,N){var P,Y;const be=function oo(F){const N=gr(F),P=N.link?decodeURIComponent(N.link):void 0,Y=gr(P).link,be=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return gr(be).link||be||Y||P||F}(N);if(be.includes("/__/auth/callback")){const Ye=gr(be),mt=Ye.firebaseError?function ut(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(Ye.firebaseError)):null,Ie=null===(Y=null===(P=mt?.code)||void 0===P?void 0:P.split("auth/"))||void 0===Y?void 0:Y[1],tt=Ie?(0,R.az)(Ie):null;return tt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:be,postBody:null}}return null}(an,Ft.url)),P.onEvent(Hr||ne())});return function(an){return Qt.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,Ie);const tt=be,at=`${Ye.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var Qt=(0,o.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(at)&&Ie({url:Ft}),"function"==typeof tt)try{tt(Ft)}catch(an){console.error(an)}});return function(Ft){return Qt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=R.a,this._completeRedirectFn=R.aE,this._overrideRedirectResult=R.aF}_initialize(N){var P=this;return(0,o.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,P,Y,be){var Ye=this;return(0,o.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openPopup(N,P,Y,be)})()}_openRedirect(N,P,Y,be){var Ye=this;return(0,o.Z)(function*(){return yield Ye.selectUnderlyingResolver(),Ye.assertedUnderlyingResolver._openRedirect(N,P,Y,be)})()}_isIframeWebStorageSupported(N,P){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,P)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return mr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Et(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,o.Z)(function*(){if(N.underlyingResolver)return;const P=yield function Ii(){return ct.apply(this,arguments)}();N.underlyingResolver=P?N.cordovaResolver:N.browserResolver})()}}function Qr(F){return F.unwrap()}function ir(F){return zn(F)}function zn(F){const{_tokenResponse:N}=F instanceof oe.ZR?F.customData:F;if(!N)return null;if(!(F instanceof oe.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return R.P.credentialFromResult(F);const P=N.providerId;if(!P||P===R.p.PASSWORD)return null;let Y;switch(P){case R.p.GOOGLE:Y=R.V;break;case R.p.FACEBOOK:Y=R.U;break;case R.p.GITHUB:Y=R.W;break;case R.p.TWITTER:Y=R.Z;break;default:const{oauthIdToken:be,oauthAccessToken:Ye,oauthTokenSecret:mt,pendingToken:Ie,nonce:tt}=N;return Ye||mt||be||Ie?Ie?P.startsWith("saml.")?R.aO._create(P,Ie):R.L._fromParams({providerId:P,signInMethod:P,pendingToken:Ie,idToken:be,accessToken:Ye}):new R.X(P).credential({idToken:be,accessToken:Ye,rawNonce:tt}):null}return F instanceof oe.ZR?Y.credentialFromError(F):Y.credentialFromResult(F)}function zt(F,N){return N.catch(P=>{throw P instanceof oe.ZR&&function St(F,N){var P;const Y=null===(P=N.customData)||void 0===P?void 0:P._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new jn(F,R.aq(F,N));else if(Y){const be=zn(N),Ye=N;be&&(Ye.credential=be,Ye.tenantId=Y.tenantId||void 0,Ye.email=Y.email||void 0,Ye.phoneNumber=Y.phoneNumber||void 0)}}(F,P),P}).then(P=>{const be=P.user;return{operationType:P.operationType,credential:ir(P),additionalUserInfo:R.ao(P),user:In.getOrCreate(be)}})}function ao(F,N){return sn.apply(this,arguments)}function sn(){return(sn=(0,o.Z)(function*(F,N){const P=yield N;return{verificationId:P.verificationId,confirm:Y=>zt(F,P.confirm(Y))}})).apply(this,arguments)}class jn{constructor(N,P){this.resolver=P,this.auth=function yr(F){return F.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return zt(Qr(this.auth),this.resolver.resolveSignIn(N))}}class In{constructor(N){this._delegate=N,this.multiFactor=R.ar(N)}static getOrCreate(N){return In.USER_MAP.has(N)||In.USER_MAP.set(N,new In(N)),In.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var P=this;return(0,o.Z)(function*(){return zt(P.auth,R.a0(P._delegate,N))})()}linkWithPhoneNumber(N,P){var Y=this;return(0,o.Z)(function*(){return ao(Y.auth,R.l(Y._delegate,N,P))})()}linkWithPopup(N){var P=this;return(0,o.Z)(function*(){return zt(P.auth,R.d(P._delegate,N,nn))})()}linkWithRedirect(N){var P=this;return(0,o.Z)(function*(){return yield Nn(R.aH(P.auth)),R.g(P._delegate,N,nn)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var P=this;return(0,o.Z)(function*(){return zt(P.auth,R.a1(P._delegate,N))})()}reauthenticateWithPhoneNumber(N,P){return ao(this.auth,R.r(this._delegate,N,P))}reauthenticateWithPopup(N){return zt(this.auth,R.e(this._delegate,N,nn))}reauthenticateWithRedirect(N){var P=this;return(0,o.Z)(function*(){return yield Nn(R.aH(P.auth)),R.h(P._delegate,N,nn)})()}sendEmailVerification(N){return R.ae(this._delegate,N)}unlink(N){var P=this;return(0,o.Z)(function*(){return yield R.an(P._delegate,N),P})()}updateEmail(N){return R.aj(this._delegate,N)}updatePassword(N){return R.ak(this._delegate,N)}updatePhoneNumber(N){return R.u(this._delegate,N)}updateProfile(N){return R.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,P){return R.af(this._delegate,N,P)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}In.USER_MAP=new WeakMap;const Xn=R.aA;let On=(()=>{class F{constructor(P,Y){if(this.app=P,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=P.options;Xn(be,"invalid-api-key",{appName:P.name}),Xn(be,"invalid-api-key",{appName:P.name});const Ye=typeof window<"u"?nn:void 0;this._delegate=Y.initialize({options:{persistence:er(be,P.name),popupRedirectResolver:Ye}}),this._delegate._updateErrorMap(R.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?In.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(P){this._delegate.languageCode=P}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(P){this._delegate.tenantId=P}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(P,Y){R.I(this._delegate,P,Y)}applyActionCode(P){return R.a5(this._delegate,P)}checkActionCode(P){return R.a6(this._delegate,P)}confirmPasswordReset(P,Y){return R.a4(this._delegate,P,Y)}createUserWithEmailAndPassword(P,Y){var be=this;return(0,o.Z)(function*(){return zt(be._delegate,R.a8(be._delegate,P,Y))})()}fetchProvidersForEmail(P){return this.fetchSignInMethodsForEmail(P)}fetchSignInMethodsForEmail(P){return R.ad(this._delegate,P)}isSignInWithEmailLink(P){return R.ab(this._delegate,P)}getRedirectResult(){var P=this;return(0,o.Z)(function*(){Xn(Bn(),P._delegate,"operation-not-supported-in-this-environment");const Y=yield R.j(P._delegate,nn);return Y?zt(P._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(P){!function De(F,N){(0,R.aH)(F)._logFramework(N)}(this._delegate,P)}onAuthStateChanged(P,Y,be){const{next:Ye,error:mt,complete:Ie}=Jr(P,Y,be);return this._delegate.onAuthStateChanged(Ye,mt,Ie)}onIdTokenChanged(P,Y,be){const{next:Ye,error:mt,complete:Ie}=Jr(P,Y,be);return this._delegate.onIdTokenChanged(Ye,mt,Ie)}sendSignInLinkToEmail(P,Y){return R.aa(this._delegate,P,Y)}sendPasswordResetEmail(P,Y){return R.a3(this._delegate,P,Y||void 0)}setPersistence(P){var Y=this;return(0,o.Z)(function*(){let be;switch(function Yr(F,N){qn(Object.values(Jn).includes(N),F,"invalid-persistence-type"),(0,oe.b$)()?qn(N!==Jn.SESSION,F,"unsupported-persistence-type"):(0,oe.UG)()?qn(N===Jn.NONE,F,"unsupported-persistence-type"):Sn()?qn(N===Jn.NONE||N===Jn.LOCAL&&(0,oe.hl)(),F,"unsupported-persistence-type"):qn(N===Jn.NONE||Qn(),F,"unsupported-persistence-type")}(Y._delegate,P),P){case Jn.SESSION:be=R.a;break;case Jn.LOCAL:be=(yield R.aC(R.i)._isAvailable())?R.i:R.b;break;case Jn.NONE:be=R.N;break;default:return R.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(P){return this.signInWithCredential(P)}signInAnonymously(){return zt(this._delegate,R._(this._delegate))}signInWithCredential(P){return zt(this._delegate,R.$(this._delegate,P))}signInWithCustomToken(P){return zt(this._delegate,R.a2(this._delegate,P))}signInWithEmailAndPassword(P,Y){return zt(this._delegate,R.a9(this._delegate,P,Y))}signInWithEmailLink(P,Y){return zt(this._delegate,R.ac(this._delegate,P,Y))}signInWithPhoneNumber(P,Y){return ao(this._delegate,R.s(this._delegate,P,Y))}signInWithPopup(P){var Y=this;return(0,o.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),zt(Y._delegate,R.c(Y._delegate,P,nn))})()}signInWithRedirect(P){var Y=this;return(0,o.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),yield Nn(Y._delegate),R.f(Y._delegate,P,nn)})()}updateCurrentUser(P){return this._delegate.updateCurrentUser(P)}verifyPasswordResetCode(P){return R.a7(this._delegate,P)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Jn,F})();function Jr(F,N,P){let Y=F;"function"!=typeof F&&({next:Y,error:N,complete:P}=F);const be=Y;return{next:mt=>be(mt&&In.getOrCreate(mt)),error:N,complete:P}}function er(F,N){const P=function qt(F,N){const P=dt();if(!P)return[];const Y=R.aD(ji,F,N);switch(P.getItem(Y)){case Jn.NONE:return[R.N];case Jn.LOCAL:return[R.i,R.a];case Jn.SESSION:return[R.a];default:return[]}}(F,N);if(typeof self<"u"&&!P.includes(R.i)&&P.push(R.i),typeof window<"u")for(const Y of[R.b,R.a])P.includes(Y)||P.push(Y);return P.includes(R.N)||P.push(R.N),P}class Ei{constructor(){this.providerId="phone",this._delegate=new R.P(Qr(H.Z.auth()))}static credential(N,P){return R.P.credential(N,P)}verifyPhoneNumber(N,P){return this._delegate.verifyPhoneNumber(N,P)}unwrap(){return this._delegate}}Ei.PHONE_SIGN_IN_METHOD=R.P.PHONE_SIGN_IN_METHOD,Ei.PROVIDER_ID=R.P.PROVIDER_ID;const vr=R.aA;class jr{constructor(N,P,Y=H.Z.app()){var be;vr(null===(be=Y.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new R.R(N,P,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function $(F){F.INTERNAL.registerComponent(new pe.wA("auth-compat",N=>{const P=N.getProvider("app-compat").getImmediate(),Y=N.getProvider("auth");return new On(P,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:R.A.EMAIL_SIGNIN,PASSWORD_RESET:R.A.PASSWORD_RESET,RECOVER_EMAIL:R.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:R.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:R.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:R.A.VERIFY_EMAIL}},EmailAuthProvider:R.Q,FacebookAuthProvider:R.U,GithubAuthProvider:R.W,GoogleAuthProvider:R.V,OAuthProvider:R.X,SAMLAuthProvider:R.Y,PhoneAuthProvider:Ei,PhoneMultiFactorGenerator:R.m,RecaptchaVerifier:jr,TwitterAuthProvider:R.Z,Auth:On,AuthCredential:R.J,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}(H.Z)},5861:(bt,Ne,U)=>{function o(R,oe,de,_e,pe,ve,Ce){try{var z=R[ve](Ce),G=z.value}catch(J){return void de(J)}z.done?oe(G):Promise.resolve(G).then(_e,pe)}function H(R){return function(){var oe=this,de=arguments;return new Promise(function(_e,pe){var ve=R.apply(oe,de);function Ce(G){o(ve,_e,pe,Ce,z,"next",G)}function z(G){o(ve,_e,pe,Ce,z,"throw",G)}Ce(void 0)})}}U.d(Ne,{Z:()=>H})},7582:(bt,Ne,U)=>{function oe(se,ne){var De={};for(var fe in se)Object.prototype.hasOwnProperty.call(se,fe)&&ne.indexOf(fe)<0&&(De[fe]=se[fe]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(fe=Object.getOwnPropertySymbols(se);Pe<fe.length;Pe++)ne.indexOf(fe[Pe])<0&&Object.prototype.propertyIsEnumerable.call(se,fe[Pe])&&(De[fe[Pe]]=se[fe[Pe]])}return De}function J(se,ne,De,fe){return new(De||(De=Promise))(function(Me,lt){function xt(on){try{kt(fe.next(on))}catch(Pn){lt(Pn)}}function en(on){try{kt(fe.throw(on))}catch(Pn){lt(Pn)}}function kt(on){on.done?Me(on.value):function Pe(Me){return Me instanceof De?Me:new De(function(lt){lt(Me)})}(on.value).then(xt,en)}kt((fe=fe.apply(se,ne||[])).next())})}function Ae(se){return this instanceof Ae?(this.v=se,this):new Ae(se)}function Ee(se,ne,De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,fe=De.apply(se,ne||[]),Me=[];return Pe={},lt("next"),lt("throw"),lt("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function lt(pn){fe[pn]&&(Pe[pn]=function(Qn){return new Promise(function(Sn,Bn){Me.push([pn,Qn,Sn,Bn])>1||xt(pn,Qn)})})}function xt(pn,Qn){try{!function en(pn){pn.value instanceof Ae?Promise.resolve(pn.value.v).then(kt,on):Pn(Me[0][2],pn)}(fe[pn](Qn))}catch(Sn){Pn(Me[0][3],Sn)}}function kt(pn){xt("next",pn)}function on(pn){xt("throw",pn)}function Pn(pn,Qn){pn(Qn),Me.shift(),Me.length&&xt(Me[0][0],Me[0][1])}}function qe(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,ne=se[Symbol.asyncIterator];return ne?ne.call(se):(se=function it(se){var ne="function"==typeof Symbol&&Symbol.iterator,De=ne&&se[ne],fe=0;if(De)return De.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&fe>=se.length&&(se=void 0),{value:se&&se[fe++],done:!se}}};throw new TypeError(ne?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),De={},fe("next"),fe("throw"),fe("return"),De[Symbol.asyncIterator]=function(){return this},De);function fe(Me){De[Me]=se[Me]&&function(lt){return new Promise(function(xt,en){!function Pe(Me,lt,xt,en){Promise.resolve(en).then(function(kt){Me({value:kt,done:xt})},lt)}(xt,en,(lt=se[Me](lt)).done,lt.value)})}}}U.d(Ne,{FC:()=>Ee,KL:()=>qe,_T:()=>oe,mG:()=>J,qq:()=>Ae}),"function"==typeof SuppressedError&&SuppressedError}},bt=>{bt(bt.s=8134)}]);