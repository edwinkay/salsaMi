"use strict";(self.webpackChunkasi_somos_asi_bailamos=self.webpackChunkasi_somos_asi_bailamos||[]).push([[179],{2011:(bt,Ne,U)=>{U.d(Ne,{Dh:()=>ve,GT:()=>_e,cc:()=>ke,hO:()=>He,on:()=>Z,pX:()=>ce,xv:()=>we});var u=U(4650),$=U(9260),O=U(4976);bt=U.hmd(bt);const ie=["ngOnDestroy"],ce=(ye,yt,pt,Se={})=>new Proxy(ye,{get:(Ie,xe)=>pt.runOutsideAngular(()=>{var ze;if(ye[xe])return!(null===(ze=Se?.spy)||void 0===ze)&&ze.get&&Se.spy.get(xe,ye[xe]),ye[xe];if(ie.indexOf(xe)>-1)return()=>{};const qe=yt.toPromise().then(le=>{const Qe=le&&le[xe];return"function"==typeof Qe?Qe.bind(le):Qe&&Qe.then?Qe.then(St=>pt.run(()=>St)):pt.run(()=>Qe)});return new Proxy(()=>{},{get:(le,Qe)=>qe[Qe],apply:(le,Qe,St)=>qe.then(gt=>{var zt;const ct=gt&&gt(...St);return!(null===(zt=Se?.spy)||void 0===zt)&&zt.apply&&Se.spy.apply(xe,St,ct),ct})})})}),_e=(ye,yt)=>{yt.forEach(pt=>{Object.getOwnPropertyNames(pt.prototype||pt).forEach(Se=>{Object.defineProperty(ye.prototype,Se,Object.getOwnPropertyDescriptor(pt.prototype||pt,Se))})})};class pe{constructor(yt){return yt}}const ve=new u.OlP("angularfire2.app.options"),we=new u.OlP("angularfire2.app.name");function Z(ye,yt,pt){const Ie="object"==typeof pt&&pt||{};Ie.name=Ie.name||"string"==typeof pt&&pt||"[DEFAULT]";const ze=$.Z.apps.filter(qe=>qe&&qe.name===Ie.name)[0]||yt.runOutsideAngular(()=>$.Z.initializeApp(ye,Ie));try{JSON.stringify(ye)!==JSON.stringify(ze.options)&&z("error",`${ze.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(ze)}const z=(ye,...yt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ye](...yt)},J={provide:pe,useFactory:Z,deps:[ve,u.R0b,[new u.FiY,we]]};let He=(()=>{class ye{constructor(pt){$.Z.registerVersion("angularfire",O.q4.full,"core"),$.Z.registerVersion("angularfire",O.q4.full,"app-compat"),$.Z.registerVersion("angular",u.q4F.full,pt.toString())}static initializeApp(pt,Se){return{ngModule:ye,providers:[{provide:ve,useValue:pt},{provide:we,useValue:Se}]}}}return ye.\u0275fac=function(pt){return new(pt||ye)(u.LFG(u.Lbi))},ye.\u0275mod=u.oAB({type:ye}),ye.\u0275inj=u.cJS({providers:[J]}),ye})();function ke(ye,yt,pt,Se,Ie){const[,xe,ze]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===ye)||[];if(xe)return function De(ye,yt){try{return ye.toString()===yt.toString()}catch{return ye===yt}}(Ie,ze)||(Ee("error",`${yt} was already initialized on the ${pt} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Ie,was:ze})),xe;{const qe=Se();return globalThis.\u0275AngularfireInstanceCache.push([ye,qe,Ie]),qe}}const it=!!bt.hot,Ee=(ye,...yt)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ye](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(bt,Ne,U)=>{U.d(Ne,{q4:()=>nu,iC:()=>os,fc:()=>wf,HU:()=>nl,vb:()=>Zd,JM:()=>ia,u3:()=>sa});var u=U(4650),$=U(259),O=U(5861),ie=U(6881),ce=U(2090),_e=U(4859),pe=U(1877);let we,Z;const He=new WeakMap,ke=new WeakMap,De=new WeakMap,it=new WeakMap,Ee=new WeakMap;let pt={get(E,T,x){if(E instanceof IDBTransaction){if("done"===T)return ke.get(E);if("objectStoreNames"===T)return E.objectStoreNames||De.get(E);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ze(E[T])},set:(E,T,x)=>(E[T]=x,!0),has:(E,T)=>E instanceof IDBTransaction&&("done"===T||"store"===T)||T in E};function xe(E){return"function"==typeof E?function Ie(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J(){return Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...T){return E.apply(qe(this),T),ze(He.get(this))}:function(...T){return ze(E.apply(qe(this),T))}:function(T,...x){const V=E.call(qe(this),T,...x);return De.set(V,T.sort?T.sort():[T]),ze(V)}}(E):(E instanceof IDBTransaction&&function yt(E){if(ke.has(E))return;const T=new Promise((x,V)=>{const W=()=>{E.removeEventListener("complete",X),E.removeEventListener("error",me),E.removeEventListener("abort",me)},X=()=>{x(),W()},me=()=>{V(E.error||new DOMException("AbortError","AbortError")),W()};E.addEventListener("complete",X),E.addEventListener("error",me),E.addEventListener("abort",me)});ke.set(E,T)}(E),((E,T)=>T.some(x=>E instanceof x))(E,function z(){return we||(we=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,pt):E)}function ze(E){if(E instanceof IDBRequest)return function ye(E){const T=new Promise((x,V)=>{const W=()=>{E.removeEventListener("success",X),E.removeEventListener("error",me)},X=()=>{x(ze(E.result)),W()},me=()=>{V(E.error),W()};E.addEventListener("success",X),E.addEventListener("error",me)});return T.then(x=>{x instanceof IDBCursor&&He.set(x,E)}).catch(()=>{}),Ee.set(T,E),T}(E);if(it.has(E))return it.get(E);const T=xe(E);return T!==E&&(it.set(E,T),Ee.set(T,E)),T}const qe=E=>Ee.get(E),St=["get","getKey","getAll","getAllKeys","count"],gt=["put","add","delete","clear"],zt=new Map;function ct(E,T){if(!(E instanceof IDBDatabase)||T in E||"string"!=typeof T)return;if(zt.get(T))return zt.get(T);const x=T.replace(/FromIndex$/,""),V=T!==x,W=gt.includes(x);if(!(x in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!St.includes(x))return;const X=function(){var me=(0,O.Z)(function*(Je,...We){const et=this.transaction(Je,W?"readwrite":"readonly");let Vt=et.store;return V&&(Vt=Vt.index(We.shift())),(yield Promise.all([Vt[x](...We),W&&et.done]))[0]});return function(We){return me.apply(this,arguments)}}();return zt.set(T,X),X}!function Se(E){pt=E(pt)}(E=>({...E,get:(T,x,V)=>ct(T,x)||E.get(T,x,V),has:(T,x)=>!!ct(T,x)||E.has(T,x)}));const Xi="@firebase/installations",es="w:0.6.4",se="FIS_v2",ut=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Dt(E){return E instanceof ce.ZR&&E.code.includes("request-failed")}function en({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function Pt(E){return{token:E.token,requestStatus:2,expiresIn:gr(E.expiresIn),creationTime:Date.now()}}function rn(E,T){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,O.Z)(function*(E,T){const V=(yield T.json()).error;return ut.create("request-failed",{requestName:E,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function fn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Qn(E,{refreshToken:T}){const x=fn(E);return x.append("Authorization",function wi(E){return`${se} ${E}`}(T)),x}function xn(E){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(E){const T=yield E();return T.status>=500&&T.status<600?E():T})).apply(this,arguments)}function gr(E){return Number(E.replace("s","000"))}function lt(E,T){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},{fid:x}){const V=en(E),W=fn(E),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Je={method:"POST",headers:W,body:JSON.stringify({fid:x,authVersion:se,appId:E.appId,sdkVersion:es})},We=yield xn(()=>fetch(V,Je));if(We.ok){const et=yield We.json();return{fid:et.fid||x,registrationStatus:2,refreshToken:et.refreshToken,authToken:Pt(et.authToken)}}throw yield rn("Create Installation",We)})).apply(this,arguments)}function Jn(E){return new Promise(T=>{setTimeout(T,E)})}const Fi=/^[cdef][\w-]{21}$/;function Nn(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const x=function Mn(E){return function qn(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Fi.test(x)?x:""}catch{return""}}function qt(E){return`${E.appName}!${E.appId}`}const dt=new Map;function It(E,T){const x=qt(E);_r(x,T),function rr(E,T){const x=function Zn(){return!xt&&"BroadcastChannel"in self&&(xt=new BroadcastChannel("[Firebase] FID Change"),xt.onmessage=E=>{_r(E.data.key,E.data.fid)}),xt}();x&&x.postMessage({key:E,fid:T}),function Zt(){0===dt.size&&xt&&(xt.close(),xt=null)}()}(x,T)}function _r(E,T){const x=dt.get(E);if(x)for(const V of x)V(T)}let xt=null;const jn="firebase-installations-store";let bn=null;function Xn(){return bn||(bn=function le(E,T,{blocked:x,upgrade:V,blocking:W,terminated:X}={}){const me=indexedDB.open(E,T),Je=ze(me);return V&&me.addEventListener("upgradeneeded",We=>{V(ze(me.result),We.oldVersion,We.newVersion,ze(me.transaction))}),x&&me.addEventListener("blocked",()=>x()),Je.then(We=>{X&&We.addEventListener("close",()=>X()),W&&We.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}("firebase-installations-database",1,{upgrade:(E,T)=>{0===T&&E.createObjectStore(jn)}})),bn}function kn(E,T){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,O.Z)(function*(E,T){const x=qt(E),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(x);return yield X.put(T,x),yield W.done,(!me||me.fid!==T.fid)&&It(E,T.fid),T})).apply(this,arguments)}function er(E){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,O.Z)(function*(E){const T=qt(E),V=(yield Xn()).transaction(jn,"readwrite");yield V.objectStore(jn).delete(T),yield V.done})).apply(this,arguments)}function yr(E,T){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(E,T){const x=qt(E),W=(yield Xn()).transaction(jn,"readwrite"),X=W.objectStore(jn),me=yield X.get(x),Je=T(me);return void 0===Je?yield X.delete(x):yield X.put(Je,x),yield W.done,Je&&(!me||me.fid!==Je.fid)&&It(E,Je.fid),Je})).apply(this,arguments)}function G(E){return H.apply(this,arguments)}function H(){return(H=(0,O.Z)(function*(E){let T;const x=yield yr(E.appConfig,V=>{const W=F(V),X=N(E,W);return T=X.registrationPromise,X.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function F(E){return Ce(E||{fid:Nn(),registrationStatus:0})}function N(E,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(ut.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function R(E,T){return Y.apply(this,arguments)}(E,x);return{installationEntry:x,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:be(E)}:{installationEntry:T}}function Y(){return(Y=(0,O.Z)(function*(E,T){try{const x=yield lt(E,T);return kn(E.appConfig,x)}catch(x){throw Dt(x)&&409===x.customData.serverCode?yield er(E.appConfig):yield kn(E.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function be(E){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(E){let T=yield mt(E.appConfig);for(;1===T.registrationStatus;)yield Jn(100),T=yield mt(E.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:V}=yield G(E);return V||x}return T})).apply(this,arguments)}function mt(E){return yr(E,T=>{if(!T)throw ut.create("installation-not-found");return Ce(T)})}function Ce(E){return function tt(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function at(E,T){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:T},x){const V=Lt(E,x),W=Qn(E,x),X=T.getImmediate({optional:!0});if(X){const et=yield X.getHeartbeatsHeader();et&&W.append("x-firebase-client",et)}const Je={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:es,appId:E.appId}})},We=yield xn(()=>fetch(V,Je));if(We.ok)return Pt(yield We.json());throw yield rn("Generate Auth Token",We)})).apply(this,arguments)}function Lt(E,{fid:T}){return`${en(E)}/${T}/authTokens:generate`}function on(E){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(E,T=!1){let x;const V=yield yr(E.appConfig,X=>{if(!$t(X))throw ut.create("not-registered");const me=X.authToken;if(!T&&pn(me))return X;if(1===me.requestStatus)return x=ae(E,T),X;{if(!navigator.onLine)throw ut.create("app-offline");const Je=Jt(X);return x=Ve(E,Je),Je}});return x?yield x:V.authToken})).apply(this,arguments)}function ae(E,T){return re.apply(this,arguments)}function re(){return(re=(0,O.Z)(function*(E,T){let x=yield Le(E.appConfig);for(;1===x.authToken.requestStatus;)yield Jn(100),x=yield Le(E.appConfig);const V=x.authToken;return 0===V.requestStatus?on(E,T):V})).apply(this,arguments)}function Le(E){return yr(E,T=>{if(!$t(T))throw ut.create("not-registered");return function Hr(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ve(E,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(E,T){try{const x=yield at(E,T),V=Object.assign(Object.assign({},T),{authToken:x});return yield kn(E.appConfig,V),x}catch(x){if(!Dt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield kn(E.appConfig,V)}else yield er(E.appConfig);throw x}})).apply(this,arguments)}function $t(E){return void 0!==E&&2===E.registrationStatus}function pn(E){return 2===E.requestStatus&&!function $n(E){const T=Date.now();return T<E.creationTime||E.creationTime+E.expiresIn<T+36e5}(E)}function Jt(E){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:T})}function si(){return(si=(0,O.Z)(function*(E){const T=E,{installationEntry:x,registrationPromise:V}=yield G(T);return V?V.catch(console.error):on(T).catch(console.error),x.fid})).apply(this,arguments)}function Ia(){return(Ia=(0,O.Z)(function*(E,T=!1){const x=E;return yield cn(x),(yield on(x,T)).token})).apply(this,arguments)}function cn(E){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,O.Z)(function*(E){const{registrationPromise:T}=yield G(E);T&&(yield T)})).apply(this,arguments)}function Ir(E){return ut.create("missing-app-config-values",{valueName:E})}const Gr="installations",vs=E=>{const T=E.getProvider("app").getImmediate(),x=function gd(E){if(!E||!E.options)throw Ir("App Configuration");if(!E.name)throw Ir("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!E.options[x])throw Ir(x);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ie._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Aa=E=>{const T=E.getProvider("app").getImmediate(),x=(0,ie._getProvider)(T,Gr).getImmediate();return{getId:()=>function Li(E){return si.apply(this,arguments)}(x),getToken:W=>function Ca(E){return Ia.apply(this,arguments)}(x,W)}};(function bi(){(0,ie._registerComponent)(new _e.wA(Gr,vs,"PUBLIC")),(0,ie._registerComponent)(new _e.wA("installations-internal",Aa,"PRIVATE"))})(),(0,ie.registerVersion)(Xi,"0.6.4"),(0,ie.registerVersion)(Xi,"0.6.4","esm2017");const Sa="@firebase/remote-config",Pn=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class $l{constructor(T,x,V,W){this.client=T,this.storage=x,this.storageCache=V,this.logger=W}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-x,W=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var x=this;return(0,O.Z)(function*(){const[V,W]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(W&&x.isCachedDataFresh(T.cacheMaxAgeMillis,V))return W;T.eTag=W&&W.eTag;const X=yield x.client.fetch(T),me=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&me.push(x.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(me),X})()}}function Tu(E=navigator){return E.languages&&E.languages[0]||E.language}class Hl{constructor(T,x,V,W,X,me){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=V,this.projectId=W,this.apiKey=X,this.appId=me}fetch(T){var x=this;return(0,O.Z)(function*(){const[V,W]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Je={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},We={sdk_version:x.sdkVersion,app_instance_id:V,app_instance_id_token:W,app_id:x.appId,language_code:Tu()},et={method:"POST",headers:Je,body:JSON.stringify(We)},Vt=fetch(me,et),Nt=new Promise((ei,Or)=>{T.signal.addEventListener(()=>{const aa=new Error("The operation was aborted.");aa.name="AbortError",Or(aa)})});let Nr;try{yield Promise.race([Vt,Nt]),Nr=yield Vt}catch(ei){let Or="fetch-client-network";throw"AbortError"===ei?.name&&(Or="fetch-timeout"),Pn.create(Or,{originalErrorMessage:ei?.message})}let hn=Nr.status;const as=Nr.headers.get("ETag")||void 0;let oa,us;if(200===Nr.status){let ei;try{ei=yield Nr.json()}catch(Or){throw Pn.create("fetch-client-parse",{originalErrorMessage:Or?.message})}oa=ei.entries,us=ei.state}if("INSTANCE_STATE_UNSPECIFIED"===us?hn=500:"NO_CHANGE"===us?hn=304:("NO_TEMPLATE"===us||"EMPTY_CONFIG"===us)&&(oa={}),304!==hn&&200!==hn)throw Pn.create("fetch-status",{httpStatus:hn});return{status:hn,eTag:as,config:oa}})()}}class Gl{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const V=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:V}){var W=this;return(0,O.Z)(function*(){yield function Ma(E,T){return new Promise((x,V)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(x,W);E.addEventListener(()=>{clearTimeout(X),V(Pn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const X=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),X}catch(X){if(!function bd(E){if(!(E instanceof ce.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}(X))throw X;const me={throttleEndTimeMillis:Date.now()+(0,ce.$s)(V),backoffCount:V+1};return yield W.storage.setThrottleMetadata(me),W.attemptFetch(T,me)}})()}}class zl{constructor(T,x,V,W,X){this.app=T,this._client=x,this._storageCache=V,this._storage=W,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Wn(E,T){const x=E.target.error||void 0;return Pn.create(T,{originalErrorMessage:x&&x?.message})}const ws="app_namespace_store";class nf{constructor(T,x,V,W=function O_(){return new Promise((E,T)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=V=>{T(Wn(V,"storage-open"))},x.onsuccess=V=>{E(V.target.result)},x.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(ws,{keyPath:"compositeKey"})}}catch(x){T(Pn.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=T,this.appName=x,this.namespace=V,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((W,X)=>{const Je=V.transaction([ws],"readonly").objectStore(ws),We=x.createCompositeKey(T);try{const et=Je.get(We);et.onerror=Vt=>{X(Wn(Vt,"storage-get"))},et.onsuccess=Vt=>{const Nt=Vt.target.result;W(Nt?Nt.value:void 0)}}catch(et){X(Pn.create("storage-get",{originalErrorMessage:et?.message}))}})})()}set(T,x){var V=this;return(0,O.Z)(function*(){const W=yield V.openDbPromise;return new Promise((X,me)=>{const We=W.transaction([ws],"readwrite").objectStore(ws),et=V.createCompositeKey(T);try{const Vt=We.put({compositeKey:et,value:x});Vt.onerror=Nt=>{me(Wn(Nt,"storage-set"))},Vt.onsuccess=()=>{X()}}catch(Vt){me(Pn.create("storage-set",{originalErrorMessage:Vt?.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const V=yield x.openDbPromise;return new Promise((W,X)=>{const Je=V.transaction([ws],"readwrite").objectStore(ws),We=x.createCompositeKey(T);try{const et=Je.delete(We);et.onerror=Vt=>{X(Wn(Vt,"storage-delete"))},et.onsuccess=()=>{W()}}catch(et){X(Pn.create("storage-delete",{originalErrorMessage:et?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Dn{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),X=yield x;X&&(T.lastFetchStatus=X);const me=yield V;me&&(T.lastSuccessfulFetchTimestampMillis=me);const Je=yield W;Je&&(T.activeConfig=Je)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function oi(){return Id.apply(this,arguments)}function Id(){return(Id=(0,O.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}let Vi,Mr;!function Bo(){(0,ie._registerComponent)(new _e.wA("remote-config",function E(T,{instanceIdentifier:x}){const V=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!(0,ce.hl)())throw Pn.create("indexed-db-unavailable");const{projectId:X,apiKey:me,appId:Je}=V.options;if(!X)throw Pn.create("registration-project-id");if(!me)throw Pn.create("registration-api-key");if(!Je)throw Pn.create("registration-app-id");const We=new nf(Je,V.name,x=x||"firebase"),et=new Dn(We),Vt=new pe.Yd(Sa);Vt.logLevel=pe.in.ERROR;const Nt=new Hl(W,ie.SDK_VERSION,x,X,me,Je),Nr=new Gl(Nt,We),hn=new $l(Nr,We,et,Vt),as=new zl(V,hn,et,We,Vt);return function Ed(E){const T=(0,ce.m9)(E);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(as),as},"PUBLIC").setMultipleInstances(!0)),(0,ie.registerVersion)(Sa,"0.4.4"),(0,ie.registerVersion)(Sa,"0.4.4","esm2017")}();const Pa=new WeakMap,Ci=new WeakMap,Tr=new WeakMap,jo=new WeakMap,Rt=new WeakMap;let Yl={get(E,T,x){if(E instanceof IDBTransaction){if("done"===T)return Ci.get(E);if("objectStoreNames"===T)return E.objectStoreNames||Tr.get(E);if("store"===T)return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return Ui(E[T])},set:(E,T,x)=>(E[T]=x,!0),has:(E,T)=>E instanceof IDBTransaction&&("done"===T||"store"===T)||T in E};function xu(E){return"function"==typeof E?function rf(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Au(){return Mr||(Mr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...T){return E.apply(Mu(this),T),Ui(Pa.get(this))}:function(...T){return Ui(E.apply(Mu(this),T))}:function(T,...x){const V=E.call(Mu(this),T,...x);return Tr.set(V,T.sort?T.sort():[T]),Ui(V)}}(E):(E instanceof IDBTransaction&&function Kl(E){if(Ci.has(E))return;const T=new Promise((x,V)=>{const W=()=>{E.removeEventListener("complete",X),E.removeEventListener("error",me),E.removeEventListener("abort",me)},X=()=>{x(),W()},me=()=>{V(E.error||new DOMException("AbortError","AbortError")),W()};E.addEventListener("complete",X),E.addEventListener("error",me),E.addEventListener("abort",me)});Ci.set(E,T)}(E),((E,T)=>T.some(x=>E instanceof x))(E,function Wl(){return Vi||(Vi=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Yl):E)}function Ui(E){if(E instanceof IDBRequest)return function Su(E){const T=new Promise((x,V)=>{const W=()=>{E.removeEventListener("success",X),E.removeEventListener("error",me)},X=()=>{x(Ui(E.result)),W()},me=()=>{V(E.error),W()};E.addEventListener("success",X),E.addEventListener("error",me)});return T.then(x=>{x instanceof IDBCursor&&Pa.set(x,E)}).catch(()=>{}),Rt.set(T,E),T}(E);if(jo.has(E))return jo.get(E);const T=xu(E);return T!==E&&(jo.set(E,T),Rt.set(T,E)),T}const Mu=E=>Rt.get(E);function Pe(E,T,{blocked:x,upgrade:V,blocking:W,terminated:X}={}){const me=indexedDB.open(E,T),Je=Ui(me);return V&&me.addEventListener("upgradeneeded",We=>{V(Ui(me.result),We.oldVersion,We.newVersion,Ui(me.transaction))}),x&&me.addEventListener("blocked",()=>x()),Je.then(We=>{X&&We.addEventListener("close",()=>X()),W&&We.addEventListener("versionchange",()=>W())}).catch(()=>{}),Je}function Xt(E,{blocked:T}={}){const x=indexedDB.deleteDatabase(E);return T&&x.addEventListener("blocked",()=>T()),Ui(x).then(()=>{})}const Ql=["get","getKey","getAll","getAllKeys","count"],Pu=["put","add","delete","clear"],Kn=new Map;function Ra(E,T){if(!(E instanceof IDBDatabase)||T in E||"string"!=typeof T)return;if(Kn.get(T))return Kn.get(T);const x=T.replace(/FromIndex$/,""),V=T!==x,W=Pu.includes(x);if(!(x in(V?IDBIndex:IDBObjectStore).prototype)||!W&&!Ql.includes(x))return;const X=function(){var me=(0,O.Z)(function*(Je,...We){const et=this.transaction(Je,W?"readwrite":"readonly");let Vt=et.store;return V&&(Vt=Vt.index(We.shift())),(yield Promise.all([Vt[x](...We),W&&et.done]))[0]});return function(We){return me.apply(this,arguments)}}();return Kn.set(T,X),X}!function Td(E){Yl=E(Yl)}(E=>({...E,get:(T,x,V)=>Ra(T,x)||E.get(T,x,V),has:(T,x)=>!!Ra(T,x)||E.has(T,x)}));const js="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",ka="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Dd="google.c.a.c_id",On="google.c.a.c_l",F_="google.c.a.ts",Jl="google.c.a.e";var zr=(()=>{return(E=zr||(zr={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",zr;var E})();function ui(E){const T=new Uint8Array(E);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function go(E){const x=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(x),W=new Uint8Array(V.length);for(let X=0;X<V.length;++X)W[X]=V.charCodeAt(X);return W}const li="fcm_token_details_db",Ad="fcm_token_object_Store";function Sd(E){return ku.apply(this,arguments)}function ku(){return ku=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(li))return null;let T=null;return(yield Pe(li,5,{upgrade:(V=(0,O.Z)(function*(W,X,me,Je){var We;if(X<2||!W.objectStoreNames.contains(Ad))return;const et=Je.objectStore(Ad),Vt=yield et.index("fcmSenderId").get(E);if(yield et.clear(),Vt)if(2===X){const Nt=Vt;if(!Nt.auth||!Nt.p256dh||!Nt.endpoint)return;T={token:Nt.fcmToken,createTime:null!==(We=Nt.createTime)&&void 0!==We?We:Date.now(),subscriptionOptions:{auth:Nt.auth,p256dh:Nt.p256dh,endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:"string"==typeof Nt.vapidKey?Nt.vapidKey:ui(Nt.vapidKey)}}}else if(3===X){const Nt=Vt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ui(Nt.auth),p256dh:ui(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ui(Nt.vapidKey)}}}else if(4===X){const Nt=Vt;T={token:Nt.fcmToken,createTime:Nt.createTime,subscriptionOptions:{auth:ui(Nt.auth),p256dh:ui(Nt.p256dh),endpoint:Nt.endpoint,swScope:Nt.swScope,vapidKey:ui(Nt.vapidKey)}}}}),function(X,me,Je,We){return V.apply(this,arguments)})})).close(),yield Xt(li),yield Xt("fcm_vapid_details_db"),yield Xt("undefined"),Oa(T)?T:null;var V}),ku.apply(this,arguments)}function Oa(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:T}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Xr="firebase-messaging-store";let Nu=null;function ec(){return Nu||(Nu=Pe("firebase-messaging-database",1,{upgrade:(E,T)=>{0===T&&E.createObjectStore(Xr)}})),Nu}function mo(E){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(E){const T=Md(E),V=yield(yield ec()).transaction(Xr).objectStore(Xr).get(T);if(V)return V;{const W=yield Sd(E.appConfig.senderId);if(W)return yield La(E,W),W}})).apply(this,arguments)}function La(E,T){return tc.apply(this,arguments)}function tc(){return(tc=(0,O.Z)(function*(E,T){const x=Md(E),W=(yield ec()).transaction(Xr,"readwrite");return yield W.objectStore(Xr).put(T,x),yield W.done,T})).apply(this,arguments)}function xd(E){return $s.apply(this,arguments)}function $s(){return($s=(0,O.Z)(function*(E){const T=Md(E),V=(yield ec()).transaction(Xr,"readwrite");yield V.objectStore(Xr).delete(T),yield V.done})).apply(this,arguments)}function Md({appConfig:E}){return E.appId}const dn=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _o(E,T){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,O.Z)(function*(E,T){const x=yield Va(E),V=yo(T),W={method:"POST",headers:x,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(Pd(E.appConfig),W)).json()}catch(me){throw dn.create("token-subscribe-failed",{errorInfo:me?.toString()})}if(X.error)throw dn.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function ag(E,T){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,O.Z)(function*(E,T){const x=yield Va(E),V=yo(T.subscriptionOptions),W={method:"PATCH",headers:x,body:JSON.stringify(V)};let X;try{X=yield(yield fetch(`${Pd(E.appConfig)}/${T.token}`,W)).json()}catch(me){throw dn.create("token-update-failed",{errorInfo:me?.toString()})}if(X.error)throw dn.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw dn.create("token-update-no-token");return X.token})).apply(this,arguments)}function sf(E,T){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,O.Z)(function*(E,T){const V={method:"DELETE",headers:yield Va(E)};try{const X=yield(yield fetch(`${Pd(E.appConfig)}/${T}`,V)).json();if(X.error)throw dn.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(W){throw dn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Pd({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Va(E){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,O.Z)(function*({appConfig:E,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function yo({p256dh:E,auth:T,endpoint:x,vapidKey:V}){const W={web:{endpoint:x,auth:T,p256dh:E}};return V!==ka&&(W.web.applicationPubKey=V),W}const Lu=6048e5;function Vu(E){return nc.apply(this,arguments)}function nc(){return(nc=(0,O.Z)(function*(E){const T=yield kd(E.swRegistration,E.vapidKey),x={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:T.endpoint,auth:ui(T.getKey("auth")),p256dh:ui(T.getKey("p256dh"))},V=yield mo(E.firebaseDependencies);if(V){if(uf(V.subscriptionOptions,x))return Date.now()>=V.createTime+Lu?Ho(E,{token:V.token,createTime:Date.now(),subscriptionOptions:x}):V.token;try{yield sf(E.firebaseDependencies,V.token)}catch(W){console.warn(W)}return Go(E.firebaseDependencies,x)}return Go(E.firebaseDependencies,x)})).apply(this,arguments)}function af(E){return rs.apply(this,arguments)}function rs(){return(rs=(0,O.Z)(function*(E){const T=yield mo(E.firebaseDependencies);T&&(yield sf(E.firebaseDependencies,T.token),yield xd(E.firebaseDependencies));const x=yield E.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Ho(E,T){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,O.Z)(function*(E,T){try{const x=yield ag(E.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield La(E.firebaseDependencies,V),x}catch(x){throw yield af(E),x}})).apply(this,arguments)}function Go(E,T){return vo.apply(this,arguments)}function vo(){return(vo=(0,O.Z)(function*(E,T){const V={token:yield _o(E,T),createTime:Date.now(),subscriptionOptions:T};return yield La(E,V),V.token})).apply(this,arguments)}function kd(E,T){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,O.Z)(function*(E,T){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:go(T)})})).apply(this,arguments)}function uf(E,T){return T.vapidKey===E.vapidKey&&T.endpoint===E.endpoint&&T.auth===E.auth&&T.p256dh===E.p256dh}function rc(E){const T={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Uu(E,T){if(!T.notification)return;E.notification={};const x=T.notification.title;x&&(E.notification.title=x);const V=T.notification.body;V&&(E.notification.body=V);const W=T.notification.image;W&&(E.notification.image=W);const X=T.notification.icon;X&&(E.notification.icon=X)}(T,E),function ic(E,T){!T.data||(E.data=T.data)}(T,E),function Bu(E,T){var x,V,W,X,me;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;E.fcmOptions={};const Je=null!==(W=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==W?W:null===(X=T.notification)||void 0===X?void 0:X.click_action;Je&&(E.fcmOptions.link=Je);const We=null===(me=T.fcmOptions)||void 0===me?void 0:me.analytics_label;We&&(E.fcmOptions.analyticsLabel=We)}(T,E),T}function Od(E){return"object"==typeof E&&!!E&&Dd in E}function zo(E,T){const x=[];for(let V=0;V<E.length;V++)x.push(E.charAt(V)),V<T.length&&x.push(T.charAt(V));return x.join("")}function sc(E){return dn.create("missing-app-config-values",{valueName:E})}zo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ba{constructor(T,x,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function lf(E){if(!E||!E.options)throw sc("App Configuration Object");if(!E.name)throw sc("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=E;for(const V of T)if(!x[V])throw sc(V);return{appName:E.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:x,analyticsProvider:V}}_delete(){return Promise.resolve()}}function cf(E){return is.apply(this,arguments)}function is(){return(is=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(js,{scope:Ii}),E.swRegistration.update().catch(()=>{})}catch(T){throw dn.create("failed-service-worker-registration",{browserErrorMessage:T?.message})}})).apply(this,arguments)}function Hs(E,T){return ci.apply(this,arguments)}function ci(){return(ci=(0,O.Z)(function*(E,T){if(!T&&!E.swRegistration&&(yield cf(E)),T||!E.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw dn.create("invalid-sw-registration");E.swRegistration=T}})).apply(this,arguments)}function oc(E,T){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(E,T){T?E.vapidKey=T:E.vapidKey||(E.vapidKey=ka)})).apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(E,T){if(!navigator)throw dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw dn.create("permission-blocked");return yield oc(E,T?.vapidKey),yield Hs(E,T?.serviceWorkerRegistration),Vu(E)})).apply(this,arguments)}function Bi(E,T,x){return $u.apply(this,arguments)}function $u(){return($u=(0,O.Z)(function*(E,T,x){const V=qo(T);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:x[Dd],message_name:x[On],message_time:x[F_],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qo(E){switch(E){case zr.NOTIFICATION_CLICKED:return"notification_open";case zr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function wo(){return(wo=(0,O.Z)(function*(E,T){const x=T.data;if(!x.isFirebaseMessaging)return;E.onMessageHandler&&x.messageType===zr.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(rc(x)):E.onMessageHandler.next(rc(x)));const V=x.data;Od(V)&&"1"===V[Jl]&&(yield Bi(E,x.messageType,V))})).apply(this,arguments)}const Ha="@firebase/messaging",Ga=E=>{const T=new Ba(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function $a(E,T){return wo.apply(this,arguments)}(T,x)),T},ac=E=>{const T=E.getProvider("messaging").getImmediate();return{getToken:V=>function ju(E,T){return ja.apply(this,arguments)}(T,V)}};function Zo(){return za.apply(this,arguments)}function za(){return(za=(0,O.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function df(){(0,ie._registerComponent)(new _e.wA("messaging",Ga,"PUBLIC")),(0,ie._registerComponent)(new _e.wA("messaging-internal",ac,"PRIVATE")),(0,ie.registerVersion)(Ha,"0.12.4"),(0,ie.registerVersion)(Ha,"0.12.4","esm2017")}();const qa="analytics",Za="firebase_id",Ld="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Es="https://www.googletagmanager.com/gtag/js",Fn=new pe.Yd("@firebase/analytics"),sr=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Hu(E){if(!E.startsWith(Es)){const T=sr.create("invalid-gtag-resource",{gtagURL:E});return Fn.warn(T.message),""}return E}function Ti(E){return Promise.all(E.map(T=>T.catch(x=>x)))}function Vd(E,T){const x=function cc(E,T){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(E,T)),x}("firebase-js-sdk-policy",{createScriptURL:Hu}),V=document.createElement("script"),W=`${Es}?l=${E}&id=${T}`;V.src=x?x?.createScriptURL(W):W,V.async=!0,document.head.appendChild(V)}function Ud(E,T,x,V,W,X){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,O.Z)(function*(E,T,x,V,W,X){const me=V[W];try{if(me)yield T[me];else{const We=(yield Ti(x)).find(et=>et.measurementId===W);We&&(yield T[We.appId])}}catch(Je){Fn.error(Je)}E("config",W,X)})).apply(this,arguments)}function L_(E,T,x,V,W){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,O.Z)(function*(E,T,x,V,W){try{let X=[];if(W&&W.send_to){let me=W.send_to;Array.isArray(me)||(me=[me]);const Je=yield Ti(x);for(const We of me){const et=Je.find(Nt=>Nt.measurementId===We),Vt=et&&T[et.appId];if(!Vt){X=[];break}X.push(Vt)}}0===X.length&&(X=Object.values(T)),yield Promise.all(X),E("event",V,W||{})}catch(X){Fn.error(X)}})).apply(this,arguments)}function ff(E){const T=window.document.getElementsByTagName("script");for(const x of Object.values(T))if(x.src&&x.src.includes(Es)&&x.src.includes(E))return x;return null}const or=new class V_{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function qu(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Di(E){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,O.Z)(function*(E){var T;const{appId:x,apiKey:V}=E,W={method:"GET",headers:qu(V)},X=Ld.replace("{app-id}",x),me=yield fetch(X,W);if(200!==me.status&&304!==me.status){let Je="";try{const We=yield me.json();null!==(T=We.error)&&void 0!==T&&T.message&&(Je=We.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:me.status,responseMessage:Je})}return me.json()})).apply(this,arguments)}function Zu(E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,O.Z)(function*(E,T=or,x){const{appId:V,apiKey:W,measurementId:X}=E.options;if(!V)throw sr.create("no-app-id");if(!W){if(X)return{measurementId:X,appId:V};throw sr.create("no-api-key")}const me=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Je=new jd;return setTimeout((0,O.Z)(function*(){Je.abort()}),void 0!==x?x:6e4),ji({appId:V,apiKey:W,measurementId:X},me,Je,T)})).apply(this,arguments)}function ji(E,T,x){return dc.apply(this,arguments)}function dc(){return(dc=(0,O.Z)(function*(E,{throttleEndTimeMillis:T,backoffCount:x},V,W=or){var X;const{appId:me,measurementId:Je}=E;try{yield Ka(V,T)}catch(We){if(Je)return Fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${We?.message}]`),{appId:me,measurementId:Je};throw We}try{const We=yield Di(E);return W.deleteThrottleMetadata(me),We}catch(We){const et=We;if(!Wu(et)){if(W.deleteThrottleMetadata(me),Je)return Fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Je} provided in the "measurementId" field in the local Firebase config. [${et?.message}]`),{appId:me,measurementId:Je};throw We}const Vt=503===Number(null===(X=et?.customData)||void 0===X?void 0:X.httpStatus)?(0,ce.$s)(x,W.intervalMillis,30):(0,ce.$s)(x,W.intervalMillis),Nt={throttleEndTimeMillis:Date.now()+Vt,backoffCount:x+1};return W.setThrottleMetadata(me,Nt),Fn.debug(`Calling attemptFetch again in ${Vt} millis`),ji(E,Nt,V,W)}})).apply(this,arguments)}function Ka(E,T){return new Promise((x,V)=>{const W=Math.max(T-Date.now(),0),X=setTimeout(x,W);E.addEventListener(()=>{clearTimeout(X),V(sr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Wu(E){if(!(E instanceof ce.ZR&&E.customData))return!1;const T=Number(E.customData.httpStatus);return 429===T||500===T||503===T||504===T}class jd{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let $d,Ya;function gf(){return(gf=(0,O.Z)(function*(E,T,x,V,W){if(W&&W.global)E("event",x,V);else{const X=yield T;E("event",x,Object.assign(Object.assign({},V),{send_to:X}))}})).apply(this,arguments)}function Qo(E){Ya=E}function pc(E){$d=E}function gn(){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,O.Z)(function*(){if(!(0,ce.hl)())return Fn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(E){return Fn.warn(sr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function hi(){return(hi=(0,O.Z)(function*(E,T,x,V,W,X,me){var Je;const We=Zu(E);We.then(hn=>{x[hn.measurementId]=hn.appId,E.options.measurementId&&hn.measurementId!==E.options.measurementId&&Fn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(hn=>Fn.error(hn)),T.push(We);const et=gn().then(hn=>{if(hn)return V.getId()}),[Vt,Nt]=yield Promise.all([We,et]);ff(X)||Vd(X,Vt.measurementId),Ya&&(W("consent","default",Ya),Qo(void 0)),W("js",new Date);const Nr=null!==(Je=me?.config)&&void 0!==Je?Je:{};return Nr.origin="firebase",Nr.update=!0,null!=Nt&&(Nr[Za]=Nt),W("config",Vt.measurementId,Nr),$d&&(W("set",$d),pc(void 0)),Vt.measurementId})).apply(this,arguments)}class Qa{constructor(T){this.app=T}_delete(){return delete fi[this.app.options.appId],Promise.resolve()}}let fi={},gc=[];const zd={};let Gn,ht,bs="dataLayer",Ja=!1;function mc(E,T,x){!function Xa(){const E=[];if((0,ce.ru)()&&E.push("This is a browser extension environment."),(0,ce.zI)()||E.push("Cookies are not available."),E.length>0){const T=E.map((V,W)=>`(${W+1}) ${V}`).join(" "),x=sr.create("invalid-analytics-context",{errorInfo:T});Fn.warn(x.message)}}();const V=E.options.appId;if(!V)throw sr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw sr.create("no-api-key");Fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=fi[V])throw sr.create("already-exists",{id:V});if(!Ja){!function mn(E){let T=[];Array.isArray(window[E])?T=window[E]:window[E]=T}(bs);const{wrappedGtag:X,gtagCore:me}=function cg(E,T,x,V,W){let X=function(...me){window[V].push(arguments)};return window[W]&&"function"==typeof window[W]&&(X=window[W]),window[W]=function lg(E,T,x,V){function X(){return(X=(0,O.Z)(function*(me,...Je){try{if("event"===me){const[We,et]=Je;yield L_(E,T,x,We,et)}else if("config"===me){const[We,et]=Je;yield Ud(E,T,x,V,We,et)}else if("consent"===me){const[We]=Je;E("consent","update",We)}else if("get"===me){const[We,et,Vt]=Je;E("get",We,et,Vt)}else if("set"===me){const[We]=Je;E("set",We)}else E(me,...Je)}catch(We){Fn.error(We)}})).apply(this,arguments)}return function W(me){return X.apply(this,arguments)}}(X,E,T,x),{gtagCore:X,wrappedGtag:window[W]}}(fi,gc,zd,bs,"gtag");ht=X,Gn=me,Ja=!0}return fi[V]=function fg(E,T,x,V,W,X,me){return hi.apply(this,arguments)}(E,gc,zd,T,Gn,bs,x),new Qa(E)}function bo(){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,O.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const vr="@firebase/analytics";!function vc(){(0,ie._registerComponent)(new _e.wA(qa,(T,{options:x})=>mc(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ie._registerComponent)(new _e.wA("analytics-internal",function E(T){try{const x=T.getProvider(qa).getImmediate();return{logEvent:(V,W,X)=>function pi(E,T,x,V){E=(0,ce.m9)(E),function dg(E,T,x,V,W){return gf.apply(this,arguments)}(ht,fi[E.app.options.appId],T,x,V).catch(W=>Fn.error(W))}(x,V,W,X)}}catch(x){throw sr.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ie.registerVersion)(vr,"0.10.0"),(0,ie.registerVersion)(vr,"0.10.0","esm2017")}();var Rr=U(4408),Ju=U(7565);const wc=new class _f extends Ju.v{}(class Xo extends Rr.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,x,V):(T.flush(this),0)}});var yf=U(4986),tu=U(9751),Xu=U(8505),Ks=U(5363),Co=U(9468);const nu=new u.GfV("7.6.1"),el="__angularfire_symbol__analyticsIsSupportedValue",ea="__angularfire_symbol__analyticsIsSupported",bc="__angularfire_symbol__remoteConfigIsSupportedValue",ta="__angularfire_symbol__remoteConfigIsSupported",Cc="__angularfire_symbol__messagingIsSupportedValue",na="__angularfire_symbol__messagingIsSupported";function ia(E,T,x){if(T){if(1===T.length)return T[0];const X=T.filter(me=>me.app===x);if(1===X.length)return X[0]}return x.container.getProvider(E).getImmediate({optional:!0})}globalThis[ea]||(globalThis[ea]=bo().then(E=>globalThis[el]=E).catch(()=>globalThis[el]=!1)),globalThis[na]||(globalThis[na]=Zo().then(E=>globalThis[Cc]=E).catch(()=>globalThis[Cc]=!1)),globalThis[ta]||(globalThis[ta]=oi().then(E=>globalThis[bc]=E).catch(()=>globalThis[bc]=!1));const Zd=(E,T)=>{const x=T?[T]:(0,$.C6)(),V=[];return x.forEach(W=>{W.container.getProvider(E).instances.forEach(me=>{V.includes(me)||V.push(me)})}),V};function Ys(){}class Ic{constructor(T,x=wc){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,V){const W=this.zone;return this.delegate.schedule(function(me){W.runGuarded(()=>{T.apply(this,[me])})},x,V)}}class vf{constructor(T){this.zone=T,this.task=null}call(T,x){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ys,{},Ys,Ys)),x.pipe((0,Xu.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let nl=(()=>{class E{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Ic(Zone.current)),this.insideAngular=x.run(()=>new Ic(Zone.current,yf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(x){return new(x||E)(u.LFG(u.R0b))},E.\u0275prov=u.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Yn(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function As(E){return Yn().ngZone.runOutsideAngular(()=>E())}function ss(E){return Yn().ngZone.run(()=>E())}function wf(E){return E.pipe((0,Ks.Q)(Yn().outsideAngular))}function os(E){return Yn(),function kr(E){return function(x){return(x=x.lift(new vf(E.ngZone))).pipe((0,Co.R)(E.outsideAngular),(0,Ks.Q)(E.insideAngular))}}(Yn())(E)}const Tc=(E,T)=>function(){const V=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),ss(()=>E.apply(void 0,V))},sa=(E,T)=>function(){let x;const V=arguments;for(let X=0;X<arguments.length;X++)"function"==typeof V[X]&&(T&&(x||(x=ss(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ys,{},Ys,Ys)))),V[X]=Tc(V[X],x));const W=As(()=>E.apply(this,V));if(!T){if(W instanceof tu.y){const X=Yn();return W.pipe((0,Co.R)(X.outsideAngular),(0,Ks.Q)(X.insideAngular))}return ss(()=>W)}return W instanceof tu.y?W.pipe(os):W instanceof Promise?ss(()=>new Promise((X,me)=>W.then(Je=>ss(()=>X(Je)),Je=>ss(()=>me(Je))))):"function"==typeof W&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),W.apply(this,arguments)}:ss(()=>W)}},1389:(bt,Ne,U)=>{U.d(Ne,{$:()=>js,A:()=>z,D:()=>ke,I:()=>Tn,J:()=>vs,L:()=>ns,N:()=>yr,P:()=>fg,Q:()=>nf,R:()=>di,U:()=>po,V:()=>oi,W:()=>Id,X:()=>ql,Y:()=>Wl,Z:()=>Au,_:()=>Rt,a:()=>qs,a0:()=>ka,a1:()=>Dd,a2:()=>ai,a3:()=>Ad,a4:()=>ku,a5:()=>Xl,a6:()=>Xr,a7:()=>ec,a8:()=>Fa,a9:()=>tc,aA:()=>le,aB:()=>ea,aC:()=>er,aD:()=>jr,aE:()=>Xu,aF:()=>qd,aG:()=>Ts,aH:()=>Hn,aL:()=>Zs,aO:()=>Vi,aa:()=>xd,ab:()=>Md,ac:()=>og,ad:()=>ag,ae:()=>sf,af:()=>Pd,ai:()=>Lu,aj:()=>nc,ak:()=>af,an:()=>rf,ao:()=>Uu,aq:()=>Gs,ar:()=>Ha,as:()=>St,at:()=>Ce,au:()=>be,av:()=>Se,aw:()=>Nt,ax:()=>na,ay:()=>tt,az:()=>Ie,b:()=>Fd,c:()=>ht,d:()=>mc,e:()=>ar,f:()=>vr,g:()=>_f,h:()=>Rr,i:()=>pf,j:()=>yf,k:()=>us,l:()=>Hd,m:()=>aa,p:()=>ve,r:()=>Yu,s:()=>mf,u:()=>gn});var u=U(5861),$=U(2090),O=U(6881),ie=U(7582),ce=U(1877),_e=U(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},z={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},De=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ye=new ce.Yd("@firebase/auth");function pt(v,...p){ye.logLevel<=ce.in.ERROR&&ye.error(`Auth (${O.SDK_VERSION}): ${v}`,...p)}function Se(v,...p){throw qe(v,...p)}function Ie(v,...p){return qe(v,...p)}function xe(v,p,m){const b=Object.assign(Object.assign({},De()),{[p]:m});return new $.LL("auth","Firebase",b).create(p,{appName:v.name})}function ze(v,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Se(v,"argument-error"),xe(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qe(v,...p){if("string"!=typeof v){const m=p[0],b=[...p.slice(1)];return b[0]&&(b[0].appName=v.name),v._errorFactory.create(m,...b)}return it.create(v,...p)}function le(v,p,...m){if(!v)throw qe(p,...m)}function Qe(v){const p="INTERNAL ASSERTION FAILED: "+v;throw pt(p),new Error(p)}function St(v,p){v||Qe(p)}function gt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function zt(){return"http:"===ct()||"https:"===ct()}function ct(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class ii{constructor(p,m){this.shortDelay=p,this.longDelay=m,St(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Xi(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(zt()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function es(v,p){St(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class se{static initialize(p,m,b){this.fetchImpl=p,m&&(this.headersImpl=m),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const te={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ae=new ii(3e4,6e4);function he(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Re(v,p,m,b){return Me.apply(this,arguments)}function Me(){return(Me=(0,u.Z)(function*(v,p,m,b,M={}){return ut(v,M,(0,u.Z)(function*(){let k={},Q={};b&&("GET"===p?Q=b:k={body:JSON.stringify(b)});const de=(0,$.xO)(Object.assign({key:v.config.apiKey},Q)).slice(1),Ge=yield v._getAdditionalHeaders();return Ge["Content-Type"]="application/json",v.languageCode&&(Ge["X-Firebase-Locale"]=v.languageCode),se.fetch()(rn(v,v.config.apiHost,m,de),Object.assign({method:p,headers:Ge,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function ut(v,p,m){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,u.Z)(function*(v,p,m){v._canInitEmulator=!1;const b=Object.assign(Object.assign({},te),p);try{const M=new Rn(v),k=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Q=yield k.json();if("needConfirmation"in Q)throw fn(v,"account-exists-with-different-credential",Q);if(k.ok&&!("errorMessage"in Q))return Q;{const de=k.ok?Q.errorMessage:Q.error.message,[Ge,nt]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ge)throw fn(v,"credential-already-in-use",Q);if("EMAIL_EXISTS"===Ge)throw fn(v,"email-already-in-use",Q);if("USER_DISABLED"===Ge)throw fn(v,"user-disabled",Q);const vt=b[Ge]||Ge.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw xe(v,vt,nt);Se(v,vt)}}catch(M){if(M instanceof $.ZR)throw M;Se(v,"network-request-failed",{message:String(M)})}})).apply(this,arguments)}function en(v,p,m,b){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(function*(v,p,m,b,M={}){const k=yield Re(v,p,m,b,M);return"mfaPendingCredential"in k&&Se(v,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function rn(v,p,m,b){const M=`${p}${m}?${b}`;return v.config.emulator?es(v.config,M):`${v.config.apiScheme}://${M}`}class Rn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,b)=>{this.timer=setTimeout(()=>b(Ie(this.auth,"network-request-failed")),Ae.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fn(v,p,m){const b={appName:v.name};m.email&&(b.email=m.email),m.phoneNumber&&(b.phoneNumber=m.phoneNumber);const M=Ie(v,p,b);return M.customData._tokenResponse=m,M}function xn(){return(xn=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Bn(v,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wi(v,p){return lt.apply(this,arguments)}function lt(){return(lt=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function mr(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Fi(){return(Fi=(0,u.Z)(function*(v,p=!1){const m=(0,$.m9)(v),b=yield m.getIdToken(p),M=Nn(b);le(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const k="object"==typeof M.firebase?M.firebase:void 0,Q=k?.sign_in_provider;return{claims:M,token:b,authTime:mr(Yr(M.auth_time)),issuedAtTime:mr(Yr(M.iat)),expirationTime:mr(Yr(M.exp)),signInProvider:Q||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function Yr(v){return 1e3*Number(v)}function Nn(v){const[p,m,b]=v.split(".");if(void 0===p||void 0===m||void 0===b)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,$.tV)(m);return M?JSON.parse(M):(pt("Failed to decode base64 JWT payload"),null)}catch(M){return pt("Caught error parsing JWT payload as JSON",M?.toString()),null}}function qt(v,p){return dt.apply(this,arguments)}function dt(){return(dt=(0,u.Z)(function*(v,p,m=!1){if(m)return p;try{return yield p}catch(b){throw b instanceof $.ZR&&It(b)&&v.auth.currentUser===v&&(yield v.auth.signOut()),b}})).apply(this,arguments)}function It({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class tn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const b=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield m.iteration()}),b)}iteration(){var p=this;return(0,u.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Qr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function _r(v){return rr.apply(this,arguments)}function rr(){return(rr=(0,u.Z)(function*(v){var p;const m=v.auth,b=yield v.getIdToken(),M=yield qt(v,wi(m,{idToken:b}));le(M?.users.length,m,"internal-error");const k=M.users[0];v._notifyReloadListener(k);const Q=null!==(p=k.providerUserInfo)&&void 0!==p&&p.length?ts(k.providerUserInfo):[],de=Zt(v.providerData,Q),vt=!!v.isAnonymous&&!(v.email&&k.passwordHash||de?.length),an={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:de,metadata:new Qr(k.createdAt,k.lastLoginAt),isAnonymous:vt};Object.assign(v,an)})).apply(this,arguments)}function Zn(){return(Zn=(0,u.Z)(function*(v){const p=(0,$.m9)(v);yield _r(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Zt(v,p){return[...v.filter(b=>!p.some(M=>M.providerId===b.providerId)),...p]}function ts(v){return v.map(p=>{var{providerId:m}=p,b=(0,ie._T)(p,["providerId"]);return{providerId:m,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function jn(){return(jn=(0,u.Z)(function*(v,p){const m=yield ut(v,{},(0,u.Z)(function*(){const b=(0,$.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:M,apiKey:k}=v.config,Q=rn(v,M,"/v1/token",`key=${k}`),de=yield v._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(Q,{method:"POST",headers:de,body:b})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class bn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){le(p.idToken,"internal-error"),le(typeof p.idToken<"u","internal-error"),le(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function Mn(v){const p=Nn(v);return le(p,"internal-error"),le(typeof p.exp<"u","internal-error"),le(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var b=this;return(0,u.Z)(function*(){return le(!b.accessToken||b.refreshToken,p,"user-token-expired"),m||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(p,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var b=this;return(0,u.Z)(function*(){const{accessToken:M,refreshToken:k,expiresIn:Q}=yield function sn(v,p){return jn.apply(this,arguments)}(p,m);b.updateTokensAndExpiration(M,k,Number(Q))})()}updateTokensAndExpiration(p,m,b){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(p,m){const{refreshToken:b,accessToken:M,expirationTime:k}=m,Q=new bn;return b&&(le("string"==typeof b,"internal-error",{appName:p}),Q.refreshToken=b),M&&(le("string"==typeof M,"internal-error",{appName:p}),Q.accessToken=M),k&&(le("number"==typeof k,"internal-error",{appName:p}),Q.expirationTime=k),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new bn,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Xn(v,p){le("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class kn{constructor(p){var{uid:m,auth:b,stsTokenManager:M}=p,k=(0,ie._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Qr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,u.Z)(function*(){const b=yield qt(m,m.stsTokenManager.getToken(m.auth,p));return le(b,m.auth,"internal-error"),m.accessToken!==b&&(m.accessToken=b,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),b})()}getIdTokenResult(p){return function qn(v){return Fi.apply(this,arguments)}(this,p)}reload(){return function xt(v){return Zn.apply(this,arguments)}(this)}_assign(p){this!==p&&(le(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const m=new kn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return m.metadata._copy(this.metadata),m}_onReload(p){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var b=this;return(0,u.Z)(function*(){let M=!1;p.idToken&&p.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(p),M=!0),m&&(yield _r(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var p=this;return(0,u.Z)(function*(){const m=yield p.getIdToken();return yield qt(p,function Qn(v,p){return xn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var b,M,k,Q,de,Ge,nt,vt;const an=null!==(b=m.displayName)&&void 0!==b?b:void 0,$i=null!==(M=m.email)&&void 0!==M?M:void 0,ua=null!==(k=m.phoneNumber)&&void 0!==k?k:void 0,il=null!==(Q=m.photoURL)&&void 0!==Q?Q:void 0,Cf=null!==(de=m.tenantId)&&void 0!==de?de:void 0,sl=null!==(Ge=m._redirectEventId)&&void 0!==Ge?Ge:void 0,Jd=null!==(nt=m.createdAt)&&void 0!==nt?nt:void 0,If=null!==(vt=m.lastLoginAt)&&void 0!==vt?vt:void 0,{uid:Pc,emailVerified:Tf,isAnonymous:yg,providerData:Io,stsTokenManager:ru}=m;le(Pc&&ru,p,"internal-error");const iu=bn.fromJSON(this.name,ru);le("string"==typeof Pc,p,"internal-error"),Xn(an,p.name),Xn($i,p.name),le("boolean"==typeof Tf,p,"internal-error"),le("boolean"==typeof yg,p,"internal-error"),Xn(ua,p.name),Xn(il,p.name),Xn(Cf,p.name),Xn(sl,p.name),Xn(Jd,p.name),Xn(If,p.name);const Xd=new kn({uid:Pc,auth:p,email:$i,emailVerified:Tf,displayName:an,isAnonymous:yg,photoURL:il,phoneNumber:ua,tenantId:Cf,stsTokenManager:iu,createdAt:Jd,lastLoginAt:If});return Io&&Array.isArray(Io)&&(Xd.providerData=Io.map(U_=>Object.assign({},U_))),sl&&(Xd._redirectEventId=sl),Xd}static _fromIdTokenResponse(p,m,b=!1){return(0,u.Z)(function*(){const M=new bn;M.updateFromServerResponse(m);const k=new kn({uid:m.localId,auth:p,stsTokenManager:M,isAnonymous:b});return yield _r(k),k})()}}const Jr=new Map;function er(v){St(v instanceof Function,"Expected a class definition");let p=Jr.get(v);return p?(St(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,Jr.set(v,p),p)}const yr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(m,b){var M=this;return(0,u.Z)(function*(){M.storage[m]=b})()}_get(m){var b=this;return(0,u.Z)(function*(){const M=b.storage[m];return void 0===M?null:M})()}_remove(m){var b=this;return(0,u.Z)(function*(){delete b.storage[m]})()}_addListener(m,b){}_removeListener(m,b){}}return v.type="NONE",v})();function jr(v,p,m){return`firebase:${v}:${p}:${m}`}class G{constructor(p,m,b){this.persistence=p,this.auth=m,this.userKey=b;const{config:M,name:k}=this.auth;this.fullUserKey=jr(this.userKey,M.apiKey,k),this.fullPersistenceKey=jr("persistence",M.apiKey,k),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?kn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,u.Z)(function*(){if(m.persistence===p)return;const b=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,b?m.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,b="authUser"){return(0,u.Z)(function*(){if(!m.length)return new G(er(yr),p,b);const M=(yield Promise.all(m.map(function(){var nt=(0,u.Z)(function*(vt){if(yield vt._isAvailable())return vt});return function(vt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let k=M[0]||er(yr);const Q=jr(b,p.config.apiKey,p.name);let de=null;for(const nt of m)try{const vt=yield nt._get(Q);if(vt){const an=kn._fromJSON(p,vt);nt!==k&&(de=an),k=nt;break}}catch{}const Ge=M.filter(nt=>nt._shouldAllowMigration);return k._shouldAllowMigration&&Ge.length?(k=Ge[0],de&&(yield k._set(Q,de.toJSON())),yield Promise.all(m.map(function(){var nt=(0,u.Z)(function*(vt){if(vt!==k)try{yield vt._remove(Q)}catch{}});return function(vt){return nt.apply(this,arguments)}}())),new G(k,p,b)):new G(k,p,b)})()}}function H(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Y(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(F(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ke(p))return"Blackberry";if(mt(p))return"Webos";if(N(p))return"Safari";if((p.includes("chrome/")||R(p))&&!p.includes("edge/"))return"Chrome";if(be(p))return"Android";{const b=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===b?.length)return b[1]}return"Other"}function F(v=(0,$.z$)()){return/firefox\//i.test(v)}function N(v=(0,$.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function R(v=(0,$.z$)()){return/crios\//i.test(v)}function Y(v=(0,$.z$)()){return/iemobile/i.test(v)}function be(v=(0,$.z$)()){return/android/i.test(v)}function Ke(v=(0,$.z$)()){return/blackberry/i.test(v)}function mt(v=(0,$.z$)()){return/webos/i.test(v)}function Ce(v=(0,$.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function tt(v=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Lt(v=(0,$.z$)()){return Ce(v)||be(v)||mt(v)||Ke(v)||/windows phone/i.test(v)||Y(v)}function $r(v,p=[]){let m;switch(v){case"Browser":m=H((0,$.z$)());break;case"Worker":m=`${H((0,$.z$)())}-${v}`;break;default:m=v}const b=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${b}`}function re(){return(re=(0,u.Z)(function*(v){return(yield Re(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(v,p){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,u.Z)(function*(v,p){return Re(v,"GET","/v2/recaptchaConfig",he(v,p))})).apply(this,arguments)}function Mt(v){return void 0!==v&&void 0!==v.getResponse}function $t(v){return void 0!==v&&void 0!==v.enterprise}class pn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(m=>"EMAIL_PASSWORD_PROVIDER"===m.provider&&"OFF"!==m.enforcementState)}}function Jt(v){return new Promise((p,m)=>{const b=document.createElement("script");b.setAttribute("src",v),b.onload=p,b.onerror=M=>{const k=Ie("internal-error");k.customData=M,m(k)},b.type="text/javascript",b.charset="UTF-8",function $n(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(b)})}function Hr(v){return`__${v}${Math.floor(1e6*Math.random())}`}class Ia{constructor(p){this.type="recaptcha-enterprise",this.auth=Hn(p)}verify(p="verify",m=!1){var b=this;return(0,u.Z)(function*(){function k(){return k=(0,u.Z)(function*(de){if(!m){if(null==de.tenantId&&null!=de._agentRecaptchaConfig)return de._agentRecaptchaConfig.siteKey;if(null!=de.tenantId&&void 0!==de._tenantRecaptchaConfigs[de.tenantId])return de._tenantRecaptchaConfigs[de.tenantId].siteKey}return new Promise(function(){var Ge=(0,u.Z)(function*(nt,vt){Le(de,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(an=>{if(void 0!==an.recaptchaKey){const $i=new pn(an);return null==de.tenantId?de._agentRecaptchaConfig=$i:de._tenantRecaptchaConfigs[de.tenantId]=$i,nt($i.siteKey)}vt(new Error("recaptcha Enterprise site key undefined"))}).catch(an=>{vt(an)})});return function(nt,vt){return Ge.apply(this,arguments)}}())}),k.apply(this,arguments)}function Q(de,Ge,nt){const vt=window.grecaptcha;$t(vt)?vt.enterprise.ready(()=>{vt.enterprise.execute(de,{action:p}).then(an=>{Ge(an)}).catch(()=>{Ge("NO_RECAPTCHA")})}):nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((de,Ge)=>{(function M(de){return k.apply(this,arguments)})(b.auth).then(nt=>{if(!m&&$t(window.grecaptcha))Q(nt,de,Ge);else{if(typeof window>"u")return void Ge(new Error("RecaptchaVerifier is only supported in browser"));Jt("https://www.google.com/recaptcha/enterprise.js?render="+nt).then(()=>{Q(nt,de,Ge)}).catch(vt=>{Ge(vt)})}}).catch(nt=>{Ge(nt)})})})()}}function cn(v,p,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,u.Z)(function*(v,p,m,b=!1){const M=new Ia(v);let k;try{k=yield M.verify(m)}catch{k=yield M.verify(m,!0)}const Q=Object.assign({},p);return Object.assign(Q,b?{captchaResp:k}:{captchaResponse:k}),Object.assign(Q,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Q,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Q})).apply(this,arguments)}class pd{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const b=k=>new Promise((Q,de)=>{try{Q(p(k))}catch(Ge){de(Ge)}});b.onAbort=m,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,u.Z)(function*(){if(m.auth.currentUser===p)return;const b=[];try{for(const M of m.queue)yield M(p),M.onAbort&&b.push(M.onAbort)}catch(M){b.reverse();for(const k of b)try{k()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class lo{constructor(p,m,b,M){this.app=p,this.heartbeatServiceProvider=m,this.appCheckServiceProvider=b,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ys(this),this.idTokenSubscription=new ys(this),this.beforeStateQueue=new pd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(p,m){var b=this;return m&&(this._popupRedirectResolver=er(m)),this._initializationPromise=this.queue((0,u.Z)(function*(){var M,k;if(!b._deleted&&(b.persistenceManager=yield G.create(b,p),!b._deleted)){if(null!==(M=b._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch{}yield b.initializeCurrentUser(m),b.lastNotifiedUid=(null===(k=b.currentUser)||void 0===k?void 0:k.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,u.Z)(function*(){var b;const M=yield m.assertedPersistence.getCurrentUser();let k=M,Q=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const de=null===(b=m.redirectUser)||void 0===b?void 0:b._redirectEventId,Ge=k?._redirectEventId,nt=yield m.tryRedirectSignIn(p);(!de||de===Ge)&&nt?.user&&(k=nt.user,Q=!0)}if(!k)return m.directlySetCurrentUser(null);if(!k._redirectEventId){if(Q)try{yield m.beforeStateQueue.runMiddleware(k)}catch(de){k=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(de))}return k?m.reloadAndSetCurrentUserOrClear(k):m.directlySetCurrentUser(null)}return le(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===k._redirectEventId?m.directlySetCurrentUser(k):m.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(p){var m=this;return(0,u.Z)(function*(){let b=null;try{b=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,u.Z)(function*(){try{yield _r(p)}catch(b){if("auth/network-request-failed"!==b?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function pr(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,u.Z)(function*(){const b=p?(0,$.m9)(p):null;return b&&le(b.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(b&&b._clone(m))})()}_updateCurrentUser(p,m=!1){var b=this;return(0,u.Z)(function*(){if(!b._deleted)return p&&le(b.tenantId===p.tenantId,b,"tenant-id-mismatch"),m||(yield b.beforeStateQueue.runMiddleware(p)),b.queue((0,u.Z)(function*(){yield b.directlySetCurrentUser(p),b.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,u.Z)(function*(){yield m.assertedPersistence.setPersistence(er(p))}))}initializeRecaptchaConfig(){var p=this;return(0,u.Z)(function*(){const m=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),b=new pn(m);null==p.tenantId?p._agentRecaptchaConfig=b:p._tenantRecaptchaConfigs[p.tenantId]=b,b.emailPasswordEnabled&&new Ia(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new $.LL("auth","Firebase",p())}onAuthStateChanged(p,m,b){return this.registerStateListener(this.authStateSubscription,p,m,b)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,b){return this.registerStateListener(this.idTokenSubscription,p,m,b)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var b=this;return(0,u.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(m);return null===p?M.removeCurrentUser():M.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,u.Z)(function*(){if(!m.redirectPersistenceManager){const b=p&&er(p)||m._popupRedirectResolver;le(b,m,"argument-error"),m.redirectPersistenceManager=yield G.create(m,[er(b._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,u.Z)(function*(){var b,M;return m._isInitialized&&(yield m.queue((0,u.Z)(function*(){}))),(null===(b=m._currentUser)||void 0===b?void 0:b._redirectEventId)===p?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,u.Z)(function*(){if(p===m.currentUser)return m.queue((0,u.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,b,M){if(this._deleted)return()=>{};const k="function"==typeof m?m:m.next.bind(m),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return le(Q,this,"internal-error"),Q.then(()=>k(this.currentUser)),"function"==typeof m?p.addObserver(m,b,M):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,u.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,u.Z)(function*(){var m;const b={"X-Client-Version":p.clientVersion};p.app.options.appId&&(b["X-Firebase-gmpid"]=p.app.options.appId);const M=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();M&&(b["X-Firebase-Client"]=M);const k=yield p._getAppCheckToken();return k&&(b["X-Firebase-AppCheck"]=k),b})()}_getAppCheckToken(){var p=this;return(0,u.Z)(function*(){var m;const b=yield null===(m=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getToken();return b?.error&&function yt(v,...p){ye.logLevel<=ce.in.WARN&&ye.warn(`Auth (${O.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${b.error}`),b?.token})()}}function Hn(v){return(0,$.m9)(v)}class ys{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,$.ne)(m=>this.observer=m)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Tn(v,p,m){const b=Hn(v);le(b._canInitEmulator,b,"emulator-config-failed"),le(/^https?:\/\//.test(p),b,"invalid-emulator-scheme");const M=!!m?.disableWarnings,k=gd(p),{host:Q,port:de}=function Ir(v){const p=gd(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!m)return{host:"",port:null};const b=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const k=M[1];return{host:k,port:Gr(b.substr(k.length+1))}}{const[k,Q]=b.split(":");return{host:k,port:Gr(Q)}}}(p);b.config.emulator={url:`${k}//${Q}${null===de?"":`:${de}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:Q,port:de,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Da(){function v(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function gd(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Gr(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class vs{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Qe("not implemented")}_getIdTokenResponse(p){return Qe("not implemented")}_linkToIdToken(p,m){return Qe("not implemented")}_getReauthenticationResolver(p){return Qe("not implemented")}}function Aa(v,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:resetPassword",he(v,p))})).apply(this,arguments)}function Sa(v,p){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function md(v,p){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:update",he(v,p))})).apply(this,arguments)}function Xh(v,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPassword",he(v,p))})).apply(this,arguments)}function Ul(v,p){return _d.apply(this,arguments)}function _d(){return(_d=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:sendOobCode",he(v,p))})).apply(this,arguments)}function rg(v,p){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,u.Z)(function*(v,p){return Ul(v,p)})).apply(this,arguments)}function yd(v,p){return bu.apply(this,arguments)}function bu(){return(bu=(0,u.Z)(function*(v,p){return Ul(v,p)})).apply(this,arguments)}function ef(v,p){return vd.apply(this,arguments)}function vd(){return(vd=(0,u.Z)(function*(v,p){return Ul(v,p)})).apply(this,arguments)}function wd(v,p){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,u.Z)(function*(v,p){return Ul(v,p)})).apply(this,arguments)}function Cu(){return(Cu=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",he(v,p))})).apply(this,arguments)}function Iu(){return(Iu=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithEmailLink",he(v,p))})).apply(this,arguments)}class jl extends vs{constructor(p,m,b,M=null){super("password",b),this._email=p,this._password=m,this._tenantId=M}static _fromEmailAndPassword(p,m){return new jl(p,m,"password")}static _fromEmailAndCode(p,m,b=null){return new jl(p,m,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,u.Z)(function*(){var b;switch(m.signInMethod){case"password":const M={returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const k=yield cn(p,M,"signInWithPassword");return Xh(p,k)}return Xh(p,M).catch(function(){var k=(0,u.Z)(function*(Q){if("auth/missing-recaptcha-token"===Q.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const de=yield cn(p,M,"signInWithPassword");return Xh(p,de)}return Promise.reject(Q)});return function(Q){return k.apply(this,arguments)}}());case"emailLink":return function ig(v,p){return Cu.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,m){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return Sa(p,{idToken:m,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function tf(v,p){return Iu.apply(this,arguments)}(p,{idToken:m,email:b._email,oobCode:b._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function ho(v,p){return xa.apply(this,arguments)}function xa(){return(xa=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithIdp",he(v,p))})).apply(this,arguments)}class ns extends vs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new ns(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Se("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M}=m,k=(0,ie._T)(m,["providerId","signInMethod"]);if(!b||!M)return null;const Q=new ns(b,M);return Q.idToken=k.idToken||void 0,Q.accessToken=k.accessToken||void 0,Q.secret=k.secret,Q.nonce=k.nonce,Q.pendingToken=k.pendingToken||null,Q}_getIdTokenResponse(p){return ho(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,ho(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ho(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,$.xO)(m)}return p}}function $l(v,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:sendVerificationCode",he(v,p))})).apply(this,arguments)}function Ma(){return(Ma=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",he(v,p))})).apply(this,arguments)}function Gl(){return(Gl=(0,u.Z)(function*(v,p){const m=yield en(v,"POST","/v1/accounts:signInWithPhoneNumber",he(v,p));if(m.temporaryProof)throw fn(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Cd={USER_NOT_FOUND:"user-not-found"};function zl(){return(zl=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithPhoneNumber",he(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Cd)})).apply(this,arguments)}class Wn extends vs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Wn({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Wn({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Hl(v,p){return Ma.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function bd(v,p){return Gl.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Du(v,p){return zl.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:b,verificationCode:M}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:b,code:M}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:b,phoneNumber:M,temporaryProof:k}=p;return b||m||M||k?new Wn({verificationId:m,verificationCode:b,phoneNumber:M,temporaryProof:k}):null}}class Bs{constructor(p){var m,b,M,k,Q,de;const Ge=(0,$.zd)((0,$.pd)(p)),nt=null!==(m=Ge.apiKey)&&void 0!==m?m:null,vt=null!==(b=Ge.oobCode)&&void 0!==b?b:null,an=function ws(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ge.mode)&&void 0!==M?M:null);le(nt&&vt&&an,"argument-error"),this.apiKey=nt,this.operation=an,this.code=vt,this.continueUrl=null!==(k=Ge.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(Q=Ge.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(de=Ge.tenantId)&&void 0!==de?de:null}static parseLink(p){const m=function sg(v){const p=(0,$.zd)((0,$.pd)(v)).link,m=p?(0,$.zd)((0,$.pd)(p)).deep_link_id:null,b=(0,$.zd)((0,$.pd)(v)).deep_link_id;return(b?(0,$.zd)((0,$.pd)(b)).link:null)||b||m||p||v}(p);try{return new Bs(m)}catch{return null}}}let nf=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,b){return jl._fromEmailAndPassword(m,b)}static credentialWithLink(m,b){const M=Bs.parseLink(b);return le(M,"argument-error"),jl._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Dn{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Bo extends Dn{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ql extends Bo{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return le("providerId"in m&&"signInMethod"in m,"argument-error"),ns._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return le(p.idToken||p.accessToken,"argument-error"),ns._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ql.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ql.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:k,nonce:Q,providerId:de}=p;if(!b&&!M&&!m&&!k||!de)return null;try{return new ql(de)._credential({idToken:m,accessToken:b,nonce:Q,pendingToken:k})}catch{return null}}}let po=(()=>{class v extends Bo{constructor(){super("facebook.com")}static credential(m){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),oi=(()=>{class v extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,b){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:b,oauthAccessToken:M}=m;if(!b&&!M)return null;try{return v.credential(b,M)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Id=(()=>{class v extends Bo{constructor(){super("github.com")}static credential(m){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Vi extends vs{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return ho(p,this.buildRequest())}_linkToIdToken(p,m){const b=this.buildRequest();return b.idToken=m,ho(p,b)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,ho(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:b,signInMethod:M,pendingToken:k}=m;return b&&M&&k&&b===M?new Vi(b,k):null}static _create(p,m){return new Vi(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Wl extends Dn{constructor(p){le(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Wl.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Wl.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Vi.fromJSON(p);return le(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:b}=p;if(!m||!b)return null;try{return Vi._create(b,m)}catch{return null}}}let Au=(()=>{class v extends Bo{constructor(){super("twitter.com")}static credential(m,b){return ns._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:b})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=m;if(!b||!M)return null;try{return v.credential(b,M)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Pa(v,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signUp",he(v,p))})).apply(this,arguments)}class Tr{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,b,M=!1){return(0,u.Z)(function*(){const k=yield kn._fromIdTokenResponse(p,b,M),Q=jo(b);return new Tr({user:k,providerId:Q,_tokenResponse:b,operationType:m})})()}static _forOperation(p,m,b){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(b,!0);const M=jo(b);return new Tr({user:p,providerId:M,_tokenResponse:b,operationType:m})})()}}function jo(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Rt(v){return Su.apply(this,arguments)}function Su(){return(Su=(0,u.Z)(function*(v){var p;const m=Hn(v);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new Tr({user:m.currentUser,providerId:null,operationType:"signIn"});const b=yield Pa(m,{returnSecureToken:!0}),M=yield Tr._fromIdTokenResponse(m,"signIn",b,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Kl extends $.ZR{constructor(p,m,b,M){var k;super(m.code,m.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,Kl.prototype),this.customData={appName:p.name,tenantId:null!==(k=p.tenantId)&&void 0!==k?k:void 0,_serverResponse:m.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(p,m,b,M){return new Kl(p,m,b,M)}}function Yl(v,p,m,b){return("reauthenticate"===p?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Kl._fromErrorAndOperation(v,k,p,b):k})}function Td(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function rf(v,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(v,p){const m=(0,$.m9)(v);yield Pe(!0,m,p);const{providerUserInfo:b}=yield Bn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),M=Td(b||[]);return m.providerData=m.providerData.filter(k=>M.has(k.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ui(v,p){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,u.Z)(function*(v,p,m=!1){const b=yield qt(v,p._linkToIdToken(v.auth,yield v.getIdToken()),m);return Tr._forOperation(v,"link",b)})).apply(this,arguments)}function Pe(v,p,m){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,u.Z)(function*(v,p,m){yield _r(p);const M=!1===v?"provider-already-linked":"no-such-provider";le(Td(p.providerData).has(m)===v,p.auth,M)})).apply(this,arguments)}function Ql(v,p){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,u.Z)(function*(v,p,m=!1){const{auth:b}=v,M="reauthenticate";try{const k=yield qt(v,Yl(b,M,p,v),m);le(k.idToken,b,"internal-error");const Q=Nn(k.idToken);le(Q,b,"internal-error");const{sub:de}=Q;return le(v.uid===de,b,"user-mismatch"),Tr._forOperation(v,M,k)}catch(k){throw"auth/user-not-found"===k?.code&&Se(b,"user-mismatch"),k}})).apply(this,arguments)}function Kn(v,p){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,u.Z)(function*(v,p,m=!1){const b="signIn",M=yield Yl(v,b,p),k=yield Tr._fromIdTokenResponse(v,b,M);return m||(yield v._updateCurrentUser(k.user)),k})).apply(this,arguments)}function js(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,u.Z)(function*(v,p){return Kn(Hn(v),p)})).apply(this,arguments)}function ka(v,p){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(v,p){const m=(0,$.m9)(v);return yield Pe(!1,m,p.providerId),Ui(m,p)})).apply(this,arguments)}function Dd(v,p){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(function*(v,p){return Ql((0,$.m9)(v),p)})).apply(this,arguments)}function F_(v,p){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,u.Z)(function*(v,p){return en(v,"POST","/v1/accounts:signInWithCustomToken",he(v,p))})).apply(this,arguments)}function ai(v,p){return zr.apply(this,arguments)}function zr(){return(zr=(0,u.Z)(function*(v,p){const m=Hn(v),b=yield F_(m,{token:p,returnSecureToken:!0}),M=yield Tr._fromIdTokenResponse(m,"signIn",b);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class ui{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?go._fromServerResponse(p,m):"totpInfo"in m?li._fromServerResponse(p,m):Se(p,"internal-error")}}class go extends ui{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new go(m)}}class li extends ui{constructor(p){super("totp",p)}static _fromServerResponse(p,m){return new li(m)}}function Na(v,p,m){var b;le((null===(b=m.url)||void 0===b?void 0:b.length)>0,v,"invalid-continue-uri"),le(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(le(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(le(m.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Ad(v,p,m){return Sd.apply(this,arguments)}function Sd(){return Sd=(0,u.Z)(function*(v,p,m){var b;const M=Hn(v),k={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const Q=yield cn(M,k,"getOobCode",!0);m&&Na(M,Q,m),yield yd(M,Q)}else m&&Na(M,k,m),yield yd(M,k).catch(function(){var Q=(0,u.Z)(function*(de){if("auth/missing-recaptcha-token"!==de.code)return Promise.reject(de);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Ge=yield cn(M,k,"getOobCode",!0);m&&Na(M,Ge,m),yield yd(M,Ge)}});return function(de){return Q.apply(this,arguments)}}())}),Sd.apply(this,arguments)}function ku(v,p,m){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,u.Z)(function*(v,p,m){yield Aa((0,$.m9)(v),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Xl(v,p){return $o.apply(this,arguments)}function $o(){return($o=(0,u.Z)(function*(v,p){yield md((0,$.m9)(v),{oobCode:p})})).apply(this,arguments)}function Xr(v,p){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,u.Z)(function*(v,p){const m=(0,$.m9)(v),b=yield Aa(m,{oobCode:p}),M=b.requestType;switch(le(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(b.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(b.mfaInfo,m,"internal-error");default:le(b.email,m,"internal-error")}let k=null;return b.mfaInfo&&(k=ui._fromServerResponse(Hn(m),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:k},operation:M}})).apply(this,arguments)}function ec(v,p){return mo.apply(this,arguments)}function mo(){return(mo=(0,u.Z)(function*(v,p){const{data:m}=yield Xr((0,$.m9)(v),p);return m.email})).apply(this,arguments)}function Fa(v,p,m){return La.apply(this,arguments)}function La(){return La=(0,u.Z)(function*(v,p,m){var b;const M=Hn(v),k={returnSecureToken:!0,email:p,password:m,clientType:"CLIENT_TYPE_WEB"};let Q;if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const nt=yield cn(M,k,"signUpPassword");Q=Pa(M,nt)}else Q=Pa(M,k).catch(function(){var nt=(0,u.Z)(function*(vt){if("auth/missing-recaptcha-token"===vt.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const an=yield cn(M,k,"signUpPassword");return Pa(M,an)}return Promise.reject(vt)});return function(vt){return nt.apply(this,arguments)}}());const de=yield Q.catch(nt=>Promise.reject(nt)),Ge=yield Tr._fromIdTokenResponse(M,"signIn",de);return yield M._updateCurrentUser(Ge.user),Ge}),La.apply(this,arguments)}function tc(v,p,m){return js((0,$.m9)(v),nf.credential(p,m))}function xd(v,p,m){return $s.apply(this,arguments)}function $s(){return $s=(0,u.Z)(function*(v,p,m){var b;const M=Hn(v),k={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function Q(de,Ge){le(Ge.handleCodeInApp,M,"argument-error"),Ge&&Na(M,de,Ge)}if(null!==(b=M._getRecaptchaConfig())&&void 0!==b&&b.emailPasswordEnabled){const de=yield cn(M,k,"getOobCode",!0);Q(de,m),yield ef(M,de)}else Q(k,m),yield ef(M,k).catch(function(){var de=(0,u.Z)(function*(Ge){if("auth/missing-recaptcha-token"!==Ge.code)return Promise.reject(Ge);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const nt=yield cn(M,k,"getOobCode",!0);Q(nt,m),yield ef(M,nt)}});return function(Ge){return de.apply(this,arguments)}}())}),$s.apply(this,arguments)}function Md(v,p){return"EMAIL_SIGNIN"===Bs.parseLink(p)?.operation}function og(v,p,m){return dn.apply(this,arguments)}function dn(){return(dn=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v),M=nf.credentialWithLink(p,m||gt());return le(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),js(b,M)})).apply(this,arguments)}function _o(v,p){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:createAuthUri",he(v,p))})).apply(this,arguments)}function ag(v,p){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,u.Z)(function*(v,p){const b={identifier:p,continueUri:zt()?gt():"http://localhost"},{signinMethods:M}=yield _o((0,$.m9)(v),b);return M||[]})).apply(this,arguments)}function sf(v,p){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,u.Z)(function*(v,p){const m=(0,$.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Na(m.auth,M,p);const{email:k}=yield rg(m.auth,M);k!==v.email&&(yield v.reload())})).apply(this,arguments)}function Pd(v,p,m){return Va.apply(this,arguments)}function Va(){return(Va=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};m&&Na(b.auth,k,m);const{email:Q}=yield wd(b.auth,k);Q!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ua(v,p){return yo.apply(this,arguments)}function yo(){return(yo=(0,u.Z)(function*(v,p){return Re(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Lu(v,p){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,u.Z)(function*(v,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const b=(0,$.m9)(v),k={idToken:yield b.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Q=yield qt(b,Ua(b.auth,k));b.displayName=Q.displayName||null,b.photoURL=Q.photoUrl||null;const de=b.providerData.find(({providerId:Ge})=>"password"===Ge);de&&(de.displayName=b.displayName,de.photoURL=b.photoURL),yield b._updateTokensIfNecessary(Q)})).apply(this,arguments)}function nc(v,p){return rs((0,$.m9)(v),p,null)}function af(v,p){return rs((0,$.m9)(v),null,p)}function rs(v,p,m){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,u.Z)(function*(v,p,m){const{auth:b}=v,k={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(k.email=p),m&&(k.password=m);const Q=yield qt(v,Sa(b,k));yield v._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Go{constructor(p,m,b={}){this.isNewUser=p,this.providerId=m,this.profile=b}}class vo extends Go{constructor(p,m,b,M){super(p,m,b),this.username=M}}class kd extends Go{constructor(p,m){super(p,"facebook.com",m)}}class Nd extends vo{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class uf extends Go{constructor(p,m){super(p,"google.com",m)}}class rc extends vo{constructor(p,m,b){super(p,"twitter.com",m,b)}}function Uu(v){const{user:p,_tokenResponse:m}=v;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Rd(v){var p,m;if(!v)return null;const{providerId:b}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},k=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!b&&v?.idToken){const Q=null===(m=null===(p=Nn(v.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Q)return new Go(k,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!b)return null;switch(b){case"facebook.com":return new kd(k,M);case"github.com":return new Nd(k,M);case"google.com":return new uf(k,M);case"twitter.com":return new rc(k,M,v.screenName||null);case"custom":case"anonymous":return new Go(k,null);default:return new Go(k,b,M)}}(m)}class ci{constructor(p,m,b){this.type=p,this.credential=m,this.auth=b}static _fromIdtoken(p,m){return new ci("enroll",p,m)}static _fromMfaPendingCredential(p){return new ci("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,b;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ci._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(b=p.multiFactorSession)&&void 0!==b&&b.idToken)return ci._fromIdtoken(p.multiFactorSession.idToken)}return null}}class oc{constructor(p,m,b){this.session=p,this.hints=m,this.signInResolver=b}static _fromError(p,m){const b=Hn(p),M=m.customData._serverResponse,k=(M.mfaInfo||[]).map(de=>ui._fromServerResponse(b,de));le(M.mfaPendingCredential,b,"internal-error");const Q=ci._fromMfaPendingCredential(M.mfaPendingCredential);return new oc(Q,k,function(){var de=(0,u.Z)(function*(Ge){const nt=yield Ge._process(b,Q);delete M.mfaInfo,delete M.mfaPendingCredential;const vt=Object.assign(Object.assign({},M),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(m.operationType){case"signIn":const an=yield Tr._fromIdTokenResponse(b,m.operationType,vt);return yield b._updateCurrentUser(an.user),an;case"reauthenticate":return le(m.user,b,"internal-error"),Tr._forOperation(m.user,m.operationType,vt);default:Se(b,"internal-error")}});return function(Ge){return de.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,u.Z)(function*(){return m.signInResolver(p)})()}}function Gs(v,p){var m;const b=(0,$.m9)(v),M=p;return le(p.customData.operationType,b,"argument-error"),le(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,b,"argument-error"),oc._fromError(b,M)}function ju(v,p){return Re(v,"POST","/v2/accounts/mfaEnrollment:start",he(v,p))}class $a{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(b=>ui._fromServerResponse(p.auth,b)))})}static _fromUser(p){return new $a(p)}getSession(){var p=this;return(0,u.Z)(function*(){return ci._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var b=this;return(0,u.Z)(function*(){const M=p,k=yield b.getSession(),Q=yield qt(b.user,M._process(b.user.auth,k,m));return yield b.user._updateTokensIfNecessary(Q),b.user.reload()})()}unenroll(p){var m=this;return(0,u.Z)(function*(){const b="string"==typeof p?p:p.uid,M=yield m.user.getIdToken();try{const k=yield qt(m.user,function qo(v,p){return Re(v,"POST","/v2/accounts/mfaEnrollment:withdraw",he(v,p))}(m.user.auth,{idToken:M,mfaEnrollmentId:b}));m.enrolledFactors=m.enrolledFactors.filter(({uid:Q})=>Q!==b),yield m.user._updateTokensIfNecessary(k),yield m.user.reload()}catch(k){throw k}})()}}const wo=new WeakMap;function Ha(v){const p=(0,$.m9)(v);return wo.has(p)||wo.set(p,$a._fromUser(p)),wo.get(p)}const zs="__sak";class Ga{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(zs,"1"),this.storage.removeItem(zs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fd=(()=>{class v extends Ga{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,b)=>this.onStorageEvent(m,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ac(){const v=(0,$.z$)();return N(v)||Ce(v)}()&&function on(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Lt(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),k=this.localCache[b];M!==k&&m(b,k,M)}}onStorageEvent(m,b=!1){if(!m.key)return void this.forAllChangedKeys((de,Ge,nt)=>{this.notifyListeners(de,nt)});const M=m.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(M);if(m.newValue!==de)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!b)return}const k=()=>{const de=this.storage.getItem(M);!b&&this.localCache[M]===de||this.notifyListeners(M,de)},Q=this.storage.getItem(M);!function Qt(){return(0,$.w1)()&&10===document.documentMode}()||Q===m.newValue||m.newValue===m.oldValue?k():setTimeout(k,10)}notifyListeners(m,b){this.localCache[m]=b;const M=this.listeners[m];if(M)for(const k of Array.from(M))k(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,b){var M=()=>super._set,k=this;return(0,u.Z)(function*(){yield M().call(k,m,b),k.localCache[m]=JSON.stringify(b)})()}_get(m){var b=()=>super._get,M=this;return(0,u.Z)(function*(){const k=yield b().call(M,m);return M.localCache[m]=JSON.stringify(k),k})()}_remove(m){var b=()=>super._remove,M=this;return(0,u.Z)(function*(){yield b().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),qs=(()=>{class v extends Ga{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,b){}_removeListener(m,b){}}return v.type="SESSION",v})();let hf=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const b=this.receivers.find(k=>k.isListeningto(m));if(b)return b;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var b=this;return(0,u.Z)(function*(){const M=m,{eventId:k,eventType:Q,data:de}=M.data,Ge=b.handlersMap[Q];if(!Ge?.size)return;M.ports[0].postMessage({status:"ack",eventId:k,eventType:Q});const nt=Array.from(Ge).map(function(){var an=(0,u.Z)(function*($i){return $i(M.origin,de)});return function($i){return an.apply(this,arguments)}}()),vt=yield function ug(v){return Promise.all(v.map(function(){var p=(0,u.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(b){return{fulfilled:!1,reason:b}}});return function(m){return p.apply(this,arguments)}}()))}(nt);M.ports[0].postMessage({status:"done",eventId:k,eventType:Q,response:vt})})()}_subscribe(m,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(b)}_unsubscribe(m,b){this.handlersMap[m]&&b&&this.handlersMap[m].delete(b),(!b||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Zs(v="",p=10){let m="";for(let b=0;b<p;b++)m+=Math.floor(10*Math.random());return v+m}class Ko{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,b=50){var M=this;return(0,u.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let Q,de;return new Promise((Ge,nt)=>{const vt=Zs("",20);k.port1.start();const an=setTimeout(()=>{nt(new Error("unsupported_event"))},b);de={messageChannel:k,onMessage($i){const ua=$i;if(ua.data.eventId===vt)switch(ua.data.status){case"ack":clearTimeout(an),Q=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),Ge(ua.data.response);break;default:clearTimeout(an),clearTimeout(Q),nt(new Error("invalid_response"))}}},M.handlers.add(de),k.port1.addEventListener("message",de.onMessage),M.target.postMessage({eventType:p,eventId:vt,data:m},[k.port2])}).finally(()=>{de&&M.removeMessageHandler(de)})})()}}function ir(){return window}function Za(){return typeof ir().WorkerGlobalScope<"u"&&"function"==typeof ir().importScripts}function lc(){return(lc=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Fn="firebaseLocalStorageDb",sr="firebaseLocalStorage",Hu="fbase_key";class Ti{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function cc(v,p){return v.transaction([sr],p?"readwrite":"readonly").objectStore(sr)}function mn(){const v=indexedDB.open(Fn,1);return new Promise((p,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const b=v.result;try{b.createObjectStore(sr,{keyPath:Hu})}catch(M){m(M)}}),v.addEventListener("success",(0,u.Z)(function*(){const b=v.result;b.objectStoreNames.contains(sr)?p(b):(b.close(),yield function Vd(){const v=indexedDB.deleteDatabase(Fn);return new Ti(v).toPromise()}(),p(yield mn()))}))})}function Ud(v,p,m){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(v,p,m){const b=cc(v,!0).put({[Hu]:p,value:m});return new Ti(b).toPromise()})).apply(this,arguments)}function Gu(){return(Gu=(0,u.Z)(function*(v,p){const m=cc(v,!1).get(p),b=yield new Ti(m).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function lg(v,p){const m=cc(v,!0).delete(p);return new Ti(m).toPromise()}const pf=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,u.Z)(function*(){return m.db||(m.db=yield mn()),m.db})()}_withRetries(m){var b=this;return(0,u.Z)(function*(){let M=0;for(;;)try{const k=yield b._openDb();return yield m(k)}catch(k){if(M++>3)throw k;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,u.Z)(function*(){return Za()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,u.Z)(function*(){m.receiver=hf._getInstance(function Es(){return Za()?self:null}()),m.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(M,k){return{keyProcessed:(yield m._poll()).includes(k.key)}});return function(M,k){return b.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(M,k){return["keyChanged"]});return function(M,k){return b.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,u.Z)(function*(){var b,M;if(m.activeServiceWorker=yield function uc(){return lc.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Ko(m.activeServiceWorker);const k=yield m.sender._send("ping",{},800);!k||(null===(b=k[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=k[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function Ld(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:m},b.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const m=yield mn();return yield Ud(m,zs,"1"),yield lg(m,zs),!0}catch{}return!1})()}_withPendingWrite(m){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield m()}finally{b.pendingWrites--}})()}_set(m,b){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(k=>Ud(k,m,b)),M.localCache[m]=b,M.notifyServiceWorker(m)}))})()}_get(m){var b=this;return(0,u.Z)(function*(){const M=yield b._withRetries(k=>function L_(v,p){return Gu.apply(this,arguments)}(k,m));return b.localCache[m]=M,M})()}_remove(m){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(M=>lg(M,m)),delete b.localCache[m],b.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,u.Z)(function*(){const b=yield m._withRetries(Q=>{const de=cc(Q,!1).getAll();return new Ti(de).toPromise()});if(!b)return[];if(0!==m.pendingWrites)return[];const M=[],k=new Set;for(const{fbase_key:Q,value:de}of b)k.add(Q),JSON.stringify(m.localCache[Q])!==JSON.stringify(de)&&(m.notifyListeners(Q,de),M.push(Q));for(const Q of Object.keys(m.localCache))m.localCache[Q]&&!k.has(Q)&&(m.notifyListeners(Q,null),M.push(Q));return M})()}notifyListeners(m,b){this.localCache[m]=b;const M=this.listeners[m];if(M)for(const k of Array.from(M))k(b)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(b)}_removeListener(m,b){this.listeners[m]&&(this.listeners[m].delete(b),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function V_(v,p){return Re(v,"POST","/v2/accounts/mfaSignIn:start",he(v,p))}const Zu=1e12;class Dr{constructor(p){this.auth=p,this.counter=Zu,this._widgets=new Map}render(p,m){const b=this.counter;return this._widgets.set(b,new ji(p,this.auth.name,m||{})),this.counter++,b}reset(p){var m;const b=p||Zu;null===(m=this._widgets.get(b))||void 0===m||m.delete(),this._widgets.delete(b)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Zu))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,u.Z)(function*(){var b;return null===(b=m._widgets.get(p||Zu))||void 0===b||b.execute(),""})()}}class ji{constructor(p,m,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof p?document.getElementById(p):p;le(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dc(v){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<v;b++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ka=Hr("rcb"),Wu=new ii(3e4,6e4);class $d{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=ir().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return le(function dg(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),p,"argument-error"),this.shouldResolveImmediately(m)&&Mt(ir().grecaptcha)?Promise.resolve(ir().grecaptcha):new Promise((b,M)=>{const k=ir().setTimeout(()=>{M(Ie(p,"network-request-failed"))},Wu.get());ir()[Ka]=()=>{ir().clearTimeout(k),delete ir()[Ka];const de=ir().grecaptcha;if(!de||!Mt(de))return void M(Ie(p,"internal-error"));const Ge=de.render;de.render=(nt,vt)=>{const an=Ge(nt,vt);return this.counter++,an},this.hostLanguage=m,b(de)},Jt(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Ka,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(k),M(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=ir().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gf{load(p){return(0,u.Z)(function*(){return new Dr(p)})()}clearedOneInstance(){}}const hg="recaptcha",hc={theme:"light",type:"image"};class di{constructor(p,m=Object.assign({},hc),b){this.parameters=m,this.type=hg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Hn(b),this.isInvisible="invisible"===this.parameters.size,le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof p?document.getElementById(p):p;le(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gf:new $d,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),b=p.getAssertedRecaptcha();return b.getResponse(m)||new Promise(k=>{const Q=de=>{!de||(p.tokenChangeListeners.delete(Q),k(de))};p.tokenChangeListeners.add(Q),p.isInvisible&&b.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(b=>b(m)),"function"==typeof p)p(m);else if("string"==typeof p){const b=ir()[p];"function"==typeof b&&b(m)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const b=document.createElement("div");m.appendChild(b),m=b}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){le(zt()&&!Za(),p.auth,"internal-error"),yield function Ku(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ae(v){return re.apply(this,arguments)}(p.auth);le(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Eo{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Wn._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function mf(v,p,m){return fc.apply(this,arguments)}function fc(){return(fc=(0,u.Z)(function*(v,p,m){const b=Hn(v),M=yield Qo(b,p,(0,$.m9)(m));return new Eo(M,k=>js(b,k))})).apply(this,arguments)}function Hd(v,p,m){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v);yield Pe(!1,b,"phone");const M=yield Qo(b.auth,p,(0,$.m9)(m));return new Eo(M,k=>ka(b,k))})).apply(this,arguments)}function Yu(v,p,m){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v),M=yield Qo(b.auth,p,(0,$.m9)(m));return new Eo(M,k=>Dd(b,k))})).apply(this,arguments)}function Qo(v,p,m){return pc.apply(this,arguments)}function pc(){return(pc=(0,u.Z)(function*(v,p,m){var b;const M=yield m.verify();try{let k;if(le("string"==typeof M,v,"argument-error"),le(m.type===hg,v,"argument-error"),k="string"==typeof p?{phoneNumber:p}:p,"session"in k){const Q=k.session;if("phoneNumber"in k)return le("enroll"===Q.type,v,"internal-error"),(yield ju(v,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{le("signin"===Q.type,v,"internal-error");const de=(null===(b=k.multiFactorHint)||void 0===b?void 0:b.uid)||k.multiFactorUid;return le(de,v,"missing-multi-factor-info"),(yield V_(v,{mfaPendingCredential:Q.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield $l(v,{phoneNumber:k.phoneNumber,recaptchaToken:M});return Q}}finally{m._reset()}})).apply(this,arguments)}function gn(v,p){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,u.Z)(function*(v,p){yield Ui((0,$.m9)(v),p)})).apply(this,arguments)}let fg=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=Hn(m)}verifyPhoneNumber(m,b){return Qo(this.auth,m,(0,$.m9)(b))}static credential(m,b){return Wn._fromVerification(m,b)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:b,temporaryProof:M}=m;return b&&M?Wn._fromTokenResponse(b,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function hi(v,p){return p?er(p):(le(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Qa extends vs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return ho(p,this._buildIdpRequest())}_linkToIdToken(p,m){return ho(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return ho(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function fi(v){return Kn(v.auth,new Qa(v),v.bypassAuthState)}function gc(v){const{auth:p,user:m}=v;return le(m,p,"internal-error"),Ql(m,new Qa(v),v.bypassAuthState)}function zd(v){return bs.apply(this,arguments)}function bs(){return(bs=(0,u.Z)(function*(v){const{auth:p,user:m}=v;return le(m,p,"internal-error"),Ui(m,new Qa(v),v.bypassAuthState)})).apply(this,arguments)}class Cs{constructor(p,m,b,M,k=!1){this.auth=p,this.resolver=b,this.user=M,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,u.Z)(function*(b,M){p.pendingPromise={resolve:b,reject:M};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(k){p.reject(k)}});return function(b,M){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:k,tenantId:Q,error:de,type:Ge}=p;if(de)return void m.reject(de);const nt={auth:m.auth,requestUri:b,sessionId:M,tenantId:Q||void 0,postBody:k||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ge)(nt))}catch(vt){m.reject(vt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return fi;case"linkViaPopup":case"linkViaRedirect":return zd;case"reauthViaPopup":case"reauthViaRedirect":return gc;default:Se(this.auth,"internal-error")}}resolve(p){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){St(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gn=new ii(2e3,1e4);function ht(v,p,m){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,u.Z)(function*(v,p,m){const b=Hn(v);ze(v,p,Dn);const M=hi(b,m);return new Ws(b,"signInViaPopup",p,M).executeNotNull()})).apply(this,arguments)}function ar(v,p,m){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v);ze(b.auth,p,Dn);const M=hi(b.auth,m);return new Ws(b.auth,"reauthViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}function mc(v,p,m){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v);ze(b.auth,p,Dn);const M=hi(b.auth,m);return new Ws(b.auth,"linkViaPopup",p,M,b).executeNotNull()})).apply(this,arguments)}let Ws=(()=>{class v extends Cs{constructor(m,b,M,k,Q){super(m,b,k,Q),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,u.Z)(function*(){const b=yield m.execute();return le(b,m.auth,"internal-error"),b})()}onExecution(){var m=this;return(0,u.Z)(function*(){St(1===m.filter.length,"Popup operations only handle one event");const b=Zs();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],b),m.authWindow.associatedEvent=b,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(Ie(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var b,M;this.pollId=null!==(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(m,Gn.get())};m()}}return v.currentPopupAction=null,v})();const Pr=new Map;class pg extends Cs{constructor(p,m,b=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,b),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,u.Z)(function*(){let b=Pr.get(m.auth._key());if(!b){try{const k=(yield function _c(v,p){return Is.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;b=()=>Promise.resolve(k)}catch(M){b=()=>Promise.reject(M)}Pr.set(m.auth._key(),b)}return m.bypassAuthState||Pr.set(m.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(b,p);if("unknown"!==p.type){if(p.eventId){const M=yield b.auth._redirectUserForId(p.eventId);if(M)return b.user=M,m().call(b,p);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Is(){return(Is=(0,u.Z)(function*(v,p){const m=eu(p),b=pi(v);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(m));return yield b._remove(m),M})).apply(this,arguments)}function yc(v,p){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,u.Z)(function*(v,p){return pi(v)._set(eu(p),"true")})).apply(this,arguments)}function Ts(){Pr.clear()}function qd(v,p){Pr.set(v._key(),p)}function pi(v){return er(v._redirectPersistence)}function eu(v){return jr("pendingRedirect",v.config.apiKey,v.name)}function vr(v,p,m){return function Ds(v,p,m){return vc.apply(this,arguments)}(v,p,m)}function vc(){return(vc=(0,u.Z)(function*(v,p,m){const b=Hn(v);ze(v,p,Dn),yield b._initializationPromise;const M=hi(b,m);return yield yc(M,b),M._openRedirect(b,p,"signInViaRedirect")})).apply(this,arguments)}function Rr(v,p,m){return function Xo(v,p,m){return Ju.apply(this,arguments)}(v,p,m)}function Ju(){return(Ju=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v);ze(b.auth,p,Dn),yield b.auth._initializationPromise;const M=hi(b.auth,m);yield yc(M,b.auth);const k=yield Co(b);return M._openRedirect(b.auth,p,"reauthViaRedirect",k)})).apply(this,arguments)}function _f(v,p,m){return function wc(v,p,m){return Ec.apply(this,arguments)}(v,p,m)}function Ec(){return(Ec=(0,u.Z)(function*(v,p,m){const b=(0,$.m9)(v);ze(b.auth,p,Dn),yield b.auth._initializationPromise;const M=hi(b.auth,m);yield Pe(!1,b,p.providerId),yield yc(M,b.auth);const k=yield Co(b);return M._openRedirect(b.auth,p,"linkViaRedirect",k)})).apply(this,arguments)}function yf(v,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,u.Z)(function*(v,p){return yield Hn(v)._initializationPromise,Xu(v,p,!1)})).apply(this,arguments)}function Xu(v,p){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,u.Z)(function*(v,p,m=!1){const b=Hn(v),M=hi(b,p),Q=yield new pg(b,M,m).execute();return Q&&!m&&(delete Q.user._redirectEventId,yield b._persistUserIfCurrent(Q.user),yield b._setRedirectUser(null,p)),Q})).apply(this,arguments)}function Co(v){return nu.apply(this,arguments)}function nu(){return(nu=(0,u.Z)(function*(v){const p=Zs(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class ea{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(p,b)&&(m=!0,this.sendToConsumer(p,b),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Cc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ta(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var b;if(p.error&&!ta(p)){const M=(null===(b=p.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";m.onError(Ie(this.auth,M))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const b=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&b}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bc(p))}saveEventToCache(p){this.cachedEventUids.add(bc(p)),this.lastProcessedEventTime=Date.now()}}function bc(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function ta({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function na(v){return ra.apply(this,arguments)}function ra(){return(ra=(0,u.Z)(function*(v,p={}){return Re(v,"GET","/v1/projects",p)})).apply(this,arguments)}const tl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gg=/^https?/;function ia(){return(ia=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield na(v);for(const m of p)try{if(Zd(m))return}catch{}Se(v,"unauthorized-domain")})).apply(this,arguments)}function Zd(v){const p=gt(),{protocol:m,hostname:b}=new URL(p);if(v.startsWith("chrome-extension://")){const Q=new URL(v);return""===Q.hostname&&""===b?"chrome-extension:"===m&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Q.hostname===b}if(!gg.test(m))return!1;if(tl.test(v))return b===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const Ys=new ii(3e4,6e4);function Ic(){const v=ir().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let nl=null;function Yn(v){return nl=nl||function vf(v){return new Promise((p,m)=>{var b,M,k;function Q(){Ic(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Ic(),m(Ie(v,"network-request-failed"))},timeout:Ys.get()})}if(null!==(M=null===(b=ir().gapi)||void 0===b?void 0:b.iframes)&&void 0!==M&&M.Iframe)p(gapi.iframes.getContext());else{if(null===(k=ir().gapi)||void 0===k||!k.load){const de=Hr("iframefcb");return ir()[de]=()=>{gapi.load?Q():m(Ie(v,"network-request-failed"))},Jt(`https://apis.google.com/js/api.js?onload=${de}`).catch(Ge=>m(Ge))}Q()}}).catch(p=>{throw nl=null,p})}(v),nl}const As=new ii(5e3,15e3),_g={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},os=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kr(v){const p=v.config;le(p.authDomain,v,"auth-domain-config-required");const m=p.emulator?es(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,b={apiKey:p.apiKey,appName:v.name,v:O.SDK_VERSION},M=os.get(v.config.apiHost);M&&(b.eid=M);const k=v._getFrameworks();return k.length&&(b.fw=k.join(",")),`${m}?${(0,$.xO)(b).slice(1)}`}function sa(){return sa=(0,u.Z)(function*(v){const p=yield Yn(v),m=ir().gapi;return le(m,v,"internal-error"),p.open({where:document.body,url:kr(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_g,dontclear:!0},b=>new Promise(function(){var M=(0,u.Z)(function*(k,Q){yield b.restyle({setHideOnLeave:!1});const de=Ie(v,"network-request-failed"),Ge=ir().setTimeout(()=>{Q(de)},As.get());function nt(){ir().clearTimeout(Ge),k(b)}b.ping(nt).then(nt,()=>{Q(de)})});return function(k,Q){return M.apply(this,arguments)}}()))}),sa.apply(this,arguments)}const E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class X{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Vt=encodeURIComponent("fac");function Nt(v,p,m,b,M,k){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(v,p,m,b,M,k){le(v.config.authDomain,v,"auth-domain-config-required"),le(v.config.apiKey,v,"invalid-api-key");const Q={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:b,v:O.SDK_VERSION,eventId:M};if(p instanceof Dn){p.setDefaultLanguage(v.languageCode),Q.providerId=p.providerId||"",(0,$.xb)(p.getCustomParameters())||(Q.customParameters=JSON.stringify(p.getCustomParameters()));for(const[vt,an]of Object.entries(k||{}))Q[vt]=an}if(p instanceof Bo){const vt=p.getScopes().filter(an=>""!==an);vt.length>0&&(Q.scopes=vt.join(","))}v.tenantId&&(Q.tid=v.tenantId);const de=Q;for(const vt of Object.keys(de))void 0===de[vt]&&delete de[vt];const Ge=yield v._getAppCheckToken(),nt=Ge?`#${Vt}=${encodeURIComponent(Ge)}`:"";return`${hn(v)}?${(0,$.xO)(de).slice(1)}${nt}`})).apply(this,arguments)}function hn({config:v}){return v.emulator?es(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}const as="webStorageSupport",us=class oa{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qs,this._completeRedirectFn=Xu,this._overrideRedirectResult=qd}_openPopup(p,m,b,M){var k=this;return(0,u.Z)(function*(){var Q;St(null===(Q=k.eventManagers[p._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const de=yield Nt(p,m,b,gt(),M);return function me(v,p,m,b=500,M=600){const k=Math.max((window.screen.availHeight-M)/2,0).toString(),Q=Math.max((window.screen.availWidth-b)/2,0).toString();let de="";const Ge=Object.assign(Object.assign({},E),{width:b.toString(),height:M.toString(),top:k,left:Q}),nt=(0,$.z$)().toLowerCase();m&&(de=R(nt)?"_blank":m),F(nt)&&(p=p||"http://localhost",Ge.scrollbars="yes");const vt=Object.entries(Ge).reduce(($i,[ua,il])=>`${$i}${ua}=${il},`,"");if(function at(v=(0,$.z$)()){var p;return Ce(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(nt)&&"_self"!==de)return function Je(v,p){const m=document.createElement("a");m.href=v,m.target=p;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(b)}(p||"",de),new X(null);const an=window.open(p||"",de,vt);le(an,v,"popup-blocked");try{an.focus()}catch{}return new X(an)}(p,de,Zs())})()}_openRedirect(p,m,b,M){var k=this;return(0,u.Z)(function*(){return yield k._originValidation(p),function qa(v){ir().location.href=v}(yield Nt(p,m,b,gt(),M)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:M,promise:k}=this.eventManagers[m];return M?Promise.resolve(M):(St(k,"If manager is not set, promise should be"),k)}const b=this.initAndGetManager(p);return this.eventManagers[m]={promise:b},b.catch(()=>{delete this.eventManagers[m]}),b}initAndGetManager(p){var m=this;return(0,u.Z)(function*(){const b=yield function Tc(v){return sa.apply(this,arguments)}(p),M=new ea(p);return b.register("authEvent",k=>(le(k?.authEvent,p,"invalid-auth-event"),{status:M.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:M},m.iframes[p._key()]=b,M})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(as,{type:as},M=>{var k;const Q=null===(k=M?.[0])||void 0===k?void 0:k[as];void 0!==Q&&m(!!Q),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function mg(v){return ia.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Lt()||N()||Ce()}};class Or extends class ei{constructor(p){this.factorId=p}_process(p,m,b){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,b);case"signin":return this._finalizeSignIn(p,m.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Or(p)}_finalizeEnroll(p,m,b){return function ja(v,p){return Re(v,"POST","/v2/accounts/mfaEnrollment:finalize",he(v,p))}(p,{idToken:m,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function or(v,p){return Re(v,"POST","/v2/accounts/mfaSignIn:finalize",he(v,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let aa=(()=>{class v{constructor(){}static assertion(m){return Or._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var Sc="@firebase/auth";class Kd{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,u.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(b=>{p(b?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function rl(v){(0,O._registerComponent)(new _e.wA("auth",(p,{options:m})=>{const b=p.getProvider("app").getImmediate(),M=p.getProvider("heartbeat"),k=p.getProvider("app-check-internal"),{apiKey:Q,authDomain:de}=b.options;le(Q&&!Q.includes(":"),"invalid-api-key",{appName:b.name});const Ge={apiKey:Q,authDomain:de,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$r(v)},nt=new lo(b,M,k,Ge);return function Uo(v,p){const m=p?.persistence||[],b=(Array.isArray(m)?m:[m]).map(er);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(b,p?.popupRedirectResolver)}(nt,m),nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,b)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new _e.wA("auth-internal",p=>{const m=Hn(p.getProvider("auth").getImmediate());return new Kd(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Sc,"0.23.2",function Yd(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,O.registerVersion)(Sc,"0.23.2","esm2017")}("Browser")},2090:(bt,Ne,U)=>{U.d(Ne,{$s:()=>er,BH:()=>xe,G6:()=>es,L:()=>we,LL:()=>Me,P0:()=>pt,Pz:()=>Ie,Sg:()=>ze,UG:()=>Qe,US:()=>_e,ZB:()=>J,ZR:()=>Re,aH:()=>Se,b$:()=>zt,eu:()=>te,hl:()=>se,jU:()=>St,m9:()=>jr,ne:()=>qt,pd:()=>Nn,r3:()=>Bn,ru:()=>gt,tV:()=>Z,uI:()=>le,vZ:()=>mr,w1:()=>Xi,xO:()=>Fi,xb:()=>wi,z$:()=>qe,zI:()=>Ae,zd:()=>Yr});const ie=function(G){const H=[];let F=0;for(let N=0;N<G.length;N++){let R=G.charCodeAt(N);R<128?H[F++]=R:R<2048?(H[F++]=R>>6|192,H[F++]=63&R|128):55296==(64512&R)&&N+1<G.length&&56320==(64512&G.charCodeAt(N+1))?(R=65536+((1023&R)<<10)+(1023&G.charCodeAt(++N)),H[F++]=R>>18|240,H[F++]=R>>12&63|128,H[F++]=R>>6&63|128,H[F++]=63&R|128):(H[F++]=R>>12|224,H[F++]=R>>6&63|128,H[F++]=63&R|128)}return H},_e={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,H){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const F=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,N=[];for(let R=0;R<G.length;R+=3){const Y=G[R],be=R+1<G.length,Ke=be?G[R+1]:0,mt=R+2<G.length,Ce=mt?G[R+2]:0;let Qt=(15&Ke)<<2|Ce>>6,Lt=63&Ce;mt||(Lt=64,be||(Qt=64)),N.push(F[Y>>2],F[(3&Y)<<4|Ke>>4],F[Qt],F[Lt])}return N.join("")},encodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(G):this.encodeByteArray(ie(G),H)},decodeString(G,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(G):function(G){const H=[];let F=0,N=0;for(;F<G.length;){const R=G[F++];if(R<128)H[N++]=String.fromCharCode(R);else if(R>191&&R<224){const Y=G[F++];H[N++]=String.fromCharCode((31&R)<<6|63&Y)}else if(R>239&&R<365){const mt=((7&R)<<18|(63&G[F++])<<12|(63&G[F++])<<6|63&G[F++])-65536;H[N++]=String.fromCharCode(55296+(mt>>10)),H[N++]=String.fromCharCode(56320+(1023&mt))}else{const Y=G[F++],be=G[F++];H[N++]=String.fromCharCode((15&R)<<12|(63&Y)<<6|63&be)}}return H.join("")}(this.decodeStringToByteArray(G,H))},decodeStringToByteArray(G,H){this.init_();const F=H?this.charToByteMapWebSafe_:this.charToByteMap_,N=[];for(let R=0;R<G.length;){const Y=F[G.charAt(R++)],Ke=R<G.length?F[G.charAt(R)]:0;++R;const Ce=R<G.length?F[G.charAt(R)]:64;++R;const at=R<G.length?F[G.charAt(R)]:64;if(++R,null==Y||null==Ke||null==Ce||null==at)throw new pe;N.push(Y<<2|Ke>>4),64!==Ce&&(N.push(Ke<<4&240|Ce>>2),64!==at&&N.push(Ce<<6&192|at))}return N},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const we=function(G){return function(G){const H=ie(G);return _e.encodeByteArray(H,!0)}(G).replace(/\./g,"")},Z=function(G){try{return _e.decodeString(G,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function J(G,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return H}for(const F in H)!H.hasOwnProperty(F)||!He(F)||(G[F]=J(G[F],H[F]));return G}function He(G){return"__proto__"!==G}const ye=()=>{try{return function ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const G=process.env.__FIREBASE_DEFAULTS__;return G?JSON.parse(G):void 0})()||(()=>{if(typeof document>"u")return;let G;try{G=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=G&&Z(G[1]);return H&&JSON.parse(H)})()}catch(G){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${G}`)}},pt=G=>{const H=(G=>{var H,F;return null===(F=null===(H=ye())||void 0===H?void 0:H.emulatorHosts)||void 0===F?void 0:F[G]})(G);if(!H)return;const F=H.lastIndexOf(":");if(F<=0||F+1===H.length)throw new Error(`Invalid host ${H} with no separate hostname and port!`);const N=parseInt(H.substring(F+1),10);return"["===H[0]?[H.substring(1,F-1),N]:[H.substring(0,F),N]},Se=()=>{var G;return null===(G=ye())||void 0===G?void 0:G.config},Ie=G=>{var H;return null===(H=ye())||void 0===H?void 0:H[`_${G}`]};class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,F)=>{this.resolve=H,this.reject=F})}wrapCallback(H){return(F,N)=>{F?this.reject(F):this.resolve(N),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(F):H(F,N))}}}function ze(G,H){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const N=H||"demo-project",R=G.iat||0,Y=G.sub||G.user_id;if(!Y)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const be=Object.assign({iss:`https://securetoken.google.com/${N}`,aud:N,iat:R,exp:R+3600,auth_time:R,sub:Y,user_id:Y,firebase:{sign_in_provider:"custom",identities:{}}},G);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(be)),""].join(".")}function qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function le(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qe())}function Qe(){var G;const H=null===(G=ye())||void 0===G?void 0:G.forceEnvironment;if("node"===H)return!0;if("browser"===H)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function St(){return"object"==typeof self&&self.self===self}function gt(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Xi(){const G=qe();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function es(){return!Qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function se(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((G,H)=>{try{let F=!0;const N="validate-browser-context-for-indexeddb-analytics-module",R=self.indexedDB.open(N);R.onsuccess=()=>{R.result.close(),F||self.indexedDB.deleteDatabase(N),G(!0)},R.onupgradeneeded=()=>{F=!1},R.onerror=()=>{var Y;H((null===(Y=R.error)||void 0===Y?void 0:Y.message)||"")}}catch(F){H(F)}})}function Ae(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Re extends Error{constructor(H,F,N){super(F),this.code=H,this.customData=N,this.name="FirebaseError",Object.setPrototypeOf(this,Re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(H,F,N){this.service=H,this.serviceName=F,this.errors=N}create(H,...F){const N=F[0]||{},R=`${this.service}/${H}`,Y=this.errors[H],be=Y?function ut(G,H){return G.replace(Dt,(F,N)=>{const R=H[N];return null!=R?String(R):`<${N}?>`})}(Y,N):"Error";return new Re(R,`${this.serviceName}: ${be} (${R}).`,N)}}const Dt=/\{\$([^}]+)}/g;function Bn(G,H){return Object.prototype.hasOwnProperty.call(G,H)}function wi(G){for(const H in G)if(Object.prototype.hasOwnProperty.call(G,H))return!1;return!0}function mr(G,H){if(G===H)return!0;const F=Object.keys(G),N=Object.keys(H);for(const R of F){if(!N.includes(R))return!1;const Y=G[R],be=H[R];if(Jn(Y)&&Jn(be)){if(!mr(Y,be))return!1}else if(Y!==be)return!1}for(const R of N)if(!F.includes(R))return!1;return!0}function Jn(G){return null!==G&&"object"==typeof G}function Fi(G){const H=[];for(const[F,N]of Object.entries(G))Array.isArray(N)?N.forEach(R=>{H.push(encodeURIComponent(F)+"="+encodeURIComponent(R))}):H.push(encodeURIComponent(F)+"="+encodeURIComponent(N));return H.length?"&"+H.join("&"):""}function Yr(G){const H={};return G.replace(/^\?/,"").split("&").forEach(N=>{if(N){const[R,Y]=N.split("=");H[decodeURIComponent(R)]=decodeURIComponent(Y)}}),H}function Nn(G){const H=G.indexOf("?");if(!H)return"";const F=G.indexOf("#",H);return G.substring(H,F>0?F:void 0)}function qt(G,H){const F=new dt(G,H);return F.subscribe.bind(F)}class dt{constructor(H,F){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=F,this.task.then(()=>{H(this)}).catch(N=>{this.error(N)})}next(H){this.forEachObserver(F=>{F.next(H)})}error(H){this.forEachObserver(F=>{F.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,F,N){let R;if(void 0===H&&void 0===F&&void 0===N)throw new Error("Missing Observer.");R=function tn(G,H){if("object"!=typeof G||null===G)return!1;for(const F of H)if(F in G&&"function"==typeof G[F])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:F,complete:N},void 0===R.next&&(R.next=Qr),void 0===R.error&&(R.error=Qr),void 0===R.complete&&(R.complete=Qr);const Y=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?R.error(this.finalError):R.complete()}catch{}}),this.observers.push(R),Y}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let F=0;F<this.observers.length;F++)this.sendOne(F,H)}sendOne(H,F){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{F(this.observers[H])}catch(N){typeof console<"u"&&console.error&&console.error(N)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Qr(){}function er(G,H=1e3,F=2){const N=H*Math.pow(F,G),R=Math.round(.5*N*(Math.random()-.5)*2);return Math.min(144e5,N+R)}function jr(G){return G&&G._delegate?G._delegate:G}},4227:(bt,Ne,U)=>{var u=U(4650);let $=null;function O(){return $}const pe=new u.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function we(){return(0,u.LFG)(z)}()},providedIn:"platform"}),n})();const Z=new u.OlP("Location Initialized");let z=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){J()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){J()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function He(){return new z((0,u.LFG)(pe))}()},providedIn:"platform"}),n})();function J(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function it(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(yt)},providedIn:"root"}),n})();const ye=new u.OlP("appBaseHref");let yt=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+it(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const c=this.prepareExternalUrl(i+it(a));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){const c=this.prepareExternalUrl(i+it(a));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ve),u.LFG(ye,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pt=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let c=this.prepareExternalUrl(i+it(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,a){let c=this.prepareExternalUrl(i+it(a));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ve),u.LFG(ye,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+it(r))}normalize(t){return n.stripTrailingSlash(function xe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+it(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=it,n.joinWithSlash=ke,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(u.LFG(Ee))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ie(){return new Se((0,u.LFG)(Ee))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}let cn=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,u.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Hn{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ys=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Hn(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,c),co(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{co(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function co(n,e){n.context.$implicit=e.item}let Tn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new gd,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ir("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ir("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class gd{constructor(){this.$implicit=null,this.ngIf=null}}function Ir(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let md=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),c=-1===i.indexOf("-")?void 0:u.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.aQg),u.Y36(u.Qsj))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function Bs(n){return"server"===n}let Bo=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ql((0,u.LFG)(pe),window)}),n})();class ql{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function oi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const c=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=po(this.window.history)||po(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function po(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class rc extends class uf extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ce(n){$||($=n)}(new rc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ic(){return Uu=Uu||document.querySelector("base"),Uu?Uu.getAttribute("href"):null}();return null==t?null:function Od(n){Bu=Bu||document.createElement("a"),Bu.setAttribute("href",n);const e=Bu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Uu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ia(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Bu,Uu=null;const zo=new u.OlP("TRANSITION_ID"),sc=[{provide:u.ip1,useFactory:function lf(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[zo,pe,u.zs3],multi:!0}];let cf=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const is=new u.OlP("EventManagerPlugins");let Hs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const c=i[a];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(is),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ci{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let oc=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Gs=(()=>{class n extends oc{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const c=this._doc.createElement("style");c.textContent=a,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ju),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ju))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function ju(n){O().remove(n)}const ja={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bi=/%COMP%/g;function Ga(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ga(n,i,t):(i=i.replace(Bi,n),t.push(i))}return t}function ac(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new za(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ug(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new hf(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ga(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Hs),u.LFG(Gs),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ja[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ja[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ja[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ac(r)):this.eventManager.addEventListener(e,t,ac(r))}}function qs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ug extends za{constructor(e,t,r,i){super(e),this.component=r;const a=Ga(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Ha(n){return"_ngcontent-%COMP%".replace(Bi,n)}(i+"-"+r.id),this.hostAttr=function zs(n){return"_nghost-%COMP%".replace(Bi,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class hf extends za{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ga(i.id,i.styles,[]);for(let c=0;c<a.length;c++){const f=document.createElement("style");f.textContent=a[c],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Zs=(()=>{class n extends ci{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Ko=["alt","control","meta","shift"],ir={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Za=(()=>{class n extends ci{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),c=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,a.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let c="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),c="code."),Ko.forEach(w=>{const D=r.indexOf(w);D>-1&&(r.splice(D,1),c+=w+".")}),c+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=ir[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ko.forEach(c=>{c!==i&&(0,qa[c])(t)&&(a+=c+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const cc=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Yo(){rc.makeCurrent()},multi:!0},{provide:pe,useFactory:function Hu(){return(0,u.RDi)(document),document},deps:[]}]),Vd=new u.OlP(""),mn=[{provide:u.rWj,useClass:class Ba{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let a=i.length,c=!1;const f=function(_){c=c||_,a--,0==a&&r(c)};i.forEach(function(_){_.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Ud=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function sr(){return new u.qLn},deps:[]},{provide:is,useClass:Zs,multi:!0,deps:[pe,u.R0b,u.Lbi]},{provide:is,useClass:Za,multi:!0,deps:[pe]},{provide:Zo,useClass:Zo,deps:[Hs,Gs,u.AFp]},{provide:u.FYo,useExisting:Zo},{provide:oc,useExisting:Gs},{provide:Gs,useClass:Gs,deps:[pe]},{provide:Hs,useClass:Hs,deps:[is,u.R0b]},{provide:class Zl{},useClass:cf,deps:[]},[]];let Wa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:zo,useExisting:u.AFp},sc]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vd,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Ud,...mn],imports:[Cd,u.hGG]}),n})(),ff=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function cg(){return new ff((0,u.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Yu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):u.LFG(Qo),r},providedIn:"root"}),n})(),Qo=(()=>{class n extends Yu{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case u.q3G.NONE:return r;case u.q3G.HTML:return(0,u.qzn)(r,"HTML")?(0,u.z3N)(r):(0,u.EiD)(this._doc,String(r)).toString();case u.q3G.STYLE:return(0,u.qzn)(r,"Style")?(0,u.z3N)(r):r;case u.q3G.SCRIPT:if((0,u.qzn)(r,"Script"))return(0,u.z3N)(r);throw new Error("unsafe value used in a script context");case u.q3G.URL:return(0,u.qzn)(r,"URL")?(0,u.z3N)(r):(0,u.mCW)(String(r));case u.q3G.RESOURCE_URL:if((0,u.qzn)(r,"ResourceURL"))return(0,u.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,u.JVY)(t)}bypassSecurityTrustStyle(t){return(0,u.L6k)(t)}bypassSecurityTrustScript(t){return(0,u.eBb)(t)}bypassSecurityTrustUrl(t){return(0,u.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,u.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ya(n){return new Qo(n.get(pe))}(u.LFG(u.zs3)),r},providedIn:"root"}),n})();var gn=U(8996),Ar=U(9751);const{isArray:fg}=Array,{getPrototypeOf:hi,prototype:Qa,keys:fi}=Object;function gc(n){if(1===n.length){const e=n[0];if(fg(e))return{args:e,keys:null};if(function zd(n){return n&&"object"==typeof n&&hi(n)===Qa}(e)){const t=fi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var bs=U(8421),Cs=U(7669),Gn=U(5403),ht=U(4004);const{isArray:Ja}=Array;function Xa(n){return(0,ht.U)(e=>function ar(n,e){return Ja(e)?n(...e):n(e)}(n,e))}function mc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Ws=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),bo=(()=>{class n extends Ws{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const Pr=new u.OlP("NgValueAccessor"),Is={provide:Pr,useExisting:(0,u.Gpc)(()=>Ts),multi:!0},Jo=new u.OlP("CompositionEventMode");let Ts=(()=>{class n extends Ws{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yc(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Jo,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[u._Bn([Is]),u.qOj]}),n})();function pi(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function eu(n){return null!=n&&"number"==typeof n.length}const vr=new u.OlP("NgValidators"),Ds=new u.OlP("NgAsyncValidators"),vc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rr{static min(e){return function Xo(n){return e=>{if(pi(e.value)||pi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Ju(n){return e=>{if(pi(e.value)||pi(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return _f(e)}static requiredTrue(e){return function wc(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ec(n){return pi(n.value)||vc.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function yf(n){return e=>pi(e.value)||!eu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return tu(e)}static pattern(e){return function Xu(n){if(!n)return Ks;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(pi(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Cc(e)}static composeAsync(e){return ra(e)}}function _f(n){return pi(n.value)?{required:!0}:null}function tu(n){return e=>eu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function Ks(n){return null}function Co(n){return null!=n}function nu(n){return(0,u.QGY)(n)?(0,gn.D)(n):n}function el(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function ea(n,e){return e.map(t=>t(n))}function ta(n){return n.map(e=>function bc(n){return!n.validate}(e)?e:t=>e.validate(t))}function Cc(n){if(!n)return null;const e=n.filter(Co);return 0==e.length?null:function(t){return el(ea(t,e))}}function na(n){return null!=n?Cc(ta(n)):null}function ra(n){if(!n)return null;const e=n.filter(Co);return 0==e.length?null:function(t){return function Qu(...n){const e=(0,Cs.jO)(n),{args:t,keys:r}=gc(n),i=new Ar.y(a=>{const{length:c}=t;if(!c)return void a.complete();const f=new Array(c);let _=c,w=c;for(let D=0;D<c;D++){let A=!1;(0,bs.Xf)(t[D]).subscribe((0,Gn.x)(a,L=>{A||(A=!0,w--),f[D]=L},()=>_--,void 0,()=>{(!_||!A)&&(w||a.next(r?mc(r,f):f),a.complete())}))}});return e?i.pipe(Xa(e)):i}(ea(t,e).map(nu)).pipe((0,ht.U)(el))}}function tl(n){return null!=n?ra(ta(n)):null}function gg(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mg(n){return n._rawValidators}function ia(n){return n._rawAsyncValidators}function Zd(n){return n?Array.isArray(n)?n:[n]:[]}function Ys(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ic(n,e){const t=Zd(e);return Zd(n).forEach(i=>{Ys(t,i)||t.push(i)}),t}function vf(n,e){return Zd(e).filter(t=>!Ys(n,t))}class nl{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=na(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tl(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yn extends nl{get formDirective(){return null}get path(){return null}}class As extends nl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ss{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let os=(()=>{class n extends ss{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(As,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]}),n})(),kr=(()=>{class n extends ss{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Yn,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]}),n})();const us="VALID",ei="INVALID",Or="PENDING",aa="DISABLED";function Ef(n){return(Sc(n)?n.validators:n)||null}function Wd(n){return Array.isArray(n)?na(n):n||null}function Dc(n,e){return(Sc(e)?e.asyncValidators:n)||null}function Ac(n){return Array.isArray(n)?tl(n):n||null}function Sc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function xc(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[t])throw new u.vHH(1001,"")}function Kd(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,"")})}class Yd{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Wd(this._rawValidators),this._composedAsyncValidatorFn=Ac(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===us}get invalid(){return this.status===ei}get pending(){return this.status==Or}get disabled(){return this.status===aa}get enabled(){return this.status!==aa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Wd(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Ac(e)}addValidators(e){this.setValidators(Ic(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ic(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vf(e,this._rawAsyncValidators))}hasValidator(e){return Ys(this._rawValidators,e)}hasAsyncValidator(e){return Ys(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Or,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aa,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=us,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===us||this.status===Or)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?aa:us}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Or,this._hasOwnPendingAsyncValidator=!0;const t=nu(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?aa:this.errors?ei:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Or)?Or:this._anyControlsHaveStatus(ei)?ei:us}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class rl extends Yd{constructor(e,t,r){super(Ef(t),Dc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Kd(this,0,e),Object.keys(e).forEach(r=>{xc(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class bf extends rl{}function Mc(n,e){return[...e.path,n]}function v(n,e){M(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Q(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ge(n,e)})}(n,e),function nt(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function de(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ge(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function b(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function p(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),k(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function m(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function M(n,e){const t=mg(n);null!==e.validator?n.setValidators(gg(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ia(n);null!==e.asyncValidator?n.setAsyncValidators(gg(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();m(e._rawValidators,i),m(e._rawAsyncValidators,i)}function k(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=mg(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=ia(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(c=>c!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return m(e._rawValidators,r),m(e._rawAsyncValidators,r),t}function Ge(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vt(n,e){M(n,e)}function sl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function If(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Pc(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Ts?t=a:function Jd(n){return Object.getPrototypeOf(n.constructor)===bo}(a)?r=a:i=a}),i||r||t||null}const Io={provide:Yn,useExisting:(0,u.Gpc)(()=>iu)},ru=(()=>Promise.resolve())();let iu=(()=>{class n extends Yn{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new rl({},na(t),tl(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ru.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),v(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ru.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ru.then(()=>{const r=this._findContainer(t.path),i=new rl({});vt(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ru.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ru.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,If(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vr,10),u.Y36(Ds,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Io]),u.qOj]}),n})();function Xd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function U_(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const ol=class extends Yd{constructor(e=null,t,r){super(Ef(t),Dc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=U_(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Xd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Xd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){U_(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},H_={provide:As,useExisting:(0,u.Gpc)(()=>al)},wg=(()=>Promise.resolve())();let al=(()=>{class n extends As{constructor(t,r,i,a,c){super(),this._changeDetectorRef=c,this.control=new ol,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Pc(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),sl(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){v(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){wg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.D6c)(r);wg.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Mc(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Yn,9),u.Y36(vr,10),u.Y36(Ds,10),u.Y36(Pr,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([H_]),u.qOj,u.TTD]}),n})(),To=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const XT={provide:Pr,useExisting:(0,u.Gpc)(()=>Eg),multi:!0};let Eg=(()=>{class n extends bo{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([XT]),u.qOj]}),n})(),G_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Z_=new u.OlP("NgModelWithFormControlWarning"),rD={provide:Yn,useExisting:(0,u.Gpc)(()=>ll)};let ll=(()=>{class n extends Yn{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(k(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return v(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){p(t.control||null,t,!1),function Tf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,If(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(p(r||null,t),(n=>n instanceof ol)(i)&&(v(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);vt(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function an(n,e){return k(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){M(this.form,this),this._oldForm&&k(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vr,10),u.Y36(Ds,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([rD]),u.qOj,u.TTD]}),n})();const Uw={provide:As,useExisting:(0,u.Gpc)(()=>eh)};let eh=(()=>{class n extends As{constructor(t,r,i,a,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Pc(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),sl(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Mc(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(Yn,13),u.Y36(vr,10),u.Y36(Ds,10),u.Y36(Pr,10),u.Y36(Z_,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([Uw]),u.qOj,u.TTD]}),n})();const Rc={provide:Pr,useExisting:(0,u.Gpc)(()=>Ig),multi:!0};function Bw(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Ig=(()=>{class n extends bo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=Bw(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function sD(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([Rc]),u.qOj]}),n})(),jw=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Bw(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(Ig,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const oD={provide:Pr,useExisting:(0,u.Gpc)(()=>K_),multi:!0};function la(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let K_=(()=>{class n extends bo{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(a=>this._getOptionId(a));r=(a,c)=>{a._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,a)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],a=r.selectedOptions;if(void 0!==a){const c=a;for(let f=0;f<c.length;f++){const w=this._getOptionValue(c[f].value);i.push(w)}}else{const c=r.options;for(let f=0;f<c.length;f++){const _=c[f];if(_.selected){const w=this._getOptionValue(_.value);i.push(w)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function th(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([oD]),u.qOj]}),n})(),$w=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(la(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(la(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(K_,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();let kc=(()=>{class n{constructor(){this._validator=Ks}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ks,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const uD={provide:vr,useExisting:(0,u.Gpc)(()=>ls),multi:!0};let ls=(()=>{class n extends kc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.D6c,this.createValidator=t=>_f}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([uD]),u.qOj]}),n})();const sR={provide:vr,useExisting:(0,u.Gpc)(()=>Yw),multi:!0};let Yw=(()=>{class n extends kc{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>function Hw(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>tu(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("maxlength",r._enabled?r.maxlength:null)},inputs:{maxlength:"maxlength"},features:[u._Bn([sR]),u.qOj]}),n})(),Qw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[G_]}),n})(),dD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qw]}),n})(),Jw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Z_,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Qw]}),n})();class Xw extends Yd{constructor(e,t,r){super(Ef(t),Dc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Kd(this,0,e),e.forEach((r,i)=>{xc(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function X_(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Sf=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return X_(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new rl(i,a)}record(t,r=null){const i=this._reduceControls(t);return new bf(i,r)}control(t,r,i){let a={};return this.useNonNullable?(X_(r)?a=r:(a.validators=r,a.asyncValidators=i),new ol(t,{...a,nonNullable:!0})):new ol(t,r,i)}array(t,r,i){const a=t.map(c=>this._createControl(c));return new Xw(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof ol||t instanceof Yd?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:Jw}),n})();class eE{}const ca="*";function pD(n,e){return{type:7,name:n,definitions:e,options:{}}}function tE(n,e=null){return{type:4,styles:e,timings:n}}function nE(n,e=null){return{type:2,steps:n,options:e}}function xf(n){return{type:6,styles:n,offset:null}}function rE(n,e,t){return{type:0,name:n,styles:e,options:t}}function rh(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function ty(n){Promise.resolve().then(n)}class ih{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ty(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Ag{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?ty(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==a&&this._onFinish()}),c.onDestroy(()=>{++r==a&&this._onDestroy()}),c.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((c,f)=>Math.max(c,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Sg(n){return new u.vHH(3e3,!1)}function OD(){return typeof window<"u"&&typeof window.document<"u"}function Pg(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function su(n){switch(n.length){case 0:return new ih;case 1:return n[0];default:return new Ag(n)}}function Rg(n,e,t,r,i=new Map,a=new Map){const c=[],f=[];let _=-1,w=null;if(r.forEach(D=>{const A=D.get("offset"),L=A==_,j=L&&w||new Map;D.forEach((q,ee)=>{let oe=ee,Ue=q;if("offset"!==ee)switch(oe=e.normalizePropertyName(oe,c),Ue){case"!":Ue=i.get(ee);break;case ca:Ue=a.get(ee);break;default:Ue=e.normalizeStyleValue(ee,oe,Ue,c)}j.set(oe,Ue)}),L||f.push(j),w=j,_=A}),c.length)throw function SD(n){return new u.vHH(3502,!1)}();return f}function Rf(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&oy(t,"start",n)));break;case"done":n.onDone(()=>r(t&&oy(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&oy(t,"destroy",n)))}}function oy(n,e,t){const a=kf(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(a._data=c),a}function kf(n,e,t,r,i="",a=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!c}}function gi(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function dE(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ay=(n,e)=>!1,hE=(n,e,t)=>[],fE=null;function uy(n){const e=n.parentNode||n.host;return e===fE?null:e}(Pg()||typeof Element<"u")&&(OD()?(fE=(()=>document.documentElement)(),ay=(n,e)=>{for(;e;){if(e===n)return!0;e=uy(e)}return!1}):ay=(n,e)=>n.contains(e),hE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Qs=null,da=!1;const VD=ay,ly=hE;let cy=(()=>{class n{validateStyleProperty(t){return function LD(n){Qs||(Qs=function pR(){return typeof document<"u"?document.body:null}()||{},da=!!Qs.style&&"WebkitAppearance"in Qs.style);let e=!0;return Qs.style&&!function FD(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Qs.style,!e&&da&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Qs.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return VD(t,r)}getParentElement(t){return uy(t)}query(t,r,i){return ly(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,c,f=[],_){return new ih(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),pE=(()=>{class n{}return n.NOOP=new cy,n})();const dy="ng-enter",kg="ng-leave",cs="ng-trigger",Ng=".ng-trigger",hy="ng-animating",fy=".ng-animating";function ou(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:py(parseFloat(e[1]),e[2])}function py(n,e){return"s"===e?1e3*n:n}function Og(n,e,t){return n.hasOwnProperty("duration")?n:function yE(n,e,t){let i,a=0,c="";if("string"==typeof n){const f=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===f)return e.push(Sg()),{duration:0,delay:0,easing:""};i=py(parseFloat(f[1]),f[2]);const _=f[3];null!=_&&(a=py(parseFloat(_),f[4]));const w=f[5];w&&(c=w)}else i=n;if(!t){let f=!1,_=e.length;i<0&&(e.push(function oE(){return new u.vHH(3100,!1)}()),f=!0),a<0&&(e.push(function aE(){return new u.vHH(3101,!1)}()),f=!0),f&&e.splice(_,0,Sg())}return{duration:i,delay:a,easing:c}}(n,e,t)}function Nf(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function vE(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function au(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function gy(n,e,t){return t?e+":"+t+";":""}function my(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=gy(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=gy(0,Lc(t),n.style[t]));n.setAttribute("style",e)}function ha(n,e,t){n.style&&(e.forEach((r,i)=>{const a=Lg(i);t&&!t.has(i)&&t.set(i,n.style[a]),n.style[a]=r}),Pg()&&my(n))}function Fc(n,e){n.style&&(e.forEach((t,r)=>{const i=Lg(r);n.style[i]=""}),Pg()&&my(n))}function ah(n){return Array.isArray(n)?1==n.length?n[0]:nE(n):n}const Fg=new RegExp("{{\\s*(.+?)\\s*}}","g");function wE(n){let e=[];if("string"==typeof n){let t;for(;t=Fg.exec(n);)e.push(t[1]);Fg.lastIndex=0}return e}function Of(n,e,t){const r=n.toString(),i=r.replace(Fg,(a,c)=>{let f=e[c];return null==f&&(t.push(function yD(n){return new u.vHH(3003,!1)}()),f=""),f.toString()});return i==r?n:i}function _y(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const EE=/-+([a-z0-9])/g;function Lg(n){return n.replace(EE,(...e)=>e[1].toUpperCase())}function Lc(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Hi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function ny(n){return new u.vHH(3004,!1)}()}}function bE(n,e){return window.getComputedStyle(n)[e]}function HD(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function IE(n,e,t){if(":"==n[0]){const _=function Vg(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function DD(n){return new u.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function TD(n){return new u.vHH(3015,!1)}()),e;const i=r[1],a=r[2],c=r[3];e.push(TE(i,c));"<"==a[0]&&!("*"==i&&"*"==c)&&e.push(TE(c,i))}(r,t,e)):t.push(n),t}const Ug=new Set(["true","1"]),Ff=new Set(["false","0"]);function TE(n,e){const t=Ug.has(n)||Ff.has(n),r=Ug.has(e)||Ff.has(e);return(i,a)=>{let c="*"==n||n==i,f="*"==e||e==a;return!c&&t&&"boolean"==typeof i&&(c=i?Ug.has(n):Ff.has(n)),!f&&r&&"boolean"==typeof a&&(f=a?Ug.has(e):Ff.has(e)),c&&f}}const GD=new RegExp("s*:selfs*,?","g");function Ey(n,e,t,r){return new SE(n).build(e,t,r)}class SE{constructor(e){this._driver=e}build(e,t,r){const i=new ME(t);return this._resetContextStyleTimingState(i),Hi(this,ah(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function vD(){return new u.vHH(3006,!1)}()),e.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),0==f.type){const _=f,w=_.name;w.toString().split(/\s*,\s*/).forEach(D=>{_.name=D,a.push(this.visitState(_,t))}),_.name=w}else if(1==f.type){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function ry(){return new u.vHH(3007,!1)}())}),{type:7,name:e.name,states:a,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,c=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(_=>{wE(_).forEach(w=>{c.hasOwnProperty(w)||a.add(w)})})}),a.size&&(_y(a.values()),t.errors.push(function Mg(n,e){return new u.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Hi(this,ah(e.animation),t);return{type:1,matchers:HD(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:lu(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Hi(this,r,t)),options:lu(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(c=>{t.currentTime=r;const f=Hi(this,c,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:3,steps:a,options:lu(e.options)}}visitAnimate(e,t){const r=function _R(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Cy(Og(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=Cy(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=Og(t,e);return Cy(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:xf({});if(5==a.type)i=this.visitKeyframes(a,t);else{let c=e.styles,f=!1;if(!c){f=!0;const w={};r.easing&&(w.easing=r.easing),c=xf(w)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let f of i)"string"==typeof f?f===ca?r.push(f):t.errors.push(new u.vHH(3002,!1)):r.push(vE(f));let a=!1,c=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(c=f.get("easing"),f.delete("easing")),!a))for(let _ of f.values())if(_.toString().indexOf("{{")>=0){a=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((f,_)=>{const w=t.collectedStyles.get(t.currentQuerySelector),D=w.get(_);let A=!0;D&&(a!=i&&a>=D.startTime&&i<=D.endTime&&(t.errors.push(function iy(n,e,t,r,i){return new u.vHH(3010,!1)}()),A=!1),a=D.startTime),A&&w.set(_,{startTime:a,endTime:i}),t.options&&function BD(n,e,t){const r=e.params||{},i=wE(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function Nc(n){return new u.vHH(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function ED(){return new u.vHH(3011,!1)}()),r;let a=0;const c=[];let f=!1,_=!1,w=0;const D=e.steps.map(Ue=>{const Ze=this._makeStyleAst(Ue,t);let je=null!=Ze.offset?Ze.offset:function by(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Ze.styles),Ye=0;return null!=je&&(a++,Ye=Ze.offset=je),_=_||Ye<0||Ye>1,f=f||Ye<w,w=Ye,c.push(Ye),Ze});_&&t.errors.push(function bD(){return new u.vHH(3012,!1)}()),f&&t.errors.push(function uE(){return new u.vHH(3200,!1)}());const A=e.steps.length;let L=0;a>0&&a<A?t.errors.push(function sh(){return new u.vHH(3202,!1)}()):0==a&&(L=1/(A-1));const j=A-1,q=t.currentTime,ee=t.currentAnimateTimings,oe=ee.duration;return D.forEach((Ue,Ze)=>{const je=L>0?Ze==j?1:L*Ze:c[Ze],Ye=je*oe;t.currentTime=q+ee.delay+Ye,ee.duration=Ye,this._validateStyleAst(Ue,t),Ue.offset=je,r.styles.push(Ue)}),r}visitReference(e,t){return{type:8,animation:Hi(this,ah(e.animation),t),options:lu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:lu(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:lu(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,c]=function zD(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(GD,"")),n=n.replace(/@\*/g,Ng).replace(/@\w+/g,t=>Ng+"-"+t.slice(1)).replace(/:animating/g,fy),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,gi(t.collectedStyles,t.currentQuerySelector,new Map);const f=Hi(this,ah(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:f,originalSelector:e.selector,options:lu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function CD(){return new u.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Og(e.timings,t.errors,!0);return{type:12,animation:Hi(this,ah(e.animation),t),timings:r,options:null}}}class ME{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function lu(n){return n?(n=Nf(n)).params&&(n.params=function xE(n){return n?Nf(n):null}(n.params)):n={},n}function Cy(n,e,t){return{duration:n,delay:e,easing:t}}function PE(n,e,t,r,i,a,c=null,f=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:c,subTimeline:f}}class cu{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Bg=new RegExp(":enter","g"),NE=new RegExp(":leave","g");function Iy(n,e,t,r,i,a=new Map,c=new Map,f,_,w=[]){return(new Ty).buildKeyframes(n,e,t,r,i,a,c,f,_,w)}class Ty{buildKeyframes(e,t,r,i,a,c,f,_,w,D=[]){w=w||new cu;const A=new Lf(e,t,w,i,a,D,[]);A.options=_;const L=_.delay?ou(_.delay):0;A.currentTimeline.delayNextStep(L),A.currentTimeline.setStyles([c],null,A.errors,_),Hi(this,r,A);const j=A.timelines.filter(q=>q.containsAnimation());if(j.length&&f.size){let q;for(let ee=j.length-1;ee>=0;ee--){const oe=j[ee];if(oe.element===t){q=oe;break}}q&&!q.allowOnlyTimelineStyles()&&q.setStyles([f],null,A.errors,_)}return j.length?j.map(q=>q.buildKeyframes()):[PE(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);a!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const a=i?.delay;if(a){const c="number"==typeof a?a:ou(Of(a,i?.params??{},t.errors));r.delayNextStep(c)}}}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const c=null!=r.duration?ou(r.duration):null,f=null!=r.delay?ou(r.delay):null;return 0!==c&&e.forEach(_=>{const w=t.appendInstructionToTimeline(_,c,f);a=Math.max(a,w.duration+w.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Hi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Js);const c=ou(a.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Hi(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?ou(e.options.delay):0;e.steps.forEach(c=>{const f=t.createSubContext(e.options);a&&f.delayNextStep(a),Hi(this,c,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Og(t.params?Of(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,e.styles.forEach(_=>{f.forwardTime((_.offset||0)*a),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?ou(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Js);let c=r;const f=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((w,D)=>{t.currentQueryIndex=D;const A=t.createSubContext(e.options,w);a&&A.delayNextStep(a),w===t.element&&(_=A.currentTimeline),Hi(this,e.animation,A),A.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,A.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,c=Math.abs(a.duration),f=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const D=t.currentTimeline;_&&D.delayNextStep(_);const A=D.currentTime;Hi(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-A+(i.startTime-r.currentTimeline.startTime)}}const Js={};class Lf{constructor(e,t,r,i,a,c,f,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=c,this.timelines=f,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Js,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new Vf(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=ou(r.duration)),null!=r.delay&&(i.delay=ou(r.delay));const a=r.params;if(a){let c=i.params;c||(c=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!c.hasOwnProperty(f))&&(c[f]=Of(a[f],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new Lf(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=Js,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},a=new Dy(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,c){let f=[];if(i&&f.push(this.element),e.length>0){e=(e=e.replace(Bg,"."+this._enterClassName)).replace(NE,"."+this._leaveClassName);let w=this._driver.query(this.element,e,1!=r);0!==r&&(w=r<0?w.slice(w.length+r,w.length):w.slice(0,r)),f.push(...w)}return!a&&0==f.length&&c.push(function ID(n){return new u.vHH(3014,!1)}()),f}}class Vf{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Vf(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ca),this._currentKeyframe.set(t,ca);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},c=function OE(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let a of r)t.set(a,ca)}else au(i,t)}),t}(e,this._globalTimelineStyles);for(let[f,_]of c){const w=Of(_,a,r);this._pendingStyles.set(f,w),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??ca),this._updateStyle(f,w)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const w=au(f,new Map,this._backFill);w.forEach((D,A)=>{"!"===D?e.add(A):D===ca&&t.add(A)}),r||w.set("offset",_/this.duration),i.push(w)});const a=e.size?_y(e.values()):[],c=t.size?_y(t.values()):[];if(r){const f=i[0],_=new Map(f);f.set("offset",0),_.set("offset",1),i=[f,_]}return PE(this.element,i,a,c,this.duration,this.startTime,this.easing,!1)}}class Dy extends Vf{constructor(e,t,r,i,a,c,f=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],c=r+t,f=t/c,_=au(e[0]);_.set("offset",0),a.push(_);const w=au(e[0]);w.set("offset",qD(f)),a.push(w);const D=e.length-1;for(let A=1;A<=D;A++){let L=au(e[A]);const j=L.get("offset");L.set("offset",qD((t+j*r)/c)),a.push(L)}r=c,t=0,i="",e=a}return PE(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function qD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class uh{}const Sy=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class xy extends uh{normalizePropertyName(e,t){return Lg(e)}normalizeStyleValue(e,t,r,i){let a="";const c=r.toString().trim();if(Sy.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function xg(n,e){return new u.vHH(3005,!1)}())}return c+a}}function jg(n,e,t,r,i,a,c,f,_,w,D,A,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:c,timelines:f,queriedElements:_,preStyleProps:w,postStyleProps:D,totalTime:A,errors:L}}const FE={};class LE{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function ZD(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,a,c,f,_,w,D){const A=[],L=this.ast.options&&this.ast.options.params||FE,q=this.buildStyles(r,f&&f.params||FE,A),ee=_&&_.params||FE,oe=this.buildStyles(i,ee,A),Ue=new Set,Ze=new Map,je=new Map,Ye="void"===i,Ft={params:WD(ee,L),delay:this.ast.options?.delay},Bt=D?[]:Iy(e,t,this.ast.animation,a,c,q,oe,Ft,w,A);let vn=0;if(Bt.forEach(ms=>{vn=Math.max(ms.duration+ms.delay,vn)}),A.length)return jg(t,this._triggerName,r,i,Ye,q,oe,[],[],Ze,je,vn,A);Bt.forEach(ms=>{const fd=ms.element,pV=gi(Ze,fd,new Set);ms.preStyleProps.forEach(tg=>pV.add(tg));const Nw=gi(je,fd,new Set);ms.postStyleProps.forEach(tg=>Nw.add(tg)),fd!==t&&Ue.add(fd)});const Sr=_y(Ue.values());return jg(t,this._triggerName,r,i,Ye,q,oe,Bt,Sr,Ze,je,vn)}}function WD(n,e){const t=Nf(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class VE{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Nf(this.defaultParams);return Object.keys(e).forEach(a=>{const c=e[a];null!==c&&(i[a]=c)}),this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((c,f)=>{c&&(c=Of(c,i,t));const _=this.normalizer.normalizePropertyName(f,t);c=this.normalizer.normalizeStyleValue(f,_,c,t),r.set(_,c)})}),r}}class KD{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new VE(i.style,i.options&&i.options.params||{},r))}),My(this.states,"true","1"),My(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new LE(e,i,this.states))}),this.fallbackTransition=function wR(n,e,t){return new LE(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,f)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function My(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const UE=new cu;class YD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],a=Ey(this._driver,t,r,[]);if(r.length)throw function cE(n){return new u.vHH(3503,!1)}();this._animations.set(e,a)}_buildPlayer(e,t,r){const i=e.element,a=Rg(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations.get(e);let c;const f=new Map;if(a?(c=Iy(this._driver,t,a,dy,kg,new Map,new Map,r,UE,i),c.forEach(D=>{const A=gi(f,D.element,new Map);D.postStyleProps.forEach(L=>A.set(L,null))})):(i.push(function cR(){return new u.vHH(3300,!1)}()),c=[]),i.length)throw function xD(n){return new u.vHH(3504,!1)}();f.forEach((D,A)=>{D.forEach((L,j)=>{D.set(j,this._driver.computeStyle(A,j,ca))})});const w=su(c.map(D=>{const A=f.get(D.element);return this._buildPlayer(D,new Map,A)}));return this._playersById.set(e,w),w.onDestroy(()=>this.destroy(e)),this.players.push(w),w}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Mf(n){return new u.vHH(3301,!1)}();return t}listen(e,t,r,i){const a=kf(t,"","","");return Rf(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const $g="ng-animate-queued",BE="ng-animate-disabled",TR=[],QD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},DR={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ao="__ng_removed";class jE{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function Py(n){return n??null}(r?e.value:e),r){const a=Nf(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Xs="void",Uf=new jE(Xs);class JD{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ss(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function MD(n,e){return new u.vHH(3302,!1)}();if(null==r||0==r.length)throw function oh(n){return new u.vHH(3303,!1)}();if(!function cl(n){return"start"==n||"done"==n}(r))throw function Pf(n,e){return new u.vHH(3400,!1)}();const a=gi(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};a.push(c);const f=gi(this._engine.statesByElement,e,new Map);return f.has(t)||(Ss(e,cs),Ss(e,cs+"-"+t),f.set(t,Uf)),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(c);_>=0&&a.splice(_,1),this._triggers.has(t)||f.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function PD(n){return new u.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),c=new Bf(this.id,t,e);let f=this._engine.statesByElement.get(e);f||(Ss(e,cs),Ss(e,cs+"-"+t),this._engine.statesByElement.set(e,f=new Map));let _=f.get(t);const w=new jE(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&w.absorbOptions(_.options),f.set(t,w),_||(_=Uf),w.value!==Xs&&_.value===w.value){if(!function ky(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(_.params,w.params)){const ee=[],oe=a.matchStyles(_.value,_.params,ee),Ue=a.matchStyles(w.value,w.params,ee);ee.length?this._engine.reportError(ee):this._engine.afterFlush(()=>{Fc(e,oe),ha(e,Ue)})}return}const L=gi(this._engine.playersByElement,e,[]);L.forEach(ee=>{ee.namespaceId==this.id&&ee.triggerName==t&&ee.queued&&ee.destroy()});let j=a.matchTransition(_.value,w.value,e,w.params),q=!1;if(!j){if(!i)return;j=a.fallbackTransition,q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:j,fromState:_,toState:w,player:c,isFallbackTransition:q}),q||(Ss(e,$g),c.onStart(()=>{lh(e,$g)})),c.onDone(()=>{let ee=this.players.indexOf(c);ee>=0&&this.players.splice(ee,1);const oe=this._engine.playersByElement.get(e);if(oe){let Ue=oe.indexOf(c);Ue>=0&&oe.splice(Ue,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,Ng,!0);r.forEach(i=>{if(i[Ao])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),c=new Map;if(a){const f=[];if(a.forEach((_,w)=>{if(c.set(w,_.value),this._triggers.has(w)){const D=this.trigger(e,w,Xs,i);D&&f.push(D)}}),f.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&su(f).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const c=a.name;if(i.has(c))return;i.add(c);const _=this._triggers.get(c).fallbackTransition,w=r.get(c)||Uf,D=new jE(Xs),A=new Bf(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:w,toState:D,player:A,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ao];(!a||a===QD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ss(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,c=this._elementListeners.get(a);c&&c.forEach(f=>{if(f.name==r.triggerName){const _=kf(a,r.triggerName,r.fromState.value,r.toState.value);_._data=e,Rf(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==a||0==c?a-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class $E{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new JD(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const w=r.indexOf(_);r.splice(w+1,0,e),c=!0;break}f=this.driver.getParentElement(f)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(e,t,r,i){if(Hg(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Hg(t))return;const a=t[Ao];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ss(e,BE)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),lh(e,BE))}removeNode(e,t,r,i){if(Hg(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ao]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return Hg(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,Ng,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,fy,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return su(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ao];if(t&&t.setForRemoval){if(e[Ao]=QD,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(BE)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ss(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?su(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function dR(n){return new u.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new cu,i=[],a=new Map,c=[],f=new Map,_=new Map,w=new Map,D=new Set;this.disabledNodes.forEach(Ct=>{D.add(Ct);const jt=this.driver.query(Ct,".ng-animate-queued",!0);for(let Ht=0;Ht<jt.length;Ht++)D.add(jt[Ht])});const A=this.bodyNode,L=Array.from(this.statesByElement.keys()),j=zE(L,this.collectedEnterElements),q=new Map;let ee=0;j.forEach((Ct,jt)=>{const Ht=dy+ee++;q.set(jt,Ht),Ct.forEach(An=>Ss(An,Ht))});const oe=[],Ue=new Set,Ze=new Set;for(let Ct=0;Ct<this.collectedLeaveElements.length;Ct++){const jt=this.collectedLeaveElements[Ct],Ht=jt[Ao];Ht&&Ht.setForRemoval&&(oe.push(jt),Ue.add(jt),Ht.hasAnimation?this.driver.query(jt,".ng-star-inserted",!0).forEach(An=>Ue.add(An)):Ze.add(jt))}const je=new Map,Ye=zE(L,Array.from(Ue));Ye.forEach((Ct,jt)=>{const Ht=kg+ee++;je.set(jt,Ht),Ct.forEach(An=>Ss(An,Ht))}),e.push(()=>{j.forEach((Ct,jt)=>{const Ht=q.get(jt);Ct.forEach(An=>lh(An,Ht))}),Ye.forEach((Ct,jt)=>{const Ht=je.get(jt);Ct.forEach(An=>lh(An,Ht))}),oe.forEach(Ct=>{this.processLeaveNode(Ct)})});const Ft=[],Bt=[];for(let Ct=this._namespaceList.length-1;Ct>=0;Ct--)this._namespaceList[Ct].drainQueuedTransitions(t).forEach(Ht=>{const An=Ht.player,Oi=Ht.element;if(Ft.push(An),this.collectedEnterElements.length){const _s=Oi[Ao];if(_s&&_s.setForMove){if(_s.previousTriggersValues&&_s.previousTriggersValues.has(Ht.triggerName)){const ng=_s.previousTriggersValues.get(Ht.triggerName),ba=this.statesByElement.get(Ht.element);if(ba&&ba.has(Ht.triggerName)){const YT=ba.get(Ht.triggerName);YT.value=ng,ba.set(Ht.triggerName,YT)}}return void An.destroy()}}const Ll=!A||!this.driver.containsElement(A,Oi),Vo=je.get(Oi),Jh=q.get(Oi),xr=this._buildInstruction(Ht,r,Jh,Vo,Ll);if(xr.errors&&xr.errors.length)return void Bt.push(xr);if(Ll)return An.onStart(()=>Fc(Oi,xr.fromStyles)),An.onDestroy(()=>ha(Oi,xr.toStyles)),void i.push(An);if(Ht.isFallbackTransition)return An.onStart(()=>Fc(Oi,xr.fromStyles)),An.onDestroy(()=>ha(Oi,xr.toStyles)),void i.push(An);const _V=[];xr.timelines.forEach(_s=>{_s.stretchStartingKeyframe=!0,this.disabledNodes.has(_s.element)||_V.push(_s)}),xr.timelines=_V,r.append(Oi,xr.timelines),c.push({instruction:xr,player:An,element:Oi}),xr.queriedElements.forEach(_s=>gi(f,_s,[]).push(An)),xr.preStyleProps.forEach((_s,ng)=>{if(_s.size){let ba=_.get(ng);ba||_.set(ng,ba=new Set),_s.forEach((YT,tR)=>ba.add(tR))}}),xr.postStyleProps.forEach((_s,ng)=>{let ba=w.get(ng);ba||w.set(ng,ba=new Set),_s.forEach((YT,tR)=>ba.add(tR))})});if(Bt.length){const Ct=[];Bt.forEach(jt=>{Ct.push(function kD(n,e){return new u.vHH(3505,!1)}())}),Ft.forEach(jt=>jt.destroy()),this.reportError(Ct)}const vn=new Map,Sr=new Map;c.forEach(Ct=>{const jt=Ct.element;r.has(jt)&&(Sr.set(jt,jt),this._beforeAnimationBuild(Ct.player.namespaceId,Ct.instruction,vn))}),i.forEach(Ct=>{const jt=Ct.element;this._getPreviousPlayers(jt,!1,Ct.namespaceId,Ct.triggerName,null).forEach(An=>{gi(vn,jt,[]).push(An),An.destroy()})});const ms=oe.filter(Ct=>Uc(Ct,_,w)),fd=new Map;GE(fd,this.driver,Ze,w,ca).forEach(Ct=>{Uc(Ct,_,w)&&ms.push(Ct)});const Nw=new Map;j.forEach((Ct,jt)=>{GE(Nw,this.driver,new Set(Ct),_,"!")}),ms.forEach(Ct=>{const jt=fd.get(Ct),Ht=Nw.get(Ct);fd.set(Ct,new Map([...Array.from(jt?.entries()??[]),...Array.from(Ht?.entries()??[])]))});const tg=[],gV=[],mV={};c.forEach(Ct=>{const{element:jt,player:Ht,instruction:An}=Ct;if(r.has(jt)){if(D.has(jt))return Ht.onDestroy(()=>ha(jt,An.toStyles)),Ht.disabled=!0,Ht.overrideTotalTime(An.totalTime),void i.push(Ht);let Oi=mV;if(Sr.size>1){let Vo=jt;const Jh=[];for(;Vo=Vo.parentNode;){const xr=Sr.get(Vo);if(xr){Oi=xr;break}Jh.push(Vo)}Jh.forEach(xr=>Sr.set(xr,Oi))}const Ll=this._buildAnimation(Ht.namespaceId,An,vn,a,Nw,fd);if(Ht.setRealPlayer(Ll),Oi===mV)tg.push(Ht);else{const Vo=this.playersByElement.get(Oi);Vo&&Vo.length&&(Ht.parentPlayer=su(Vo)),i.push(Ht)}}else Fc(jt,An.fromStyles),Ht.onDestroy(()=>ha(jt,An.toStyles)),gV.push(Ht),D.has(jt)&&i.push(Ht)}),gV.forEach(Ct=>{const jt=a.get(Ct.element);if(jt&&jt.length){const Ht=su(jt);Ct.setRealPlayer(Ht)}}),i.forEach(Ct=>{Ct.parentPlayer?Ct.syncPlayerEvents(Ct.parentPlayer):Ct.destroy()});for(let Ct=0;Ct<oe.length;Ct++){const jt=oe[Ct],Ht=jt[Ao];if(lh(jt,kg),Ht&&Ht.hasAnimation)continue;let An=[];if(f.size){let Ll=f.get(jt);Ll&&Ll.length&&An.push(...Ll);let Vo=this.driver.query(jt,fy,!0);for(let Jh=0;Jh<Vo.length;Jh++){let xr=f.get(Vo[Jh]);xr&&xr.length&&An.push(...xr)}}const Oi=An.filter(Ll=>!Ll.destroyed);Oi.length?XD(this,jt,Oi):this.processLeaveNode(jt)}return oe.length=0,tg.forEach(Ct=>{this.players.push(Ct),Ct.onDone(()=>{Ct.destroy();const jt=this.players.indexOf(Ct);this.players.splice(jt,1)}),Ct.play()}),tg}elementContainsData(e,t){let r=!1;const i=t[Ao];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let c=[];if(t){const f=this.playersByQueriedElement.get(e);f&&(c=f)}else{const f=this.playersByElement.get(e);if(f){const _=!a||a==Xs;f.forEach(w=>{w.queued||!_&&w.triggerName!=i||c.push(w)})}}return(r||i)&&(c=c.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),c}_beforeAnimationBuild(e,t,r){const a=t.element,c=t.isRemovalTransition?void 0:e,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const w=_.element,D=w!==a,A=gi(r,w,[]);this._getPreviousPlayers(w,D,c,f,t.toState).forEach(j=>{const q=j.getRealPlayer();q.beforeDestroy&&q.beforeDestroy(),j.destroy(),A.push(j)})}Fc(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,c){const f=t.triggerName,_=t.element,w=[],D=new Set,A=new Set,L=t.timelines.map(q=>{const ee=q.element;D.add(ee);const oe=ee[Ao];if(oe&&oe.removedBeforeQueried)return new ih(q.duration,q.delay);const Ue=ee!==_,Ze=function Gg(n){const e=[];return Vc(n,e),e}((r.get(ee)||TR).map(vn=>vn.getRealPlayer())).filter(vn=>!!vn.element&&vn.element===ee),je=a.get(ee),Ye=c.get(ee),Ft=Rg(0,this._normalizer,0,q.keyframes,je,Ye),Bt=this._buildPlayer(q,Ft,Ze);if(q.subTimeline&&i&&A.add(ee),Ue){const vn=new Bf(e,f,ee);vn.setRealPlayer(Bt),w.push(vn)}return Bt});w.forEach(q=>{gi(this.playersByQueriedElement,q.element,[]).push(q),q.onDone(()=>function HE(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,q.element,q))}),D.forEach(q=>Ss(q,hy));const j=su(L);return j.onDestroy(()=>{D.forEach(q=>lh(q,hy)),ha(_,t.toStyles)}),A.forEach(q=>{gi(i,q,[]).push(j)}),j}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ih(e.duration,e.delay)}}class Bf{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ih,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Rf(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){gi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Hg(n){return n&&1===n.nodeType}function Ry(n,e){const t=n.style.display;return n.style.display=e??"none",t}function GE(n,e,t,r,i){const a=[];t.forEach(_=>a.push(Ry(_)));const c=[];r.forEach((_,w)=>{const D=new Map;_.forEach(A=>{const L=e.computeStyle(w,A,i);D.set(A,L),(!L||0==L.length)&&(w[Ao]=DR,c.push(w))}),n.set(w,D)});let f=0;return t.forEach(_=>Ry(_,a[f++])),c}function zE(n,e){const t=new Map;if(n.forEach(f=>t.set(f,[])),0==e.length)return t;const i=new Set(e),a=new Map;function c(f){if(!f)return 1;let _=a.get(f);if(_)return _;const w=f.parentNode;return _=t.has(w)?w:i.has(w)?1:c(w),a.set(f,_),_}return e.forEach(f=>{const _=c(f);1!==_&&t.get(_).push(f)}),t}function Ss(n,e){n.classList?.add(e)}function lh(n,e){n.classList?.remove(e)}function XD(n,e,t){su(t).onDone(()=>n.processLeaveNode(e))}function Vc(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Ag?Vc(r.players,e):e.push(r)}}function Uc(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class ch{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new $E(e,t,r),this._timelineEngine=new YD(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const c=e+"-"+i;let f=this._triggerCache[c];if(!f){const _=[],D=Ey(this._driver,a,_,[]);if(_.length)throw function lE(n,e){return new u.vHH(3404,!1)}();f=function vR(n,e,t){return new KD(n,e,t)}(i,D,this._normalizer),this._triggerCache[c]=f}this._transitionEngine.registerTrigger(t,i,f)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,c]=dE(r);this._timelineEngine.command(a,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[c,f]=dE(r);return this._timelineEngine.listen(c,t,f,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let qE=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&ha(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ha(this._element,this._initialStyles),this._endStyles&&(ha(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Fc(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Fc(this._element,this._endStyles),this._endStyles=null),ha(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function qg(n){let e=null;return n.forEach((t,r)=>{(function Ny(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Zg{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:bE(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class ZE{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return VD(e,t)}getParentElement(e){return uy(e)}query(e,t,r){return ly(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(_.easing=a);const w=new Map,D=c.filter(j=>j instanceof Zg);(function jD(n,e){return 0===n||0===e})(r,i)&&D.forEach(j=>{j.currentSnapshot.forEach((q,ee)=>w.set(ee,q))});let A=function UD(n){return n.length?n[0]instanceof Map?n:n.map(e=>vE(e)):[]}(t).map(j=>au(j));A=function yy(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((a,c)=>{r.has(c)||i.push(c),r.set(c,a)}),i.length)for(let a=1;a<e.length;a++){let c=e[a];i.forEach(f=>c.set(f,bE(n,f)))}}return e}(e,A,w);const L=function zg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=qg(e[0]),e.length>1&&(r=qg(e[e.length-1]))):e instanceof Map&&(t=qg(e)),t||r?new qE(n,t,r):null}(e,A);return new Zg(e,A,_,L)}}let Oy=(()=>{class n extends eE{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?nE(t):t;return WE(this._renderer,null,r,"register",[i]),new eA(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class eA extends class ey{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new AR(this._id,e,t||{},this._renderer)}}class AR{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return WE(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function WE(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const KE="@.disabled";let YE=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,c)=>{const f=c?.parentNode(a);f&&c.removeChild(f,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let D=this._rendererCache.get(a);return D||(D=new Fy("",a,this.engine,()=>this._rendererCache.delete(a)),this._rendererCache.set(a,D)),D}const c=r.id,f=r.id+"-"+this._currentId;this._currentId++,this.engine.register(f,t);const _=D=>{Array.isArray(D)?D.forEach(_):this.engine.registerTrigger(c,f,t,D.name,D)};return r.data.animation.forEach(_),new tA(this,f,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[c,f]=a;c(f)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(ch),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class Fy{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?a=>t.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==KE?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class tA extends Fy{constructor(e,t,r,i,a){super(t,r,i,a),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==KE?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function xs(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.slice(1),c="";return"@"!=a.charAt(0)&&([a,c]=function QE(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,c,f=>{this.factory.scheduleListenerCallback(f._data||-1,r,f)})}return this.delegate.listen(e,t,r)}}let nA=(()=>{class n extends ch{constructor(t,r,i,a){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe),u.LFG(pE),u.LFG(uh),u.LFG(u.z2F))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Wg=[{provide:eE,useClass:Oy},{provide:uh,useFactory:function SR(){return new xy}},{provide:ch,useClass:nA},{provide:u.FYo,useFactory:function rA(n,e,t){return new YE(n,e,t)},deps:[Zo,ch,u.R0b]}],Kg=[{provide:pE,useFactory:()=>new ZE},{provide:u.QbO,useValue:"BrowserAnimations"},...Wg],JE=[{provide:pE,useClass:cy},{provide:u.QbO,useValue:"NoopAnimations"},...Wg];let iA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?JE:Kg}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:Kg,imports:[Wa]}),n})();function Et(...n){const e=(0,Cs.yG)(n);return(0,gn.D)(n,e)}var Ai=U(7579);class So extends Ai.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const $f=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Hf=U(4671),fa=U(9672);function Yg(...n){const e=(0,Cs.yG)(n),t=(0,Cs.jO)(n),{args:r,keys:i}=gc(n);if(0===r.length)return(0,gn.D)([],e);const a=new Ar.y(function oA(n,e,t=Hf.y){return r=>{eb(e,()=>{const{length:i}=n,a=new Array(i);let c=i,f=i;for(let _=0;_<i;_++)eb(e,()=>{const w=(0,gn.D)(n[_],e);let D=!1;w.subscribe((0,Gn.x)(r,A=>{a[_]=A,D||(D=!0,f--),f||r.next(t(a.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>mc(i,c):Hf.y));return t?a.pipe(Xa(t)):a}function eb(n,e,t){n?(0,fa.f)(t,n,e):e()}var Qg=U(8189);function Ly(...n){return function tb(){return(0,Qg.J)(1)}()((0,gn.D)(n,(0,Cs.yG)(n)))}function nb(n){return new Ar.y(e=>{(0,bs.Xf)(n()).subscribe(e)})}var aA=U(9635),Gf=U(576);function zf(n,e){const t=(0,Gf.m)(n)?n:()=>n,r=i=>i.error(t());return new Ar.y(e?i=>e.schedule(r,0,i):r)}var Bc=U(515),qf=U(727),ti=U(4482);function dh(){return(0,ti.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Gn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class uA extends Ar.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ti.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qf.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Gn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qf.w0.EMPTY)}return e}refCount(){return dh()(this)}}function wr(n,e){return(0,ti.e)((t,r)=>{let i=null,a=0,c=!1;const f=()=>c&&!i&&r.complete();t.subscribe((0,Gn.x)(r,_=>{i?.unsubscribe();let w=0;const D=a++;(0,bs.Xf)(n(_,D)).subscribe(i=(0,Gn.x)(r,A=>r.next(e?e(_,A,D,w++):A),()=>{i=null,f()}))},()=>{c=!0,f()}))})}function Jg(n){return n<=0?()=>Bc.E:(0,ti.e)((e,t)=>{let r=0;e.subscribe((0,Gn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zf(...n){const e=(0,Cs.yG)(n);return(0,ti.e)((t,r)=>{(e?Ly(n,t,e):Ly(n,t)).subscribe(r)})}function eo(n,e){return(0,ti.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Si=U(5577);function Wf(n){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xg(n=du){return(0,ti.e)((e,t)=>{let r=!1;e.subscribe((0,Gn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function du(){return new $f}function to(n,e){const t=arguments.length>=2;return r=>r.pipe(n?eo((i,a)=>n(i,a,r)):Hf.y,Jg(1),t?Wf(e):Xg(()=>new $f))}function pa(n,e){return(0,Gf.m)(e)?(0,Si.z)(n,e,1):(0,Si.z)(n,1)}var Lr=U(8505);function dl(n){return(0,ti.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Gn.x)(t,void 0,void 0,c=>{a=(0,bs.Xf)(n(c,dl(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Vy(n,e,t,r,i){return(a,c)=>{let f=t,_=e,w=0;a.subscribe((0,Gn.x)(c,D=>{const A=w++;_=f?n(_,D,A):(f=!0,D),r&&c.next(_)},i&&(()=>{f&&c.next(_),c.complete()})))}}function hh(n,e){return(0,ti.e)(Vy(n,e,arguments.length>=2,!0))}function Uy(n){return n<=0?()=>Bc.E:(0,ti.e)((e,t)=>{let r=[];e.subscribe((0,Gn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function rb(n,e){const t=arguments.length>=2;return r=>r.pipe(n?eo((i,a)=>n(i,a,r)):Hf.y,Uy(1),t?Wf(e):Xg(()=>new $f))}function fh(n){return(0,ti.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const un="primary",em=Symbol("RouteTitle");class cA{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ph(n){return new cA(n)}function dA(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const c=r[a],f=n[a];if(c.startsWith(":"))i[c.substring(1)]=f;else if(c!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function no(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!sb(n[i],e[i]))return!1;return!0}function sb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function tm(n){return Array.prototype.concat.apply([],n)}function ob(n){return n.length>0?n[n.length-1]:null}function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function hl(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,gn.D)(Promise.resolve(n)):Et(n)}const nm={exact:function ab(n,e,t){if(!ni(n.segments,e.segments)||!Ms(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ab(n.children[r],e.children[r],t))return!1;return!0},subset:rm},fl={exact:function Yf(n,e){return no(n,e)},subset:function pA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sb(n[t],e[t]))},ignored:()=>!0};function fA(n,e,t){return nm[t.paths](n.root,e.root,t.matrixParams)&&fl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function rm(n,e,t){return ub(n,e,e.segments,t)}function ub(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ni(i,t)||e.hasChildren()||!Ms(i,t,r))}if(n.segments.length===t.length){if(!ni(n.segments,t)||!Ms(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!rm(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(ni(n.segments,i)&&Ms(n.segments,i,r)&&n.children[un])&&ub(n.children[un],e,a,r)}}function Ms(n,e,t){return e.every((r,i)=>fl[t](n[i].parameters,r.parameters))}class xo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ph(this.queryParams)),this._queryParamMap}toString(){return gh.serialize(this)}}class Ot{constructor(e,t){this.segments=e,this.children=t,this.parent=null,mi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hu(this)}}class Mo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ph(this.parameters)),this._parameterMap}toString(){return Hy(this)}}function ni(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let jc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new pl},providedIn:"root"}),n})();class pl{parse(e){const t=new pb(e);return new xo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ga(e.root,!0)}`,r=function cb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${fu(t)}=${fu(i)}`).join("&"):`${fu(t)}=${fu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function mh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const gh=new pl;function hu(n){return n.segments.map(e=>Hy(e)).join("/")}function ga(n,e){if(!n.hasChildren())return hu(n);if(e){const t=n.children[un]?ga(n.children[un],!1):"",r=[];return mi(n.children,(i,a)=>{a!==un&&r.push(`${a}:${ga(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function jy(n,e){let t=[];return mi(n.children,(r,i)=>{i===un&&(t=t.concat(e(r,i)))}),mi(n.children,(r,i)=>{i!==un&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===un?[ga(n.children[un],!1)]:[`${i}:${ga(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[un]?`${hu(n)}/${t[0]}`:`${hu(n)}/(${t.join("//")})`}}function $c(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fu(n){return $c(n).replace(/%3B/gi,";")}function gl(n){return $c(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qf(n){return decodeURIComponent(n)}function $y(n){return Qf(n.replace(/\+/g,"%20"))}function Hy(n){return`${gl(n.path)}${function lb(n){return Object.keys(n).map(e=>`;${gl(e)}=${gl(n[e])}`).join("")}(n.parameters)}`}const db=/^[^\/()?;=#]+/;function Jf(n){const e=n.match(db);return e?e[0]:""}const hb=/^[^=?&#]+/,gA=/^[^&#]+/;class pb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ot([],{}):new Ot([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[un]=new Ot(e,t)),r}parseSegment(){const e=Jf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,!1);return this.capture(e),new Mo(Qf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Jf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Jf(this.remaining);i&&(r=i,this.capture(r))}e[Qf(t)]=Qf(r)}parseQueryParam(e){const t=function fb(n){const e=n.match(hb);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function mA(n){const e=n.match(gA);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=$y(t),a=$y(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Jf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=un);const c=this.parseChildren();t[a]=1===Object.keys(c).length?c[un]:new Ot([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,!1)}}function Gy(n){return n.segments.length>0?new Ot([],{[un]:n}):n}function Xf(n){const e={};for(const r of Object.keys(n.children)){const a=Xf(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function zy(n){if(1===n.numberOfChildren&&n.children[un]){const e=n.children[un];return new Ot(n.segments.concat(e.segments),e.children)}return n}(new Ot(n.segments,e))}function pu(n){return n instanceof xo}function _A(n,e,t,r,i){if(0===t.length)return Hc(e.root,e.root,e.root,r,i);const a=function Yy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new om(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,c)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return mi(a.outlets,(_,w)=>{f[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===c?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new om(t,e,r)}(t);return a.toRoot()?Hc(e.root,e.root,new Ot([],{}),r,i):function c(_){const w=function gb(n,e,t,r){if(n.isAbsolute)return new Gc(e.root,!0,0);if(-1===r)return new Gc(t,t===e.root,0);return function mb(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new u.vHH(4005,!1);i=r.segments.length}return new Gc(r,!1,i-a)}(t,r+(ml(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),D=w.processChildren?_h(w.segmentGroup,w.index,a.commands):am(w.segmentGroup,w.index,a.commands);return Hc(e.root,w.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function ml(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function _l(n){return"object"==typeof n&&null!=n&&n.outlets}function Hc(n,e,t,r,i){let c,a={};r&&mi(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(D=>`${D}`):`${_}`}),c=n===e?t:Ky(n,e,t);const f=Gy(Xf(c));return new xo(f,a,i)}function Ky(n,e,t){const r={};return mi(n.children,(i,a)=>{r[a]=i===e?t:Ky(i,e,t)}),new Ot(n.segments,r)}class om{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ml(r[0]))throw new u.vHH(4003,!1);const i=r.find(_l);if(i&&i!==ob(r))throw new u.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function am(n,e,t){if(n||(n=new Ot([],{})),0===n.segments.length&&n.hasChildren())return _h(n,e,t);const r=function yb(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const c=n.segments[i],f=t[r];if(_l(f))break;const _=`${f}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!Xy(_,w,c))return a;r+=2}else{if(!Xy(_,{},c))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Ot(n.segments.slice(0,r.pathIndex),{});return a.children[un]=new Ot(n.segments.slice(r.pathIndex),n.children),_h(a,0,i)}return r.match&&0===i.length?new Ot(n.segments,{}):r.match&&!n.hasChildren()?Jy(n,e,t):r.match?_h(n,0,i):Jy(n,e,t)}function _h(n,e,t){if(0===t.length)return new Ot(n.segments,{});{const r=function _b(n){return _l(n[0])?n[0].outlets:{[un]:n}}(t),i={};return mi(r,(a,c)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[c]=am(n.children[c],e,a))}),mi(n.children,(a,c)=>{void 0===r[c]&&(i[c]=a)}),new Ot(n.segments,i)}}function Jy(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(_l(a)){const _=yA(a.outlets);return new Ot(r,_)}if(0===i&&ml(t[0])){r.push(new Mo(n.segments[e].path,vb(t[0]))),i++;continue}const c=_l(a)?a.outlets[un]:`${a}`,f=i<t.length-1?t[i+1]:null;c&&f&&ml(f)?(r.push(new Mo(c,vb(f))),i+=2):(r.push(new Mo(c,{})),i++)}return new Ot(r,{})}function yA(n){const e={};return mi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Jy(new Ot([],{}),0,t))}),e}function vb(n){const e={};return mi(n,(t,r)=>e[r]=`${t}`),e}function Xy(n,e,t){return n==t.path&&no(e,t.parameters)}class Po{constructor(e,t){this.id=e,this.url=t}}class um extends Po{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class yl extends Po{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ep extends Po{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ev extends Po{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wb extends Po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eb extends Po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bb extends Po{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Cb extends Po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RR extends Po{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vA{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wA{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ib{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qr{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tb{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Db{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class tv{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=nv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=nv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=lm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return lm(e,this._root).map(t=>t.value)}}function nv(n,e){if(n===e.value)return e;for(const t of e.children){const r=nv(n,t);if(r)return r}return null}function lm(n,e){if(n===e.value)return[e];for(const t of e.children){const r=lm(n,t);if(r.length)return r.unshift(e),r}return[]}class ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ro(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ab extends tv{constructor(e,t){super(e),this.snapshot=t,ro(this,e)}toString(){return this.snapshot.toString()}}function Sb(n,e){const t=function xb(n,e){const c=new yh([],{},{},"",{},un,e,null,n.root,-1,{});return new cm("",new ma(c,[]))}(n,e),r=new So([new Mo("",{})]),i=new So({}),a=new So({}),c=new So({}),f=new So(""),_=new vl(r,i,c,f,a,un,e,t.root);return _.snapshot=t.root,new Ab(new ma(_,[]),t)}class vl{constructor(e,t,r,i,a,c,f,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.title=this.data?.pipe((0,ht.U)(w=>w[em]))??Et(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>ph(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>ph(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function rv(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function kR(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yh{constructor(e,t,r,i,a,c,f,_,w,D,A,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=c,this.component=f,this.title=this.data?.[em],this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._correctedLastPathIndex=L??D,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ph(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ph(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class cm extends tv{constructor(e,t){super(t),this.url=e,ro(this,t)}toString(){return Mb(this._root)}}function ro(n,e){e.value._routerState=n,e.children.forEach(t=>ro(n,t))}function Mb(n){const e=n.children.length>0?` { ${n.children.map(Mb).join(", ")} } `:"";return`${n.value}${e}`}function dm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,no(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),no(e.params,t.params)||n.params.next(t.params),function ib(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!no(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),no(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function io(n,e){const t=no(n.params,e.params)&&function im(n,e){return ni(n,e)&&n.every((t,r)=>no(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||io(n.parent,e.parent))}function Gi(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Pb(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Gi(n,r,i);return Gi(n,r)})}(n,e,t);return new ma(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const c=a.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(f=>Gi(n,f)),c}}const r=function Rb(n){return new vl(new So(n.url),new So(n.params),new So(n.queryParams),new So(n.fragment),new So(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Gi(n,a));return new ma(r,i)}}const iv="ngNavigationCancelingError";function kb(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=pu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Nb(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Nb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[iv]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Ob(n){return hm(n)&&pu(n.url)}function hm(n){return n&&n[iv]}class tp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new np,this.attachRef=null}}let np=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new tp,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rp=!1;let sv=(()=>{class n{constructor(t,r,i,a,c){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=i||un,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,rp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,rp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,rp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,rp);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new Fb(t,f,i.injector);if(r&&function Lb(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(c);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(np),u.Y36(u.s_b),u.$8M("name"),u.Y36(u.sBO),u.Y36(u.lqb))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Fb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vl?this.route:e===np?this.childContexts:this.parent.get(e,t)}}let vh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[sv],encapsulation:2}),n})();function Vb(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function fm(n){const e=n.children&&n.children.map(fm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==un&&(t.component=vh),t}function Ps(n){return n.outlet||un}function av(n,e){const t=n.filter(r=>Ps(r)===e);return t.push(...n.filter(r=>Ps(r)!==e)),t}function wh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class DA{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),dm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ro(t);e.children.forEach(a=>{const c=a.value.outlet;this.deactivateRoutes(a,i[c],r),delete i[c]}),mi(i,(a,c)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ro(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);if(r&&r.outlet){const c=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Ro(e);for(const c of Object.keys(a))this.deactivateRouteAndItsChildren(a[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ro(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Tb(a.value.snapshot))}),e.children.length&&this.forwardEvent(new EA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(dm(i),i===a)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(f.contexts),c.attachRef=f.componentRef,c.route=f.route.value,c.outlet&&c.outlet.attach(f.componentRef,f.route.value),dm(f.route.value),this.activateChildRoutes(e,null,c.children)}else{const f=wh(i.snapshot),_=f?.get(u._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=f,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Hb{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class pm{constructor(e,t){this.component=e,this.route=t}}function AA(n,e,t){const r=n._root;return sp(r,e?e._root:null,t,[r.value])}function Eh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function sp(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Ro(e);return n.children.forEach(c=>{(function xA(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,c=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(c&&a.routeConfig===c.routeConfig){const _=function MA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ni(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ni(n.url,e.url)||!no(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!io(n,e)||!no(n.queryParams,e.queryParams);default:return!io(n,e)}}(c,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Hb(r)):(a.data=c.data,a._resolvedData=c._resolvedData),sp(n,e,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new pm(f.outlet.component,c))}else c&&op(e,f,i),i.canActivateChecks.push(new Hb(r)),sp(n,null,a.component?f?f.children:null:t,r,i)})(c,a[c.value.outlet],t,r.concat([c.value]),i),delete a[c.value.outlet]}),mi(a,(c,f)=>op(c,t.getContext(f),i)),i}function op(n,e,t){const r=Ro(n),i=n.value;mi(r,(a,c)=>{op(a,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new pm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ap(n){return"function"==typeof n}function gm(n){return n instanceof $f||"EmptyError"===n?.name}const up=Symbol("INITIAL_VALUE");function zc(){return wr(n=>Yg(n.map(e=>e.pipe(Jg(1),Zf(up)))).pipe((0,ht.U)(e=>{for(const t of e)if(!0!==t){if(t===up)return up;if(!1===t||t instanceof xo)return t}return!0}),eo(e=>e!==up),Jg(1)))}function Zc(n){return(0,aA.z)((0,Lr.b)(e=>{if(pu(e))throw kb(0,e)}),(0,ht.U)(e=>!0===e))}const lp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BA(n,e,t,r,i){const a=mm(n,e,t);return a.matched?function NR(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Et(i.map(c=>{const f=Eh(c,n);return hl(function FA(n){return n&&ap(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(zc(),Zc()):Et(!0)}(r=Vb(e,r),e,t).pipe((0,ht.U)(c=>!0===c?a:{...lp})):Et(a)}function mm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||dA)(t,n,e);if(!i)return{...lp};const a={};mi(i.posParams,(f,_)=>{a[_]=f.path});const c=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function cp(n,e,t,r,i="corrected"){if(t.length>0&&function jA(n,e,t){return t.some(r=>_m(n,e,r)&&Ps(r)!==un)}(n,t,r)){const c=new Ot(e,function Ut(n,e,t,r){const i={};i[un]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ps(a)!==un){const c=new Ot([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Ps(a)]=c}return i}(n,e,r,new Ot(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function $A(n,e,t){return t.some(r=>_m(n,e,r))}(n,t,r)){const c=new Ot(n.segments,function OR(n,e,t,r,i,a){const c={};for(const f of r)if(_m(n,t,f)&&!i[Ps(f)]){const _=new Ot([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,c[Ps(f)]=_}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const a=new Ot(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function _m(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Wc(n,e,t,r){return!!(Ps(n)===r||r!==un&&_m(e,t,n))&&("**"===n.path||mm(e,n,t).matched)}function Yb(n,e,t){return 0===e.length&&!n.children[t]}const Kc=!1;class Yc{constructor(e){this.segmentGroup=e||null}}class ur{constructor(e){this.urlTree=e}}function ym(n){return zf(new Yc(n))}function lv(n){return zf(new ur(n))}class Xb{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=cp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ot(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,un).pipe((0,ht.U)(a=>this.createUrlTree(Xf(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(dl(a=>{if(a instanceof ur)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Yc?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,un).pipe((0,ht.U)(i=>this.createUrlTree(Xf(i),e.queryParams,e.fragment))).pipe(dl(i=>{throw i instanceof Yc?this.noMatchError(i):i}))}noMatchError(e){return new u.vHH(4002,Kc)}createUrlTree(e,t,r){const i=Gy(e);return new xo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(a=>new Ot([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,gn.D)(i).pipe(pa(a=>{const c=r.children[a],f=av(t,a);return this.expandSegmentGroup(e,f,c,a).pipe((0,ht.U)(_=>({segment:_,outlet:a})))}),hh((a,c)=>(a[c.outlet]=c.segment,a),{}),rb())}expandSegment(e,t,r,i,a,c){return(0,gn.D)(r).pipe(pa(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,c).pipe(dl(w=>{if(w instanceof Yc)return Et(null);throw w}))),to(f=>!!f),dl((f,_)=>{if(gm(f))return Yb(t,i,a)?Et(new Ot([],{})):ym(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,c,f){return Wc(i,t,a,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,c):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c):ym(t):ym(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lv(a):this.lineralizeSegments(r,a).pipe((0,Si.z)(c=>{const f=new Ot(c,{});return this.expandSegment(e,f,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,c){const{matched:f,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=mm(t,i,a);if(!f)return ym(t);const A=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?lv(A):this.lineralizeSegments(i,A).pipe((0,Si.z)(L=>this.expandSegment(e,t,r,L.concat(w),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=Vb(r,e),r.loadChildren?(r._loadedRoutes?Et({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ht.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new Ot(i,{})))):Et(new Ot(i,{}))):BA(t,r,i,e).pipe(wr(({matched:c,consumedSegments:f,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Si.z)(D=>{const A=D.injector??e,L=D.routes,{segmentGroup:j,slicedSegments:q}=cp(t,f,_,L),ee=new Ot(j.segments,j.children);if(0===q.length&&ee.hasChildren())return this.expandChildren(A,L,ee).pipe((0,ht.U)(je=>new Ot(f,je)));if(0===L.length&&0===q.length)return Et(new Ot(f,{}));const oe=Ps(r)===a;return this.expandSegment(A,ee,L,q,oe?un:a,!0).pipe((0,ht.U)(Ze=>new Ot(f.concat(Ze.segments),Ze.children)))})):ym(t)))}getChildConfig(e,t,r){return t.children?Et({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Et({routes:t._loadedRoutes,injector:t._loadedInjector}):function UA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Et(!0):Et(i.map(c=>{const f=Eh(c,n);return hl(function RA(n){return n&&ap(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(zc(),Zc())}(e,t,r).pipe((0,Si.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Lr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function HA(n){return zf(Nb(Kc,3))}())):Et({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Et(r);if(i.numberOfChildren>1||!i.children[un])return zf(new u.vHH(4e3,Kc));i=i.children[un]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new xo(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return mi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let c={};return mi(t.children,(f,_)=>{c[_]=this.createSegmentGroup(e,f,r,i)}),new Ot(a,c)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,Kc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class GA{}class hp{constructor(e,t,r,i,a,c,f,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=f,this.urlSerializer=_}recognize(){const e=cp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,un).pipe((0,ht.U)(t=>{if(null===t)return null;const r=new yh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},un,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ma(r,t),a=new cm(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=rv(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,gn.D)(Object.keys(r.children)).pipe(pa(i=>{const a=r.children[i],c=av(t,i);return this.processSegmentGroup(e,c,a,i)}),hh((i,a)=>i&&a?(i.push(...a),i):null),function Kf(n,e=!1){return(0,ti.e)((t,r)=>{let i=0;t.subscribe((0,Gn.x)(r,a=>{const c=n(a,i++);(c||e)&&r.next(a),!c&&r.complete()}))})}(i=>null!==i),Wf(null),rb(),(0,ht.U)(i=>{if(null===i)return null;const a=fp(i);return function ZA(n){n.sort((e,t)=>e.value.outlet===un?-1:t.value.outlet===un?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,gn.D)(t).pipe(pa(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,a)),to(c=>!!c),dl(c=>{if(gm(c))return Yb(r,i,a)?Et([]):Et(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!Wc(t,r,i,a))return Et(null);let c;if("**"===t.path){const f=i.length>0?ob(i).parameters:{},_=dv(r)+i.length;c=Et({snapshot:new yh(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bh(t),Ps(t),t.component??t._loadedComponent??null,t,cv(r),_,Ch(t),_),consumedSegments:[],remainingSegments:[]})}else c=BA(r,t,i,e).pipe((0,ht.U)(({matched:f,consumedSegments:_,remainingSegments:w,parameters:D})=>{if(!f)return null;const A=dv(r)+_.length;return{snapshot:new yh(_,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,bh(t),Ps(t),t.component??t._loadedComponent??null,t,cv(r),A,Ch(t),A),consumedSegments:_,remainingSegments:w}}));return c.pipe(wr(f=>{if(null===f)return Et(null);const{snapshot:_,consumedSegments:w,remainingSegments:D}=f;e=t._injector??e;const A=t._loadedInjector??e,L=function WA(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:q}=cp(r,w,D,L.filter(oe=>void 0===oe.redirectTo),this.relativeLinkResolution);if(0===q.length&&j.hasChildren())return this.processChildren(A,L,j).pipe((0,ht.U)(oe=>null===oe?null:[new ma(_,oe)]));if(0===L.length&&0===q.length)return Et([new ma(_,[])]);const ee=Ps(t)===a;return this.processSegment(A,L,j,q,ee?un:a).pipe((0,ht.U)(oe=>null===oe?null:[new ma(_,oe)]))}))}}function KA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function fp(n){const e=[],t=new Set;for(const r of n){if(!KA(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=fp(r.children);e.push(new ma(r.value,i))}return e.filter(r=>!t.has(r))}function cv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function dv(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function bh(n){return n.data||{}}function Ch(n){return n.resolve||{}}function oC(n){return"string"==typeof n.title||null===n.title}function vm(n){return wr(e=>{const t=n(e);return t?(0,gn.D)(t).pipe((0,ht.U)(()=>e)):Et(e)})}let aC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===un);return r}getResolvedTitleForRoute(t){return t.data[em]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(uC)},providedIn:"root"}),n})(),uC=(()=>{class n extends aC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ff))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class FR{}class VR extends class LR{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Qc=new u.OlP("",{providedIn:"root",factory:()=>({})}),hv=new u.OlP("ROUTES");let wm=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Et(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=hl(t.loadComponent()).pipe((0,Lr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),fh(()=>{this.componentLoaders.delete(t)})),i=new uA(r,()=>new Ai.x).pipe(dh());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Et({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ht.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,D=!1;Array.isArray(f)?w=f:(_=f.create(t).injector,w=tm(_.get(hv,[],u.XFs.Self|u.XFs.Optional)));return{routes:w.map(fm),injector:_}}),fh(()=>{this.childrenLoaders.delete(r)})),c=new uA(a,()=>new Ai.x).pipe(dh());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return hl(t()).pipe((0,Si.z)(r=>r instanceof u.YKP||Array.isArray(r)?Et(r):(0,gn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(u.Sil))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class pp{}class XA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function eS(n){throw n}function tS(n,e,t){return e.parse("/")}const nS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function hC(){const n=(0,u.f3M)(jc),e=(0,u.f3M)(np),t=(0,u.f3M)(Se),r=(0,u.f3M)(u.zs3),i=(0,u.f3M)(u.Sil),a=(0,u.f3M)(hv,{optional:!0})??[],c=(0,u.f3M)(Qc,{optional:!0})??{},f=(0,u.f3M)(uC),_=(0,u.f3M)(aC,{optional:!0}),w=(0,u.f3M)(pp,{optional:!0}),D=(0,u.f3M)(FR,{optional:!0}),A=new wn(null,n,e,t,r,i,tm(a));return w&&(A.urlHandlingStrategy=w),D&&(A.routeReuseStrategy=D),A.titleStrategy=_??f,function rS(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,A),A}let wn=(()=>{class n{constructor(t,r,i,a,c,f,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ai.x,this.errorHandler=eS,this.malformedUriErrorHandler=tS,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Et(void 0),this.urlHandlingStrategy=new XA,this.routeReuseStrategy=new VR,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(wm),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new wA(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new vA(L)),this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const A=c.get(u.R0b);this.isNgZoneEnabled=A instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function hA(){return new xo(new Ot([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sb(this.currentUrlTree,this.rootComponentType),this.transitions=new So({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(eo(i=>0!==i.id),(0,ht.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),wr(i=>{let a=!1,c=!1;return Et(i).pipe((0,Lr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),wr(f=>{const _=this.browserUrlTree.toString(),w=!this.navigated||f.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return fv(f.source)&&(this.browserUrlTree=f.extractedUrl),Et(f).pipe(wr(A=>{const L=this.transitions.getValue();return r.next(new um(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),L!==this.transitions.getValue()?Bc.E:Promise.resolve(A)}),function eC(n,e,t,r){return wr(i=>function Jb(n,e,t,r,i){return new Xb(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Lr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},i.urlAfterRedirects=A.urlAfterRedirects}),function YA(n,e,t,r,i,a){return(0,Si.z)(c=>function qA(n,e,t,r,i,a,c="emptyOnly",f="legacy"){return new hp(n,e,t,r,i,c,f,a).recognize().pipe(wr(_=>null===_?function zA(n){return new Ar.y(e=>e.error(n))}(new GA):Et(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,a).pipe((0,ht.U)(f=>({...c,targetSnapshot:f}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Lr.b)(A=>{if(i.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const j=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(j,A)}this.browserUrlTree=A.urlAfterRedirects}const L=new wb(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(L)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:j,source:q,restoredState:ee,extras:oe}=f,Ue=new um(L,this.serializeUrl(j),q,ee);r.next(Ue);const Ze=Sb(j,this.rootComponentType).snapshot;return Et(i={...f,targetSnapshot:Ze,urlAfterRedirects:j,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),Bc.E}),(0,Lr.b)(f=>{const _=new Eb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(_)}),(0,ht.U)(f=>i={...f,guards:AA(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),function zb(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:c}}=t;return 0===c.length&&0===a.length?Et({...t,guardsResult:!0}):function qb(n,e,t,r){return(0,gn.D)(n).pipe((0,Si.z)(i=>function VA(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Et(a.map(f=>{const _=wh(e)??i,w=Eh(f,_);return hl(function OA(n){return n&&ap(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(to())})).pipe(zc()):Et(!0)}(i.component,i.route,t,e,r)),to(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Si.z)(f=>f&&function PA(n){return"boolean"==typeof n}(f)?function Zb(n,e,t,r){return(0,gn.D)(e).pipe(pa(i=>Ly(function Kb(n,e){return null!==n&&e&&e(new Ib(n)),Et(!0)}(i.route.parent,r),function Wb(n,e){return null!==n&&e&&e(new qr(n)),Et(!0)}(i.route,r),function qc(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(c=>function SA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>nb(()=>Et(c.guards.map(_=>{const w=wh(c.node)??t,D=Eh(_,w);return hl(function NA(n){return n&&ap(n.canActivateChild)}(D)?D.canActivateChild(r,n):w.runInContext(()=>D(r,n))).pipe(to())})).pipe(zc())));return Et(a).pipe(zc())}(n,i.path,t),function uv(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Et(!0);const i=r.map(a=>nb(()=>{const c=wh(e)??t,f=Eh(a,c);return hl(function kA(n){return n&&ap(n.canActivate)}(f)?f.canActivate(e,n):c.runInContext(()=>f(e,n))).pipe(to())}));return Et(i).pipe(zc())}(n,i.route,t))),to(i=>!0!==i,!0))}(r,a,n,e):Et(f)),(0,ht.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Lr.b)(f=>{if(i.guardsResult=f.guardsResult,pu(f.guardsResult))throw kb(0,f.guardsResult);const _=new bb(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(_)}),eo(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,"",3),!1)),vm(f=>{if(f.guards.canActivateChecks.length)return Et(f).pipe((0,Lr.b)(_=>{const w=new Cb(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),wr(_=>{let w=!1;return Et(_).pipe(function QA(n,e){return(0,Si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Et(t);let a=0;return(0,gn.D)(i).pipe(pa(c=>function JA(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!oC(i)&&(a[em]=i.title),function rC(n,e,t,r){const i=function iC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Et({});const a={};return(0,gn.D)(i).pipe((0,Si.z)(c=>function sC(n,e,t,r){const i=wh(e)??r,a=Eh(n,i);return hl(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[c],e,t,r).pipe(to(),(0,Lr.b)(f=>{a[c]=f}))),Uy(1),function lA(n){return(0,ht.U)(()=>n)}(a),dl(c=>gm(c)?Bc.E:zf(c)))}(a,n,e,r).pipe((0,ht.U)(c=>(n._resolvedData=c,n.data=rv(n,t).resolve,i&&oC(i)&&(n.data[em]=i.title),null)))}(c.route,r,n,e)),(0,Lr.b)(()=>a++),Uy(1),(0,Si.z)(c=>a===i.length?Et(t):Bc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Lr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Lr.b)(_=>{const w=new RR(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),vm(f=>{const _=w=>{const D=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&D.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Lr.b)(A=>{w.component=A}),(0,ht.U)(()=>{})));for(const A of w.children)D.push(..._(A));return D};return Yg(_(f.targetSnapshot.root)).pipe(Wf(),Jg(1))}),vm(()=>this.afterPreactivation()),(0,ht.U)(f=>{const _=function ko(n,e,t){const r=Gi(n,e._root,t?t._root:void 0);return new Ab(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return i={...f,targetRouterState:_}}),(0,Lr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new DA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Lr.b)({next(){a=!0},complete(){a=!0}}),fh(()=>{a||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),dl(f=>{if(c=!0,hm(f)){Ob(f)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new ep(i.id,this.serializeUrl(i.extractedUrl),f.message,f.cancellationCode);if(r.next(_),Ob(f)){const w=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||fv(i.source)};this.scheduleNavigation(w,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new ev(i.id,this.serializeUrl(i.extractedUrl),f,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(f))}catch(w){i.reject(w)}}return Bc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(fm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:c,queryParamsHandling:f,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:c;let A=null;switch(f){case"merge":A={...this.currentUrlTree.queryParams,...a};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=a||null}return null!==A&&(A=this.removeEmptyProps(A)),_A(w,this.currentUrlTree,t,A,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=pu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function iS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new u.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...nS}:!1===r?{...dC}:r,pu(t))return fA(this.currentUrlTree,t,i);const a=this.parseUrl(t);return fA(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new yl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,c){if(this.disposed)return Promise.resolve(!1);let f,_,w;c?(f=c.resolve,_=c.reject,w=c.promise):w=new Promise((L,j)=>{f=L,_=j});const D=++this.navigationId;let A;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),A=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):A=0,this.setTransition({id:D,targetPageId:A,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new ep(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:function(){return hC()},providedIn:"root"}),n})();function fv(n){return"imperative"!==n}let gu=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Ai.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wn),u.Y36(vl),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})(),Jc=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Ai.x,this.subscription=t.events.subscribe(a=>{a instanceof yl&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,c){return!!(0!==t||r||i||a||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wn),u.Y36(vl),u.Y36(Ee))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})();class pC{}let mC=(()=>{class n{constructor(t,r,i,a,c){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(eo(t=>t instanceof yl),pa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,u.MMx)(a.providers,t,`Route: ${a.path}`));const c=a._injector??t,f=a._loadedInjector??c;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(c,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,gn.D)(i).pipe((0,Qg.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Et(null);const a=i.pipe((0,Si.z)(c=>null===c?Et(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,gn.D)([a,c]).pipe((0,Qg.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(wn),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(pC),u.LFG(wm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bm=new u.OlP("");let _C=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof um?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof yl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Db&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Db(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Ih(n,e){return{\u0275kind:n,\u0275providers:e}}function Tm(n){return[{provide:hv,multi:!0,useValue:n}]}function yC(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(wn),i=n.get(vC);1===n.get(pv)&&r.initialNavigation(),n.get(wC,null,u.XFs.Optional)?.setUpPreloading(),n.get(bm,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const vC=new u.OlP("",{factory:()=>new Ai.x}),pv=new u.OlP("",{providedIn:"root",factory:()=>1});const wC=new u.OlP("");function EC(n){return Ih(0,[{provide:wC,useExisting:mC},{provide:pC,useExisting:n}])}const gv=new u.OlP("ROUTER_FORROOT_GUARD"),cS=[Se,{provide:jc,useClass:pl},{provide:wn,useFactory:hC},np,{provide:vl,useFactory:function Im(n){return n.routerState.root},deps:[wn]},wm];function dS(){return new u.PXZ("Router",wn)}let bC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[cS,[],Tm(t),{provide:gv,useFactory:yv,deps:[[wn,new u.FiY,new u.tp0]]},{provide:Qc,useValue:r||{}},r?.useHash?{provide:Ee,useClass:pt}:{provide:Ee,useClass:yt},{provide:bm,useFactory:()=>{const n=(0,u.f3M)(wn),e=(0,u.f3M)(Bo),t=(0,u.f3M)(Qc);return t.scrollOffset&&e.setOffset(t.scrollOffset),new _C(n,e,t)}},r?.preloadingStrategy?EC(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:dS},r?.initialNavigation?hS(r):[],[{provide:IC,useFactory:yC},{provide:u.tb,multi:!0,useExisting:IC}]]}}static forChild(t){return{ngModule:n,providers:[Tm(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(gv,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[vh]}),n})();function yv(n){return"guarded"}function hS(n){return["disabled"===n.initialNavigation?Ih(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(wn);return()=>{e.setUpLocationChangeListener()}}},{provide:pv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ih(2,[{provide:pv,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(Z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const c=e.get(wn),f=e.get(vC);(function i(a){e.get(wn).events.pipe(eo(f=>f instanceof yl||f instanceof ep||f instanceof ev),(0,ht.U)(f=>f instanceof yl||f instanceof ep&&(0===f.code||1===f.code)&&null),eo(f=>null!==f),Jg(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),c.afterPreactivation=()=>(a(!0),r||f.closed?Et(void 0):f),c.initialNavigation()}))}}]).\u0275providers:[]]}const IC=new u.OlP("");var TC=U(6451),mu=U(5363),DC=U(6063);class fS extends Ai.x{constructor(e=1/0,t=1/0,r=DC.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(r.push(e),!i&&r.push(a.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!e.closed;c+=r?1:2)e.next(a[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const c=t.now();let f=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)f=_;f&&r.splice(0,f+1)}}}var GR=U(3099);function wv(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,GR.B)({connector:()=>new fS(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Am(n,e){return(0,Gf.m)(e)?wr(()=>n,e):wr(()=>n)}var Ev=U(9468),ln=U(4976),zi=U(2011),wl=U(259);class El{constructor(e){return e}}class bv{constructor(){return(0,wl.C6)()}}const Sm=new u.OlP("angularfire2._apps"),gS={provide:El,useFactory:function AC(n){return n&&1===n.length?n[0]:new El((0,wl.Mq)())},deps:[[new u.FiY,Sm]]},mS={provide:bv,deps:[[new u.FiY,Sm]]};function _S(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new El(r)}}let yS=(()=>{class n{constructor(t){(0,wl.KN)("angularfire",ln.q4.full,"core"),(0,wl.KN)("angularfire",ln.q4.full,"app"),(0,wl.KN)("angular",u.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.Lbi))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[gS,mS]}),n})();function SC(n,...e){return{ngModule:yS,providers:[{provide:Sm,useFactory:_S(n),multi:!0,deps:[u.R0b,u.zs3,ln.HU,...e]}]}}const wS=(0,ln.u3)(wl.ZF,!0);var fe=U(5861),Rs=U(6881),Xc=U(4859),Gt=U(2090),bl=U(1877);const Cv=new Map,xC={activated:!1,tokenObservers:[]},ES={initialized:!1,enabled:!1};function Er(n){return Cv.get(n)||Object.assign({},xC)}function xm(){return ES}class CS{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,fe.Z)(function*(){t.stop();try{t.pending=new Gt.BH,yield function IS(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Gt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _i=new Gt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Tv(n){if(!Er(n).activated)throw _i.create("use-before-activation",{appName:n.name})}function Cl(n,e){return Av.apply(this,arguments)}function Av(){return(Av=(0,fe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let c,f;try{c=yield fetch(n,a)}catch(A){throw _i.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==c.status)throw _i.create("fetch-status-error",{httpStatus:c.status});try{f=yield c.json()}catch(A){throw _i.create("fetch-parse-error",{originalErrorMessage:A?.message})}const _=f.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw _i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(_[1]),D=Date.now();return{token:f.token,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function NC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const mp="firebase-app-check-store";let Rm=null;function _p(){return Rm||(Rm=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(_i.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(mp,{keyPath:"compositeKey"})}}catch(t){e(_i.create("storage-open",{originalErrorMessage:t?.message}))}}),Rm)}function yp(){return(yp=(0,fe.Z)(function*(n,e){const r=(yield _p()).transaction(mp,"readwrite"),a=r.objectStore(mp).put({compositeKey:n,value:e});return new Promise((c,f)=>{a.onsuccess=_=>{c()},r.onerror=_=>{var w;f(_i.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const Nm=new bl.Yd("@firebase/app-check");function Om(n,e){return(0,Gt.hl)()?function TS(n,e){return function Mv(n,e){return yp.apply(this,arguments)}(function LC(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Nm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ov(){return xm().enabled}function Fv(){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,fe.Z)(function*(){const n=xm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const VC={error:"UNKNOWN_ERROR"};function Vv(n){return Gt.US.encodeString(JSON.stringify(n),!1)}function Ep(n){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,fe.Z)(function*(n,e=!1){const t=n.app;Tv(t);const r=Er(t);let a,i=r.token;if(i&&!Th(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Th(_)?i=_:yield Om(t,void 0))}if(!e&&i&&Th(i))return{token:i.token};let f,c=!1;if(Ov()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Cl(NC(t,yield Fv()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield Om(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Er(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Nm.warn(_.message):Nm.error(_),a=_}return i?a?f=Th(i)?{token:i.token,internalError:a}:xi(a):(f={token:i.token},r.token=i,yield Om(t,i)):f=xi(a),c&&Hv(t,f),f})).apply(this,arguments)}function Fm(){return(Fm=(0,fe.Z)(function*(n){const e=n.app;Tv(e);const{provider:t}=Er(e);if(Ov()){const r=yield Fv(),{token:i}=yield Cl(NC(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Lm(n,e){const t=Er(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $v(n){const{app:e}=n,t=Er(e);let r=t.tokenRefresher;r||(r=function SS(n){const{app:e}=n;return new CS((0,fe.Z)(function*(){let r;if(r=Er(e).token?yield Ep(n,!0):yield Ep(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Er(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Hv(n,e){const t=Er(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Th(n){return n.expireTimeMillis-Date.now()>0}function xi(n){return{token:Vv(VC),error:n}}class Dh{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Er(this.app);for(const t of e)Lm(this.app,t.next);return Promise.resolve()}}const HC="app-check-internal";!function QR(){(0,Rs._registerComponent)(new Xc.wA("app-check",n=>function xS(n,e){return new Dh(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(HC).initialize()})),(0,Rs._registerComponent)(new Xc.wA(HC,n=>function MS(n){return{getToken:e=>Ep(n,e),getLimitedUseToken:()=>function Bv(n){return Fm.apply(this,arguments)}(n),addTokenListener:e=>function jv(n,e,t,r){const{app:i}=n,a=Er(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Th(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),$v(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>$v(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lm(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Rs.registerVersion)("@firebase/app-check","0.8.0")}();class Tp{constructor(){return(0,ln.vb)("app-check")}}typeof window<"u"&&window;var nk=U(9260);const ZS=new u.OlP("angularfire2.auth.use-emulator"),WS=new u.OlP("angularfire2.auth.settings"),KS=new u.OlP("angularfire2.auth.tenant-id"),YS=new u.OlP("angularfire2.auth.langugage-code"),QS=new u.OlP("angularfire2.auth.use-device-language"),JS=new u.OlP("angularfire.auth.persistence"),XS=(n,e,t,r,i,a,c,f)=>(0,zi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),c)for(const[w,D]of Object.entries(c))_.settings[w]=D;return f&&_.setPersistence(f),_},[t,r,i,a,c,f]);let ks=(()=>{class n{constructor(t,r,i,a,c,f,_,w,D,A,L,j){const q=new Ai.x,ee=Et(void 0).pipe((0,mu.Q)(c.outsideAngular),wr(()=>a.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,9568)))),(0,ht.U)(()=>(0,zi.on)(t,a,r)),(0,ht.U)(oe=>XS(oe,a,f,w,D,A,_,L)),wv({bufferSize:1,refCount:!1}));if(Bs(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Et(null);else{ee.pipe(to()).subscribe();const Ue=ee.pipe(wr(Ye=>Ye.getRedirectResult().then(Ft=>Ft,()=>null)),ln.iC,wv({bufferSize:1,refCount:!1})),Ze=ee.pipe(wr(Ye=>new Ar.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>Ye.onAuthStateChanged(Bt=>Ft.next(Bt),Bt=>Ft.error(Bt),()=>Ft.complete()))})))),je=ee.pipe(wr(Ye=>new Ar.y(Ft=>({unsubscribe:a.runOutsideAngular(()=>Ye.onIdTokenChanged(Bt=>Ft.next(Bt),Bt=>Ft.error(Bt),()=>Ft.complete()))}))));this.authState=Ue.pipe(Am(Ze),(0,Ev.R)(c.outsideAngular),(0,mu.Q)(c.insideAngular)),this.user=Ue.pipe(Am(je),(0,Ev.R)(c.outsideAngular),(0,mu.Q)(c.insideAngular)),this.idToken=this.user.pipe(wr(Ye=>Ye?(0,gn.D)(Ye.getIdToken()):Et(null))),this.idTokenResult=this.user.pipe(wr(Ye=>Ye?(0,gn.D)(Ye.getIdTokenResult()):Et(null))),this.credential=(0,TC.T)(Ue,q,this.authState.pipe(eo(Ye=>!Ye))).pipe((0,ht.U)(Ye=>Ye?.user?Ye:null),(0,Ev.R)(c.outsideAngular),(0,mu.Q)(c.insideAngular))}return(0,zi.pX)(this,ee,a,{spy:{apply:(oe,Ue,Ze)=>{(oe.startsWith("signIn")||oe.startsWith("createUser"))&&Ze.then(je=>q.next(je))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zi.Dh),u.LFG(zi.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ln.HU),u.LFG(ZS,8),u.LFG(WS,8),u.LFG(KS,8),u.LFG(YS,8),u.LFG(QS,8),u.LFG(JS,8),u.LFG(Tp,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Bm=(()=>{class n{constructor(){nk.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[ks]}),n})();const ex=["toast-component",""];function WC(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",5),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.remove())}),u.TgZ(1,"span",6),u._uU(2,"\xd7"),u.qZA()()}}function jm(n,e){if(1&n&&(u.ynx(0),u._uU(1),u.BQk()),2&n){const t=u.oxw(2);u.xp6(1),u.hij("[",t.duplicatesCount+1,"]")}}function KC(n,e){if(1&n&&(u.TgZ(0,"div"),u._uU(1),u.YNc(2,jm,2,1,"ng-container",4),u.qZA()),2&n){const t=u.oxw();u.Tol(t.options.titleClass),u.uIk("aria-label",t.title),u.xp6(1),u.hij(" ",t.title," "),u.xp6(1),u.Q6J("ngIf",t.duplicatesCount)}}function YC(n,e){if(1&n&&u._UZ(0,"div",7),2&n){const t=u.oxw();u.Tol(t.options.messageClass),u.Q6J("innerHTML",t.message,u.oJD)}}function rk(n,e){if(1&n&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.Tol(t.options.messageClass),u.uIk("aria-label",t.message),u.xp6(1),u.hij(" ",t.message," ")}}function Qv(n,e){if(1&n&&(u.TgZ(0,"div"),u._UZ(1,"div",9),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Udp("width",t.width+"%")}}class ix{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Xv{constructor(e,t,r,i,a,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=a,this.toastRef=c,this._onTap=new Ai.x,this._onAction=new Ai.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const XC=new u.OlP("ToastConfig");class ox{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Ai.x,this._activate=new Ai.x,this._manualClose=new Ai.x,this._resetTimeout=new Ai.x,this._countDuplicate=new Ai.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ax{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===Xv?this._toastPackage:this._parentInjector.get(e,t,r)}}class ak extends class ok{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class ux{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let eI=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tI=(()=>{class n{constructor(t,r,i,a){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=a,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new ak(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new ux(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(eI),u.LFG(u._Vd),u.LFG(u.z2F),u.LFG(pe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),so=(()=>{class n{constructor(t,r,i,a,c){this.overlay=r,this._injector=i,this.sanitizer=a,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},a=""){return this._preBuildNotification(a,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,a){const{includeTitleDuplicates:c}=this.toastrConfig;for(const f of this.toasts){const _=c&&f.title===t;if((!c||_)&&f.message===r)return f.toastRef.onDuplicate(i,a),f}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,a){return a.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,a)):this._buildNotification(t,r,i,a)}_buildNotification(t,r,i,a){if(!a.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&a.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let f=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(f=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(a.positionClass,this.overlayContainer);this.index=this.index+1;let w=r;r&&a.enableHtml&&(w=this.sanitizer.sanitize(u.q3G.HTML,r));const D=new ox(_),A=new Xv(this.index,a,w,i,t,D),L=new ax(A,this._injector),j=new ix(a.toastComponent,L),q=_.attach(j,this.toastrConfig.newestOnTop);D.componentInstance=q.instance;const ee={toastId:this.index,title:i||"",message:r||"",toastRef:D,onShown:D.afterActivate(),onHidden:D.afterClosed(),onTap:A.onTap(),onAction:A.onAction(),portal:q};return f||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ee.toastRef.activate()})),this.toasts.push(ee),ee}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(XC),u.LFG(tI),u.LFG(u.zs3),u.LFG(Yu),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lx={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(so),u.Y36(Xv),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(u.d8E("@flyInOut",r.state),u.Tol(r.toastClasses),u.Udp("display",r.displayStyle))},attrs:ex,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(u.YNc(0,WC,3,0,"button",0),u.YNc(1,KC,3,5,"div",1),u.YNc(2,YC,1,3,"div",2),u.YNc(3,rk,2,4,"div",3),u.YNc(4,Qv,2,2,"div",4)),2&t&&(u.Q6J("ngIf",r.options.closeButton),u.xp6(1),u.Q6J("ngIf",r.title),u.xp6(1),u.Q6J("ngIf",r.message&&r.options.enableHtml),u.xp6(1),u.Q6J("ngIf",r.message&&!r.options.enableHtml),u.xp6(1),u.Q6J("ngIf",r.options.progressBar))},dependencies:[Tn],encapsulation:2,data:{animation:[pD("flyInOut",[rE("inactive",xf({opacity:0})),rE("active",xf({opacity:1})),rE("removed",xf({opacity:0})),rh("inactive => active",tE("{{ easeTime }}ms {{ easing }}")),rh("active => removed",tE("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let e0=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:XC,useValue:{default:lx,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Cd]]}),n})();function cx(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",10)(1,"div",11)(2,"span",12),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.close())}),u.qZA(),u.TgZ(3,"div",13)(4,"p"),u._uU(5," Primero debes "),u.TgZ(6,"a",14),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.salir())}),u._uU(7,"Iniciar Sesion"),u.qZA(),u._uU(8," o "),u.TgZ(9,"a",15),u._uU(10,"Registrate"),u.qZA()()()()()}}let $m=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.esInvitado=!1,this.modal=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}verPerfil(){this.router.navigate(["/perfil"])}close(){this.modal=!1}salir(){this.logout()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ks),u.Y36(wn),u.Y36(so))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-navbar"]],decls:18,vars:2,consts:[[2,"user-select","none"],[1,"log"],[1,"verperfil",2,"text-shadow","3px 1px 2px #1669c1","cursor","pointer","color","white",3,"click"],[2,"text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"caja"],["routerLink","/main",1,"nav-link"],["routerLink","/galeria",1,"nav-link"],["routerLink","/videos",1,"nav-link"],["routerLink","/musica",1,"nav-link"],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"span",2),u.NdJ("click",function(){return r.verPerfil()}),u._uU(4),u.qZA(),u.TgZ(5,"span",3),u.NdJ("click",function(){return r.logout()}),u._uU(6,"Salir"),u.qZA()()(),u.TgZ(7,"div",4)(8,"a",5),u._uU(9,"INICIO"),u.qZA(),u.TgZ(10,"a",6),u._uU(11,"IMAGENES"),u.qZA(),u.TgZ(12,"a",7),u._uU(13,"VIDEOS"),u.qZA(),u.TgZ(14,"a",8),u._uU(15,"MUSICA"),u.qZA()()(),u.TgZ(16,"div"),u.YNc(17,cx,11,0,"div",9),u.qZA()),2&t&&(u.xp6(4),u.hij("Hola ",r.usuarioActual,""),u.xp6(13),u.Q6J("ngIf",r.modal))},dependencies:[Tn,Jc],styles:[".log[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.verperfil[_ngcontent-%COMP%]{cursor:pointer}.verperfil[_ngcontent-%COMP%]:hover{color:red}.caja[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,rgba(76,175,80,.3294117647),rgba(33,150,243,.5490196078));display:flex;justify-content:space-around;padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center;margin-top:8px}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 900px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})();const t0=function(n){return{"background-image":n,"background-blend-mode":"soft-light","background-size":"cover","background-position":"center"}};let rI=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.toastr=i,this.imagenesFondo=["https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto1.jpg?alt=media&token=144909e5-fa88-4785-a196-a9e829d644ee","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Ffoto.jpg?alt=media&token=c9dc6d47-fc21-4695-b090-35a8d15279be","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp30.jpg?alt=media&token=8835ef58-75a7-46ed-8d66-182c8b12a5b9","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp37.jpg?alt=media&token=1b507c45-18ad-44ab-9080-fcb944188969","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp45.jpg?alt=media&token=805448f0-c5f8-4c9d-b163-7de9487ea921","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp46.jpg?alt=media&token=52922013-1f5c-413d-8008-5bb74a93bad0","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2Fp62.jpg?alt=media&token=96809e52-9a26-42fb-a0d1-608b0ec80cc4","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10500411_10201454213716073_6332111602942763551_n_10201454213716073.jpg?alt=media&token=6e7caa54-9319-4551-83bf-53cb96bbf047","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F10580144_10201454209915978_1885626682807728120_n_10201454209915978.jpg?alt=media&token=eb7ef51f-afe5-490a-b17d-864642c1136a","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/images%2F164789_1372685215984_2451351_n_1372685215984.jpg?alt=media&token=46c640a2-1a32-458f-ab07-a6dbb2370cc4"],this.indiceImagen=0}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuarioActual=t&&t.displayName?t.displayName:"Invitad@"}),this.cambiarImagenFondo(),setInterval(()=>this.cambiarImagenFondo(),15e3)}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}cambiarImagenFondo(){const t=Math.floor(Math.random()*this.imagenesFondo.length);this.backgroundImage=this.imagenesFondo[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ks),u.Y36(wn),u.Y36(so))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-main"]],decls:15,vars:3,consts:[[1,"contenedor",2,"user-select","none"],[1,"box",3,"ngStyle"],[1,"titulo"],[1,"align"],[1,"msj"],[1,"pie"],["href","https://www.facebook.com/profile.php?id=100013672369598",1,"foo"],[1,"fab","fa-facebook-square"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"app-navbar"),u.TgZ(3,"h1",2),u._uU(4,"Asi somos asi Bailamos Corinto"),u.qZA(),u.TgZ(5,"div")(6,"p",3),u._uU(7," Sum\xe9rgete en el coraz\xf3n de Corinto, Cauca, a trav\xe9s de esta conmovedora recopilaci\xf3n de ensayos, presentaciones, eventos, im\xe1genes y m\xfasica, protagonizados por nuestros queridos j\xf3venes. Cada momento capturado refleja la dedicaci\xf3n, el talento y la pasi\xf3n de nuestros muchachos, quienes con su esfuerzo y creatividad han dejado una huella imborrable en nuestra comunidad. "),u.qZA()(),u.TgZ(8,"div",4),u._uU(9,"Gracias a todos espero lo disfruten tanto como yo!!."),u.qZA(),u.TgZ(10,"aside")(11,"footer",5)(12,"a",6),u._UZ(13,"i",7),u._uU(14," by Edwin 2022"),u.qZA()()()()()),2&t&&(u.xp6(1),u.Q6J("ngStyle",u.VKq(1,t0,"url("+r.backgroundImage+")")))},dependencies:[md,$m],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;padding:0;overflow:hidden}.log[_ngcontent-%COMP%]{display:flex;justify-content:space-between;animation:moveText .8s ease-in;white-space:nowrap;overflow:hidden}.logout[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.box[_ngcontent-%COMP%]{background-color:#3144c169;display:flex;flex-direction:column;justify-content:space-around;height:90%;width:85%;color:#fff;font-size:20px;padding:20px;border:1px solid white;border-radius:15px;outline:solid #ffffff;background-repeat:no-repeat;background-position:right;background-size:contain;animation:apearText 2s linear}.titulo[_ngcontent-%COMP%]{padding:10px;font-size:30px;text-align:center;background-color:#09ffb340;border-radius:8px;animation:moveText .5s linear}.align[_ngcontent-%COMP%]{padding:12px;text-align:center;border-radius:12px;border:1px solid white;color:#fff;margin-bottom:15px;font-size:17px;animation:moveText 1s linear;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:3px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:20px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0ff}.msj[_ngcontent-%COMP%]{color:#fff;margin-bottom:9px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{animation:apearText 2.3s linear;position:relative}.foo[_ngcontent-%COMP%]{color:#fff;text-decoration:none}@media (max-width: 767px){.titulo[_ngcontent-%COMP%]{font-size:22px}.welcome[_ngcontent-%COMP%]{font-size:20px;padding:0;margin:0}.t1[_ngcontent-%COMP%]{animation:moveText 1.2s linear;white-space:nowrap;overflow:hidden}.t2[_ngcontent-%COMP%]{animation:moveText 1.4s linear;white-space:nowrap;overflow:hidden}.t3[_ngcontent-%COMP%]{animation:moveText 1.6s linear;white-space:nowrap;overflow:hidden}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:7px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none;font-size:24px}.msj[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:20px;animation:apearText 2.3s linear}}@media (max-width: 433px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px}.msj[_ngcontent-%COMP%]{font-size:13px;animation:apearText 2s linear}.pie[_ngcontent-%COMP%]{font-size:16px;animation:apearText 2.3s linear}}@media (max-width: 348px){.titulo[_ngcontent-%COMP%]{font-size:16px}.align[_ngcontent-%COMP%]{padding:4px}}@keyframes moveText{0%{opacity:0;transform:translate(100%)}50%{opacity:.5}to{opacity:1;transform:translate(0)}}@keyframes apearText{0%{opacity:0}50%{opacity:.5}to{opacity:1}}"]}),n})();U(1389);class n0{constructor(){return(0,ln.vb)("auth")}}const c0="firebasestorage.googleapis.com",cI="storageBucket";class tr extends Gt.ZR{constructor(e,t,r=0){super(zm(e),`Firebase Storage: ${t} (${zm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return zm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Ln=(()=>{return(n=Ln||(Ln={})).UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Ln;var n})();function zm(n){return"storage/"+n}function d0(){return new tr(Ln.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function qm(){return new tr(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fI(){return new tr(Ln.CANCELED,"User canceled the upload/download.")}function pI(){return new tr(Ln.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Dp(n){return new tr(Ln.INVALID_ARGUMENT,n)}function Ox(){return new tr(Ln.APP_DELETED,"The Firebase app was deleted.")}function Fx(n){return new tr(Ln.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zm(n,e){return new tr(Ln.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Ap(n){throw new tr(Ln.INTERNAL_ERROR,"Internal error: "+n)}class qi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=qi.makeFromUrl(e,t)}catch{return new qi(e,"")}if(""===r.path)return r;throw function Sk(n){return new tr(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(Ye){Ye.path_=decodeURIComponent(Ye.path)}const A=t.replace(/[.]/g,"\\."),je=[{regex:f,indices:{bucket:1,path:3},postModify:function a(Ye){"/"===Ye.path.charAt(Ye.path.length-1)&&(Ye.path_=Ye.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===c0?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let Ye=0;Ye<je.length;Ye++){const Ft=je[Ye],Bt=Ft.regex.exec(e);if(Bt){let Sr=Bt[Ft.indices.path];Sr||(Sr=""),r=new qi(Bt[Ft.indices.bucket],Sr),Ft.postModify(r);break}}if(null==r)throw function Rx(n){return new tr(Ln.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Pk{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function o(n){return"string"==typeof n||n instanceof String}function l(n){return d()&&n instanceof Blob}function d(){return typeof Blob<"u"&&!(0,Gt.UG)()}function h(n,e,t,r){if(r<e)throw Dp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Dp(`Invalid value for '${n}'. Expected ${t} or less.`)}function g(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function y(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var C=(()=>{return(n=C||(C={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",C;var n})();function I(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class S{constructor(e,t,r,i,a,c,f,_,w,D,A,L=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=A,this.retry=L,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,q)=>{this.resolve_=j,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,c=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(f,f.getResponse());!function Nk(n){return void 0!==n}(_)?a():a(_)}catch(_){c(_)}else if(null!==f){const _=d0();_.serverResponse=f.getErrorText(),c(this.errorCallback_?this.errorCallback_(f,_):_)}else c(i.canceled?this.appDelete_?Ox():fI():qm())};this.canceled_?t(0,new P(!1,null,!0)):this.backoffId_=function Rk(n,e,t){let r=1,i=null,a=null,c=!1,f=0;function _(){return 2===f}let w=!1;function D(...oe){w||(w=!0,e.apply(null,oe))}function A(oe){i=setTimeout(()=>{i=null,n(j,_())},oe)}function L(){a&&clearTimeout(a)}function j(oe,...Ue){if(w)return void L();if(oe)return L(),void D.call(null,oe,...Ue);if(_()||c)return L(),void D.call(null,oe,...Ue);let je;r<64&&(r*=2),1===f?(f=2,je=0):je=1e3*(r+Math.random()),A(je)}let q=!1;function ee(oe){q||(q=!0,L(),!w&&(null!==i?(oe||(f=2),clearTimeout(i),A(0)):oe||(f=1)))}return A(0),a=setTimeout(()=>{c=!0,ee(!0)},t),ee}((r,i)=>{if(i)return void r(!1,new P(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const c=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(c),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(c),this.pendingConnection_=null;const f=a.getErrorCode()===C.NO_ERROR,_=a.getStatus();if(!f||I(_,this.additionalRetryCodes_)&&this.retry){const D=a.getErrorCode()===C.ABORT;return void r(!1,new P(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new P(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function kk(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class P{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function _t(...n){const e=function Xe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(d())return new Blob(n);throw new tr(Ln.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const wt={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class En{constructor(e,t){this.data=e,this.contentType=t||null}}function zn(n,e){switch(n){case wt.RAW:return new En(Tl(e));case wt.BASE64:case wt.BASE64URL:return new En(Wm(n,e));case wt.DATA_URL:return new En(function p0(n){const e=new Km(n);return e.base64?Wm(wt.BASE64,e.rest):function f0(n){let e;try{e=decodeURIComponent(n)}catch{throw Zm(wt.DATA_URL,"Malformed data URL.")}return Tl(e)}(e.rest)}(e),function g0(n){return new Km(n).contentType}(e))}throw d0()}function Tl(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Wm(n,e){switch(n){case wt.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Zm(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wt.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Zm(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Fe(n){if(typeof atob>"u")throw function Mk(n){return new tr(Ln.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Zm(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Km{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Zm(wt.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function m0(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class oo{constructor(e,t){let r=0,i="";l(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(l(this.data_)){const i=function kt(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new oo(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new oo(r,!0)}}static getBlob(...e){if(d()){const t=e.map(r=>r instanceof oo?r.data_:r);return new oo(_t.apply(null,t))}{const t=e.map(c=>o(c)?zn(wt.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)i[a++]=c[f]}),new oo(i,!0)}}uploadData(){return this.data_}}function Sp(n){let e;try{e=JSON.parse(n)}catch{return null}return function s(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Fk(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function HV(n,e){return e}class Ns{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||HV}}let gI=null;function y0(){if(gI)return gI;const n=[];n.push(new Ns("bucket")),n.push(new Ns("generation")),n.push(new Ns("metageneration")),n.push(new Ns("name","fullPath",!0));const t=new Ns("name");t.xform=function e(a,c){return function GV(n){return!o(n)||n.length<2?n:Fk(n)}(c)},n.push(t);const i=new Ns("size");return i.xform=function r(a,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Ns("timeCreated")),n.push(new Ns("updated")),n.push(new Ns("md5Hash",null,!0)),n.push(new Ns("cacheControl",null,!0)),n.push(new Ns("contentDisposition",null,!0)),n.push(new Ns("contentEncoding",null,!0)),n.push(new Ns("contentLanguage",null,!0)),n.push(new Ns("contentType",null,!0)),n.push(new Ns("metadata","customMetadata",!0)),gI=n,gI}function Lk(n,e,t){const r=Sp(e);return null===r?null:function qV(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const c=t[a];r[c.local]=c.xform(r,e[c.server])}return function zV(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new qi(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Lx(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Vk="prefixes";class Dl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Al(n){if(!n)throw d0()}function mI(n,e){return function t(r,i){const a=Lk(n,i,e);return Al(null!==a),a}}function Ym(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Ak(){return new tr(Ln.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function h0(){return new tr(Ln.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function dI(n){return new tr(Ln.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function hI(n){return new tr(Ln.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function v0(n){const e=Ym(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function Px(n){return new tr(Ln.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Bk(n,e,t){const i=g(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Dl(i,"GET",mI(n,t),c);return f.errorHandler=v0(e),f}function JV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=g(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new Dl(f,"GET",function YV(n,e){return function t(r,i){const a=function KV(n,e,t){const r=Sp(t);return null===r?null:function WV(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Vk])for(const i of t[Vk]){const a=i.replace(/\/$/,""),c=n._makeStorageReference(new qi(e,a));r.prefixes.push(c)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new qi(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Al(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=Ym(e),D}function $k(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function nU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function Hk(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},_=function f(){let je="";for(let Ye=0;Ye<2;Ye++)je+=Math.random().toString().slice(2);return je}();c["Content-Type"]="multipart/related; boundary="+_;const w=$k(e,r,i),D=Lx(w,t),j=oo.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===j)throw pI();const q={name:w.fullPath},ee=g(a,n.host,n._protocol),Ue=n.maxUploadRetryTime,Ze=new Dl(ee,"POST",mI(n,t),Ue);return Ze.urlParams=q,Ze.headers=c,Ze.body=j.uploadData(),Ze.errorHandler=Ym(e),Ze}class _I{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Vx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Al(!1)}return Al(!!t&&-1!==(e||["active"]).indexOf(t)),t}const oU={STATE_CHANGED:"state_changed"},Os={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ux(n){switch(n){case"running":case"pausing":case"canceling":return Os.RUNNING;case"paused":return Os.PAUSED;case"success":return Os.SUCCESS;case"canceled":return Os.CANCELED;default:return Os.ERROR}}class aU{constructor(e,t,r){if(function Ok(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Qm(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class lU extends class uU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=C.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=C.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=C.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Ap("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ap("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ap("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ap("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ap("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function _u(){return new lU}class qk{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=y0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Ln.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(I(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=qm()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Ln.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function rU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),c=$k(e,r,i),f={name:c.fullPath},_=g(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},A=Lx(c,t),q=new Dl(_,"POST",function j(ee){let oe;Vx(ee);try{oe=ee.getResponseHeader("X-Goog-Upload-URL")}catch{Al(!1)}return Al(o(oe)),oe},n.maxUploadRetryTime);return q.urlParams=f,q.headers=D,q.body=A,q.errorHandler=Ym(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_u,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function iU(n,e,t,r){const _=new Dl(t,"POST",function a(w){const D=Vx(w,["active","final"]);let A=null;try{A=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Al(!1)}A||Al(!1);const L=Number(A);return Al(!isNaN(L)),new _I(L,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Ym(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,_u,t,r);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new _I(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let c;try{c=function sU(n,e,t,r,i,a,c,f){const _=new _I(0,0);if(c?(_.current=c.current,_.total=c.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function kx(){return new tr(Ln.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const A=_.current;let j="";j=0===D?"finalize":w===D?"upload, finalize":"upload";const q={"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":`${_.current}`},ee=r.slice(A,A+D);if(null===ee)throw pI();const je=new Dl(t,"POST",function oe(Ye,Ft){const Bt=Vx(Ye,["active","final"]),vn=_.current+D,Sr=r.size();let ms;return ms="final"===Bt?mI(e,a)(Ye,Ft):null,new _I(vn,Sr,"final"===Bt,ms)},e.maxUploadRetryTime);return je.headers=q,je.body=ee.uploadData(),je.progressCallback=f||null,je.errorHandler=Ym(n),je}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const f=this._ref.storage._makeRequest(c,_u,i,a,!1);this._request=f,f.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Bk(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,_u,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=Hk(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,_u,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=fI(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ux(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new aU(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ux(this._state)){case Os.SUCCESS:Qm(this._resolve.bind(null,this.snapshot))();break;case Os.CANCELED:case Os.ERROR:Qm(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ux(this._state)){case Os.RUNNING:case Os.PAUSED:e.next&&Qm(e.next.bind(e,this.snapshot))();break;case Os.SUCCESS:e.complete&&Qm(e.complete.bind(e))();break;default:e.error&&Qm(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xp{constructor(e,t){this._service=e,this._location=t instanceof qi?t:qi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xp(e,t)}get root(){const e=new qi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fk(this._location.path)}get storage(){return this._service}get parent(){const e=function _0(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new qi(this._location.bucket,e);return new xp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Fx(e)}}function Wk(n,e,t){return Bx.apply(this,arguments)}function Bx(){return(Bx=(0,fe.Z)(function*(n,e,t){const i=yield Kk(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Wk(n,e,i.nextPageToken))})).apply(this,arguments)}function Kk(n,e){null!=e&&"number"==typeof e.maxResults&&h("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=JV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,_u)}function EU(n){n._throwIfRoot("getDownloadURL");const e=function XV(n,e,t){const i=g(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,f=new Dl(i,"GET",function QV(n,e){return function t(r,i){const a=Lk(n,i,e);return Al(null!==a),function ZV(n,e,t,r){const i=Sp(e);if(null===i||!o(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const c=encodeURIComponent;return a.split(",").map(w=>{const A=n.fullPath;return g("/b/"+c(n.bucket)+"/o/"+c(A),t,r)+y({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),c);return f.errorHandler=v0(e),f}(n.storage,n._location,y0());return n.storage.makeRequestWithTokens(e,_u).then(t=>{if(null===t)throw function Nx(){return new tr(Ln.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function Yk(n,e){const t=function $V(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new qi(n._location.bucket,t);return new xp(n.storage,r)}function Qk(n,e){if(n instanceof jx){const t=n;if(null==t._bucket)throw function xk(){return new tr(Ln.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cI+"' property when initializing the app?")}();const r=new xp(t,t._bucket);return null!=e?Qk(r,e):r}return void 0!==e?Yk(n,e):n}function TU(n,e){if(e&&function CU(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof jx)return function IU(n,e){return new xp(n,e)}(n,e);throw Dp("To use ref(service, url), the first argument must be a Storage instance.")}return Qk(n,e)}function Jk(n,e){const t=e?.[cI];return null==t?null:qi.makeFromBucketSpec(t,n)}class jx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=c0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?qi.makeFromBucketSpec(i,this._host):Jk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?qi.makeFromBucketSpec(this._url,e):Jk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){h("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){h("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,fe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,fe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new Pk(Ox());{const c=function $e(n,e,t,r,i,a,c=!0){const f=y(n.urlParams),_=n.url+f,w=Object.assign({},n.headers);return function ne(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function B(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function K(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function Te(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new S(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,fe.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const Xk="@firebase/storage",tN="storage";function AU(n,e,t){return function Zk(n,e,t){n._throwIfRoot("uploadBytes");const r=Hk(n.storage,n._location,y0(),new oo(e,!0),t);return n.storage.makeRequestWithTokens(r,_u).then(i=>({metadata:i,ref:n}))}(n=(0,Gt.m9)(n),e,t)}function nN(n){return function yU(n){const e={prefixes:[],items:[]};return Wk(n,e).then(()=>e)}(n=(0,Gt.m9)(n))}function rN(n){return EU(n=(0,Gt.m9)(n))}function $x(n,e){return TU(n=(0,Gt.m9)(n),e)}function NU(n=(0,Rs.getApp)(),e){n=(0,Gt.m9)(n);const r=(0,Rs._getProvider)(n,tN).getImmediate({identifier:e}),i=(0,Gt.P0)("storage");return i&&iN(r,...i),r}function iN(n,e,t,r={}){!function DU(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,Gt.Sg)(i,n.app.options.projectId))}(n,e,t,r)}function OU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new jx(t,r,i,e,Rs.SDK_VERSION)}!function FU(){(0,Rs._registerComponent)(new Xc.wA(tN,OU,"PUBLIC").setMultipleInstances(!0)),(0,Rs.registerVersion)(Xk,"0.11.2",""),(0,Rs.registerVersion)(Xk,"0.11.2","esm2017")}();class Jm{constructor(e){return e}}const sN="storage",Hx=new u.OlP("angularfire2.storage-instances");function UU(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Jm(r)}}const BU={provide:class LU{constructor(){return(0,ln.vb)(sN)}},deps:[[new u.FiY,Hx]]},jU={provide:Jm,useFactory:function VU(n,e){const t=(0,ln.JM)(sN,n,e);return t&&new Jm(t)},deps:[[new u.FiY,Hx],El]};let $U=(()=>{class n{constructor(){(0,wl.KN)("angularfire",ln.q4.full,"gcs")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[jU,BU]}),n})();function HU(n,...e){return{ngModule:$U,providers:[{provide:Hx,useFactory:UU(n),multi:!0,deps:[u.R0b,u.zs3,ln.HU,bv,[new u.FiY,n0],[new u.FiY,Tp],...e]}]}}const GU=(0,ln.u3)(rN,!0),zU=(0,ln.u3)(NU,!0),qU=(0,ln.u3)(nN,!0),oN=(0,ln.u3)($x,!0),ZU=(0,ln.u3)(AU,!0);var aN=U(4986);function Gx(){return(0,ti.e)((n,e)=>{let t,r=!1;n.subscribe((0,Gn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function KU(n,e){return n===e}U(9568);var ot,uN=U(3942),YU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yu={},zx=zx||{},Yt=YU||self;function yI(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function w0(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var qx="closure_uid_"+(1e9*Math.random()>>>0),JU=0;function XU(n,e,t){return n.call.apply(n.bind,arguments)}function eB(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ds(n,e,t){return(ds=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?XU:eB).apply(null,arguments)}function vI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var c=Array(arguments.length-2),f=2;f<arguments.length;f++)c[f-2]=arguments[f];return e.prototype[i].apply(r,c)}}function xh(){this.s=this.s,this.o=this.o}xh.prototype.s=!1,xh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function QU(n){Object.prototype.hasOwnProperty.call(n,qx)&&n[qx]||(n[qx]=++JU)}(this)},xh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const lN=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Zx(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function cN(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(yI(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let c=0;c<a;c++)n[i+c]=r[c]}else n.push(r)}}function hs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hs.prototype.h=function(){this.defaultPrevented=!0};var nB=function(){if(!Yt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Yt.addEventListener("test",()=>{},e),Yt.removeEventListener("test",()=>{},e)}catch{}return n}();function E0(n){return/^[\s\xa0]*$/.test(n)}function wI(){var n=Yt.navigator;return n&&(n=n.userAgent)?n:""}function Sl(n){return-1!=wI().indexOf(n)}function Wx(n){return Wx[" "](n),n}Wx[" "]=function(){};var Yx,n,iB=Sl("Opera"),Xm=Sl("Trident")||Sl("MSIE"),dN=Sl("Edge"),Kx=dN||Xm,hN=Sl("Gecko")&&!(-1!=wI().toLowerCase().indexOf("webkit")&&!Sl("Edge"))&&!(Sl("Trident")||Sl("MSIE"))&&!Sl("Edge"),sB=-1!=wI().toLowerCase().indexOf("webkit")&&!Sl("Edge");function fN(){var n=Yt.document;return n?n.documentMode:void 0}e:{var Qx="",Jx=(n=wI(),hN?/rv:([^\);]+)(\)|;)/.exec(n):dN?/Edge\/([\d\.]+)/.exec(n):Xm?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):sB?/WebKit\/(\S+)/.exec(n):iB?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Jx&&(Qx=Jx?Jx[1]:""),Xm){var Xx=fN();if(null!=Xx&&Xx>parseFloat(Qx)){Yx=String(Xx);break e}}Yx=Qx}var oB=Yt.document&&Xm&&(fN()||parseInt(Yx,10))||void 0;function b0(n,e){if(hs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(hN){e:{try{Wx(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:aB[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&b0.$.h.call(this)}}Mi(b0,hs);var aB={2:"touch",3:"pen",4:"mouse"};b0.prototype.h=function(){b0.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var C0="closure_listenable_"+(1e6*Math.random()|0),uB=0;function lB(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++uB,this.fa=this.ia=!1}function EI(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function t1(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function gN(n){const e={};for(const t in n)e[t]=n[t];return e}const mN="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _N(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<mN.length;a++)t=mN[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bI(n){this.src=n,this.g={},this.h=0}function n1(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=lN(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(EI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function r1(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}bI.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var c=r1(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new lB(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var i1="closure_lm_"+(1e6*Math.random()|0),s1={};function yN(n,e,t,r,i){if(r&&r.once)return wN(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)yN(n,e[a],t,r,i);return null}return t=l1(t),n&&n[C0]?n.O(e,t,w0(r)?!!r.capture:!!r,i):vN(n,e,t,!1,r,i)}function vN(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var c=w0(i)?!!i.capture:!!i,f=a1(n);if(f||(n[i1]=f=new bI(n)),(t=f.add(e,t,r,c,a)).proxy)return t;if(r=function dB(){const e=hB;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)nB||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bN(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function wN(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)wN(n,e[a],t,r,i);return null}return t=l1(t),n&&n[C0]?n.P(e,t,w0(r)?!!r.capture:!!r,i):vN(n,e,t,!0,r,i)}function EN(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)EN(n,e[a],t,r,i);else r=w0(r)?!!r.capture:!!r,t=l1(t),n&&n[C0]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=r1(a=n.g[e],t,r,i))&&(EI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=a1(n))&&(e=n.g[e.toString()],n=-1,e&&(n=r1(e,t,r,i)),(t=-1<n?e[n]:null)&&o1(t))}function o1(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[C0])n1(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bN(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=a1(e))?(n1(t,n),0==t.h&&(t.src=null,e[i1]=null)):EI(n)}}}function bN(n){return n in s1?s1[n]:s1[n]="on"+n}function hB(n,e){if(n.fa)n=!0;else{e=new b0(e,this);var t=n.listener,r=n.la||n.src;n.ia&&o1(n),n=t.call(r,e)}return n}function a1(n){return(n=n[i1])instanceof bI?n:null}var u1="__closure_events_fn_"+(1e9*Math.random()>>>0);function l1(n){return"function"==typeof n?n:(n[u1]||(n[u1]=function(e){return n.handleEvent(e)}),n[u1])}function Pi(){xh.call(this),this.i=new bI(this),this.S=this,this.J=null}function Zi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new hs(e,n);else if(e instanceof hs)e.target=e.target||n;else{var i=e;_N(e=new hs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var c=e.g=t[a];i=CI(c,r,!0,e)&&i}if(i=CI(c=e.g=n,r,!0,e)&&i,i=CI(c,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=CI(c=e.g=t[a],r,!1,e)&&i}function CI(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var c=e[a];if(c&&!c.fa&&c.capture==t){var f=c.listener,_=c.la||c.src;c.ia&&n1(n.i,c),i=!1!==f.call(_,r)&&i}}return i&&!r.defaultPrevented}Mi(Pi,xh),Pi.prototype[C0]=!0,Pi.prototype.removeEventListener=function(n,e,t,r){EN(this,n,e,t,r)},Pi.prototype.N=function(){if(Pi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)EI(t[r]);delete n.g[e],n.h--}}this.J=null},Pi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var c1=Yt.JSON.stringify;function pB(){var n=d1;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var CN=new class fB{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mB,n=>n.reset());class mB{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _B(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function yB(n){Yt.setTimeout(()=>{throw n},0)}let I0,T0=!1,d1=new class gB{constructor(){this.h=this.g=null}add(e,t){const r=CN.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},IN=()=>{const n=Yt.Promise.resolve(void 0);I0=()=>{n.then(vB)}};var vB=()=>{for(var n;n=pB();){try{n.h.call(n.g)}catch(t){yB(t)}var e=CN;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}T0=!1};function II(n,e){Pi.call(this),this.h=n||1,this.g=e||Yt,this.j=ds(this.qb,this),this.l=Date.now()}function h1(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function f1(n,e,t){if("function"==typeof n)t&&(n=ds(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ds(n.handleEvent,n)}return 2147483647<Number(e)?-1:Yt.setTimeout(n,e||0)}function TN(n){n.g=f1(()=>{n.g=null,n.i&&(n.i=!1,TN(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mi(II,Pi),(ot=II.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Zi(this,"tick"),this.ga&&(h1(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){II.$.N.call(this),h1(this),delete this.g};class wB extends xh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:TN(this)}N(){super.N(),this.g&&(Yt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function D0(n){xh.call(this),this.h=n,this.g={}}Mi(D0,xh);var DN=[];function AN(n,e,t,r){Array.isArray(t)||(t&&(DN[0]=t.toString()),t=DN);for(var i=0;i<t.length;i++){var a=yN(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function SN(n){t1(n.g,function(e,t){this.g.hasOwnProperty(t)&&o1(e)},n),n.g={}}function TI(){this.g=!0}function e_(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function IB(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var c=1;c<i.length;c++)i[c]=""}}}return c1(t)}catch{return e}}(n,t)+(r?" "+r:"")})}D0.prototype.N=function(){D0.$.N.call(this),SN(this)},D0.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},TI.prototype.Ea=function(){this.g=!1},TI.prototype.info=function(){};var Mp={},xN=null;function DI(){return xN=xN||new Pi}function MN(n){hs.call(this,Mp.Ta,n)}function A0(n){const e=DI();Zi(e,new MN(e))}function PN(n,e){hs.call(this,Mp.STAT_EVENT,n),this.stat=e}function Fs(n){const e=DI();Zi(e,new PN(e,n))}function RN(n,e){hs.call(this,Mp.Ua,n),this.size=e}function S0(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Yt.setTimeout(function(){n()},e)}Mp.Ta="serverreachability",Mi(MN,hs),Mp.STAT_EVENT="statevent",Mi(PN,hs),Mp.Ua="timingevent",Mi(RN,hs);var AI={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},kN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function p1(){}function ON(){}p1.prototype.h=null;var _1,x0={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function g1(){hs.call(this,"d")}function m1(){hs.call(this,"c")}function SI(){}function M0(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new D0(this),this.P=TB,this.V=new II(n=Kx?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new FN}function FN(){this.i=null,this.g="",this.h=!1}Mi(g1,hs),Mi(m1,hs),Mi(SI,p1),SI.prototype.g=function(){return new XMLHttpRequest},SI.prototype.i=function(){return{}},_1=new SI;var TB=45e3,y1={},xI={};function v1(n,e,t){n.L=1,n.v=kI(nd(e)),n.s=t,n.S=!0,LN(n,null)}function LN(n,e){n.G=Date.now(),P0(n),n.A=nd(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),ZN(t.i,"t",r),n.C=0,t=n.l.J,n.h=new FN,n.g=_O(n.l,t?e:null,!n.s),0<n.O&&(n.M=new wB(ds(n.Pa,n,n.g),n.O)),AN(n.U,n.g,"readystatechange",n.nb),e=n.I?gN(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),A0(),function EB(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var c="",f=a.split("&"),_=0;_<f.length;_++){var w=f[_].split("=");if(1<w.length){var D=w[0];w=w[1];var A=D.split("_");c=2<=A.length&&"type"==A[1]?c+(D+"=")+w+"&":c+(D+"=redacted&")}}else c=null;else c=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function VN(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function UN(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=DB(n,t),i==xI){4==e&&(n.o=4,Fs(14),r=!1),e_(n.j,n.m,null,"[Incomplete Response]");break}if(i==y1){n.o=4,Fs(15),e_(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}e_(n.j,n.m,i,null),w1(n,i)}VN(n)&&i!=xI&&i!=y1&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),A1(e),e.M=!0,Fs(11))):(e_(n.j,n.m,t,"[Invalid Chunked Response]"),Pp(n),R0(n))}function DB(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xI:(t=Number(e.substring(t,r)),isNaN(t)?y1:(r+=1)+t>e.length?xI:(e=e.slice(r,r+t),n.C=r+t,e))}function P0(n){n.Y=Date.now()+n.P,BN(n,n.P)}function BN(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=S0(ds(n.lb,n),e)}function MI(n){n.B&&(Yt.clearTimeout(n.B),n.B=null)}function R0(n){0==n.l.H||n.J||fO(n.l,n)}function Pp(n){MI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,h1(n.V),SN(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function w1(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||E1(t.i,n)))if(!n.K&&E1(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;UI(t),LI(t)}D1(t),Fs(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=S0(ds(t.ib,t),6e3));if(1>=YN(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else kp(t,11)}else if((n.K||t.g==n)&&UI(t),!E0(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const D=w[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const A=w[4];null!=A&&(t.Ga=A,t.l.info("SVER="+t.Ga));const L=w[5];null!=L&&"number"==typeof L&&0<L&&(t.L=r=1.5*L,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const q=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;a.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(b1(a,a.h),a.h=null))}if(r.F){const ee=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ee&&(r.Da=ee,lr(r.I,r.F,ee))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=mO(r,r.J?r.pa:null,r.Y),c.K){QN(r.i,c);var f=c,_=r.L;_&&f.setTimeout(_),f.B&&(MI(f),P0(f)),r.g=c}else dO(r);0<t.j.length&&VI(t)}else"stop"!=w[0]&&"close"!=w[0]||kp(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?kp(t,7):T1(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}A0()}catch{}}function jN(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(yI(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function SB(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(yI(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function AB(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(yI(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(ot=M0.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const e=this.M;e&&3==xl(n)?e.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const D=xl(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||Kx||this.g&&(this.h.h||this.g.ja()||sO(this.g)))){this.J||4!=D||7==e||A0(),MI(this);var t=this.g.da();this.ca=t;t:if(VN(this)){var r=sO(this.g);n="";var i=r.length,a=4==xl(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pp(this),R0(this);var c="";break t}this.h.i=new Yt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function bB(n,e,t,r,i,a,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+c})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var f,_=this.g;if((f=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E0(f)){var w=f;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,Fs(12),Pp(this),R0(this);break e}e_(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,w1(this,t)}this.S?(UN(this,D,c),Kx&&this.i&&3==D&&(AN(this.U,this.V,"tick",this.mb),this.V.start())):(e_(this.j,this.m,c,null),w1(this,c)),4==D&&Pp(this),this.i&&!this.J&&(4==D?fO(this.l,this):(this.i=!1,P0(this)))}else(function qB(n){const e={};n=(n.g&&2<=xl(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(E0(n[r]))continue;var t=_B(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function cB(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Fs(12)):(this.o=0,Fs(13)),Pp(this),R0(this)}}}catch{}},ot.mb=function(){if(this.g){var n=xl(this.g),e=this.g.ja();this.C<e.length&&(MI(this),UN(this,n,e),this.i&&4!=n&&P0(this))}},ot.cancel=function(){this.J=!0,Pp(this)},ot.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function CB(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(A0(),Fs(17)),Pp(this),this.o=2,R0(this)):BN(this,this.Y-n)};var $N=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rp(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Rp){this.h=n.h,PI(this,n.j),this.s=n.s,this.g=n.g,RI(this,n.m),this.l=n.l;var e=n.i,t=new O0;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),HN(this,t),this.o=n.o}else n&&(e=String(n).match($N))?(this.h=!1,PI(this,e[1]||"",!0),this.s=k0(e[2]||""),this.g=k0(e[3]||"",!0),RI(this,e[4]),this.l=k0(e[5]||"",!0),HN(this,e[6]||"",!0),this.o=k0(e[7]||"")):(this.h=!1,this.i=new O0(null,this.h))}function nd(n){return new Rp(n)}function PI(n,e,t){n.j=t?k0(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function RI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function HN(n,e,t){e instanceof O0?(n.i=e,function OB(n,e){e&&!n.j&&(Mh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zN(this,r),ZN(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=N0(e,kB)),n.i=new O0(e,n.h))}function lr(n,e,t){n.i.set(e,t)}function kI(n){return lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function k0(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function N0(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,MB),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function MB(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Rp.prototype.toString=function(){var n=[],e=this.j;e&&n.push(N0(e,GN,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(N0(e,GN,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(N0(t,"/"==t.charAt(0)?RB:PB,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",N0(t,NB)),n.join("")};var GN=/[#\/\?@]/g,PB=/[#\?:]/g,RB=/[#\?]/g,kB=/[#\?@]/g,NB=/#/g;function O0(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Mh(n){n.g||(n.g=new Map,n.h=0,n.i&&function xB(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zN(n,e){Mh(n),e=t_(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function qN(n,e){return Mh(n),e=t_(n,e),n.g.has(e)}function ZN(n,e,t){zN(n,e),0<t.length&&(n.i=null,n.g.set(t_(n,e),Zx(t)),n.h+=t.length)}function t_(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function WN(n){this.l=n||LB,n=Yt.PerformanceNavigationTiming?0<(n=Yt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Yt.g&&Yt.g.Ka&&Yt.g.Ka()&&Yt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=O0.prototype).add=function(n,e){Mh(this),this.i=null,n=t_(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Mh(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.ta=function(){Mh(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},ot.Z=function(n){Mh(this);let e=[];if("string"==typeof n)qN(this,n)&&(e=e.concat(this.g.get(t_(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Mh(this),this.i=null,qN(this,n=t_(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=a;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var LB=10;function KN(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YN(n){return n.h?1:n.g?n.g.size:0}function E1(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function b1(n,e){n.g?n.g.add(e):n.h=e}function QN(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JN(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return Zx(n.i)}function UB(){this.g=new class{stringify(n){return Yt.JSON.stringify(n,void 0)}parse(n){return Yt.JSON.parse(n,void 0)}}}function BB(n,e,t){const r=t||"";try{jN(n,function(i,a){let c=i;w0(i)&&(c=c1(i)),e.push(r+a+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function NI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function F0(n){this.l=n.fc||null,this.j=n.ob||!1}function OI(n,e){Pi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=C1,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}WN.prototype.cancel=function(){if(this.i=JN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mi(F0,p1),F0.prototype.g=function(){return new OI(this.l,this.j)},F0.prototype.i=function(n){return function(){return n}}({}),Mi(OI,Pi);var C1=0;function XN(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function L0(n){n.readyState=4,n.l=null,n.j=null,n.A=null,V0(n)}function V0(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=OI.prototype).open=function(n,e){if(this.readyState!=C1)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,V0(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Yt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,L0(this)),this.readyState=C1},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,V0(this)),this.g&&(this.readyState=3,V0(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Yt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;XN(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?L0(this):V0(this),3==this.readyState&&XN(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,L0(this))},ot.Ya=function(n){this.g&&(this.response=n,L0(this))},ot.ka=function(){this.g&&L0(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(OI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var $B=Yt.JSON.parse;function Vr(n){Pi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=eO,this.L=this.M=!1}Mi(Vr,Pi);var eO="",HB=/^https?$/i,GB=["POST","PUT"];function tO(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,nO(n),FI(n)}function nO(n){n.F||(n.F=!0,Zi(n,"complete"),Zi(n,"error"))}function rO(n){if(n.h&&typeof zx<"u"&&(!n.C[1]||4!=xl(n)||2!=n.da()))if(n.v&&4==xl(n))f1(n.La,0,n);else if(Zi(n,"readystatechange"),4==xl(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match($N)[1]||null;!i&&Yt.self&&Yt.self.location&&(i=Yt.self.location.protocol.slice(0,-1)),r=!HB.test(i?i.toLowerCase():"")}t=r}if(t)Zi(n,"complete"),Zi(n,"success");else{n.m=6;try{var a=2<xl(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",nO(n)}}finally{FI(n)}}}function FI(n,e){if(n.g){iO(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Zi(n,"ready");try{t.onreadystatechange=r}catch{}}}function iO(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Yt.clearTimeout(n.A),n.A=null)}function xl(n){return n.g?n.g.readyState:0}function sO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case eO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function oO(n){let e="";return t1(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function I1(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=oO(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):lr(n,e,t))}function U0(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function aO(n){this.Ga=0,this.j=[],this.l=new TI,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=U0("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=U0("baseRetryDelayMs",5e3,n),this.hb=U0("retryDelaySeedMs",1e4,n),this.eb=U0("forwardChannelMaxRetries",2,n),this.xa=U0("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new WN(n&&n.concurrentRequestLimit),this.Ja=new UB,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function T1(n){if(uO(n),3==n.H){var e=n.W++,t=nd(n.I);if(lr(t,"SID",n.K),lr(t,"RID",e),lr(t,"TYPE","terminate"),B0(n,t),(e=new M0(n,n.l,e)).L=2,e.v=kI(nd(t)),t=!1,Yt.navigator&&Yt.navigator.sendBeacon)try{t=Yt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Yt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_O(e.l,null),e.g.ha(e.v)),e.G=Date.now(),P0(e)}gO(n)}function LI(n){n.g&&(A1(n),n.g.cancel(),n.g=null)}function uO(n){LI(n),n.u&&(Yt.clearTimeout(n.u),n.u=null),UI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Yt.clearTimeout(n.m),n.m=null)}function VI(n){if(!KN(n.i)&&!n.m){n.m=!0;var e=n.Na;I0||IN(),T0||(I0(),T0=!0),d1.add(e,n),n.C=0}}function lO(n,e){var t;t=e?e.m:n.W++;const r=nd(n.I);lr(r,"SID",n.K),lr(r,"RID",t),lr(r,"AID",n.V),B0(n,r),n.o&&n.s&&I1(r,n.o,n.s),t=new M0(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=cO(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),b1(n.i,t),v1(t,r,e)}function B0(n,e){n.na&&t1(n.na,function(t,r){lr(e,r,t)}),n.h&&jN({},function(t,r){lr(e,r,t)})}function cO(n,e,t){t=Math.min(n.j.length,t);var r=n.h?ds(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const c=["count="+t];-1==a?0<t?(a=i[0].g,c.push("ofs="+a)):a=0:c.push("ofs="+a);let f=!0;for(let _=0;_<t;_++){let w=i[_].g;const D=i[_].map;if(w-=a,0>w)a=Math.max(0,i[_].g-100),f=!1;else try{BB(D,c,"req"+w+"_")}catch{r&&r(D)}}if(f){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function dO(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;I0||IN(),T0||(I0(),T0=!0),d1.add(e,n),n.A=0}}function D1(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=S0(ds(n.Ma,n),pO(n,n.A)),n.A++,0))}function A1(n){null!=n.B&&(Yt.clearTimeout(n.B),n.B=null)}function hO(n){n.g=new M0(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=nd(n.wa);lr(e,"RID","rpc"),lr(e,"SID",n.K),lr(e,"AID",n.V),lr(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&lr(e,"TO",n.qa),lr(e,"TYPE","xmlhttp"),B0(n,e),n.o&&n.s&&I1(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=kI(nd(e)),t.s=null,t.S=!0,LN(t,n)}function UI(n){null!=n.v&&(Yt.clearTimeout(n.v),n.v=null)}function fO(n,e){var t=null;if(n.g==e){UI(n),A1(n),n.g=null;var r=2}else{if(!E1(n.i,e))return;t=e.F,QN(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Zi(r=DI(),new RN(r,t)),VI(n)}else dO(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function ZB(n,e){return!(YN(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=S0(ds(n.Na,n,e),pO(n,n.C)),n.C++,0)))}(n,e)||2==r&&D1(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:kp(n,5);break;case 4:kp(n,10);break;case 3:kp(n,6);break;default:kp(n,2)}}function pO(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function kp(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=ds(n.pb,n);t||(t=new Rp("//www.google.com/images/cleardot.gif"),Yt.location&&"http"==Yt.location.protocol||PI(t,"https"),kI(t)),function jB(n,e){const t=new TI;if(Yt.Image){const r=new Image;r.onload=vI(NI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=vI(NI,t,r,"TestLoadImage: error",!1,e),r.onabort=vI(NI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=vI(NI,t,r,"TestLoadImage: timeout",!1,e),Yt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fs(2);n.H=0,n.h&&n.h.za(e),gO(n),uO(n)}function gO(n){if(n.H=0,n.ma=[],n.h){const e=JN(n.i);(0!=e.length||0!=n.j.length)&&(cN(n.ma,e),cN(n.ma,n.j),n.i.i.length=0,Zx(n.j),n.j.length=0),n.h.ya()}}function mO(n,e,t){var r=t instanceof Rp?nd(t):new Rp(t);if(""!=r.g)e&&(r.g=e+"."+r.g),RI(r,r.m);else{var i=Yt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Rp(null);r&&PI(a,r),e&&(a.g=e),i&&RI(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&lr(r,t,e),lr(r,"VER",n.ra),B0(n,r),r}function _O(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t&&n.Ha&&!n.va?new F0({ob:!0}):n.va)).Oa(n.J),e}function yO(){}function BI(){if(Xm&&!(10<=Number(oB)))throw Error("Environmental error: no available transport.")}function Oo(n,e){Pi.call(this),this.g=new aO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!E0(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!E0(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new n_(this)}function vO(n){g1.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function wO(){m1.call(this),this.status=1}function n_(n){this.g=n}function vu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function S1(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],c=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;c=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(c<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((a=(e=t+((c=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=a+((c=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function Vn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(ot=Vr.prototype).Oa=function(n){this.M=n},ot.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():_1.g(),this.C=function NN(n){return n.h||(n.h=n.i())}(this.u?this.u:_1),this.g.onreadystatechange=ds(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void tO(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Yt.FormData&&n instanceof Yt.FormData,!(0<=lN(GB,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,c]of t)this.g.setRequestHeader(a,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{iO(this),0<this.B&&((this.L=function zB(n){return Xm&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ds(this.ua,this)):this.A=f1(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){tO(this,a)}},ot.ua=function(){typeof zx<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zi(this,"complete"),Zi(this,"abort"),FI(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),FI(this,!0)),Vr.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?rO(this):this.kb())},ot.kb=function(){rO(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<xl(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),$B(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=aO.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new M0(this,this.l,n);let a=this.s;if(this.U&&(a?(a=gN(a),_N(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=cO(this,i,e),lr(t=nd(this.I),"RID",n),lr(t,"CVER",22),this.F&&lr(t,"X-HTTP-Session-Id",this.F),B0(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(oO(a)))+"&"+e:this.o&&I1(t,this.o,a)),b1(this.i,i),this.bb&&lr(t,"TYPE","init"),this.P?(lr(t,"$req",e),lr(t,"SID","null"),i.aa=!0,v1(i,t,null)):v1(i,t,e),this.H=2}}else 3==this.H&&(n?lO(this,n):0==this.j.length||KN(this.i)||lO(this))},ot.Ma=function(){if(this.u=null,hO(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=S0(ds(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Fs(10),LI(this),hO(this))},ot.ib=function(){null!=this.v&&(this.v=null,LI(this),D1(this),Fs(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Fs(2)):(this.l.info("Failed to ping google.com"),Fs(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=yO.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},BI.prototype.g=function(n,e){return new Oo(n,e)},Mi(Oo,Pi),Oo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Fs(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=mO(n,null,n.Y),VI(n)},Oo.prototype.close=function(){T1(this.g)},Oo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=c1(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&VI(e)},Oo.prototype.N=function(){this.g.h=null,delete this.j,T1(this.g),delete this.g,Oo.$.N.call(this)},Mi(vO,g1),Mi(wO,m1),Mi(n_,yO),n_.prototype.Ba=function(){Zi(this.g,"a")},n_.prototype.Aa=function(n){Zi(this.g,new vO(n))},n_.prototype.za=function(n){Zi(this.g,new wO)},n_.prototype.ya=function(){Zi(this.g,"b")},Mi(vu,function WB(){this.blockSize=-1}),vu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},vu.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)S1(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){S1(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){S1(this,r),i=0;break}}this.h=i,this.i+=e},vu.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var KB={};function x1(n){return-128<=n&&128>n?function rB(n,e){var t=KB;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Vn([0|e],0>e?-1:0)}):new Vn([0|n],0>n?-1:0)}function Ml(n){if(isNaN(n)||!isFinite(n))return r_;if(0>n)return Wi(Ml(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=M1;return new Vn(e,0)}var M1=4294967296,r_=x1(0),P1=x1(1),bO=x1(16777216);function rd(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function va(n){return-1==n.h}function Wi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Vn(t,~n.h).add(P1)}function jI(n,e){return n.add(Wi(e))}function $I(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function j0(n,e){this.g=n,this.h=e}function HI(n,e){if(rd(e))throw Error("division by zero");if(rd(n))return new j0(r_,r_);if(va(n))return e=HI(Wi(n),e),new j0(Wi(e.g),Wi(e.h));if(va(e))return e=HI(n,Wi(e)),new j0(Wi(e.g),e.h);if(30<n.g.length){if(va(n)||va(e))throw Error("slowDivide_ only works with positive integers.");for(var t=P1,r=e;0>=r.X(n);)t=CO(t),r=CO(r);var i=i_(t,1),a=i_(r,1);for(r=i_(r,2),t=i_(t,2);!rd(r);){var c=a.add(r);0>=c.X(n)&&(i=i.add(t),a=c),r=i_(r,1),t=i_(t,1)}return e=jI(n,i.R(e)),new j0(i,e)}for(i=r_;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(a=Ml(t)).R(e);va(c)||0<c.X(n);)c=(a=Ml(t-=r)).R(e);rd(a)&&(a=P1),i=i.add(a),n=jI(n,c)}return new j0(i,n)}function CO(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Vn(t,n.h)}function i_(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new Vn(i,n.h)}(ot=Vn.prototype).ea=function(){if(va(this))return-Wi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:M1+r)*e,e*=M1}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(rd(this))return"0";if(va(this))return"-"+Wi(this).toString(n);for(var e=Ml(Math.pow(n,6)),t=this,r="";;){var i=HI(t,e).g,a=((0<(t=jI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(rd(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return va(n=jI(this,n))?-1:rd(n)?0:1},ot.abs=function(){return va(this)?Wi(this):this},ot.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),c=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(a&=65535)}return new Vn(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(n){if(rd(this)||rd(n))return r_;if(va(this))return va(n)?Wi(this).R(Wi(n)):Wi(Wi(this).R(n));if(va(n))return Wi(this.R(Wi(n)));if(0>this.X(bO)&&0>n.X(bO))return Ml(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,c=65535&this.D(r),f=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=c*_,$I(t,2*r+2*i),t[2*r+2*i+1]+=a*_,$I(t,2*r+2*i+1),t[2*r+2*i+1]+=c*f,$I(t,2*r+2*i+1),t[2*r+2*i+2]+=a*f,$I(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Vn(t,0)},ot.gb=function(n){return HI(this,n).h},ot.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Vn(t,this.h&n.h)},ot.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Vn(t,this.h|n.h)},ot.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Vn(t,this.h^n.h)},BI.prototype.createWebChannel=BI.prototype.g,Oo.prototype.send=Oo.prototype.u,Oo.prototype.open=Oo.prototype.m,Oo.prototype.close=Oo.prototype.close,AI.NO_ERROR=0,AI.TIMEOUT=8,AI.HTTP_ERROR=6,kN.COMPLETE="complete",ON.EventType=x0,x0.OPEN="a",x0.CLOSE="b",x0.ERROR="c",x0.MESSAGE="d",Pi.prototype.listen=Pi.prototype.O,Vr.prototype.listenOnce=Vr.prototype.P,Vr.prototype.getLastError=Vr.prototype.Sa,Vr.prototype.getLastErrorCode=Vr.prototype.Ia,Vr.prototype.getStatus=Vr.prototype.da,Vr.prototype.getResponseJson=Vr.prototype.Wa,Vr.prototype.getResponseText=Vr.prototype.ja,Vr.prototype.send=Vr.prototype.ha,Vr.prototype.setWithCredentials=Vr.prototype.Oa,vu.prototype.digest=vu.prototype.l,vu.prototype.reset=vu.prototype.reset,vu.prototype.update=vu.prototype.j,Vn.prototype.add=Vn.prototype.add,Vn.prototype.multiply=Vn.prototype.R,Vn.prototype.modulo=Vn.prototype.gb,Vn.prototype.compare=Vn.prototype.X,Vn.prototype.toNumber=Vn.prototype.ea,Vn.prototype.toString=Vn.prototype.toString,Vn.prototype.getBits=Vn.prototype.D,Vn.fromNumber=Ml,Vn.fromString=function EO(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Wi(EO(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Ml(Math.pow(e,8)),r=r_,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+a),e);8>a?(a=Ml(Math.pow(e,a)),r=r.R(a).add(Ml(c))):r=(r=r.R(t)).add(Ml(c))}return r};var YB=yu.createWebChannelTransport=function(){return new BI},QB=yu.getStatEventTarget=function(){return DI()},R1=yu.ErrorCode=AI,JB=yu.EventType=kN,XB=yu.Event=Mp,IO=yu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},e3=yu.FetchXmlHttpFactory=F0,GI=yu.WebChannel=ON,t3=yu.XhrIo=Vr,n3=yu.Md5=vu,s_=yu.Integer=Vn;const TO="@firebase/firestore";class Ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ri.UNAUTHENTICATED=new Ri(null),Ri.GOOGLE_CREDENTIALS=new Ri("google-credentials-uid"),Ri.FIRST_PARTY=new Ri("first-party-uid"),Ri.MOCK_USER=new Ri("mock-user");let o_="9.23.0";const Ph=new bl.Yd("@firebase/firestore");function k1(){return Ph.logLevel}function Be(n,...e){if(Ph.logLevel<=bl.in.DEBUG){const t=e.map(N1);Ph.debug(`Firestore (${o_}): ${n}`,...t)}}function Zr(n,...e){if(Ph.logLevel<=bl.in.ERROR){const t=e.map(N1);Ph.error(`Firestore (${o_}): ${n}`,...t)}}function wa(n,...e){if(Ph.logLevel<=bl.in.WARN){const t=e.map(N1);Ph.warn(`Firestore (${o_}): ${n}`,...t)}}function N1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${o_}) INTERNAL ASSERTION FAILED: `+n;throw Zr(e),new Error(e)}function Tt(n,e){n||ft()}function st(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Gt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class yi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class DO{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class s3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ri.UNAUTHENTICATED))}shutdown(){}}class o3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class a3{constructor(e){this.t=e,this.currentUser=Ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let c=new yi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new yi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const w=c;e.enqueueRetryable((0,fe.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new yi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new DO(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Ri(e)}}class u3{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Ri.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class l3{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new u3(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class c3{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const c=a.token!==this.T;return this.T=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.T=t.token,new AO(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function d3(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class SO{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=d3(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function a_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function xO(n){return n+"\0"}class br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new br(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new br(0,0))}static max(){return new At(new br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class $0{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===$0.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof $0?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),c=t.get(i);if(a<c)return-1;if(a>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Cn extends $0{construct(e,t,r){return new Cn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Cn(t)}static emptyPath(){return new Cn([])}}const h3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ur extends $0{construct(e,t,r){return new Ur(e,t,r)}static isValidIdentifier(e){return h3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Oe(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Oe(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Oe(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===f?(c=!c,i++):"."!==f||c?(r+=f,i++):(a(),i++)}if(a(),c)throw new Oe(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ur(t)}static emptyPath(){return new Ur([])}}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Cn.fromString(e))}static fromName(e){return new rt(Cn.fromString(e).popFirst(5))}static empty(){return new rt(Cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Cn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Cn(e.slice()))}}class zI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function O1(n){return n.fields.find(e=>2===e.kind)}function Np(n){return n.fields.filter(e=>2!==e.kind)}zI.UNKNOWN_ID=-1;class qI{constructor(e,t){this.fieldPath=e,this.kind=t}}class H0{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new H0(0,Fo.min())}}function MO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new br(t+1,0):new br(t,r));return new Fo(i,rt.empty(),e)}function PO(n){return new Fo(n.readTime,n.key,-1)}class Fo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fo(At.min(),rt.empty(),-1)}static max(){return new Fo(At.max(),rt.empty(),-1)}}function F1(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=rt.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const RO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Rh(n){return L1.apply(this,arguments)}function L1(){return L1=(0,fe.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==RO)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),L1.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,r)=>{t(e)})}static reject(e){return new ue((t,r)=>{r(e)})}static waitFor(e){return new ue((t,r)=>{let i=0,a=0,c=!1;e.forEach(f=>{++i,f.next(()=>{++a,c&&a===i&&t()},_=>r(_))}),c=!0,a===i&&t()})}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next(i=>i?ue.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new ue((r,i)=>{const a=e.length,c=new Array(a);let f=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(D=>{c[w]=D,++f,f===a&&r(c)},D=>i(D))}})}static doWhile(e,t){return new ue((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class ZI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new yi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new G0(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=V1(r.target.error);this.v.reject(new G0(e,i))}}static open(e,t,r,i){try{return new ZI(t,e.transaction(i,r))}catch(a){throw new G0(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new m3(t)}}class wu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===wu.S((0,Gt.z$)())&&Zr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Op(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Gt.hl)())return!1;if(wu.C())return!0;const e=(0,Gt.z$)(),t=wu.S(e),r=0<t&&t<10,i=wu.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,fe.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=c=>{r(c.target.result)},a.onblocked=()=>{i(new G0(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const f=c.target.error;i("VersionError"===f.name?new Oe(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Oe(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new G0(e,f))},a.onupgradeneeded=c=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,a.transaction,c.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,fe.Z)(function*(){const c="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.$(e);const _=ZI.open(a.db,e,c?"readonly":"readwrite",r),w=i(_).next(D=>(_.P(),D)).catch(D=>(_.abort(D),ue.reject(D))).toPromise();return w.catch(()=>{}),yield _.R,w}catch(_){const w=_,D="FirebaseError"!==w.name&&f<3;if(Be("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class g3{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Op(this.L.delete())}}class G0 extends Oe{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function kh(n){return"IndexedDbTransactionError"===n.name}class m3{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Op(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Op(this.store.add(e))}get(e){return Op(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Op(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Op(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(c,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new ue((a,c)=>{i.onerror=f=>{c(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ue((i,a)=>{r.onerror=c=>{a(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,c,f)=>f.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ue((r,i)=>{t.onerror=a=>{const c=V1(a.target.error);i(c)},t.onsuccess=a=>{const c=a.target.result;c?e(c.primaryKey,c.value).next(f=>{f?c.continue():r()}):r()}})}W(e,t){const r=[];return new ue((i,a)=>{e.onerror=c=>{a(c.target.error)},e.onsuccess=c=>{const f=c.target.result;if(!f)return void i();const _=new g3(f),w=t(f.primaryKey,f.value,_);if(w instanceof ue){const D=w.catch(A=>(_.done(),ue.reject(A)));r.push(D)}_.isDone?i():null===_.K?f.continue():f.continue(_.K)}}).next(()=>ue.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Op(n){return new ue((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=V1(r.target.error);t(i)}})}let NO=!1;function V1(n){const e=wu.S((0,Gt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NO||(NO=!0,setTimeout(()=>{throw r},0)),r}}return n}class _3{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,fe.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){kh(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Rh(r)}yield t.et(6e4)}))}}class y3{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,fe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return ue.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Be("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(f=>{i-=f,r.add(c)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const c=a.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,a)).next(f=>(Be("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const c=PO(a);F1(c,r)>0&&(r=c)}),new Fo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Lo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function z0(n){return null==n}function q0(n){return 0===n&&1/n==-1/0}function OO(n){return"number"==typeof n&&Number.isInteger(n)&&!q0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FO(e)),e=v3(n.get(t),e);return FO(e)}function v3(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function FO(n){return n+"\x01\x01"}function Pl(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Cn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const c=n.indexOf("\x01",a);switch((c<0||c>t)&&ft(),n.charAt(c+1)){case"\x01":const f=n.substring(a,c);let _;0===i.length?_=f:(i+=f,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,c),i+="\0";break;case"\x11":i+=n.substring(a,c+1);break;default:ft()}a=c+2}return new Cn(r)}const LO=["userId","batchId"];function WI(n,e){return[n,fs(e)]}function VO(n,e,t){return[n,fs(e),t]}const w3={},E3=["prefixPath","collectionGroup","readTime","documentId"],b3=["prefixPath","collectionGroup","documentId"],C3=["collectionGroup","readTime","prefixPath","documentId"],I3=["canonicalId","targetId"],T3=["targetId","path"],D3=["path","targetId"],A3=["collectionId","parent"],S3=["indexId","uid"],x3=["uid","sequenceNumber"],M3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],P3=["indexId","uid","orderedDocumentKey"],R3=["userId","collectionPath","documentId"],k3=["userId","collectionPath","largestBatchId"],N3=["userId","collectionGroup","largestBatchId"],UO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O3=[...UO,"documentOverlays"],BO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jO=BO,F3=[...jO,"indexConfiguration","indexState","indexEntries"];class U1 extends kO{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ki(n,e){const t=st(n);return wu.M(t.ht,e)}function $O(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function HO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class nr{constructor(e,t){this.comparator=e,this.root=t||Ki.EMPTY}insert(e,t){return new nr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ki.BLACK,null,null))}remove(e){return new nr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KI(this.root,e,this.comparator,!1)}getReverseIterator(){return new KI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KI(this.root,e,this.comparator,!0)}}class KI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ki{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Ki.RED,this.left=i??Ki.EMPTY,this.right=a??Ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ki(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ki.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Ki.EMPTY=null,Ki.RED=!0,Ki.BLACK=!1,Ki.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new nr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new GO(this.data.getIterator())}getIteratorFrom(e){return new GO(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cr(this.comparator);return t.data=e,t}}class GO{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function u_(n){return n.hasNext()?n.getNext():void 0}class ao{constructor(e){this.fields=e,e.sort(Ur.comparator)}static empty(){return new ao([])}unionWith(e){let t=new cr(Ur.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return a_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class zO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new zO("Invalid base64 string: "+i):i}}(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const V3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oh(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=V3.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Br(n.seconds),nanos:Br(n.nanos)}}function Br(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function id(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function YI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function QI(n){const e=n.mapValue.fields.__previous_value__;return YI(e)?QI(e):e}function Z0(n){const e=Oh(n.mapValue.fields.__local_write_time__.timestampValue);return new br(e.seconds,e.nanos)}class U3{constructor(e,t,r,i,a,c,f,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=_,this.useFetchStreams=w}}class Fh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fh("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fh&&e.projectId===this.projectId&&e.database===this.database}}const Lh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},JI={nullValue:"NULL_VALUE"};function Vh(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YI(n)?4:KO(n)?9007199254740991:10:ft()}function Rl(n,e){if(n===e)return!0;const t=Vh(n);if(t!==Vh(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Z0(n).isEqual(Z0(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=Oh(r.timestampValue),c=Oh(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,id(n.bytesValue).isEqual(id(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Br(r.geoPointValue.latitude)===Br(i.geoPointValue.latitude)&&Br(r.geoPointValue.longitude)===Br(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Br(r.integerValue)===Br(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Br(r.doubleValue),c=Br(i.doubleValue);return a===c?q0(a)===q0(c):isNaN(a)&&isNaN(c)}return!1}(n,e);case 9:return a_(n.arrayValue.values||[],e.arrayValue.values||[],Rl);case 10:return function(r,i){const a=r.mapValue.fields||{},c=i.mapValue.fields||{};if($O(a)!==$O(c))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===c[f]||!Rl(a[f],c[f])))return!1;return!0}(n,e);default:return ft()}var i}function W0(n,e){return void 0!==(n.values||[]).find(t=>Rl(t,e))}function Uh(n,e){if(n===e)return 0;const t=Vh(n),r=Vh(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Br(i.integerValue||i.doubleValue),f=Br(a.integerValue||a.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1}(n,e);case 3:return qO(n.timestampValue,e.timestampValue);case 4:return qO(Z0(n),Z0(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,a){const c=id(i),f=id(a);return c.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),f=a.split("/");for(let _=0;_<c.length&&_<f.length;_++){const w=Kt(c[_],f[_]);if(0!==w)return w}return Kt(c.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const c=Kt(Br(i.latitude),Br(a.latitude));return 0!==c?c:Kt(Br(i.longitude),Br(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const c=i.values||[],f=a.values||[];for(let _=0;_<c.length&&_<f.length;++_){const w=Uh(c[_],f[_]);if(w)return w}return Kt(c.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===Lh.mapValue&&a===Lh.mapValue)return 0;if(i===Lh.mapValue)return 1;if(a===Lh.mapValue)return-1;const c=i.fields||{},f=Object.keys(c),_=a.fields||{},w=Object.keys(_);f.sort(),w.sort();for(let D=0;D<f.length&&D<w.length;++D){const A=Kt(f[D],w[D]);if(0!==A)return A;const L=Uh(c[f[D]],_[w[D]]);if(0!==L)return L}return Kt(f.length,w.length)}(n.mapValue,e.mapValue);default:throw ft()}}function qO(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=Oh(n),r=Oh(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function l_(n){return B1(n)}function B1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Oh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?id(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const c of r.values||[])a?a=!1:i+=",",i+=B1(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",c=!0;for(const f of i)c?c=!1:a+=",",a+=`${f}:${B1(r.fields[f])}`;return a+"}"}(n.mapValue):ft();var e}function Fp(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function j1(n){return!!n&&"integerValue"in n}function K0(n){return!!n&&"arrayValue"in n}function ZO(n){return!!n&&"nullValue"in n}function WO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eT(n){return!!n&&"mapValue"in n}function Y0(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Nh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Y0(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Y0(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KO(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function B3(n){return"nullValue"in n?JI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fp(Fh.empty(),rt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ft()}function j3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fp(Fh.empty(),rt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lh:ft()}function YO(n,e){const t=Uh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function QO(n,e){const t=Uh(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Yi{constructor(e){this.value=e}static empty(){return new Yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eT(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Y0(t)}setAll(e){let t=Ur.emptyPath(),r={},i=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=f.popLast()}c?r[f.lastSegment()]=Y0(c):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());eT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Rl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];eT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Yi(Y0(this.value))}}function JO(n){const e=[];return Nh(n.fields,(t,r)=>{const i=new Ur([t]);if(eT(r)){const a=JO(r.mapValue).fields;if(0===a.length)e.push(i);else for(const c of a)e.push(i.child(c))}else e.push(i)}),new ao(e)}class dr{constructor(e,t,r,i,a,c,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=c,this.documentState=f}static newInvalidDocument(e){return new dr(e,0,At.min(),At.min(),At.min(),Yi.empty(),0)}static newFoundDocument(e,t,r,i){return new dr(e,1,t,At.min(),r,i,0)}static newNoDocument(e,t){return new dr(e,2,t,At.min(),At.min(),Yi.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,At.min(),At.min(),Yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bh{constructor(e,t){this.position=e,this.inclusive=t}}function XO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],c=n.position[i];if(r=a.field.isKeyField()?rt.comparator(rt.fromName(c.referenceValue),t.key):Uh(c,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function eF(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Rl(n.position[t],e.position[t]))return!1;return!0}class c_{constructor(e,t="asc"){this.field=e,this.dir=t}}function $3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class tF{}class _n extends tF{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new H3(e,t,r):"array-contains"===t?new q3(e,r):"in"===t?new aF(e,r):"not-in"===t?new Z3(e,r):"array-contains-any"===t?new W3(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new G3(e,r):new z3(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Uh(t,this.value)):null!==t&&Vh(this.value)===Vh(t)&&this.matchesComparison(Uh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Un extends tF{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Un(e,t)}matches(e){return d_(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function d_(n){return"and"===n.op}function $1(n){return"or"===n.op}function H1(n){return nF(n)&&d_(n)}function nF(n){for(const e of n.filters)if(e instanceof Un)return!1;return!0}function G1(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+l_(n.value);if(H1(n))return n.filters.map(e=>G1(e)).join(",");{const e=n.filters.map(t=>G1(t)).join(",");return`${n.op}(${e})`}}function rF(n,e){return n instanceof _n?(t=n,(r=e)instanceof _n&&t.op===r.op&&t.field.isEqual(r.field)&&Rl(t.value,r.value)):n instanceof Un?function(t,r){return r instanceof Un&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,c)=>i&&rF(a,r.filters[c]),!0)}(n,e):void ft();var t,r}function iF(n,e){const t=n.filters.concat(e);return Un.create(t,n.op)}function sF(n){return n instanceof _n?`${(e=n).field.canonicalString()} ${e.op} ${l_(e.value)}`:n instanceof Un?function(e){return e.op.toString()+" {"+e.getFilters().map(sF).join(" ,")+"}"}(n):"Filter";var e}class H3 extends _n{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.matchesComparison(t)}}class G3 extends _n{constructor(e,t){super(e,"in",t),this.keys=oF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class z3 extends _n{constructor(e,t){super(e,"not-in",t),this.keys=oF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class q3 extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return K0(t)&&W0(t.arrayValue,this.value)}}class aF extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&W0(this.value.arrayValue,t)}}class Z3 extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(W0(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!W0(this.value.arrayValue,t)}}class W3 extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!K0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>W0(this.value.arrayValue,r))}}class K3{constructor(e,t=null,r=[],i=[],a=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=c,this.endAt=f,this.dt=null}}function z1(n,e=null,t=[],r=[],i=null,a=null,c=null){return new K3(n,e,t,r,i,a,c)}function Lp(n){const e=st(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>G1(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),z0(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>l_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>l_(r)).join(",")),e.dt=t}return e.dt}function Q0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!rF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!eF(n.startAt,e.startAt)&&eF(n.endAt,e.endAt)}function tT(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function nT(n,e){return n.filters.filter(t=>t instanceof _n&&t.field.isEqual(e))}function uF(n,e,t){let r=JI,i=!0;for(const a of nT(n,e)){let c=JI,f=!0;switch(a.op){case"<":case"<=":c=B3(a.value);break;case"==":case"in":case">=":c=a.value;break;case">":c=a.value,f=!1;break;case"!=":case"not-in":c=JI}YO({value:r,inclusive:i},{value:c,inclusive:f})<0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];YO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function lF(n,e,t){let r=Lh,i=!0;for(const a of nT(n,e)){let c=Lh,f=!0;switch(a.op){case">=":case">":c=j3(a.value),f=!1;break;case"==":case"in":case"<=":c=a.value;break;case"<":c=a.value,f=!1;break;case"!=":case"not-in":c=Lh}QO({value:r,inclusive:i},{value:c,inclusive:f})>0&&(r=c,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const c=t.position[a];QO({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class sd{constructor(e,t=null,r=[],i=[],a=null,c="F",f=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=c,this.startAt=f,this.endAt=_,this.wt=null,this._t=null}}function cF(n,e,t,r,i,a,c,f){return new sd(n,e,t,r,i,a,c,f)}function h_(n){return new sd(n)}function dF(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function q1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rT(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Z1(n){return null!==n.collectionGroup}function Vp(n){const e=st(n);if(null===e.wt){e.wt=[];const t=rT(e),r=q1(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new c_(t)),e.wt.push(new c_(Ur.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new c_(Ur.keyField(),a))}}}return e.wt}function Ls(n){const e=st(n);if(!e._t)if("F"===e.limitType)e._t=z1(e.path,e.collectionGroup,Vp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Vp(e))t.push(new c_(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Bh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Bh(e.startAt.position,e.startAt.inclusive):null;e._t=z1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function W1(n,e){e.getFirstInequalityField(),rT(n);const t=n.filters.concat([e]);return new sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iT(n,e,t){return new sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function J0(n,e){return Q0(Ls(n),Ls(e))&&n.limitType===e.limitType}function hF(n){return`${Lp(Ls(n))}|lt:${n.limitType}`}function K1(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>sF(r)).join(", ")}]`),z0(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>l_(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>l_(r)).join(",")),`Target(${t})`}(Ls(n))}; limitType=${n.limitType})`}function X0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):rt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Vp(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,c){const f=XO(i,a,c);return i.inclusive?f<=0:f<0}(t.startAt,Vp(t),r)||t.endAt&&!function(i,a,c){const f=XO(i,a,c);return i.inclusive?f>=0:f>0}(t.endAt,Vp(t),r)));var t,r}function fF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pF(n){return(e,t)=>{let r=!1;for(const i of Vp(n)){const a=Y3(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Y3(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(i,a,c){const f=a.data.field(i),_=c.data.field(i);return null!==f&&null!==_?Uh(f,_):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}class od{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return HO(this.inner)}size(){return this.innerSize}}const Q3=new nr(rt.comparator);function uo(){return Q3}const gF=new nr(rt.comparator);function ew(...n){let e=gF;for(const t of n)e=e.insert(t.key,t);return e}function mF(n){let e=gF;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function kl(){return tw()}function _F(){return tw()}function tw(){return new od(n=>n.toString(),(n,e)=>n.isEqual(e))}const J3=new nr(rt.comparator),X3=new cr(rt.comparator);function nn(...n){let e=X3;for(const t of n)e=e.add(t);return e}const ej=new cr(Kt);function Y1(){return ej}function yF(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q0(e)?"-0":e}}function vF(n){return{integerValue:""+n}}function wF(n,e){return OO(e)?vF(e):yF(n,e)}class sT{constructor(){this._=void 0}}function tj(n,e,t){return n instanceof f_?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&YI(i)&&(i=QI(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Up?bF(n,e):n instanceof Bp?CF(n,e):function(r,i){const a=EF(r,i),c=IF(a)+IF(r.gt);return j1(a)&&j1(r.gt)?vF(c):yF(r.serializer,c)}(n,e)}function nj(n,e,t){return n instanceof Up?bF(n,e):n instanceof Bp?CF(n,e):t}function EF(n,e){return n instanceof p_?j1(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class f_ extends sT{}class Up extends sT{constructor(e){super(),this.elements=e}}function bF(n,e){const t=TF(e);for(const r of n.elements)t.some(i=>Rl(i,r))||t.push(r);return{arrayValue:{values:t}}}class Bp extends sT{constructor(e){super(),this.elements=e}}function CF(n,e){let t=TF(e);for(const r of n.elements)t=t.filter(i=>!Rl(i,r));return{arrayValue:{values:t}}}class p_ extends sT{constructor(e,t){super(),this.serializer=e,this.gt=t}}function IF(n){return Br(n.integerValue||n.doubleValue)}function TF(n){return K0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class nw{constructor(e,t){this.field=e,this.transform=t}}class ij{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class aT{}function DF(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new m_(n.key,Cr.none()):new g_(n.key,n.data,Cr.none());{const t=n.data,r=Yi.empty();let i=new cr(Ur.comparator);for(let a of e.fields)if(!i.has(a)){let c=t.field(a);null===c&&a.length>1&&(a=a.popLast(),c=t.field(a)),null===c?r.delete(a):r.set(a,c),i=i.add(a)}return new ad(n.key,r,new ao(i.toArray()),Cr.none())}}function sj(n,e,t){n instanceof g_?function(r,i,a){const c=r.value.clone(),f=xF(r.fieldTransforms,i,a.transformResults);c.setAll(f),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):n instanceof ad?function(r,i,a){if(!oT(r.precondition,i))return void i.convertToUnknownDocument(a.version);const c=xF(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(SF(r)),f.setAll(c),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function rw(n,e,t,r){return n instanceof g_?function(i,a,c,f){if(!oT(i.precondition,a))return c;const _=i.value.clone(),w=MF(i.fieldTransforms,f,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ad?function(i,a,c,f){if(!oT(i.precondition,a))return c;const _=MF(i.fieldTransforms,f,a),w=a.data;return w.setAll(SF(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(c=t,oT(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c);var a,c}function oj(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=EF(r.transform,i||null);null!=a&&(null===t&&(t=Yi.empty()),t.set(r.field,a))}return t||null}function AF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&a_(t,r,(i,a)=>function rj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Up&&r instanceof Up||t instanceof Bp&&r instanceof Bp?a_(t.elements,r.elements,Rl):t instanceof p_&&r instanceof p_?Rl(t.gt,r.gt):t instanceof f_&&r instanceof f_);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class g_ extends aT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ad extends aT{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function SF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function xF(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],c=a.transform,f=e.data.field(a.field);r.set(a.field,nj(c,f,t[i]))}return r}function MF(n,e,t){const r=new Map;for(const i of n){const a=i.transform,c=t.data.field(i.field);r.set(i.field,tj(a,c,e))}return r}class m_ extends aT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q1 extends aT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class J1{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&sj(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=rw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=rw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_F();return this.mutations.forEach(i=>{const a=e.get(i.key),c=a.overlayedDocument;let f=this.applyToLocalView(c,a.mutatedFields);f=t.has(i.key)?null:f;const _=DF(c,f);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),nn())}isEqual(e){return this.batchId===e.batchId&&a_(this.mutations,e.mutations,(t,r)=>AF(t,r))&&a_(this.baseMutations,e.baseMutations,(t,r)=>AF(t,r))}}class X1{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=J3;const a=e.mutations;for(let c=0;c<a.length;c++)i=i.insert(a[c].key,r[c].version);return new X1(e,t,r,i)}}class eM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class uj{constructor(e,t){this.count=e,this.unchangedNames=t}}var ri,In;function PF(n){switch(n){default:return ft();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function RF(n){if(void 0===n)return Zr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case ri.OK:return ge.OK;case ri.CANCELLED:return ge.CANCELLED;case ri.UNKNOWN:return ge.UNKNOWN;case ri.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case ri.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case ri.INTERNAL:return ge.INTERNAL;case ri.UNAVAILABLE:return ge.UNAVAILABLE;case ri.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case ri.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case ri.NOT_FOUND:return ge.NOT_FOUND;case ri.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case ri.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case ri.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case ri.ABORTED:return ge.ABORTED;case ri.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case ri.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case ri.DATA_LOSS:return ge.DATA_LOSS;default:return ft()}}(In=ri||(ri={}))[In.OK=0]="OK",In[In.CANCELLED=1]="CANCELLED",In[In.UNKNOWN=2]="UNKNOWN",In[In.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",In[In.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",In[In.NOT_FOUND=5]="NOT_FOUND",In[In.ALREADY_EXISTS=6]="ALREADY_EXISTS",In[In.PERMISSION_DENIED=7]="PERMISSION_DENIED",In[In.UNAUTHENTICATED=16]="UNAUTHENTICATED",In[In.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",In[In.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",In[In.ABORTED=10]="ABORTED",In[In.OUT_OF_RANGE=11]="OUT_OF_RANGE",In[In.UNIMPLEMENTED=12]="UNIMPLEMENTED",In[In.INTERNAL=13]="INTERNAL",In[In.UNAVAILABLE=14]="UNAVAILABLE",In[In.DATA_LOSS=15]="DATA_LOSS";class tM{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return uT}static getOrCreateInstance(){return null===uT&&(uT=new tM),uT}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let uT=null;function kF(){return new TextEncoder}const lj=new s_([4294967295,4294967295],0);function NF(n){const e=kF().encode(n),t=new n3;return t.update(e),new Uint8Array(t.digest())}function OF(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new s_([t,r],0),new s_([i,a],0)]}class nM{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new iw(`Invalid padding: ${t}`);if(r<0)throw new iw(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new iw(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new iw(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=s_.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(s_.fromNumber(r)));return 1===i.compare(lj)&&(i=new s_([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=NF(e),[r,i]=OF(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),c=new nM(a,i,t);return r.forEach(f=>c.insert(f)),c}insert(e){if(0===this.It)return;const t=NF(e),[r,i]=OF(t);for(let a=0;a<this.hashCount;a++){const c=this.Et(r,i,a);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class iw extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sw{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ow.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new sw(At.min(),i,new nr(Kt),uo(),nn())}}class ow{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ow(r,t,nn(),nn(),nn())}}class lT{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class FF{constructor(e,t){this.targetId=e,this.Vt=t}}class LF{constructor(e,t,r=vi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class VF{constructor(){this.St=0,this.Dt=BF(),this.Ct=vi.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=nn(),t=nn(),r=nn();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new ow(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=BF()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class cj{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=uo(),this.zt=UF(),this.Wt=new nr(Kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const c=a.target;if(tT(c))if(0===i){const f=new rt(c.path);this.Yt(r,f,dr.newNoDocument(f,At.min()))}else Tt(1===i);else{const f=this.ie(r);if(f!==i){const _=this.re(e,f);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=tM.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,D,A){var L,j,q,ee,oe,Ue;const Ze={localCacheCount:D,existenceFilterCount:A.count},je=A.unchangedNames;return je&&(Ze.bloomFilter={applied:0===w,hashCount:null!==(L=je?.hashCount)&&void 0!==L?L:0,bitmapLength:null!==(ee=null===(q=null===(j=je?.bits)||void 0===j?void 0:j.bitmap)||void 0===q?void 0:q.length)&&void 0!==ee?ee:0,padding:null!==(Ue=null===(oe=je?.bits)||void 0===oe?void 0:oe.padding)&&void 0!==Ue?Ue:0}),Ze}(_,f,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:c=0},hashCount:f=0}=r;let _,w;try{_=id(a).toUint8Array()}catch(D){if(D instanceof zO)return wa("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{w=new nM(_,c,f)}catch(D){return wa(D instanceof iw?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===w.It?1:i!==t-this.oe(e.targetId,w)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const c=this.Gt.ue(),f=`projects/${c.projectId}/databases/${c.database}/documents/${a.path.canonicalString()}`;t.vt(f)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,c)=>{const f=this.se(c);if(f){if(a.current&&tT(f.target)){const _=new rt(f.target.path);null!==this.jt.get(_)||this.ae(c,_)||this.Yt(c,_,dr.newNoDocument(_,e))}a.Mt&&(t.set(c,a.Ot()),a.Ft())}});let r=nn();this.zt.forEach((a,c)=>{let f=!0;c.forEachWhile(_=>{const w=this.se(_);return!w||"TargetPurposeLimboResolution"===w.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.jt.forEach((a,c)=>c.setReadTime(e));const i=new sw(e,t,this.Wt,this.jt,r);return this.jt=uo(),this.zt=UF(),this.Wt=new nr(Kt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new VF,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new cr(Kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new VF),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function UF(){return new nr(rt.comparator)}function BF(){return new nr(rt.comparator)}const dj={asc:"ASCENDING",desc:"DESCENDING"},hj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fj={and:"AND",or:"OR"};class pj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rM(n,e){return n.useProto3Json||z0(e)?e:{value:e}}function __(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gj(n,e){return __(n,e.toTimestamp())}function Wr(n){return Tt(!!n),At.fromTimestamp(function(e){const t=Oh(e);return new br(t.seconds,t.nanos)}(n))}function iM(n,e){return(t=n,new Cn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function $F(n){const e=Cn.fromString(n);return Tt(QF(e)),e}function aw(n,e){return iM(n.databaseId,e.path)}function Nl(n,e){const t=$F(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(GF(t))}function sM(n,e){return iM(n.databaseId,e)}function HF(n){const e=$F(n);return 4===e.length?Cn.emptyPath():GF(e)}function uw(n){return new Cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function GF(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function zF(n,e,t){return{name:aw(n,e),fields:t.value.mapValue.fields}}function qF(n,e,t){const r=Nl(n,e.name),i=Wr(e.updateTime),a=e.createTime?Wr(e.createTime):At.min(),c=new Yi({mapValue:{fields:e.fields}}),f=dr.newFoundDocument(r,i,a,c);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function lw(n,e){let t;if(e instanceof g_)t={update:zF(n,e.key,e.value)};else if(e instanceof m_)t={delete:aw(n,e.key)};else if(e instanceof ad)t={update:zF(n,e.key,e.data),updateMask:Cj(e.fieldMask)};else{if(!(e instanceof Q1))return ft();t={verify:aw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof f_)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Up)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Bp)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof p_)return{fieldPath:a.field.canonicalString(),increment:c.gt};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:gj(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function oM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Cr.updateTime(Wr(i.updateTime)):void 0!==i.exists?Cr.exists(i.exists):Cr.none():Cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,c){let f=null;"setToServerValue"in c?(Tt("REQUEST_TIME"===c.setToServerValue),f=new f_):"appendMissingElements"in c?f=new Up(c.appendMissingElements.values||[]):"removeAllFromArray"in c?f=new Bp(c.removeAllFromArray.values||[]):"increment"in c?f=new p_(a,c.increment):ft();const _=Ur.fromServerFormat(c.fieldPath);return new nw(_,f)}(n,i)):[];var i;if(e.update){const i=Nl(n,e.update.name),a=new Yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ao((e.updateMask.fieldPaths||[]).map(w=>Ur.fromServerFormat(w)));return new ad(i,a,c,t,r)}return new g_(i,a,t,r)}if(e.delete){const i=Nl(n,e.delete);return new m_(i,t)}if(e.verify){const i=Nl(n,e.verify);return new Q1(i,t)}return ft()}function ZF(n,e){return{documents:[sM(n,e.path)]}}function aM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=sM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return YF(Un.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:jh((D=w).field),direction:wj(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const c=rM(n,e.limit);var f,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function WF(n){let e=HF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=function(D){const A=KF(D);return A instanceof Un&&H1(A)?A.getFilters():[A]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(D=>{return new c_(y_((A=D).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(D){let A;return A="object"==typeof D?D.value:D,z0(A)?null:A}(t.limit));let _=null;var D;t.startAt&&(_=new Bh((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Bh(D.values||[],!D.before)}(t.endAt)),cF(e,i,c,a,f,"F",_,w)}function KF(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=y_(e.unaryFilter.field);return _n.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=y_(e.unaryFilter.field);return _n.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=y_(e.unaryFilter.field);return _n.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=y_(e.unaryFilter.field);return _n.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}(n):void 0!==n.fieldFilter?_n.create(y_((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Un.create(e.compositeFilter.filters.map(t=>KF(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ft()}}(e.compositeFilter.op))}(n):ft();var e}function wj(n){return dj[n]}function Ej(n){return hj[n]}function bj(n){return fj[n]}function jh(n){return{fieldPath:n.canonicalString()}}function y_(n){return Ur.fromServerFormat(n.fieldPath)}function YF(n){return n instanceof _n?function(e){if("=="===e.op){if(WO(e.value))return{unaryFilter:{field:jh(e.field),op:"IS_NAN"}};if(ZO(e.value))return{unaryFilter:{field:jh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(WO(e.value))return{unaryFilter:{field:jh(e.field),op:"IS_NOT_NAN"}};if(ZO(e.value))return{unaryFilter:{field:jh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jh(e.field),op:Ej(e.op),value:e.value}}}(n):n instanceof Un?function(e){const t=e.getFilters().map(r=>YF(r));return 1===t.length?t[0]:{compositeFilter:{op:bj(e.op),filters:t}}}(n):ft()}function Cj(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function QF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class ud{constructor(e,t,r,i,a=At.min(),c=At.min(),f=vi.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=_}withSequenceNumber(e){return new ud(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ud(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ud(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class JF{constructor(e){this.fe=e}}function XF(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:cT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:aw(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:__(i,a.version.toTimestamp()),createTime:__(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:jp(e.version)};else{if(!e.isUnknownDocument())return ft();r.unknownDocument={path:t.path.toArray(),version:jp(e.version)}}var i,a;return r}function cT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function jp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $p(n){const e=new br(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function Hp(n,e){const t=(e.baseMutations||[]).map(a=>oM(n.fe,a));for(let a=0;a<e.mutations.length-1;++a){const c=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(c.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>oM(n.fe,a)),i=br.fromMillis(e.localWriteTimeMs);return new J1(e.batchId,i,t,r)}function cw(n){const e=$p(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?$p(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Ls(h_(HF(i.documents[0])))):r=Ls(WF(n.query)),new ud(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken))}function eL(n,e){const t=jp(e.snapshotVersion),r=jp(e.lastLimboFreeSnapshotVersion);let i;i=tT(e.target)?ZF(n.fe,e.target):aM(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Lp(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uM(n){const e=WF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iT(e,e.limit,"L"):e}function lM(n,e){return new eM(e.largestBatchId,oM(n.fe,e.overlayMutation))}function tL(n,e){const t=e.path.lastSegment();return[n,fs(e.path.popLast()),t]}function nL(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:jp(r.readTime),documentKey:fs(r.documentKey.path),largestBatchId:r.largestBatchId}}class Tj{getBundleMetadata(e,t){return rL(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:$p(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return rL(e).put({bundleId:(r=t).id,createTime:jp(Wr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return iL(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:uM(i.bundledQuery),readTime:$p(i.readTime)};var i})}saveNamedQuery(e,t){return iL(e).put({name:(r=t).name,readTime:jp(Wr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function rL(n){return ki(n,"bundles")}function iL(n){return ki(n,"namedQueries")}class dT{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new dT(e,t.uid||"")}getOverlay(e,t){return dw(e).get(tL(this.userId,t)).next(r=>r?lM(this.serializer,r):null)}getOverlays(e,t){const r=kl();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,c)=>{const f=new eM(t,c);i.push(this.we(e,f))}),ue.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(fs(c.getCollectionPath())));const a=[];return i.forEach(c=>{const f=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);a.push(dw(e).J("collectionPathOverlayIndex",f))}),ue.waitFor(a)}getOverlaysForCollection(e,t,r){const i=kl(),a=fs(t),c=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return dw(e).j("collectionPathOverlayIndex",c).next(f=>{for(const _ of f){const w=lM(this.serializer,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=kl();let c;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return dw(e).X({index:"collectionGroupOverlayIndex",range:f},(_,w,D)=>{const A=lM(this.serializer,w);a.size()<i||A.largestBatchId===c?(a.set(A.getKey(),A),c=A.largestBatchId):D.done()}).next(()=>a)}we(e,t){return dw(e).put(function(r,i,a){const[c,f,_]=tL(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:lw(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function dw(n){return ki(n,"documentOverlays")}class Gp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Br(e.integerValue));else if("doubleValue"in e){const r=Br(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),q0(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(id(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?KO(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):ft()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),rt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Dj(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function sL(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Dj(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Gp.Ve=new Gp;class Aj{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=sL(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=sL(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Sj{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class xj{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class hw{constructor(){this.je=new Aj,this.ze=new Sj(this.je),this.We=new xj(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class zp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zp(this.indexId,this.documentKey,this.arrayValue,r)}}function $h(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=oL(n.arrayValue,e.arrayValue),0!==t?t:(t=oL(n.directionalValue,e.directionalValue),0!==t?t:rt.comparator(n.documentKey,e.documentKey)))}function oL(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Mj{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Tt(e.collectionGroup===this.collectionId);const t=O1(e);if(void 0!==t&&!this.en(t))return!1;const r=Np(e);let i=new Set,a=0,c=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const f=r[a];if(!this.nn(this.Ze,f)||!this.sn(this.Ye[c++],f))return!1}++a}for(;a<r.length;++a){const f=r[a];if(c>=this.Ye.length||!this.sn(this.Ye[c++],f))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function aL(n){var e,t;if(Tt(n instanceof _n||n instanceof Un),n instanceof _n){if(n instanceof aF){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>_n.create(n.field,"==",a)))||[];return Un.create(i,"or")}return n}const r=n.filters.map(i=>aL(i));return Un.create(r,n.op)}function Pj(n){if(0===n.getFilters().length)return[];const e=hM(aL(n));return Tt(uL(e)),cM(e)||dM(e)?[e]:e.getFilters()}function cM(n){return n instanceof _n}function dM(n){return n instanceof Un&&H1(n)}function uL(n){return cM(n)||dM(n)||function(e){if(e instanceof Un&&$1(e)){for(const t of e.getFilters())if(!cM(t)&&!dM(t))return!1;return!0}return!1}(n)}function hM(n){if(Tt(n instanceof _n||n instanceof Un),n instanceof _n)return n;if(1===n.filters.length)return hM(n.filters[0]);const e=n.filters.map(r=>hM(r));let t=Un.create(e,n.op);return t=hT(t),uL(t)?t:(Tt(t instanceof Un),Tt(d_(t)),Tt(t.filters.length>1),t.filters.reduce((r,i)=>fM(r,i)))}function fM(n,e){let t;return Tt(n instanceof _n||n instanceof Un),Tt(e instanceof _n||e instanceof Un),t=n instanceof _n?e instanceof _n?Un.create([n,e],"and"):lL(n,e):e instanceof _n?lL(e,n):function(r,i){if(Tt(r.filters.length>0&&i.filters.length>0),d_(r)&&d_(i))return iF(r,i.getFilters());const a=$1(r)?r:i,c=$1(r)?i:r,f=a.filters.map(_=>fM(_,c));return Un.create(f,"or")}(n,e),hT(t)}function lL(n,e){if(d_(e))return iF(e,n.getFilters());{const t=e.filters.map(r=>fM(n,r));return Un.create(t,"or")}}function hT(n){if(Tt(n instanceof _n||n instanceof Un),n instanceof _n)return n;const e=n.getFilters();if(1===e.length)return hT(e[0]);if(nF(n))return n;const t=e.map(i=>hT(i)),r=[];return t.forEach(i=>{i instanceof _n?r.push(i):i instanceof Un&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Un.create(r,n.op)}class Rj{constructor(){this.rn=new pM}addToCollectionParentIndex(e,t){return this.rn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Fo.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class pM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cr(Cn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(Cn.comparator)).toArray()}}const fT=new Uint8Array(0);class kj{constructor(e,t){this.user=e,this.databaseId=t,this.on=new pM,this.un=new od(r=>Lp(r),(r,i)=>Q0(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:fs(i)};return cL(e).put(a)}return ue.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[xO(t),""],!1,!0);return cL(e).j(i).next(a=>{for(const c of a){if(c.collectionId!==t)break;r.push(Pl(c.parent))}return r})}addFieldIndex(e,t){const r=pT(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var c;delete i.indexId;const a=r.add(i);if(t.indexState){const c=pw(e);return a.next(f=>{c.put(nL(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=pT(e),i=pw(e),a=fw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=fw(e);let i=!0;const a=new Map;return ue.forEach(this.cn(t),c=>this.an(e,c).next(f=>{i&&(i=!!f),a.set(c,f)})).next(()=>{if(i){let c=nn();const f=[];return ue.forEach(a,(_,w)=>{var D;Be("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(je=>`${je.fieldPath}:${je.kind}`).join(",")}`} to execute ${Lp(t)}`);const A=function(je,Ye){const Ft=O1(Ye);if(void 0===Ft)return null;for(const Bt of nT(je,Ft.fieldPath))switch(Bt.op){case"array-contains-any":return Bt.value.arrayValue.values||[];case"array-contains":return[Bt.value]}return null}(w,_),L=function(je,Ye){const Ft=new Map;for(const Bt of Np(Ye))for(const vn of nT(je,Bt.fieldPath))switch(vn.op){case"==":case"in":Ft.set(Bt.fieldPath.canonicalString(),vn.value);break;case"not-in":case"!=":return Ft.set(Bt.fieldPath.canonicalString(),vn.value),Array.from(Ft.values())}return null}(w,_),j=function(je,Ye){const Ft=[];let Bt=!0;for(const vn of Np(Ye)){const Sr=0===vn.kind?uF(je,vn.fieldPath,je.startAt):lF(je,vn.fieldPath,je.startAt);Ft.push(Sr.value),Bt&&(Bt=Sr.inclusive)}return new Bh(Ft,Bt)}(w,_),q=function(je,Ye){const Ft=[];let Bt=!0;for(const vn of Np(Ye)){const Sr=0===vn.kind?lF(je,vn.fieldPath,je.endAt):uF(je,vn.fieldPath,je.endAt);Ft.push(Sr.value),Bt&&(Bt=Sr.inclusive)}return new Bh(Ft,Bt)}(w,_),ee=this.hn(_,w,j),oe=this.hn(_,w,q),Ue=this.ln(_,w,L),Ze=this.fn(_.indexId,A,ee,j.inclusive,oe,q.inclusive,Ue);return ue.forEach(Ze,je=>r.H(je,t.limit).next(Ye=>{Ye.forEach(Ft=>{const Bt=rt.fromSegments(Ft.documentKey);c.has(Bt)||(c=c.add(Bt),f.push(Bt))})}))}).next(()=>f)}return ue.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Pj(Un.create(e.filters,"and")).map(r=>z1(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,c,f){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),D=[];for(let A=0;A<_;++A){const L=t?this.dn(t[A/w]):fT,j=this.wn(e,L,r[A%w],i),q=this._n(e,L,a[A%w],c),ee=f.map(oe=>this.wn(e,L,oe,!0));D.push(...this.createRange(j,q,ee))}return D}wn(e,t,r,i){const a=new zp(e,rt.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new zp(e,rt.empty(),t,r);return i?a.Je():a}an(e,t){const r=new Mj(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let c=null;for(const f of a)r.tn(f)&&(!c||f.fields.length>c.fields.length)&&(c=f);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ue.forEach(i,a=>this.an(e,a).next(c=>{c?0!==r&&c.fields.length<function(f){let _=new cr(Ur.comparator),w=!1;for(const D of f.filters)for(const A of D.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?w=!0:_=_.add(A.field));for(const D of f.orderBy)D.field.isKeyField()||(_=_.add(D.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new hw;for(const i of Np(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const c=r.He(i.kind);Gp.Ve._e(a,c)}return r.Qe()}dn(e){const t=new hw;return Gp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new hw;return Gp.Ve._e(Fp(this.databaseId,t),r.He(function(i){const a=Np(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new hw);let a=0;for(const c of Np(e)){const f=r[a++];for(const _ of i)if(this.yn(t,c.fieldPath)&&K0(f))i=this.pn(i,c,f);else{const w=_.He(c.kind);Gp.Ve._e(f,w)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const c of r.arrayValue.values||[])for(const f of i){const _=new hw;_.seed(f.Qe()),Gp.Ve._e(c,_.He(t.kind)),a.push(_)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof _n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=pT(e),i=pw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const c=[];return ue.forEach(a,f=>i.get([f.indexId,this.uid]).next(_=>{c.push(function(w,D){const A=D?new H0(D.sequenceNumber,new Fo($p(D.readTime),new rt(Pl(D.documentKey)),D.largestBatchId)):H0.empty(),L=w.fields.map(([j,q])=>new qI(Ur.fromServerFormat(j),q));return new zI(w.indexId,w.collectionGroup,L,A)}(f,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=pT(e),a=pw(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>ue.forEach(f,_=>a.put(nL(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ue.forEach(t,(i,a)=>{const c=r.get(i.collectionGroup);return(c?ue.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),ue.forEach(f,_=>this.En(e,i,_).next(w=>{const D=this.An(a,_);return w.isEqual(D)?ue.resolve():this.vn(e,a,_,w,D)}))))})}Rn(e,t,r,i){return fw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return fw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=fw(e);let a=new cr($h);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,f)=>{a=a.add(new zp(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}An(e,t){let r=new cr($h);const i=this.mn(t,e);if(null==i)return r;const a=O1(t);if(null!=a){const c=e.data.field(a.fieldPath);if(K0(c))for(const f of c.arrayValue.values||[])r=r.add(new zp(t.indexId,e.key,this.dn(f),i))}else r=r.add(new zp(t.indexId,e.key,fT,i));return r}vn(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(f,_,w,D,A){const L=f.getIterator(),j=_.getIterator();let q=u_(L),ee=u_(j);for(;q||ee;){let oe=!1,Ue=!1;if(q&&ee){const Ze=w(q,ee);Ze<0?Ue=!0:Ze>0&&(oe=!0)}else null!=q?Ue=!0:oe=!0;oe?(D(ee),ee=u_(j)):Ue?(A(q),q=u_(L)):(q=u_(L),ee=u_(j))}}(i,a,$h,f=>{c.push(this.Rn(e,t,r,f))},f=>{c.push(this.Pn(e,t,r,f))}),ue.waitFor(c)}Tn(e){let t=1;return pw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,f)=>$h(c,f)).filter((c,f,_)=>!f||0!==$h(c,_[f-1]));const i=[];i.push(e);for(const c of r){const f=$h(c,e),_=$h(c,t);if(0===f)i[0]=e.Je();else if(f>0&&_<0)i.push(c),i.push(c.Je());else if(_>0)break}i.push(t);const a=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];a.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,fT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,fT,[]]))}return a}bn(e,t){return $h(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dL)}getMinOffset(e,t){return ue.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||ft())).next(dL)}}function cL(n){return ki(n,"collectionParents")}function fw(n){return ki(n,"indexEntries")}function pT(n){return ki(n,"indexConfiguration")}function pw(n){return ki(n,"indexState")}function dL(n){Tt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;F1(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fo(e.readTime,e.documentKey,t)}const hL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fL(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],c=IDBKeyRange.only(t.batchId);let f=0;const _=r.X({range:c},(D,A,L)=>(f++,L.delete()));a.push(_.next(()=>{Tt(1===f)}));const w=[];for(const D of t.mutations){const A=VO(e,D.key.path,t.batchId);a.push(i.delete(A)),w.push(D.key)}return ue.waitFor(a).next(()=>w)}function gT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class mT{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Tt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new mT(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hh(e).X({index:"userMutationsIndex",range:r},(i,a,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=v_(e),c=Hh(e);return c.add({}).next(f=>{Tt("number"==typeof f);const _=new J1(f,t,r,i),w=function(L,j,q){const ee=q.baseMutations.map(Ue=>lw(L.fe,Ue)),oe=q.mutations.map(Ue=>lw(L.fe,Ue));return{userId:j,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:ee,mutations:oe}}(this.serializer,this.userId,_),D=[];let A=new cr((L,j)=>Kt(L.canonicalString(),j.canonicalString()));for(const L of i){const j=VO(this.userId,L.key.path,f);A=A.add(L.key.path.popLast()),D.push(c.put(w)),D.push(a.put(j,w3))}return A.forEach(L=>{D.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Vn[f]=_.keys()}),ue.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Hh(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Hp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ue.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Hh(e).X({index:"userMutationsIndex",range:i},(c,f,_)=>{f.userId===this.userId&&(Tt(f.batchId>=r),a=Hp(this.serializer,f)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Hh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,c)=>{r=a.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hh(e).j("userMutationsIndex",t).next(r=>r.map(i=>Hp(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=WI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return v_(e).X({range:i},(c,f,_)=>{const[w,D,A]=c,L=Pl(D);if(w===this.userId&&t.path.isEqual(L))return Hh(e).get(A).next(j=>{if(!j)throw ft();Tt(j.userId===this.userId),a.push(Hp(this.serializer,j))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Kt);const i=[];return t.forEach(a=>{const c=WI(this.userId,a.path),f=IDBKeyRange.lowerBound(c),_=v_(e).X({range:f},(w,D,A)=>{const[L,j,q]=w,ee=Pl(j);L===this.userId&&a.path.isEqual(ee)?r=r.add(q):A.done()});i.push(_)}),ue.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=WI(this.userId,r),c=IDBKeyRange.lowerBound(a);let f=new cr(Kt);return v_(e).X({range:c},(_,w,D)=>{const[A,L,j]=_,q=Pl(L);A===this.userId&&r.isPrefixOf(q)?q.length===i&&(f=f.add(j)):D.done()}).next(()=>this.Dn(e,f))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Hh(e).get(a).next(c=>{if(null===c)throw ft();Tt(c.userId===this.userId),r.push(Hp(this.serializer,c))}))}),ue.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fL(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ue.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return v_(e).X({range:r},(a,c,f)=>{if(a[0]===this.userId){const _=Pl(a[1]);i.push(_)}else f.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return pL(e,this.userId,t)}xn(e){return gL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pL(n,e,t){const r=WI(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let c=!1;return v_(n).X({range:a,Y:!0},(f,_,w)=>{const[D,A,L]=f;D===e&&A===i&&(c=!0),w.done()}).next(()=>c)}function Hh(n){return ki(n,"mutations")}function v_(n){return ki(n,"documentMutations")}function gL(n){return ki(n,"mutationQueues")}class qp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new qp(0)}static Mn(){return new qp(-1)}}class Nj{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new qp(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>At.fromTimestamp(new br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>w_(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return w_(e).X((c,f)=>{const _=cw(f);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>ue.waitFor(a)).next(()=>i)}forEachTarget(e,t){return w_(e).X((r,i)=>{const a=cw(i);t(a)})}$n(e){return mL(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}On(e,t){return mL(e).put("targetGlobalKey",t)}Fn(e,t){return w_(e).put(eL(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Lp(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return w_(e).X({range:i,index:"queryTargetsIndex"},(c,f,_)=>{const w=cw(f);Q0(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Gh(e);return t.forEach(c=>{const f=fs(c.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,c))}),ue.waitFor(i)}removeMatchingKeys(e,t,r){const i=Gh(e);return ue.forEach(t,a=>{const c=fs(a.path);return ue.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Gh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gh(e);let a=nn();return i.X({range:r,Y:!0},(c,f,_)=>{const w=Pl(c[1]),D=new rt(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=fs(t.path),i=IDBKeyRange.bound([r],[xO(r)],!1,!0);let a=0;return Gh(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,f],_,w)=>{0!==c&&(a++,w.done())}).next(()=>a>0)}le(e,t){return w_(e).get(t).next(r=>r?cw(r):null)}}function w_(n){return ki(n,"targets")}function mL(n){return ki(n,"targetGlobal")}function Gh(n){return ki(n,"targetDocuments")}function _L([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class Oj{constructor(e){this.Ln=e,this.buffer=new cr(_L),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_L(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yL{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,fe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){kh(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Rh(r)}yield t.Qn(3e5)}))}}class Fj{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Lo.ct);const r=new Oj(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(hL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hL):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,c,f,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,c=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(w=Date.now(),k1()<=bl.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-D}ms\n\tDetermined least recently used ${i} in `+(f-c)+`ms\n\tRemoved ${a} targets in `+(_-f)+`ms\n\tRemoved ${A} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class Lj{constructor(e,t){this.db=e,this.garbageCollector=function vL(n,e){return new Fj(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return _T(e,r)}removeReference(e,t,r){return _T(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return _T(e,t)}Xn(e,t){return function(r,i){let a=!1;return gL(r).Z(c=>pL(r,c,i).next(f=>(f&&(a=!0),ue.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(c,f)=>{if(f<=t){const _=this.Xn(e,c).next(w=>{if(!w)return a++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),Gh(e).delete([0,fs(c.path)])))});i.push(_)}}).next(()=>ue.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return _T(e,t)}Yn(e,t){const r=Gh(e);let i,a=Lo.ct;return r.X({index:"documentTargetsIndex"},([c,f],{path:_,sequenceNumber:w})=>{0===c?(a!==Lo.ct&&t(new rt(Pl(i)),a),a=w,i=_):a=Lo.ct}).next(()=>{a!==Lo.ct&&t(new rt(Pl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function _T(n,e){return Gh(n).put((r=n.currentSequenceNumber,{targetId:0,path:fs(e.path),sequenceNumber:r}));var r}class wL{constructor(){this.changes=new od(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Vj{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Zp(e).put(r)}removeEntry(e,t,r){return Zp(e).delete(function(i,a){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],cT(a),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=dr.newInvalidDocument(t);return Zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gw(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:dr.newInvalidDocument(t)};return Zp(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(gw(t))},(i,a)=>{r={document:this.ts(t,a),size:gT(a)}}).next(()=>r)}getEntries(e,t){let r=uo();return this.ns(e,t,(i,a)=>{const c=this.ts(i,a);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=uo(),i=new nr(rt.comparator);return this.ns(e,t,(a,c)=>{const f=this.ts(a,c);r=r.insert(a,f),i=i.insert(a,gT(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ue.resolve();let i=new cr(IL);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(gw(i.first()),gw(i.last())),c=i.getIterator();let f=c.getNext();return Zp(e).X({index:"documentKeyIndex",range:a},(_,w,D)=>{const A=rt.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;f&&IL(f,A)<0;)r(f,null),f=c.getNext();f&&f.isEqual(A)&&(r(f,w),f=c.hasNext()?c.getNext():null),f?D.G(gw(f)):D.done()}).next(()=>{for(;f;)r(f,null),f=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,c=[a.popLast().toArray(),a.lastSegment(),cT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zp(e).j(IDBKeyRange.bound(c,f,!0)).next(_=>{let w=uo();for(const D of _){const A=this.ts(rt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);A.isFoundDocument()&&(X0(t,A)||i.has(A.key))&&(w=w.insert(A.key,A))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=uo();const c=CL(t,r),f=CL(t,Fo.max());return Zp(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,f,!0)},(_,w,D)=>{const A=this.ts(rt.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(A.key,A),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new Uj(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bL(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Zn(e,t){return bL(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function Ij(n,e){let t;if(e.document)t=qF(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=rt.fromSegments(e.noDocument.path),i=$p(e.noDocument.readTime);t=dr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ft();{const r=rt.fromSegments(e.unknownDocument.path),i=$p(e.unknownDocument.version);t=dr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new br(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return dr.newInvalidDocument(e)}}function EL(n){return new Vj(n)}class Uj extends wL{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new od(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new cr((a,c)=>Kt(a.canonicalString(),c.canonicalString()));return this.changes.forEach((a,c)=>{const f=this.us.get(a);if(t.push(this.os.removeEntry(e,a,f.readTime)),c.isValidDocument()){const _=XF(this.os.serializer,c);i=i.add(a.path.popLast()),r+=gT(_)-f.size,t.push(this.os.addEntry(e,a,_))}else if(r-=f.size,this.trackRemovals){const _=XF(this.os.serializer,c.convertToNoDocument(At.min()));t.push(this.os.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),ue.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,c)=>{this.us.set(a,{size:c,readTime:r.get(a).readTime})}),r))}}function bL(n){return ki(n,"remoteDocumentGlobal")}function Zp(n){return ki(n,"remoteDocumentsV14")}function gw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CL(n,e){const t=e.documentKey.path.toArray();return[n,cT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function IL(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Kt(t[a],r[a]),i)return i;return i=Kt(t.length,r.length),i||(i=Kt(t[t.length-2],r[r.length-2]),i||Kt(t[t.length-1],r[r.length-1]))}class Bj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class TL{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&rw(r.mutation,i,ao.empty(),br.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,nn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=nn()){const i=kl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let c=ew();return a.forEach((f,_)=>{c=c.insert(f,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=kl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,nn()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,r,i){let a=uo();const c=tw(),f=tw();return t.forEach((_,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof ad)?a=a.insert(w.key,w):void 0!==D?(c.set(w.key,D.mutation.getFieldMask()),rw(D.mutation,w,D.mutation.getFieldMask(),br.now())):c.set(w.key,ao.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,D)=>c.set(w,D)),t.forEach((w,D)=>{var A;return f.set(w,new Bj(D,null!==(A=c.get(w))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=tw();let i=new nr((c,f)=>c-f),a=nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let D=r.get(_)||ao.empty();D=f.applyToLocalView(w,D),r.set(_,D);const A=(i.get(f.batchId)||nn()).add(_);i=i.insert(f.batchId,A)})}).next(()=>{const c=[],f=i.getReverseIterator();for(;f.hasNext();){const _=f.getNext(),w=_.key,D=_.value,A=_F();D.forEach(L=>{if(!a.has(L)){const j=DF(t.get(L),r.get(L));null!==j&&A.set(L,j),a=a.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,w,A))}return ue.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Z1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const c=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(kl());let f=-1,_=a;return c.next(w=>ue.forEach(w,(D,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),a.get(D)?ue.resolve():this.remoteDocumentCache.getEntry(e,D).next(L=>{_=_.insert(D,L)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,nn())).next(D=>({batchId:f,changes:mF(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new rt(t)).next(r=>{let i=ew();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=ew();return this.indexManager.getCollectionParents(e,i).next(c=>ue.forEach(c,f=>{const _=(w=t,D=f.child(i),new sd(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((D,A)=>{a=a.insert(D,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((f,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,dr.newInvalidDocument(w)))});let c=ew();return a.forEach((f,_)=>{const w=i.get(f);void 0!==w&&rw(w.mutation,_,ao.empty(),br.now()),X0(t,_)&&(c=c.insert(f,_))}),c})}}class jj{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ue.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Wr(r.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:uM(r.bundledQuery),readTime:Wr(r.readTime)}),ue.resolve();var r}}class $j{constructor(){this.overlays=new nr(rt.comparator),this.ls=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=kl();return ue.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=kl(),a=t.length+1,c=new rt(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const _=f.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new nr((w,D)=>w-D);const c=this.overlays.getIterator();for(;c.hasNext();){const w=c.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=kl(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const f=kl(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>f.set(w,D)),!(f.size()>=i)););return ue.resolve(f)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new eM(t,r));let a=this.ls.get(t);void 0===a&&(a=nn(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class gM{constructor(){this.fs=new cr(Ni.ds),this.ws=new cr(Ni._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new Ni(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new Ni(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new rt(new Cn([])),r=new Ni(t,e),i=new Ni(t,e+1),a=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),a.push(c.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new rt(new Cn([])),r=new Ni(t,e),i=new Ni(t,e+1);let a=nn();return this.ws.forEachInRange([r,i],c=>{a=a.add(c.key)}),a}containsKey(e){const t=new Ni(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ni{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return rt.comparator(e.key,t.key)||Kt(e.As,t.As)}static _s(e,t){return Kt(e.As,t.As)||rt.comparator(e.key,t.key)}}class Hj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new cr(Ni.ds)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const c=new J1(a,t,r,i);this.mutationQueue.push(c);for(const f of i)this.Rs=this.Rs.add(new Ni(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ni(t,0),i=new Ni(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],c=>{const f=this.Ps(c.As);a.push(f)}),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cr(Kt);return t.forEach(i=>{const a=new Ni(i,0),c=new Ni(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,c],f=>{r=r.add(f.As)})}),ue.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;rt.isDocumentKey(a)||(a=a.child(""));const c=new Ni(new rt(a),0);let f=new cr(Kt);return this.Rs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(f=f.add(_.As)),!0)},c),ue.resolve(this.Vs(f))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ue.forEach(t.mutations,i=>{const a=new Ni(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new Ni(t,0),i=this.Rs.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ue.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gj{constructor(e){this.Ds=e,this.docs=new nr(rt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let r=uo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():dr.newInvalidDocument(i))}),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=uo();const c=t.path,f=new rt(c.child("")),_=this.docs.getIteratorFrom(f);for(;_.hasNext();){const{key:w,value:{document:D}}=_.getNext();if(!c.isPrefixOf(w.path))break;w.path.length>c.length+1||F1(PO(D),r)<=0||(i.has(D.key)||X0(t,D))&&(a=a.insert(D.key,D.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){ft()}Cs(e,t){return ue.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zj(this)}getSize(e){return ue.resolve(this.size)}}class zj extends wL{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ue.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class qj{constructor(e){this.persistence=e,this.xs=new od(t=>Lp(t),Q0),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ns=0,this.ks=new gM,this.targetCount=0,this.Ms=qp.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ue.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new qp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Fn(t),ue.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((c,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.xs.delete(c),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),ue.waitFor(a).next(()=>i)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(c=>{a.push(i.markPotentiallyOrphaned(e,c))}),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this.ks.containsKey(t))}}class mM{constructor(e,t){this.$s={},this.overlays={},this.Os=new Lo(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new qj(this),this.indexManager=new Rj,this.remoteDocumentCache=new Gj(r=>this.referenceDelegate.Ls(r)),this.serializer=new JF(t),this.qs=new jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $j,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new Hj(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new Zj(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return ue.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Zj extends kO{constructor(e){super(),this.currentSequenceNumber=e}}class yT{constructor(e){this.persistence=e,this.Qs=new gM,this.js=null}static zs(e){return new yT(e)}get Ws(){if(this.js)return this.js;throw ft()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ws,r=>{const i=rt.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,At.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ue.or([()=>ue.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Wj{constructor(e){this.serializer=e}O(e,t,r,i){const a=new ZI("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LO,{unique:!0}),f.createObjectStore("documentMutations"),DL(e),function(f){f.createObjectStore("remoteDocuments")}(e));let c=ue.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),DL(e)),c=c.next(()=>function(f){const _=f.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(f,_){return _.store("mutations").j().next(w=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LO,{unique:!0});const D=_.store("mutations"),A=w.map(L=>D.put(L));return ue.waitFor(A)})}(e,a))),c=c.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(a))),r<6&&i>=6&&(c=c.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(a))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,a))),r<9&&i>=9&&(c=c.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(a))),r<11&&i>=11&&(c=c.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(f){const _=f.createObjectStore("documentOverlays",{keyPath:R3});_.createIndex("collectionPathOverlayIndex",k3,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",N3,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(f){const _=f.createObjectStore("remoteDocumentsV14",{keyPath:E3});_.createIndex("documentKeyIndex",b3),_.createIndex("collectionGroupIndex",C3)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,a))),r<15&&i>=15&&(c=c.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:S3}).createIndex("sequenceNumberIndex",x3,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:M3}).createIndex("documentKeyIndex",P3,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=gT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ue.forEach(i,a=>{const c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(f=>ue.forEach(f,_=>{Tt(_.userId===a.userId);const w=Hp(this.serializer,_);return fL(e,a.userId,w).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((c,f)=>{const _=new Cn(c),w=[0,fs(_)];a.push(t.get(w).next(D=>D?ue.resolve():t.put({targetId:0,path:fs(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ue.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:A3});const r=t.store("collectionParents"),i=new pM,a=c=>{if(i.add(c)){const f=c.lastSegment(),_=c.popLast();return r.put({collectionId:f,parent:fs(_)})}};return t.store("remoteDocuments").X({Y:!0},(c,f)=>{const _=new Cn(c);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,f,_],w)=>{const D=Pl(f);return a(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=cw(i),c=eL(this.serializer,a);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,c)=>{const f=t.store("remoteDocumentsV14"),_=(w=c,w.document?new rt(Cn.fromString(w.document.name).popFirst(5)):w.noDocument?rt.fromSegments(w.noDocument.path):w.unknownDocument?rt.fromSegments(w.unknownDocument.path):ft()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(f.put(D))}).next(()=>ue.waitFor(i))}si(e,t){const r=t.store("mutations"),i=EL(this.serializer),a=new mM(yT.zs,this.serializer.fe);return r.j().next(c=>{const f=new Map;return c.forEach(_=>{var w;let D=null!==(w=f.get(_.userId))&&void 0!==w?w:nn();Hp(this.serializer,_).keys().forEach(A=>D=D.add(A)),f.set(_.userId,D)}),ue.forEach(f,(_,w)=>{const D=new Ri(w),A=dT.de(this.serializer,D),L=a.getIndexManager(D),j=mT.de(D,this.serializer,L,a.referenceDelegate);return new TL(i,j,A,L).recalculateAndSaveOverlaysForDocumentKeys(new U1(t,Lo.ct),_).next()})})}}function DL(n){n.createObjectStore("targetDocuments",{keyPath:T3}).createIndex("documentTargetsIndex",D3,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",I3,{unique:!0}),n.createObjectStore("targetGlobal")}const _M="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class yM{constructor(e,t,r,i,a,c,f,_,w,D,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=c,this.document=f,this.ri=w,this.oi=D,this.ui=A,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=L=>Promise.resolve(),!yM.D())throw new Oe(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Lj(this,i),this.di=t+"main",this.serializer=new JF(_),this.wi=new wu(this.di,this.ui,new Wj(this.serializer)),this.Bs=new Nj(this.referenceDelegate,this.serializer),this.remoteDocumentCache=EL(this.serializer),this.qs=new Tj,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&Zr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(ge.FAILED_PRECONDITION,_M);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Lo(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,fe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,fe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,fe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(kh(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return mw(e).get("owner").next(t=>ue.resolve(this.Ri(t)))}Pi(e){return wT(e).delete(this.clientId)}bi(){var e=this;return(0,fe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ki(r,"clientMetadata");return i.j().next(a=>{const c=e.Si(a,18e5),f=a.filter(_=>-1===c.indexOf(_));return ue.forEach(f,_=>i.delete(_.clientId)).next(()=>f)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ue.resolve(!0):mw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Oe(ge.FAILED_PRECONDITION,_M);return!1}}return!(!this.networkEnabled||!this.inForeground)||wT(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,fe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new U1(t,Lo.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>wT(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return mT.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kj(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return dT.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(c=this.ui)?F3:14===c?jO:13===c?BO:12===c?O3:11===c?UO:void ft();var c;let f;return this.wi.runTransaction(e,i,a,_=>(f=new U1(_,this.Os?this.Os.next():Lo.ct),"readwrite-primary"===t?this.Ti(f).next(w=>!!w||this.Ei(f)).next(w=>{if(!w)throw Zr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Oe(ge.FAILED_PRECONDITION,RO);return r(f)}).next(w=>this.vi(f).next(()=>w)):this.Oi(f).next(()=>r(f)))).then(_=>(f.raiseOnCommittedEvent(),_))}Oi(e){return mw(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(ge.FAILED_PRECONDITION,_M)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return mw(e).put("owner",t)}static D(){return wu.D()}Ai(e){const t=mw(e);return t.get("owner").next(r=>this.Ri(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Zr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Gt.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Zr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Zr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mw(n){return ki(n,"owner")}function wT(n){return ki(n,"clientMetadata")}function vM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=nn(),i=nn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new wM(e,t.fromCache,r,i)}}class AL{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(dF(t))return ue.resolve(null);let r=Ls(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=iT(t,null,"F"),r=Ls(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const c=nn(...a);return this.Ui.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.ji(t,f);return this.zi(t,w,c,_.readTime)?this.Ki(e,iT(t,null,"F")):this.Wi(e,w,t,_)}))})))}Gi(e,t,r,i){return dF(t)||i.isEqual(At.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const c=this.ji(t,a);return this.zi(t,c,r,i)?this.Qi(e,t):(k1()<=bl.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),K1(t)),this.Wi(e,c,t,MO(i,-1)))})}ji(e,t){let r=new cr(pF(e));return t.forEach((i,a)=>{X0(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return k1()<=bl.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",K1(t)),this.Ui.getDocumentsMatchingQuery(e,t,Fo.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(c=>{a=a.insert(c.key,c)}),a))}}class Kj{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new nr(Kt),this.Yi=new od(a=>Lp(a),Q0),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TL(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function SL(n,e,t,r){return new Kj(n,e,t,r)}function xL(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,fe.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const c=[],f=[];let _=nn();for(const w of i){c.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){f.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(w=>({er:w,removedBatchIds:c,addedBatchIds:f}))})})}),EM.apply(this,arguments)}function Yj(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,f,_,w){const D=_.batch,A=D.keys();let L=ue.resolve();return A.forEach(j=>{L=L.next(()=>w.getEntry(f,j)).next(q=>{const ee=_.docVersions.get(j);Tt(null!==ee),q.version.compareTo(ee)<0&&(D.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),w.addEntry(q)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(f,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let f=nn();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(f=f.add(c.batch.mutations[_].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ML(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Qj(n,e){const t=st(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const f=[];e.targetChanges.forEach((D,A)=>{const L=i.get(A);if(!L)return;f.push(t.Bs.removeMatchingKeys(a,D.removedDocuments,A).next(()=>t.Bs.addMatchingKeys(a,D.addedDocuments,A)));let j=L.withSequenceNumber(a.currentSequenceNumber);var q,ee,oe;null!==e.targetMismatches.get(A)?j=j.withResumeToken(vi.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):D.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(D.resumeToken,r)),i=i.insert(A,j),ee=j,oe=D,(0===(q=L).resumeToken.approximateByteSize()||ee.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&f.push(t.Bs.updateTargetData(a,j))});let _=uo(),w=nn();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),f.push(PL(a,c,e.documentUpdates).next(D=>{_=D.nr,w=D.sr})),!r.isEqual(At.min())){const D=t.Bs.getLastRemoteSnapshotVersion(a).next(A=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(D)}return ue.waitFor(f).next(()=>c.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ji=i,a))}function PL(n,e,t){let r=nn(),i=nn();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let c=uo();return t.forEach((f,_)=>{const w=a.get(f);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(f)),_.isNoDocument()&&_.version.isEqual(At.min())?(e.removeEntry(f,_.readTime),c=c.insert(f,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),c=c.insert(f,_)):Be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",w.version," Watch version:",_.version)}),{nr:c,sr:i}})}function Jj(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function E_(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,ue.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new ud(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function b_(n,e,t){return bM.apply(this,arguments)}function bM(){return bM=(0,fe.Z)(function*(n,e,t){const r=st(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!kh(c))throw c;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),bM.apply(this,arguments)}function ET(n,e,t){const r=st(n);let i=At.min(),a=nn();return r.persistence.runTransaction("Execute query","readonly",c=>function(f,_,w){const D=st(f),A=D.Yi.get(w);return void 0!==A?ue.resolve(D.Ji.get(A)):D.Bs.getTargetData(_,w)}(r,c,Ls(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,f.targetId).next(_=>{a=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:At.min(),t?a:nn())).next(f=>(NL(r,fF(e),f),{documents:f,ir:a})))}function RL(n,e){const t=st(n),r=st(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(c=>c?c.target:null))}function kL(n,e){const t=st(n),r=t.Xi.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,MO(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(NL(t,e,i),i))}function NL(n,e,t){let r=n.Xi.get(e)||At.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function CM(){return CM=(0,fe.Z)(function*(n,e,t,r){const i=st(n);let a=nn(),c=uo();for(const w of t){const D=e.rr(w.metadata.name);w.document&&(a=a.add(D));const A=e.ur(w);A.setReadTime(e.cr(w.metadata.readTime)),c=c.insert(D,A)}const f=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield E_(i,(w=r,Ls(h_(Cn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>PL(w,f,c).next(D=>(f.apply(w),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Bs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.nr,D.sr)).next(()=>D.nr)))}),CM.apply(this,arguments)}function e6(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,fe.Z)(function*(n,e,t=nn()){const r=yield E_(n,Ls(uM(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const c=Wr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(a,e);const f=r.withResumeToken(vi.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(f.targetId,f),i.Bs.updateTargetData(a,f).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),IM.apply(this,arguments)}function OL(n,e){return`firestore_clients_${n}_${e}`}function FL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function TM(n,e){return`firestore_targets_${n}_${e}`}class bT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Oe(i.error.code,i.error.message))),c?new bT(e,t,i.state,a):(Zr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _w{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Oe(r.error.code,r.error.message))),a?new _w(e,r.state,i):(Zr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Y1();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=OO(r.activeTargetIds[c]),a=a.add(r.activeTargetIds[c]);return i?new CT(e,a):(Zr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class DM{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new DM(t.clientId,t.onlineState):(Zr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class AM{constructor(){this.activeTargetIds=Y1()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SM{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new nr(Kt),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=OL(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new AM),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,fe.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(OL(e.persistenceKey,i));if(a){const c=CT.ar(i,a);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(TM(this.persistenceKey,e));if(r){const i=_w.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(TM(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void Zr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,fe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let c=Lo.ct;if(null!=a)try{const f=JSON.parse(a);Tt("number"==typeof f),c=f}catch(f){Zr("SharedClientState","Failed to read sequence number from WebStorage",f)}return c}(r.newValue);i!==Lo.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new bT(this.currentUser,e,t,r),a=FL(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=FL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=TM(this.persistenceKey,e),a=new _w(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return CT.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return bT.ar(new Ri(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return _w.ar(i,t)}br(e){return DM.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,fe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),c=[],f=[];return a.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{a.has(_)||f.push(_)}),this.syncEngine.Wr(c,f).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Y1();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class LL{constructor(){this.Hr=new AM,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new AM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class t6{Yr(e){}shutdown(){}}class VL{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let IT=null;function xM(){return null===IT?IT=268435456+Math.round(2147483648*Math.random()):IT++,"0x"+IT.toString(16)}const n6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r6{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const gs="WebChannelConnection";class i6 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const c=xM(),f=this.To(e,t);Be("RestConnection",`Sending RPC '${e}' ${c}:`,f,r);const _={};return this.Eo(_,i,a),this.Ao(e,f,_,r).then(w=>(Be("RestConnection",`Received RPC '${e}' ${c}: `,w),w),w=>{throw wa("RestConnection",`RPC '${e}' ${c} failed with error: `,w,"url: ",f,"request:",r),w})}vo(e,t,r,i,a,c){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+o_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${n6[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=xM();return new Promise((c,f)=>{const _=new t3;_.setWithCredentials(!0),_.listenOnce(JB.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case R1.NO_ERROR:const D=_.getResponseJson();Be(gs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(D)),c(D);break;case R1.TIMEOUT:Be(gs,`RPC '${e}' ${a} timed out`),f(new Oe(ge.DEADLINE_EXCEEDED,"Request time out"));break;case R1.HTTP_ERROR:const A=_.getStatus();if(Be(gs,`RPC '${e}' ${a} failed with status:`,A,"response text:",_.getResponseText()),A>0){let L=_.getResponseJson();Array.isArray(L)&&(L=L[0]);const j=L?.error;if(j&&j.status&&j.message){const q=function(ee){const oe=ee.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(oe)>=0?oe:ge.UNKNOWN}(j.status);f(new Oe(q,j.message))}else f(new Oe(ge.UNKNOWN,"Server responded with status "+_.getStatus()))}else f(new Oe(ge.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Be(gs,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Be(gs,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=xM(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=YB(),f=QB(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(_.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(_.xmlHttpFactory=new e3({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const D=a.join("");Be(gs,`Creating RPC '${e}' stream ${i}: ${D}`,_);const A=c.createWebChannel(D,_);let L=!1,j=!1;const q=new r6({ro:oe=>{j?Be(gs,`Not sending because RPC '${e}' stream ${i} is closed:`,oe):(L||(Be(gs,`Opening RPC '${e}' stream ${i} transport.`),A.open(),L=!0),Be(gs,`RPC '${e}' stream ${i} sending:`,oe),A.send(oe))},oo:()=>A.close()}),ee=(oe,Ue,Ze)=>{oe.listen(Ue,je=>{try{Ze(je)}catch(Ye){setTimeout(()=>{throw Ye},0)}})};return ee(A,GI.EventType.OPEN,()=>{j||Be(gs,`RPC '${e}' stream ${i} transport opened.`)}),ee(A,GI.EventType.CLOSE,()=>{j||(j=!0,Be(gs,`RPC '${e}' stream ${i} transport closed`),q.wo())}),ee(A,GI.EventType.ERROR,oe=>{j||(j=!0,wa(gs,`RPC '${e}' stream ${i} transport errored:`,oe),q.wo(new Oe(ge.UNAVAILABLE,"The operation could not be completed")))}),ee(A,GI.EventType.MESSAGE,oe=>{var Ue;if(!j){const Ze=oe.data[0];Tt(!!Ze);const je=Ze,Ye=je.error||(null===(Ue=je[0])||void 0===Ue?void 0:Ue.error);if(Ye){Be(gs,`RPC '${e}' stream ${i} received error:`,Ye);const Ft=Ye.status;let Bt=function(Sr){const ms=ri[Sr];if(void 0!==ms)return RF(ms)}(Ft),vn=Ye.message;void 0===Bt&&(Bt=ge.INTERNAL,vn="Unknown error status: "+Ft+" with message "+Ye.message),j=!0,q.wo(new Oe(Bt,vn)),A.close()}else Be(gs,`RPC '${e}' stream ${i} received:`,Ze),q._o(Ze)}}),ee(f,XB.STAT_EVENT,oe=>{oe.stat===IO.PROXY?Be(gs,`RPC '${e}' stream ${i} detected buffering proxy`):oe.stat===IO.NOPROXY&&Be(gs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function UL(){return typeof window<"u"?window:null}function TT(){return typeof document<"u"?document:null}function yw(n){return new pj(n,!0)}class MM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class BL{constructor(e,t,r,i,a,c,f,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new MM(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,fe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,fe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,fe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Zr(t.toString()),Zr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Oe(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,fe.Z)(function*(){e.state=0,e.start()}))}tu(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class s6 extends BL{constructor(e,t,r,i,a,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function _j(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:ft(),i=e.targetChange.targetIds||[],a=function(_,w){return _.useProto3Json?(Tt(void 0===w||"string"==typeof w),vi.fromBase64String(w||"")):(Tt(void 0===w||w instanceof Uint8Array),vi.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(_){const w=void 0===_.code?ge.UNKNOWN:RF(_.code);return new Oe(w,_.message||"")}(c);t=new LF(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Nl(n,r.document.name),a=Wr(r.document.updateTime),c=r.document.createTime?Wr(r.document.createTime):At.min(),f=new Yi({mapValue:{fields:r.document.fields}}),_=dr.newFoundDocument(i,a,c,f);t=new lT(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=Nl(n,r.document),a=r.readTime?Wr(r.readTime):At.min(),c=dr.newNoDocument(i,a);t=new lT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Nl(n,r.document);t=new lT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,{count:i=0,unchangedNames:a}=r,c=new uj(i,a);t=new FF(r.targetId,c)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return At.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?At.min():a.readTime?Wr(a.readTime):At.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=uw(this.serializer),t.addTarget=function(i,a){let c;const f=a.target;if(c=tT(f)?{documents:ZF(i,f)}:{query:aM(i,f)},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=jF(i,a.resumeToken);const _=rM(i,a.expectedCount);null!==_&&(c.expectedCount=_)}else if(a.snapshotVersion.compareTo(At.min())>0){c.readTime=__(i,a.snapshotVersion.toTimestamp());const _=rM(i,a.expectedCount);null!==_&&(c.expectedCount=_)}return c}(this.serializer,e);const r=function vj(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=uw(this.serializer),t.removeTarget=e,this.Wo(t)}}class o6 extends BL{constructor(e,t,r,i,a,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function yj(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let a=Wr(r.updateTime?r.updateTime:i);return a.isEqual(At.min())&&(a=Wr(i)),new ij(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.cu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=uw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>lw(this.serializer,r))};this.Wo(t)}}class a6 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Oe(ge.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.vo(e,t,r,a,c,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(ge.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class l6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Zr(t),this.mu=!1):Be("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class c6{constructor(e,t,r,i,a){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(f=>{r.enqueueAndForget((0,fe.Z)(function*(){var _;zh(c)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,fe.Z)(function*(w){const D=st(w);D.vu.add(4),yield C_(D),D.bu.set("Unknown"),D.vu.delete(4),yield vw(D)}),function(w){return _.apply(this,arguments)})(c))}))}),this.bu=new l6(r,i)}}function vw(n){return RM.apply(this,arguments)}function RM(){return RM=(0,fe.Z)(function*(n){if(zh(n))for(const e of n.Ru)yield e(!0)}),RM.apply(this,arguments)}function C_(n){return kM.apply(this,arguments)}function kM(){return kM=(0,fe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),kM.apply(this,arguments)}function DT(n,e){const t=st(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),FM(t)?OM(t):T_(t).Ko()&&NM(t,e))}function ww(n,e){const t=st(n),r=T_(t);t.Au.delete(e),r.Ko()&&jL(t,e),0===t.Au.size&&(r.Ko()?r.jo():zh(t)&&t.bu.set("Unknown"))}function NM(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}T_(n).su(e)}function jL(n,e){n.Vu.qt(e),T_(n).iu(e)}function OM(n){n.Vu=new cj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),T_(n).start(),n.bu.gu()}function FM(n){return zh(n)&&!T_(n).Uo()&&n.Au.size>0}function zh(n){return 0===st(n).vu.size}function $L(n){n.Vu=void 0}function d6(n){return LM.apply(this,arguments)}function LM(){return LM=(0,fe.Z)(function*(n){n.Au.forEach((e,t)=>{NM(n,e)})}),LM.apply(this,arguments)}function h6(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,fe.Z)(function*(n,e){$L(n),FM(n)?(n.bu.Iu(e),OM(n)):n.bu.set("Unknown")}),VM.apply(this,arguments)}function f6(n,e,t){return UM.apply(this,arguments)}function UM(){return UM=(0,fe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof LF&&2===e.state&&e.cause)try{yield(r=(0,fe.Z)(function*(i,a){const c=a.cause;for(const f of a.targetIds)i.Au.has(f)&&(yield i.remoteSyncer.rejectListen(f,c),i.Au.delete(f),i.Vu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield AT(n,r)}else if(e instanceof lT?n.Vu.Ht(e):e instanceof FF?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(At.min()))try{const r=yield ML(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const c=i.Vu.ce(a);return c.targetChanges.forEach((f,_)=>{if(f.resumeToken.approximateByteSize()>0){const w=i.Au.get(_);w&&i.Au.set(_,w.withResumeToken(f.resumeToken,a))}}),c.targetMismatches.forEach((f,_)=>{const w=i.Au.get(f);if(!w)return;i.Au.set(f,w.withResumeToken(vi.EMPTY_BYTE_STRING,w.snapshotVersion)),jL(i,f);const D=new ud(w.target,f,_,w.sequenceNumber);NM(i,D)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield AT(n,r)}var r}),UM.apply(this,arguments)}function AT(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,fe.Z)(function*(n,e,t){if(!kh(e))throw e;n.vu.add(1),yield C_(n),n.bu.set("Offline"),t||(t=()=>ML(n.localStore)),n.asyncQueue.enqueueRetryable((0,fe.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield vw(n)}))}),BM.apply(this,arguments)}function HL(n,e){return e().catch(t=>AT(n,t,e))}function I_(n){return jM.apply(this,arguments)}function jM(){return jM=(0,fe.Z)(function*(n){const e=st(n),t=qh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;p6(e);)try{const i=yield Jj(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,g6(e,i)}catch(i){yield AT(e,i)}GL(e)&&zL(e)}),jM.apply(this,arguments)}function p6(n){return zh(n)&&n.Eu.length<10}function g6(n,e){n.Eu.push(e);const t=qh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function GL(n){return zh(n)&&!qh(n).Uo()&&n.Eu.length>0}function zL(n){qh(n).start()}function m6(n){return $M.apply(this,arguments)}function $M(){return $M=(0,fe.Z)(function*(n){qh(n).hu()}),$M.apply(this,arguments)}function _6(n){return HM.apply(this,arguments)}function HM(){return HM=(0,fe.Z)(function*(n){const e=qh(n);for(const t of n.Eu)e.uu(t.mutations)}),HM.apply(this,arguments)}function y6(n,e,t){return GM.apply(this,arguments)}function GM(){return GM=(0,fe.Z)(function*(n,e,t){const r=n.Eu.shift(),i=X1.from(r,e,t);yield HL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield I_(n)}),GM.apply(this,arguments)}function v6(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,fe.Z)(function*(n,e){var t;e&&qh(n).ou&&(yield(t=(0,fe.Z)(function*(r,i){if(PF(a=i.code)&&a!==ge.ABORTED){const c=r.Eu.shift();qh(r).Qo(),yield HL(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield I_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),GL(n)&&zL(n)}),zM.apply(this,arguments)}function qL(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,fe.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=zh(t);t.vu.add(3),yield C_(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield vw(t)}),qM.apply(this,arguments)}function ZM(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,fe.Z)(function*(n,e){const t=st(n);e?(t.vu.delete(2),yield vw(t)):e||(t.vu.add(2),yield C_(t),t.bu.set("Unknown"))}),WM.apply(this,arguments)}function T_(n){return n.Su||(n.Su=function(e,t,r){const i=st(e);return i.fu(),new s6(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:d6.bind(null,n),ao:h6.bind(null,n),nu:f6.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Su.Qo(),FM(n)?OM(n):n.bu.set("Unknown")):(yield n.Su.stop(),$L(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function qh(n){return n.Du||(n.Du=function(e,t,r){const i=st(e);return i.fu(),new o6(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:m6.bind(null,n),ao:v6.bind(null,n),au:_6.bind(null,n),cu:y6.bind(null,n)}),n.Ru.push(function(){var e=(0,fe.Z)(function*(t){t?(n.Du.Qo(),yield I_(n)):(yield n.Du.stop(),n.Eu.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class KM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,a){const c=Date.now()+r,f=new KM(e,t,c,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function D_(n,e){if(Zr("AsyncQueue",`${e}: ${n}`),kh(n))return new Oe(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class A_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=ew(),this.sortedSet=new nr(this.comparator)}static emptySet(e){return new A_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof A_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new A_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZL{constructor(){this.Cu=new nr(rt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):ft():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class S_{constructor(e,t,r,i,a,c,f,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new S_(e,t,A_.emptySet(t),c,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&J0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class w6{constructor(){this.Nu=void 0,this.listeners=[]}}class E6{constructor(){this.queries=new od(e=>hF(e),J0),this.onlineState="Unknown",this.ku=new Set}}function YM(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,fe.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new w6),i)try{a.Nu=yield t.onListen(r)}catch(c){const f=D_(c,`Initialization of query '${K1(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&eP(t)}),QM.apply(this,arguments)}function JM(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,fe.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const c=a.listeners.indexOf(e);c>=0&&(a.listeners.splice(c,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),XM.apply(this,arguments)}function b6(n,e){const t=st(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const f of c.listeners)f.$u(i)&&(r=!0);c.Nu=i}}r&&eP(t)}function C6(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function eP(n){n.ku.forEach(e=>{e.next()})}class tP{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new S_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=S_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class I6{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class WL{constructor(e){this.serializer=e}rr(e){return Nl(this.serializer,e)}ur(e){return e.metadata.exists?qF(this.serializer,e.document,!1):dr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Wr(e)}}class T6{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KL(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=Cn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new WL(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const c of i.metadata.queries){const f=(t.get(c)||nn()).add(a);t.set(c,f)}}return t}complete(){var e=this;return(0,fe.Z)(function*(){const t=yield function Xj(n,e,t,r){return CM.apply(this,arguments)}(e.localStore,new WL(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield e6(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function KL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YL{constructor(e){this.key=e}}class QL{constructor(e){this.key=e}}class JL{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=nn(),this.mutatedKeys=nn(),this.tc=pF(e),this.ec=new A_(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new ZL,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,c=i,f=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,A)=>{const L=i.get(D),j=X0(this.query,A)?A:null,q=!!L&&this.mutatedKeys.has(L.key),ee=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let oe=!1;L&&j?L.data.isEqual(j.data)?q!==ee&&(r.track({type:3,doc:j}),oe=!0):this.rc(L,j)||(r.track({type:2,doc:j}),oe=!0,(_&&this.tc(j,_)>0||w&&this.tc(j,w)<0)&&(f=!0)):!L&&j?(r.track({type:0,doc:j}),oe=!0):L&&!j&&(r.track({type:1,doc:L}),oe=!0,(_||w)&&(f=!0)),oe&&(j?(c=c.add(j),a=ee?a.add(D):a.delete(D)):(c=c.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const D="F"===this.query.limitType?c.last():c.first();c=c.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{ec:c,ic:r,zi:f,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((w,D)=>function(A,L){const j=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return j(A)-j(L)}(w.type,D.type)||this.tc(w.doc,D.doc)),this.oc(r);const c=t?this.uc():[],f=0===this.Zu.size&&this.current?1:0,_=f!==this.Xu;return this.Xu=f,0!==a.length||_?{snapshot:new S_(this.query,e.ec,i,a,e.mutatedKeys,0===f,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new ZL,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=nn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new QL(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new YL(r))}),t}hc(e){this.Yu=e.ir,this.Zu=nn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return S_.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class D6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class A6{constructor(e){this.key=e,this.fc=!1}}class S6{constructor(e,t,r,i,a,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new od(f=>hF(f),J0),this._c=new Map,this.mc=new Set,this.gc=new nr(rt.comparator),this.yc=new Map,this.Ic=new gM,this.Tc={},this.Ec=new Map,this.Ac=qp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function x6(n,e){return nP.apply(this,arguments)}function nP(){return nP=(0,fe.Z)(function*(n,e){const t=TP(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const c=yield E_(t.localStore,Ls(e)),f=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield rP(t,e,r,"current"===f,c.resumeToken),t.isPrimaryClient&&DT(t.remoteStore,c)}return i}),nP.apply(this,arguments)}function rP(n,e,t,r,i){return iP.apply(this,arguments)}function iP(){return iP=(0,fe.Z)(function*(n,e,t,r,i){n.Rc=(A,L,j)=>{return(q=(0,fe.Z)(function*(ee,oe,Ue,Ze){let je=oe.view.sc(Ue);je.zi&&(je=yield ET(ee.localStore,oe.query,!1).then(({documents:Bt})=>oe.view.sc(Bt,je)));const Ye=Ze&&Ze.targetChanges.get(oe.targetId),Ft=oe.view.applyChanges(je,ee.isPrimaryClient,Ye);return pP(ee,oe.targetId,Ft.cc),Ft.snapshot}),function(ee,oe,Ue,Ze){return q.apply(this,arguments)})(n,A,L,j);var q};const a=yield ET(n.localStore,e,!0),c=new JL(e,a.ir),f=c.sc(a.documents),_=ow.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=c.applyChanges(f,n.isPrimaryClient,_);pP(n,t,w.cc);const D=new D6(e,t,c);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),iP.apply(this,arguments)}function M6(n,e){return sP.apply(this,arguments)}function sP(){return sP=(0,fe.Z)(function*(n,e){const t=st(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!J0(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield b_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ww(t.remoteStore,r.targetId),x_(t,r.targetId)}).catch(Rh))):(x_(t,r.targetId),yield b_(t.localStore,r.targetId,!0))}),sP.apply(this,arguments)}function oP(){return oP=(0,fe.Z)(function*(n,e,t){const r=DP(n);try{const i=yield function(a,c){const f=st(a),_=br.now(),w=c.reduce((L,j)=>L.add(j.key),nn());let D,A;return f.persistence.runTransaction("Locally write mutations","readwrite",L=>{let j=uo(),q=nn();return f.Zi.getEntries(L,w).next(ee=>{j=ee,j.forEach((oe,Ue)=>{Ue.isValidDocument()||(q=q.add(oe))})}).next(()=>f.localDocuments.getOverlayedDocuments(L,j)).next(ee=>{D=ee;const oe=[];for(const Ue of c){const Ze=oj(Ue,D.get(Ue.key).overlayedDocument);null!=Ze&&oe.push(new ad(Ue.key,Ze,JO(Ze.value.mapValue),Cr.exists(!0)))}return f.mutationQueue.addMutationBatch(L,_,oe,c)}).next(ee=>{A=ee;const oe=ee.applyToLocalDocumentSet(D,q);return f.documentOverlayCache.saveOverlays(L,ee.batchId,oe)})}).then(()=>({batchId:A.batchId,changes:mF(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,c,f){let _=a.Tc[a.currentUser.toKey()];_||(_=new nr(Kt)),_=_.insert(c,f),a.Tc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield ld(r,i.changes),yield I_(r.remoteStore)}catch(i){const a=D_(i,"Failed to persist write");t.reject(a)}}),oP.apply(this,arguments)}function XL(n,e){return aP.apply(this,arguments)}function aP(){return aP=(0,fe.Z)(function*(n,e){const t=st(n);try{const r=yield Qj(t.localStore,e);e.targetChanges.forEach((i,a)=>{const c=t.yc.get(a);c&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?Tt(c.fc):i.removedDocuments.size>0&&(Tt(c.fc),c.fc=!1))}),yield ld(t,r,e)}catch(r){yield Rh(r)}}),aP.apply(this,arguments)}function e2(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,c)=>{const f=c.view.Mu(e);f.snapshot&&i.push(f.snapshot)}),function(a,c){const f=st(a);f.onlineState=c;let _=!1;f.queries.forEach((w,D)=>{for(const A of D.listeners)A.Mu(c)&&(_=!0)}),_&&eP(f)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R6(n,e,t){return uP.apply(this,arguments)}function uP(){return uP=(0,fe.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let c=new nr(rt.comparator);c=c.insert(a,dr.newNoDocument(a,At.min()));const f=nn().add(a),_=new sw(At.min(),new Map,new nr(Kt),c,f);yield XL(r,_),r.gc=r.gc.remove(a),r.yc.delete(e),gP(r)}else yield b_(r.localStore,e,!1).then(()=>x_(r,e,t)).catch(Rh)}),uP.apply(this,arguments)}function k6(n,e){return lP.apply(this,arguments)}function lP(){return lP=(0,fe.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield Yj(t.localStore,e);fP(t,r,null),hP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ld(t,i)}catch(i){yield Rh(i)}}),lP.apply(this,arguments)}function N6(n,e,t){return cP.apply(this,arguments)}function cP(){return cP=(0,fe.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(a,c){const f=st(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return f.mutationQueue.lookupMutationBatch(_,c).next(D=>(Tt(null!==D),w=D.keys(),f.mutationQueue.removeMutationBatch(_,D))).next(()=>f.mutationQueue.performConsistencyCheck(_)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(_,w,c)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>f.localDocuments.getDocuments(_,w))})}(r.localStore,e);fP(r,e,t),hP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ld(r,i)}catch(i){yield Rh(i)}}),cP.apply(this,arguments)}function dP(){return dP=(0,fe.Z)(function*(n,e){const t=st(n);zh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const c=st(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>c.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=D_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),dP.apply(this,arguments)}function hP(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function fP(n,e,t){const r=st(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function x_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||t2(n,r)})}function t2(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(ww(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),gP(n))}function pP(n,e,t){for(const r of t)r instanceof YL?(n.Ic.addReference(r.key,e),F6(n,r)):r instanceof QL?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||t2(n,r.key)):ft()}function F6(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.mc.add(r),gP(n))}function gP(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new rt(Cn.fromString(e)),r=n.Ac.next();n.yc.set(r,new A6(t)),n.gc=n.gc.insert(t,r),DT(n.remoteStore,new ud(Ls(h_(t.path)),r,"TargetPurposeLimboResolution",Lo.ct))}}function ld(n,e,t){return mP.apply(this,arguments)}function mP(){return mP=(0,fe.Z)(function*(n,e,t){const r=st(n),i=[],a=[],c=[];var f;r.wc.isEmpty()||(r.wc.forEach((f,_)=>{c.push(r.Rc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const D=wM.Li(_.targetId,w);a.push(D)}}))}),yield Promise.all(c),r.dc.nu(i),yield(f=(0,fe.Z)(function*(_,w){const D=st(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>ue.forEach(w,L=>ue.forEach(L.Fi,j=>D.persistence.referenceDelegate.addReference(A,L.targetId,j)).next(()=>ue.forEach(L.Bi,j=>D.persistence.referenceDelegate.removeReference(A,L.targetId,j)))))}catch(A){if(!kh(A))throw A;Be("LocalStore","Failed to update sequence numbers: "+A)}for(const A of w){const L=A.targetId;if(!A.fromCache){const j=D.Ji.get(L),ee=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);D.Ji=D.Ji.insert(L,ee)}}}),function(_,w){return f.apply(this,arguments)})(r.localStore,a))}),mP.apply(this,arguments)}function L6(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,fe.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield xL(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(f=>{f.reject(new Oe(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ld(t,r.er)}var i}),_P.apply(this,arguments)}function V6(n,e){const t=st(n),r=t.yc.get(e);if(r&&r.fc)return nn().add(r.key);{let i=nn();const a=t._c.get(e);if(!a)return i;for(const c of a){const f=t.wc.get(c);i=i.unionWith(f.view.nc)}return i}}function U6(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,fe.Z)(function*(n,e){const t=st(n),r=yield ET(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&pP(t,e.targetId,i.cc),i}),yP.apply(this,arguments)}function B6(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,fe.Z)(function*(n,e){const t=st(n);return kL(t.localStore,e).then(r=>ld(t,r))}),vP.apply(this,arguments)}function j6(n,e,t,r){return wP.apply(this,arguments)}function wP(){return wP=(0,fe.Z)(function*(n,e,t,r){const i=st(n),a=yield function(c,f){const _=st(c),w=st(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Sn(D,f).next(A=>A?_.localDocuments.getDocuments(D,A):ue.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield I_(i.remoteStore):"acknowledged"===t||"rejected"===t?(fP(i,e,r||null),hP(i,e),f=e,st(st(i.localStore).mutationQueue).Cn(f)):ft(),yield ld(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),wP.apply(this,arguments)}function EP(){return EP=(0,fe.Z)(function*(n,e){const t=st(n);if(TP(t),DP(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield n2(t,r.toArray());t.vc=!0,yield ZM(t.remoteStore,!0);for(const a of i)DT(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(x_(t,c),b_(t.localStore,c,!0))),ww(t.remoteStore,c)}),yield i,yield n2(t,r),function(a){const c=st(a);c.yc.forEach((f,_)=>{ww(c.remoteStore,_)}),c.Ic.Ts(),c.yc=new Map,c.gc=new nr(rt.comparator)}(t),t.vc=!1,yield ZM(t.remoteStore,!1)}}),EP.apply(this,arguments)}function n2(n,e,t){return bP.apply(this,arguments)}function bP(){return bP=(0,fe.Z)(function*(n,e,t){const r=st(n),i=[],a=[];for(const c of e){let f;const _=r._c.get(c);if(_&&0!==_.length){f=yield E_(r.localStore,Ls(_[0]));for(const w of _){const D=r.wc.get(w),A=yield U6(r,D);A.snapshot&&a.push(A.snapshot)}}else{const w=yield RL(r.localStore,c);f=yield E_(r.localStore,w),yield rP(r,r2(w),c,!1,f.resumeToken)}i.push(f)}return r.dc.nu(a),i}),bP.apply(this,arguments)}function r2(n){return cF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function H6(n){const e=st(n);return st(st(e.localStore).persistence).$i()}function G6(n,e,t,r){return CP.apply(this,arguments)}function CP(){return CP=(0,fe.Z)(function*(n,e,t,r){const i=st(n);if(i.vc)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const c=yield kL(i.localStore,fF(a[0])),f=sw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,vi.EMPTY_BYTE_STRING);yield ld(i,c,f);break}case"rejected":yield b_(i.localStore,e,!0),x_(i,e,r);break;default:ft()}}),CP.apply(this,arguments)}function z6(n,e,t){return IP.apply(this,arguments)}function IP(){return IP=(0,fe.Z)(function*(n,e,t){const r=TP(n);if(r.vc){for(const i of e){if(r._c.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield RL(r.localStore,i),c=yield E_(r.localStore,a);yield rP(r,r2(a),c.targetId,!1,c.resumeToken),DT(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield b_(r.localStore,i,!1).then(()=>{ww(r.remoteStore,i),x_(r,i)}).catch(Rh))}}),IP.apply(this,arguments)}function TP(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R6.bind(null,e),e.dc.nu=b6.bind(null,e.eventManager),e.dc.Pc=C6.bind(null,e.eventManager),e}function DP(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N6.bind(null,e),e}class Ew{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,fe.Z)(function*(){t.serializer=yw(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return SL(this.persistence,new AL,e.initialUser,this.serializer)}createPersistence(e){return new mM(yT.zs,this.serializer)}createSharedClientState(e){return new LL}terminate(){var e=this;return(0,fe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class AP extends Ew{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield DP(r.Vc.syncEngine),yield I_(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return SL(this.persistence,new AL,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new yL(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new y3(t,this.persistence);return new _3(e.asyncQueue,r)}createPersistence(e){const t=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new yM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,UL(),TT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new LL}}class i2 extends AP{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,fe.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof SM&&(r.sharedClientState.syncEngine={jr:j6.bind(null,i),zr:G6.bind(null,i),Wr:z6.bind(null,i),$i:H6.bind(null,i),Qr:B6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,fe.Z)(function*(c){yield function $6(n,e){return EP.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=UL();if(!SM.D(t))throw new Oe(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new SM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class M_{initialize(e,t){var r=this;return(0,fe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>e2(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=L6.bind(null,r.syncEngine),yield ZM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new E6}createDatastore(e){const t=yw(e.databaseInfo.databaseId),r=new i6(e.databaseInfo);return new a6(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>e2(this.syncEngine,f,0),c=VL.D()?new VL:new t6,new c6(t,r,i,a,c);var t,r,i,a,c}createSyncEngine(e,t){return function(r,i,a,c,f,_,w){const D=new S6(r,i,a,c,f,_);return w&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,fe.Z)(function*(t){const r=st(t);Be("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield C_(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function s2(n,e=10240){let t=0;return{read:()=>(0,fe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,fe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Zr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class W6{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new yi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,fe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,fe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new I6(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,fe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,fe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,fe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class K6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,fe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,fe.Z)(function*(a,c){const f=st(a),_=uw(f.serializer)+"/documents",w={documents:c.map(j=>aw(f.serializer,j))},D=yield f.vo("BatchGetDocuments",_,w,c.length),A=new Map;D.forEach(j=>{const q=function mj(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=Nl(t,r.found.name),a=Wr(r.found.updateTime),c=r.found.createTime?Wr(r.found.createTime):At.min(),f=new Yi({mapValue:{fields:r.found.fields}});return dr.newFoundDocument(i,a,c,f)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=Nl(t,r.missing),a=Wr(r.readTime);return dr.newNoDocument(i,a)}(n,e):ft()}(f.serializer,j);A.set(q.key.toString(),q)});const L=[];return c.forEach(j=>{const q=A.get(j.toString());Tt(!!q),L.push(q)}),L}),function(a,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new m_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,fe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=rt.fromPath(i);e.mutations.push(new Q1(a,e.precondition(a)))}),yield(r=(0,fe.Z)(function*(i,a){const c=st(i),f=uw(c.serializer)+"/documents",_={writes:a.map(w=>lw(c.serializer,w))};yield c.Io("Commit",f,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?Cr.exists(!1):Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Oe(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Y6{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new MM(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,fe.Z)(function*(){const t=new K6(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!z0(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!PF(t)}return!1}}class Q6{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ri.UNAUTHENTICATED,this.clientId=SO.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,fe.Z)(function*(f){Be("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Be("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,fe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new yi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=D_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function xT(n,e){return SP.apply(this,arguments)}function SP(){return SP=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,fe.Z)(function*(a){r.isEqual(a)||(yield xL(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),SP.apply(this,arguments)}function xP(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,fe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PP(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>qL(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>qL(e.remoteStore,a)),n._onlineComponents=e}),MP.apply(this,arguments)}function o2(n){return"FirebaseError"===n.name?n.code===ge.FAILED_PRECONDITION||n.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function PP(n){return RP.apply(this,arguments)}function RP(){return RP=(0,fe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xT(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!o2(t))throw t;wa("Error using user provided cache. Falling back to memory cache: "+t),yield xT(n,new Ew)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),yield xT(n,new Ew);return n._offlineComponents}),RP.apply(this,arguments)}function MT(n){return kP.apply(this,arguments)}function kP(){return kP=(0,fe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),yield xP(n,n._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),yield xP(n,new M_))),n._onlineComponents}),kP.apply(this,arguments)}function a2(n){return PP(n).then(e=>e.persistence)}function PT(n){return PP(n).then(e=>e.localStore)}function u2(n){return MT(n).then(e=>e.remoteStore)}function NP(n){return MT(n).then(e=>e.syncEngine)}function P_(n){return OP.apply(this,arguments)}function OP(){return OP=(0,fe.Z)(function*(n){const e=yield MT(n),t=e.eventManager;return t.onListen=x6.bind(null,e.syncEngine),t.onUnlisten=M6.bind(null,e.syncEngine),t}),OP.apply(this,arguments)}function c2(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,c,f,_){const w=new ST({next:A=>{a.enqueueAndForget(()=>JM(i,D));const L=A.docs.has(c);!L&&A.fromCache?_.reject(new Oe(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&A.fromCache&&f&&"server"===f.source?_.reject(new Oe(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(A)},error:A=>_.reject(A)}),D=new tP(h_(c.path),w,{includeMetadataChanges:!0,Ku:!0});return YM(i,D)}(yield P_(n),n.asyncQueue,e,t,r)})),r.promise}function d2(n,e,t={}){const r=new yi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function(i,a,c,f,_){const w=new ST({next:A=>{a.enqueueAndForget(()=>JM(i,D)),A.fromCache&&"server"===f.source?_.reject(new Oe(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(A)},error:A=>_.reject(A)}),D=new tP(c,w,{includeMetadataChanges:!0,Ku:!0});return YM(i,D)}(yield P_(n),n.asyncQueue,e,t,r)})),r.promise}function h2(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const f2=new Map;function FP(n,e,t){if(!t)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function p2(n,e,t,r){if(!0===e&&!0===r)throw new Oe(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function g2(n){if(!rt.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m2(n){if(rt.isDocumentKey(n))throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function RT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function yn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=RT(n);throw new Oe(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _2(n,e){if(e<=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class y2{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=h2(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Oe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Oe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Oe(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new y2({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new y2(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new s3;switch(t.type){case"firstParty":return new l3(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=f2.get(e);t&&(Be("ComponentProvider","Removing Datastore"),f2.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ol(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class Qi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qi(this.firestore,e,this._query)}}class Ol extends Qi{constructor(e,t,r){super(e,t,h_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new rt(e))}withConverter(e){return new Ol(this.firestore,e,this._path)}}function w2(n,e,...t){if(n=(0,Gt.m9)(n),FP("collection","path",e),n instanceof bw){const r=Cn.fromString(e,...t);return m2(r),new Ol(n,null,r)}{if(!(n instanceof hr||n instanceof Ol))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return m2(r),new Ol(n.firestore,null,r)}}function kT(n,e,...t){if(n=(0,Gt.m9)(n),1===arguments.length&&(e=SO.A()),FP("doc","path",e),n instanceof bw){const r=Cn.fromString(e,...t);return g2(r),new hr(n,null,new rt(r))}{if(!(n instanceof hr||n instanceof Ol))throw new Oe(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Cn.fromString(e,...t));return g2(r),new hr(n.firestore,n instanceof Ol?n.converter:null,new rt(r))}}function E2(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),(n instanceof hr||n instanceof Ol)&&(e instanceof hr||e instanceof Ol)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function LP(n,e){return n=(0,Gt.m9)(n),e=(0,Gt.m9)(e),n instanceof Qi&&e instanceof Qi&&n.firestore===e.firestore&&J0(n._query,e._query)&&n.converter===e.converter}class a4{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new MM(this,"async_queue_retry"),this.Xc=()=>{const t=TT();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=TT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=TT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new yi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,fe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!kh(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Zr("INTERNAL UNHANDLED ERROR: ",function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=KM.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&ft()}verifyOperationInProgress(){}sa(){var e=this;return(0,fe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function VP(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class u4{constructor(){this._progressObserver={},this._taskCompletionResolver=new yi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fr extends bw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new a4,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||b2(this),this._firestoreClient.terminate()}}function Kr(n){return n._firestoreClient||b2(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function b2(n){var e,t,r;const i=n._freezeSettings(),a=(f=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new U3(n._databaseId,f,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,h2(w.experimentalLongPollingOptions),w.useFetchStreams));var f,w;n._firestoreClient=new Q6(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function C2(n,e,t){const r=new yi;return n.asyncQueue.enqueue((0,fe.Z)(function*(){try{yield xT(n,t),yield xP(n,e),r.resolve()}catch(i){const a=i;if(!o2(a))throw a;wa("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function I2(n){if(n._initialized||n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Fl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fl(vi.fromBase64String(e))}catch(t){throw new Oe(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fl(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class cd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wp{constructor(e){this._methodName=e}}class NT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const v4=/^__.*__$/;class w4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ad(e,this.data,this.fieldMask,t,this.fieldTransforms):new g_(e,this.data,t,this.fieldTransforms)}}class T2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ad(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function D2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class OT{constructor(e,t,r,i,a,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new OT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return VT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(D2(this.ca)&&v4.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class E4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||yw(e)}ya(e,t,r,i=!1){return new OT({ca:e,methodName:t,ga:r,path:Ur.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kp(n){const e=n._freezeSettings(),t=yw(n._databaseId);return new E4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FT(n,e,t,r,i,a={}){const c=n.ya(a.merge||a.mergeFields?2:0,e,t,i);$P("Data must be an object, but it was:",c,r);const f=x2(r,c);let _,w;if(a.merge)_=new ao(c.fieldMask),w=c.fieldTransforms;else if(a.mergeFields){const D=[];for(const A of a.mergeFields){const L=Tw(e,A,t);if(!c.contains(L))throw new Oe(ge.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);P2(D,L)||D.push(L)}_=new ao(D),w=c.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,w=c.fieldTransforms;return new w4(new Yi(f),_,w)}class Iw extends Wp{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iw}}function A2(n,e,t){return new OT({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class UP extends Wp{_toFieldTransform(e){return new nw(e.path,new f_)}isEqual(e){return e instanceof UP}}class b4 extends Wp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=A2(this,e,!0),r=this.pa.map(a=>Yp(a,t)),i=new Up(r);return new nw(e.path,i)}isEqual(e){return this===e}}class C4 extends Wp{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=A2(this,e,!0),r=this.pa.map(a=>Yp(a,t)),i=new Bp(r);return new nw(e.path,i)}isEqual(e){return this===e}}class I4 extends Wp{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new p_(e.serializer,wF(e.serializer,this.Ia));return new nw(e.path,t)}isEqual(e){return this===e}}function BP(n,e,t,r){const i=n.ya(1,e,t);$P("Data must be an object, but it was:",i,r);const a=[],c=Yi.empty();Nh(r,(_,w)=>{const D=LT(e,_,t);w=(0,Gt.m9)(w);const A=i.da(D);if(w instanceof Iw)a.push(D);else{const L=Yp(w,A);null!=L&&(a.push(D),c.set(D,L))}});const f=new ao(a);return new T2(c,f,i.fieldTransforms)}function jP(n,e,t,r,i,a){const c=n.ya(1,e,t),f=[Tw(e,r,t)],_=[i];if(a.length%2!=0)throw new Oe(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<a.length;L+=2)f.push(Tw(e,a[L])),_.push(a[L+1]);const w=[],D=Yi.empty();for(let L=f.length-1;L>=0;--L)if(!P2(w,f[L])){const j=f[L];let q=_[L];q=(0,Gt.m9)(q);const ee=c.da(j);if(q instanceof Iw)w.push(j);else{const oe=Yp(q,ee);null!=oe&&(w.push(j),D.set(j,oe))}}const A=new ao(w);return new T2(D,A,c.fieldTransforms)}function S2(n,e,t,r=!1){return Yp(t,n.ya(r?4:3,e))}function Yp(n,e){if(M2(n=(0,Gt.m9)(n)))return $P("Unsupported field value:",e,n),x2(n,e);if(n instanceof Wp)return function(t,r){if(!D2(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const c of t){let f=Yp(c,r.wa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Gt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return wF(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=br.fromDate(t);return{timestampValue:__(r.serializer,i)}}if(t instanceof br){const i=new br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:__(r.serializer,i)}}if(t instanceof NT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fl)return{bytesValue:jF(r.serializer,t._byteString)};if(t instanceof hr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${RT(t)}`)}(n,e)}function x2(n,e){const t={};return HO(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nh(n,(r,i)=>{const a=Yp(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function M2(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof br||n instanceof NT||n instanceof Fl||n instanceof hr||n instanceof Wp)}function $P(n,e,t){if(!M2(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=RT(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function Tw(n,e,t){if((e=(0,Gt.m9)(e))instanceof cd)return e._internalPath;if("string"==typeof e)return LT(n,e);throw VT("Field path arguments must be of type string or ",n,!1,void 0,t)}const T4=new RegExp("[~\\*/\\[\\]]");function LT(n,e,t){if(e.search(T4)>=0)throw VT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cd(...e.split("."))._internalPath}catch{throw VT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function VT(n,e,t,r,i){const a=r&&!r.isEmpty(),c=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let _="";return(a||c)&&(_+=" (found",a&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Oe(ge.INVALID_ARGUMENT,f+n+_)}function P2(n,e){return n.some(t=>t.isEqual(e))}class Dw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new D4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class D4 extends Dw{data(){return super.data()}}function UT(n,e){return"string"==typeof e?LT(n,e):e instanceof cd?e._internalPath:e._delegate._internalPath}function R2(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HP{}class Aw extends HP{}function Zh(n,e,...t){let r=[];e instanceof HP&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof R_).length,c=i.filter(f=>f instanceof Sw).length;if(a>1||a>0&&c>0)throw new Oe(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Sw extends Aw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sw(e,t,r)}_apply(e){const t=this._parse(e);return F2(e._query,t),new Qi(e.firestore,e.converter,W1(e._query,t))}_parse(e){const t=Kp(e.firestore);return function(i,a,c,f,_,w,D){let A;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){O2(D,w);const L=[];for(const j of D)L.push(N2(f,i,j));A={arrayValue:{values:L}}}else A=N2(f,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||O2(D,w),A=S2(c,"where",D,"in"===w||"not-in"===w);return _n.create(_,w,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class R_ extends HP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new R_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Un.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const c=i.getFlattenedFilters();for(const f of c)F2(a,f),a=W1(a,f)}(e._query,t),new Qi(e.firestore,e.converter,W1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class GP extends Aw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new GP(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new c_(i,a);return function(f,_){if(null===q1(f)){const w=rT(f);null!==w&&L2(0,w,_.field)}}(r,c),c}(e._query,this._field,this._direction);return new Qi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new sd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class BT extends Aw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new BT(e,t,r)}_apply(e){return new Qi(e.firestore,e.converter,iT(e._query,this._limit,this._limitType))}}class jT extends Aw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jT(e,t,r)}_apply(e){const t=k2(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(i=t,new sd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class $T extends Aw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new $T(e,t,r)}_apply(e){const t=k2(e,this.type,this._docOrFields,this._inclusive);return new Qi(e.firestore,e.converter,(i=t,new sd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function k2(n,e,t,r){if(t[0]=(0,Gt.m9)(t[0]),t[0]instanceof Dw)return function(i,a,c,f,_){if(!f)throw new Oe(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const w=[];for(const D of Vp(i))if(D.field.isKeyField())w.push(Fp(a,f.key));else{const A=f.data.field(D.field);if(YI(A))throw new Oe(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const L=D.field.canonicalString();throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}w.push(A)}return new Bh(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Kp(n.firestore);return function(a,c,f,_,w,D){const A=a.explicitOrderBy;if(w.length>A.length)throw new Oe(ge.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let j=0;j<w.length;j++){const q=w[j];if(A[j].field.isKeyField()){if("string"!=typeof q)throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!Z1(a)&&-1!==q.indexOf("/"))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const ee=a.path.child(Cn.fromString(q));if(!rt.isDocumentKey(ee))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ee}' is not because it contains an odd number of segments.`);const oe=new rt(ee);L.push(Fp(c,oe))}else{const ee=S2(f,_,q);L.push(ee)}}return new Bh(L,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function N2(n,e,t){if("string"==typeof(t=(0,Gt.m9)(t))){if(""===t)throw new Oe(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Z1(e)&&-1!==t.indexOf("/"))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Cn.fromString(t));if(!rt.isDocumentKey(r))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fp(n,new rt(r))}if(t instanceof hr)return Fp(n,t._key);throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RT(t)}.`)}function O2(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F2(n,e){if(e.isInequality()){const r=rT(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=q1(n);null!==a&&L2(0,i,a)}const t=function(r,i){for(const a of r)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Oe(ge.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function L2(n,e,t){if(!t.isEqual(e))throw new Oe(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zP{convertValue(e,t="none"){switch(Vh(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(id(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nh(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new NT(Br(e.latitude),Br(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=QI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Z0(e));default:return null}}convertTimestamp(e){const t=Oh(e);return new br(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Cn.fromString(e);Tt(QF(r));const i=new Fh(r.get(1),r.get(3)),a=new rt(r.popFirst(5));return i.isEqual(t)||Zr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function HT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class O4 extends zP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}class Qp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dd extends Dw{constructor(e,t,r,i,a,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class xw extends dd{data(e={}){return super.data(e)}}class Wh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xw(this._firestore,this._userDataWriter,r.key,r,new Qp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new xw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Qp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const f=new xw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Qp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==c.type&&(_=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),1!==c.type&&(a=a.add(c.doc),w=a.indexOf(c.doc.key)),{type:L4(c.type),doc:f,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function U2(n,e){return n instanceof dd&&e instanceof dd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wh&&e instanceof Wh&&n._firestore===e._firestore&&LP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Kh extends zP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function B2(n,e,t){n=yn(n,hr);const r=yn(n.firestore,fr),i=HT(n.converter,e,t);return k_(r,[FT(Kp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Cr.none())])}function j2(n,e,t,...r){n=yn(n,hr);const i=yn(n.firestore,fr),a=Kp(i);let c;return c="string"==typeof(e=(0,Gt.m9)(e))||e instanceof cd?jP(a,"updateDoc",n._key,e,t,r):BP(a,"updateDoc",n._key,e),k_(i,[c.toMutation(n._key,Cr.exists(!0))])}function $2(n,...e){var t,r,i;n=(0,Gt.m9)(n);let a={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||VP(e[c])||(a=e[c],c++);const f={includeMetadataChanges:a.includeMetadataChanges};if(VP(e[c])){const A=e[c];e[c]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[c+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[c+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let _,w,D;if(n instanceof hr)w=yn(n.firestore,fr),D=h_(n._key.path),_={next:A=>{e[c]&&e[c](qP(w,n,A))},error:e[c+1],complete:e[c+2]};else{const A=yn(n,Qi);w=yn(A.firestore,fr),D=A._query;const L=new Kh(w);_={next:j=>{e[c]&&e[c](new Wh(w,L,A,j))},error:e[c+1],complete:e[c+2]},R2(n._query)}return function(A,L,j,q){const ee=new ST(q),oe=new tP(L,ee,j);return A.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return YM(yield P_(A),oe)})),()=>{ee.Dc(),A.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return JM(yield P_(A),oe)}))}}(Kr(w),D,f,_)}function k_(n,e){return function(t,r){const i=new yi;return t.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function P6(n,e,t){return oP.apply(this,arguments)}(yield NP(t),r,i)})),i.promise}(Kr(n),e)}function qP(n,e,t){const r=t.docs.get(e._key),i=new Kh(n);return new dd(n,i,e._key,r,new Qp(t.hasPendingWrites,t.fromCache),e.converter)}const t$={maxAttempts:5};class H2{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Kp(e)}set(e,t,r){this._verifyNotCommitted();const i=Yh(e,this._firestore),a=HT(i.converter,t,r),c=FT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Yh(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof cd?jP(this._dataReader,"WriteBatch.update",a._key,t,r,i):BP(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(c.toMutation(a._key,Cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Yh(e,this._firestore);return this._mutations=this._mutations.concat(new m_(t._key,Cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Yh(n,e){if((n=(0,Gt.m9)(n)).firestore!==e)throw new Oe(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class n$ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Kp(e)}get(e){const t=Yh(e,this._firestore),r=new O4(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new Dw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new Dw(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Yh(e,this._firestore),a=HT(i.converter,t,r),c=FT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const a=Yh(e,this._firestore);let c;return c="string"==typeof(t=(0,Gt.m9)(t))||t instanceof cd?jP(this._dataReader,"Transaction.update",a._key,t,r,i):BP(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,c),this}delete(e){const t=Yh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Yh(e,this._firestore),r=new Kh(this._firestore);return super.get(e).then(i=>new dd(this._firestore,r,t._key,i._document,new Qp(!1,!1),t.converter))}}function ZP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function z2(){if(typeof Uint8Array>"u")throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function q2(){if(!function L3(){return typeof atob<"u"}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){o_=Rs.SDK_VERSION,(0,Rs._registerComponent)(new Xc.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),c=new fr(new a3(t.getProvider("auth-internal")),new c3(t.getProvider("app-check-internal")),function(f,_){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Oe(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fh(f.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Rs.registerVersion)(TO,"3.13.0",n),(0,Rs.registerVersion)(TO,"3.13.0","esm2017")}();class Mw{constructor(e){this._delegate=e}static fromBase64String(e){return q2(),new Mw(Fl.fromBase64String(e))}static fromUint8Array(e){return z2(),new Mw(Fl.fromUint8Array(e))}toBase64(){return q2(),this._delegate.toBase64()}toUint8Array(){return z2(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function WP(n){return function d$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class h${enableIndexedDbPersistence(e,t){return function c4(n,e){I2(n=yn(n,fr));const t=Kr(n);if(t._uninitializedComponentsProvider)throw new Oe(ge.FAILED_PRECONDITION,"SDK cache is already specified.");wa("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new M_;return C2(t,i,new AP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function d4(n){I2(n=yn(n,fr));const e=Kr(n);if(e._uninitializedComponentsProvider)throw new Oe(ge.FAILED_PRECONDITION,"SDK cache is already specified.");wa("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new M_;return C2(e,r,new i2(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function h4(n){if(n._initialized&&!n._terminated)throw new Oe(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new yi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,fe.Z)(function*(){try{yield(t=(0,fe.Z)(function*(r){if(!wu.D())return Promise.resolve();const i=r+"main";yield wu.delete(i)}),function(r){return t.apply(this,arguments)})(vM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Z2{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fh||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function v2(n,e,t,r={}){var i;const a=(n=yn(n,bw))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==c&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:c,ssl:!1})),r.mockUserToken){let f,_;if("string"==typeof r.mockUserToken)f=r.mockUserToken,_=Ri.MOCK_USER;else{f=(0,Gt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Oe(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Ri(w)}n._authCredentials=new o3(new DO(f,_))}}(this._delegate,e,t,r)}enableNetwork(){return function p4(n){return function J6(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield a2(n),t=yield u2(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i.vu.delete(0),vw(i)}(t)}))}(Kr(n=yn(n,fr)))}(this._delegate)}disableNetwork(){return function g4(n){return function X6(n){return n.asyncQueue.enqueue((0,fe.Z)(function*(){const e=yield a2(n),t=yield u2(n);return e.setNetworkEnabled(!1),(r=(0,fe.Z)(function*(i){const a=st(i);a.vu.add(0),yield C_(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Kr(n=yn(n,fr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,p2("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function f4(n){return function(e){const t=new yi;return e.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return function O6(n,e){return dP.apply(this,arguments)}(yield NP(e),t)})),t.promise}(Kr(n=yn(n,fr)))}(this._delegate)}onSnapshotsInSync(e){return function q4(n,e){return function n4(n,e){const t=new ST(e);return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield P_(n),i=t,st(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return r=yield P_(n),i=t,void st(r).ku.delete(i);var r,i}))}}(Kr(n=yn(n,fr)),VP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new N_(this,w2(this._delegate,e))}catch(t){throw Vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ea(this,kT(this._delegate,e))}catch(t){throw Vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Us(this,function o4(n,e){if(n=yn(n,bw),FP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qi(n,null,(t=e,new sd(Cn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function r$(n,e,t){n=yn(n,fr);const r=Object.assign(Object.assign({},t$),t);return function(i){if(i.maxAttempts<1)throw new Oe(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,c){const f=new yi;return i.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){const _=yield function l2(n){return MT(n).then(e=>e.datastore)}(i);new Y6(i.asyncQueue,_,c,a,f).run()})),f.promise}(Kr(n),i=>e(new n$(n,i)),r)}(this._delegate,t=>e(new W2(this,t)))}batch(){return Kr(this._delegate),new K2(new H2(this._delegate,e=>k_(this._delegate,e)))}loadBundle(e){return function m4(n,e){const t=Kr(n=yn(n,fr)),r=new u4;return function r4(n,e,t,r){const i=function(a,c){let f;return f="string"==typeof a?kF().encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return s2(_,w);if(_ instanceof ArrayBuffer)return s2(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new W6(_,c);var _}(t,yw(e));n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){!function q6(n,e,t){const r=st(n);var i;(i=(0,fe.Z)(function*(a,c,f){try{const _=yield c.getMetadata();if(yield function(L,j){const q=st(L),ee=Wr(j.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",oe=>q.qs.getBundleMetadata(oe,j.id)).then(oe=>!!oe&&oe.createTime.compareTo(ee)>=0)}(a.localStore,_))return yield c.close(),f._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);f._updateProgress(KL(_));const w=new T6(_,a.localStore,c.serializer);let D=yield c.bc();for(;D;){const L=yield w.zu(D);L&&f._updateProgress(L),D=yield c.bc()}const A=yield w.complete();return yield ld(a,A.Ju,void 0),yield function(L,j){const q=st(L);return q.persistence.runTransaction("Save bundle","readwrite",ee=>q.qs.saveBundleMetadata(ee,j))}(a.localStore,_),f._completeWith(A.progress),Promise.resolve(A.Hu)}catch(_){return wa("SyncEngine",`Loading bundle failed with ${_}`),f._failWith(_),Promise.resolve(new Set)}var L}),function(a,c,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield NP(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _4(n,e){return function i4(n,e){return n.asyncQueue.enqueue((0,fe.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield PT(n),e)}))}(Kr(n=yn(n,fr)),e).then(t=>t?new Qi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Us(this,t):null)}}class GT extends zP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mw(new Fl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ea.forKey(t,this.firestore,null)}}class W2{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new GT(e)}get(e){const t=Xp(e);return this._delegate.get(t).then(r=>new Pw(this._firestore,new dd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Xp(e);return r?(ZP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Xp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Xp(e);return this._delegate.delete(t),this}}class K2{constructor(e){this._delegate=e}set(e,t,r){const i=Xp(e);return r?(ZP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Xp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Xp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new xw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Rw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Jp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Jp(e,new GT(e),t),i.set(t,a)),a}}Jp.INSTANCES=new WeakMap;class Ea{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ea(t,new hr(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new Ea(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new N_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new N_(this.firestore,w2(this._delegate,e))}catch(t){throw Vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Gt.m9)(e))instanceof hr&&E2(this._delegate,e)}set(e,t){t=ZP("DocumentReference.set",t);try{return t?B2(this._delegate,e,t):B2(this._delegate,e)}catch(r){throw Vs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?j2(this._delegate,e):j2(this._delegate,e,t,...r)}catch(i){throw Vs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function G4(n){return k_(yn(n.firestore,fr),[new m_(n._key,Cr.none())])}(this._delegate)}onSnapshot(...e){const t=Y2(e),r=Q2(e,i=>new Pw(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $2(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function U4(n){n=yn(n,hr);const e=yn(n.firestore,fr),t=Kr(e),r=new Kh(e);return function e4(n,e){const t=new yi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,c){try{const f=yield function(_,w){const D=st(_);return D.persistence.runTransaction("read document","readonly",A=>D.localDocuments.getDocument(A,w))}(i,a);f.isFoundDocument()?c.resolve(f):f.isNoDocument()?c.resolve(null):c.reject(new Oe(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const _=D_(f,`Failed to get document '${a} from cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield PT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new dd(e,r,n._key,i,new Qp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function B4(n){n=yn(n,hr);const e=yn(n.firestore,fr);return c2(Kr(e),n._key,{source:"server"}).then(t=>qP(e,n,t))}(this._delegate):function V4(n){n=yn(n,hr);const e=yn(n.firestore,fr);return c2(Kr(e),n._key).then(t=>qP(e,n,t))}(this._delegate),t.then(r=>new Pw(this.firestore,new dd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ea(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}function Vs(n,e,t){return n.message=n.message.replace(e,t),n}function Y2(n){for(const e of n)if("object"==typeof e&&!WP(e))return e;return{}}function Q2(n,e){var t,r;let i;return i=WP(n[0])?n[0]:WP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Pw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ea(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return U2(this._delegate,e._delegate)}}class Rw extends Pw{data(e){const t=this._delegate.data(e);return function i3(n,e){n||ft()}(void 0!==t),t}}class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new GT(e)}where(e,t,r){try{return new Us(this.firestore,Zh(this._delegate,function A4(n,e,t){const r=e,i=UT("where",n);return Sw._create(i,r,t)}(e,t,r)))}catch(i){throw Vs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Us(this.firestore,Zh(this._delegate,function S4(n,e="asc"){const t=e,r=UT("orderBy",n);return GP._create(r,t)}(e,t)))}catch(r){throw Vs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Us(this.firestore,Zh(this._delegate,function x4(n){return _2("limit",n),BT._create("limit",n,"F")}(e)))}catch(t){throw Vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Us(this.firestore,Zh(this._delegate,function M4(n){return _2("limitToLast",n),BT._create("limitToLast",n,"L")}(e)))}catch(t){throw Vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Us(this.firestore,Zh(this._delegate,function P4(...n){return jT._create("startAt",n,!0)}(...e)))}catch(t){throw Vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Us(this.firestore,Zh(this._delegate,function R4(...n){return jT._create("startAfter",n,!1)}(...e)))}catch(t){throw Vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Us(this.firestore,Zh(this._delegate,function k4(...n){return $T._create("endBefore",n,!1)}(...e)))}catch(t){throw Vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Us(this.firestore,Zh(this._delegate,function N4(...n){return $T._create("endAt",n,!0)}(...e)))}catch(t){throw Vs(t,"endAt()","Query.endAt()")}}isEqual(e){return LP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function $4(n){n=yn(n,Qi);const e=yn(n.firestore,fr),t=Kr(e),r=new Kh(e);return function t4(n,e){const t=new yi;return n.asyncQueue.enqueueAndForget((0,fe.Z)(function*(){return(r=(0,fe.Z)(function*(i,a,c){try{const f=yield ET(i,a,!0),_=new JL(a,f.ir),w=_.sc(f.documents),D=_.applyChanges(w,!1);c.resolve(D.snapshot)}catch(f){const _=D_(f,`Failed to execute query '${a} against cache`);c.reject(_)}}),function(i,a,c){return r.apply(this,arguments)})(yield PT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wh(e,r,n,i))}(this._delegate):"server"===e?.source?function H4(n){n=yn(n,Qi);const e=yn(n.firestore,fr),t=Kr(e),r=new Kh(e);return d2(t,n._query,{source:"server"}).then(i=>new Wh(e,r,n,i))}(this._delegate):function j4(n){n=yn(n,Qi);const e=yn(n.firestore,fr),t=Kr(e),r=new Kh(e);return R2(n._query),d2(t,n._query).then(i=>new Wh(e,r,n,i))}(this._delegate),t.then(r=>new KP(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Y2(e),r=Q2(e,i=>new KP(this.firestore,new Wh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $2(this._delegate,t,r)}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}class p${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Rw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class KP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Rw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new p$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Rw(this._firestore,r))})}isEqual(e){return U2(this._delegate,e._delegate)}}class N_ extends Us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ea(this.firestore,e):null}doc(e){try{return new Ea(this.firestore,void 0===e?kT(this._delegate):kT(this._delegate,e))}catch(t){throw Vs(t,"doc()","CollectionReference.doc()")}}add(e){return function z4(n,e){const t=yn(n.firestore,fr),r=kT(n),i=HT(n.converter,e);return k_(t,[FT(Kp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ea(this.firestore,t))}isEqual(e){return E2(this._delegate,e._delegate)}withConverter(e){return new N_(this.firestore,this._delegate.withConverter(e?Jp.getInstance(this.firestore,e):null))}}function Xp(n){return yn(n,hr)}class YP{constructor(...e){this._delegate=new cd(...e)}static documentId(){return new YP(Ur.keyField().canonicalString())}isEqual(e){return(e=(0,Gt.m9)(e))instanceof cd&&this._delegate._internalPath.isEqual(e._internalPath)}}class eg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function s$(){return new UP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new eg(e)}static delete(){const e=function i$(){return new Iw("deleteField")}();return e._methodName="FieldValue.delete",new eg(e)}static arrayUnion(...e){const t=function o$(...n){return new b4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new eg(t)}static arrayRemove(...e){const t=function a$(...n){return new C4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new eg(t)}static increment(e){const t=function u$(n){return new I4("increment",n)}(e);return t._methodName="FieldValue.increment",new eg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const g$={Firestore:Z2,GeoPoint:NT,Timestamp:br,Blob:Mw,Transaction:W2,WriteBatch:K2,DocumentReference:Ea,DocumentSnapshot:Pw,Query:Us,QueryDocumentSnapshot:Rw,QuerySnapshot:KP,CollectionReference:N_,FieldPath:YP,FieldValue:eg,setLogLevel:function f$(n){!function r3(n){Ph.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function J2(n,e){return function y$(n,e=aN.z){return new Ar.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function QP(n,e){return J2(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function zT(n,e){return QP(n,e).pipe(Zf(void 0),Gx(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,f)=>{const _=i.find(D=>D.doc.ref.isEqual(c.ref)),w=t?.payload.docs.find(D=>D.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:c}})}),a}))}function X2(n,e,t){return zT(n,t).pipe(hh((r,i)=>function w$(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function E$(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return JP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return JP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return JP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),function WU(n,e=Hf.y){return n=n??KU,(0,ti.e)((t,r)=>{let i,a=!0;t.subscribe((0,Gn.x)(r,c=>{const f=e(c);(a||!n(i,f))&&(a=!1,i=f,r.next(c))}))})}(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function JP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function eV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function _$(n){(function m$(n,e){n.INTERNAL.registerComponent(new Xc.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},g$)))})(n,(e,t)=>new Z2(e,t,new h$)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(uN.Z);class tV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Zf(void 0),Gx(),eo(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(hh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=eV(e);return X2(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return QP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new nV(this.ref.doc(e),this.afs)}}class nV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=rV(r,t);return new tV(i,a,this.afs)}snapshotChanges(){return function v$(n,e){return J2(n,e).pipe(Zf(void 0),Gx(),(0,ht.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,gn.D)(this.ref.get(e)).pipe(ln.iC)}}class b${constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),eo(t=>t.length>0),ln.iC):zT(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(hh((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=eV(e);return X2(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return QP(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,gn.D)(this.query.get(e)).pipe(ln.iC)}}const C$=new u.OlP("angularfire2.enableFirestorePersistence"),I$=new u.OlP("angularfire2.firestore.persistenceSettings"),T$=new u.OlP("angularfire2.firestore.settings"),D$=new u.OlP("angularfire2.firestore.use-emulator");function rV(n,e=(t=>t)){return{query:e(n),ref:n}}let qT=(()=>{class n{constructor(t,r,i,a,c,f,_,w,D,A,L,j,q,ee,oe,Ue,Ze){this.schedulers=_;const je=(0,zi.on)(t,f,r),Ye=D;A&&XS(je,f,L,q,ee,oe,j,Ue),[this.firestore,this.persistenceEnabled$]=(0,zi.cc)(`${je.name}.firestore`,"AngularFirestore",je.name,()=>{const Ft=f.runOutsideAngular(()=>je.firestore());if(a&&Ft.settings(a),Ye&&Ft.useEmulator(...Ye),i&&!Bs(c)){const Bt=()=>{try{return(0,gn.D)(Ft.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(vn){return typeof console<"u"&&console.warn(vn),Et(!1)}};return[Ft,f.runOutsideAngular(Bt)]}return[Ft,Et(!1)]},[a,Ye,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:c}=rV(i,r),f=this.schedulers.ngZone.run(()=>a);return new tV(f,c,this)}collectionGroup(t,r){const i=r||(c=>c),a=this.firestore.collectionGroup(t);return new b$(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new nV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zi.Dh),u.LFG(zi.xv,8),u.LFG(C$,8),u.LFG(T$,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ln.HU),u.LFG(I$,8),u.LFG(D$,8),u.LFG(ks,8),u.LFG(ZS,8),u.LFG(WS,8),u.LFG(KS,8),u.LFG(YS,8),u.LFG(QS,8),u.LFG(JS,8),u.LFG(Tp,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),A$=(()=>{class n{constructor(t){this.firestore=t}getImage(){return this.firestore.collection("galeriasi").snapshotChanges()}getImagesById(t){return this.firestore.collection("galeriasi").doc(t).valueChanges()}addImagenInfo(t){return this.firestore.collection("galeriasi").add(t)}updateImage(t,r){return this.firestore.collection("galeriasi").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kw=(()=>{class n{constructor(t){this.firestore=t}getUsers(){return this.firestore.collection("users").snapshotChanges()}getUserById(t){return this.firestore.collection("users").snapshotChanges()}addIUserInfo(t){return this.firestore.collection("users").add(t)}updateUser(t,r){return this.firestore.collection("users").doc(r).update(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ZT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class iV{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ZT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ZT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?c=>t(new ZT(c,this,this._ref)):{next:t.next?c=>t.next(new ZT(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class sV{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new hd(e,this._service))}get items(){return this._delegate.items.map(e=>new hd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class hd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function kU(n,e){return Yk(n,e)}(this._delegate,e);return new hd(t,this.storage)}get root(){return new hd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new hd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new iV(function SU(n,e,t){return function mU(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new qk(n,new oo(e),t)}(n=(0,Gt.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=wt.RAW,r){this._throwIfRoot("putString");const i=zn(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new iV(new qk(this._delegate,new oo(i.data,!0),a),this)}listAll(){return nN(this._delegate).then(e=>new sV(e,this.storage))}list(e){return function PU(n,e){return Kk(n=(0,Gt.m9)(n),e)}(this._delegate,e||void 0).then(t=>new sV(t,this.storage))}getMetadata(){return function xU(n){return function vU(n){n._throwIfRoot("getMetadata");const e=Bk(n.storage,n._location,y0());return n.storage.makeRequestWithTokens(e,_u)}(n=(0,Gt.m9)(n))}(this._delegate)}updateMetadata(e){return function MU(n,e){return function wU(n,e){n._throwIfRoot("updateMetadata");const t=function eU(n,e,t,r){const a=g(e.fullServerUrl(),n.host,n._protocol),f=Lx(t,r),w=n.maxOperationRetryTime,D=new Dl(a,"PATCH",mI(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=f,D.errorHandler=v0(e),D}(n.storage,n._location,e,y0());return n.storage.makeRequestWithTokens(t,_u)}(n=(0,Gt.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return rN(this._delegate)}delete(){return this._throwIfRoot("delete"),function RU(n){return function bU(n){n._throwIfRoot("deleteObject");const e=function tU(n,e){const r=g(e.fullServerUrl(),n.host,n._protocol),f=new Dl(r,"DELETE",function c(_,w){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=v0(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,_u)}(n=(0,Gt.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Fx(e)}}class oV{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(aV(e))throw Dp("ref() expected a child path but got a URL, use refFromURL instead.");return new hd($x(this._delegate,e),this)}refFromURL(e){if(!aV(e))throw Dp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{qi.makeFromUrl(e,this._delegate.host)}catch{throw Dp("refFromUrl() expected a valid full URL but got an invalid one.")}return new hd($x(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){iN(this._delegate,e,t,r)}}function aV(n){return/^[A-Za-z]+:\/\//.test(n)}function R$(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new oV(t,r)}function uV(n){const e=function N$(n){return new Ar.y(e=>{const t=c=>e.next(c);t(n.snapshot);const a=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){a()}}).pipe(function S$(n,e=aN.z){return(0,ti.e)((t,r)=>{let i=null,a=null,c=null;const f=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=c+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);f()}t.subscribe((0,Gn.x)(r,w=>{a=w,c=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function WT(n){return{getDownloadURL:()=>Et(void 0).pipe(ln.fc,wr(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>Et(void 0).pipe(ln.fc,wr(()=>n.getMetadata()),ln.iC),delete:()=>(0,gn.D)(n.delete()),child:e=>WT(n.child(e)),updateMetadata:e=>(0,gn.D)(n.updateMetadata(e)),put:(e,t)=>uV(n.put(e,t)),putString:(e,t,r)=>uV(n.putString(e,t,r)),list:e=>(0,gn.D)(n.list(e)),listAll:()=>(0,gn.D)(n.listAll())}}!function k$(n){const e={TaskState:Os,TaskEvent:oU,StringFormat:wt,Storage:oV,Reference:hd};n.INTERNAL.registerComponent(new Xc.wA("storage-compat",R$,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(uN.Z);const O$=new u.OlP("angularfire2.storageBucket"),F$=new u.OlP("angularfire2.storage.maxUploadRetryTime"),L$=new u.OlP("angularfire2.storage.maxOperationRetryTime"),V$=new u.OlP("angularfire2.storage.use-emulator");let lV=(()=>{class n{constructor(t,r,i,a,c,f,_,w,D,A){const L=(0,zi.on)(t,c,r);this.storage=(0,zi.cc)(`${L.name}.storage.${i}`,"AngularFireStorage",L.name,()=>{const j=c.runOutsideAngular(()=>L.storage(i||void 0)),q=D;return q&&j.useEmulator(...q),_&&j.setMaxUploadRetryTime(_),w&&j.setMaxOperationRetryTime(w),j},[_,w])}ref(t){return WT(this.storage.ref(t))}refFromURL(t){return WT(this.storage.refFromURL(t))}upload(t,r,i){return WT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zi.Dh),u.LFG(zi.xv,8),u.LFG(O$,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(ln.HU),u.LFG(F$,8),u.LFG(L$,8),u.LFG(V$,8),u.LFG(Tp,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function U$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",11)(1,"img",12),u.NdJ("mouseenter",function(){const a=u.CHM(t).index,c=u.oxw();return u.KtG(c.onMouseEnter(a))})("mouseleave",function(){const a=u.CHM(t).index,c=u.oxw();return u.KtG(c.onMouseLeave(a))})("click",function(){const a=u.CHM(t).index,c=u.oxw();return u.KtG(c.onPreviewImage(a))}),u.qZA(),u.TgZ(2,"div",13)(3,"div")(4,"i",14),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.abrirCom(a))}),u.qZA(),u.TgZ(5,"span"),u._uU(6),u.qZA()(),u.TgZ(7,"div")(8,"i",15),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.likeImage(a))}),u.qZA(),u.TgZ(9,"span"),u._uU(10),u.qZA()()()()}if(2&n){const t=e.$implicit,r=u.oxw();u.xp6(1),u.Q6J("src",t.url,u.LSH),u.xp6(5),u.Oqu(t.commentsVideo.length),u.xp6(2),u.ekj("liked",t.likedByImage.includes(r.currentUser.uid)),u.xp6(2),u.Oqu(t.likesCountImage)}}function B$(n,e){if(1&n&&(u.TgZ(0,"span",22),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.AsE(" ",t.currentIndex+1,"/",t.totalImageCount," ")}}function j$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",23),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.onClosePreview())}),u._UZ(1,"i",24),u.qZA()}}function $$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",25),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.prev())}),u._UZ(1,"i",26),u.qZA()}}function H$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",27),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.next())}),u._UZ(1,"i",28),u.qZA()}}function G$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",29),u._UZ(1,"img",30),u.TgZ(2,"div",31)(3,"div")(4,"i",14),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.abrirCom(i.currentLightboxImage))}),u.qZA(),u.TgZ(5,"span"),u._uU(6),u.qZA()(),u.TgZ(7,"div")(8,"i",15),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.likeImage(i.currentLightboxImage))}),u.qZA(),u.TgZ(9,"span"),u._uU(10),u.qZA()()()()}if(2&n){const t=u.oxw(2);u.xp6(1),u.ekj("zoom-in",t.previewImage),u.Q6J("src",t.currentLightboxImage.url,u.LSH),u.xp6(5),u.Oqu(t.currentLightboxImage.commentsVideo.length),u.xp6(2),u.ekj("liked",t.currentLightboxImage.likedByImage.includes(t.currentUser.uid)),u.xp6(2),u.Oqu(t.currentLightboxImage.likesCountImage)}}const z$=function(n){return{active:n}};function q$(n,e){if(1&n&&(u.TgZ(0,"div",16),u.YNc(1,B$,2,2,"span",17),u.YNc(2,j$,2,0,"button",18),u.YNc(3,$$,2,0,"button",19),u.YNc(4,H$,2,0,"button",20),u.YNc(5,G$,11,7,"div",21),u.qZA()),2&n){const t=u.oxw();u.Q6J("ngClass",u.VKq(6,z$,t.previewImage)),u.xp6(1),u.Q6J("ngIf",t.showCount),u.xp6(1),u.Q6J("ngIf",t.previewImage),u.xp6(1),u.Q6J("ngIf",t.controls),u.xp6(1),u.Q6J("ngIf",t.controls),u.xp6(1),u.Q6J("ngIf",t.previewImage)}}function Z$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span",44),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.close())}),u.qZA()}}function W$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",45)(1,"div",46)(2,"img",47),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.ir(a.idUser))}),u.qZA(),u.TgZ(3,"span"),u._uU(4),u.qZA()(),u.TgZ(5,"div",48)(6,"p",49),u._uU(7),u.qZA(),u.TgZ(8,"div",50)(9,"div")(10,"i",15),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.likeComment(a))}),u.qZA(),u.TgZ(11,"span"),u._uU(12),u.qZA()(),u.TgZ(13,"i",51),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.abrirEditar(a))}),u.qZA(),u.TgZ(14,"i",52),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.deleteModal(a))}),u.qZA()()()()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.xp6(2),u.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",u.LSH),u.xp6(2),u.Oqu(t.usuario),u.xp6(3),u.Oqu(t.comentario),u.xp6(3),u.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),u.xp6(2),u.Oqu(t.likesCountComment)}}function K$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32)(1,"div",33),u.YNc(2,Z$,1,0,"span",34),u.TgZ(3,"h3"),u._uU(4,"Comentarios:"),u.qZA(),u.TgZ(5,"div",35)(6,"div",36),u.YNc(7,W$,15,6,"div",37),u.qZA()(),u.TgZ(8,"div",38)(9,"form",39,40),u.NdJ("submit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.addComment(i.comentario))}),u.TgZ(11,"label",41),u._uU(12,"Agregar comentario:"),u.qZA(),u._UZ(13,"br"),u.TgZ(14,"textarea",42),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.comentario=i)}),u.qZA(),u._UZ(15,"br"),u.TgZ(16,"button",43),u._uU(17," Comentar "),u.qZA()()()()()}if(2&n){const t=u.MAs(10),r=u.oxw();u.xp6(2),u.Q6J("ngIf",r.ocultarx),u.xp6(5),u.Q6J("ngForOf",r.dataVideoId.commentsVideo),u.xp6(7),u.Q6J("ngModel",r.comentario),u.xp6(2),u.Q6J("disabled",!t.valid)}}function Y$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",53)(1,"div",54)(2,"div",55)(3,"p"),u._uU(4,"\xbfDeseas eliminar este Comentario?"),u.qZA()(),u.TgZ(5,"div",56)(6,"button",57),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.closeDelete())}),u._uU(7,"Cancelar"),u.qZA(),u.TgZ(8,"button",57),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.borrarComentario())}),u._uU(9,"Aceptar"),u.qZA()()()()}}function Q$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",58)(1,"div",54)(2,"div",55)(3,"p"),u._uU(4,"Editar comentario:"),u.qZA(),u.TgZ(5,"textarea",59),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.esteComentario=i)}),u.qZA()(),u.TgZ(6,"div",60)(7,"button",57),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.closeDelete())}),u._uU(8,"Cancelar"),u.qZA(),u.TgZ(9,"button",57),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.editarComentario())}),u._uU(10,"Aceptar"),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(5),u.Q6J("ngModel",t.esteComentario)}}let J$=(()=>{class n{constructor(t,r,i,a,c,f,_,w){this.storage=t,this.el=r,this.afAuth=i,this._image=a,this.toastr=c,this.router=f,this._user=_,this.storagex=w,this.images=[],this.showCount=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.images[0],this.currentIndex=0,this.controls=!0,this.totalImageCount=0,this.reset=0,this.adm=!1,this.esInvitado=!1,this.ocultarx=!0,this.comentario="",this.esteComentario="",this.dataVideoId=[]}ngOnInit(){this.getImages(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getImages(){this._image.getImage().subscribe(t=>{this.images=[],t.forEach(r=>{const i=r.payload.doc.data();this.images.push({id:r.payload.doc.id,...i,likesCountImage:i.likesCountImage||0,likedByImage:i.likedByImage||[],userImageLikes:i.userImageLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeImage(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const a=i.uid,c=i.displayName,f=i.email,_=t.likedByImage.indexOf(a);-1!==_?(t.likedByImage.splice(_,1),t.userImageLikes.splice(_,1),t.likesCountImage--):(t.likedByImage.push(a),t.likesCountImage++,t.userImageLikes.push({usuario:c,correo:f}));const w=t.id,D={likesCountImage:t.likesCountImage,likedByImage:t.likedByImage,userImageLikes:t.userImageLikes};yield r._image.updateImage(w,D)}else r.modal=!0})()}subirArchivo(){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const a=new Image,c=new FileReader;c.onload=f=>{a.onload=()=>{const _=document.createElement("canvas");let A=a.width,L=a.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),_.width=A,_.height=L;const j=_.getContext("2d");j?(j.drawImage(a,0,0,A,L),_.toBlob(q=>{if(q){const ee=`images/${i.name}`,oe=this.storagex.ref(ee);this.storagex.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe(fh(()=>{oe.getDownloadURL().subscribe(Ze=>{this._image.addImagenInfo({url:Ze}).then(()=>{console.log("actualizando"),this.toastr.info("Actualizando lista de Imagenes")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},a.src=f.target.result},c.readAsDataURL(i)}}),t.click()}onPreviewImage(t){this.showMask=!0,this.previewImage=!0,this.currentIndex=t,this.showCount=!0,this.currentLightboxImage=this.images[t],this.totalImageCount=this.images.length,document.body.style.overflow="hidden"}onClosePreview(){this.previewImage=!1,this.showMask=!1,document.body.style.overflow=""}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.images.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.images[this.currentIndex]}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.images.length-1),this.currentLightboxImage=this.images[this.currentIndex]}onMouseEnter(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1.1)"}onMouseLeave(t){this.el.nativeElement.querySelectorAll(".zoomable-image")[t].style.transform="scale(1)"}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}abrirEditar(t){var r=this;return(0,fe.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}deleteModal(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}addComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const a=r.dataVideoId,c=r.dataVideoId.id;a.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const A={commentsVideo:a.commentsVideo};yield r._image.updateImage(c,A),r.comentario=""}})()}abrirCom(t){var r=this;return(0,fe.Z)(function*(){r.dataVideoId=t,(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(a=>{console.error("Error al eliminar el comentario:",a)})):console.error("\xcdndice de comentario no v\xe1lido")}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._image.updateImage(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const a=i.uid,c=t.likedByComment.indexOf(a);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(a),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(w=>w===t)){const w={commentsVideo:r.dataVideoId.commentsVideo};yield r._image.updateImage(f,w)}}else r.modal=!0})()}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}ir(t){var r=this;return(0,fe.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Jm),u.Y36(u.SBq),u.Y36(ks),u.Y36(A$),u.Y36(so),u.Y36(wn),u.Y36(kw),u.Y36(lV))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-galeria"]],decls:15,vars:5,consts:[[1,"contenedor"],[1,"box"],[1,"con-input"],[3,"click"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","lightbox",3,"ngClass",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"gallery-img"],["alt","imagen",1,"zoomable-image",3,"src","mouseenter","mouseleave","click"],[2,"display","inline-flex","gap","4rem"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"lightbox",3,"ngClass"],["class","count",4,"ngIf"],["class","close-btn",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-prev",3,"click",4,"ngIf"],["class","btn-lightbox-carousel btn-next",3,"click",4,"ngIf"],["class","lightbox-img",4,"ngIf"],[1,"count"],[1,"close-btn",3,"click"],[1,"far","fa-times"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next"],[1,"lightbox-img"],["alt","imagen",2,"transform","none",3,"src"],[1,"btn-lc"],[1,"modalcom"],[1,"modal-com",2,"text-align","justify"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[1,"modal-con"],[2,"text-align","center"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"app-navbar"),u.TgZ(3,"div",2)(4,"p",3),u.NdJ("click",function(){return r.subirArchivo()}),u._uU(5,"+ Agregar imagen"),u.qZA()(),u.TgZ(6,"div",4)(7,"div",5),u.YNc(8,U$,11,5,"div",6),u.qZA(),u.YNc(9,q$,6,8,"div",7),u.qZA()()(),u._UZ(10,"div"),u.YNc(11,K$,18,4,"div",8),u.TgZ(12,"div"),u.YNc(13,Y$,10,0,"div",9),u.qZA(),u.YNc(14,Q$,11,1,"div",10)),2&t&&(u.xp6(8),u.Q6J("ngForOf",r.images),u.xp6(1),u.Q6J("ngIf",r.showMask),u.xp6(2),u.Q6J("ngIf",r.modalcom),u.xp6(2),u.Q6J("ngIf",r.modalDelete),u.xp6(1),u.Q6J("ngIf",r.modalEditar))},dependencies:[cn,ys,Tn,To,Ts,os,kr,ls,al,iu,$m],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:0}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}[_nghost-%COMP%]{display:block;text-align:center}.gallery-lightbox-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-bottom:30px;margin-top:56px;box-shadow:0 1px 5px #00000036}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000000d9;transition:opacity .3s ease-in-out;opacity:0;pointer-events:none}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:7%;height:10%;color:#fff;opacity:.7;font-size:18px;display:flex;justify-content:center;align-items:center;margin-left:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:0;right:0;padding:0;color:#fff;background:0 0;border:0;cursor:pointer;width:7%;height:10%;z-index:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]   .fa-times[_ngcontent-%COMP%]{font-size:25px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-lightbox-carousel[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;z-index:1;width:8%;height:8%;padding:0;color:#fff;text-align:center;background:0 0;border:0;cursor:pointer}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-prev[_ngcontent-%COMP%]{left:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .btn-next[_ngcontent-%COMP%]{right:0}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]{color:#fff;opacity:.5;transition:all .15s ease}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:hover{opacity:.9}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-lightbox-carousel[_ngcontent-%COMP%]:active{opacity:.5}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-prev[_ngcontent-%COMP%], .gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .icon-next[_ngcontent-%COMP%]{font-size:30px}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:.35rem}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.gallery-lightbox-container[_ngcontent-%COMP%]   .lightbox-img[_ngcontent-%COMP%]   img.zoom-in[_ngcontent-%COMP%]{transform:scale(1.1)}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:2}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.con-input[_ngcontent-%COMP%]{padding:15px 0 20px}.file-label[_ngcontent-%COMP%]{padding:4px;font-size:14px}}@media (max-width: 500px){.caja[_ngcontent-%COMP%]{font-size:12px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{column-count:1}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.btn-lc[_ngcontent-%COMP%]{display:inline-flex;gap:4rem;position:absolute;bottom:20%}}"]}),n})(),cV=(()=>{class n{constructor(t){this.firestore=t}getVideos(){return this.firestore.collection("videos").snapshotChanges()}getVideoById(t){return this.firestore.collection("videos").doc(t).valueChanges()}updateVideo(t,r){return this.firestore.collection("videos").doc(t).update(r)}addImagenInfo(t){return this.firestore.collection("videos").add(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qT))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X$(n,e){1&n&&(u.TgZ(0,"div",10)(1,"div",11),u._UZ(2,"button",12),u.TgZ(3,"label",13),u._UZ(4,"i",14),u._uU(5," Agregar nuevo video "),u.qZA()()())}function eH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",15)(1,"video",16),u._UZ(2,"source",17),u.qZA(),u.TgZ(3,"div",18)(4,"div",19)(5,"p",20),u._uU(6),u.qZA()(),u.TgZ(7,"div",21)(8,"div",22)(9,"i",23),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.abrirCom(a))}),u.qZA(),u.TgZ(10,"span"),u._uU(11),u.qZA()(),u.TgZ(12,"div",24)(13,"i",25),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw();return u.KtG(c.likeVideo(a))}),u.qZA(),u.TgZ(14,"span"),u._uU(15),u.qZA()()()()()}if(2&n){const t=e.$implicit,r=u.oxw();u.xp6(2),u.Q6J("src",t.url,u.LSH),u.xp6(4),u.hij(" ",t.nombre," "),u.xp6(5),u.Oqu(t.commentsVideo.length),u.xp6(2),u.ekj("liked",t.likedByVideo.includes(r.currentUser.uid)),u.xp6(2),u.Oqu(t.likesCountVideo)}}function tH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",26)(1,"div",27)(2,"span",28),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.close())}),u.qZA(),u.TgZ(3,"div",29)(4,"p"),u._uU(5," Primero debes "),u.TgZ(6,"a",30),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.salir())}),u._uU(7,"Iniciar Sesion"),u.qZA(),u._uU(8," o "),u.TgZ(9,"a",31),u._uU(10,"Registrate"),u.qZA()()()()()}}function nH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span",44),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.close())}),u.qZA()}}function rH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",45)(1,"div",46)(2,"img",47),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.ir(a.idUser))}),u.qZA(),u.TgZ(3,"span"),u._uU(4),u.qZA()(),u.TgZ(5,"div",48)(6,"p",49),u._uU(7),u.qZA(),u.TgZ(8,"div",50)(9,"div")(10,"i",25),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.likeComment(a))}),u.qZA(),u.TgZ(11,"span"),u._uU(12),u.qZA()(),u.TgZ(13,"i",51),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.abrirEditar(a))}),u.qZA(),u.TgZ(14,"i",52),u.NdJ("click",function(){const a=u.CHM(t).$implicit,c=u.oxw(2);return u.KtG(c.deleteModal(a))}),u.qZA()()()()}if(2&n){const t=e.$implicit,r=u.oxw(2);u.xp6(2),u.Q6J("src",t.imagen||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",u.LSH),u.xp6(2),u.Oqu(t.usuario),u.xp6(3),u.Oqu(t.comentario),u.xp6(3),u.ekj("liked",t.likedByComment&&t.likedByComment.includes(r.currentUser.uid)),u.xp6(2),u.Oqu(t.likesCountComment)}}function iH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",32)(1,"div",33),u.YNc(2,nH,1,0,"span",34),u.TgZ(3,"h3"),u._uU(4,"Comentarios:"),u.qZA(),u.TgZ(5,"div",35)(6,"div",36),u.YNc(7,rH,15,6,"div",37),u.qZA()(),u.TgZ(8,"div",38)(9,"form",39,40),u.NdJ("submit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.addComment(i.comentario))}),u.TgZ(11,"label",41),u._uU(12,"Agregar comentario:"),u.qZA(),u._UZ(13,"br"),u.TgZ(14,"textarea",42),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.comentario=i)}),u.qZA(),u._UZ(15,"br"),u.TgZ(16,"button",43),u._uU(17," Comentar "),u.qZA()()()()()}if(2&n){const t=u.MAs(10),r=u.oxw();u.xp6(2),u.Q6J("ngIf",r.ocultarx),u.xp6(5),u.Q6J("ngForOf",r.dataVideoId.commentsVideo),u.xp6(7),u.Q6J("ngModel",r.comentario),u.xp6(2),u.Q6J("disabled",!t.valid)}}function sH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",53)(1,"div",27)(2,"div",29)(3,"p"),u._uU(4,"\xbfDeseas eliminar este Comentario?"),u.qZA()(),u.TgZ(5,"div",54)(6,"button",55),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.closeDelete())}),u._uU(7,"Cancelar"),u.qZA(),u.TgZ(8,"button",55),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.borrarComentario())}),u._uU(9,"Aceptar"),u.qZA()()()()}}function oH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",56)(1,"div",27)(2,"div",29)(3,"p"),u._uU(4,"Editar comentario:"),u.qZA(),u.TgZ(5,"textarea",57),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.esteComentario=i)}),u.qZA()(),u.TgZ(6,"div",58)(7,"button",55),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.closeDelete())}),u._uU(8,"Cancelar"),u.qZA(),u.TgZ(9,"button",55),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.editarComentario())}),u._uU(10,"Aceptar"),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(5),u.Q6J("ngModel",t.esteComentario)}}let aH=(()=>{class n{constructor(t,r,i,a,c,f){this.storage=t,this.afAuth=r,this._videosService=i,this.afs=a,this._users=c,this.router=f,this.videos=[],this.esInvitado=!1,this.modal=!1,this.modalcom=!1,this.modalDelete=!1,this.modalEditar=!1,this.comentario="",this.esteComentario="",this.dataVideoId=[],this.ocultarx=!0,this.adm=!1}ngOnInit(){this.getVideos(),this.afAuth.authState.subscribe(t=>{this.currentUser=t;const r=t?.uid;"rm01jawdLvYSObMPDc8BTBasbJp2"==r&&(this.esInvitado=!0),"QxwJYfG0c2MwfjnJR70AdmmKOIz2"==r&&(this.adm=!0)})}getVideos(){this._videosService.getVideos().subscribe(t=>{this.videos=[],t.forEach(r=>{const i=r.payload.doc.data();this.videos.push({id:r.payload.doc.id,...i,likesCountVideo:i.likesCountVideo||0,likedByVideo:i.likedByVideo||[],userVideoLikes:i.userVideoLikes||[],commentsVideo:i.commentsVideo||[]})})})}likeVideo(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){const a=i.uid,c=i.displayName,f=i.email,_=t.likedByVideo.indexOf(a);-1!==_?(t.likedByVideo.splice(_,1),t.userVideoLikes.splice(_,1),t.likesCountVideo--):(t.likedByVideo.push(a),t.likesCountVideo++,t.userVideoLikes.push({usuario:c,correo:f}));const w=t.id,D={likesCountVideo:t.likesCountVideo,likedByVideo:t.likedByVideo,userVideoLikes:t.userVideoLikes};yield r._videosService.updateVideo(w,D)}else r.modal=!0})()}addComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i){const a=r.dataVideoId,c=r.dataVideoId.id;a.commentsVideo.push({usuario:i.displayName,correo:i.email,comentario:t,imagen:i.photoURL,idUser:i.uid});const A={commentsVideo:a.commentsVideo};yield r._videosService.updateVideo(c,A),r.comentario=""}})()}salir(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}close(){this.modal=!1,this.modalcom=!1}closeDelete(){this.modalDelete=!1,this.modalEditar=!1,this.ocultarx=!0}abrirCom(t){var r=this;return(0,fe.Z)(function*(){r.dataVideoId=t;(yield r.afAuth.currentUser)&&!r.esInvitado?r.modalcom=!0:r.modal=!0})()}deleteModal(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;(i?.email===t.correo||"administrador.sistema@gmail.com"==i?.email)&&(r.modalDelete=!0,r.ocultarx=!1),r.comentarioDel=t})()}borrarComentario(){const t=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==t?(this.dataVideoId.commentsVideo.splice(t,1),this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalDelete=!1,this.ocultarx=!0,console.log("Comentario eliminado correctamente")}).catch(a=>{console.error("Error al eliminar el comentario:",a)})):console.error("\xcdndice de comentario no v\xe1lido")}abrirEditar(t){var r=this;return(0,fe.Z)(function*(){(yield r.afAuth.currentUser)?.email===t.correo&&(r.modalEditar=!0,r.ocultarx=!1),r.comentarioDel=t,r.esteComentario=t.comentario})()}editarComentario(){const t=this.esteComentario,r=this.dataVideoId.commentsVideo.indexOf(this.comentarioDel);-1!==r?(this.dataVideoId.commentsVideo[r].comentario=t,this._videosService.updateVideo(this.dataVideoId.id,{commentsVideo:this.dataVideoId.commentsVideo}).then(()=>{this.modalEditar=!1,this.ocultarx=!0,console.log("Comentario editado correctamente")}).catch(c=>{console.error("Error al editar el comentario:",c)})):console.error("\xcdndice de comentario no v\xe1lido")}likeComment(t){var r=this;return(0,fe.Z)(function*(){const i=yield r.afAuth.currentUser;if(i&&!r.esInvitado){if(!t)return void console.error("El comentario no est\xe1 definido");t.likedByComment||(t.likedByComment=[]);const a=i.uid,c=t.likedByComment.indexOf(a);-1!==c?(t.likedByComment.splice(c,1),t.likesCountComment=Math.max(0,t.likesCountComment-1)):(t.likedByComment.push(a),t.likesCountComment=(t.likesCountComment||0)+1);const f=r.dataVideoId.id;if(-1!==r.dataVideoId.commentsVideo.findIndex(w=>w===t)){const w={commentsVideo:r.dataVideoId.commentsVideo};yield r._videosService.updateVideo(f,w),console.log(w)}}else r.modal=!0})()}ir(t){var r=this;return(0,fe.Z)(function*(){(yield r.afAuth.currentUser)?.uid===t?r.router.navigate(["/perfil"]):r.router.navigate(["/usuario/",t])})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Jm),u.Y36(ks),u.Y36(cV),u.Y36(qT),u.Y36(kw),u.Y36(wn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-videos"]],decls:13,vars:6,consts:[[1,"contenedor"],[1,"box"],["class","con-input",4,"ngIf"],[1,"video-container"],[1,"video"],["width","320","height","240","class","gallery-video",4,"ngFor","ngForOf"],["class","modal",4,"ngIf"],["class","modalcom",4,"ngIf"],["class","modalDelete",4,"ngIf"],["class","modalEditar",4,"ngIf"],[1,"con-input"],[1,"input-file-container"],["routerLink","/nuevo-video","id","file-input"],["for","file-input",1,"file-label"],[1,"fas","fa-plus"],["width","320","height","240",1,"gallery-video"],["controls",""],["type","video/mp4",3,"src"],[1,"section"],[1,"title"],[2,"margin","0"],[1,"bocadillos"],[1,"comment"],[1,"far","fa-comment",2,"cursor","pointer",3,"click"],[1,"likes"],[1,"far","fa-thumbs-up",2,"cursor","pointer",3,"click"],[1,"modal"],[1,"modal-con"],[1,"fas","fa-times","lax",3,"click"],[2,"text-align","center"],[1,"iniciar",3,"click"],["routerLink","/registrar",1,"registrar"],[1,"modalcom"],[1,"modal-com"],["class","fas fa-times lax2",3,"click",4,"ngIf"],[1,"comments-container"],[1,"comments-list"],["style","border-bottom: 1px solid #a1a197",4,"ngFor","ngForOf"],[1,"comment-input"],[3,"submit"],["commentForm","ngForm"],["for","comentario"],["id","comentario","name","comentario","rows","4","cols","50","required","",3,"ngModel","ngModelChange"],["type","submit",2,"padding","4px","border-radius","7px",3,"disabled"],[1,"fas","fa-times","lax2",3,"click"],[2,"border-bottom","1px solid #a1a197"],[2,"display","flex","flex-direction","column"],["alt","Foto de perfil","width","50","height","50",2,"cursor","pointer","border-radius","50%",3,"src","click"],[2,"display","flex","align-items","center","justify-content","space-between","border","1px solid #80808054","border-radius","9px","padding","3px"],[2,"padding","16px","width","86%"],[2,"display","flex","gap","1rem"],[1,"fas","fa-pencil-alt",2,"cursor","pointer","color","blue",3,"click"],[1,"fas","fa-trash",2,"cursor","pointer","color","red",3,"click"],[1,"modalDelete"],[2,"display","flex","justify-content","space-evenly"],[1,"buttonDel",3,"click"],[1,"modalEditar"],["name","esteComentario","id","esteComentario","cols","30","rows","10",2,"padding","12px",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","space-evenly","margin-top","11px"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"app-navbar"),u.YNc(3,X$,6,0,"div",2),u.TgZ(4,"div",3)(5,"div",4),u.YNc(6,eH,16,6,"div",5),u.qZA()()()(),u.TgZ(7,"div"),u.YNc(8,tH,11,0,"div",6),u.qZA(),u.YNc(9,iH,18,4,"div",7),u.TgZ(10,"div"),u.YNc(11,sH,10,0,"div",8),u.qZA(),u.YNc(12,oH,11,1,"div",9)),2&t&&(u.xp6(3),u.Q6J("ngIf",r.adm),u.xp6(3),u.Q6J("ngForOf",r.videos),u.xp6(2),u.Q6J("ngIf",r.modal),u.xp6(1),u.Q6J("ngIf",r.modalcom),u.xp6(2),u.Q6J("ngIf",r.modalDelete),u.xp6(1),u.Q6J("ngIf",r.modalEditar))},dependencies:[ys,Tn,gu,Jc,To,Ts,os,kr,ls,al,iu,$m],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}.bocadillos[_ngcontent-%COMP%]{display:flex;gap:1rem}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.section[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.video-container[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;padding:25px}.video[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);column-gap:30px;row-gap:30px}.gallery-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{width:100%;height:300px;border-radius:.35rem;margin-bottom:17px;box-shadow:0 1px 5px #00000036}@media (max-width: 900px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 580px){.video[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]}),n})();function uH(n,e){if(1&n&&(u.TgZ(0,"div",4)(1,"p",5),u._uU(2),u.qZA(),u.TgZ(3,"audio",6),u._UZ(4,"source",7),u.qZA()()),2&n){const t=e.$implicit;u.xp6(2),u.Oqu(t.title),u.xp6(2),u.Q6J("src",t.url,u.LSH)}}let lH=(()=>{class n{constructor(t){this.storage=t,this.musica=[],this.titulos=["Aguanile","Arrepientete","Asi soy yo","Bam bam bidi bim bam bam","Batman y el hombre Ara\xf1a","Caderona","Con la punta del pie","Donde estabas tu","Welcome to party","La negra tiene tumbao","Llora Corazon","Payaso","Cancion 13","Lupita","Paloma","Yo soy el rey","Cancion 17","Sangre son colora","Sangre son colora (editado)","boogalo 1","Cancion 21","Cancion 22","Cancion 23","Todo tiene su final (editado)","Cancion 25","Cancion 26","Cancion 27","Omele","Boogalo 2","Aguazate","Aqui no ha pasado nada","Saraguey santoja","Arranca en fa","Arroyando","Asi soy yo (edit)","Askarakatiski","Ballandel","Bam bam (edit)","Bomba caranbomba","Boogalo 3","Boogalo 4","Boogalo 5","Boogalo 6","Cancion 45","Boogalo 7","Boogalo 8","Boogalo 9","Boogalo 10","Boogalo 11","Boogalo 12","Boogalo 13","Cancion 53","Cachondea","Cancion 54","Camina como chencha","Cancion 56","Carmen","Cancion 57","Cancion 58","Cancion 59","Cancion 60","Cancion 61","Ran kan kan","Echo chi echo no","El malo","Cancion 65","Federico boogalo","Fuego pal 23","Hagan silencio","Indestructible","Lancion 70","cancion 71","La bamba","Cancion 73","La luz del cielo","La pelota","Cancion 76","Mambo rock","Merecumbe","Boogalo 14","Boogalo 15","Mondongo","Oh mayi","Pal 23","Cancion 85","Pruebalo","Quimbara (edit)","Quimbara","Cancion 89","Cancion 90","Cancion 91","Cancion 92","Cancion 93","Fuma el barco","Sonido bestial","Cancion 96","Cancion 97","Cancion 98","Cancion 99","El yoyo","Tremendo rumbon","Tres pata","Tres pata v2","Cancion 104","Cancion 105"]}ngOnInit(){this.getMusica()}subirArchivo(t){const r=t.target.files[0],i=oN(this.storage,`videos/${r.name}`);ZU(i,r).then(()=>{this.getMusica()}).catch(a=>console.log(a))}getMusica(){var t=this;return(0,fe.Z)(function*(){const r=oN(t.storage,"musica");try{const i=yield qU(r);t.musica=yield Promise.all(i.items.map(function(){var a=(0,fe.Z)(function*(c,f){const _=yield GU(c);return{title:t.titulos[f]||`Canci\xf3n ${f+1}`,url:_}});return function(c,f){return a.apply(this,arguments)}}()))}catch(i){console.log(i)}})()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Jm))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-musica"]],decls:5,vars:1,consts:[[1,"contenedor"],[1,"box"],[1,"musica-container"],["class","musica",4,"ngFor","ngForOf"],[1,"musica"],[2,"margin-bottom","10px"],["controls",""],["type","audio/mp3",3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"app-navbar"),u.TgZ(3,"div",2),u.YNc(4,uH,5,2,"div",3),u.qZA()()()),2&t&&(u.xp6(4),u.Q6J("ngForOf",r.musica))},dependencies:[ys,$m],styles:[".contenedor[_ngcontent-%COMP%]{background-color:#8a2be2;background-image:url(https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Fpngwing.com.png?alt=media&token=4e0dc339-1658-4b69-b385-4e1e5c787abf);display:flex;overflow:hidden;justify-content:center;margin:0;padding:0}nav[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.box[_ngcontent-%COMP%]{color:#fff;font-size:24px;padding:20px;width:100%}.caja[_ngcontent-%COMP%]{padding:20px;border-radius:15px;outline:solid rgb(245,246,248);text-align:center}.con-input[_ngcontent-%COMP%]{position:relative;padding:32px 0 49px}.input-file-container[_ngcontent-%COMP%]{position:absolute;right:0;overflow:hidden;display:inline-block}#file-input[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0}.file-label[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;padding:10px 15px;border-radius:5px;cursor:pointer;display:inline-block}.musica-container[_ngcontent-%COMP%]{margin-top:25px;display:flex;flex-wrap:wrap;justify-content:space-around}.nav-link[_ngcontent-%COMP%]{text-decoration:none;color:#f4f4f4}.nav-link[_ngcontent-%COMP%]:hover{color:#ffe600;text-decoration:underline}@media (max-width: 767px){.caja[_ngcontent-%COMP%]{font-size:15px}}@media (max-width: 350px){.caja[_ngcontent-%COMP%]{font-size:12px}}"]}),n})(),dV=(()=>{class n{constructor(t){this.toastr=t}mensaje(t){return"auth/invalid-email"===t?"Por favor, introduce un correo electr\xf3nico v\xe1lido.":""}errorFirebase(t){switch(t){case"auth/user-not-found":case"auth/wrong-password":this.toastr.error("Usuario/Contrase\xf1a invalida","Error");break;case"auth/invalid-email":this.toastr.error("No hay correo valido o llena todos los campos","Error");break;case"auth/invalid-login-credentials":this.toastr.error("El correo o contrase\xf1a no son correctos","Error");break;case"auth/missing-password":this.toastr.error("Digita la contrase\xf1a","Error");break;case"auth/email-already-in-use":this.toastr.error("Usuario ya registrado","Error");break;case"auth/weak-password":this.toastr.error("Contrase\xf1a Debil","Error");break;case"auth/internal-error":this.toastr.error("Correo no valido","Error")}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(so))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),XP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-spinner"]],decls:3,vars:0,consts:[["role","status",1,"spinner"],[1,"visually-hidden"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"span",1),u._uU(2,"Loading..."),u.qZA()())},styles:['@charset "UTF-8";.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#3498db;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.visually-hidden[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}']}),n})();function cH(n,e){1&n&&(u.TgZ(0,"span",19),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"correo "),u.qZA(),u._uU(4,"es requerido"),u.qZA())}function dH(n,e){1&n&&(u.TgZ(0,"span",19),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"correo "),u.qZA(),u._uU(4,"es invalido"),u.qZA())}function hH(n,e){1&n&&(u.TgZ(0,"span",19),u._uU(1,"La "),u.TgZ(2,"strong"),u._uU(3,"contrase\xf1a "),u.qZA(),u._uU(4,"debe contener mas de 6 caracteres"),u.qZA())}function fH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",3)(1,"form",4),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.login())}),u.TgZ(2,"div")(3,"h2",5),u._uU(4,"Asi Somos"),u.qZA()(),u.TgZ(5,"h2",6),u._uU(6,"Iniciar sesi\xf3n"),u.qZA(),u.TgZ(7,"div",7)(8,"label",8),u._uU(9,"Correo electr\xf3nico"),u.qZA(),u._UZ(10,"input",9),u.YNc(11,cH,5,0,"span",10),u.YNc(12,dH,5,0,"span",10),u.qZA(),u.TgZ(13,"div",7)(14,"label",11),u._uU(15,"Contrase\xf1a"),u.qZA(),u._UZ(16,"input",12),u.YNc(17,hH,5,0,"span",10),u.qZA(),u.TgZ(18,"div",13)(19,"a",14),u._uU(20,"\xbfOlvidaste tu contrase\xf1a?"),u.qZA(),u.TgZ(21,"a",15),u._uU(22,"Registrarse"),u.qZA()(),u.TgZ(23,"button",16),u._uU(24,"Iniciar sesi\xf3n"),u.qZA(),u.TgZ(25,"div",17)(26,"a",18),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.loginAsGuest())}),u._uU(27,"Iniciar sesi\xf3n como invitado"),u.qZA()()()()}if(2&n){const t=u.oxw();let r,i,a;u.xp6(1),u.Q6J("formGroup",t.loginUsuario),u.xp6(10),u.Q6J("ngIf",(null==(r=t.loginUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.loginUsuario.get("email"))?null:r.touched)),u.xp6(1),u.Q6J("ngIf",(null==(i=t.loginUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.loginUsuario.get("email"))?null:i.touched)),u.xp6(5),u.Q6J("ngIf",(null==(a=t.loginUsuario.get("password"))?null:a.hasError("required"))&&(null==(a=t.loginUsuario.get("password"))?null:a.touched))}}function pH(n,e){1&n&&(u.TgZ(0,"div",20)(1,"h2",21),u._uU(2,"Asi Somos"),u.qZA(),u.TgZ(3,"span",22),u._uU(4,"Iniciando sesion..."),u.qZA(),u._UZ(5,"app-spinner"),u.qZA())}let gH=(()=>{class n{constructor(t,r,i,a,c){this.toastr=t,this.fb=r,this.firebaseError=i,this.afAuth=a,this.router=c,this.loading=!1,this.verificar=!1,this.message="",this.loginUsuario=this.fb.group({email:["",[Rr.required,Rr.email]],password:["",Rr.required]})}ngOnInit(){}login(){const t=this.loginUsuario.value.email,r=this.loginUsuario.value.password;this.loading=!0,this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.router.navigate(["/perfil"]),this.loading=!1}).catch(i=>{this.loading=!1,this.verificar=!0,this.firebaseError.errorFirebase(i.code),this.message=this.firebaseError.mensaje(i.code),setTimeout(()=>{this.message=""},2e3)})}loginAsGuest(){this.loading=!0,this.afAuth.signInWithEmailAndPassword("soyinvitado@gmail.com","123456").then(()=>{this.loading=!1,this.router.navigate(["/perfil"])}).catch(i=>{this.loading=!1,console.error("Error al iniciar sesi\xf3n con invitado:",i)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(so),u.Y36(Sf),u.Y36(dV),u.Y36(ks),u.Y36(wn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-login-form"]],decls:3,vars:2,consts:[[2,"display","flex","justify-content","center","height","100vh","background-color","white","user-select","none"],["class","container-login",4,"ngIf"],["style","\n      display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;\n    ",4,"ngIf"],[1,"container-login"],[1,"form-contenedor",3,"formGroup","ngSubmit"],[1,"elH2",2,"user-select","none"],[1,"form-title",2,"user-select","none"],[1,"form-group"],["for","email",2,"user-select","none"],["type","email","name","email","placeholder","correo electronico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],["for","password",2,"user-select","none"],["type","password","id","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],[1,"form-group","form-links"],["routerLink","/recuperar",1,"forgot-password",2,"user-select","none"],["routerLink","/registrar",1,"register-link",2,"user-select","none"],["type","submit",1,"submit-button"],[2,"text-align","center","margin-top","14px"],[1,"register-link",2,"user-select","none","cursor","pointer",3,"click"],[1,"text-danger","errorLabel"],[2,"display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[1,"elH2"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,fH,28,4,"div",1),u.YNc(2,pH,6,0,"div",2),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",!r.loading),u.xp6(1),u.Q6J("ngIf",r.loading))},dependencies:[Tn,Jc,To,Ts,os,kr,ll,eh,XP],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px;-webkit-user-select:none;user-select:none}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#0040ff;color:#fffefe}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}.container-login[_ngcontent-%COMP%]{margin-top:8%;width:30%}.logo[_ngcontent-%COMP%]{position:absolute}@media screen and (max-width: 600px){.container-login[_ngcontent-%COMP%]{margin-top:19%;width:87%}.logo[_ngcontent-%COMP%]{display:none}}"]}),n})();function mH(n,e){1&n&&(u.TgZ(0,"span",20),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"nombre de usuario"),u.qZA(),u._uU(4," es requerido"),u.qZA())}function _H(n,e){1&n&&(u.TgZ(0,"span",20),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"correo "),u.qZA(),u._uU(4,"es requerido"),u.qZA())}function yH(n,e){1&n&&(u.TgZ(0,"span",20),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"correo "),u.qZA(),u._uU(4,"es inv\xe1lido"),u.qZA())}function vH(n,e){1&n&&(u.TgZ(0,"span",20),u._uU(1,"La "),u.TgZ(2,"strong"),u._uU(3,"contrase\xf1a "),u.qZA(),u._uU(4,"debe contener m\xe1s de 6 caracteres"),u.qZA())}function wH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"form",3,4),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.registrar())}),u.TgZ(3,"h2",5),u._uU(4,"Asi Somos"),u.qZA(),u.TgZ(5,"h2",6),u._uU(6,"REGISTRARSE"),u.qZA(),u.TgZ(7,"div",7)(8,"label",8),u._uU(9,"Nombre de Usuario"),u.qZA(),u._UZ(10,"input",9),u.YNc(11,mH,5,0,"span",10),u.qZA(),u.TgZ(12,"div",7)(13,"label",11),u._uU(14,"Correo electr\xf3nico"),u.qZA(),u._UZ(15,"input",12),u.YNc(16,_H,5,0,"span",10),u.YNc(17,yH,5,0,"span",10),u.qZA(),u.TgZ(18,"div",7)(19,"label",13),u._uU(20,"Contrase\xf1a"),u.qZA(),u._UZ(21,"input",14),u.YNc(22,vH,5,0,"span",10),u.qZA(),u.TgZ(23,"div",7)(24,"label",15),u._uU(25,"Repetir Contrase\xf1a"),u.qZA(),u._UZ(26,"input",16),u.qZA(),u.TgZ(27,"div",17)(28,"button",18),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.goBack())}),u._uU(29," Volver "),u.qZA(),u.TgZ(30,"button",19),u._uU(31,"Registrar"),u.qZA()()()()}if(2&n){const t=u.oxw();let r,i,a,c;u.xp6(1),u.Q6J("formGroup",t.registrarUsuario),u.xp6(10),u.Q6J("ngIf",(null==(r=t.registrarUsuario.get("username"))?null:r.hasError("required"))&&(null==(r=t.registrarUsuario.get("username"))?null:r.touched)),u.xp6(5),u.Q6J("ngIf",(null==(i=t.registrarUsuario.get("email"))?null:i.hasError("required"))&&(null==(i=t.registrarUsuario.get("email"))?null:i.touched)),u.xp6(1),u.Q6J("ngIf",(null==(a=t.registrarUsuario.get("email"))?null:a.hasError("email"))&&(null==(a=t.registrarUsuario.get("email"))?null:a.touched)),u.xp6(5),u.Q6J("ngIf",(null==(c=t.registrarUsuario.get("password"))?null:c.hasError("required"))&&(null==(c=t.registrarUsuario.get("password"))?null:c.touched)),u.xp6(8),u.Q6J("disabled",t.registrarUsuario.invalid)}}function EH(n,e){1&n&&(u.TgZ(0,"div",21)(1,"h2",5),u._uU(2,"Asi Somos"),u.qZA(),u.TgZ(3,"span",22),u._uU(4,"Registrando..."),u.qZA(),u._UZ(5,"app-spinner"),u.qZA())}let bH=(()=>{class n{constructor(t,r,i,a,c,f){this.fb=t,this.afAuth=r,this.router=i,this.firebaseError=a,this.toastr=c,this.location=f,this.loading=!1,this.registrarUsuario=this.fb.group({username:["",Rr.required],email:["",[Rr.required,Rr.email]],password:["",[Rr.required,Rr.minLength(6)]],repetirPassword:["",Rr.required]})}ngOnInit(){}registrar(){const t=this.registrarUsuario.value.username,r=this.registrarUsuario.value.email,i=this.registrarUsuario.value.password;i===this.registrarUsuario.value.repetirPassword?(this.loading=!0,this.afAuth.createUserWithEmailAndPassword(r,i).then(c=>c.user?.updateProfile({displayName:t})).then(c=>{this.router.navigate(["/login"]),this.toastr.success("El usuario fue registrado con exito!!","Usuario Registrado")}).catch(c=>{this.loading=!1,console.log(c),this.firebaseError.errorFirebase(c.code)})):this.toastr.error("Las contrase\xf1as no coinciden","Error")}goBack(){this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Sf),u.Y36(ks),u.Y36(wn),u.Y36(dV),u.Y36(so),u.Y36(Se))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-registrar-usuario"]],decls:2,vars:2,consts:[["class","content",4,"ngIf"],["style"," background-color: white; display: flex; height: 90vh; flex-direction: column; justify-content: center; align-items: center;",4,"ngIf"],[1,"content"],[1,"login-form",3,"formGroup","ngSubmit"],["loginForm","ngForm"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["for","username"],["type","text","name","username","placeholder","Nombre de Usuario","formControlName","username"],["class","text-danger errorLabel",4,"ngIf"],["for","email"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["for","password"],["type","password","name","password","placeholder","Contrase\xf1a","formControlName","password"],["for","repetirPassword"],["type","password","name","password","placeholder","Repetir contrase\xf1a","formControlName","repetirPassword"],[2,"display","flex","gap","2px"],["type","button",1,"submit",2,"background-color","blue",3,"click"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"background-color","white","display","flex","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(u.YNc(0,wH,32,6,"div",0),u.YNc(1,EH,6,0,"div",1)),2&t&&(u.Q6J("ngIf",!r.loading),u.xp6(1),u.Q6J("ngIf",r.loading))},dependencies:[Tn,To,Ts,os,kr,ll,eh,XP],styles:[".login-form[_ngcontent-%COMP%]{margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a;height:94vh}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;background:linear-gradient(to right,#e44d42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})();function CH(n,e){1&n&&(u.TgZ(0,"span",12),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"correo "),u.qZA(),u._uU(4,"es requerido"),u.qZA())}function IH(n,e){1&n&&(u.TgZ(0,"span",12),u._uU(1,"El "),u.TgZ(2,"strong"),u._uU(3,"correo "),u.qZA(),u._uU(4,"es invalido"),u.qZA())}function TH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"form",3),u.NdJ("ngSubmit",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.recuperar())}),u.TgZ(2,"h2",4),u._uU(3,"Asi Somos"),u.qZA(),u.TgZ(4,"h2",5),u._uU(5,"RECUPERAR CUENTA"),u.qZA(),u.TgZ(6,"div",6),u._UZ(7,"input",7),u.YNc(8,CH,5,0,"span",8),u.YNc(9,IH,5,0,"span",8),u.qZA(),u.TgZ(10,"div",9)(11,"button",10),u._uU(12," Volver "),u.qZA(),u.TgZ(13,"button",11),u._uU(14,"Aceptar"),u.qZA()()()()}if(2&n){const t=u.oxw();let r,i;u.xp6(1),u.Q6J("formGroup",t.recuperarUsuario),u.xp6(7),u.Q6J("ngIf",(null==(r=t.recuperarUsuario.get("email"))?null:r.hasError("required"))&&(null==(r=t.recuperarUsuario.get("email"))?null:r.touched)),u.xp6(1),u.Q6J("ngIf",(null==(i=t.recuperarUsuario.get("email"))?null:i.hasError("email"))&&(null==(i=t.recuperarUsuario.get("email"))?null:i.touched)),u.xp6(4),u.Q6J("disabled",t.recuperarUsuario.invalid)}}function DH(n,e){1&n&&(u.TgZ(0,"div",13)(1,"h2",4),u._uU(2,"Asi Somos"),u.qZA(),u.TgZ(3,"span",14),u._uU(4,"Registrando..."),u.qZA(),u._UZ(5,"app-spinner"),u.qZA())}let AH=(()=>{class n{constructor(t,r,i,a){this.fb=t,this.afAuth=r,this.router=i,this.toastr=a,this.loading=!1,this.recuperarUsuario=this.fb.group({email:["",[Rr.required,Rr.email]]})}ngOnInit(){}recuperar(){const t=this.recuperarUsuario.value.email;this.loading=!0,this.afAuth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/login"]),this.toastr.info("Revisa tu correo para restablecer tu contrase\xf1a","Peticion Aceptada")}).catch(r=>{this.loading=!1,this.firebaseError(r.code)})}firebaseError(t){switch(t){case"auth/user-not-found":this.toastr.error("Este correo no es valido","Error");break;case"auth/missing-email":this.toastr.error("Inserta un correo","Error")}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Sf),u.Y36(ks),u.Y36(wn),u.Y36(so))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-recuperar-contrasena"]],decls:3,vars:2,consts:[["style","margin-top: 8%",4,"ngIf"],["style","display: flex;background-color: white;\n    height: 90vh;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;",4,"ngIf"],[2,"margin-top","8%"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"elH2"],[1,"form-title"],[1,"form-group"],["type","email","name","email","placeholder","Correo electr\xf3nico","formControlName","email"],["class","text-danger errorLabel",4,"ngIf"],[2,"display","flex","gap","2px"],["type","button","routerLink","/login",1,"submit",2,"background-color","blue"],["type","submit",1,"submit-button",3,"disabled"],[1,"text-danger","errorLabel"],[2,"display","flex","background-color","white","height","90vh","flex-direction","column","justify-content","center","align-items","center"],[2,"margin-bottom","18px"]],template:function(t,r){1&t&&(u.TgZ(0,"div"),u.YNc(1,TH,15,4,"div",0),u.YNc(2,DH,6,0,"div",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",!r.loading),u.xp6(1),u.Q6J("ngIf",r.loading))},dependencies:[Tn,gu,To,Ts,os,kr,ll,eh,XP],styles:[".login-form[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-title[_ngcontent-%COMP%]{font-size:24px;text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;font-size:16px;font-weight:700;margin-bottom:5px}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;border-radius:5px;border:1px solid #ccc}.submit-button[_ngcontent-%COMP%]{display:block;width:94%;padding:10px;font-size:16px;background:linear-gradient(to right,#E44D42,#001eff);color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit[_ngcontent-%COMP%]{display:block;width:100%;padding:10px;font-size:16px;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease-in-out}.submit-button[_ngcontent-%COMP%]:hover{background-color:#001aff}.submit[_ngcontent-%COMP%]:hover{background-color:#0d60db}.form-links[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.forgot-password[_ngcontent-%COMP%], .register-link[_ngcontent-%COMP%]{font-size:14px;text-decoration:none;color:#007bff;transition:color .3s ease-in-out}.forgot-password[_ngcontent-%COMP%]:hover, .register-link[_ngcontent-%COMP%]:hover{color:#0056b3}.elH2[_ngcontent-%COMP%]{font-family:Arial,sans-serif;text-align:center;font-size:36px;background-image:linear-gradient(to right,#fd1100,#001eff);-webkit-background-clip:text;background-clip:text;color:transparent}"]}),n})(),SH=(()=>{class n{constructor(t){this.afAuth=t}isLoggedIn(){return this.afAuth.authState.pipe((0,ht.U)(t=>!!t))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ks))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qh=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return this.authService.isLoggedIn().pipe((0,ht.U)(i=>!!i||(this.router.navigate(["/login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(SH),u.LFG(wn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xH=(()=>{class n{constructor(t,r,i){this._videosService=t,this.router=r,this.toastr=i,this.subir={nombre:"",url:""}}ngOnInit(){}subirVideo(){console.log(this.subir),this._videosService.addImagenInfo(this.subir).then(()=>{this.router.navigate(["/videos"]),this.toastr.success("Agregando nuevo video")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(cV),u.Y36(wn),u.Y36(so))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-form-video"]],decls:17,vars:2,consts:[[1,"container"],[1,"form-container"],[3,"ngSubmit"],[1,"form-group"],["name","nombre","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["name","url","type","text",2,"width","94%",3,"ngModel","ngModelChange"],["type","submit"],["routerLink","/videos",2,"background-color","green"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"form",2),u.NdJ("ngSubmit",function(){return r.subirVideo()}),u.TgZ(3,"div",3)(4,"label"),u._uU(5,"Nombre"),u.qZA(),u.TgZ(6,"input",4),u.NdJ("ngModelChange",function(a){return r.subir.nombre=a}),u.qZA()(),u.TgZ(7,"div",3)(8,"label"),u._uU(9,"Url"),u.qZA(),u.TgZ(10,"input",5),u.NdJ("ngModelChange",function(a){return r.subir.url=a}),u.qZA()(),u.TgZ(11,"div",3)(12,"button",6),u._uU(13,"Agregar Video"),u.qZA()(),u.TgZ(14,"div",3)(15,"button",7),u._uU(16,"Volver"),u.qZA()()()()()),2&t&&(u.xp6(6),u.Q6J("ngModel",r.subir.nombre),u.xp6(4),u.Q6J("ngModel",r.subir.url))},dependencies:[gu,To,Ts,os,kr,al,iu],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.form-container[_ngcontent-%COMP%]{width:80%;max-width:400px;padding:20px;background-color:#f5f5f5;border-radius:8px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}input[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;cursor:pointer;transition:background-color .3s ease;width:100%}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]}),n})();const hV={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let KT;const MH=new Uint8Array(16);function PH(){if(!KT&&(KT=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!KT))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return KT(MH)}const Ji=[];for(let n=0;n<256;++n)Ji.push((n+256).toString(16).slice(1));const kH=function RH(n,e,t){if(hV.randomUUID&&!e&&!n)return hV.randomUUID();const r=(n=n||{}).random||(n.rng||PH)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(let i=0;i<16;++i)e[t+i]=r[i];return e}return function fV(n,e=0){return Ji[n[e+0]]+Ji[n[e+1]]+Ji[n[e+2]]+Ji[n[e+3]]+"-"+Ji[n[e+4]]+Ji[n[e+5]]+"-"+Ji[n[e+6]]+Ji[n[e+7]]+"-"+Ji[n[e+8]]+Ji[n[e+9]]+"-"+Ji[n[e+10]]+Ji[n[e+11]]+Ji[n[e+12]]+Ji[n[e+13]]+Ji[n[e+14]]+Ji[n[e+15]]}(r)};function NH(n,e){1&n&&(u.TgZ(0,"div")(1,"p",14),u._uU(2,"Editar perfil"),u.qZA()())}function OH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div")(1,"p",15),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.changePortada())}),u._uU(2,"+"),u.qZA()()}}function FH(n,e){1&n&&(u.TgZ(0,"div",16)(1,"div",17)(2,"div",18),u._UZ(3,"img",19),u.qZA(),u.TgZ(4,"span"),u._uU(5,"Asi somos asi bailamos"),u.qZA()()())}function LH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",27)(1,"img",28),u.NdJ("click",function(){const i=u.CHM(t),a=i.index,c=i.$implicit,f=u.oxw(3);return u.KtG(f.onPreviewImage(a,c))}),u.qZA()()}if(2&n){const t=e.$implicit;u.xp6(1),u.Q6J("src",t.url,u.LSH)}}function VH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",29)(1,"div",30)(2,"span",31),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.close())}),u.qZA(),u.TgZ(3,"div",32)(4,"button",33),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.prev())}),u._UZ(5,"i",34),u.qZA()(),u.TgZ(6,"div",35)(7,"button",36),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(3);return u.KtG(i.next())}),u._UZ(8,"i",37),u.qZA()(),u.TgZ(9,"div",38),u._UZ(10,"img",39),u.qZA()()()}if(2&n){const t=u.oxw(3);u.xp6(10),u.ekj("zoom-in",t.previewImage),u.Q6J("src",t.currentLightboxImage,u.LSH)}}function UH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",20)(1,"div",21)(2,"p",22),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.misImages())}),u._uU(3,"+ Agregar imagen"),u.qZA()(),u.TgZ(4,"div",23)(5,"div",24),u.YNc(6,LH,2,1,"div",25),u.qZA()(),u.YNc(7,VH,11,3,"div",26),u.qZA()}if(2&n){const t=u.oxw(2);u.xp6(6),u.Q6J("ngForOf",t.imageX),u.xp6(1),u.Q6J("ngIf",t.showMask)}}function BH(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Muy pronto tendremos esta funcion..."),u.qZA())}function jH(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"span",2),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.logout())}),u._uU(2,"Salir"),u.qZA(),u.TgZ(3,"div",3)(4,"div",4),u._UZ(5,"img",5),u.TgZ(6,"div",6)(7,"img",7),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.changeProfilePicture())}),u.qZA(),u.TgZ(8,"p",8),u._uU(9),u.qZA()(),u.YNc(10,NH,3,0,"div",1),u.YNc(11,OH,3,0,"div",1),u.qZA(),u.TgZ(12,"p",9),u._uU(13),u.qZA()(),u.TgZ(14,"div",10)(15,"p",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.grupos())}),u._uU(16,"Grupos"),u.qZA(),u.TgZ(17,"p",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.imagenes())}),u._uU(18,"Imagenes"),u.qZA(),u.TgZ(19,"p",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.videos())}),u._uU(20,"Videos"),u.qZA()(),u.YNc(21,FH,6,0,"div",12),u.YNc(22,UH,8,2,"div",13),u.YNc(23,BH,2,0,"div",1),u.BQk()}if(2&n){const t=u.oxw();u.xp6(5),u.Q6J("src",t.urlPortada||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Starsinthesky.jpg/1024px-Starsinthesky.jpg",u.LSH),u.xp6(2),u.Q6J("src",t.usuario.photoURL||"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",u.LSH),u.xp6(2),u.Oqu(t.usuario.displayName),u.xp6(1),u.Q6J("ngIf",!t.esInvitado),u.xp6(1),u.Q6J("ngIf",!t.esInvitado),u.xp6(2),u.Oqu(t.aboutMeValue),u.xp6(8),u.Q6J("ngIf",t.gr),u.xp6(1),u.Q6J("ngIf",t.im),u.xp6(1),u.Q6J("ngIf",t.vd)}}function $H(n,e){1&n&&(u.ynx(0),u.TgZ(1,"p"),u._uU(2,"No se ha iniciado sesi\xf3n."),u.qZA(),u.BQk())}let HH=(()=>{class n{constructor(t,r,i,a,c){this.afAuth=t,this.storage=r,this._user=i,this.toastr=a,this.router=c,this.usuariosInfo=[],this.idInfo=[],this.esInvitado=!1,this.imageX=[],this.gr=!0,this.im=!1,this.vd=!1,this.previewImage=!1,this.showMask=!1,this.currentLightboxImage=this.imageX[0],this.currentIndex=0}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t,this.getUsers(),this.usuarioActual=t?.displayName,"Invitad@"==this.usuarioActual&&(this.esInvitado=!0)}),this.generateUniqueId()}generateUniqueId(){const t=kH();this.idGenerado=t}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],this.idInfo=[],t.forEach(r=>{const i=r.payload.doc.data();this.usuariosInfo.push({id:r.payload.doc.data(),...r.payload.doc.data(),misImagenes:i.misImagenes||[],likedByImage:i.misImagenes[this.currentIndex]});const a=this.usuariosInfo.find(_=>_.id.idUser===this.usuario.uid);this.objetoUsuario=a;const c={id:r.payload.doc.id,...r.payload.doc.data()};this.idInfo.push(c);const f=this.idInfo.find(_=>_.idUser===this.usuario.uid)?.id;this.id=f,this.phoneNumberValue=a.telefono,this.genderValue=a.Genero,this.birthdayValue=a.cumpleanos,this.aboutMeValue=a.about,this.urlPortada=a.portada,this.imageX=a.misImagenes,console.log(this.objetoUsuario)})})}changeProfilePicture(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const a=new Image,c=new FileReader;c.onload=f=>{a.onload=()=>{const _=document.createElement("canvas");let A=a.width,L=a.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),_.width=A,_.height=L;const j=_.getContext("2d");j?(j.drawImage(a,0,0,A,L),_.toBlob(q=>{if(q){const ee=`profilePictures/${this.usuario?.uid}/${i.name}`,oe=this.storage.ref(ee);this.storage.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe(fh(()=>{oe.getDownloadURL().subscribe(Ze=>{this.afAuth.currentUser.then(je=>{je?.updateProfile({photoURL:Ze}).then(()=>{this.toastr.info("Foto de perfil cambiada")}).catch(Ye=>{console.error("Error al actualizar la foto de perfil:",Ye)})})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},a.src=f.target.result},c.readAsDataURL(i)}}),t.click()}}grupos(){this.gr=!0,this.im=!1,this.vd=!1}imagenes(){this.gr=!1,this.im=!0,this.vd=!1}videos(){this.gr=!1,this.im=!1,this.vd=!0}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}changePortada(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const a=new Image,c=new FileReader;c.onload=f=>{a.onload=()=>{const _=document.createElement("canvas");let A=a.width,L=a.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),_.width=A,_.height=L;const j=_.getContext("2d");j?(j.drawImage(a,0,0,A,L),_.toBlob(q=>{if(q){const ee=`portada/${this.usuario?.uid}/${i.name}`,oe=this.storage.ref(ee);this.storage.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe(fh(()=>{oe.getDownloadURL().subscribe(Ze=>{this._user.updateUser({portada:Ze},this.id).then(()=>{console.log("actualizando"),this.toastr.info("Foto de portada cambiada")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},a.src=f.target.result},c.readAsDataURL(i)}}),t.click()}}misImages(){if(!this.esInvitado){const t=document.createElement("input");t.type="file",t.accept="image/*",t.addEventListener("change",r=>{const i=r?.target?.files?.[0];if(i){const a=new Image,c=new FileReader;c.onload=f=>{a.onload=()=>{const _=document.createElement("canvas");let A=a.width,L=a.height;(A>800||L>600)&&(A>L?(L*=800/A,A=800):(A*=600/L,L=600)),_.width=A,_.height=L;const j=_.getContext("2d");j?(j.drawImage(a,0,0,A,L),_.toBlob(q=>{if(q){const ee=`usuarios/${this.usuario?.uid}/${i.name}`,oe=this.storage.ref(ee);this.storage.upload(ee,q,{contentType:q.type}).snapshotChanges().pipe(fh(()=>{oe.getDownloadURL().subscribe(Ze=>{const je=this.objetoUsuario;je.misImagenes.push({url:Ze,id:this.idGenerado}),this._user.updateUser({misImagenes:je.misImagenes},this.id).then(()=>{console.log("actualizando"),this.toastr.info("nueva imagen agregada")})})})).subscribe()}},i.type)):console.error("Error: No se pudo obtener el contexto 2D del canvas.")},a.src=f.target.result},c.readAsDataURL(i)}}),t.click()}}onPreviewImage(t,r){this.showMask=!0,this.currentIndex=t,this.previewImage=!0,this.currentLightboxImage=this.imageX[t].url}close(){this.showMask=!1}next(){this.currentIndex=this.currentIndex+1,this.currentIndex>this.imageX.length-1&&(this.currentIndex=0),this.currentLightboxImage=this.imageX[this.currentIndex].url}prev(){this.currentIndex=this.currentIndex-1,this.currentIndex<0&&(this.currentIndex=this.imageX.length-1),this.currentLightboxImage=this.imageX[this.currentIndex].url}abrirCom(t){console.log("abriendo comentarios",t)}likeImage(t){console.log("diste click"),this.imageX.findIndex(f=>f.id===t.id);const a=this.imageX[this.currentIndex];a.likedByImage.push(1),console.log({likedCount:a.likedByImage})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ks),u.Y36(lV),u.Y36(kw),u.Y36(so),u.Y36(wn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-perfil"]],decls:3,vars:2,consts:[[1,"container",2,"user-select","none"],[4,"ngIf"],[2,"padding","6px","position","absolute","right","0","text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"user-info"],[1,"img-container"],["alt","",2,"width","100%","position","absolute","z-index","-1",3,"src"],[2,"padding","5px"],["alt","Foto de perfil","width","auto","height","70",2,"cursor","pointer","user-select","none",3,"src","click"],[1,"lap","user"],[1,"lap"],[1,"acciones"],[2,"cursor","pointer",3,"click"],["style","padding: 20px",4,"ngIf"],["class","contenedor-img",4,"ngIf"],["routerLink","/perfil-editar",1,"edit-perfil"],[1,"edit-perfil",3,"click"],[2,"padding","20px"],[1,"container-img-g"],[1,"bf"],["routerLink","/main","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2FScreen%20Shot%202024-05-06%20at%2011.43.48%20AM.png?alt=media&token=c0c71fed-4aff-4923-8663-9d91d1f9f4df","alt","",2,"cursor","pointer"],[1,"contenedor-img"],[1,"subir"],[3,"click"],[1,"gallery-lightbox-container"],[1,"gallery"],["class","gallery-img",4,"ngFor","ngForOf"],["class","modalcom",4,"ngIf"],[1,"gallery-img"],["width","130","alt","",1,"zoomable-image",3,"src","click"],[1,"modalcom"],[1,"modal-con"],[1,"fas","fa-times","lax",2,"color","white","font-size","48px",3,"click"],[1,"anterior"],[1,"btn-lightbox-carousel","btn-prev",3,"click"],[1,"fas","fa-arrow-circle-left","icon-lightbox-carousel","icon-prev"],[1,"siguiente"],[1,"btn-lightbox-carousel","btn-next",3,"click"],[1,"fas","fa-arrow-circle-right","icon-lightbox-carousel","icon-next"],[2,"text-align","center"],["alt","imagen",2,"transform","none","width","100%",3,"src"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,jH,24,9,"ng-container",1),u.YNc(2,$H,3,0,"ng-container",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",r.usuario),u.xp6(1),u.Q6J("ngIf",!r.usuario))},dependencies:[ys,Tn,gu],styles:[".img-container[_ngcontent-%COMP%]{gap:1rem;border-radius:12px;display:flex;height:25vh;align-items:flex-end;box-shadow:0 0 12px #000}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:13px}.lap[_ngcontent-%COMP%]{border-radius:7px;background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;text-align:center;margin:3px}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.acciones[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;border-radius:17px;padding:6px 27px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.container-img-g[_ngcontent-%COMP%]{text-align:center;width:135px}.bf[_ngcontent-%COMP%]{border-radius:7px;padding:7px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.user[_ngcontent-%COMP%]{color:#fff;margin:0;font-weight:600}.edit-perfil[_ngcontent-%COMP%]{border-radius:22px;padding:5px 22px;background-color:#fff;color:#000;cursor:pointer}.edit-perfil[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}.contenedor-img[_ngcontent-%COMP%]{display:flex;flex-direction:column}.subir[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-right:12px}.subir[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;width:129px;padding:5px 9px;border-radius:13px}.zoomable-image[_ngcontent-%COMP%]{transition:transform .3s ease-in-out}.zoomable-image[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.gallery-lightbox-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]{line-height:0;column-count:3;column-gap:3px}.gallery-lightbox-container[_ngcontent-%COMP%]   .gallery[_ngcontent-%COMP%]   .gallery-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;cursor:zoom-in;border-radius:.35rem;margin-top:3px;box-shadow:0 1px 5px #00000036}.anterior[_ngcontent-%COMP%]{position:absolute;left:0;top:50%}.siguiente[_ngcontent-%COMP%]{position:absolute;right:0;top:50%}.btn-prev[_ngcontent-%COMP%]{border:none;background-color:transparent;border-radius:50%;font-size:48px}.btn-prev[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fefefe7a}.btn-prev[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#00a2ff}.btn-next[_ngcontent-%COMP%]{border:none;background-color:transparent;border-radius:50%;font-size:48px}.btn-next[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fefefe7a}.btn-next[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#00a2ff}"]}),n})();function GH(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"label"),u._uU(4,"Nombre de usuario:"),u.qZA(),u.TgZ(5,"input",4),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.displayNameValue=i)}),u.qZA()(),u.TgZ(6,"div",3)(7,"label"),u._uU(8,"Lugar actual:"),u.qZA(),u.TgZ(9,"input",4),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.ciudad=i)}),u.qZA()(),u.TgZ(10,"div",3)(11,"label"),u._uU(12,"Email:"),u.qZA(),u.TgZ(13,"input",5),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.usuario.email=i)}),u.qZA()(),u.TgZ(14,"div",3)(15,"label"),u._uU(16,"Tel\xe9fono:"),u.qZA(),u.TgZ(17,"input",6),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.phoneNumberValue=i)}),u.qZA()(),u.TgZ(18,"div",3)(19,"label"),u._uU(20,"G\xe9nero:"),u.qZA(),u.TgZ(21,"select",7),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.genderValue=i)}),u.TgZ(22,"option",8),u._uU(23,"Hombre"),u.qZA(),u.TgZ(24,"option",9),u._uU(25,"Mujer"),u.qZA(),u.TgZ(26,"option",10),u._uU(27,"No definido"),u.qZA()()(),u.TgZ(28,"div",3)(29,"label"),u._uU(30,"Estado:"),u.qZA(),u.TgZ(31,"select",11),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.estado=i)}),u.TgZ(32,"option",12),u._uU(33,"Soltero(a)"),u.qZA(),u.TgZ(34,"option",13),u._uU(35,"En una relacion"),u.qZA(),u.TgZ(36,"option",14),u._uU(37,"Comprometido(a)"),u.qZA(),u.TgZ(38,"option",15),u._uU(39,"Casado(a)"),u.qZA(),u.TgZ(40,"option",16),u._uU(41,"Pareja de hecho"),u.qZA(),u.TgZ(42,"option",17),u._uU(43,"Relacion abierta"),u.qZA(),u.TgZ(44,"option",18),u._uU(45,"Es complicado"),u.qZA(),u.TgZ(46,"option",19),u._uU(47,"Separado(a)"),u.qZA(),u.TgZ(48,"option",20),u._uU(49,"Divorciado(a)"),u.qZA(),u.TgZ(50,"option",21),u._uU(51,"Viudo(a)"),u.qZA()()(),u.TgZ(52,"div",22)(53,"label"),u._uU(54,"Fecha de cumplea\xf1os:"),u.qZA(),u.TgZ(55,"input",23),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.birthdayValue=i)}),u.qZA()(),u.TgZ(56,"div",3)(57,"label"),u._uU(58,"Sobre m\xed (m\xe1ximo 50 caracteres):"),u.qZA(),u.TgZ(59,"textarea",24),u.NdJ("ngModelChange",function(i){u.CHM(t);const a=u.oxw();return u.KtG(a.aboutMeValue=i)}),u.qZA()(),u.TgZ(60,"div",25)(61,"button",26),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.actualizarPerfil())}),u._uU(62," Guardar cambios "),u.qZA(),u.TgZ(63,"button",27),u._uU(64,"Volver"),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(5),u.Q6J("ngModel",t.displayNameValue),u.xp6(4),u.Q6J("ngModel",t.ciudad),u.xp6(4),u.Q6J("disabled",!0)("ngModel",t.usuario.email),u.xp6(4),u.Q6J("ngModel",t.phoneNumberValue),u.xp6(4),u.Q6J("ngModel",t.genderValue),u.xp6(10),u.Q6J("ngModel",t.estado),u.xp6(24),u.Q6J("ngModel",t.birthdayValue),u.xp6(4),u.Q6J("ngModel",t.aboutMeValue)}}let zH=(()=>{class n{constructor(t,r,i,a){this.afAuth=t,this.toastr=r,this.router=i,this._user=a,this.usuariosInfo=[],this.comprobar=!1}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t,this.displayNameValue=t?.displayName,this.getUsers()})}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],t.forEach(r=>{const i={id:r.payload.doc.id,...r.payload.doc.data()};this.usuariosInfo.push(i);const a=this.usuariosInfo.find(f=>f.idUser===this.usuario.uid),c=this.usuariosInfo.find(f=>f.idUser===this.usuario.uid)?.id;this.id=c,null==c&&(this.comprobar=!0),this.phoneNumberValue=a.telefono,this.genderValue=a.Genero,this.birthdayValue=a.cumpleanos,this.aboutMeValue=a.about,this.ciudad=a.ciudad,this.estado=a.estado})})}actualizarPerfil(){this.usuario?this.afAuth.currentUser.then(t=>{const r=t?.uid,i=t?.email,a=t?.photoURL;if(this.comprobar?this._user.addIUserInfo({idUser:r,usuario:this.displayNameValue,email:i,foto:a,telefono:this.phoneNumberValue,Genero:this.genderValue,cumpleanos:this.birthdayValue,about:this.aboutMeValue,ciudad:this.ciudad,estado:this.estado}).then(()=>{}):this._user.updateUser({idUser:r,usuario:this.displayNameValue,email:i,foto:a,telefono:this.phoneNumberValue,Genero:this.genderValue,cumpleanos:this.birthdayValue,about:this.aboutMeValue,ciudad:this.ciudad,estado:this.estado},this.id).then(()=>{}),t)return t.updateProfile({displayName:this.displayNameValue});throw new Error("Usuario no autenticado")}).then(()=>{this.router.navigate(["/perfil"]),this.toastr.info("Perfil actualizado.")}).catch(t=>{console.error("Error al actualizar el perfil:",t)}):console.error("Usuario no encontrado")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ks),u.Y36(so),u.Y36(wn),u.Y36(kw))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-perfil-editar"]],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"per-con"],[1,"form-group"],["required","","name","displayName","type","text",1,"form-control",3,"ngModel","ngModelChange"],["required","","name","email","type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"],["name","phoneNumber","type","number",1,"form-control",3,"ngModel","ngModelChange"],["name","gender",1,"form-control","slc",3,"ngModel","ngModelChange"],["value","hombre"],["value","mujer"],["value","no_definido"],["name","estado",1,"form-control","slc",3,"ngModel","ngModelChange"],["value","soltero(a)"],["value","en una relacion"],["value","comprometido(a)"],["value","casado(a)"],["value","pareja de hecho"],["value","relacion abierta"],["value","es complicado"],["value","separado(a)"],["value","divorciado(a)"],["value","viudo(a)"],[1,"form-group","brt"],["name","birthday","type","date",1,"form-control","dent",3,"ngModel","ngModelChange"],["name","aboutMe","maxlength","50",1,"form-control",3,"ngModel","ngModelChange"],[1,"but"],[1,"btn","btn-primary",3,"click"],["routerLink","/perfil",1,"btn","btn-secondary"]],template:function(t,r){1&t&&u.YNc(0,GH,65,9,"div",0),2&t&&u.Q6J("ngIf",r.usuario)},dependencies:[Tn,gu,jw,$w,Ts,Eg,Ig,os,ls,Yw,al],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-weight:700}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}button[_ngcontent-%COMP%]{padding:10px 20px;margin-right:10px;border:none;border-radius:5px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.per-con[_ngcontent-%COMP%]{width:98%}.slc[_ngcontent-%COMP%]{width:102%}.brt[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dent[_ngcontent-%COMP%]{width:100.3%;padding:8px;border:1px solid #bcb0b0;border-radius:4px}.but[_ngcontent-%COMP%]{display:flex;justify-content:center}@media (max-width: 500px){.per-con[_ngcontent-%COMP%]{width:94%}.slc[_ngcontent-%COMP%]{width:106%}}"]}),n})();function qH(n,e){if(1&n&&(u.TgZ(0,"div",17)(1,"p",18),u._uU(2),u.qZA(),u.TgZ(3,"p",18),u._uU(4),u.qZA(),u.TgZ(5,"p",18),u._uU(6),u.qZA(),u.TgZ(7,"p",18),u._uU(8),u.qZA(),u.TgZ(9,"p",18),u._uU(10),u.qZA()()),2&n){const t=u.oxw(2);u.xp6(2),u.hij("Vive en: ",t.info.ciudad,""),u.xp6(2),u.hij("Genero: ",t.info.Genero,""),u.xp6(2),u.hij("Cumplea\xf1os: ",t.info.cumpleanos,""),u.xp6(2),u.hij("Estado: ",t.info.estado,""),u.xp6(2),u.hij("Celular: ",t.info.telefono,"")}}function ZH(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"span",2),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.logout())}),u._uU(2,"Salir"),u.qZA(),u.TgZ(3,"div",3)(4,"div",4),u._UZ(5,"img",5),u.TgZ(6,"div",6),u._UZ(7,"img",7),u.TgZ(8,"p",8),u._uU(9),u.qZA()(),u.TgZ(10,"div")(11,"p",9),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.toggleInfo())}),u._uU(12,"Ver mas"),u.qZA(),u.YNc(13,qH,11,5,"div",10),u.qZA()(),u.TgZ(14,"p",11),u._uU(15),u.qZA()(),u.TgZ(16,"div",12)(17,"p"),u._uU(18,"Grupos"),u.qZA(),u.TgZ(19,"p"),u._uU(20,"Imagenes"),u.qZA(),u.TgZ(21,"p"),u._uU(22,"Videos"),u.qZA()(),u.TgZ(23,"div",13)(24,"div",14)(25,"div",15),u._UZ(26,"img",16),u.qZA(),u.TgZ(27,"span"),u._uU(28,"Asi somos asi bailamos"),u.qZA()()(),u.BQk()}if(2&n){const t=u.oxw();u.xp6(5),u.Q6J("src",t.info.portada||"https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Starsinthesky.jpg/1024px-Starsinthesky.jpg",u.LSH),u.xp6(2),u.Q6J("src",t.info.foto?t.info.foto:"https://forma-architecture.com/wp-content/uploads/2021/04/Foto-de-perfil-vacia-thegem-person.jpg",u.LSH),u.xp6(2),u.Oqu(t.usuario.displayName),u.xp6(4),u.Q6J("ngIf",t.showMoreInfo),u.xp6(2),u.Oqu(t.info.about)}}function WH(n,e){1&n&&(u.ynx(0),u.TgZ(1,"p"),u._uU(2,"No se ha iniciado sesi\xf3n."),u.qZA(),u.BQk())}const KH=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:gH},{path:"registrar",component:bH},{path:"recuperar",component:AH},{path:"main",component:rI,canActivate:[Qh]},{path:"galeria",component:J$,canActivate:[Qh]},{path:"videos",component:aH,canActivate:[Qh]},{path:"nuevo-video",component:xH,canActivate:[Qh]},{path:"musica",component:lH,canActivate:[Qh]},{path:"perfil",component:HH,canActivate:[Qh]},{path:"perfil-editar",component:zH,canActivate:[Qh]},{path:"usuario/:id",component:(()=>{class n{constructor(t,r,i,a,c,f){this.route=t,this._user=r,this.afAuth=i,this.location=a,this.toastr=c,this.router=f,this.usuariosInfo=[],this.showMoreInfo=!1,this.ver="Ver mas..."}ngOnInit(){this.afAuth.user.subscribe(t=>{this.usuario=t}),this.route.paramMap.subscribe(t=>{this.id=t.get("id"),console.log(this.id)}),this.getUsers()}getUsers(){this._user.getUsers().subscribe(t=>{this.usuariosInfo=[],t.forEach(r=>{const i={id:r.payload.doc.id,...r.payload.doc.data()};this.usuariosInfo.push(i);const a=this.usuariosInfo.find(c=>c.idUser===this.id);this.info=a})})}goBack(){this.location.back()}toggleInfo(){this.showMoreInfo=!this.showMoreInfo,this.ver=this.showMoreInfo?"Ver menos":"Ver mas..."}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"]),this.toastr.success("Gracias por visitarnos, vuelve pronto.")})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(vl),u.Y36(kw),u.Y36(ks),u.Y36(Se),u.Y36(so),u.Y36(wn))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-ver-usuario"]],decls:3,vars:2,consts:[[1,"container"],[4,"ngIf"],[2,"padding","6px","position","absolute","right","0","text-shadow","3px 1px 2px #c11b16","cursor","pointer","color","white",3,"click"],[1,"user-info"],[1,"img-container"],["alt","",2,"width","100%","position","absolute","z-index","-1",3,"src"],[2,"padding","5px"],["alt","Foto de perfil","width","70","height","70",2,"cursor","pointer","user-select","none",3,"src"],[1,"lap","user"],[1,"edit-perfil",3,"click"],["style","display: flex; flex-direction: column; align-items: center",4,"ngIf"],[1,"lap"],[1,"acciones"],[2,"padding","20px"],[1,"container-img-g"],[1,"bf"],["routerLink","/main","width","120","src","https://firebasestorage.googleapis.com/v0/b/fitpal-horario.appspot.com/o/fondos%2Ffondo%20asi%20somos.png?alt=media&token=023a7ed4-800e-465e-b616-20ce4df7c7ba","alt","",2,"cursor","pointer"],[2,"display","flex","flex-direction","column","align-items","center"],[1,"lap","email"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,ZH,29,5,"ng-container",1),u.YNc(2,WH,3,0,"ng-container",1),u.qZA()),2&t&&(u.xp6(1),u.Q6J("ngIf",r.usuario),u.xp6(1),u.Q6J("ngIf",!r.usuario))},dependencies:[Tn,gu],styles:[".img-container[_ngcontent-%COMP%]{gap:1rem;border-radius:12px;display:flex;height:18vh;align-items:flex-end;box-shadow:0 0 12px #000}.user-info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:13px}.lap[_ngcontent-%COMP%]{border-radius:7px;background:linear-gradient(to bottom right,#242624,#91a7b8);color:#fff;text-align:center;margin:3px}.acciones[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.acciones[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;border-radius:17px;padding:6px 27px;background:linear-gradient(to bottom right,#242624,#91a7b8)}.container-img-g[_ngcontent-%COMP%]{text-align:center;width:135px}.bf[_ngcontent-%COMP%]{border-radius:7px;padding:7px;background-color:bisque}.user[_ngcontent-%COMP%]{color:#fff;margin:0;font-weight:600}.edit-perfil[_ngcontent-%COMP%]{border-radius:22px;padding:5px 22px;background-color:#fff;color:#000;cursor:pointer}.edit-perfil[_ngcontent-%COMP%]:hover{color:red;cursor:pointer}"]}),n})(),canActivate:[Qh]},{path:"**",redirectTo:"/",pathMatch:"full"}];let YH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bC.forRoot(KH),bC]}),n})(),QH=(()=>{class n{constructor(){this.title="asi-somos-asi-bailamos"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[sv]}),n})();const eR_firebase={apiKey:"AIzaSyC-xnNzaTCFveAr77Iqf1CQ-wRct6kCBkQ",authDomain:"fitpal-horario.firebaseapp.com",projectId:"fitpal-horario",storageBucket:"fitpal-horario.appspot.com",messagingSenderId:"240368209776",appId:"1:240368209776:web:7b2960966943d391e049b5"};let JH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[QH]}),n.\u0275inj=u.cJS({imports:[Wa,YH,dD,Jw,iA,zi.hO.initializeApp(eR_firebase),SC(()=>wS(eR_firebase)),HU(()=>zU()),Bm,e0.forRoot({timeOut:4e3,positionClass:"toast-bottom-right",preventDuplicates:!0})]}),n})();(0,u.G48)(),cc().bootstrapModule(JH).catch(n=>console.error(n))},9751:(bt,Ne,U)=>{U.d(Ne,{y:()=>ve});var u=U(2961),$=U(727),O=U(8822),ie=U(9635),ce=U(2416),_e=U(576),pe=U(2806);let ve=(()=>{class J{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const De=new J;return De.source=this,De.operator=ke,De}subscribe(ke,De,it){const Ee=function z(J){return J&&J instanceof u.Lv||function Z(J){return J&&(0,_e.m)(J.next)&&(0,_e.m)(J.error)&&(0,_e.m)(J.complete)}(J)&&(0,$.Nn)(J)}(ke)?ke:new u.Hp(ke,De,it);return(0,pe.x)(()=>{const{operator:ye,source:yt}=this;Ee.add(ye?ye.call(Ee,yt):yt?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(ke){try{return this._subscribe(ke)}catch(De){ke.error(De)}}forEach(ke,De){return new(De=we(De))((it,Ee)=>{const ye=new u.Hp({next:yt=>{try{ke(yt)}catch(pt){Ee(pt),ye.unsubscribe()}},error:Ee,complete:it});this.subscribe(ye)})}_subscribe(ke){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(ke)}[O.L](){return this}pipe(...ke){return(0,ie.U)(ke)(this)}toPromise(ke){return new(ke=we(ke))((De,it)=>{let Ee;this.subscribe(ye=>Ee=ye,ye=>it(ye),()=>De(Ee))})}}return J.create=He=>new J(He),J})();function we(J){var He;return null!==(He=J??ce.v.Promise)&&void 0!==He?He:Promise}},7579:(bt,Ne,U)=>{U.d(Ne,{x:()=>pe});var u=U(9751),$=U(727);const ie=(0,U(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=U(8737),_e=U(2806);let pe=(()=>{class we extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const J=new ve(this,this);return J.operator=z,J}_throwIfClosed(){if(this.closed)throw new ie}next(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(z)}})}error(z){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:J}=this;for(;J.length;)J.shift().error(z)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:J,isStopped:He,observers:ke}=this;return J||He?$.Lc:(this.currentObservers=null,ke.push(z),new $.w0(()=>{this.currentObservers=null,(0,ce.P)(ke,z)}))}_checkFinalizedStatuses(z){const{hasError:J,thrownError:He,isStopped:ke}=this;J?z.error(He):ke&&z.complete()}asObservable(){const z=new u.y;return z.source=this,z}}return we.create=(Z,z)=>new ve(Z,z),we})();class ve extends pe{constructor(Z,z){super(),this.destination=Z,this.source=z}next(Z){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===J||J.call(z,Z)}error(Z){var z,J;null===(J=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===J||J.call(z,Z)}complete(){var Z,z;null===(z=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===z||z.call(Z)}_subscribe(Z){var z,J;return null!==(J=null===(z=this.source)||void 0===z?void 0:z.subscribe(Z))&&void 0!==J?J:$.Lc}}},2961:(bt,Ne,U)=>{U.d(Ne,{Hp:()=>it,Lv:()=>J});var u=U(576),$=U(727),O=U(2416),ie=U(7849);function ce(){}const _e=we("C",void 0,void 0);function we(Se,Ie,xe){return{kind:Se,value:Ie,error:xe}}var Z=U(3410),z=U(2806);class J extends $.w0{constructor(Ie){super(),this.isStopped=!1,Ie?(this.destination=Ie,(0,$.Nn)(Ie)&&Ie.add(this)):this.destination=pt}static create(Ie,xe,ze){return new it(Ie,xe,ze)}next(Ie){this.isStopped?yt(function ve(Se){return we("N",Se,void 0)}(Ie),this):this._next(Ie)}error(Ie){this.isStopped?yt(function pe(Se){return we("E",void 0,Se)}(Ie),this):(this.isStopped=!0,this._error(Ie))}complete(){this.isStopped?yt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ie){this.destination.next(Ie)}_error(Ie){try{this.destination.error(Ie)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function ke(Se,Ie){return He.call(Se,Ie)}class De{constructor(Ie){this.partialObserver=Ie}next(Ie){const{partialObserver:xe}=this;if(xe.next)try{xe.next(Ie)}catch(ze){Ee(ze)}}error(Ie){const{partialObserver:xe}=this;if(xe.error)try{xe.error(Ie)}catch(ze){Ee(ze)}else Ee(Ie)}complete(){const{partialObserver:Ie}=this;if(Ie.complete)try{Ie.complete()}catch(xe){Ee(xe)}}}class it extends J{constructor(Ie,xe,ze){let qe;if(super(),(0,u.m)(Ie)||!Ie)qe={next:Ie??void 0,error:xe??void 0,complete:ze??void 0};else{let le;this&&O.v.useDeprecatedNextContext?(le=Object.create(Ie),le.unsubscribe=()=>this.unsubscribe(),qe={next:Ie.next&&ke(Ie.next,le),error:Ie.error&&ke(Ie.error,le),complete:Ie.complete&&ke(Ie.complete,le)}):qe=Ie}this.destination=new De(qe)}}function Ee(Se){O.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Se):(0,ie.h)(Se)}function yt(Se,Ie){const{onStoppedNotification:xe}=O.v;xe&&Z.z.setTimeout(()=>xe(Se,Ie))}const pt={closed:!0,next:ce,error:function ye(Se){throw Se},complete:ce}},727:(bt,Ne,U)=>{U.d(Ne,{Lc:()=>_e,w0:()=>ce,Nn:()=>pe});var u=U(576);const O=(0,U(3888).d)(we=>function(z){we(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((J,He)=>`${He+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ie=U(8737);class ce{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const ke of z)ke.remove(this);else z.remove(this);const{initialTeardown:J}=this;if((0,u.m)(J))try{J()}catch(ke){Z=ke instanceof O?ke.errors:[ke]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const ke of He)try{ve(ke)}catch(De){Z=Z??[],De instanceof O?Z=[...Z,...De.errors]:Z.push(De)}}if(Z)throw new O(Z)}}add(Z){var z;if(Z&&Z!==this)if(this.closed)ve(Z);else{if(Z instanceof ce){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(Z)}}_hasParent(Z){const{_parentage:z}=this;return z===Z||Array.isArray(z)&&z.includes(Z)}_addParent(Z){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(Z),z):z?[z,Z]:Z}_removeParent(Z){const{_parentage:z}=this;z===Z?this._parentage=null:Array.isArray(z)&&(0,ie.P)(z,Z)}remove(Z){const{_finalizers:z}=this;z&&(0,ie.P)(z,Z),Z instanceof ce&&Z._removeParent(this)}}ce.EMPTY=(()=>{const we=new ce;return we.closed=!0,we})();const _e=ce.EMPTY;function pe(we){return we instanceof ce||we&&"closed"in we&&(0,u.m)(we.remove)&&(0,u.m)(we.add)&&(0,u.m)(we.unsubscribe)}function ve(we){(0,u.m)(we)?we():we.unsubscribe()}},2416:(bt,Ne,U)=>{U.d(Ne,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Ne,U)=>{U.d(Ne,{E:()=>$});const $=new(U(9751).y)(ce=>ce.complete())},8996:(bt,Ne,U)=>{U.d(Ne,{D:()=>Ie});var u=U(8421),$=U(5363),O=U(9468),_e=U(9751),ve=U(2202),we=U(576),Z=U(9672);function J(xe,ze){if(!xe)throw new Error("Iterable cannot be null");return new _e.y(qe=>{(0,Z.f)(qe,ze,()=>{const le=xe[Symbol.asyncIterator]();(0,Z.f)(qe,ze,()=>{le.next().then(Qe=>{Qe.done?qe.complete():qe.next(Qe.value)})},0,!0)})})}var He=U(3670),ke=U(8239),De=U(1144),it=U(6495),Ee=U(2206),ye=U(4532),yt=U(3260);function Ie(xe,ze){return ze?function Se(xe,ze){if(null!=xe){if((0,He.c)(xe))return function ie(xe,ze){return(0,u.Xf)(xe).pipe((0,O.R)(ze),(0,$.Q)(ze))}(xe,ze);if((0,De.z)(xe))return function pe(xe,ze){return new _e.y(qe=>{let le=0;return ze.schedule(function(){le===xe.length?qe.complete():(qe.next(xe[le++]),qe.closed||this.schedule())})})}(xe,ze);if((0,ke.t)(xe))return function ce(xe,ze){return(0,u.Xf)(xe).pipe((0,O.R)(ze),(0,$.Q)(ze))}(xe,ze);if((0,Ee.D)(xe))return J(xe,ze);if((0,it.T)(xe))return function z(xe,ze){return new _e.y(qe=>{let le;return(0,Z.f)(qe,ze,()=>{le=xe[ve.h](),(0,Z.f)(qe,ze,()=>{let Qe,St;try{({value:Qe,done:St}=le.next())}catch(gt){return void qe.error(gt)}St?qe.complete():qe.next(Qe)},0,!0)}),()=>(0,we.m)(le?.return)&&le.return()})}(xe,ze);if((0,yt.L)(xe))return function pt(xe,ze){return J((0,yt.Q)(xe),ze)}(xe,ze)}throw(0,ye.z)(xe)}(xe,ze):(0,u.Xf)(xe)}},8421:(bt,Ne,U)=>{U.d(Ne,{Xf:()=>He});var u=U(7582),$=U(1144),O=U(8239),ie=U(9751),ce=U(3670),_e=U(2206),pe=U(4532),ve=U(6495),we=U(3260),Z=U(576),z=U(7849),J=U(8822);function He(Se){if(Se instanceof ie.y)return Se;if(null!=Se){if((0,ce.c)(Se))return function ke(Se){return new ie.y(Ie=>{const xe=Se[J.L]();if((0,Z.m)(xe.subscribe))return xe.subscribe(Ie);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,$.z)(Se))return function De(Se){return new ie.y(Ie=>{for(let xe=0;xe<Se.length&&!Ie.closed;xe++)Ie.next(Se[xe]);Ie.complete()})}(Se);if((0,O.t)(Se))return function it(Se){return new ie.y(Ie=>{Se.then(xe=>{Ie.closed||(Ie.next(xe),Ie.complete())},xe=>Ie.error(xe)).then(null,z.h)})}(Se);if((0,_e.D)(Se))return ye(Se);if((0,ve.T)(Se))return function Ee(Se){return new ie.y(Ie=>{for(const xe of Se)if(Ie.next(xe),Ie.closed)return;Ie.complete()})}(Se);if((0,we.L)(Se))return function yt(Se){return ye((0,we.Q)(Se))}(Se)}throw(0,pe.z)(Se)}function ye(Se){return new ie.y(Ie=>{(function pt(Se,Ie){var xe,ze,qe,le;return(0,u.mG)(this,void 0,void 0,function*(){try{for(xe=(0,u.KL)(Se);!(ze=yield xe.next()).done;)if(Ie.next(ze.value),Ie.closed)return}catch(Qe){qe={error:Qe}}finally{try{ze&&!ze.done&&(le=xe.return)&&(yield le.call(xe))}finally{if(qe)throw qe.error}}Ie.complete()})})(Se,Ie).catch(xe=>Ie.error(xe))})}},6451:(bt,Ne,U)=>{U.d(Ne,{T:()=>_e});var u=U(8189),$=U(8421),O=U(515),ie=U(7669),ce=U(8996);function _e(...pe){const ve=(0,ie.yG)(pe),we=(0,ie._6)(pe,1/0),Z=pe;return Z.length?1===Z.length?(0,$.Xf)(Z[0]):(0,u.J)(we)((0,ce.D)(Z,ve)):O.E}},5403:(bt,Ne,U)=>{U.d(Ne,{x:()=>$});var u=U(2961);function $(ie,ce,_e,pe,ve){return new O(ie,ce,_e,pe,ve)}class O extends u.Lv{constructor(ce,_e,pe,ve,we,Z){super(ce),this.onFinalize=we,this.shouldUnsubscribe=Z,this._next=_e?function(z){try{_e(z)}catch(J){ce.error(J)}}:super._next,this._error=ve?function(z){try{ve(z)}catch(J){ce.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(z){ce.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},4004:(bt,Ne,U)=>{U.d(Ne,{U:()=>O});var u=U(4482),$=U(5403);function O(ie,ce){return(0,u.e)((_e,pe)=>{let ve=0;_e.subscribe((0,$.x)(pe,we=>{pe.next(ie.call(ce,we,ve++))}))})}},8189:(bt,Ne,U)=>{U.d(Ne,{J:()=>O});var u=U(5577),$=U(4671);function O(ie=1/0){return(0,u.z)($.y,ie)}},5577:(bt,Ne,U)=>{U.d(Ne,{z:()=>ve});var u=U(4004),$=U(8421),O=U(4482),ie=U(9672),ce=U(5403),pe=U(576);function ve(we,Z,z=1/0){return(0,pe.m)(Z)?ve((J,He)=>(0,u.U)((ke,De)=>Z(J,ke,He,De))((0,$.Xf)(we(J,He))),z):("number"==typeof Z&&(z=Z),(0,O.e)((J,He)=>function _e(we,Z,z,J,He,ke,De,it){const Ee=[];let ye=0,yt=0,pt=!1;const Se=()=>{pt&&!Ee.length&&!ye&&Z.complete()},Ie=ze=>ye<J?xe(ze):Ee.push(ze),xe=ze=>{ke&&Z.next(ze),ye++;let qe=!1;(0,$.Xf)(z(ze,yt++)).subscribe((0,ce.x)(Z,le=>{He?.(le),ke?Ie(le):Z.next(le)},()=>{qe=!0},void 0,()=>{if(qe)try{for(ye--;Ee.length&&ye<J;){const le=Ee.shift();De?(0,ie.f)(Z,De,()=>xe(le)):xe(le)}Se()}catch(le){Z.error(le)}}))};return we.subscribe((0,ce.x)(Z,Ie,()=>{pt=!0,Se()})),()=>{it?.()}}(J,He,we,z)))}},5363:(bt,Ne,U)=>{U.d(Ne,{Q:()=>ie});var u=U(9672),$=U(4482),O=U(5403);function ie(ce,_e=0){return(0,$.e)((pe,ve)=>{pe.subscribe((0,O.x)(ve,we=>(0,u.f)(ve,ce,()=>ve.next(we),_e),()=>(0,u.f)(ve,ce,()=>ve.complete(),_e),we=>(0,u.f)(ve,ce,()=>ve.error(we),_e)))})}},3099:(bt,Ne,U)=>{U.d(Ne,{B:()=>ce});var u=U(8421),$=U(7579),O=U(2961),ie=U(4482);function ce(pe={}){const{connector:ve=(()=>new $.x),resetOnError:we=!0,resetOnComplete:Z=!0,resetOnRefCountZero:z=!0}=pe;return J=>{let He,ke,De,it=0,Ee=!1,ye=!1;const yt=()=>{ke?.unsubscribe(),ke=void 0},pt=()=>{yt(),He=De=void 0,Ee=ye=!1},Se=()=>{const Ie=He;pt(),Ie?.unsubscribe()};return(0,ie.e)((Ie,xe)=>{it++,!ye&&!Ee&&yt();const ze=De=De??ve();xe.add(()=>{it--,0===it&&!ye&&!Ee&&(ke=_e(Se,z))}),ze.subscribe(xe),!He&&it>0&&(He=new O.Hp({next:qe=>ze.next(qe),error:qe=>{ye=!0,yt(),ke=_e(pt,we,qe),ze.error(qe)},complete:()=>{Ee=!0,yt(),ke=_e(pt,Z),ze.complete()}}),(0,u.Xf)(Ie).subscribe(He))})(J)}}function _e(pe,ve,...we){if(!0===ve)return void pe();if(!1===ve)return;const Z=new O.Hp({next:()=>{Z.unsubscribe(),pe()}});return ve(...we).subscribe(Z)}},9468:(bt,Ne,U)=>{U.d(Ne,{R:()=>$});var u=U(4482);function $(O,ie=0){return(0,u.e)((ce,_e)=>{_e.add(O.schedule(()=>ce.subscribe(_e),ie))})}},8505:(bt,Ne,U)=>{U.d(Ne,{b:()=>ce});var u=U(576),$=U(4482),O=U(5403),ie=U(4671);function ce(_e,pe,ve){const we=(0,u.m)(_e)||pe||ve?{next:_e,error:pe,complete:ve}:_e;return we?(0,$.e)((Z,z)=>{var J;null===(J=we.subscribe)||void 0===J||J.call(we);let He=!0;Z.subscribe((0,O.x)(z,ke=>{var De;null===(De=we.next)||void 0===De||De.call(we,ke),z.next(ke)},()=>{var ke;He=!1,null===(ke=we.complete)||void 0===ke||ke.call(we),z.complete()},ke=>{var De;He=!1,null===(De=we.error)||void 0===De||De.call(we,ke),z.error(ke)},()=>{var ke,De;He&&(null===(ke=we.unsubscribe)||void 0===ke||ke.call(we)),null===(De=we.finalize)||void 0===De||De.call(we)}))}):ie.y}},4408:(bt,Ne,U)=>{U.d(Ne,{o:()=>ce});var u=U(727);class $ extends u.w0{constructor(pe,ve){super()}schedule(pe,ve=0){return this}}const O={setInterval(_e,pe,...ve){const{delegate:we}=O;return we?.setInterval?we.setInterval(_e,pe,...ve):setInterval(_e,pe,...ve)},clearInterval(_e){const{delegate:pe}=O;return(pe?.clearInterval||clearInterval)(_e)},delegate:void 0};var ie=U(8737);class ce extends ${constructor(pe,ve){super(pe,ve),this.scheduler=pe,this.work=ve,this.pending=!1}schedule(pe,ve=0){var we;if(this.closed)return this;this.state=pe;const Z=this.id,z=this.scheduler;return null!=Z&&(this.id=this.recycleAsyncId(z,Z,ve)),this.pending=!0,this.delay=ve,this.id=null!==(we=this.id)&&void 0!==we?we:this.requestAsyncId(z,this.id,ve),this}requestAsyncId(pe,ve,we=0){return O.setInterval(pe.flush.bind(pe,this),we)}recycleAsyncId(pe,ve,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(pe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(pe,ve);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ve){let Z,we=!1;try{this.work(pe)}catch(z){we=!0,Z=z||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ve}=this,{actions:we}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ie.P)(we,this),null!=pe&&(this.id=this.recycleAsyncId(ve,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Ne,U)=>{U.d(Ne,{v:()=>O});var u=U(6063);class ${constructor(ce,_e=$.now){this.schedulerActionCtor=ce,this.now=_e}schedule(ce,_e=0,pe){return new this.schedulerActionCtor(this,ce).schedule(pe,_e)}}$.now=u.l.now;class O extends ${constructor(ce,_e=$.now){super(ce,_e),this.actions=[],this._active=!1}flush(ce){const{actions:_e}=this;if(this._active)return void _e.push(ce);let pe;this._active=!0;do{if(pe=ce.execute(ce.state,ce.delay))break}while(ce=_e.shift());if(this._active=!1,pe){for(;ce=_e.shift();)ce.unsubscribe();throw pe}}}},4986:(bt,Ne,U)=>{U.d(Ne,{z:()=>O});var u=U(4408);const O=new(U(7565).v)(u.o)},6063:(bt,Ne,U)=>{U.d(Ne,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(bt,Ne,U)=>{U.d(Ne,{z:()=>u});const u={setTimeout($,O,...ie){const{delegate:ce}=u;return ce?.setTimeout?ce.setTimeout($,O,...ie):setTimeout($,O,...ie)},clearTimeout($){const{delegate:O}=u;return(O?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(bt,Ne,U)=>{U.d(Ne,{h:()=>$});const $=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Ne,U)=>{U.d(Ne,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Ne,U)=>{U.d(Ne,{_6:()=>_e,jO:()=>ie,yG:()=>ce});var u=U(576);function O(pe){return pe[pe.length-1]}function ie(pe){return(0,u.m)(O(pe))?pe.pop():void 0}function ce(pe){return function $(pe){return pe&&(0,u.m)(pe.schedule)}(O(pe))?pe.pop():void 0}function _e(pe,ve){return"number"==typeof O(pe)?pe.pop():ve}},8737:(bt,Ne,U)=>{function u($,O){if($){const ie=$.indexOf(O);0<=ie&&$.splice(ie,1)}}U.d(Ne,{P:()=>u})},3888:(bt,Ne,U)=>{function u($){const ie=$(ce=>{Error.call(ce),ce.stack=(new Error).stack});return ie.prototype=Object.create(Error.prototype),ie.prototype.constructor=ie,ie}U.d(Ne,{d:()=>u})},2806:(bt,Ne,U)=>{U.d(Ne,{O:()=>ie,x:()=>O});var u=U(2416);let $=null;function O(ce){if(u.v.useDeprecatedSynchronousErrorHandling){const _e=!$;if(_e&&($={errorThrown:!1,error:null}),ce(),_e){const{errorThrown:pe,error:ve}=$;if($=null,pe)throw ve}}else ce()}function ie(ce){u.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ce)}},9672:(bt,Ne,U)=>{function u($,O,ie,ce=0,_e=!1){const pe=O.schedule(function(){ie(),_e?$.add(this.schedule(null,ce)):this.unsubscribe()},ce);if($.add(pe),!_e)return pe}U.d(Ne,{f:()=>u})},4671:(bt,Ne,U)=>{function u($){return $}U.d(Ne,{y:()=>u})},1144:(bt,Ne,U)=>{U.d(Ne,{z:()=>u});const u=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(bt,Ne,U)=>{U.d(Ne,{D:()=>$});var u=U(576);function $(O){return Symbol.asyncIterator&&(0,u.m)(O?.[Symbol.asyncIterator])}},576:(bt,Ne,U)=>{function u($){return"function"==typeof $}U.d(Ne,{m:()=>u})},3670:(bt,Ne,U)=>{U.d(Ne,{c:()=>O});var u=U(8822),$=U(576);function O(ie){return(0,$.m)(ie[u.L])}},6495:(bt,Ne,U)=>{U.d(Ne,{T:()=>O});var u=U(2202),$=U(576);function O(ie){return(0,$.m)(ie?.[u.h])}},8239:(bt,Ne,U)=>{U.d(Ne,{t:()=>$});var u=U(576);function $(O){return(0,u.m)(O?.then)}},3260:(bt,Ne,U)=>{U.d(Ne,{L:()=>ie,Q:()=>O});var u=U(7582),$=U(576);function O(ce){return(0,u.FC)(this,arguments,function*(){const pe=ce.getReader();try{for(;;){const{value:ve,done:we}=yield(0,u.qq)(pe.read());if(we)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ve)}}finally{pe.releaseLock()}})}function ie(ce){return(0,$.m)(ce?.getReader)}},4482:(bt,Ne,U)=>{U.d(Ne,{A:()=>$,e:()=>O});var u=U(576);function $(ie){return(0,u.m)(ie?.lift)}function O(ie){return ce=>{if($(ce))return ce.lift(function(_e){try{return ie(_e,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(bt,Ne,U)=>{U.d(Ne,{U:()=>O,z:()=>$});var u=U(4671);function $(...ie){return O(ie)}function O(ie){return 0===ie.length?u.y:1===ie.length?ie[0]:function(_e){return ie.reduce((pe,ve)=>ve(pe),_e)}}},7849:(bt,Ne,U)=>{U.d(Ne,{h:()=>O});var u=U(2416),$=U(3410);function O(ie){$.z.setTimeout(()=>{const{onUnhandledError:ce}=u.v;if(!ce)throw ie;ce(ie)})}},4532:(bt,Ne,U)=>{function u($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ne,{z:()=>u})},4650:(bt,Ne,U)=>{U.d(Ne,{$8M:()=>Ld,$Z:()=>RE,AFp:()=>KC,AaK:()=>ve,AsE:()=>ip,BQk:()=>_l,CHM:()=>Ql,CRH:()=>Fm,CZH:()=>jm,CqO:()=>Gc,D6c:()=>Nx,EJc:()=>ix,EiD:()=>X_,EpF:()=>Ky,F4k:()=>Yy,FYo:()=>RD,FiY:()=>Is,G48:()=>vk,GfV:()=>Pg,Gpc:()=>z,JOm:()=>kr,JVY:()=>K_,KtG:()=>Pu,L6k:()=>$w,LAX:()=>Gw,LFG:()=>ar,LSH:()=>ey,Lbi:()=>tx,Lck:()=>fS,MAs:()=>Xf,MMx:()=>ln,NdJ:()=>Qy,OlP:()=>mn,Oqu:()=>Ub,PXZ:()=>fk,Q6J:()=>zy,QGY:()=>om,QP$:()=>be,QbO:()=>nx,Qsj:()=>kD,R0b:()=>No,RDi:()=>iD,Rgc:()=>gp,SBq:()=>Pf,Sil:()=>ox,Suo:()=>Bv,TTD:()=>$l,TgZ:()=>Zy,Tol:()=>dm,Udp:()=>yh,VKq:()=>Xc,X6Q:()=>yk,XFs:()=>lt,Xpm:()=>kn,Xts:()=>iE,Y36:()=>cu,YKP:()=>DC,YNc:()=>pb,Yjl:()=>F,Yz7:()=>Me,Z0I:()=>Pt,ZZ4:()=>h0,_Bn:()=>TC,_UZ:()=>Wy,_Vd:()=>Mf,_c5:()=>pI,_uU:()=>IA,aQg:()=>qm,c2e:()=>rx,cJS:()=>Dt,cg1:()=>lp,d8E:()=>uv,dDg:()=>ck,dqk:()=>tn,eBb:()=>Hw,eFA:()=>gx,ekj:()=>cm,eoX:()=>Gm,f3M:()=>mc,g9A:()=>QC,h0i:()=>mu,hGG:()=>kx,hij:()=>ov,iGM:()=>Ep,ifc:()=>It,ip1:()=>WC,jDz:()=>wl,kL8:()=>mm,lG2:()=>H,lqb:()=>Oc,lri:()=>Hm,mCW:()=>Tg,n5z:()=>qa,oAB:()=>yr,oJD:()=>fD,oxw:()=>yb,pB0:()=>kc,q3G:()=>Fr,q4F:()=>su,qLn:()=>gi,qOj:()=>no,qZA:()=>sm,qzn:()=>th,rWj:()=>n0,sBO:()=>wk,sIi:()=>Yf,s_b:()=>km,soG:()=>Jv,tb:()=>JC,tp0:()=>Jo,uIk:()=>jy,vHH:()=>De,vpe:()=>_a,wAp:()=>Ut,xp6:()=>au,ynx:()=>ml,z2F:()=>o0,z3N:()=>la,zSh:()=>ny,zs3:()=>Lc});var u=U(7579),$=U(727),O=U(9751),ie=U(6451),ce=U(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function pe(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Z=_e({__forward_ref__:_e});function z(s){return s.__forward_ref__=z,s.toString=function(){return ve(this())},s}function J(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===z}class De extends Error{constructor(o,l){super(function it(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,l)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s,o){throw new De(-201,!1)}function se(s,o){null==s&&function te(s,o,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function Me(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Dt(s){return{providers:s.providers||[],imports:s.imports||[]}}function en(s){return rn(s,xn)||rn(s,gr)}function Pt(s){return null!==en(s)}function rn(s,o){return s.hasOwnProperty(o)?s[o]:null}function Qn(s){return s&&(s.hasOwnProperty(Bn)||s.hasOwnProperty(wi))?s[Bn]:null}const xn=_e({\u0275prov:_e}),Bn=_e({\u0275inj:_e}),gr=_e({ngInjectableDef:_e}),wi=_e({ngInjectorDef:_e});var lt=(()=>((lt=lt||{})[lt.Default=0]="Default",lt[lt.Host=1]="Host",lt[lt.Self=2]="Self",lt[lt.SkipSelf=4]="SkipSelf",lt[lt.Optional=8]="Optional",lt))();let mr;function qn(s){const o=mr;return mr=s,o}function Fi(s,o,l){const d=en(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&lt.Optional?null:void 0!==o?o:void Ie(ve(s))}function Nn(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),It=(()=>{return(s=It||(It={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",It;var s})();const tn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),rr={},xt=[],Zn=_e({\u0275cmp:_e}),Zt=_e({\u0275dir:_e}),ts=_e({\u0275pipe:_e}),sn=_e({\u0275mod:_e}),jn=_e({\u0275fac:_e}),bn=_e({__NG_ELEMENT_ID__:_e});let Xn=0;function kn(s){return Nn(()=>{const l=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||xt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||It.Emulated,id:"c"+Xn++,styles:s.styles||xt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,y=s.features;return h.inputs=G(s.inputs,d),h.outputs=G(s.outputs),y&&y.forEach(C=>C(h)),h.directiveDefs=g?()=>("function"==typeof g?g():g).map(er).filter(Ei):null,h.pipeDefs=g?()=>("function"==typeof g?g():g).map(Y).filter(Ei):null,h})}function er(s){return N(s)||R(s)}function Ei(s){return null!==s}function yr(s){return Nn(()=>({type:s.type,bootstrap:s.bootstrap||xt,declarations:s.declarations||xt,imports:s.imports||xt,exports:s.exports||xt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function G(s,o){if(null==s)return rr;const l={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),l[h]=d,o&&(o[h]=g)}return l}const H=kn;function F(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function N(s){return s[Zn]||null}function R(s){return s[Zt]||null}function Y(s){return s[ts]||null}function be(s){const o=N(s)||R(s)||Y(s);return null!==o&&o.standalone}function Ke(s,o){const l=s[sn]||null;if(!l&&!0===o)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return l}function Ir(s){return Array.isArray(s)&&"object"==typeof s[1]}function Gr(s){return Array.isArray(s)&&!0===s[1]}function Da(s){return 0!=(8&s.flags)}function vs(s){return 2==(2&s.flags)}function Aa(s){return 1==(1&s.flags)}function bi(s){return null!==s.template}function Sa(s){return 0!=(256&s[2])}function fo(s,o){return s.hasOwnProperty(jn)?s[jn]:null}class ns{constructor(o,l,d){this.previousValue=o,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function $l(){return Tu}function Tu(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ma),Hl}function Hl(){const s=Gl(this),o=s?.current;if(o){const l=s.previous;if(l===rr)s.previous=o;else for(let d in o)l[d]=o[d];s.current=null,this.ngOnChanges(o)}}function Ma(s,o,l,d){const h=Gl(s)||function Cd(s,o){return s[bd]=o}(s,{previous:rr,current:null}),g=h.current||(h.current={}),y=h.previous,C=this.declaredInputs[l],I=y[C];g[C]=new ns(I&&I.currentValue,o,y===rr),s[d]=o}$l.ngInherit=!0;const bd="__ngSimpleChanges__";function Gl(s){return s[bd]||null}function Dn(s){for(;Array.isArray(s);)s=s[0];return s}function po(s,o){return Dn(o[s])}function oi(s,o){return Dn(o[s.index])}function Zl(s,o){return s.data[o]}function Mr(s,o){const l=o[s];return Ir(l)?l:l[0]}function Au(s){return 64==(64&s[2])}function Ci(s,o){return null==o?null:s[o]}function Tr(s){s[18]=0}function jo(s,o){s[5]+=o;let l=s,d=s[3];for(;null!==d&&(1===o&&1===l[5]||-1===o&&0===l[5]);)d[5]+=o,l=d,d=d[3]}const Rt={lFrame:La(null),bindingsEnabled:!0};function xu(){return Rt.bindingsEnabled}function Pe(){return Rt.lFrame.lView}function Xt(){return Rt.lFrame.tView}function Ql(s){return Rt.lFrame.contextLView=s,s[8]}function Pu(s){return Rt.lFrame.contextLView=null,s}function Kn(){let s=Ra();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ra(){return Rt.lFrame.currentTNode}function Ii(s,o){const l=Rt.lFrame;l.currentTNode=s,l.isParent=o}function ka(){return Rt.lFrame.isParent}function Ru(){Rt.lFrame.isParent=!1}function go(){return Rt.lFrame.bindingIndex++}function li(s){const o=Rt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function Sd(s,o){const l=Rt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Oa(o)}function Oa(s){Rt.lFrame.currentDirectiveIndex=s}function Xl(s){const o=Rt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function $o(){return Rt.lFrame.currentQueryIndex}function Xr(s){Rt.lFrame.currentQueryIndex=s}function Nu(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ec(s,o,l){if(l&lt.SkipSelf){let h=o,g=s;for(;!(h=h.parent,null!==h||l&lt.Host||(h=Nu(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;o=h,s=g}const d=Rt.lFrame=Fa();return d.currentTNode=o,d.lView=s,!0}function mo(s){const o=Fa(),l=s[1];Rt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Fa(){const s=Rt.lFrame,o=null===s?null:s.child;return null===o?La(s):o}function La(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function tc(){const s=Rt.lFrame;return Rt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const xd=tc;function $s(){const s=tc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function dn(){return Rt.lFrame.selectedIndex}function _o(s){Rt.lFrame.selectedIndex=s}function Sn(){const s=Rt.lFrame;return Zl(s.tView,s.selectedIndex)}function Ua(s,o){for(let l=o.directiveStart,d=o.directiveEnd;l<d;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:S,ngOnDestroy:P}=g;y&&(s.contentHooks||(s.contentHooks=[])).push(-l,y),C&&((s.contentHooks||(s.contentHooks=[])).push(l,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),S&&((s.viewHooks||(s.viewHooks=[])).push(l,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,S)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(l,P)}}function yo(s,o,l){nc(s,o,3,l)}function Lu(s,o,l,d){(3&s[2])===l&&nc(s,o,l,d)}function Vu(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function nc(s,o,l,d){const g=d??-1,y=o.length-1;let C=0;for(let I=void 0!==d?65535&s[18]:0;I<y;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=d&&C>=d)break}else o[I]<0&&(s[18]+=65536),(C<g||-1==g)&&(af(s,l,o,I),s[18]=(4294901760&s[18])+I+2),I++}function af(s,o,l,d){const h=l[d]<0,g=l[d+1],C=s[h?-l[d]:l[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class Ho{constructor(o,l,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function ic(s,o,l){let d=0;for(;d<l.length;){const h=l[d];if("number"==typeof h){if(0!==h)break;d++;const g=l[d++],y=l[d++],C=l[d++];s.setAttribute(o,y,C,g)}else{const g=h,y=l[++d];Od(g)?s.setProperty(o,g,y):s.setAttribute(o,g,y),d++}}return d}function Bu(s){return 3===s||4===s||6===s}function Od(s){return 64===s.charCodeAt(0)}function zo(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?l=h:0===l||lf(s,l,h,null,-1===l||2===l?o[++d]:null)}}return s}function lf(s,o,l,d,h){let g=0,y=s.length;if(-1===o)y=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){y=-1;break}if(C>o){y=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===l){if(null===d)return void(null!==h&&(s[g+1]=h));if(d===s[g+1])return void(s[g+2]=h)}g++,null!==d&&g++,null!==h&&g++}-1!==y&&(s.splice(y,0,o),g=y+1),s.splice(g++,0,l),null!==d&&s.splice(g++,0,d),null!==h&&s.splice(g++,0,h)}function sc(s){return-1!==s}function Ba(s){return 32767&s}function is(s,o){let l=function cf(s){return s>>16}(s),d=o;for(;l>0;)d=d[15],l--;return d}let Hs=!0;function ci(s){const o=Hs;return Hs=s,o}let ja=0;const Bi={};function qo(s,o){const l=wo(s,o);if(-1!==l)return l;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,$a(d.data,s),$a(o,null),$a(d.blueprint,null));const h=Ha(s,o),g=s.injectorIndex;if(sc(h)){const y=Ba(h),C=is(h,o),I=C[1].data;for(let S=0;S<8;S++)o[g+S]=C[y+S]|I[y+S]}return o[g+8]=h,g}function $a(s,o){s.push(0,0,0,0,0,0,0,0,o)}function wo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ha(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,h=o;for(;null!==h;){if(d=lc(h),null===d)return-1;if(l++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function zs(s,o,l){!function $u(s,o,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(bn)&&(d=l[bn]),null==d&&(d=l[bn]=ja++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,l)}function ac(s,o,l){if(l&lt.Optional||void 0!==s)return s;Ie()}function df(s,o,l,d){if(l&lt.Optional&&void 0===d&&(d=null),0==(l&(lt.Self|lt.Host))){const h=s[9],g=qn(void 0);try{return h?h.get(o,d,l&lt.Optional):Fi(o,d,l&lt.Optional)}finally{qn(g)}}return ac(d,0,l)}function Zo(s,o,l,d=lt.Default,h){if(null!==s){if(1024&o[2]){const y=function uc(s,o,l,d,h){let g=s,y=o;for(;null!==g&&null!==y&&1024&y[2]&&!(256&y[2]);){const C=za(g,y,l,d|lt.Self,Bi);if(C!==Bi)return C;let I=g.parent;if(!I){const S=y[21];if(S){const P=S.get(l,Bi,d);if(P!==Bi)return P}I=lc(y),y=y[15]}g=I}return h}(s,o,l,d,Bi);if(y!==Bi)return y}const g=za(s,o,l,d,Bi);if(g!==Bi)return g}return df(o,l,d,h)}function za(s,o,l,d,h){const g=function ug(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(bn)?s[bn]:void 0;return"number"==typeof o?o>=0?255&o:ir:o}(l);if("function"==typeof g){if(!ec(o,s,d))return d&lt.Host?ac(h,0,d):df(o,l,d,h);try{const y=g(d);if(null!=y||d&lt.Optional)return y;Ie()}finally{xd()}}else if("number"==typeof g){let y=null,C=wo(s,o),I=-1,S=d&lt.Host?o[16][6]:null;for((-1===C||d&lt.SkipSelf)&&(I=-1===C?Ha(s,o):o[C+8],-1!==I&&Zs(d,!1)?(y=o[1],C=Ba(I),o=is(I,o)):C=-1);-1!==C;){const P=o[1];if(hf(g,C,P.data)){const B=Fd(C,o,l,y,d,S);if(B!==Bi)return B}I=o[C+8],-1!==I&&Zs(d,o[1].data[C+8]===S)&&hf(g,C,o)?(y=P,C=Ba(I),o=is(I,o)):C=-1}}return h}function Fd(s,o,l,d,h,g){const y=o[1],C=y.data[s+8],P=Wo(C,y,l,null==d?vs(C)&&Hs:d!=y&&0!=(3&C.type),h&lt.Host&&g===C);return null!==P?qs(o,y,P,C):Bi}function Wo(s,o,l,d,h){const g=s.providerIndexes,y=o.data,C=1048575&g,I=s.directiveStart,P=g>>20,K=h?C+P:s.directiveEnd;for(let ne=d?C:C+P;ne<K;ne++){const Te=y[ne];if(ne<I&&l===Te||ne>=I&&Te.type===l)return ne}if(h){const ne=y[I];if(ne&&bi(ne)&&ne.type===l)return I}return null}function qs(s,o,l,d){let h=s[l];const g=o.data;if(function Rd(s){return s instanceof Ho}(h)){const y=h;y.resolving&&function yt(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new De(-200,`Circular dependency in DI detected for ${s}${l}`)}(function ye(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(g[l]));const C=ci(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?qn(y.injectImpl):null;ec(s,d,lt.Default);try{h=s[l]=y.factory(void 0,g,s,d),o.firstCreatePass&&l>=d.directiveStart&&function Va(s,o,l){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:g}=o.type.prototype;if(d){const y=Tu(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,y),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,y)}h&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,h),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],o)}finally{null!==I&&qn(I),ci(C),y.resolving=!1,xd()}}return h}function hf(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Zs(s,o){return!(s&lt.Self||s&lt.Host&&o)}class Ko{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,d){return Zo(this._tNode,this._lView,o,d,l)}}function ir(){return new Ko(Kn(),Pe())}function qa(s){return Nn(()=>{const o=s.prototype.constructor,l=o[jn]||Za(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const g=h[jn]||Za(h);if(g&&g!==l)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Za(s){return He(s)?()=>{const o=Za(J(s));return o&&o()}:fo(s)}function lc(s){const o=s[1],l=o.type;return 2===l?o.declTNode:1===l?s[6]:null}function Ld(s){return function Ga(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const d=l.length;let h=0;for(;h<d;){const g=l[h];if(Bu(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<d&&"string"==typeof l[h];)h++;else{if(g===o)return l[h+1];h+=2}}}return null}(Kn(),s)}const Fn="__parameters__";function Ti(s,o,l){return Nn(()=>{const d=function Hu(s){return function(...l){if(s){const d=s(...l);for(const h in d)this[h]=d[h]}}}(o);function h(...g){if(this instanceof h)return d.apply(this,g),this;const y=new h(...g);return C.annotation=y,C;function C(I,S,P){const B=I.hasOwnProperty(Fn)?I[Fn]:Object.defineProperty(I,Fn,{value:[]})[Fn];for(;B.length<=P;)B.push(null);return(B[P]=B[P]||[]).push(y),I}}return l&&(h.prototype=Object.create(l.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class mn{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Me({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Dr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(o===s&&(o=s.slice(0,l)),Dr(d,o)):o!==s&&o.push(d)}return o}function ji(s,o){s.forEach(l=>Array.isArray(l)?ji(l,o):o(l))}function dc(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function Ka(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function di(s,o,l){let d=Eo(s,o);return d>=0?s[1|d]=l:(d=~d,function dg(s,o,l,d){let h=s.length;if(h==o)s.push(l,d);else if(1===h)s.push(d,s[0]),s[0]=l;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=l,s[o+1]=d}}(s,d,o,l)),d}function Ku(s,o){const l=Eo(s,o);if(l>=0)return s[1|l]}function Eo(s,o){return function fc(s,o,l){let d=0,h=s.length>>l;for(;h!==d;){const g=d+(h-d>>1),y=s[g<<l];if(o===y)return g<<l;y>o?h=g:d=g+1}return~(h<<l)}(s,o,1)}const hi={},Qa="__NG_DI_FLAG__",fi="ngTempTokenPath",zd=/\n/gm,Cs="__source";let Gn;function ht(s){const o=Gn;return Gn=s,o}function Ja(s,o=lt.Default){if(void 0===Gn)throw new De(-203,!1);return null===Gn?Fi(s,void 0,o):Gn.get(s,o&lt.Optional?null:void 0,o)}function ar(s,o=lt.Default){return(function Jn(){return mr}()||Ja)(J(s),o)}function mc(s,o=lt.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),ar(s,o)}function Qu(s){const o=[];for(let l=0;l<s.length;l++){const d=J(s[l]);if(Array.isArray(d)){if(0===d.length)throw new De(900,!1);let h,g=lt.Default;for(let y=0;y<d.length;y++){const C=d[y],I=bo(C);"number"==typeof I?-1===I?h=C.token:g|=I:h=C}o.push(ar(h,g))}else o.push(ar(d))}return o}function Ws(s,o){return s[Qa]=o,s.prototype[Qa]=o,s}function bo(s){return s[Qa]}const Is=Ws(Ti("Optional"),8),Jo=Ws(Ti("SkipSelf"),4);var kr=(()=>((kr=kr||{})[kr.Important=1]="Important",kr[kr.DashCase=2]="DashCase",kr))();const x=new Map;let V=0;const Nr="__ngContext__";function hn(s,o){Ir(o)?(s[Nr]=o[20],function X(s){x.set(s[20],s)}(o)):s[Nr]=o}function Kd(s,o){return undefined(s,o)}function Qd(s){const o=s[3];return Gr(o)?o[3]:o}function Mc(s){return p(s[13])}function v(s){return p(s[4])}function p(s){for(;null!==s&&!Gr(s);)s=s[4];return s}function b(s,o,l,d,h){if(null!=d){let g,y=!1;Gr(d)?g=d:Ir(d)&&(y=!0,d=d[0]);const C=Dn(d);0===s&&null!==l?null==h?ru(o,l,C):Io(o,l,C,h||null,!0):1===s&&null!==l?Io(o,l,C,h||null,!0):2===s?function wg(s,o,l){const d=ol(s,o);d&&function Xd(s,o,l,d){s.removeChild(o,l,d)}(s,d,o,l)}(o,C,y):3===s&&o.destroyNode(C),null!=g&&function eD(s,o,l,d,h){const g=l[7];g!==Dn(l)&&b(o,s,d,g,h);for(let C=10;C<l.length;C++){const I=l[C];To(I[1],I,s,o,d,g)}}(o,s,g,l,h)}}function de(s,o,l){return s.createElement(o,l)}function il(s,o){const l=s[9],d=l.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,jo(h,-1)),l.splice(d,1)}function Cf(s,o){if(s.length<=10)return;const l=10+o,d=s[l];if(d){const h=d[17];null!==h&&h!==s&&il(h,d),o>0&&(s[l-1][4]=d[4]);const g=Ka(s,10+o);!function Ge(s,o){To(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const y=g[19];null!==y&&y.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function sl(s,o){if(!(128&o[2])){const l=o[11];l.destroyNode&&To(s,o,l,3,null,null),function an(s){let o=s[13];if(!o)return Jd(s[1],s);for(;o;){let l=null;if(Ir(o))l=o[13];else{const d=o[10];d&&(l=d)}if(!l){for(;o&&!o[4]&&o!==s;)Ir(o)&&Jd(o[1],o),o=o[3];null===o&&(o=s),Ir(o)&&Jd(o[1],o),l=o&&o[4]}o=l}}(o)}}function Jd(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Pc(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const h=o[l[d]];if(!(h instanceof Ho)){const g=l[d+1];if(Array.isArray(g))for(let y=0;y<g.length;y+=2){const C=h[g[y]],I=g[y+1];try{I.call(C)}finally{}}else try{g.call(h)}finally{}}}}(s,o),function If(s,o){const l=s.cleanup,d=o[7];let h=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const y=l[g+1],C="function"==typeof y?y(o):Dn(o[y]),I=d[h=l[g+2]],S=l[g+3];"boolean"==typeof S?C.removeEventListener(l[g],I,S):S>=0?d[h=S]():d[h=-S].unsubscribe(),g+=2}else{const y=d[h=l[g+1]];l[g].call(y)}if(null!==d){for(let g=h+1;g<d.length;g++)(0,d[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const l=o[17];if(null!==l&&Gr(o[3])){l!==o[3]&&il(l,o);const d=o[19];null!==d&&d.detachView(s)}!function Je(s){x.delete(s[20])}(o)}}function Tf(s,o,l){return function yg(s,o,l){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return l[0];if(2&d.flags){const h=s.data[d.directiveStart].encapsulation;if(h===It.None||h===It.Emulated)return null}return oi(d,l)}(s,o.parent,l)}function Io(s,o,l,d,h){s.insertBefore(o,l,d,h)}function ru(s,o,l){s.appendChild(o,l)}function iu(s,o,l,d,h){null!==d?Io(s,o,l,d,h):ru(s,o,l)}function ol(s,o){return s.parentNode(o)}let Df,ll,Cg,QT=function B_(s,o,l){return 40&s.type?oi(s,l):null};function j_(s,o,l,d){const h=Tf(s,d,o),g=o[11],C=function Lw(s,o,l){return QT(s,o,l)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(l))for(let I=0;I<l.length;I++)iu(g,h,l[I],C,!1);else iu(g,h,l,C,!1)}function vg(s,o){if(null!==o){const l=o.type;if(3&l)return oi(o,s);if(4&l)return H_(-1,s[o.index]);if(8&l){const d=o.child;if(null!==d)return vg(s,d);{const h=s[o.index];return Gr(h)?H_(-1,h):Dn(h)}}if(32&l)return Kd(o,s)()||Dn(s[o.index]);{const d=$_(s,o);return null!==d?Array.isArray(d)?d[0]:vg(Qd(s[16]),d):vg(s,o.next)}}return null}function $_(s,o){return null!==o?s[16][6].projection[o.projection]:null}function H_(s,o){const l=10+s+1;if(l<o.length){const d=o[l],h=d[1].firstChild;if(null!==h)return vg(d,h)}return o[7]}function al(s,o,l,d,h,g,y){for(;null!=l;){const C=d[l.index],I=l.type;if(y&&0===o&&(C&&hn(Dn(C),d),l.flags|=4),64!=(64&l.flags))if(8&I)al(s,o,l.child,d,h,g,!1),b(o,s,h,C,g);else if(32&I){const S=Kd(l,d);let P;for(;P=S();)b(o,s,h,P,g);b(o,s,h,C,g)}else 16&I?Eg(s,o,d,l,h,g):b(o,s,h,C,g);l=y?l.projectionNext:l.next}}function To(s,o,l,d,h,g){al(l,d,s.firstChild,o,h,g,!1)}function Eg(s,o,l,d,h,g){const y=l[16],I=y[6].projection[d.projection];if(Array.isArray(I))for(let S=0;S<I.length;S++)b(o,s,h,I[S],g);else al(s,o,I,y[3],h,g,!0)}function G_(s,o,l){s.setAttribute(o,"style",l)}function z_(s,o,l){""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l)}function ul(s){return function q_(){if(void 0===Df&&(Df=null,tn.trustedTypes))try{Df=tn.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Df}()?.createHTML(s)||s}function iD(s){ll=s}function W_(s){return function Af(){if(void 0===Cg&&(Cg=null,tn.trustedTypes))try{Cg=tn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Cg}()?.createHTML(s)||s}class Rc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Bw extends Rc{getTypeName(){return"HTML"}}class sD extends Rc{getTypeName(){return"Style"}}class Ig extends Rc{getTypeName(){return"Script"}}class jw extends Rc{getTypeName(){return"URL"}}class oD extends Rc{getTypeName(){return"ResourceURL"}}function la(s){return s instanceof Rc?s.changingThisBreaksApplicationSecurity:s}function th(s,o){const l=function iR(s){return s instanceof Rc&&s.getTypeName()||null}(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function K_(s){return new Bw(s)}function $w(s){return new sD(s)}function Hw(s){return new Ig(s)}function Gw(s){return new jw(s)}function kc(s){return new oD(s)}class qw{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(ul(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch{return null}}}class aD{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ul(o),l;const d=this.inertDocument.createElement("body");return d.innerHTML=ul(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(o){const l=o.attributes;for(let h=l.length-1;0<h;h--){const y=l.item(h).name;("xmlns:ns1"===y||0===y.indexOf("ns1:"))&&o.removeAttribute(y)}let d=o.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const uD=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Tg(s){return(s=String(s)).match(uD)?s:"unsafe:"+s}function ls(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function nh(...s){const o={};for(const l of s)for(const d in l)l.hasOwnProperty(d)&&(o[d]=!0);return o}const Ww=ls("area,br,col,hr,img,wbr"),Y_=ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kw=ls("rp,rt"),Q_=nh(Ww,nh(Y_,ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),nh(Kw,ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nh(Kw,Y_)),Dg=ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cD=nh(Dg,ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Qw=ls("script,style,template");class dD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let h=this.checkClobberedElement(l,l.nextSibling);if(h){l=h;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Q_.hasOwnProperty(l))return this.sanitizedSomething=!0,!Qw.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=o.attributes;for(let h=0;h<d.length;h++){const g=d.item(h),y=g.name,C=y.toLowerCase();if(!cD.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let I=g.value;Dg[C]&&(I=Tg(I)),this.buf.push(" ",y,'="',hD(I),'"')}return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Q_.hasOwnProperty(l)&&!Ww.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(hD(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const Jw=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Xw=/([^\#-~ |!])/g;function hD(s){return s.replace(/&/g,"&amp;").replace(Jw,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Xw,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let J_;function X_(s,o){let l=null;try{J_=J_||function zw(s){const o=new aD(s);return function Zw(){try{return!!(new window.DOMParser).parseFromString(ul(""),"text/html")}catch{return!1}}()?new qw(o):o}(s);let d=o?String(o):"";l=J_.getInertBodyElement(d);let h=5,g=d;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,d=g,g=l.innerHTML,l=J_.getInertBodyElement(d)}while(d!==g);return ul((new dD).sanitizeChildren(Sf(l)||l))}finally{if(l){const d=Sf(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Sf(s){return"content"in s&&function oR(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Fr=(()=>((Fr=Fr||{})[Fr.NONE=0]="NONE",Fr[Fr.HTML=1]="HTML",Fr[Fr.STYLE=2]="STYLE",Fr[Fr.SCRIPT=3]="SCRIPT",Fr[Fr.URL=4]="URL",Fr[Fr.RESOURCE_URL=5]="RESOURCE_URL",Fr))();function fD(s){const o=rh();return o?W_(o.sanitize(Fr.HTML,s)||""):th(s,"HTML")?W_(la(s)):X_(function bg(){return void 0!==ll?ll:typeof document<"u"?document:void 0}(),Ee(s))}function ey(s){const o=rh();return o?o.sanitize(Fr.URL,s)||"":th(s,"URL")?la(s):Tg(Ee(s))}function rh(){const s=Pe();return s&&s[12]}const iE=new mn("ENVIRONMENT_INITIALIZER"),gD=new mn("INJECTOR",-1),mD=new mn("INJECTOR_DEF_TYPES");class _D{get(o,l=hi){if(l===hi){const d=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw d.name="NullInjectorError",d}return l}}function uR(...s){return{\u0275providers:ty(0,s)}}function ty(s,...o){const l=[],d=new Set;let h;return ji(o,g=>{const y=g;Ag(y,l,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&ih(h,l),l}function ih(s,o){for(let l=0;l<s.length;l++){const{providers:h}=s[l];ji(h,g=>{o.push(g)})}}function Ag(s,o,l,d){if(!(s=J(s)))return!1;let h=null,g=Qn(s);const y=!g&&N(s);if(g||y){if(y&&!y.standalone)return!1;h=s}else{const I=s.ngModule;if(g=Qn(I),!g)return!1;h=I}const C=d.has(h);if(y){if(C)return!1;if(d.add(h),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of I)Ag(S,o,l,d)}}else{if(!g)return!1;{if(null!=g.imports&&!C){let S;d.add(h);try{ji(g.imports,P=>{Ag(P,o,l,d)&&(S||(S=[]),S.push(P))})}finally{}void 0!==S&&ih(S,o)}if(!C){const S=fo(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:xt},{provide:mD,useValue:h,multi:!0},{provide:iE,useValue:()=>ar(h),multi:!0})}const I=g.providers;null==I||C||ji(I,P=>{o.push(P)})}}return h!==s&&void 0!==s.providers}const lR=_e({provide:String,useValue:_e});function Sg(s){return null!==s&&"object"==typeof s&&lR in s}function Nc(s){return"function"==typeof s}const ny=new mn("Set Injector scope."),xg={},vD={};let ry;function Mg(){return void 0===ry&&(ry=new _D),ry}class Oc{}class wD extends Oc{constructor(o,l,d,h){super(),this.parent=l,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sy(o,y=>this.processProvider(y)),this.records.set(gD,sh(void 0,this)),h.has("environment")&&this.records.set(Oc,sh(void 0,this));const g=this.records.get(ny);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(mD.multi,xt,lt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const l=ht(this),d=qn(void 0);try{return o()}finally{ht(l),qn(d)}}get(o,l=hi,d=lt.Default){this.assertNotDestroyed();const h=ht(this),g=qn(void 0);try{if(!(d&lt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function TD(s){return"function"==typeof s||"object"==typeof s&&s instanceof mn}(o)&&en(o);C=I&&this.injectableDefInScope(I)?sh(iy(o),xg):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(d&lt.Self?Mg():this.parent).get(o,l=d&lt.Optional&&l===hi?null:l)}catch(y){if("NullInjectorError"===y.name){if((y[fi]=y[fi]||[]).unshift(ve(o)),h)throw y;return function Pr(s,o,l,d){const h=s[fi];throw o[Cs]&&h.unshift(o[Cs]),s.message=function pg(s,o,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=ve(o);if(Array.isArray(o))h=o.map(ve).join(" -> ");else if("object"==typeof o){let g=[];for(let y in o)if(o.hasOwnProperty(y)){let C=o[y];g.push(y+":"+("string"==typeof C?JSON.stringify(C):ve(C)))}h=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${h}]: ${s.replace(zd,"\n  ")}`}("\n"+s.message,h,l,d),s.ngTokenPath=h,s[fi]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{qn(g),ht(h)}}resolveInjectorInitializers(){const o=ht(this),l=qn(void 0);try{const d=this.get(iE.multi,xt,lt.Self);for(const h of d)h()}finally{ht(o),qn(l)}}toString(){const o=[],l=this.records;for(const d of l.keys())o.push(ve(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(o){let l=Nc(o=J(o))?o:J(o&&o.provide);const d=function bD(s){return Sg(s)?sh(void 0,s.useValue):sh(uE(s),xg)}(o);if(Nc(o)||!0!==o.multi)this.records.get(l);else{let h=this.records.get(l);h||(h=sh(void 0,xg,!0),h.factory=()=>Qu(h.multi),this.records.set(l,h)),l=o,h.multi.push(o)}this.records.set(l,d)}hydrate(o,l){return l.value===xg&&(l.value=vD,l.value=l.factory()),"object"==typeof l.value&&l.value&&function ID(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=J(o.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function iy(s){const o=en(s),l=null!==o?o.factory:fo(s);if(null!==l)return l;if(s instanceof mn)throw new De(204,!1);if(s instanceof Function)return function ED(s){const o=s.length;if(o>0)throw function Wu(s,o){const l=[];for(let d=0;d<s;d++)l.push(o);return l}(o,"?"),new De(204,!1);const l=function Rn(s){const o=s&&(s[xn]||s[gr]);if(o){const l=function fn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new De(204,!1)}function uE(s,o,l){let d;if(Nc(s)){const h=J(s);return fo(h)||iy(h)}if(Sg(s))d=()=>J(s.useValue);else if(function aE(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Qu(s.deps||[]));else if(function oE(s){return!(!s||!s.useExisting)}(s))d=()=>ar(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function CD(s){return!!s.deps}(s))return fo(h)||iy(h);d=()=>new h(...Qu(s.deps))}return d}function sh(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function DD(s){return!!s.\u0275providers}function sy(s,o){for(const l of s)Array.isArray(l)?sy(l,o):DD(l)?sy(l.\u0275providers,o):o(l)}class lE{}class xD{resolveComponentFactory(o){throw function SD(s){const o=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Mf=(()=>{class s{}return s.NULL=new xD,s})();function MD(){return oh(Kn(),Pe())}function oh(s,o){return new Pf(oi(s,o))}let Pf=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=MD,s})();function PD(s){return s instanceof Pf?s.nativeElement:s}class RD{}let kD=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function ND(){const s=Pe(),l=Mr(Kn().index,s);return(Ir(l)?l:s)[11]}(),s})(),OD=(()=>{class s{}return s.\u0275prov=Me({token:s,providedIn:"root",factory:()=>null}),s})();class Pg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const su=new Pg("14.3.0"),Rg={};function kf(s){return s.ngOriginalError}class gi{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o);this._console.error("ERROR",o),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&kf(o);for(;l&&kf(l);)l=kf(l);return l||null}}function da(s){return s instanceof Function?s():s}function cy(s,o,l){let d=s.length;for(;;){const h=s.indexOf(o,l);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const g=o.length;if(h+g===d||s.charCodeAt(h+g)<=32)return h}l=h+1}}const gE="ng-template";function mE(s,o,l){let d=0;for(;d<s.length;){let h=s[d++];if(l&&"class"===h){if(h=s[d],-1!==cy(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function _E(s){return 4===s.type&&s.value!==gE}function dy(s,o,l){return o===(4!==s.type||l?s.value:gE)}function kg(s,o,l){let d=4;const h=s.attrs||[],g=function ou(s){for(let o=0;o<s.length;o++)if(Bu(s[o]))return o;return s.length}(h);let y=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!y)if(4&d){if(d=2|1&d,""!==I&&!dy(s,I,l)||""===I&&1===o.length){if(cs(d))return!1;y=!0}}else{const S=8&d?I:o[++C];if(8&d&&null!==s.attrs){if(!mE(s.attrs,S,l)){if(cs(d))return!1;y=!0}continue}const B=Ng(8&d?"class":I,h,_E(s),l);if(-1===B){if(cs(d))return!1;y=!0;continue}if(""!==S){let K;K=B>g?"":h[B+1].toLowerCase();const ne=8&d?K:null;if(ne&&-1!==cy(ne,S,0)||2&d&&S!==K){if(cs(d))return!1;y=!0}}}}else{if(!y&&!cs(d)&&!cs(I))return!1;if(y&&cs(I))continue;y=!1,d=I|1&d}}return cs(d)||y}function cs(s){return 0==(1&s)}function Ng(s,o,l,d){if(null===o)return-1;let h=0;if(d||!l){let g=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)g=!0;else{if(1===y||2===y){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=g?1:2}return-1}return function py(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===o)return l;l++}return-1}(o,s)}function hy(s,o,l=!1){for(let d=0;d<o.length;d++)if(kg(s,o[d],l))return!0;return!1}function yE(s,o){return s?":not("+o.trim()+")":o}function Nf(s){let o=s[0],l=1,d=2,h="",g=!1;for(;l<s.length;){let y=s[l];if("string"==typeof y)if(2&d){const C=s[++l];h+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!cs(y)&&(o+=yE(g,h),h=""),d=y,g=g||!cs(d);l++}return""!==h&&(o+=yE(g,h)),o}const Wt={};function au(s){gy(Xt(),Pe(),dn()+s,!1)}function gy(s,o,l,d){if(!d)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&yo(o,g,l)}else{const g=s.preOrderHooks;null!==g&&Lu(o,g,0,l)}_o(l)}function EE(s,o=null,l=null,d){const h=Lg(s,o,l,d);return h.resolveInjectorInitializers(),h}function Lg(s,o=null,l=null,d,h=new Set){const g=[l||xt,uR(s)];return d=d||("object"==typeof s?void 0:ve(s)),new wD(g,o||Mg(),d||null,h)}let Lc=(()=>{class s{static create(l,d){if(Array.isArray(l))return EE({name:""},d,l,"");{const h=l.name??"";return EE({name:h},l.parent,l.providers,h)}}}return s.THROW_IF_NOT_FOUND=hi,s.NULL=new _D,s.\u0275prov=Me({token:s,providedIn:"any",factory:()=>ar(gD)}),s.__NG_ELEMENT_ID__=-1,s})();function cu(s,o=lt.Default){const l=Pe();return null===l?ar(s,o):Zo(Kn(),l,J(s),o)}function RE(){throw new Error("invalid")}function Bg(s,o){return s<<17|o<<2}function Do(s){return s>>17&32767}function Ty(s){return 2|s}function Js(s){return(131068&s)>>2}function Lf(s,o){return-131069&s|o<<2}function Dy(s){return 1|s}function Ss(s,o){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const h=l[d],g=l[d+1];if(-1!==g){const y=s.data[g];Xr(h),y.contentQueries(2,o[g],g)}}}function Gg(s,o,l,d,h,g,y,C,I,S,P){const B=o.blueprint.slice();return B[0]=h,B[2]=76|d,(null!==P||s&&1024&s[2])&&(B[2]|=1024),Tr(B),B[3]=B[15]=s,B[8]=l,B[10]=y||s&&s[10],B[11]=C||s&&s[11],B[12]=I||s&&s[12]||null,B[9]=S||s&&s[9]||null,B[6]=g,B[20]=function W(){return V++}(),B[21]=P,B[16]=2==o.type?s[16]:B,B}function Vc(s,o,l,d,h){let g=s.data[o];if(null===g)g=function ky(s,o,l,d,h){const g=Ra(),y=ka(),I=s.data[o]=function KE(s,o,l,d,h,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?g:g&&g.parent,l,o,d,h);return null===s.firstChild&&(s.firstChild=I),null!==g&&(y?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,l,d,h),function Na(){return Rt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=h;const y=function js(){const s=Rt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===y?-1:y.injectorIndex}return Ii(g,!0),g}function Uc(s,o,l,d){if(0===l)return-1;const h=o.length;for(let g=0;g<l;g++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function ch(s,o,l){mo(o);try{const d=s.viewQuery;null!==d&&wr(1,d,l);const h=s.template;null!==h&&qE(s,o,h,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&Ss(s,o),s.staticViewQueries&&wr(2,s.viewQuery,l);const g=s.components;null!==g&&function XD(s,o){for(let l=0;l<o.length;l++)zf(s,o[l])}(o,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,$s()}}function zg(s,o,l,d){const h=o[2];if(128!=(128&h)){mo(o);try{Tr(o),function ui(s){return Rt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&qE(s,o,l,2,d);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&yo(o,S,null)}else{const S=s.preOrderHooks;null!==S&&Lu(o,S,0,null),Vu(o,0)}if(function nb(s){for(let o=Mc(s);null!==o;o=v(o)){if(!o[2])continue;const l=o[9];for(let d=0;d<l.length;d++){const h=l[d],g=h[3];0==(512&h[2])&&jo(g,1),h[2]|=512}}}(o),function Ly(s){for(let o=Mc(s);null!==o;o=v(o))for(let l=10;l<o.length;l++){const d=o[l],h=d[1];Au(d)&&zg(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&Ss(s,o),y){const S=s.contentCheckHooks;null!==S&&yo(o,S)}else{const S=s.contentHooks;null!==S&&Lu(o,S,1),Vu(o,1)}!function zE(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const h=l[d];if(h<0)_o(~h);else{const g=h,y=l[++d],C=l[++d];Sd(y,g),C(2,o[g])}}}finally{_o(-1)}}(s,o);const C=s.components;null!==C&&function lh(s,o){for(let l=0;l<o.length;l++)aA(s,o[l])}(o,C);const I=s.viewQuery;if(null!==I&&wr(2,I,d),y){const S=s.viewCheckHooks;null!==S&&yo(o,S)}else{const S=s.viewHooks;null!==S&&Lu(o,S,2),Vu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,jo(o[3],-1))}finally{$s()}}}function qE(s,o,l,d,h){const g=dn(),y=2&d;try{_o(-1),y&&o.length>22&&gy(s,o,22,!1),l(d,h)}finally{_o(g)}}function qg(s,o,l){if(Da(o)){const h=o.directiveEnd;for(let g=o.directiveStart;g<h;g++){const y=s.data[g];y.contentQueries&&y.contentQueries(1,l[g],g)}}}function Ny(s,o,l){!xu()||(function iA(s,o,l,d){const h=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||qo(l,o),hn(d,o);const y=l.initialInputs;for(let C=h;C<g;C++){const I=s.data[C],S=bi(I);S&&Hf(o,l,I);const P=qs(o,s,C,l);hn(P,o),null!==y&&oA(0,C-h,P,I,0,y),S&&(Mr(l.index,o)[8]=P)}}(s,o,l,oi(l,o)),128==(128&l.flags)&&function xR(s,o,l){const d=l.directiveStart,h=l.directiveEnd,g=l.index,y=function ku(){return Rt.lFrame.currentDirectiveIndex}();try{_o(g);for(let C=d;C<h;C++){const I=s.data[C],S=o[C];Oa(C),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&sA(I,S)}}finally{_o(-1),Oa(y)}}(s,o,l))}function Zg(s,o,l=oi){const d=o.localNames;if(null!==d){let h=o.index+1;for(let g=0;g<d.length;g+=2){const y=d[g+1],C=-1===y?l(o,s):s[y];s[h++]=C}}}function ZE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Oy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Oy(s,o,l,d,h,g,y,C,I,S){const P=22+d,B=P+h,K=function eA(s,o){const l=[];for(let d=0;d<o;d++)l.push(d<s?null:Wt);return l}(P,B),ne="function"==typeof S?S():S;return K[1]={type:s,blueprint:K,template:l,queries:null,viewQuery:C,declTNode:o,data:K.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:ne,incompleteFirstPass:!1}}function jf(s,o,l,d){const h=Zf(o);null===l?h.push(d):(h.push(l),s.firstCreatePass&&eo(s).push(d,h.length-1))}function YE(s,o,l){for(let d in s)if(s.hasOwnProperty(d)){const h=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(o,h):l[d]=[o,h]}return l}function Fy(s,o){const d=o.directiveEnd,h=s.data,g=o.attrs,y=[];let C=null,I=null;for(let S=o.directiveStart;S<d;S++){const P=h[S],B=P.inputs,K=null===g||_E(o)?null:eb(B,g);y.push(K),C=YE(B,S,C),I=YE(P.outputs,S,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=C,o.outputs=I}function xs(s,o,l,d,h,g,y,C){const I=oi(o,l);let P,S=o.inputs;!C&&null!=S&&(P=S[d])?(Xg(s,l,P,d,h),vs(o)&&QE(l,o.index)):3&o.type&&(d=function tA(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,g.setProperty(I,d,h))}function QE(s,o){const l=Mr(o,s);16&l[2]||(l[2]|=32)}function Wg(s,o,l,d){let h=!1;if(xu()){const g=function MR(s,o,l){const d=s.directiveRegistry;let h=null;if(d)for(let g=0;g<d.length;g++){const y=d[g];hy(l,y.selectors,!1)&&(h||(h=[]),zs(qo(l,o),s,y.type),bi(y)?(Et(s,l),h.unshift(y)):h.push(y))}return h}(s,o,l),y=null===d?null:{"":-1};if(null!==g){h=!0,XE(l,s.data.length,g.length);for(let P=0;P<g.length;P++){const B=g[P];B.providersResolver&&B.providersResolver(B)}let C=!1,I=!1,S=Uc(s,o,g.length,null);for(let P=0;P<g.length;P++){const B=g[P];l.mergedAttrs=zo(l.mergedAttrs,B.hostAttrs),$f(s,l,o,S,B),So(S,B,y),null!==B.contentQueries&&(l.flags|=8),(null!==B.hostBindings||null!==B.hostAttrs||0!==B.hostVars)&&(l.flags|=128);const K=B.type.prototype;!C&&(K.ngOnChanges||K.ngOnInit||K.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),C=!0),!I&&(K.ngOnChanges||K.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),S++}Fy(s,l)}y&&function Ai(s,o,l){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const g=l[o[h+1]];if(null==g)throw new De(-301,!1);d.push(o[h],g)}}}(l,d,y)}return l.mergedAttrs=zo(l.mergedAttrs,l.attrs),h}function Kg(s,o,l,d,h,g){const y=g.hostBindings;if(y){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function JE(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(C)!=I&&C.push(I),C.push(d,h,y)}}function sA(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Et(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function So(s,o,l){if(l){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)l[o.exportAs[d]]=s;bi(o)&&(l[""]=s)}}function XE(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function $f(s,o,l,d,h){s.data[d]=h;const g=h.factory||(h.factory=fo(h.type)),y=new Ho(g,bi(h),cu);s.blueprint[d]=y,l[d]=y,Kg(s,o,0,d,Uc(s,l,h.hostVars,Wt),h)}function Hf(s,o,l){const d=oi(o,s),h=ZE(l),g=s[10],y=qf(s,Gg(s,h,null,l.onPush?32:16,d,o,g,g.createRenderer(d,l),null,null,null));s[o.index]=y}function fa(s,o,l,d,h,g){const y=oi(s,o);!function Yg(s,o,l,d,h,g,y){if(null==g)s.removeAttribute(o,h,l);else{const C=null==y?Ee(g):y(g,d||"",h);s.setAttribute(o,h,C,l)}}(o[11],y,g,s.value,l,d,h)}function oA(s,o,l,d,h,g){const y=g[o];if(null!==y){const C=d.setInput;for(let I=0;I<y.length;){const S=y[I++],P=y[I++],B=y[I++];null!==C?d.setInput(l,B,S,P):l[P]=B}}}function eb(s,o){let l=null,d=0;for(;d<o.length;){const h=o[d];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===l&&(l=[]),l.push(h,s[h],o[d+1])),d+=2}else d+=2;else d+=4}return l}function tb(s,o,l,d){return new Array(s,!0,!1,o,null,0,d,l,null,null)}function aA(s,o){const l=Mr(o,s);if(Au(l)){const d=l[1];48&l[2]?zg(d,l,d.template,l[8]):l[5]>0&&Gf(l)}}function Gf(s){for(let d=Mc(s);null!==d;d=v(d))for(let h=10;h<d.length;h++){const g=d[h];if(Au(g))if(512&g[2]){const y=g[1];zg(y,g,y.template,g[8])}else g[5]>0&&Gf(g)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const h=Mr(l[d],s);Au(h)&&h[5]>0&&Gf(h)}}function zf(s,o){const l=Mr(o,s),d=l[1];(function Bc(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(d,l),ch(d,l,l[8])}function qf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ti(s){for(;s;){s[2]|=32;const o=Qd(s);if(Sa(s)&&!o)return s;s=o}return null}function dh(s,o,l,d=!0){const h=o[10];h.begin&&h.begin();try{zg(s,o,s.template,l)}catch(y){throw d&&Wf(o,y),y}finally{h.end&&h.end()}}function wr(s,o,l){Xr(0),o(s,l)}function Zf(s){return s[7]||(s[7]=[])}function eo(s){return s.cleanup||(s.cleanup=[])}function Wf(s,o){const l=s[9],d=l?l.get(gi,null):null;d&&d.handleError(o)}function Xg(s,o,l,d,h){for(let g=0;g<l.length;){const y=l[g++],C=l[g++],I=o[y],S=s.data[y];null!==S.setInput?S.setInput(I,h,d,C):I[C]=h}}function du(s,o,l){const d=po(o,s);!function k(s,o,l){s.setValue(o,l)}(s[11],d,l)}function to(s,o,l){let d=l?s.styles:null,h=l?s.classes:null,g=0;if(null!==o)for(let y=0;y<o.length;y++){const C=o[y];"number"==typeof C?g=C:1==g?h=we(h,C):2==g&&(d=we(d,C+": "+o[++y]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=h:s.classesWithoutHost=h}function pa(s,o,l,d,h=!1){for(;null!==l;){const g=o[l.index];if(null!==g&&d.push(Dn(g)),Gr(g))for(let C=10;C<g.length;C++){const I=g[C],S=I[1].firstChild;null!==S&&pa(I[1],I,S,d)}const y=l.type;if(8&y)pa(s,o,l.child,d);else if(32&y){const C=Kd(l,o);let I;for(;I=C();)d.push(I)}else if(16&y){const C=$_(o,l);if(Array.isArray(C))d.push(...C);else{const I=Qd(o[16]);pa(I[1],I,C,d,!0)}}l=h?l.projectionNext:l.next}return d}class Lr{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return pa(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Gr(o)){const l=o[8],d=l?l.indexOf(this):-1;d>-1&&(Cf(o,d),Ka(l,d))}this._attachedToViewContainer=!1}sl(this._lView[1],this._lView)}onDestroy(o){jf(this._lView[1],this._lView,null,o)}markForCheck(){ti(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){dh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function vt(s,o){To(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=o}}class dl extends Lr{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;dh(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class Vy extends Mf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=N(o);return new Kf(l,this.ngModule)}}function hh(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class rb{constructor(o,l){this.injector=o,this.parentInjector=l}get(o,l,d){const h=this.injector.get(o,Rg,d);return h!==Rg||l===Rg?h:this.parentInjector.get(o,l,d)}}class Kf extends lE{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function vE(s){return s.map(Nf).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return hh(this.componentDef.inputs)}get outputs(){return hh(this.componentDef.outputs)}create(o,l,d,h){let g=(h=h||this.ngModule)instanceof Oc?h:h?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const y=g?new rb(o,g):o,C=y.get(RD,null);if(null===C)throw new De(407,!1);const I=y.get(OD,null),S=C.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",B=d?function WE(s,o,l){return s.selectRootElement(o,l===It.ShadowDom)}(S,d,this.componentDef.encapsulation):de(S,P,function Uy(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(P)),K=this.componentDef.onPush?288:272,ne=Oy(0,null,null,1,0,null,null,null,null,null),Te=Gg(null,ne,null,K,null,null,C,S,I,y,null);let $e,Xe;mo(Te);try{const _t=function cA(s,o,l,d,h,g){const y=l[1];l[22]=s;const I=Vc(y,22,2,"#host",null),S=I.mergedAttrs=o.hostAttrs;null!==S&&(to(I,S,!0),null!==s&&(ic(h,s,S),null!==I.classes&&z_(h,s,I.classes),null!==I.styles&&G_(h,s,I.styles)));const P=d.createRenderer(s,o),B=Gg(l,ZE(o),null,o.onPush?32:16,l[22],I,d,P,g||null,null,null);return y.firstCreatePass&&(zs(qo(I,l),y,o.type),Et(y,I),XE(I,l.length,1)),qf(l,B),l[22]=B}(B,this.componentDef,Te,C,S);if(B)if(d)ic(S,B,["ng-version",su.full]);else{const{attrs:kt,classes:Fe}=function UD(s){const o=[],l=[];let d=1,h=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===h?""!==g&&o.push(g,s[++d]):8===h&&l.push(g);else{if(!cs(h))break;h=g}d++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);kt&&ic(S,B,kt),Fe&&Fe.length>0&&z_(S,B,Fe.join(" "))}if(Xe=Zl(ne,22),void 0!==l){const kt=Xe.projection=[];for(let Fe=0;Fe<this.ngContentSelectors.length;Fe++){const wt=l[Fe];kt.push(null!=wt?Array.from(wt):null)}}$e=function ph(s,o,l,d){const h=l[1],g=function rA(s,o,l){const d=Kn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),$f(s,d,o,Uc(s,o,1,null),l),Fy(s,d));const h=qs(o,s,d.directiveStart,d);hn(h,o);const g=oi(d,o);return g&&hn(g,o),h}(h,l,o);if(s[8]=l[8]=g,null!==d)for(const C of d)C(g,o);if(o.contentQueries){const C=Kn();o.contentQueries(1,g,C.directiveStart)}const y=Kn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(_o(y.index),Kg(l[1],y,0,y.directiveStart,y.directiveEnd,o),sA(o,g)),g}(_t,this.componentDef,Te,[dA]),ch(ne,Te,null)}finally{$s()}return new un(this.componentType,$e,oh(Xe,Te),Te,Xe)}}class un extends class AD{}{constructor(o,l,d,h,g){super(),this.location=d,this._rootLView=h,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new dl(h),this.componentType=o}setInput(o,l){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){const g=this._rootLView;Xg(g[1],g,h,o,l),QE(g,this._tNode.index)}}get injector(){return new Ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function dA(){const s=Kn();Ua(Pe()[1],s)}function no(s){let o=function ib(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;o;){let h;if(bi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new De(903,!1);h=o.\u0275dir}if(h){if(l){d.push(h);const y=s;y.inputs=tm(s.inputs),y.declaredInputs=tm(s.declaredInputs),y.outputs=tm(s.outputs);const C=h.hostBindings;C&&mi(s,C);const I=h.viewQuery,S=h.contentQueries;if(I&&ob(s,I),S&&PR(s,S),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),bi(h)&&h.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let y=0;y<g.length;y++){const C=g[y];C&&C.ngInherit&&C(s),C===no&&(l=!1)}}o=Object.getPrototypeOf(o)}!function sb(s){let o=0,l=null;for(let d=s.length-1;d>=0;d--){const h=s[d];h.hostVars=o+=h.hostVars,h.hostAttrs=zo(h.hostAttrs,l=zo(l,h.hostAttrs))}}(d)}function tm(s){return s===rr?{}:s===xt?[]:s}function ob(s,o){const l=s.viewQuery;s.viewQuery=l?(d,h)=>{o(d,h),l(d,h)}:o}function PR(s,o){const l=s.contentQueries;s.contentQueries=l?(d,h,g)=>{o(d,h,g),l(d,h,g)}:o}function mi(s,o){const l=s.hostBindings;s.hostBindings=l?(d,h)=>{o(d,h),l(d,h)}:o}let nm=null;function fl(){if(!nm){const s=tn.Symbol;if(s&&s.iterator)nm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const d=o[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(nm=d)}}}return nm}function Yf(s){return!!rm(s)&&(Array.isArray(s)||!(s instanceof Map)&&fl()in s)}function rm(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ot(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function jy(s,o,l,d){const h=Pe();return Ot(h,go(),o)&&(Xt(),fa(Sn(),h,s,o,l,d)),jy}function gh(s,o,l,d,h,g){const C=function Mo(s,o,l,d){const h=Ot(s,o,l);return Ot(s,o+1,d)||h}(s,function zr(){return Rt.lFrame.bindingIndex}(),l,h);return li(2),C?o+Ee(l)+d+Ee(h)+g:Wt}function pb(s,o,l,d,h,g,y,C){const I=Pe(),S=Xt(),P=s+22,B=S.firstCreatePass?function mA(s,o,l,d,h,g,y,C,I){const S=o.consts,P=Vc(o,s,4,y||null,Ci(S,C));Wg(o,l,P,Ci(S,I)),Ua(o,P);const B=P.tViews=Oy(2,P,d,h,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,P),B.queries=o.queries.embeddedTView(P)),P}(P,S,I,o,l,d,h,g,y):S.data[P];Ii(B,!1);const K=I[11].createComment("");j_(S,I,K,B),hn(K,I),qf(I,I[P]=tb(K,I,K,B)),Aa(B)&&Ny(S,I,B),null!=y&&Zg(I,B,C)}function Xf(s){return function Vi(s,o){return s[o]}(function On(){return Rt.lFrame.contextLView}(),22+s)}function zy(s,o,l){const d=Pe();return Ot(d,go(),o)&&xs(Xt(),Sn(),d,s,o,d[11],l,!1),zy}function pu(s,o,l,d,h){const y=h?"class":"style";Xg(s,l,o.inputs[y],y,d)}function Zy(s,o,l,d){const h=Pe(),g=Xt(),y=22+s,C=h[11],I=h[y]=de(C,o,function Pd(){return Rt.lFrame.currentNamespace}()),S=g.firstCreatePass?function qy(s,o,l,d,h,g,y){const C=o.consts,S=Vc(o,s,2,h,Ci(C,g));return Wg(o,l,S,Ci(C,y)),null!==S.attrs&&to(S,S.attrs,!1),null!==S.mergedAttrs&&to(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,g,h,0,o,l,d):g.data[y];Ii(S,!0);const P=S.mergedAttrs;null!==P&&ic(C,I,P);const B=S.classes;null!==B&&z_(C,I,B);const K=S.styles;return null!==K&&G_(C,I,K),64!=(64&S.flags)&&j_(g,h,I,S),0===function Yl(){return Rt.lFrame.elementDepthCount}()&&hn(I,h),function Td(){Rt.lFrame.elementDepthCount++}(),Aa(S)&&(Ny(g,h,S),qg(g,S,h)),null!==d&&Zg(h,S),Zy}function sm(){let s=Kn();ka()?Ru():(s=s.parent,Ii(s,!1));const o=s;!function rf(){Rt.lFrame.elementDepthCount--}();const l=Xt();return l.firstCreatePass&&(Ua(l,s),Da(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Nd(s){return 0!=(16&s.flags)}(o)&&pu(l,o,Pe(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function uf(s){return 0!=(32&s.flags)}(o)&&pu(l,o,Pe(),o.stylesWithoutHost,!1),sm}function Wy(s,o,l,d){return Zy(s,o,l,d),sm(),Wy}function ml(s,o,l){const d=Pe(),h=Xt(),g=s+22,y=h.firstCreatePass?function _A(s,o,l,d,h){const g=o.consts,y=Ci(g,d),C=Vc(o,s,8,"ng-container",y);return null!==y&&to(C,y,!0),Wg(o,l,C,Ci(g,h)),null!==o.queries&&o.queries.elementStart(o,C),C}(g,h,d,o,l):h.data[g];Ii(y,!0);const C=d[g]=d[11].createComment("");return j_(h,d,C,y),hn(C,d),Aa(y)&&(Ny(h,d,y),qg(h,y,d)),null!=l&&Zg(d,y),ml}function _l(){let s=Kn();const o=Xt();return ka()?Ru():(s=s.parent,Ii(s,!1)),o.firstCreatePass&&(Ua(o,s),Da(s)&&o.queries.elementEnd(s)),_l}function Ky(){return Pe()}function om(s){return!!s&&"function"==typeof s.then}function Yy(s){return!!s&&"function"==typeof s.subscribe}const Gc=Yy;function Qy(s,o,l,d){const h=Pe(),g=Xt(),y=Kn();return function _b(s,o,l,d,h,g,y,C){const I=Aa(d),P=s.firstCreatePass&&eo(s),B=o[8],K=Zf(o);let ne=!0;if(3&d.type||C){const Xe=oi(d,o),_t=C?C(Xe):Xe,kt=K.length,Fe=C?En=>C(Dn(En[d.index])):d.index;let wt=null;if(!C&&I&&(wt=function mb(s,o,l,d){const h=s.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const y=h[g];if(y===l&&h[g+1]===d){const C=o[7],I=h[g+2];return C.length>I?C[I]:null}"string"==typeof y&&(g+=2)}return null}(s,o,h,d.index)),null!==wt)(wt.__ngLastListenerFn__||wt).__ngNextListenerFn__=g,wt.__ngLastListenerFn__=g,ne=!1;else{g=_h(d,o,B,g,!1);const En=l.listen(_t,h,g);K.push(g,En),P&&P.push(h,Fe,kt,kt+1)}}else g=_h(d,o,B,g,!1);const Te=d.outputs;let $e;if(ne&&null!==Te&&($e=Te[h])){const Xe=$e.length;if(Xe)for(let _t=0;_t<Xe;_t+=2){const zn=o[$e[_t]][$e[_t+1]].subscribe(g),Tl=K.length;K.push(g,zn),P&&P.push(h,d.index,Tl,-(Tl+1))}}}(g,h,h[11],y,s,o,0,d),Qy}function am(s,o,l,d){try{return!1!==l(d)}catch(h){return Wf(s,h),!1}}function _h(s,o,l,d,h){return function g(y){if(y===Function)return d;ti(2&s.flags?Mr(s.index,o):o);let I=am(o,0,d,y),S=g.__ngNextListenerFn__;for(;S;)I=am(o,0,S,y)&&I,S=S.__ngNextListenerFn__;return h&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function yb(s=1){return function Md(s){return(Rt.lFrame.contextLView=function og(s,o){for(;s>0;)o=o[15],s--;return o}(s,Rt.lFrame.contextLView))[8]}(s)}function Ib(s,o,l,d,h){const g=s[l+1],y=null===o;let C=d?Do(g):Js(g),I=!1;for(;0!==C&&(!1===I||y);){const P=s[C+1];EA(s[C],o)&&(I=!0,s[C+1]=d?Dy(P):Ty(P)),C=d?Do(P):Js(P)}I&&(s[l+1]=d?Ty(g):Dy(g))}function EA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Eo(s,o)>=0}const qr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tb(s){return s.substring(qr.key,qr.keyEnd)}function tv(s,o){const l=qr.textEnd;return l===o?-1:(o=qr.keyEnd=function Ab(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,qr.key=o,l),Ro(s,o,l))}function Ro(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function yh(s,o,l){return ko(s,o,l,!1),yh}function cm(s,o){return ko(s,o,null,!0),cm}function dm(s){!function Gi(s,o,l,d){const h=Xt(),g=li(2);h.firstUpdatePass&&Rb(h,null,g,d);const y=Pe();if(l!==Wt&&Ot(y,g,l)){const C=h.data[dn()];if(CA(C,d)&&!Pb(h,g)){let I=d?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(l=we(I,l||"")),pu(h,C,y,l,d)}else!function sv(s,o,l,d,h,g,y,C){h===Wt&&(h=xt);let I=0,S=0,P=0<h.length?h[0]:null,B=0<g.length?g[0]:null;for(;null!==P||null!==B;){const K=I<h.length?h[I+1]:void 0,ne=S<g.length?g[S+1]:void 0;let $e,Te=null;P===B?(I+=2,S+=2,K!==ne&&(Te=B,$e=ne)):null===B||null!==P&&P<B?(I+=2,Te=P):(S+=2,Te=B,$e=ne),null!==Te&&Fb(s,o,l,d,Te,$e,y,C),P=I<h.length?h[I]:null,B=S<g.length?g[S]:null}}(h,C,y,y[11],y[g+1],y[g+1]=function np(s,o,l){if(null==l||""===l)return xt;const d=[],h=la(l);if(Array.isArray(h))for(let g=0;g<h.length;g++)s(d,h[g],!0);else if("object"==typeof h)for(const g in h)h.hasOwnProperty(g)&&s(d,g,h[g]);else"string"==typeof h&&o(d,h);return d}(s,o,l),d,g)}}(di,io,s,!0)}function io(s,o){for(let l=function bA(s){return function ma(s){qr.key=0,qr.keyEnd=0,qr.value=0,qr.valueEnd=0,qr.textEnd=s.length}(s),tv(s,Ro(s,0,qr.textEnd))}(o);l>=0;l=tv(o,l))di(s,Tb(o),!0)}function ko(s,o,l,d){const h=Pe(),g=Xt(),y=li(2);g.firstUpdatePass&&Rb(g,s,y,d),o!==Wt&&Ot(h,y,o)&&Fb(g,g.data[dn()],h,h[11],s,h[y+1]=function Vb(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ve(la(s)))),s}(o,l),d,y)}function Pb(s,o){return o>=s.expandoStartIndex}function Rb(s,o,l,d){const h=s.data;if(null===h[l+1]){const g=h[dn()],y=Pb(s,l);CA(g,d)&&null===o&&!y&&(o=!1),o=function iv(s,o,l,d){const h=Xl(s);let g=d?o.residualClasses:o.residualStyles;if(null===h)0===(d?o.classBindings:o.styleBindings)&&(l=tp(l=hm(null,s,o,l,d),o.attrs,d),g=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(l=hm(h,s,o,l,d),null===g){let I=function kb(s,o,l){const d=l?o.classBindings:o.styleBindings;if(0!==Js(d))return s[Do(d)]}(s,o,d);void 0!==I&&Array.isArray(I)&&(I=hm(null,s,o,I[1],d),I=tp(I,o.attrs,d),function Nb(s,o,l,d){s[Do(l?o.classBindings:o.styleBindings)]=d}(s,o,d,I))}else g=function Ob(s,o,l){let d;const h=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<h;g++)d=tp(d,s[g].hostAttrs,l);return tp(d,o.attrs,l)}(s,o,d)}return void 0!==g&&(d?o.residualClasses=g:o.residualStyles=g),l}(h,g,o,d),function vA(s,o,l,d,h,g){let y=g?o.classBindings:o.styleBindings,C=Do(y),I=Js(y);s[d]=l;let P,S=!1;if(Array.isArray(l)){const B=l;P=B[1],(null===P||Eo(B,P)>0)&&(S=!0)}else P=l;if(h)if(0!==I){const K=Do(s[C+1]);s[d+1]=Bg(K,C),0!==K&&(s[K+1]=Lf(s[K+1],d)),s[C+1]=function Iy(s,o){return 131071&s|o<<17}(s[C+1],d)}else s[d+1]=Bg(C,0),0!==C&&(s[C+1]=Lf(s[C+1],d)),C=d;else s[d+1]=Bg(I,0),0===C?C=d:s[I+1]=Lf(s[I+1],d),I=d;S&&(s[d+1]=Ty(s[d+1])),Ib(s,P,d,!0),Ib(s,P,d,!1),function wA(s,o,l,d,h){const g=h?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&Eo(g,o)>=0&&(l[d+1]=Dy(l[d+1]))}(o,P,s,d,g),y=Bg(C,I),g?o.classBindings=y:o.styleBindings=y}(h,g,o,l,y,d)}}function hm(s,o,l,d,h){let g=null;const y=l.directiveEnd;let C=l.directiveStylingLast;for(-1===C?C=l.directiveStart:C++;C<y&&(g=o[C],d=tp(d,g.hostAttrs,h),g!==s);)C++;return null!==s&&(l.directiveStylingLast=C),d}function tp(s,o,l){const d=l?1:2;let h=-1;if(null!==o)for(let g=0;g<o.length;g++){const y=o[g];"number"==typeof y?h=y:h===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),di(s,y,!!l||o[++g]))}return void 0===s?null:s}function Fb(s,o,l,d,h,g,y,C){if(!(3&o.type))return;const I=s.data,S=I[C+1];vh(function Vf(s){return 1==(1&s)}(S)?Lb(I,o,l,h,Js(S),y):void 0)||(vh(g)||function NE(s){return 2==(2&s)}(S)&&(g=Lb(I,null,l,h,C,y)),function rR(s,o,l,d,h){if(o)h?s.addClass(l,d):s.removeClass(l,d);else{let g=-1===d.indexOf("-")?void 0:kr.DashCase;null==h?s.removeStyle(l,d,g):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),g|=kr.Important),s.setStyle(l,d,h,g))}}(d,y,po(dn(),l),h,g))}function Lb(s,o,l,d,h,g){const y=null===o;let C;for(;h>0;){const I=s[h],S=Array.isArray(I),P=S?I[1]:I,B=null===P;let K=l[h+1];K===Wt&&(K=B?xt:void 0);let ne=B?Ku(K,d):P===d?K:void 0;if(S&&!vh(ne)&&(ne=Ku(I,d)),vh(ne)&&(C=ne,y))return C;const Te=s[h+1];h=y?Do(Te):Js(Te)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(C=Ku(I,d))}return C}function vh(s){return void 0!==s}function CA(s,o){return 0!=(s.flags&(o?16:32))}function IA(s,o=""){const l=Pe(),d=Xt(),h=s+22,g=d.firstCreatePass?Vc(d,h,1,o,null):d.data[h],y=l[h]=function M(s,o){return s.createText(o)}(l[11],o);j_(d,l,y,g),Ii(g,!1)}function Ub(s){return ov("",s,""),Ub}function ov(s,o,l){const d=Pe(),h=function pl(s,o,l,d){return Ot(s,go(),l)?o+Ee(l)+d:Wt}(d,s,o,l);return h!==Wt&&du(d,dn(),h),ov}function ip(s,o,l,d,h){const g=Pe(),y=gh(g,s,o,l,d,h);return y!==Wt&&du(g,dn(),y),ip}function uv(s,o,l){const d=Pe();if(Ot(d,go(),o)){const g=Xt(),y=Sn();xs(g,y,d,s,o,function Si(s,o,l){return(null===s||bi(s))&&(l=function Bo(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}(Xl(g.data),y,d),l,!0)}return uv}const qc=void 0;var UA=["en",[["a","p"],["AM","PM"],qc],[["AM","PM"],qc,qc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],qc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],qc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",qc,"{1} 'at' {0}",qc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function VA(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Zc={};function lp(s){const o=function jA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=cp(o);if(l)return l;const d=o.split("-")[0];if(l=cp(d),l)return l;if("en"===d)return UA;throw new De(701,!1)}function mm(s){return lp(s)[Ut.PluralCase]}function cp(s){return s in Zc||(Zc[s]=tn.ng&&tn.ng.common&&tn.ng.common.locales&&tn.ng.common.locales[s]),Zc[s]}var Ut=(()=>((Ut=Ut||{})[Ut.LocaleId=0]="LocaleId",Ut[Ut.DayPeriodsFormat=1]="DayPeriodsFormat",Ut[Ut.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ut[Ut.DaysFormat=3]="DaysFormat",Ut[Ut.DaysStandalone=4]="DaysStandalone",Ut[Ut.MonthsFormat=5]="MonthsFormat",Ut[Ut.MonthsStandalone=6]="MonthsStandalone",Ut[Ut.Eras=7]="Eras",Ut[Ut.FirstDayOfWeek=8]="FirstDayOfWeek",Ut[Ut.WeekendRange=9]="WeekendRange",Ut[Ut.DateFormat=10]="DateFormat",Ut[Ut.TimeFormat=11]="TimeFormat",Ut[Ut.DateTimeFormat=12]="DateTimeFormat",Ut[Ut.NumberSymbols=13]="NumberSymbols",Ut[Ut.NumberFormats=14]="NumberFormats",Ut[Ut.CurrencyCode=15]="CurrencyCode",Ut[Ut.CurrencySymbol=16]="CurrencySymbol",Ut[Ut.CurrencyName=17]="CurrencyName",Ut[Ut.Currencies=18]="Currencies",Ut[Ut.Directionality=19]="Directionality",Ut[Ut.PluralCase=20]="PluralCase",Ut[Ut.ExtraData=21]="ExtraData",Ut))();const Wc="en-US";let lv=Wc;function mv(s,o,l,d,h){if(s=J(s),Array.isArray(s))for(let g=0;g<s.length;g++)mv(s[g],o,l,d,h);else{const g=Xt(),y=Pe();let C=Nc(s)?s:J(s.provide),I=uE(s);const S=Kn(),P=1048575&S.providerIndexes,B=S.directiveStart,K=S.providerIndexes>>20;if(Nc(s)||!s.multi){const ne=new Ho(I,h,cu),Te=yv(C,o,h?P:P+K,B);-1===Te?(zs(qo(S,y),g,C),_v(g,s,o.length),o.push(C),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(ne),y.push(ne)):(l[Te]=ne,y[Te]=ne)}else{const ne=yv(C,o,P+K,B),Te=yv(C,o,P,P+K),$e=ne>=0&&l[ne],Xe=Te>=0&&l[Te];if(h&&!Xe||!h&&!$e){zs(qo(S,y),g,C);const _t=function HR(s,o,l,d,h){const g=new Ho(s,l,cu);return g.multi=[],g.index=o,g.componentProviders=0,CC(g,h,d&&!l),g}(h?IC:hS,l.length,h,d,I);!h&&Xe&&(l[Te].providerFactory=_t),_v(g,s,o.length,0),o.push(C),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),l.push(_t),y.push(_t)}else _v(g,s,ne>-1?ne:Te,CC(l[h?Te:ne],I,!h&&d));!h&&d&&Xe&&l[Te].componentProviders++}}}function _v(s,o,l,d){const h=Nc(o),g=function yD(s){return!!s.useClass}(o);if(h||g){const I=(g?J(o.useClass):o).prototype.ngOnDestroy;if(I){const S=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const P=S.indexOf(l);-1===P?S.push(l,[d,I]):S[P+1].push(d,I)}else S.push(l,I)}}}function CC(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function yv(s,o,l,d){for(let h=l;h<d;h++)if(o[h]===s)return h;return-1}function hS(s,o,l,d){return vv(this.multi,[])}function IC(s,o,l,d){const h=this.multi;let g;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=qs(l,l[1],this.providerFactory.index,d);g=C.slice(0,y),vv(h,g);for(let I=y;I<C.length;I++)g.push(C[I])}else g=[],vv(h,g);return g}function vv(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function TC(s,o=[]){return l=>{l.providersResolver=(d,h)=>function bC(s,o,l){const d=Xt();if(d.firstCreatePass){const h=bi(s);mv(l,d.data,d.blueprint,h,!0),mv(o,d.data,d.blueprint,h,!1)}}(d,h?h(s):s,o)}}class mu{}class DC{}function fS(s,o){return new wv(s,o??null)}class wv extends mu{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vy(this);const d=Ke(o);this._bootstrapComponents=da(d.bootstrap),this._r3Injector=Lg(o,l,[{provide:mu,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],ve(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Am extends DC{constructor(o){super(),this.moduleType=o}create(o){return new wv(this.moduleType,o)}}class Ev extends mu{constructor(o,l,d){super(),this.componentFactoryResolver=new Vy(this),this.instance=null;const h=new wD([...o,{provide:mu,useValue:this},{provide:Mf,useValue:this.componentFactoryResolver}],l||Mg(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function ln(s,o,l=null){return new Ev(s,o,l).injector}let zi=(()=>{class s{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=ty(0,l.type),h=d.length>0?ln([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,h)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Me({token:s,providedIn:"environment",factory:()=>new s(ar(Oc))}),s})();function wl(s){s.getStandaloneInjector=o=>o.get(zi).getOrCreateStandaloneInjector(s)}function Xc(s,o,l,d){return function MC(s,o,l,d,h,g){const y=o+l;return Ot(s,y,h)?function Ms(s,o,l){return s[o]=l}(s,y+1,g?d.call(g,h):d(h)):function ed(s,o){const l=s[o];return l===Wt?void 0:l}(s,y+1)}(Pe(),function ai(){const s=Rt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),s,o,l,d)}function Sv(s){return o=>{setTimeout(s,void 0,o)}}const _a=class Av extends u.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,d){let h=o,g=l||(()=>null),y=d;if(o&&"object"==typeof o){const I=o;h=I.next?.bind(I),g=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(g=Sv(g),h&&(h=Sv(h)),y&&(y=Sv(y)));const C=super.subscribe({next:h,error:g,complete:y});return o instanceof $.w0&&o.add(C),C}};function NC(){return this._results[fl()]()}class xv{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=fl(),d=xv.prototype;d[l]||(d[l]=NC)}get changes(){return this._changes||(this._changes=new _a)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const d=this;d.dirty=!1;const h=Dr(o);(this._changesDetected=!function Zu(s,o,l){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],g=o[d];if(l&&(h=l(h),g=l(g)),g!==h)return!1}return!0}(d._results,h,l))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gp=(()=>{class s{}return s.__NG_ELEMENT_ID__=Rm,s})();const mp=gp,OC=class extends mp{constructor(o,l,d){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(o,l){const d=this._declarationTContainer.tViews,h=Gg(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,l||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),ch(d,h,o),new Lr(h)}};function Rm(){return _p(Kn(),Pe())}function _p(s,o){return 4&s.type?new OC(o,s,oh(s,o)):null}let km=(()=>{class s{}return s.__NG_ELEMENT_ID__=TS,s})();function TS(){return Pv(Kn(),Pe())}const DS=km,FC=class extends DS{constructor(o,l,d){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=d}get element(){return oh(this._hostTNode,this._hostLView)}get injector(){return new Ko(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ha(this._hostTNode,this._hostLView);if(sc(o)){const l=is(o,this._hostLView),d=Ba(o);return new Ko(l[1].data[d+8],l)}return new Ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Mv(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,d){let h,g;"number"==typeof d?h=d:null!=d&&(h=d.index,g=d.injector);const y=o.createEmbeddedView(l||{},g);return this.insert(y,h),y}createComponent(o,l,d,h,g){const y=o&&!function Di(s){return"function"==typeof s}(o);let C;if(y)C=l;else{const B=l||{};C=B.index,d=B.injector,h=B.projectableNodes,g=B.environmentInjector||B.ngModuleRef}const I=y?o:new Kf(N(o)),S=d||this.parentInjector;if(!g&&null==I.ngModule){const K=(y?S:this.parentInjector).get(Oc,null);K&&(g=K)}const P=I.create(S,h,void 0,g);return this.insert(P.hostView,C),P}insert(o,l){const d=o._lView,h=d[1];if(function Pa(s){return Gr(s[3])}(d)){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const B=d[3],K=new FC(B,B[6],B[3]);K.detach(K.indexOf(o))}}const g=this._adjustIndex(l),y=this._lContainer;!function $i(s,o,l,d){const h=10+d,g=l.length;d>0&&(l[h-1][4]=o),d<g-10?(o[4]=l[h],dc(l,10+d,o)):(l.push(o),o[4]=null),o[3]=l;const y=o[17];null!==y&&l!==y&&function ua(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(y,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,d,y,g);const C=H_(g,y),I=d[11],S=ol(I,y[7]);return null!==S&&function nt(s,o,l,d,h,g){d[0]=h,d[6]=o,To(s,d,l,1,h,g)}(h,y[6],I,d,S,C),o.attachToViewContainerRef(),dc(yp(y),g,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Mv(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),d=Cf(this._lContainer,l);d&&(Ka(yp(this._lContainer),l),sl(d[1],d))}detach(o){const l=this._adjustIndex(o,-1),d=Cf(this._lContainer,l);return d&&null!=Ka(yp(this._lContainer),l)?new Lr(d):null}_adjustIndex(o,l=0){return o??this.length+l}};function Mv(s){return s[8]}function yp(s){return s[8]||(s[8]=[])}function Pv(s,o){let l;const d=o[s.index];if(Gr(d))l=d;else{let h;if(8&s.type)h=Dn(d);else{const g=o[11];h=g.createComment("");const y=oi(s,o);Io(g,ol(g,y),h,function nR(s,o){return s.nextSibling(o)}(g,y),!1)}o[s.index]=l=tb(d,o,h,s),qf(o,l)}return new FC(l,s,o)}class kv{constructor(o){this.queryList=o,this.matches=null}clone(){return new kv(this.queryList)}setDirty(){this.queryList.setDirty()}}class vp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const d=null!==o.contentQueries?o.contentQueries[0]:l.length,h=[];for(let g=0;g<d;g++){const y=l.getByIndex(g);h.push(this.queries[y.indexInDeclarationView].clone())}return new vp(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==Hv(o,l).matches&&this.queries[l].setDirty()}}class Om{constructor(o,l,d=null){this.predicate=o,this.flags=l,this.read=d}}class Nv{constructor(o=[]){this.queries=o}elementStart(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let d=0;d<this.length;d++){const h=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(o,h);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new Nv(l):null}template(o,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class wp{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new wp(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const g=d[h];this.matchTNodeWithReadOption(o,l,Ov(l,g)),this.matchTNodeWithReadOption(o,l,Wo(l,o,g,!1,!1))}else d===gp?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Wo(l,o,d,!1,!1))}matchTNodeWithReadOption(o,l,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===Pf||h===km||h===gp&&4&l.type)this.addMatch(l.index,-2);else{const g=Wo(l,o,h,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function Ov(s,o){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===o)return l[d+1];return null}function Lv(s,o,l,d){return-1===l?function Fv(s,o){return 11&s.type?oh(s,o):4&s.type?_p(s,o):null}(o,s):-2===l?function AS(s,o,l){return l===Pf?oh(o,s):l===gp?_p(o,s):l===km?Pv(o,s):void 0}(s,o,d):qs(s,s[1],l,o)}function VC(s,o,l,d){const h=o[19].queries[d];if(null===h.matches){const g=s.data,y=l.matches,C=[];for(let I=0;I<y.length;I+=2){const S=y[I];C.push(S<0?null:Lv(o,g[S],y[I+1],l.metadata.read))}h.matches=C}return h.matches}function Vv(s,o,l,d){const h=s.queries.getByIndex(l),g=h.matches;if(null!==g){const y=VC(s,o,h,l);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)d.push(y[C/2]);else{const S=g[C+1],P=o[-I];for(let B=10;B<P.length;B++){const K=P[B];K[17]===K[3]&&Vv(K[1],K,S,d)}if(null!==P[9]){const B=P[9];for(let K=0;K<B.length;K++){const ne=B[K];Vv(ne[1],ne,S,d)}}}}}return d}function Ep(s){const o=Pe(),l=Xt(),d=$o();Xr(d+1);const h=Hv(l,d);if(s.dirty&&function Wl(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const g=h.crossesNgTemplate?Vv(l,o,d,[]):VC(l,o,h,d);s.reset(g,PD),s.notifyOnChanges()}return!0}return!1}function Bv(s,o,l,d){const h=Xt();if(h.firstCreatePass){const g=Kn();(function $v(s,o,l){null===s.queries&&(s.queries=new Nv),s.queries.track(new wp(o,l))})(h,new Om(o,l,d),g.index),function SS(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(h,s),2==(2&l)&&(h.staticContentQueries=!0)}!function Lm(s,o,l){const d=new xv(4==(4&l));jf(s,o,d,d.destroy),null===o[19]&&(o[19]=new vp),o[19].queries.push(new kv(d))}(h,Pe(),l)}function Fm(){return function jv(s,o){return s[19].queries[o].queryList}(Pe(),$o())}function Hv(s,o){return s.queries.getByIndex(o)}function Bm(...s){}const WC=new mn("Application Initializer");let jm=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Bm,this.reject=Bm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(om(g))l.push(g);else if(Gc(g)){const y=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});l.push(y)}}Promise.all(l).then(()=>{d()}).catch(h=>{this.reject(h)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(ar(WC,8))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const KC=new mn("AppId",{providedIn:"root",factory:function YC(){return`${Qv()}${Qv()}${Qv()}`}});function Qv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const QC=new mn("Platform Initializer"),tx=new mn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),JC=new mn("appBootstrapListener"),nx=new mn("AnimationModuleType");let rx=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Jv=new mn("LocaleId",{providedIn:"root",factory:()=>mc(Jv,lt.Optional|lt.SkipSelf)||function sk(){return typeof $localize<"u"&&$localize.locale||Wc}()}),ix=new mn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XC{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let ox=(()=>{class s{compileModuleSync(l){return new Am(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=da(Ke(l).declarations).reduce((y,C)=>{const I=N(C);return I&&y.push(new Kf(I)),y},[]);return new XC(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const lx=(()=>Promise.resolve(0))();function e0(s){typeof Zone>"u"?lx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class No{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _a(!1),this.onMicrotaskEmpty=new _a(!1),this.onStable=new _a(!1),this.onError=new _a(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&l,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function uk(){let s=tn.requestAnimationFrame,o=tn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function $m(s){const o=()=>{!function cx(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(tn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,t0(s),s.isCheckStableRunning=!0,nI(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),t0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,h,g,y,C)=>{try{return rI(s),l.invokeTask(h,g,y,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),dx(s)}},onInvoke:(l,d,h,g,y,C,I)=>{try{return rI(s),l.invoke(h,g,y,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),dx(s)}},onHasTask:(l,d,h,g)=>{l.hasTask(h,g),d===h&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,t0(s),nI(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,h,g)=>(l.handleError(h,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!No.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(No.isInAngularZone())throw new De(909,!1)}run(o,l,d){return this._inner.run(o,l,d)}runTask(o,l,d,h){const g=this._inner,y=g.scheduleEventTask("NgZoneEvent: "+h,o,lk,Bm,Bm);try{return g.runTask(y,l,d)}finally{g.cancelTask(y)}}runGuarded(o,l,d){return this._inner.runGuarded(o,l,d)}runOutsideAngular(o){return this._outer.run(o)}}const lk={};function nI(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function t0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function rI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function dx(s){s._nesting--,nI(s)}class iI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _a,this.onMicrotaskEmpty=new _a,this.onStable=new _a,this.onError=new _a}run(o,l,d){return o.apply(l,d)}runGuarded(o,l,d){return o.apply(l,d)}runOutsideAngular(o){return o()}runTask(o,l,d,h){return o.apply(l,d)}}const Hm=new mn(""),n0=new mn("");let r0,ck=(()=>{class s{constructor(l,d,h){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,r0||(function hx(s){r0=s}(h),h.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{No.assertNotInAngularZone(),e0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())e0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,h){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:h})}whenStable(l,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,h){return[]}}return s.\u0275fac=function(l){return new(l||s)(ar(No),ar(Gm),ar(n0))},s.\u0275prov=Me({token:s,factory:s.\u0275fac}),s})(),Gm=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return r0?.findTestabilityInTree(this,l,d)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),td=null;const fx=new mn("AllowMultipleToken"),s0=new mn("PlatformDestroyListeners");class fk{constructor(o,l){this.name=o,this.token=l}}function gx(s,o,l=[]){const d=`Platform: ${o}`,h=new mn(d);return(g=[])=>{let y=sI();if(!y||y.injector.get(fx,!1)){const C=[...l,...g,{provide:h,useValue:!0}];s?s(C):function pk(s){if(td&&!td.get(fx,!1))throw new De(400,!1);td=s;const o=s.get(_x);(function px(s){const o=s.get(QC,null);o&&o.forEach(l=>l())})(s)}(function mx(s=[],o){return Lc.create({name:o,providers:[{provide:ny,useValue:"platform"},{provide:s0,useValue:new Set([()=>td=null])},...s]})}(C,d))}return function mk(s){const o=sI();if(!o)throw new De(401,!1);return o}()}}function sI(){return td?.get(_x)??null}let _x=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const h=function vx(s,o){let l;return l="noop"===s?new iI:("zone.js"===s?void 0:s)||new No(o),l}(d?.ngZone,function yx(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:No,useValue:h}];return h.run(()=>{const y=Lc.create({providers:g,parent:this.injector,name:l.moduleType.name}),C=l.create(y),I=C.injector.get(gi,null);if(!I)throw new De(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:P=>{I.handleError(P)}});C.onDestroy(()=>{a0(this._modules,C),S.unsubscribe()})}),function wx(s,o,l){try{const d=l();return om(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(I,h,()=>{const S=C.injector.get(jm);return S.runInitializers(),S.donePromise.then(()=>(function Qb(s){se(s,"Expected localeId to be defined"),"string"==typeof s&&(lv=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(Jv,Wc)||Wc),this._moduleDoBootstrap(C),C))})})}bootstrapModule(l,d=[]){const h=Ex({},d);return function dk(s,o,l){const d=new Am(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(l){const d=l.injector.get(o0);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!l.instance.ngDoBootstrap)throw new De(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(s0,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(ar(Lc))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Ex(s,o){return Array.isArray(o)?o.reduce(Ex,s):{...s,...o}}let o0=(()=>{class s{constructor(l,d,h){this._zone=l,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),y=new O.y(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{No.assertNotInAngularZone(),e0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{No.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ie.T)(g,y.pipe((0,ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const h=l instanceof lE;if(!this._injector.get(jm).done)throw!h&&be(l),new De(405,false);let y;y=h?l:this._injector.get(Mf).resolveComponentFactory(l),this.componentTypes.push(y.componentType);const C=function hk(s){return s.isBoundToModule}(y)?void 0:this._injector.get(mu),S=y.create(Lc.NULL,[],d||y.selector,C),P=S.location.nativeElement,B=S.injector.get(Hm,null);return B?.registerApplication(P),S.onDestroy(()=>{this.detachView(S.hostView),a0(this.components,S),B?.unregisterApplication(P)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;a0(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(JC,[]).concat(this._bootstrapListeners).forEach(h=>h(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>a0(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new De(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(ar(No),ar(Oc),ar(gi))},s.\u0275prov=Me({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function a0(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Cx=!0,Ix=!1;function yk(){return Ix=!0,Cx}function vk(){if(Ix)throw new Error("Cannot enable prod mode after platform setup.");Cx=!1}let wk=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ek,s})();function Ek(s){return function bk(s,o,l){if(vs(s)&&!l){const d=Mr(s.index,o);return new Lr(d,d)}return 47&s.type?new Lr(o[16],o):null}(Kn(),Pe(),16==(16&s))}class c0{constructor(){}supports(o){return Yf(o)}create(o){return new Sx(o)}}const cI=(s,o)=>o;class Sx{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||cI}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,d=this._removalsHead,h=0,g=null;for(;l||d;){const y=!d||l&&l.currentIndex<Ln(d,h,g)?l:d,C=Ln(y,h,g),I=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(l=l._next,null==y.previousIndex)h++;else{g||(g=[]);const S=C-h,P=I-h;if(S!=P){for(let K=0;K<S;K++){const ne=K<g.length?g[K]:g[K]=0,Te=ne+K;P<=Te&&Te<S&&(g[K]=ne+1)}g[y.previousIndex]=P-S}}C!==I&&o(y,C,I)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Yf(o))throw new De(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,g,y,l=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],y=this._trackByFn(C,g),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,g,y,C)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,y,C),d=!0),l=l._next}else h=0,function pA(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[fl()]();let d;for(;!(d=l.next()).done;)o(d.value)}}(o,C=>{y=this._trackByFn(h,C),null!==l&&Object.is(l.trackById,y)?(d&&(l=this._verifyReinsertion(l,C,y,h)),Object.is(l.item,C)||this._addIdentityChange(l,C)):(l=this._mismatch(l,C,y,h),d=!0),l=l._next,h++}),this.length=h;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,d,h){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,g,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,g,h)):o=this._addAfter(new xx(l,d),g,h),o}_verifyReinsertion(o,l,d,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?o=this._reinsertAfter(g,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,g=o._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(o,l,d),this._addToMoves(o,d),o}_moveAfter(o,l,d){return this._unlink(o),this._insertAfter(o,l,d),this._addToMoves(o,d),o}_addAfter(o,l,d){return this._insertAfter(o,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,d){const h=null===l?this._itHead:l._next;return o._next=h,o._prev=l,null===h?this._itTail=o:h._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new tr),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,d=o._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tr),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class xx{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Mx{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const l=o._prevDup,d=o._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class tr{constructor(){this.map=new Map}put(o){const l=o.trackById;let d=this.map.get(l);d||(d=new Mx,this.map.set(l,d)),d.add(o)}get(o,l){const h=this.map.get(o);return h?h.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ln(s,o,l){const d=s.previousIndex;if(null===d)return d;let h=0;return l&&d<l.length&&(h=l[d]),d+o+h}class zm{constructor(){}supports(o){return o instanceof Map||rm(o)}create(){return new d0}}class d0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||rm(o)))throw new De(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(l&&l.key===h)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(h,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const d=o._prev;return l._next=o,l._prev=d,o._prev=l,d&&(d._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,l);const g=h._prev,y=h._next;return g&&(g._next=y),y&&(y._prev=g),h._next=null,h._prev=null,h}const d=new Px(o);return this._records.set(o,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(d=>l(o[d],d))}}class Px{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dI(){return new h0([new c0])}let h0=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||dI()),deps:[[s,new Jo,new Is]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(null!=d)return d;throw new De(901,!1)}}return s.\u0275prov=Me({token:s,providedIn:"root",factory:dI}),s})();function hI(){return new qm([new zm])}let qm=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const h=d.factories.slice();l=l.concat(h)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||hI()),deps:[[s,new Jo,new Is]]}}find(l){const d=this.factories.find(h=>h.supports(l));if(d)return d;throw new De(901,!1)}}return s.\u0275prov=Me({token:s,providedIn:"root",factory:hI}),s})();const pI=gx(null,"core",[]);let kx=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(ar(o0))},s.\u0275mod=yr({type:s}),s.\u0275inj=Dt({}),s})();function Nx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(bt,Ne,U)=>{U.d(Ne,{Z:()=>De});var u=U(2090),$=U(4859),O=U(6881),ie=U(1877);class ce{constructor(Ee,ye){this._delegate=Ee,this.firebase=ye,(0,O._addComponent)(Ee,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(Ee,ye=O._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const pt=this._delegate.container.getProvider(Ee);return!pt.isInitialized()&&"EXPLICIT"===(null===(yt=pt.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&pt.initialize(),pt.getImmediate({identifier:ye})}_removeServiceInstance(Ee,ye=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(ye)}_addComponent(Ee){(0,O._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,O._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function we(){const it=function ve(it){const Ee={},ye={__esModule:!0,initializeApp:function Se(qe,le={}){const Qe=O.initializeApp(qe,le);if((0,u.r3)(Ee,Qe.name))return Ee[Qe.name];const St=new it(Qe,ye);return Ee[Qe.name]=St,St},app:pt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function xe(qe){const le=qe.name,Qe=le.replace("-compat","");if(O._registerComponent(qe)&&"PUBLIC"===qe.type){const St=(gt=pt())=>{if("function"!=typeof gt[Qe])throw pe.create("invalid-app-argument",{appName:le});return gt[Qe]()};void 0!==qe.serviceProps&&(0,u.ZB)(St,qe.serviceProps),ye[Qe]=St,it.prototype[Qe]=function(...gt){return this._getService.bind(this,le).apply(this,qe.multipleInstances?gt:[])}}return"PUBLIC"===qe.type?ye[Qe]:null},removeApp:function yt(qe){delete Ee[qe]},useAsService:function ze(qe,le){return"serverAuth"===le?null:le},modularAPIs:O}};function pt(qe){if(!(0,u.r3)(Ee,qe=qe||O._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:qe});return Ee[qe]}return ye.default=ye,Object.defineProperty(ye,"apps",{get:function Ie(){return Object.keys(Ee).map(qe=>Ee[qe])}}),pt.App=it,ye}(ce);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function Ee(ye){(0,u.ZB)(it,ye)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),it}(),z=new ie.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=Z;!function ke(it){(0,O.registerVersion)("@firebase/app-compat","0.2.13",it)}()},6881:(bt,Ne,U)=>{U.r(Ne),U.d(Ne,{FirebaseError:()=>ie.ZR,SDK_VERSION:()=>ts,_DEFAULT_ENTRY_NAME:()=>Yr,_addComponent:()=>dt,_addOrOverwriteComponent:()=>It,_apps:()=>Mn,_clearComponents:()=>rr,_components:()=>qt,_getProvider:()=>Qr,_registerComponent:()=>tn,_removeServiceInstance:()=>_r,deleteApp:()=>Xn,getApp:()=>jn,getApps:()=>bn,initializeApp:()=>sn,onLog:()=>er,registerVersion:()=>Jr,setLogLevel:()=>Ei});var u=U(5861),$=U(4859),O=U(1877),ie=U(2090);let _e,pe;const Z=new WeakMap,z=new WeakMap,J=new WeakMap,He=new WeakMap,ke=new WeakMap;let Ee={get(ae,re,Le){if(ae instanceof IDBTransaction){if("done"===re)return z.get(ae);if("objectStoreNames"===re)return ae.objectStoreNames||J.get(ae);if("store"===re)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return Se(ae[re])},set:(ae,re,Le)=>(ae[re]=Le,!0),has:(ae,re)=>ae instanceof IDBTransaction&&("done"===re||"store"===re)||re in ae};function pt(ae){return"function"==typeof ae?function yt(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function we(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...re){return ae.apply(Ie(this),re),Se(Z.get(this))}:function(...re){return Se(ae.apply(Ie(this),re))}:function(re,...Le){const Ve=ae.call(Ie(this),re,...Le);return J.set(Ve,re.sort?re.sort():[re]),Se(Ve)}}(ae):(ae instanceof IDBTransaction&&function it(ae){if(z.has(ae))return;const re=new Promise((Le,Ve)=>{const Mt=()=>{ae.removeEventListener("complete",$t),ae.removeEventListener("error",pn),ae.removeEventListener("abort",pn)},$t=()=>{Le(),Mt()},pn=()=>{Ve(ae.error||new DOMException("AbortError","AbortError")),Mt()};ae.addEventListener("complete",$t),ae.addEventListener("error",pn),ae.addEventListener("abort",pn)});z.set(ae,re)}(ae),((ae,re)=>re.some(Le=>ae instanceof Le))(ae,function ve(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,Ee):ae)}function Se(ae){if(ae instanceof IDBRequest)return function De(ae){const re=new Promise((Le,Ve)=>{const Mt=()=>{ae.removeEventListener("success",$t),ae.removeEventListener("error",pn)},$t=()=>{Le(Se(ae.result)),Mt()},pn=()=>{Ve(ae.error),Mt()};ae.addEventListener("success",$t),ae.addEventListener("error",pn)});return re.then(Le=>{Le instanceof IDBCursor&&Z.set(Le,ae)}).catch(()=>{}),ke.set(re,ae),re}(ae);if(He.has(ae))return He.get(ae);const re=pt(ae);return re!==ae&&(He.set(ae,re),ke.set(re,ae)),re}const Ie=ae=>ke.get(ae),qe=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],Qe=new Map;function St(ae,re){if(!(ae instanceof IDBDatabase)||re in ae||"string"!=typeof re)return;if(Qe.get(re))return Qe.get(re);const Le=re.replace(/FromIndex$/,""),Ve=re!==Le,Mt=le.includes(Le);if(!(Le in(Ve?IDBIndex:IDBObjectStore).prototype)||!Mt&&!qe.includes(Le))return;const $t=function(){var pn=(0,u.Z)(function*($n,...Jt){const Hr=this.transaction($n,Mt?"readwrite":"readonly");let Li=Hr.store;return Ve&&(Li=Li.index(Jt.shift())),(yield Promise.all([Li[Le](...Jt),Mt&&Hr.done]))[0]});return function(Jt){return pn.apply(this,arguments)}}();return Qe.set(re,$t),$t}!function ye(ae){Ee=ae(Ee)}(ae=>({...ae,get:(re,Le,Ve)=>St(re,Le)||ae.get(re,Le,Ve),has:(re,Le)=>!!St(re,Le)||ae.has(re,Le)}));class gt{constructor(re){this.container=re}getPlatformInfoString(){return this.container.getProviders().map(Le=>{if(function zt(ae){return"VERSION"===ae.getComponent()?.type}(Le)){const Ve=Le.getImmediate();return`${Ve.library}/${Ve.version}`}return null}).filter(Le=>Le).join(" ")}}const ct="@firebase/app",pr=new O.Yd("@firebase/app"),Yr="[DEFAULT]",Nn={[ct]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Mn=new Map,qt=new Map;function dt(ae,re){try{ae.container.addComponent(re)}catch(Le){pr.debug(`Component ${re.name} failed to register with FirebaseApp ${ae.name}`,Le)}}function It(ae,re){ae.container.addOrOverwriteComponent(re)}function tn(ae){const re=ae.name;if(qt.has(re))return pr.debug(`There were multiple attempts to register component ${re}.`),!1;qt.set(re,ae);for(const Le of Mn.values())dt(Le,ae);return!0}function Qr(ae,re){const Le=ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Le&&Le.triggerHeartbeat(),ae.container.getProvider(re)}function _r(ae,re,Le=Yr){Qr(ae,re).clearInstance(Le)}function rr(){qt.clear()}const Zn=new ie.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zt{constructor(re,Le,Ve){this._isDeleted=!1,this._options=Object.assign({},re),this._config=Object.assign({},Le),this._name=Le.name,this._automaticDataCollectionEnabled=Le.automaticDataCollectionEnabled,this._container=Ve,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this.checkDestroyed(),this._automaticDataCollectionEnabled=re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(re){this._isDeleted=re}checkDestroyed(){if(this.isDeleted)throw Zn.create("app-deleted",{appName:this._name})}}const ts="9.23.0";function sn(ae,re={}){let Le=ae;"object"!=typeof re&&(re={name:re});const Ve=Object.assign({name:Yr,automaticDataCollectionEnabled:!1},re),Mt=Ve.name;if("string"!=typeof Mt||!Mt)throw Zn.create("bad-app-name",{appName:String(Mt)});if(Le||(Le=(0,ie.aH)()),!Le)throw Zn.create("no-options");const $t=Mn.get(Mt);if($t){if((0,ie.vZ)(Le,$t.options)&&(0,ie.vZ)(Ve,$t.config))return $t;throw Zn.create("duplicate-app",{appName:Mt})}const pn=new $.H0(Mt);for(const Jt of qt.values())pn.addComponent(Jt);const $n=new Zt(Le,Ve,pn);return Mn.set(Mt,$n),$n}function jn(ae=Yr){const re=Mn.get(ae);if(!re&&ae===Yr&&(0,ie.aH)())return sn();if(!re)throw Zn.create("no-app",{appName:ae});return re}function bn(){return Array.from(Mn.values())}function Xn(ae){return kn.apply(this,arguments)}function kn(){return(kn=(0,u.Z)(function*(ae){const re=ae.name;Mn.has(re)&&(Mn.delete(re),yield Promise.all(ae.container.getProviders().map(Le=>Le.delete())),ae.isDeleted=!0)})).apply(this,arguments)}function Jr(ae,re,Le){var Ve;let Mt=null!==(Ve=Nn[ae])&&void 0!==Ve?Ve:ae;Le&&(Mt+=`-${Le}`);const $t=Mt.match(/\s|\//),pn=re.match(/\s|\//);if($t||pn){const $n=[`Unable to register library "${Mt}" with version "${re}":`];return $t&&$n.push(`library name "${Mt}" contains illegal characters (whitespace or "/")`),$t&&pn&&$n.push("and"),pn&&$n.push(`version name "${re}" contains illegal characters (whitespace or "/")`),void pr.warn($n.join(" "))}tn(new $.wA(`${Mt}-version`,()=>({library:Mt,version:re}),"VERSION"))}function er(ae,re){if(null!==ae&&"function"!=typeof ae)throw Zn.create("invalid-log-argument");(0,O.Am)(ae,re)}function Ei(ae){(0,O.Ub)(ae)}const G="firebase-heartbeat-store";let H=null;function F(){return H||(H=function xe(ae,re,{blocked:Le,upgrade:Ve,blocking:Mt,terminated:$t}={}){const pn=indexedDB.open(ae,re),$n=Se(pn);return Ve&&pn.addEventListener("upgradeneeded",Jt=>{Ve(Se(pn.result),Jt.oldVersion,Jt.newVersion,Se(pn.transaction),Jt)}),Le&&pn.addEventListener("blocked",Jt=>Le(Jt.oldVersion,Jt.newVersion,Jt)),$n.then(Jt=>{$t&&Jt.addEventListener("close",()=>$t()),Mt&&Jt.addEventListener("versionchange",Hr=>Mt(Hr.oldVersion,Hr.newVersion,Hr))}).catch(()=>{}),$n}("firebase-heartbeat-database",1,{upgrade:(ae,re)=>{0===re&&ae.createObjectStore(G)}}).catch(ae=>{throw Zn.create("idb-open",{originalErrorMessage:ae.message})})),H}function R(){return(R=(0,u.Z)(function*(ae){try{return yield(yield F()).transaction(G).objectStore(G).get(Ke(ae))}catch(re){if(re instanceof ie.ZR)pr.warn(re.message);else{const Le=Zn.create("idb-get",{originalErrorMessage:re?.message});pr.warn(Le.message)}}})).apply(this,arguments)}function Y(ae,re){return be.apply(this,arguments)}function be(){return(be=(0,u.Z)(function*(ae,re){try{const Ve=(yield F()).transaction(G,"readwrite");yield Ve.objectStore(G).put(re,Ke(ae)),yield Ve.done}catch(Le){if(Le instanceof ie.ZR)pr.warn(Le.message);else{const Ve=Zn.create("idb-set",{originalErrorMessage:Le?.message});pr.warn(Ve.message)}}})).apply(this,arguments)}function Ke(ae){return`${ae.name}!${ae.options.appId}`}class tt{constructor(re){this.container=re,this._heartbeatsCache=null;const Le=this.container.getProvider("app").getImmediate();this._storage=new Lt(Le),this._heartbeatsCachePromise=this._storage.read().then(Ve=>(this._heartbeatsCache=Ve,Ve))}triggerHeartbeat(){var re=this;return(0,u.Z)(function*(){const Ve=re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Mt=at();if(null===re._heartbeatsCache&&(re._heartbeatsCache=yield re._heartbeatsCachePromise),re._heartbeatsCache.lastSentHeartbeatDate!==Mt&&!re._heartbeatsCache.heartbeats.some($t=>$t.date===Mt))return re._heartbeatsCache.heartbeats.push({date:Mt,agent:Ve}),re._heartbeatsCache.heartbeats=re._heartbeatsCache.heartbeats.filter($t=>{const pn=new Date($t.date).valueOf();return Date.now()-pn<=2592e6}),re._storage.overwrite(re._heartbeatsCache)})()}getHeartbeatsHeader(){var re=this;return(0,u.Z)(function*(){if(null===re._heartbeatsCache&&(yield re._heartbeatsCachePromise),null===re._heartbeatsCache||0===re._heartbeatsCache.heartbeats.length)return"";const Le=at(),{heartbeatsToSend:Ve,unsentEntries:Mt}=function Qt(ae,re=1024){const Le=[];let Ve=ae.slice();for(const Mt of ae){const $t=Le.find(pn=>pn.agent===Mt.agent);if($t){if($t.dates.push(Mt.date),on(Le)>re){$t.dates.pop();break}}else if(Le.push({agent:Mt.agent,dates:[Mt.date]}),on(Le)>re){Le.pop();break}Ve=Ve.slice(1)}return{heartbeatsToSend:Le,unsentEntries:Ve}}(re._heartbeatsCache.heartbeats),$t=(0,ie.L)(JSON.stringify({version:2,heartbeats:Ve}));return re._heartbeatsCache.lastSentHeartbeatDate=Le,Mt.length>0?(re._heartbeatsCache.heartbeats=Mt,yield re._storage.overwrite(re._heartbeatsCache)):(re._heartbeatsCache.heartbeats=[],re._storage.overwrite(re._heartbeatsCache)),$t})()}}function at(){return(new Date).toISOString().substring(0,10)}class Lt{constructor(re){this.app=re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ie.hl)()&&(0,ie.eu)().then(()=>!0).catch(()=>!1)})()}read(){var re=this;return(0,u.Z)(function*(){return(yield re._canUseIndexedDBPromise)&&(yield function N(ae){return R.apply(this,arguments)}(re.app))||{heartbeats:[]}})()}overwrite(re){var Le=this;return(0,u.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const $t=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=re.lastSentHeartbeatDate)&&void 0!==Ve?Ve:$t.lastSentHeartbeatDate,heartbeats:re.heartbeats})}})()}add(re){var Le=this;return(0,u.Z)(function*(){var Ve;if(yield Le._canUseIndexedDBPromise){const $t=yield Le.read();return Y(Le.app,{lastSentHeartbeatDate:null!==(Ve=re.lastSentHeartbeatDate)&&void 0!==Ve?Ve:$t.lastSentHeartbeatDate,heartbeats:[...$t.heartbeats,...re.heartbeats]})}})()}}function on(ae){return(0,ie.L)(JSON.stringify({version:2,heartbeats:ae})).length}!function $r(ae){tn(new $.wA("platform-logger",re=>new gt(re),"PRIVATE")),tn(new $.wA("heartbeat",re=>new tt(re),"PRIVATE")),Jr(ct,"0.9.13",ae),Jr(ct,"0.9.13","esm2017"),Jr("fire-js","")}("")},4859:(bt,Ne,U)=>{U.d(Ne,{H0:()=>ve,wA:()=>O});var u=U(5861),$=U(2090);class O{constructor(Z,z,J){this.name=Z,this.instanceFactory=z,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ie="[DEFAULT]";class ce{constructor(Z,z){this.name=Z,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const z=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(z)){const J=new $.BH;if(this.instancesDeferred.set(z,J),this.isInitialized(z)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:z});He&&J.resolve(He)}catch{}}return this.instancesDeferred.get(z).promise}getImmediate(Z){var z;const J=this.normalizeInstanceIdentifier(Z?.identifier),He=null!==(z=Z?.optional)&&void 0!==z&&z;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(ke){if(He)return null;throw ke}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function pe(we){return"EAGER"===we.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[z,J]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(z);try{const ke=this.getOrInitializeService({instanceIdentifier:He});J.resolve(ke)}catch{}}}}clearInstance(Z=ie){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,u.Z)(function*(){const z=Array.from(Z.instances.values());yield Promise.all([...z.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...z.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ie){return this.instances.has(Z)}getOptions(Z=ie){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:z={}}=Z,J=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:J,options:z});for(const[ke,De]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(ke)&&De.resolve(He);return He}onInit(Z,z){var J;const He=this.normalizeInstanceIdentifier(z),ke=null!==(J=this.onInitCallbacks.get(He))&&void 0!==J?J:new Set;ke.add(Z),this.onInitCallbacks.set(He,ke);const De=this.instances.get(He);return De&&Z(De,He),()=>{ke.delete(Z)}}invokeOnInitCallbacks(Z,z){const J=this.onInitCallbacks.get(z);if(J)for(const He of J)try{He(Z,z)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:z={}}){let J=this.instances.get(Z);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(we=Z,we===ie?void 0:we),options:z}),this.instances.set(Z,J),this.instancesOptions.set(Z,z),this.invokeOnInitCallbacks(J,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,J)}catch{}var we;return J||null}normalizeInstanceIdentifier(Z=ie){return this.component?this.component.multipleInstances?Z:ie:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const z=this.getProvider(Z.name);if(z.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);z.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const z=new ce(Z,this);return this.providers.set(Z,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Ne,U)=>{U.d(Ne,{Am:()=>we,Ub:()=>ve,Yd:()=>pe,in:()=>$});const u=[];var $=(()=>{return(Z=$||($={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",$;var Z})();const O={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},ie=$.INFO,ce={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},_e=(Z,z,...J)=>{if(z<Z.logLevel)return;const He=(new Date).toISOString(),ke=ce[z];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[ke](`[${He}]  ${Z.name}:`,...J)};class pe{constructor(z){this.name=z,this._logLevel=ie,this._logHandler=_e,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in $))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?O[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...z),this._logHandler(this,$.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...z),this._logHandler(this,$.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,$.INFO,...z),this._logHandler(this,$.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,$.WARN,...z),this._logHandler(this,$.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...z),this._logHandler(this,$.ERROR,...z)}}function ve(Z){u.forEach(z=>{z.setLogLevel(Z)})}function we(Z,z){for(const J of u){let He=null;z&&z.level&&(He=O[z.level]),J.userLogHandler=null===Z?null:(ke,De,...it)=>{const Ee=it.map(ye=>{if(null==ye)return null;if("string"==typeof ye)return ye;if("number"==typeof ye||"boolean"==typeof ye)return ye.toString();if(ye instanceof Error)return ye.message;try{return JSON.stringify(ye)}catch{return null}}).filter(ye=>ye).join(" ");De>=(He??ke.logLevel)&&Z({level:$[De].toLowerCase(),message:Ee,args:it,type:ke.name})}}}},259:(bt,Ne,U)=>{U.d(Ne,{C6:()=>u.getApps,KN:()=>u.registerVersion,Mq:()=>u.getApp,ZF:()=>u.initializeApp});var u=U(6881);(0,u.registerVersion)("firebase","9.23.0","app")},9260:(bt,Ne,U)=>{U.d(Ne,{Z:()=>u.Z});var u=U(3942);u.Z.registerVersion("firebase","9.23.0","app-compat")},9568:(bt,Ne,U)=>{U.r(Ne);var u=U(5861),$=U(3942),O=U(1389),ie=U(2090),pe=(U(6881),U(1877),U(4859));function ve(){return window}function z(){return(z=(0,u.Z)(function*(F,N,R){var Y;const{BuildInfo:be}=ve();(0,O.as)(N.sessionId,"AuthEvent did not contain a session ID");const Ke=yield ye(N.sessionId),mt={};return(0,O.at)()?mt.ibi=be.packageName:(0,O.au)()?mt.apn=be.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),be.displayName&&(mt.appDisplayName=be.displayName),mt.sessionId=Ke,(0,O.aw)(F,R,N.type,void 0,null!==(Y=N.eventId)&&void 0!==Y?Y:void 0,mt)})).apply(this,arguments)}function He(){return(He=(0,u.Z)(function*(F){const{BuildInfo:N}=ve(),R={};(0,O.at)()?R.iosBundleId=N.packageName:(0,O.au)()?R.androidPackageName=N.packageName:(0,O.av)(F,"operation-not-supported-in-this-environment"),yield(0,O.ax)(F,R)})).apply(this,arguments)}function it(){return(it=(0,u.Z)(function*(F,N,R){const{cordova:Y}=ve();let be=()=>{};try{yield new Promise((Ke,mt)=>{let Ce=null;function tt(){var Lt;Ke();const on=null===(Lt=Y.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof on&&on(),"function"==typeof R?.close&&R.close()}function at(){Ce||(Ce=window.setTimeout(()=>{mt((0,O.az)(F,"redirect-cancelled-by-user"))},2e3))}function Qt(){"visible"===document?.visibilityState&&at()}N.addPassiveListener(tt),document.addEventListener("resume",at,!1),(0,O.au)()&&document.addEventListener("visibilitychange",Qt,!1),be=()=>{N.removePassiveListener(tt),document.removeEventListener("resume",at,!1),document.removeEventListener("visibilitychange",Qt,!1),Ce&&window.clearTimeout(Ce)}})}finally{be()}})).apply(this,arguments)}function ye(F){return yt.apply(this,arguments)}function yt(){return(yt=(0,u.Z)(function*(F){const N=pt(F),R=yield crypto.subtle.digest("SHA-256",N);return Array.from(new Uint8Array(R)).map(be=>be.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pt(F){if((0,O.as)(/[0-9a-zA-Z]+/.test(F),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(F);const N=new ArrayBuffer(F.length),R=new Uint8Array(N);for(let Y=0;Y<F.length;Y++)R[Y]=F.charCodeAt(Y);return R}class Ie extends O.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(N=>{this.resolveInialized=N})}addPassiveListener(N){this.passiveListeners.add(N)}removePassiveListener(N){this.passiveListeners.delete(N)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(N){return this.resolveInialized(),this.passiveListeners.forEach(R=>R(N)),super.onEvent(N)}initialized(){var N=this;return(0,u.Z)(function*(){yield N.initPromise})()}}function qe(F){return le.apply(this,arguments)}function le(){return(le=(0,u.Z)(function*(F){const N=yield gt()._get(zt(F));return N&&(yield gt()._remove(zt(F))),N})).apply(this,arguments)}function St(){const F=[],N="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let R=0;R<20;R++){const Y=Math.floor(Math.random()*N.length);F.push(N.charAt(Y))}return F.join("")}function gt(){return(0,O.aC)(O.b)}function zt(F){return(0,O.aD)("authEvent",F.config.apiKey,F.name)}function pr(F){if(!F?.includes("?"))return{};const[N,...R]=F.split("?");return(0,ie.zd)(R.join("?"))}function te(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.az)("no-auth-event")}}function ut(){var F;return(null===(F=self?.location)||void 0===F?void 0:F.protocol)||null}function en(F=(0,ie.z$)()){return!("file:"!==ut()&&"ionic:"!==ut()&&"capacitor:"!==ut()||!F.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){try{const F=self.localStorage,N=O.aL();if(F)return F.setItem(N,"1"),F.removeItem(N),!function fn(F=(0,ie.z$)()){return function rn(){return(0,ie.w1)()&&11===document?.documentMode}()||function Rn(F=(0,ie.z$)()){return/Edge\/\d+/.test(F)}(F)}()||(0,ie.hl)()}catch{return xn()&&(0,ie.hl)()}return!1}function xn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Dt(){return"http:"===ut()||"https:"===ut()}()||(0,ie.ru)()||en())&&!function Pt(){return(0,ie.b$)()||(0,ie.UG)()}()&&Qn()&&!xn()}function gr(){return en()&&typeof document<"u"}function lt(){return(lt=(0,u.Z)(function*(){return!!gr()&&new Promise(F=>{const N=setTimeout(()=>{F(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(N),F(!0)})})})).apply(this,arguments)}const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},qn=O.aA,Fi="persistence";function Nn(F){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,u.Z)(function*(F){yield F._initializationPromise;const N=dt(),R=O.aD(Fi,F.config.apiKey,F.name);N&&N.setItem(R,F._getPersistence())})).apply(this,arguments)}function dt(){var F;try{return(null===(F=function mr(){return typeof window<"u"?window:null}())||void 0===F?void 0:F.sessionStorage)||null}catch{return null}}const It=O.aA;class tn{constructor(){this.browserResolver=O.aC(O.k),this.cordovaResolver=O.aC(class es{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(N){var R=this;return(0,u.Z)(function*(){const Y=N._key();let be=R.eventManagers.get(Y);return be||(be=new Ie(N),R.eventManagers.set(Y,be),R.attachCallbackListeners(N,be)),be})()}_openPopup(N){(0,O.av)(N,"operation-not-supported-in-this-environment")}_openRedirect(N,R,Y,be){var Ke=this;return(0,u.Z)(function*(){!function Ee(F){var N,R,Y,be,Ke,mt,Ce,tt,at,Qt;const Lt=ve();(0,O.aA)("function"==typeof(null===(N=Lt?.universalLinks)||void 0===N?void 0:N.subscribe),F,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aA)(typeof(null===(R=Lt?.BuildInfo)||void 0===R?void 0:R.packageName)<"u",F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aA)("function"==typeof(null===(Ke=null===(be=null===(Y=Lt?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===be?void 0:be.browsertab)||void 0===Ke?void 0:Ke.openUrl),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(tt=null===(Ce=null===(mt=Lt?.cordova)||void 0===mt?void 0:mt.plugins)||void 0===Ce?void 0:Ce.browsertab)||void 0===tt?void 0:tt.isAvailable),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aA)("function"==typeof(null===(Qt=null===(at=Lt?.cordova)||void 0===at?void 0:at.InAppBrowser)||void 0===Qt?void 0:Qt.open),F,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(N);const mt=yield Ke._initialize(N);yield mt.initialized(),mt.resetRedirect(),(0,O.aG)(),yield Ke._originValidation(N);const Ce=function xe(F,N,R=null){return{type:N,eventId:R,urlResponse:null,sessionId:St(),postBody:null,tenantId:F.tenantId,error:(0,O.az)(F,"no-auth-event")}}(N,Y,be);yield function ze(F,N){return gt()._set(zt(F),N)}(N,Ce);const tt=yield function Z(F,N,R){return z.apply(this,arguments)}(N,Ce,R),at=yield function ke(F){const{cordova:N}=ve();return new Promise(R=>{N.plugins.browsertab.isAvailable(Y=>{let be=null;Y?N.plugins.browsertab.openUrl(F):be=N.InAppBrowser.open(F,(0,O.ay)()?"_blank":"_system","location=yes"),R(be)})})}(tt);return function De(F,N,R){return it.apply(this,arguments)}(N,mt,at)})()}_isIframeWebStorageSupported(N,R){throw new Error("Method not implemented.")}_originValidation(N){const R=N._key();return this.originValidationPromises[R]||(this.originValidationPromises[R]=function J(F){return He.apply(this,arguments)}(N)),this.originValidationPromises[R]}attachCallbackListeners(N,R){const{universalLinks:Y,handleOpenURL:be,BuildInfo:Ke}=ve(),mt=setTimeout((0,u.Z)(function*(){yield qe(N),R.onEvent(te())}),500),Ce=function(){var Qt=(0,u.Z)(function*(Lt){clearTimeout(mt);const on=yield qe(N);let $r=null;on&&Lt?.url&&($r=function Qe(F,N){var R,Y;const be=function Xi(F){const N=pr(F),R=N.link?decodeURIComponent(N.link):void 0,Y=pr(R).link,be=N.deep_link_id?decodeURIComponent(N.deep_link_id):void 0;return pr(be).link||be||Y||R||F}(N);if(be.includes("/__/auth/callback")){const Ke=pr(be),mt=Ke.firebaseError?function ct(F){try{return JSON.parse(F)}catch{return null}}(decodeURIComponent(Ke.firebaseError)):null,Ce=null===(Y=null===(R=mt?.code)||void 0===R?void 0:R.split("auth/"))||void 0===Y?void 0:Y[1],tt=Ce?(0,O.az)(Ce):null;return tt?{type:F.type,eventId:F.eventId,tenantId:F.tenantId,error:tt,urlResponse:null,sessionId:null,postBody:null}:{type:F.type,eventId:F.eventId,tenantId:F.tenantId,sessionId:F.sessionId,urlResponse:be,postBody:null}}return null}(on,Lt.url)),R.onEvent($r||te())});return function(on){return Qt.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,Ce);const tt=be,at=`${Ke.packageName.toLowerCase()}://`;ve().handleOpenURL=function(){var Qt=(0,u.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(at)&&Ce({url:Lt}),"function"==typeof tt)try{tt(Lt)}catch(on){console.error(on)}});return function(Lt){return Qt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aE,this._overrideRedirectResult=O.aF}_initialize(N){var R=this;return(0,u.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._initialize(N)})()}_openPopup(N,R,Y,be){var Ke=this;return(0,u.Z)(function*(){return yield Ke.selectUnderlyingResolver(),Ke.assertedUnderlyingResolver._openPopup(N,R,Y,be)})()}_openRedirect(N,R,Y,be){var Ke=this;return(0,u.Z)(function*(){return yield Ke.selectUnderlyingResolver(),Ke.assertedUnderlyingResolver._openRedirect(N,R,Y,be)})()}_isIframeWebStorageSupported(N,R){this.assertedUnderlyingResolver._isIframeWebStorageSupported(N,R)}_originValidation(N){return this.assertedUnderlyingResolver._originValidation(N)}get _shouldInitProactively(){return gr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return It(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var N=this;return(0,u.Z)(function*(){if(N.underlyingResolver)return;const R=yield function wi(){return lt.apply(this,arguments)}();N.underlyingResolver=R?N.cordovaResolver:N.browserResolver})()}}function Qr(F){return F.unwrap()}function rr(F){return Zn(F)}function Zn(F){const{_tokenResponse:N}=F instanceof ie.ZR?F.customData:F;if(!N)return null;if(!(F instanceof ie.ZR)&&"temporaryProof"in N&&"phoneNumber"in N)return O.P.credentialFromResult(F);const R=N.providerId;if(!R||R===O.p.PASSWORD)return null;let Y;switch(R){case O.p.GOOGLE:Y=O.V;break;case O.p.FACEBOOK:Y=O.U;break;case O.p.GITHUB:Y=O.W;break;case O.p.TWITTER:Y=O.Z;break;default:const{oauthIdToken:be,oauthAccessToken:Ke,oauthTokenSecret:mt,pendingToken:Ce,nonce:tt}=N;return Ke||mt||be||Ce?Ce?R.startsWith("saml.")?O.aO._create(R,Ce):O.L._fromParams({providerId:R,signInMethod:R,pendingToken:Ce,idToken:be,accessToken:Ke}):new O.X(R).credential({idToken:be,accessToken:Ke,rawNonce:tt}):null}return F instanceof ie.ZR?Y.credentialFromError(F):Y.credentialFromResult(F)}function Zt(F,N){return N.catch(R=>{throw R instanceof ie.ZR&&function xt(F,N){var R;const Y=null===(R=N.customData)||void 0===R?void 0:R._tokenResponse;if("auth/multi-factor-auth-required"===N?.code)N.resolver=new jn(F,O.aq(F,N));else if(Y){const be=Zn(N),Ke=N;be&&(Ke.credential=be,Ke.tenantId=Y.tenantId||void 0,Ke.email=Y.email||void 0,Ke.phoneNumber=Y.phoneNumber||void 0)}}(F,R),R}).then(R=>{const be=R.user;return{operationType:R.operationType,credential:rr(R),additionalUserInfo:O.ao(R),user:bn.getOrCreate(be)}})}function ts(F,N){return sn.apply(this,arguments)}function sn(){return(sn=(0,u.Z)(function*(F,N){const R=yield N;return{verificationId:R.verificationId,confirm:Y=>Zt(F,R.confirm(Y))}})).apply(this,arguments)}class jn{constructor(N,R){this.resolver=R,this.auth=function _r(F){return F.wrapped()}(N)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(N){return Zt(Qr(this.auth),this.resolver.resolveSignIn(N))}}class bn{constructor(N){this._delegate=N,this.multiFactor=O.ar(N)}static getOrCreate(N){return bn.USER_MAP.has(N)||bn.USER_MAP.set(N,new bn(N)),bn.USER_MAP.get(N)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(N){return this._delegate.getIdTokenResult(N)}getIdToken(N){return this._delegate.getIdToken(N)}linkAndRetrieveDataWithCredential(N){return this.linkWithCredential(N)}linkWithCredential(N){var R=this;return(0,u.Z)(function*(){return Zt(R.auth,O.a0(R._delegate,N))})()}linkWithPhoneNumber(N,R){var Y=this;return(0,u.Z)(function*(){return ts(Y.auth,O.l(Y._delegate,N,R))})()}linkWithPopup(N){var R=this;return(0,u.Z)(function*(){return Zt(R.auth,O.d(R._delegate,N,tn))})()}linkWithRedirect(N){var R=this;return(0,u.Z)(function*(){return yield Nn(O.aH(R.auth)),O.g(R._delegate,N,tn)})()}reauthenticateAndRetrieveDataWithCredential(N){return this.reauthenticateWithCredential(N)}reauthenticateWithCredential(N){var R=this;return(0,u.Z)(function*(){return Zt(R.auth,O.a1(R._delegate,N))})()}reauthenticateWithPhoneNumber(N,R){return ts(this.auth,O.r(this._delegate,N,R))}reauthenticateWithPopup(N){return Zt(this.auth,O.e(this._delegate,N,tn))}reauthenticateWithRedirect(N){var R=this;return(0,u.Z)(function*(){return yield Nn(O.aH(R.auth)),O.h(R._delegate,N,tn)})()}sendEmailVerification(N){return O.ae(this._delegate,N)}unlink(N){var R=this;return(0,u.Z)(function*(){return yield O.an(R._delegate,N),R})()}updateEmail(N){return O.aj(this._delegate,N)}updatePassword(N){return O.ak(this._delegate,N)}updatePhoneNumber(N){return O.u(this._delegate,N)}updateProfile(N){return O.ai(this._delegate,N)}verifyBeforeUpdateEmail(N,R){return O.af(this._delegate,N,R)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}bn.USER_MAP=new WeakMap;const Xn=O.aA;let kn=(()=>{class F{constructor(R,Y){if(this.app=R,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:be}=R.options;Xn(be,"invalid-api-key",{appName:R.name}),Xn(be,"invalid-api-key",{appName:R.name});const Ke=typeof window<"u"?tn:void 0;this._delegate=Y.initialize({options:{persistence:er(be,R.name),popupRedirectResolver:Ke}}),this._delegate._updateErrorMap(O.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(R){this._delegate.languageCode=R}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(R){this._delegate.tenantId=R}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(R,Y){O.I(this._delegate,R,Y)}applyActionCode(R){return O.a5(this._delegate,R)}checkActionCode(R){return O.a6(this._delegate,R)}confirmPasswordReset(R,Y){return O.a4(this._delegate,R,Y)}createUserWithEmailAndPassword(R,Y){var be=this;return(0,u.Z)(function*(){return Zt(be._delegate,O.a8(be._delegate,R,Y))})()}fetchProvidersForEmail(R){return this.fetchSignInMethodsForEmail(R)}fetchSignInMethodsForEmail(R){return O.ad(this._delegate,R)}isSignInWithEmailLink(R){return O.ab(this._delegate,R)}getRedirectResult(){var R=this;return(0,u.Z)(function*(){Xn(Bn(),R._delegate,"operation-not-supported-in-this-environment");const Y=yield O.j(R._delegate,tn);return Y?Zt(R._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(R){!function Ae(F,N){(0,O.aH)(F)._logFramework(N)}(this._delegate,R)}onAuthStateChanged(R,Y,be){const{next:Ke,error:mt,complete:Ce}=Jr(R,Y,be);return this._delegate.onAuthStateChanged(Ke,mt,Ce)}onIdTokenChanged(R,Y,be){const{next:Ke,error:mt,complete:Ce}=Jr(R,Y,be);return this._delegate.onIdTokenChanged(Ke,mt,Ce)}sendSignInLinkToEmail(R,Y){return O.aa(this._delegate,R,Y)}sendPasswordResetEmail(R,Y){return O.a3(this._delegate,R,Y||void 0)}setPersistence(R){var Y=this;return(0,u.Z)(function*(){let be;switch(function Yr(F,N){qn(Object.values(Jn).includes(N),F,"invalid-persistence-type"),(0,ie.b$)()?qn(N!==Jn.SESSION,F,"unsupported-persistence-type"):(0,ie.UG)()?qn(N===Jn.NONE,F,"unsupported-persistence-type"):xn()?qn(N===Jn.NONE||N===Jn.LOCAL&&(0,ie.hl)(),F,"unsupported-persistence-type"):qn(N===Jn.NONE||Qn(),F,"unsupported-persistence-type")}(Y._delegate,R),R){case Jn.SESSION:be=O.a;break;case Jn.LOCAL:be=(yield O.aC(O.i)._isAvailable())?O.i:O.b;break;case Jn.NONE:be=O.N;break;default:return O.av("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(be)})()}signInAndRetrieveDataWithCredential(R){return this.signInWithCredential(R)}signInAnonymously(){return Zt(this._delegate,O._(this._delegate))}signInWithCredential(R){return Zt(this._delegate,O.$(this._delegate,R))}signInWithCustomToken(R){return Zt(this._delegate,O.a2(this._delegate,R))}signInWithEmailAndPassword(R,Y){return Zt(this._delegate,O.a9(this._delegate,R,Y))}signInWithEmailLink(R,Y){return Zt(this._delegate,O.ac(this._delegate,R,Y))}signInWithPhoneNumber(R,Y){return ts(this._delegate,O.s(this._delegate,R,Y))}signInWithPopup(R){var Y=this;return(0,u.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),Zt(Y._delegate,O.c(Y._delegate,R,tn))})()}signInWithRedirect(R){var Y=this;return(0,u.Z)(function*(){return Xn(Bn(),Y._delegate,"operation-not-supported-in-this-environment"),yield Nn(Y._delegate),O.f(Y._delegate,R,tn)})()}updateCurrentUser(R){return this._delegate.updateCurrentUser(R)}verifyPasswordResetCode(R){return O.a7(this._delegate,R)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return F.Persistence=Jn,F})();function Jr(F,N,R){let Y=F;"function"!=typeof F&&({next:Y,error:N,complete:R}=F);const be=Y;return{next:mt=>be(mt&&bn.getOrCreate(mt)),error:N,complete:R}}function er(F,N){const R=function qt(F,N){const R=dt();if(!R)return[];const Y=O.aD(Fi,F,N);switch(R.getItem(Y)){case Jn.NONE:return[O.N];case Jn.LOCAL:return[O.i,O.a];case Jn.SESSION:return[O.a];default:return[]}}(F,N);if(typeof self<"u"&&!R.includes(O.i)&&R.push(O.i),typeof window<"u")for(const Y of[O.b,O.a])R.includes(Y)||R.push(Y);return R.includes(O.N)||R.push(O.N),R}class Ei{constructor(){this.providerId="phone",this._delegate=new O.P(Qr($.Z.auth()))}static credential(N,R){return O.P.credential(N,R)}verifyPhoneNumber(N,R){return this._delegate.verifyPhoneNumber(N,R)}unwrap(){return this._delegate}}Ei.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ei.PROVIDER_ID=O.P.PROVIDER_ID;const yr=O.aA;class jr{constructor(N,R,Y=$.Z.app()){var be;yr(null===(be=Y.options)||void 0===be?void 0:be.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new O.R(N,R,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(F){F.INTERNAL.registerComponent(new pe.wA("auth-compat",N=>{const R=N.getProvider("app-compat").getImmediate(),Y=N.getProvider("auth");return new kn(R,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.Q,FacebookAuthProvider:O.U,GithubAuthProvider:O.W,GoogleAuthProvider:O.V,OAuthProvider:O.X,SAMLAuthProvider:O.Y,PhoneAuthProvider:Ei,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:jr,TwitterAuthProvider:O.Z,Auth:kn,AuthCredential:O.J,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),F.registerVersion("@firebase/auth-compat","0.4.2")}($.Z)},5861:(bt,Ne,U)=>{function u(O,ie,ce,_e,pe,ve,we){try{var Z=O[ve](we),z=Z.value}catch(J){return void ce(J)}Z.done?ie(z):Promise.resolve(z).then(_e,pe)}function $(O){return function(){var ie=this,ce=arguments;return new Promise(function(_e,pe){var ve=O.apply(ie,ce);function we(z){u(ve,_e,pe,we,Z,"next",z)}function Z(z){u(ve,_e,pe,we,Z,"throw",z)}we(void 0)})}}U.d(Ne,{Z:()=>$})},7582:(bt,Ne,U)=>{function ie(se,te){var Ae={};for(var he in se)Object.prototype.hasOwnProperty.call(se,he)&&te.indexOf(he)<0&&(Ae[he]=se[he]);if(null!=se&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(he=Object.getOwnPropertySymbols(se);Re<he.length;Re++)te.indexOf(he[Re])<0&&Object.prototype.propertyIsEnumerable.call(se,he[Re])&&(Ae[he[Re]]=se[he[Re]])}return Ae}function J(se,te,Ae,he){return new(Ae||(Ae=Promise))(function(Me,ut){function Dt(rn){try{Pt(he.next(rn))}catch(Rn){ut(Rn)}}function en(rn){try{Pt(he.throw(rn))}catch(Rn){ut(Rn)}}function Pt(rn){rn.done?Me(rn.value):function Re(Me){return Me instanceof Ae?Me:new Ae(function(ut){ut(Me)})}(rn.value).then(Dt,en)}Pt((he=he.apply(se,te||[])).next())})}function Se(se){return this instanceof Se?(this.v=se,this):new Se(se)}function Ie(se,te,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,he=Ae.apply(se,te||[]),Me=[];return Re={},ut("next"),ut("throw"),ut("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function ut(fn){he[fn]&&(Re[fn]=function(Qn){return new Promise(function(xn,Bn){Me.push([fn,Qn,xn,Bn])>1||Dt(fn,Qn)})})}function Dt(fn,Qn){try{!function en(fn){fn.value instanceof Se?Promise.resolve(fn.value.v).then(Pt,rn):Rn(Me[0][2],fn)}(he[fn](Qn))}catch(xn){Rn(Me[0][3],xn)}}function Pt(fn){Dt("next",fn)}function rn(fn){Dt("throw",fn)}function Rn(fn,Qn){fn(Qn),Me.shift(),Me.length&&Dt(Me[0][0],Me[0][1])}}function ze(se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,te=se[Symbol.asyncIterator];return te?te.call(se):(se=function it(se){var te="function"==typeof Symbol&&Symbol.iterator,Ae=te&&se[te],he=0;if(Ae)return Ae.call(se);if(se&&"number"==typeof se.length)return{next:function(){return se&&he>=se.length&&(se=void 0),{value:se&&se[he++],done:!se}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(se),Ae={},he("next"),he("throw"),he("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function he(Me){Ae[Me]=se[Me]&&function(ut){return new Promise(function(Dt,en){!function Re(Me,ut,Dt,en){Promise.resolve(en).then(function(Pt){Me({value:Pt,done:Dt})},ut)}(Dt,en,(ut=se[Me](ut)).done,ut.value)})}}}U.d(Ne,{FC:()=>Ie,KL:()=>ze,_T:()=>ie,mG:()=>J,qq:()=>Se}),"function"==typeof SuppressedError&&SuppressedError}},bt=>{bt(bt.s=4227)}]);